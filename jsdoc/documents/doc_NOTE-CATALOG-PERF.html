<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>doc/NOTE-CATALOG-PERF | geopf-extensions-openlayers</title><meta name="description" content="Documentation for geopf-extensions-openlayers"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">geopf-extensions-openlayers</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">geopf-extensions-openlayers</a></li><li><a href="doc_NOTE-CATALOG-PERF.html">doc/NOTE-CATALOG-PERF</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="informations-utiles-sur-le-gestionnaire-du-catalogue-copilot" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Informations utiles sur le gestionnaire du catalogue (Copilot)<a href="#informations-utiles-sur-le-gestionnaire-du-catalogue-copilot" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p>Questions / Réponses realisées avec Copilot</p>
</blockquote>
<a id="voici-plusieurs-pistes-concrètes-pour-optimiser-et-améliorer-les-performances" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Voici plusieurs pistes concrètes pour optimiser et améliorer les performances<a href="#voici-plusieurs-pistes-concrètes-pour-optimiser-et-améliorer-les-performances" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p><a href="https://web.dev/articles/dom-size-and-interactivity?hl=fr">https://web.dev/articles/dom-size-and-interactivity?hl=fr</a></p>
<p><a href="https://learn.microsoft.com/en-us/microsoft-edge/devtools/performance/selector-stats">https://learn.microsoft.com/en-us/microsoft-edge/devtools/performance/selector-stats</a></p>
<a id="1-chargement-asynchrone-et-lazy-loading" class="tsd-anchor"></a><h3 class="tsd-anchor-link">1. <strong>Chargement asynchrone et lazy loading</strong><a href="#1-chargement-asynchrone-et-lazy-loading" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✔️ <strong>Chargement différé des couches</strong> : Ne charge que la configuration ou les couches visibles à l’ouverture du panneau, ou lors d’un changement d’onglet/catégorie.</li>
<li>✔️ <strong>Pagination ou virtualisation</strong> : Si le catalogue contient beaucoup de couches, affiche-les par pages ou utilise une liste virtuelle (DOM limité aux éléments visibles).</li>
</ul>
<hr>
<a id="2-manipulation-dom-efficace" class="tsd-anchor"></a><h3 class="tsd-anchor-link">2. <strong>Manipulation DOM efficace</strong><a href="#2-manipulation-dom-efficace" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✔️ <strong>Minimiser les accès et modifications DOM</strong> : Utilise des fragments (<code>DocumentFragment</code>) pour construire les listes avant insertion, évite les suppressions/ajouts répétés.</li>
<li>✔️ <strong>Batch update</strong> : Grouper les modifications DOM lors des filtres ou changements de catégories.</li>
</ul>
<hr>
<a id="3-optimisation-des-filtres-et-recherches" class="tsd-anchor"></a><h3 class="tsd-anchor-link">3. <strong>Optimisation des filtres et recherches</strong><a href="#3-optimisation-des-filtres-et-recherches" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>❌ <strong>Pré-indexation</strong> : Prépare un index (par critère de recherche) lors du chargement pour accélérer les recherches.</li>
<li>✅ <strong>Debounce sur la recherche</strong> : Ajoute un délai (debounce) sur l’input de recherche pour éviter de recalculer à chaque frappe.</li>
</ul>
<hr>
<a id="4-gestion-mémoire-et-objets" class="tsd-anchor"></a><h3 class="tsd-anchor-link">4. <strong>Gestion mémoire et objets</strong><a href="#4-gestion-mémoire-et-objets" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✅ <strong>Nettoyage des listeners</strong> : Vérifie que tous les écouteurs sont bien retirés lors de la destruction ou du retrait du contrôle.</li>
<li>❌ <strong>Réutilisation des objets</strong> : Réutilise les objets de configuration et évite les copies profondes inutiles.</li>
</ul>
<hr>
<a id="5-affichage-et-rendu" class="tsd-anchor"></a><h3 class="tsd-anchor-link">5. <strong>Affichage et rendu</strong><a href="#5-affichage-et-rendu" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✔️ <strong>Affichage conditionnel</strong> : Ne crée les éléments DOM des catégories/onglets que lorsqu’ils sont affichés.</li>
<li>✅ <strong>Utilisation de classes CSS</strong> : Préfère masquer/afficher via des classes plutôt que de supprimer/ajouter des éléments DOM.</li>
</ul>
<hr>
<a id="6-optimisation-du-tri-et-des-boucles" class="tsd-anchor"></a><h3 class="tsd-anchor-link">6. <strong>Optimisation du tri et des boucles</strong><a href="#6-optimisation-du-tri-et-des-boucles" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✔️ <strong>Tri une seule fois</strong> : Trie la liste des couches une seule fois lors du chargement, pas à chaque ajout.</li>
<li>✔️ <strong>Boucles efficaces</strong> : Utilise <code>for...of</code> ou <code>Object.keys()</code> pour itérer sur les objets, évite les boucles imbriquées inutiles.</li>
</ul>
<hr>
<a id="7-exemple-damélioration-sur-le-filtre-de-recherche" class="tsd-anchor"></a><h3 class="tsd-anchor-link">7. <strong>Exemple d’amélioration sur le filtre de recherche</strong><a href="#7-exemple-damélioration-sur-le-filtre-de-recherche" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>✅ Ajoute un debounce sur la recherche :</p>
<pre><code class="javascript"><span class="hl-9">// ...existing code...</span><br/><span class="hl-0">onSearchCatalogInputChange</span><span class="hl-1"> () {</span><br/><span class="hl-1">    </span><span class="hl-0">clearTimeout</span><span class="hl-1">(</span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-4">_searchTimeout</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-4">_searchTimeout</span><span class="hl-1"> = </span><span class="hl-0">setTimeout</span><span class="hl-1">(() </span><span class="hl-3">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-3">this</span><span class="hl-1">.</span><span class="hl-0">onSearchCatalogButtonClick</span><span class="hl-1">();</span><br/><span class="hl-1">    }, </span><span class="hl-8">200</span><span class="hl-1">); </span><span class="hl-9">// 200ms de délai</span><br/><span class="hl-1">}</span><br/><span class="hl-9">// ...existing code...</span>
</code><button type="button">Copy</button></pre>

<hr>
<a id="8-audit-et-outils" class="tsd-anchor"></a><h3 class="tsd-anchor-link">8. <strong>Audit et outils</strong><a href="#8-audit-et-outils" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li><strong>Profiler navigateur</strong> : Utilise les outils de profilage (Chrome DevTools) pour repérer les lenteurs lors de l’ouverture du catalogue ou de la recherche.</li>
<li><strong>Audit Lighthouse</strong> : Pour vérifier l’impact sur le temps de chargement et la réactivité.</li>
</ul>
<hr>
<a id="9-documentation-et-bonnes-pratiques" class="tsd-anchor"></a><h3 class="tsd-anchor-link">9. <strong>Documentation et bonnes pratiques</strong><a href="#9-documentation-et-bonnes-pratiques" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul>
<li>✔️ Documente les points critiques (ex : pourquoi tel choix de structure, comment étendre le contrôle sans impacter les perfs).</li>
<li>❌ Ajoute des tests de performance si le catalogue évolue.</li>
</ul>
<hr>
<p><strong>En résumé</strong> :</p>
<ul>
<li>Charge et affiche uniquement ce qui est nécessaire.</li>
<li>Optimise les accès DOM et les traitements en mémoire.</li>
<li>Nettoie bien les ressources.</li>
<li>Utilise les outils de profilage pour cibler les vrais points à améliorer.</li>
</ul>
<a id="" class="tsd-anchor"></a><h2 class="tsd-anchor-link">...</h2></div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#informations-utiles-sur-le-gestionnaire-du-catalogue-copilot"><span>Informations utiles sur le gestionnaire du catalogue (<wbr/>Copilot)</span></a><ul><li><a href="#voici-plusieurs-pistes-concrètes-pour-optimiser-et-améliorer-les-performances"><span>Voici plusieurs pistes concrètes pour optimiser et améliorer les performances</span></a></li><li><ul><li><a href="#1-chargement-asynchrone-et-lazy-loading"><span>1. <wbr/>Chargement asynchrone et lazy loading</span></a></li><li><a href="#2-manipulation-dom-efficace"><span>2. <wbr/>Manipulation DOM efficace</span></a></li><li><a href="#3-optimisation-des-filtres-et-recherches"><span>3. <wbr/>Optimisation des filtres et recherches</span></a></li><li><a href="#4-gestion-mémoire-et-objets"><span>4. <wbr/>Gestion mémoire et objets</span></a></li><li><a href="#5-affichage-et-rendu"><span>5. <wbr/>Affichage et rendu</span></a></li><li><a href="#6-optimisation-du-tri-et-des-boucles"><span>6. <wbr/>Optimisation du tri et des boucles</span></a></li><li><a href="#7-exemple-damélioration-sur-le-filtre-de-recherche"><span>7. <wbr/>Exemple d’amélioration sur le filtre de recherche</span></a></li><li><a href="#8-audit-et-outils"><span>8. <wbr/>Audit et outils</span></a></li><li><a href="#9-documentation-et-bonnes-pratiques"><span>9. <wbr/>Documentation et bonnes pratiques</span></a></li></ul></li><li><a href="#"><span>...</span></a></li></ul></div></details></div><div class="site-menu"><nav id="tsd-sidebar-links" class="tsd-navigation"><a href="https://cartes.gouv.fr/cartes">cartes.gouv.fr</a><a href="https://geoportail.gouv.fr/">geoportail</a><a href="https://github.com/IGNF/geopf-extensions-openlayers">github</a></nav><nav class="tsd-navigation"><a href="../modules.html">geopf-extensions-openlayers</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
