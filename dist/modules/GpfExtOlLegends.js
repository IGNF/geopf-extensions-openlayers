/*!
 * @brief geopf-extensions-openlayers
 *
 * This software is released under the licence AGPL-3.0
 * @see https://www.gnu.org/licenses/agpl-3.0.html#license-text
 * @see https://www.gnu.org/licenses/agpl-3.0.en.html#license-text
 *
 * @copyright copyright (c) IGN 
 * @license AGPL-3.0
 * @author IGN
 * @version 1.0.0-beta.5-401
 * @date 11/07/2025
 *
 */(()=>{var e={3065:function(e,t,n){var o,r;!function(){"use strict";o=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],r={},i=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(o){return"debug"===o&&(o="log"),typeof console!==t&&("trace"===o&&n?l:void 0!==console[o]?a(console,o):void 0!==console.log?a(console,"log"):e)}function c(){for(var n=this.getLevel(),r=0;r<o.length;r++){var i=o[r];this[i]=r<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function d(e,t,n){return s(e)||u.apply(this,arguments)}function f(e,n){var a,l,s,u=this,f="loglevel";function p(e){var n=(o[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch(e){}}}function g(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,o=encodeURIComponent(f),r=n.indexOf(o+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+o.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function h(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function v(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||d,u.getLevel=function(){return null!=s?s:null!=l?l:a},u.setLevel=function(e,t){return s=v(e),!1!==t&&p(s),c.call(u)},u.setDefaultLevel=function(e){l=v(e),g()||u.setLevel(e,!1)},u.resetLevel=function(){s=null,h(),c.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(i!==u&&(a=v(i.getLevel())),c.call(u),i===u)for(var e in r)r[e].rebuild()},a=v(i?i.getLevel():"WARN");var m=g();null!=m&&(s=v(m)),c.call(u)}(i=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new f(e,i.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=p),i},i.getLoggers=function(){return r},i.default=i,i},void 0===(r="function"==typeof o?o.call(t,n,t,e):o)||(e.exports=r)}()}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=Array(t);n<t;n++)o[n]=e[n];return o}n.d(o,{default:()=>Y});var r=["GPoverviewMap","GPfullScreen"];const i=function(t,n){var o=function(t,n){var o=[].concat(r,[n]),i=[];if(t&&t.includes("left")){var a=document.getElementById("position-container-bottom-left"),l=document.getElementById("position-container-top-left");i=[].concat(e(a.children),e(l.children))}if(t&&t.includes("right")){var s=document.getElementById("position-container-bottom-right"),c=document.getElementById("position-container-top-right");i=[].concat(e(s.children),e(c.children))}return i.filter(function(e){var t=e.id.match(/(\w+)-[0-9]+/)[1],n=o.includes(t);if("true"===e.getElementsByTagName("button")[0].getAttribute("aria-pressed")&&!n)return e})}(t,n);o.length>0&&o[0].getElementsByTagName("button")[0].click()};const a={onPanelOpen:function(){i(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},l=ol.control.Control;const s=function(){return""!==getComputedStyle(document.documentElement).getPropertyValue("--blue-france-sun-113-625")};function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function d(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,h(o.key),o)}}function g(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}function v(e,t,n){return t=y(t),function(e,t){if(t&&("object"==c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,m()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}const w=function(e){function t(e){var n;return f(this,t),n=v(this,t,[{element:(e=e||{}).element,target:e.target,render:e.render}]),e&&e.listable?n.listable=!0:n.listable=!1,e&&e.description?n.description=e.description:n.description="",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}(t,e),g(t,[{key:"setPosition",value:function(e){this.getMap()&&new P(this).set(e)}},{key:"updatePosition",value:function(e){this.getMap()&&new P(this).update(e)}}])}(n.n(l)());var L=["top-left","top-right","bottom-left","bottom-right"],E=new WeakSet,P=function(){return g(function e(t){return f(this,e),u(this,E),this.caller=t,this.container=null,d(E,this,_).call(this,"top-left"),d(E,this,_).call(this,"top-right"),d(E,this,_).call(this,"bottom-left"),d(E,this,_).call(this,"bottom-right"),this},[{key:"set",value:function(e){L.includes(e.toLowerCase())&&(d(E,this,S).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}},{key:"update",value:function(e){L.includes(e.toLowerCase())&&d(E,this,S).call(this,e,!0)}}])}();function O(e){return!!this.container.children["position-container-"+e]}function _(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!d(E,this,O).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}}function S(e,t){var n=this,o=function(e){return n.container.children["position-container-"+e].children.length},r=function(e){return n.container.children["position-container-"+e].offsetWidth},i=function(e){var o=n.container.children["position-container-"+e],r=o.offsetHeight;if(t){e.includes("top")&&(r=0);for(var i=0;i<o.children.length;i++){if(o.children[i].id===n.caller.element.id){r=e.includes("bottom")?r-n.caller.element.offsetHeight:-1*r;break}r-=o.children[i].offsetHeight}}return r},a=function(e){e.style.top="unset",e.style.bottom="unset",e.style.left="unset",e.style.right="unset"};a(this.caller.element),this.caller.element.style.position="unset";var l=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(0!==l.length){var c=0;l.forEach(function(t){if("dialog"===t.nodeName.toLowerCase()){switch(a(t),e.toLowerCase()){case"top-left":s()?t.style.top="0px":t.style.top=o(e)?i(e)+"px":"0px",t.style.left=r(e)+c+"px";break;case"bottom-left":s()?t.style.top="0px":t.style.bottom=o(e)?i(e)+"px":"0px",t.style.left=r(e)+c+"px";break;case"top-right":s()?t.style.top="0px":t.style.top=o(e)?i(e)+"px":"0px",t.style.right=r(e)+c+"px";break;case"bottom-right":s()?t.style.top="0px":t.style.bottom=o(e)?i(e)+"px":"0px",t.style.right=r(e)+c+"px"}c+=t.offsetWidth}})}}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}const x={detectSupport:function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},assign:function(e,t){for(var n in e=e||{},t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},mergeParams:function(e,t,n){if(void 0!==e&&void 0!==t)for(var o in void 0===n&&(n=!0),t)t.hasOwnProperty(o)&&("object"===C(t[o])?e.hasOwnProperty(o)?this.mergeParams(e[o],t[o],n):e[o]=t[o]:e.hasOwnProperty(o)?n&&(e[o]=t[o]):e[o]=t[o])}};var j;const k={generate:(j=Math.floor(Date.now()),function(){return j++}),name:function(e){var t=null,n=e.lastIndexOf("-");return t=-1===n?e:e.substring(0,n),t},index:function(e){var t=null,n=this.name(e),o=n.lastIndexOf("_");return-1!==o&&(t=n.substring(o+1)),t},uuid:function(e){var t=null,n=e.lastIndexOf("-");return-1!==n&&(t=parseInt(e.substring(n+1),10)),t}};var I=n(3065),A={getLogger:function(e){if(void 0===t)var t={env:{VERBOSE:!1}};t.env.VERBOSE?I.enableAll():I.disableAll();var n=e||"default";return I.getLogger(n)},disableAll:function(){var e=I.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=I.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}};const T=A;window.Gp&&(window.Gp.Logger=A);T.getLogger("draggable");const D={dragElement:function(e,t,n){var o,r=0,i=0,a=0,l=0,s=0,c=0;t?t.addEventListener("mousedown",d,!0):e.addEventListener("mousedown",d,!0);var u={bottom:0,left:0,right:0,top:0};function d(t){(t=t||window.event).preventDefault(),r=t.clientX,i=t.clientY,o=e.getBoundingClientRect();var a=n.getBoundingClientRect();u={bottom:a.bottom,left:a.left,right:a.right,top:a.top},document.addEventListener("mouseup",f,!0),document.addEventListener("mousemove",p,!0)}function f(){s-=a,c-=l,document.removeEventListener("mouseup",f,!0),document.removeEventListener("mousemove",p,!0)}function p(t){var n=(t=t||window.event).clientX,d=t.clientY,f=a,p=l;a=r-n,l=i-d;var g=o.left-a,h=o.top-l;if(g<u.left||h<u.top||g+o.width>u.right||h+o.height>u.bottom)a=f,l=p;else{var v=s-a,m=c-l;e.style.transform="translate("+v+"px,"+m+"px)"}}}};const R={_addUID:function(e){return this.uid?e+"-"+this.uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPlegends"),e.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",e},_createShowLegendsPictoElement:function(){var e=this,t=document.createElement("button"),n=document.createElement("span");return t.appendChild(n),t.id=this._addUID("GPshowLegendsPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",t.setAttribute("aria-label","Afficher les légendes"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),e.onShowLegendsClick(t)}):t.attachEvent&&t.attachEvent("onclick",function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),e.onShowLegendsClick(t)}),t},_createLegendsPanelElement:function(){var e=document.createElement("dialog");return e.id=this._addUID("GPlegendsPanel"),e.className="GPpanel gpf-panel fr-modal",e},_createLegendsPanelDivElement:function(){var e=document.createElement("div");return e.className="gpf-panel__legends",e},_createLegendsPanelHeaderElement:function(){var e=document.createElement("div");return e.className="gpf-panel__header_legends",e},_createLegendsPanelIconElement:function(){var e=document.createElement("label");return e.className="gpf-btn-header-legends gpf-btn-icon-header-legends",e.title="Légendes",e},_createLegendsPanelTitleElement:function(){var e=document.createElement("div");return e.className="gpf-panel__title_legends",e.innerHTML="Légendes",e},_createLegendsPanelCloseElement:function(){var e=this,t=document.createElement("button");t.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",t.title="Fermer le panneau";var n=document.createElement("span");return n.className="GPelementHidden gpf-visible",n.innerText="Fermer",t.appendChild(n),t.addEventListener?t.addEventListener("click",function(){document.getElementById(e._addUID("GPshowLegendsPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(e._addUID("GPshowLegendsPicto")).click()}),t},_createLegendElement:function(){var e=document.createElement("div");return e.className="legends-entries gpf-panel__body fr-modal__body",e},_createLegendEntry:function(e){if(e&&e.legends&&e.legends.length){var t=e.legends[0].url,n=function(e){if(function(){if(!window.DOMParser)return!1;var e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0}())return(new DOMParser).parseFromString(e,"text/html").body;var t=document.createElement("div");return t.innerHTML=e,t}('\n                    <div\n                        id="'.concat(e.id,'"\n                        class="legend-entry-container gpf-panel__content fr-modal__content">\n                        <label class="legend-entry-title gpf-label-legends-name fr-label">').concat(e.title,'</label>\n                        <button\n                            id="GPcollapseLegend_ID_').concat(e.id,'"\n                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"\n                            type="button"\n                            title=""\n                            tabindex="0"\n                            aria-pressed="false"></button>\n                        <div id="GPlegend_ID_').concat(e.id,'" class="legend-entry-image gpf-hidden">\n                            <img src="').concat(t,'" alt="').concat(e.desc,'">\n                        </div>\n                    </div>\n                ')),o=n.firstChild.querySelector("button");return o&&o.addEventListener("click",function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n);var o=document.getElementById("GPlegend_ID_"+e.id);n?o.classList.replace("gpf-visible","gpf-hidden"):o.classList.replace("gpf-hidden","gpf-visible")}),n.firstChild}}};function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function M(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,G(o.key),o)}}function G(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=N(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}function B(e,t){if(t&&("object"==N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function U(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(U=function(){return!!e})()}function F(){return F="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=H(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},F.apply(null,arguments)}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function V(e,t){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},V(e,t)}var W=T.getLogger("legends"),z=function(e){function t(e){var n,o,r,i;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=[e=e||{}],r=H(r=t),!((n=B(o,U()?Reflect.construct(r,i||[],H(o).constructor):r.apply(o,i)))instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return n.CLASSNAME="Legends",n.initialize(e),n.container=n.initContainer(),n.element?n.element.appendChild(n.container):n.element=n.container,B(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&V(e,t)}(t,e),n=t,o=[{key:"setMap",value:function(e){if(e){if(this.draggable&&D.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var n=this;e.getLayers().forEach(function(e){n.add(e)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();var o,r,i,a,l;(o=t,r="setMap",i=this,l=F(H(1&(a=3)?o.prototype:o),r,i),2&a&&"function"==typeof l?function(e){return l.apply(i,e)}:l)([e]),this.options.position&&this.setPosition(this.options.position),!1===this.options.gutter&&this.getContainer().classList.add("gpf-button-no-gutter")}},{key:"getContainer",value:function(){return this.container}},{key:"getMetaInformations",value:function(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}},{key:"adds",value:function(e){if(e)for(var t=0;t<e.length;t++)this.add(layer)}},{key:"add",value:function(e){if(e){var t=this._createLegendEntry(this.getMetaInformations(e));if(t)return!this.exist(t)&&(this.panelLegendsEntriesContainer.prepend(t),this.legends.push({obj:e,dom:t}),!0)}return!1}},{key:"remove",value:function(e){var t=!1;if(e)for(var n=0;n<this.legends.length;n++){var o=this.legends[n];if(e.name===o.obj.name&&e.service===o.obj.service){o.dom&&this.legends[n].dom.remove(),this.legends.splice(n,1),t=!0;break}}return t}},{key:"exist",value:function(e){for(var t=!1,n=0;n<this.legends.length;n++)if(this.legends[n].dom.id===e.id){t=!0;break}return t}},{key:"initialize",value:function(e){this.uid=e.id||k.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},x.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}},{key:"initContainer",value:function(){var e=this._createMainContainerElement(),t=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(t);var n=this.panelLegendsContainer=this._createLegendsPanelElement(),o=this._createLegendsPanelDivElement();n.appendChild(o);var r=this.panelLegendsEntriesContainer=this._createLegendElement();if(n.appendChild(r),this.options.panel){var i=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),a=this._createLegendsPanelIconElement();i.appendChild(a);var l=this._createLegendsPanelTitleElement();i.appendChild(l);var s=this.buttonLegendsClose=this._createLegendsPanelCloseElement();i.appendChild(s),o.appendChild(i)}return e.appendChild(n),W.log(e),e}},{key:"addEventsListeners",value:function(e){var t=this;this.eventsListeners["layer:add"]=function(e){W.trace(e),t.add(e.element)||W.error("Layer already added...")},this.eventsListeners["layer:remove"]=function(e){W.trace(e),t.remove(e.element)||W.error("Layer already removed...")},this.eventsListeners["layer:change:position"]=function(e){W.trace(e)},this.eventsListeners["view:change:resolution"]=function(e){W.trace(e);for(var n=t.getMap(),o=0;o<t.legends.length;o++){var r=t.legends[o],i=t.getMetaInformations(r.obj);if(i){for(var a=3570*(n.getView().getResolution()||n.getView().getResolutionForZoom(n.getZoom())),l=i.legends.slice(),s=l[0],c=0;c<l.length;++c){var u=l[c];u.minScaleDenominator||(u.minScaleDenominator=0),(a>s.minScaleDenominator&&u.minScaleDenominator>s.minScaleDenominator&&u.minScaleDenominator<a||a<s.minScaleDenominator&&u.minScaleDenominator<s.minScaleDenominator)&&(s=u)}if(i.legends[0]!==s){i.legends=[],i.legends.push(s);var d=t._createLegendEntry(i);r.dom.replaceWith(d),r.dom=d}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}},{key:"removeEventsListeners",value:function(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}},{key:"onShowLegendsClick",value:function(e){"true"===e.target.ariaPressed&&this.onPanelOpen(),W.trace(e);var t=this.buttonLegendsShow.ariaPressed;this.collapsed=!("true"===t),this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}}],o&&M(n.prototype,o),r&&M(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,r}(w);Object.assign(z.prototype,R),Object.assign(z.prototype,a);const Y=z;window.ol&&window.ol.control&&(window.ol.control.Legends=z)})(),GpfExtOlLegends=o.default})();
//# sourceMappingURL=GpfExtOlLegends.js.map