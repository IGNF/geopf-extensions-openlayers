{"version":3,"file":"Editor.js","mappings":"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Cd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA,qEAAqE;AACrE,YAAY;AACZ;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA,qDAAqD;AACrD,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sBAAsB;AACtB;;AAEA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA,oCAAoC;AACpC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;;ACpWD;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACNA;AACiD;AACjD;AACA;AACkC;AAClC;AACuC;AACC;AACS;AACrB;AACE;AACA;AACA;AACF;AACA;AACA;AACE;;AAE9B;AACoC;AAEpC,IAAIpX,MAAM,GAAGD,8DAAM,CAACE,SAAS,CAAC,QAAQ,CAAC;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","sources":["webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/EditorDOM.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Event.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Filter.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Group.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Layer.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Legend.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Search.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Style.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Themes.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/ColorUtils.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/Helper.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/LoggerByDefault.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/SelectorID.js","webpack://geoportal-extensions-openlayers/./node_modules/eventbusjs/lib/eventbus.min.js","webpack://geoportal-extensions-openlayers/./node_modules/loglevel/lib/loglevel.js","webpack://geoportal-extensions-openlayers/./src/packages/CSS/Controls/Editor/GPFeditor.css","webpack://geoportal-extensions-openlayers/webpack/bootstrap","webpack://geoportal-extensions-openlayers/webpack/runtime/compat get default export","webpack://geoportal-extensions-openlayers/webpack/runtime/define property getters","webpack://geoportal-extensions-openlayers/webpack/runtime/hasOwnProperty shorthand","webpack://geoportal-extensions-openlayers/webpack/runtime/make namespace object","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Editor/Editor.js"],"sourcesContent":["var EditorDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    }\n};\n\nexport default EditorDOM;\n","/**\n* managing events\n*\n* See {@link http://krasimirtsonev.com/blog/article/javascript-managing-events-dispatch-listen}\n* See {@link https://github.com/krasimir/EventBus}\n*\n* @property {Event} \"editor:layer:onclickvisibility\" - event ...\n* @property {Event} \"editor:layer:onclickclone\" - event ...\n* @property {Event} \"editor:layer:onclickremove\" - event ...\n* @property {Event} \"editor:style:oneditjson\" - event ...\n* @property {Event} \"editor:style:scale:onchangemin\" - event ...\n* @property {Event} \"editor:style:scale:onchangemax\" - event ...\n* @property {Event} \"editor:legend:onclickedition\" - event ...\n* @property {Event} \"editor:legend:onchangevalue\" - event ...\n* @property {Event} \"editor:filter:oneditjson\" - event ...\n* @property {Event} \"editor:themes:onclickimage\" - event ...\n* @property {Event} \"editor:themes:onclicktitle\" - event ...\n* @property {Event} \"editor:search:onsubmit\" - event ...\n* @property {Event} \"editor:search:onautocomplete\" - event ...\n* @property {Event} \"editor:group:oncollapse\" - event ...\n* @property {Event} \"editor:onloaded\" - event ...\n*\n* @mixin\n*\n* @example\n* // dispatch event\n* EventBus.dispatch(EventEditor.layer.visibility, e);\n* // listener\n* EventBus.addEventListener(EventEditor.layer.visibility, function (e) {...}, this);\n*/\nvar EventEditor = {\n    /** evenement sur la fin de chargement de l'editeur */\n    onloaded : \"editor:onloaded\",\n    layer : {\n        /** evenement sur la visibilité : clic sur le bouton 'oeil' */\n        onclickvisibility : \"editor:layer:onclickvisibility\",\n        /** evenement sur la duplication : clic sur le bouton\n        (not yet implemented !) */\n        onclickclone : \"editor:layer:onclickclone\",\n        /** evenement sur la suppression : clic sur le bouton\n        (not yet implemented !) */\n        onclickremove : \"editor:layer:onclickremove\"\n    },\n    legend : {\n        /** evenement sur l'affichage du mode edition */\n        onclickedition : \"editor:legend:onclickedition\",\n        /** evenement sur la modification d'une valeur */\n        onchangevalue : \"editor:legend:onchangevalue\"\n    },\n    group : {\n        /**  evenement pour deplier/plier le groupe\n        (not yet implemented !) */\n        oncollapse : \"editor:group:oncollapse\"\n    },\n    style : {\n        /** evenement sur l'édition du style\n        (not yet implemented !) */\n        oneditjson : \"editor:style:oneditjson\",\n        /** evenement sur la modification de l'echelle d'affichage */\n        scale : {\n            onchangemin : \"editor:style:scale:onchangemin\",\n            onchangemax : \"editor:style:scale:onchangemax\"\n        }\n    },\n    filter : {\n        /** evenement sur l'édition du filtre\n        (not yet implemented !) */\n        oneditjson : \"editor:filter:oneditjson\"\n    },\n    themes : {\n        /** evenement sur le clic de l'image */\n        onclickimage : \"editor:themes:onclickimage\",\n        /** evenement sur le clic du titre */\n        onclicktitle : \"editor:themes:onclicktitle\"\n    },\n    search : {\n        /** evenement sur la recherche */\n        onsubmit : \"editor:search:onsubmit\",\n        onautocomplete : \"editor:search:onautocomplete\"\n    }\n};\n\nexport default EventEditor;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Utils from \"../../Utils/Helper\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"editor-filter\");\n\n/**\n * @classdesc\n *\n * MapBox filter management\n *\n * @constructor\n * @alias ol.style.editor.Filter\n * @param {Object} options - options for function call.\n * @example\n *   var filter = new Filter ({\n *      target : ...,\n *      position : 1, // identifiant de position (unique !)\n *      tools : {\n *          edition : false\n *      },\n *      title : \"Filtres (JSON)\",\n *      obj : {\n *          filter : []\n *      }\n *   });\n *  filter.add();\n *  filter.display(true);\n *  filter.getContainer();\n */\nclass Filter {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Filter\", options);\n\n        // options\n        this.options = options || {\n            // default...\n            target : null,\n            position : 0,\n            tools : null,\n            title : null,\n            obj : null\n        };\n\n        if (!(this instanceof Filter)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null;\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        if (!this.options.position) {\n            this.options.position = 0;\n        }\n\n        var _toolsDefault = {\n            edition : false\n        };\n\n        if (!this.options.tools) {\n            this.options.tools = _toolsDefault;\n        }\n\n        Utils.mergeParams(this.options.tools, _toolsDefault, false);\n\n        if (!this.options.obj) {\n            // choix d'avoir un objet vide pour une edition futur...\n            this.options.obj = {\n                filter : []\n            };\n        }\n\n        if (!this.options.title) {\n            this.options.title = \"JSON Filtres :\";\n        }\n        this.container = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxFilterTarget\",\n            container : \"GPEditorMapBoxFilterContainer\",\n            containerjson : \"GPEditorMapBoxFilterJsonContainer\",\n            jsonlabel : \"GPEditorMapBoxFilterTitleJson\",\n            jsondisplay : \"GPEditorMapBoxFilterDisplayJson\",\n            containertoolsedit : \"GPEditorMapBoxFilterToolsEditionContainer\"\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     * <div class=\"GPEditorMapBoxFilterContainer\">\n     *  <div class =\"GPEditorMapBoxFilterJsonontainer\">\n     *     <label class=\"GPEditorMapBoxFilterTitleJson\">JSON Filtres :</label>\n     *     <pre class=\"GPEditorMapBoxFilterDisplayJson\">...</pre>\n     *  </div>\n     *  <div class =\"GPEditorMapBoxStyleToolsEditionContainer\"></div>\n     * </div>\n     */\n    _initContainer () {\n        // contexte\n        var self = this;\n\n        var _found = false;\n        var _filter = JSON.parse(JSON.stringify(this.options.obj)); // on manipule une copie  !\n\n        // FIXME tag filter est obselete !\n        // on doit utiliser les expressions dans \"paint\" ou \"layout\" !\n        if (_filter.filter) {\n            _found = true;\n            if (_filter.filter.length === 0) {\n                logger.info(\"tag 'filter' is empty !\");\n            }\n        }\n\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n\n        var json = null;\n        if (_found) {\n            json = JSON.stringify(_filter.filter, null, 4);\n        }\n\n        var divJson = document.createElement(\"div\");\n        divJson.className = this.name.containerjson;\n\n        var labelJson = document.createElement(\"label\");\n        labelJson.className = this.name.jsonlabel;\n        labelJson.innerHTML = this.options.title;\n        divJson.appendChild(labelJson);\n\n        var preJson = document.createElement(\"pre\");\n        preJson.className = this.name.jsondisplay;\n        preJson.innerHTML = json;\n        if (preJson.addEventListener) {\n            preJson.addEventListener(\"click\", function (e) {\n                if (self.options.tools.edition) {\n                    self.onEditJsonFilterMapBox(e);\n                }\n            });\n        } else if (preJson.attachEvent) {\n            preJson.attachEvent(\"onclick\", function (e) {\n                if (self.options.tools.edition) {\n                    self.onEditJsonFilterMapBox(e);\n                }\n            });\n        }\n        divJson.appendChild(preJson);\n        div.appendChild(divJson);\n\n        if (this.options.tools.edition) {\n            var divEdit = document.createElement(\"div\");\n            divEdit.className = this.name.containertoolsedit;\n            div.appendChild(divEdit);\n        }\n\n        // main container\n        this.container = div;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     * @returns {Object} - Legend instance\n     */\n    add () {\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        return this;\n    }\n\n    /**\n     * Set display container or get\n     *\n     * @param {Boolean} display - show/hidden container or get status\n     * @returns {Boolean} - true/false\n     */\n    display (display) {\n        logger.trace(\"display()\", display);\n        if (typeof display !== \"undefined\") {\n            this.container.style.display = (display) ? \"flex\" : \"none\";\n        }\n        return (this.container.style.display === \"flex\");\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Filter#editor:style:oneditjson\n     */\n    onEditJsonFilterMapBox (e) {\n        logger.trace(\"onEditJsonFilterMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.filter.oneditjson, e);\n    }\n\n};\n\nexport default Filter;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"editor-group\");\n\n/**\n * @classdesc\n *\n * MapBox group management\n *\n * @constructor\n * @alias ol.style.editor.Group\n * @param {Object} options - options for function call.\n * @example\n *   var group = new Group ({\n *      title : \"MyGroup\",\n *      collapse : true, // plier/deplier\n *      target : ...\n *   });\n *   group.add();\n *   group.add();\n */\nclass Group {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Group\", options);\n\n        // options\n        this.options = options || {\n            // default...\n        };\n\n        if (!(this instanceof Group)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null;\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        if (!this.options.title) {\n            // cf. summary\n            this.options.title = \"Détails du groupe...\";\n        }\n\n        // plier par defaut\n        if (typeof this.options.collapse === \"undefined\") {\n            this.options.collapse = true;\n        }\n\n        this.container = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxGroupTarget\",\n            container : \"GPEditorMapBoxGroupContainer\",\n            details : \"GPEditorMapBoxGroupDetails\",\n            summary : \"GPEditorMapBoxGroupSummary\"\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     * <div class=\"GPEditorMapBoxGroupContainer\">...</div>\n     */\n    _initContainer () {\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n\n        // FIXME pas compatible IE !\n        // https://caniuse.com/#search=details\n        // cf. https://css-tricks.com/quick-reminder-that-details-summary-is-the-easiest-way-ever-to-make-an-accordion/\n        var details = document.createElement(\"details\");\n        details.className = this.name.details;\n        details.open = !this.options.collapse;\n        div.appendChild(details);\n\n        var summary = document.createElement(\"summary\");\n        summary.className = this.name.summary;\n        summary.innerHTML = this.options.title;\n        details.appendChild(summary);\n\n        // main container\n        this.container = div;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     */\n    add () {\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n    }\n\n    /**\n     * Set display container (DOM)\n     *\n     * @param {Boolean} display - show/hidden container\n     */\n    display (display) {\n        this.container.style.display = (display) ? \"flex\" : \"none\";\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        var nodes = this.container.childNodes;\n        if (nodes.length) {\n            // retourne le noeud \"details\" !\n            return nodes[0];\n        }\n        // sinon le container principal\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form\n     *\n     * NOT USED !\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Group#editor:group:oncollapse\n     */\n    onCollapseGroupMapBox (e) {\n        logger.trace(\"onCollapseGroupMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.group.oncollapse, e);\n    }\n\n};\n\nexport default Group;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Style from \"./Style\";\nimport Legend from \"./Legend\";\nimport Filter from \"./Filter\";\nimport Utils from \"../../Utils/Helper\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"editor-layer\");\n\n/**\n * @classdesc\n *\n * MapBox filter management\n *\n * @constructor\n * @alias ol.style.editor.Layer\n * @param {Object} options - options for function call.\n * @example\n *   var layers = new Layer ({\n *      target : ...,\n *      position : 1, // identifiant de position (unique !)\n *      tools : {\n *          \"visibility\" : true, // afficher l'icone de visibilité\n *          \"icon\" : {\n *              \"image\" : true, // afficher l'icone \"oeil\" (defaut) ou une checkbox\n *              \"anchor\" : \"start\" | \"end\"  // afficher l'icone au debut ou à la fin (defaut)\n *          },\n *          \"type\" : true,       // afficher l'icone du type de geometrie\n *          \"pin\" : true,        // afficher l'icone de puce\n *          \"remove\" : false,    // TODO afficher l'icone de suppression\n *          \"clone\" : false      // TODO afficher l'icone de duplication\n *      },\n *      obj : {\n *          \"id\": \"ocs - vegetation\", // MANDATORY\n *          \"type\": \"fill\", // OPTIONAL\n *          \"source\": \"pyramide_proto\", // OPTIONAL\n *          \"source-layer\": \"ocs_vegetation_surf\" // OPTIONAL\n *      }\n *   });\n *  layers.addLegend(oLegend);\n *  layers.slotLegend();\n *  layers.addStyle(oStyle);\n *  layers.addFilter(oFilter);\n *  layers.add();\n *  layers.active(false);\n *  layers.visibility(false);\n *  layers.display(false);\n *  layers.collapse();\n *  EventBus.addEventListener(\"editor:layer:onclickvisibility\", function (e) {\n *     // e.target.data : options !\n *     // e.target.editorID : id or null\n *   }, this);\n */\nclass Layer {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Layer\", options);\n\n        // options\n        this.options = options || {};\n\n        if (!(this instanceof Layer)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    // ################################################################### //\n    // ##################### private methods ############################# //\n    // ################################################################### //\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null; // null si le layer n'appartient pas à un editeur !\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        if (!this.options.position) {\n            this.options.position = 0;\n        }\n\n        var _toolsDefault = {\n            visibility : true,\n            icon : {\n                image : true,\n                anchor : \"end\"\n            },\n            type : true,\n            pin : true,\n            remove : false, // TODO\n            clone : false // TODO\n        };\n\n        if (!this.options.tools) {\n            this.options.tools = _toolsDefault;\n        }\n\n        Utils.mergeParams(this.options.tools, _toolsDefault, false);\n\n        var _objDefault = {\n            id : \"\",\n            type : \"\", // icone sur le type de geometrie\n            source : \"\",\n            \"source-layer\" : \"\"\n        };\n\n        if (!this.options.obj) {\n            this.options.obj = _objDefault;\n        }\n\n        Utils.mergeParams(this.options.obj, _objDefault, false);\n\n        // legende intégrée\n        this.bSlotLegend = false;\n\n        // obj\n        this.oFilter = null;\n        this.oStyle = null;\n        this.oLegend = null;\n\n        // dom\n        this.container = null;\n        this.DomVisibility = null;\n        this.DomToggle = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxLayerTarget\",\n            container : \"GPEditorMapBoxLayerContainer\",\n            containerlegend : \"GPEditorMapBoxLayerLegendContainer\",\n            containertitle : \"GPEditorMapBoxLayerTitleContainer\",\n            imagelabelinput : \"GPEditorMapBoxLayerImageInput\",\n            imagelabel : \"GPEditorMapBoxLayerImageLabel\",\n            typeimg : \"GPEditorMapBoxLayerTypeImage\",\n            titleinput : \"GPEditorMapBoxLayerTitleInput\",\n            titlelabel : \"GPEditorMapBoxLayerTitleLabel\",\n            containertools : \"GPEditorMapBoxToolsContainer\",\n            visibilityinput : \"GPEditorMapBoxToolsVisibilityInput\",\n            visibilitylabel : \"GPEditorMapBoxToolsVisibilityLabel\",\n            visibilityinputdisable : \"GPEditorMapBoxToolsVisibilityInputDisable\",\n            visibilitylabeldisable : \"GPEditorMapBoxToolsVisibilityLabelDisable\"\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     * // >> Titre 1          |OOO| <- menu tools : visibility, clone, remove\n     * // >> Titre 2          |OXX| <- affichage configurable (cf. options.tools)\n     * // Event : clic sur le titre -> ex. affiche le menu des styles / filtres\n     * //       : clic visibility, clone, remove\n     * // DOM :\n     *      <div class=\"GPEditorMapBoxLayerContainer\">\n     *          <div id=\"GPEditorMapBoxLayerTitleContainer-45\" class=\"GPEditorMapBoxLayerTitleContainer\">\n     *              <input id=\"GPEditorMapBoxLayerImageInput-45\" class=\"GPEditorMapBoxLayerImageInput\" type=\"checkbox\">\n     *              <label class=\"GPEditorMapBoxLayerImageLabel\" for=\"GPEditorMapBoxLayerImageInput-45\"></label>\n     *              <input id=\"GPEditorMapBoxLayerTitleInput-45\" class=\"GPEditorMapBoxLayerTitleInput\" type=\"checkbox\">\n     *              <label class=\"GPEditorMapBoxLayerTitleLabel\" for=\"GPEditorMapBoxLayerTitleInput-45\" title=\"...\">...</label>\n     *          </div>\n     *          <div id=\"GPEditorMapBoxToolsContainer-45\" class=\"GPEditorMapBoxToolsContainer\">\n     *              <input id=\"GPEditorMapBoxToolsVisibilityInput-45\" type=\"checkbox\" class=\"GPEditorMapBoxToolsVisibilityInput\">\n     *              <label for=\"GPEditorMapBoxToolsVisibilityInput-45\" id=\"GPEditorMapBoxToolsVisibilityLabel-45\" class=\"GPEditorMapBoxToolsVisibilityLabel\" title=\"Afficher/masquer la couche\"></label>\n     *          </div>\n     *      </div>\n     */\n    _initContainer () {\n        // contexte\n        var self = this;\n\n        var obj = this.options.obj;\n\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n\n        // title\n        var divTitle = document.createElement(\"div\");\n        divTitle.id = this.name.containertitle + \"-\" + this.options.position;\n        divTitle.className = this.name.containertitle;\n\n        // puce\n        if (this.options.tools.pin) { // Optionnel !\n            // input\n            var inputImage = document.createElement(\"input\");\n            inputImage.id = this.name.imagelabelinput + \"-\" + this.options.position;\n            inputImage.className = this.name.imagelabelinput;\n            inputImage.type = \"checkbox\";\n            divTitle.appendChild(inputImage);\n            // puce\n            var labelImage = document.createElement(\"label\");\n            labelImage.className = this.name.imagelabel;\n            labelImage.htmlFor = inputImage.id;\n            if (labelImage.addEventListener) {\n                labelImage.addEventListener(\"click\", function (e) {\n                    self.onClickLayerMapBox(e);\n                });\n            } else if (labelImage.attachEvent) {\n                labelImage.attachEvent(\"onclick\", function (e) {\n                    self.onClickLayerMapBox(e);\n                });\n            }\n            divTitle.appendChild(labelImage);\n        }\n\n        // tools :\n        // visibility, (remove, clone)\n        var _addTools = function () {\n            var divTools = document.createElement(\"div\");\n            divTools.id = this.name.containertools + \"-\" + this.options.position;\n            divTools.className = this.name.containertools;\n\n            // visibility\n            if (this.options.tools.visibility) {\n                var inputTools = document.createElement(\"input\");\n                inputTools.id = this.name.visibilityinput + \"-\" + this.options.position;\n                inputTools.className = (this.options.tools.icon.image) ? this.name.visibilityinput : this.name.visibilityinputdisable;\n                inputTools.type = \"checkbox\";\n                inputTools.checked = \"checked\"; // par défaut, à modifier via visibility(true|false) !\n\n                // event for visibility change\n                if (inputTools.addEventListener) {\n                    inputTools.addEventListener(\"click\", function (e) {\n                        self.onVisibilityLayerMapBox(e);\n                    });\n                } else if (inputTools.attachEvent) {\n                    // internet explorer\n                    inputTools.attachEvent(\"onclick\", function (e) {\n                        self.onVisibilityLayerMapBox(e);\n                    });\n                }\n                divTools.appendChild(inputTools);\n                // enregistrement utile pour la méthode : visibility()\n                this.DomVisibility = inputTools;\n\n                var labelTools = document.createElement(\"label\");\n                labelTools.htmlFor = this.name.visibilityinput + \"-\" + this.options.position;\n                labelTools.id = this.name.visibilitylabel + \"-\" + this.options.position;\n                labelTools.className = (this.options.tools.icon.image) ? this.name.visibilitylabel : this.name.visibilitylabeldisable;\n                labelTools.title = \"Afficher/masquer la couche\";\n                divTools.appendChild(labelTools);\n\n                div.appendChild(divTools);\n            }\n\n            // clone\n            if (this.options.tools.clone) {\n                // TODO...\n                logger.warn(\"Dom for tools clone, it's not yet implemented !\");\n            }\n\n            // remove\n            if (this.options.tools.remove) {\n                // TODO...\n                logger.warn(\"Dom for tools remove, it's not yet implemented !\");\n            }\n        };\n\n        // ajout des outils au debut du composant\n        if (this.options.tools.icon.anchor === \"start\") {\n            _addTools.apply(this);\n        }\n\n        // type\n        if (this.options.tools.type && obj.type) { // Optionnel !\n            var imgType = document.createElement(\"img\");\n            imgType.className = this.name.typeimg;\n            // FIXME il faudrait faire la difference entre :\n            // - icone uniquement : SYMBOL-ICON\n            // - texte uniquement : SYMBOL-TEXT\n            // - les 2 : SYMBOL\n            // Mais il nous faut les styles complets (paint & layout)\n            // pour determiner les 3 types !\n            switch (obj.type.toUpperCase()) {\n                case \"SYMBOL-ICON\": // not used !\n                    imgType.style[\"background-position\"] = \"0px 0\";\n                    break;\n                case \"SYMBOL-TEXT\": // not used !\n                    imgType.style[\"background-position\"] = \"-194px 0\";\n                    break;\n                case \"SYMBOL\":\n                    imgType.style[\"background-position\"] = \"-84px 0\";\n                    break;\n                case \"LINE\":\n                    imgType.style[\"background-position\"] = \"-28px 0\";\n                    break;\n                case \"FILL\":\n                    imgType.style[\"background-position\"] = \"-56px 0\";\n                    break;\n                case \"BACKGROUND\":\n                    imgType.style[\"background-position\"] = \"-140px 0\";\n                    break;\n                case \"CIRCLE\":\n                    imgType.style[\"background-position\"] = \"-168px 0\";\n                    break;\n                default:\n                    // type inconnu ou non pris en charge ou par defaut\n                    imgType.style[\"background-position\"] = \"-112px 0\";\n            }\n            divTitle.appendChild(imgType);\n        }\n\n        // container legend (empty)\n        var divLegend = document.createElement(\"div\");\n        divLegend.id = this.name.containerlegend + \"-\" + this.options.position;\n        divLegend.className = this.name.containerlegend;\n        divTitle.appendChild(divLegend);\n\n        // input\n        var inputTitle = document.createElement(\"input\");\n        inputTitle.id = this.name.titleinput + \"-\" + this.options.position;\n        inputTitle.className = this.name.titleinput;\n        inputTitle.type = \"checkbox\";\n        divTitle.appendChild(inputTitle);\n\n        // label for\n        var labelTitle = document.createElement(\"label\");\n        labelTitle.className = this.name.titlelabel;\n        labelTitle.htmlFor = inputTitle.id;\n        labelTitle.innerHTML = obj[\"id\"] || obj[\"source-layer\"] || obj[\"source\"];\n        labelTitle.title = obj[\"source-layer\"] || obj[\"source\"] || obj[\"id\"];\n        if (labelTitle.addEventListener) {\n            labelTitle.addEventListener(\"click\", function (e) {\n                self.onClickLayerMapBox(e);\n            });\n        } else if (labelTitle.attachEvent) {\n            labelTitle.attachEvent(\"onclick\", function (e) {\n                self.onClickLayerMapBox(e);\n            });\n        }\n        divTitle.appendChild(labelTitle);\n        // enregistrement utile pour la méthode : collapse()\n        this.DomToggle = labelTitle;\n\n        div.appendChild(divTitle);\n\n        // ajout des outils au fin du composant\n        if (this.options.tools.icon.anchor === \"end\") {\n            _addTools.apply(this);\n        }\n\n        // main container\n        this.container = div;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     * @returns {Object} - Layer instance\n     */\n    add () {\n        logger.trace(\"add()\");\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        return this;\n    }\n\n    /**\n     * Add style in the submenu\n     *\n     * @param {Object} style - style object\n     */\n    addStyle (style) {\n        logger.trace(\"addStyle()\", style);\n        if (style && typeof style === \"object\" && style instanceof Style) {\n            this.oStyle = style;\n            this.oStyle.display(false); // par defaut !\n        }\n    }\n\n    /**\n     * Add filter in the submenu\n     *\n     * @param {Object} filter - filter object\n     */\n    addFilter (filter) {\n        logger.trace(\"addFilter()\", filter);\n        if (filter && typeof filter === \"object\" && filter instanceof Filter) {\n            this.oFilter = filter;\n            this.oFilter.display(false); // par defaut !\n        }\n    }\n\n    /**\n     * Add Legend in the submenu\n     *\n     * @param {Object} legend - legend object\n     */\n    addLegend (legend) {\n        logger.trace(\"addLegend()\", legend);\n        if (legend && typeof legend === \"object\" && legend instanceof Legend) {\n            this.oLegend = legend;\n            this.oLegend.display(false); // par defaut !\n        }\n    }\n\n    /**\n     * Integrate Legend to the layer container\n     */\n    slotLegend () {\n        // cas particulier :\n        // on souhaite intégrer une partie de la legende dans le container du layer.\n        var legend = this.oLegend;\n        if (legend) {\n            // FIXME c'est pourri...\n            var node = null;\n            var nodesLvl1 = this.container.childNodes;\n            if (nodesLvl1.length) {\n                // selon où se situe l'icone de visibilité : au debut ou à la fin...\n                var idx = (this.options.tools.icon.anchor === \"start\") ? 1 : 0;\n                var nodesLvl2 = nodesLvl1[idx].childNodes;\n                // on recherche le container de la legende\n                for (var i = 0; i < nodesLvl2.length; i++) {\n                    var curnode = nodesLvl2[i];\n                    if (curnode.id.indexOf(this.name.containerlegend) !== -1) {\n                        node = curnode;\n                    }\n                }\n            }\n            if (node) {\n                var render = legend.getRenderContainer();\n                if (render) {\n                    node.appendChild(render);\n                    // legende intégrée\n                    this.bSlotLegend = true;\n                }\n            }\n        }\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Set visibility or get\n     *\n     * @param {Boolean} display - set visibility or undefined to get status\n     * @returns {Boolean} - true/false\n     */\n    visibility (display) {\n        logger.trace(\"visibility()\", display);\n        if (!this.options.tools.visibility) {\n            return;\n        }\n        if (typeof display !== \"undefined\") {\n            this.DomVisibility.checked = (display) ? \"checked\" : \"\";\n        }\n        return this.DomVisibility.checked;\n    }\n\n    /**\n    * Collapse a layer panel (event)\n    */\n    collapse () {\n        logger.trace(\"collapse()\");\n        this.DomToggle.click();\n    }\n\n    /**\n    * Click on visibility icon (event)\n    */\n    visible () {\n        logger.trace(\"visible()\");\n        if (!this.options.tools.visibility) {\n            return;\n        }\n        this.DomVisibility.click();\n    }\n\n    /**\n     * Set collapse or get\n     *\n     * @param {Boolean} display - show/hidden container or get status\n     * @returns {Boolean} - true/false\n     */\n    display (display) {\n        logger.trace(\"display()\", display);\n        var checked = document.getElementById(this.DomToggle.htmlFor).checked;\n        if (typeof display !== \"undefined\") {\n            this.container.style.display = (display) ? \"inline-flex\" : \"none\";\n            if (this.oStyle) {\n                this.oStyle.display(display && checked);\n            }\n            if (this.oFilter) {\n                this.oFilter.display(display && checked);\n            }\n            if (this.oLegend) {\n                this.oLegend.display(display && checked);\n            }\n        }\n        return checked;\n    }\n\n    /**\n     * Set disabled/enabled status or get\n     *\n     * @param {Boolean} active - disable/enable layer interaction or get status\n     * @returns {Boolean} - true/false\n     */\n    active (active) {\n        logger.trace(\"active()\", active);\n        if (typeof active !== \"undefined\") {\n            this.container.className = (active)\n                ? this.name.container\n                : this.name.container + \" disabled\";\n        }\n        return (this.container.className === this.name.container);\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onClickLayerMapBox (e) {\n        logger.trace(\"onClickLayerMapBox\", e);\n\n        var id = e.target.htmlFor.substring(e.target.htmlFor.indexOf(\"-\"));\n        var checked = document.getElementById(e.target.htmlFor).checked;\n\n        // gestion des inputs\n        if (e.target.htmlFor === this.name.imagelabelinput + id) {\n            document.getElementById(this.name.titleinput + id).checked = !checked;\n        }\n        if (e.target.htmlFor === this.name.titleinput + id) {\n            // si options.pin:false, ce DOM n'existe pas !\n            if (document.getElementById(this.name.imagelabelinput + id)) {\n                document.getElementById(this.name.imagelabelinput + id).checked = !checked;\n            }\n        }\n\n        // ouverture du panneau des styles / filtres\n        if (this.oStyle) {\n            this.oStyle.display(!checked);\n        }\n        if (this.oFilter) {\n            this.oFilter.display(!checked);\n        }\n        // attention,\n        // si la legende est non editable, elle ne se trouve pas dans le sous menu !\n        if (this.oLegend && this.oLegend.isEditable()) {\n            this.oLegend.display(!checked);\n        }\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Layer#editor:layer:onclickvisibility\n     */\n    onVisibilityLayerMapBox (e) {\n        logger.trace(\"onVisibilityLayerMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.layer.onclickvisibility, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Layer#editor:layer:onclickclone\n     */\n    onCloneLayerMapBox (e) {\n        logger.trace(\"onCloneLayerMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.layer.onclickclone, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Layer#editor:layer:onclickremove\n     */\n    onRemoveLayerMapBox (e) {\n        logger.trace(\"onRemoveLayerMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.layer.onclickremove, e);\n    }\n\n};\n\nexport default Layer;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Color from \"../../Utils/ColorUtils\";\n\nvar logger = Logger.getLogger(\"editor-legend\");\n\n/**\n * @classdesc\n *\n * MapBox Legend management\n *\n * @constructor\n * @alias ol.style.editor.Legend\n * @param {Object} options - options for function call.\n * @param {Object} [options.target = null] - ...\n * @param {Number} [options.position = 0] -  ...\n * @param {Number} [options.id = null] - (internal) ...\n * @param {Object} [options.sprites = null] - ...\n * @param {String} [options.sprites.url] - ...\n * @param {Object} [options.sprites.size] - {h:, w:} ...\n * @param {Object} [options.sprites.json] - ...\n * @param {Object} options.obj - ...\n * @param {String} [options.obj.title] - ...\n * @param {Boolean} [options.obj.editable = true] - ...\n * @param {Object} options.obj.paint - ...\n * @param {Object} options.obj.layout - ...\n * @example\n *   var legend = new Legend ({\n *      target : ...,\n *      position : 1, // identifiant de position (unique !)\n *      sprites : {\n *          url : \"http://localhost/sprites.png\",\n *          size : { w : 450, h : 550 },\n *          json : {\n *              icon-1 : {x:,y:,height:,width:,pixelRatio:},\n *              icon-2 : {x:,y:,height:,width:,pixelRatio:}\n *          }\n *      },\n *      obj : {\n *          title : \"\",\n *          editable : true, // tag non standard issue du style json dédié à l'edition\n *          paint : {\"fill-color\": \"#2BB3E1\"},\n *          layout : {visibility:\"none\"}\n *      }\n *   });\n *  legend.add();\n *  legend.display(true);\n *  legend.isEditable();\n *  legend.getRenderContainer();\n *  legend.getToolsContainer();\n *  legend.getContainer();\n */\nclass Legend {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Legend\", options);\n\n        // options\n        this.options = options || {\n            // default...\n            target : null,\n            position : 0,\n            sprites : null,\n            obj : null\n        };\n\n        if (!(this instanceof Legend)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    // ################################################################### //\n    // ########################## init methods ########################### //\n    // ################################################################### //\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null;\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        // permet d'avoir un identifiant de position dans la liste des layers\n        if (!this.options.position) {\n            this.options.position = 0;\n        }\n\n        if (!this.options.obj) {\n            // choix d'avoir un objet vide pour une edition...\n            this.options.obj = {\n                title : \"vide...\",\n                editable : true,\n                paint : {\n                    \"fill-color\" : \"#FFFFFF\"\n                }\n            };\n        }\n\n        // la legende est elle editable ?\n        // le tag 'editable' est à placer dans le fichier de style (dans le layer)...\n        var _editable = this.options.obj.editable;\n        this.editable = (typeof _editable !== \"undefined\") ? _editable : false;\n\n        // liste des caractéristiques de la legende par defaut\n        this.legendRender = {\n            type : \"fill\",\n            values : {\n                width : 1,\n                stroke : \"#FFFFFF\",\n                color : \"#000000\",\n                opacity : 1\n            }\n        };\n\n        // DOM : pointer\n        this.container = null;\n        this.rendercontainer = null;\n        this.toolscontainer = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxLegendTarget\",\n            container : \"GPEditorMapBoxLegendContainer\",\n            containerlegendrender : \"GPEditorMapBoxLegendRenderContainer\",\n            legendrender : \"GPEditorMapBoxLegendRender\",\n            legendeditable : \"GPEditorMapBoxLegendEditable\",\n            legendtitle : \"GPEditorMapBoxLegendTitle\",\n            containerlegendtools : \"GPEditorMapBoxLegendToolsContainer\"\n        };\n\n        // DOM : Label menu Edition\n        this.labels = {\n            \"line-color\" : \"Couleur du trait\",\n            \"line-width\" : \"Epaisseur du trait\",\n            \"line-opacity\" : \"Opacité du trait\",\n            \"fill-color\" : \"Couleur de remplissage\",\n            \"fill-opacity\" : \"Opacité du remplissage\"\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     * <div class=\"GPEditorMapBoxLegendContainer\">\n     *  <div class=\"GPEditorMapBoxLegendRenderContainer\">\n     *      <div class=\"GPEditorMapBoxLegendRender GPEditorMapBoxLegendEditable legend-circle\" style=\"...\"></div>\n     *      <span class=\"GPEditorMapBoxLegendTitle\">test circle editable...</span>\n     *  </div>\n     *  <div class=\"GPEditorMapBoxLegendToolsContainer\">...</div>\n     * </div>\n     */\n    _initContainer () {\n        var _obj = this.options.obj;\n\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n\n        // INFO\n        // on recherche les informations dans le tag 'paint' en priorité, mais pour\n        // les icones ou textes, les informations peuvent se trouver aussi dans le tag 'layout'...\n        // on fusionnne paint et layout par facilité\n        var style = Object.assign({}, _obj.paint, _obj.layout);\n\n        // liste des properties mapbox\n        // ex. fill-color\n        var keys = Object.keys(style);\n        if (keys.length === 0) {\n            logger.info(\"tag 'paint' or 'layout' is empty !\");\n            return;\n        }\n\n        // FIXME\n        // - gestion de type plus complexe : texte avec/sans symbole ou symbole !\n        // - pour les textes ou icones, les info peuvent être aussi dans le tag 'layout' !\n        var params = {};\n        var bFound = false;\n        for (var i = 0; i < keys.length; i++) {\n            var key = keys[i];\n            // recherche du type\n            // ex. fill\n            if (/fill-/.test(key) ||\n                /line-/.test(key) ||\n                /circle-/.test(key) ||\n                /background-/.test(key) ||\n                /text-/.test(key) ||\n                /icon-/.test(key)) {\n                // style geré & trouvé\n                bFound = true;\n\n                var title = _obj.title || \"\";\n\n                // INFO\n                // le type texte ou icone est difficile à trouver car les 2 types cohabitent,\n                // on le gère en symbole...\n                var type = key.split(\"-\")[0];\n                if (type === \"text\" || type === \"icon\") {\n                    type = \"symbol\";\n                }\n\n                this.legendRender = this._getProperties(type, style);\n                params = {\n                    edit : this.editable,\n                    title : title,\n                    type : this.legendRender.type,\n                    values : this.legendRender.values\n                };\n                div.appendChild(this._createElementIconLegend(params));\n\n                // on stoppe la recherche\n                break;\n            }\n        }\n\n        // legende avec un style indeterminé ou non géré !?\n        if (!bFound) {\n            // on prend la legende par defaut\n            params = {\n                edit : this.editable,\n                title : \"\",\n                type : this.legendRender.type,\n                values : this.legendRender.values\n            };\n            div.appendChild(this._createElementIconLegend(params));\n            logger.warn(\"legend type unknown, default legend used...\");\n        }\n\n        // ajout mode edition graphique de la legende\n        this.toolscontainer = this._createElementEditionLegend(params);\n        div.appendChild(this.toolscontainer);\n\n        // main container\n        this.container = div;\n    }\n\n    // ################################################################### //\n    // ##################### private methods ############################# //\n    // ################################################################### //\n    /**\n    * Get properties supported\n    *\n    * @param {Object} type - fill, line, circle, text, icon...\n    * @param {Object} values - raw values from the JSON file\n    * @returns {Object} - { type : (fill | line | circle | symbol), values : valuesSupported }\n    *\n    * @private\n    * @example\n    *\n    * // TODO\n    * // symbol with text (1) / symbol without text (2) / text (3)\n    * // \"layout\":{\n    * //      \"icon-image\":\"{maki}-11\",          <!--- IT'S A SYMBOL (1) (2)-->\n    * //      \"text-font\":[\n    * //           \"Open Sans Semibold\",\n    * //           \"Arial Unicode MS Bold\"\n    * //       ],\n    * //       \"text-field\":\"{name_en}\",         <!--- IT'S A TEXT (1) (3)-->\n    * //       \"text-max-width\":9,\n    * //       \"text-padding\":2,\n    * //       \"text-offset\":[\n    * //            0,\n    * //            0.6\n    * //       ],\n    * //       \"text-anchor\":\"top\",\n    * //       \"text-size\":12\n    * // },\n    * // \"paint\":{\n    * //     \"text-color\":\"#666\",\n    * //     \"text-halo-color\":\"#ffffff\",\n    * //     \"text-halo-width\":1,\n    * //     \"text-halo-blur\":0.5\n    * // },\n    *\n    */\n    _getProperties (type, values) {\n        // cas particulier du symbole complexe\n        // il existe plusieurs types pour un symbole :\n        // - text\n        // - icon\n        // - icon with text\n        if (type === \"symbol\") {\n            var isTextValue = values[\"text-field\"];\n            var isIconValue = values[\"icon-image\"];\n            type = (isTextValue && isIconValue) ? \"icon\" : (isTextValue) ? \"text\" : (isIconValue) ? \"icon\" : \"unknow\";\n            if (type === \"unknow\") {\n                logger.warn(\"type unknow !?\");\n                return;\n            }\n        }\n\n        var valuesSupported = {};\n        for (const key in values) {\n            if (Object.hasOwnProperty.call(values, key)) {\n                const val = values[key];\n                if (Legend.PROPERTIES[type].includes(key)) {\n                    var prop = key.replace(type, \"\").slice(1);\n                    var value = this._getValue(val);\n                    if (value) {\n                        // cas particulier des sprites\n                        if (prop === \"pattern\" || prop === \"image\") {\n                            if (!this.options.sprites ||\n                                !this.options.sprites.json ||\n                                !this.options.sprites.json[value]) {\n                                var k = type + \":\" + prop;\n                                logger.warn(\"sprites mandatory for key \", k);\n                                break;\n                            }\n                        }\n                        valuesSupported[prop] = value;\n                    }\n                } else {\n                    logger.warn(\"property not supported : \", key);\n                }\n            }\n        }\n\n        return {\n            type : type,\n            values : valuesSupported\n        };\n    }\n\n    /**\n    * Render thumbnail (SVG)\n    *\n    * @param {Object} type - fill, line, circle, text, ...\n    * @param {Object} values - {\"color\":..., \"width\":..., \"stroke\":...., \"opacity\":...}\n    * @returns {Boolean} true/false\n    *\n    * @private\n    * @example\n    * (...)\n    */\n    _renderThumbnail (type, values) {\n        // div de rendu de la legende\n        var div = this.rendercontainer;\n\n        if (!div) {\n            return false;\n        }\n\n        // SVG\n        var svg = null;\n        // facteur grossissement (x10) pour le trait\n        var factor = 3;\n\n        // valeur par defaut\n        if (!values.color) {\n            values.color = \"#FFFFFF\";\n        }\n        // en fonction du type, on y ajoute le style\n        switch (type) {\n            case \"text\":\n                var styleText = \"font-size: 5em;font-weight: bold;\";\n                svg = \"url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>\\\")\";\n                div.style[\"background\"] = svg\n                    .replace(\"%color%\", (values.color.indexOf(\"rgb\") === 0) ? values.color : Color.hexToRgba(values.color, 1))\n                    .replace(\"%opacity%\", values.opacity || 1)\n                    .replace(\"%style%\", styleText);\n                break;\n            case \"icon\":\n                if (values.image) {\n                    // FIXME on reste dans le paradigme d'utilisation du SVG...,\n                    // mais probleme de ratio de l'image !?\n                    svg = \"<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>\"\n                        .replace(\"%x%\", this.options.sprites.json[values.image].x)\n                        .replace(\"%y%\", this.options.sprites.json[values.image].y)\n                        .replace(/%w%/g, this.options.sprites.json[values.image].width)\n                        .replace(/%h%/g, this.options.sprites.json[values.image].height)\n                        .replace(\"%W%\", this.options.sprites.size.w)\n                        .replace(\"%H%\", this.options.sprites.size.h)\n                        .replace(\"%URL%\", this.options.sprites.url);\n                    div.innerHTML = svg;\n                } else {\n                    var styleTextIcon = \"fill: transparent;stroke-width: 10;\";\n                    svg = \"url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>\\\")\";\n                    div.style[\"background\"] = svg\n                        .replace(\"%color%\", (values.color.indexOf(\"rgb\") === 0) ? values.color : Color.hexToRgba(values.color, 1))\n                        .replace(\"%style%\", styleTextIcon);\n                }\n                break;\n            case \"line\":\n                var lstrockedasharray = (Array.isArray(values[\"dasharray\"])) ? values[\"dasharray\"].join(\" \") : 0;\n                svg = \"url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>\\\")\";\n                // svg = \"url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M0 99 L99 0 L100 1 L1 100' stroke='%color%' stroke-width='%width%' stroke-opacity='%opacity%' stroke-dasharray='%dasharray%' /></svg>\\\")\";\n                div.style[\"background\"] = svg\n                    .replace(\"%color%\", (values.color.indexOf(\"rgb\") === 0) ? values.color : Color.hexToRgba(values.color, 1))\n                    .replace(\"%stroke-opacity%\", values.opacity || 1)\n                    .replace(\"%stroke-dasharray%\", lstrockedasharray)\n                    .replace(\"%stroke-width%\", (values.width || 0) * factor);\n                break;\n            case \"circle\":\n                var cstrockcolor = values[\"stroke-color\"] || \"#FFFFFF\";\n                svg = \"url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>\\\")\";\n                div.style[\"background\"] = svg\n                    .replace(\"%color%\", (values.color.indexOf(\"rgb\") === 0) ? values.color : Color.hexToRgba(values.color, 1))\n                    .replace(\"%opacity%\", values.opacity || 1)\n                    .replace(\"%stroke-color%\", (cstrockcolor.indexOf(\"rgb\") === 0) ? cstrockcolor : Color.hexToRgba(cstrockcolor, 1))\n                    .replace(\"%stroke-opacity%\", values[\"stroke-opacity\"] || 1)\n                    .replace(\"%stroke-width%\", (values[\"stroke-width\"] || 0) * factor);\n                break;\n            case \"background\":\n            case \"fill\":\n                if (values.pattern) {\n                    svg = \"<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>\"\n                        .replace(\"%x%\", this.options.sprites.json[values.pattern].x)\n                        .replace(\"%y%\", this.options.sprites.json[values.pattern].y)\n                        .replace(/%w%/g, this.options.sprites.json[values.pattern].width)\n                        .replace(/%h%/g, this.options.sprites.json[values.pattern].height)\n                        .replace(\"%W%\", this.options.sprites.size.w)\n                        .replace(\"%H%\", this.options.sprites.size.h)\n                        .replace(\"%URL%\", this.options.sprites.url);\n                    div.innerHTML = svg;\n                } else {\n                    var fstrokecolor = values[\"outline-color\"] || \"#FFFFFF\";\n                    svg = \"url(\\\"data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>\\\")\";\n                    div.style[\"background\"] = svg\n                        .replace(\"%color%\", (values.color.indexOf(\"rgb\") === 0) ? values.color : Color.hexToRgba(values.color, 1))\n                        .replace(\"%opacity%\", values.opacity || 1)\n                        .replace(\"%stroke-color%\", (fstrokecolor.indexOf(\"rgb\") === 0) ? fstrokecolor : Color.hexToRgba(fstrokecolor, 1));\n                }\n                break;\n            default:\n                logger.warn(\"type not found, no thumbnail...\");\n                return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Get value\n     *\n     * @param {*} value - value of a property (ex. \"#2BB3E1\")\n     * @returns {*} return a verified value (ex. color\": \"#2BB3E1\")\n     *\n     * @private\n     * @example\n     * // type simple for fill, line or circle type with string :\n     * // \"paint\": {\n     * //     \"fill-color\": \"#2BB3E1\"\n     * // }\n     *\n     * // type simple for fill, line or circle type with array :\n     * // \"paint\": {\n     * //     \"line-dasharray\": [2,10]\n     * // }\n     *\n     * // TODO type complexe : not yet implemented !\n     * // \"paint\": {\n     * //     \"fill-color\": [\n     * //          \"match\",\n     * //          [\"get\",\"symbo\"],\n     * //          \"ZONE_BOISEE\",\"#A7DA81\",\n     * //          \"ZONE_MANGROVE\",\"#7E8AB5\",\n     * //          \"#A7DA81\"\n     * //      ]\n     * // }\n     *\n     * // other type complexe :\n     * // \"paint\": {\n     * //     \"fill-color\": {\n     * //        \"base\": 1,\n     * //        \"stops\": [\n     * //        [\n     * //          15.5,\n     * //         \"#f2eae2\"\n     * //        ],\n     * //        [\n     * //          16,\n     * //          \"#dfdbd7\"\n     * //        ]\n     * //        ]\n     * //     }\n     * // }\n     */\n    _getValue (value) {\n        var result = null;\n        if (typeof value === \"string\") {\n            result = value;\n        } else if (typeof value === \"number\") {\n            result = value;\n        } else if (Array.isArray(value)) {\n            // cas d'un tableau de valeurs numériques : [1,2,3]\n            var isNumber = true;\n            value.forEach(v => {\n                if (typeof v !== \"number\") {\n                    isNumber = false;\n                }\n            });\n            if (isNumber) {\n                result = value;\n            }\n        } else if (typeof value === \"object\") {\n            result = null;\n            if (\"stops\" in value) {\n                // on realise un ordre inversé sur les zooms\n                value.stops.sort((a, b) => {\n                    var numA = a[0];\n                    var numB = b[0];\n                    if (numA > numB) {\n                        return -1;\n                    }\n                    if (numA < numB) {\n                        return 1;\n                    }\n                    return 0;\n                });\n                // et, on prend le plus petit zoom\n                var lastStopsValue = value.stops.slice(-1);\n                result = lastStopsValue[0][1];\n            }\n        } else {\n            logger.warn(\"value not supported !\");\n        }\n        return result;\n    }\n\n    // ################################################################### //\n    // ######################### DOM methods ############################# //\n    // ################################################################### //\n    /**\n    * Create a Graphical Legend Icon\n    *\n    * @param {Object} params - param\n    * @param {String} params.title - title\n    * @param {String} params.type - fill, line, circle, text, icon, ...\n    * @param {String} params.values - {\"color\": \"#2BB3E1\", \"width\": 10, \"opacity\": 0.5, \"stroke\": \"#2BB3E1\"}\n    * @param {Boolean} params.edit - editable with a colorPicker for only line, fill and circle legend !\n    * @returns {DOMElement} DOM element\n    *\n    * @private\n    * @example\n    *   <div class=\"GPEditorMapBoxLegendRenderContainer\">\n    *       <div class=\"GPEditorMapBoxLegendRender GPEditorMapBoxLegendEditable legend-fill\"\n    *           style=\"background: url(&quot;data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' fill='rgba(255, 255, 255, 1)' fill-opacity='1' /></svg>&quot;);\">\n    *       </div>\n    *       <span class=\"GPEditorMapBoxLegendTitle\">vide...</span>\n    * </div>\n    */\n    _createElementIconLegend (params) {\n        // contexte\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = this.name.containerlegendrender;\n\n        var div = this.rendercontainer = document.createElement(\"div\");\n        div.className = this.name.legendrender;\n        if (params.edit) {\n            div.className += \" \";\n            div.className += this.name.legendeditable;\n            if (div.addEventListener) {\n                div.addEventListener(\"click\", function (e) {\n                    self.onEditionLegendMapBox(e);\n                });\n            } else if (div.attachEvent) {\n                div.attachEvent(\"onclick\", function (e) {\n                    self.onEditionLegendMapBox(e);\n                });\n            }\n        }\n\n        // type de legende\n        var type = params.type;\n\n        // TODO className\n        // div.className += \" legend-not-implemented\";\n        // ajout du style sur la div de rendu\n        if (this._renderThumbnail(type, params.values)) {\n            // className possibles :\n            // \" legend-text\"\n            // \" legend-icon\"\n            // \" legend-background\"\n            // \" legend-line\"\n            // \" legend-line-not-editable\"\n            // \" legend-circle\"\n            // \" legend-circle-not-editable\"\n            // \" legend-fill\"\n            // \" legend-fill-not-editable\"\n            div.className += (params.edit) ? \" legend-\" + type : \" legend-\" + type + \"-not-editable\";\n        } else {\n            div.className += \" legend-unknow\";\n        }\n\n        container.appendChild(div);\n\n        var span = document.createElement(\"span\");\n        span.className = this.name.legendtitle;\n        span.innerHTML = params.title || \"\";\n        container.appendChild(span);\n\n        return container;\n    }\n\n    /**\n    * Create a Graphical Legend Edition\n    *\n    * @param {Object} params - param\n    * @param {String} params.type - fill, line, (TODO : circle, icon or text)\n    * @param {String} params.values - {\"fill-color\": \"#2BB3E1\"}\n    * @param {Boolean} params.edit - editable with a colorPicker for only line and fill legend !\n    * @returns {DOMElement} DOM element\n    *\n    * @private\n    * @example\n    *   <div class=\"GPEditorMapBoxLegendToolsContainer\">\n    *       <div class=\"legend-styling-div\">\n    *           <label for=\"stroke-color\">Couleur du trait</label>\n    *           <input class=\"legend-styling\" id=\"stroke-color\" title=\"\" type=\"color\">\n    *       </div>\n    *       <div class=\"legend-styling-div\">\n    *           <label for=\"stroke-width\">Epaisseur du trait</label>\n    *           <input class=\"legend-styling\" id=\"stroke-width\" title=\"\" type=\"range\" min=\"0\" max=\"10\" step=\"1\" value=\"1\">\n    *       </div>\n    *       <div class=\"legend-styling-div\">\n    *           <label for=\"stroke-opacity\">Opacité du trait</label>\n    *           <input class=\"legend-styling\" id=\"stroke-opacity\" title=\"\" type=\"range\" min=\"0\" max=\"1\" step=\"0.1\" value=\"1\">\n    *       </div>\n    *       <div class=\"legend-styling-div\">\n    *           <label for=\"fill-color\">Couleur de remplissage</label>\n    *        <input class=\"legend-styling\" id=\"fill-color\" title=\"\" type=\"color\">\n    *       </div>\n    *       <div class=\"legend-styling-div\">\n    *           <label for=\"fill-opacity\">Opacité du remplissage</label>\n    *           <input class=\"legend-styling\" id=\"fill-opacity\" title=\"\" type=\"range\" min=\"0\" max=\"1\" step=\"0.1\" value=\"1\">\n    *       </div>\n    *   </div>\n    */\n    _createElementEditionLegend (params) {\n        // contexte\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = this.name.containerlegendtools;\n\n        // uniquement les elements editables !\n        if (!params.edit) {\n            return container;\n        }\n\n        // on ne traite que l'edition du mode 'traits' ou 'surfaciques'\n        // mode 'line'\n        switch (params.type) {\n            case \"line\":\n                createLineColor.call(self);\n                createLineWidth.call(self);\n                createLineOpacity.call(self);\n                break;\n            case \"background\":\n            case \"fill\":\n                createFillColor.call(self);\n                createFillOpacity.call(self);\n                break;\n            default:\n                break;\n        }\n\n        // couleur du trait\n        function createLineColor () {\n            var linecolor = document.createElement(\"div\");\n            linecolor.className = \"legend-styling-div\";\n            var lLineColor = document.createElement(\"label\");\n            lLineColor.className = \"legend-line\";\n            lLineColor.htmlFor = this.id ? \"line-color-\" + this.id : \"line-color\";\n            lLineColor.innerHTML = this.labels[\"line-color\"];\n            var inputLineColor = document.createElement(\"input\");\n            inputLineColor.className = \"legend-styling\";\n            inputLineColor.id = this.id ? \"line-color-\" + this.id : \"line-color\";\n            inputLineColor.title = \"Selectionner une couleur de trait\";\n            inputLineColor.type = \"color\";\n            inputLineColor.value = params.values.color;\n            inputLineColor.setAttribute(\"data-id\", \"line-color\");\n            if (inputLineColor.addEventListener) {\n                inputLineColor.addEventListener(\"change\", function (e) {\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        color : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            } else if (inputLineColor.attachEvent) {\n                inputLineColor.attachEvent(\"onchange\", function (e) {\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        color : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            }\n            linecolor.appendChild(lLineColor);\n            linecolor.appendChild(inputLineColor);\n            container.appendChild(linecolor);\n        }\n\n        // epaisseur du trait\n        function createLineWidth () {\n            var linewidth = document.createElement(\"div\");\n            linewidth.className = \"legend-styling-div\";\n            var lLineWidth = document.createElement(\"label\");\n            lLineWidth.className = \"legend-line\";\n            lLineWidth.htmlFor = this.id ? \"line-width-\" + this.id : \"line-width\";\n            lLineWidth.innerHTML = this.labels[\"line-width\"];\n            var inputLineWidth = document.createElement(\"input\");\n            inputLineWidth.className = \"legend-styling\";\n            inputLineWidth.id = this.id ? \"line-width-\" + this.id : \"line-width\";\n            inputLineWidth.title = params.values.width;\n            inputLineWidth.type = \"range\";\n            inputLineWidth.min = \"0\";\n            inputLineWidth.max = \"10\";\n            inputLineWidth.step = \"1\";\n            inputLineWidth.defaultValue = params.values.width;\n            inputLineWidth.setAttribute(\"data-id\", \"line-width\");\n            if (inputLineWidth.addEventListener) {\n                inputLineWidth.addEventListener(\"change\", function (e) {\n                    logger.trace(e);\n                    e.target.title = e.target.value;\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        width : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            } else if (inputLineWidth.attachEvent) {\n                inputLineWidth.attachEvent(\"onchange\", function (e) {\n                    logger.trace(e);\n                    e.target.title = e.target.value;\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        width : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            }\n            linewidth.appendChild(lLineWidth);\n            linewidth.appendChild(inputLineWidth);\n            container.appendChild(linewidth);\n        }\n\n        // opacité du trait\n        function createLineOpacity () {\n            var lineopacity = document.createElement(\"div\");\n            lineopacity.className = \"legend-styling-div\";\n            var lLineOpacity = document.createElement(\"label\");\n            lLineOpacity.className = \"legend-line\";\n            lLineOpacity.htmlFor = this.id ? \"line-opacity-\" + this.id : \"line-opacity\";\n            lLineOpacity.innerHTML = this.labels[\"line-opacity\"];\n            var inputLineOpacity = document.createElement(\"input\");\n            inputLineOpacity.className = \"legend-styling\";\n            inputLineOpacity.id = this.id ? \"line-opacity-\" + this.id : \"line-opacity\";\n            inputLineOpacity.title = params.values.opacity;\n            inputLineOpacity.type = \"range\";\n            inputLineOpacity.min = \"0\";\n            inputLineOpacity.max = \"1\";\n            inputLineOpacity.step = \"0.1\";\n            inputLineOpacity.defaultValue = params.values.opacity;\n            inputLineOpacity.setAttribute(\"data-id\", \"line-opacity\");\n            if (inputLineOpacity.addEventListener) {\n                inputLineOpacity.addEventListener(\"change\", function (e) {\n                    logger.trace(e);\n                    e.target.title = e.target.value;\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        opacity : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            } else if (inputLineOpacity.attachEvent) {\n                inputLineOpacity.attachEvent(\"onchange\", function (e) {\n                    logger.trace(e);\n                    e.target.title = e.target.value;\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        opacity : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            }\n            lineopacity.appendChild(lLineOpacity);\n            lineopacity.appendChild(inputLineOpacity);\n            container.appendChild(lineopacity);\n        }\n\n        // couleur de remplissage\n        function createFillColor () {\n            var fillcolor = document.createElement(\"div\");\n            fillcolor.className = \"legend-styling-div\";\n            var lFillColor = document.createElement(\"label\");\n            lFillColor.className = \"legend-fill\";\n            lFillColor.htmlFor = this.id ? \"fill-color-\" + this.id : \"fill-color\";\n            lFillColor.innerHTML = this.labels[\"fill-color\"];\n            var inputFillColor = document.createElement(\"input\");\n            inputFillColor.className = \"legend-styling\";\n            inputFillColor.id = this.id ? \"fill-color-\" + this.id : \"fill-color\";\n            inputFillColor.title = \"Selectionner une couleur de remplissage\";\n            inputFillColor.type = \"color\";\n            inputFillColor.value = params.values.color;\n            inputFillColor.setAttribute(\"data-id\", \"fill-color\");\n            if (inputFillColor.addEventListener) {\n                inputFillColor.addEventListener(\"change\", function (e) {\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        color : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            } else if (inputFillColor.attachEvent) {\n                inputFillColor.attachEvent(\"onchange\", function (e) {\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        color : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            }\n            fillcolor.appendChild(lFillColor);\n            fillcolor.appendChild(inputFillColor);\n            container.appendChild(fillcolor);\n        }\n\n        // opacité du remplissage\n        function createFillOpacity () {\n            var fillopacity = document.createElement(\"div\");\n            fillopacity.className = \"legend-styling-div\";\n            var lFillOpacity = document.createElement(\"label\");\n            lFillOpacity.className = \"legend-fill\";\n            lFillOpacity.htmlFor = this.id ? \"fill-opacity-\" + this.id : \"fill-opacity\";\n            lFillOpacity.innerHTML = this.labels[\"fill-opacity\"];\n            var inputFillOpacity = document.createElement(\"input\");\n            inputFillOpacity.className = \"legend-styling\";\n            inputFillOpacity.id = this.id ? \"fill-opacity-\" + this.id : \"fill-opacity\";\n            inputFillOpacity.title = params.values.opacity;\n            inputFillOpacity.type = \"range\";\n            inputFillOpacity.min = \"0\";\n            inputFillOpacity.max = \"1\";\n            inputFillOpacity.step = \"0.1\";\n            inputFillOpacity.defaultValue = params.values.opacity;\n            inputFillOpacity.setAttribute(\"data-id\", \"fill-opacity\");\n            if (inputFillOpacity.addEventListener) {\n                inputFillOpacity.addEventListener(\"change\", function (e) {\n                    e.target.title = e.target.value;\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        opacity : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            } else if (inputFillOpacity.attachEvent) {\n                inputFillOpacity.attachEvent(\"onchange\", function (e) {\n                    e.target.title = e.target.value;\n                    self._renderThumbnail(params.type, Object.assign(params.values, {\n                        opacity : e.target.value\n                    }));\n                    self.onChangeValueLegendMapBox(e);\n                });\n            }\n            fillopacity.appendChild(lFillOpacity);\n            fillopacity.appendChild(inputFillOpacity);\n            container.appendChild(fillopacity);\n        }\n\n        return container;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     *\n     * @returns {Object} - Legend instance\n     */\n    add () {\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        return this;\n    }\n\n    /**\n     * Set display container or get\n     *\n     * @param {Boolean} display - show/hidden container or get status\n     * @returns {Boolean} - true/false\n     */\n    display (display) {\n        logger.trace(\"display()\", display);\n        if (typeof display !== \"undefined\") {\n            this.container.style.display = (display) ? \"flex\" : \"none\";\n        }\n        return (this.container.style.display === \"flex\");\n    }\n\n    /**\n     * Is editable\n     *\n     * @returns {Boolean} - true/false\n     */\n    isEditable () {\n        return this.editable;\n    }\n\n    /**\n     * Get container Legend Render (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     * @see Layer.prototype.slotLegend()\n     * @example\n     *  <div class=\"GPEditorMapBoxLegendRender legend-(line|fill|background|text|icon|circle|unknow)\" style=\"...\"></div>\n     */\n    getRenderContainer () {\n        return this.rendercontainer;\n    }\n\n    /**\n     * Get container Legend Tools (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     * @see Layer.prototype.slotLegend()\n     * @example\n     *  <div class=\"GPEditorMapBoxLegendToolsContainer\">...</div>\n     */\n    getToolsContainer () {\n        return this.toolscontainer;\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Legend#editor:legend:onclickedition\n     */\n    onEditionLegendMapBox (e) {\n        logger.trace(\"onEditionLegendMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.legend.onclickedition, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Legend#editor:legend:onchangevalue\n     */\n    onChangeValueLegendMapBox (e) {\n        logger.trace(\"onChangeValueLegendMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.legend.onchangevalue, e);\n    }\n\n};\n\n// ################################################################### //\n// ########################## CONSTANTES ############################# //\n// ################################################################### //\n\n/**\n * List of supported properties\n */\nLegend.PROPERTIES = {\n    line : [\n        \"line-color\",\n        \"line-dasharray\",\n        \"line-opacity\",\n        \"line-width\"\n    ],\n    fill : [\n        \"fill-color\",\n        \"fill-opacity\",\n        \"fill-outline-color\",\n        \"fill-pattern\"\n    ],\n    background : [\n        \"background-color\",\n        \"background-opacity\",\n        \"background-pattern\"\n    ],\n    circle : [\n        \"circle-color\",\n        \"circle-opacity\",\n        \"circle-stroke-color\",\n        \"circle-stroke-opacity\",\n        \"circle-stroke-width\"\n    ],\n    icon : [\n        \"icon-color\",\n        \"icon-image\",\n        \"icon-opacity\",\n        \"__icon-size\"\n    ],\n    text : [\n        \"__text-anchor\",\n        \"text-color\",\n        \"text-field\",\n        \"__text-font\",\n        \"__text-opacity\",\n        \"__text-size\"\n    ]\n};\n\nexport default Legend;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Utils from \"../../Utils/Helper\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"editor-search\");\n\n/**\n * @classdesc\n *\n * TODO MapBox search management\n *\n * @constructor\n * @alias ol.style.editor.Search\n * @param {Object} options - options for function call.\n * @todo\n * @example\n *   var Search = new Search ({\n *      target : ...,\n *      tools : {\n *          // ...\n *      }\n *      title : \"Filtres de recherche :\",\n *      obj : {}\n *   });\n *  Search.add();\n *  Search.display(true);\n *  Search.getContainer();\n */\nclass Search {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Search\", options);\n\n        // options\n        this.options = options || {\n            // default...\n            target : null,\n            tools : null,\n            title : null,\n            obj : null\n        };\n\n        if (!(this instanceof Search)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null;\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        var _toolsDefault = {};\n\n        if (!this.options.tools) {\n            this.options.tools = _toolsDefault;\n        }\n\n        Utils.mergeParams(this.options.tools, _toolsDefault, false);\n\n        if (!this.options.obj) {\n            // choix d'avoir un objet vide pour une edition futur...\n            this.options.obj = {};\n        }\n\n        if (!this.options.title) {\n            this.options.title = \"Recherche de couches :\";\n        }\n        this.container = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxSearchTarget\",\n            container : \"GPEditorMapBoxSearchContainer\"\n            // TODO ...\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     * <div class=\"GPEditorMapBoxSearchContainer\">\n     *  // ...\n     * </div>\n     */\n    _initContainer () {\n        // contexte\n        // var self = this;\n        var _search = JSON.parse(JSON.stringify(this.options.obj)); // on manipule une copie  !\n\n        if (_search.layers) {\n            if (_search.layers.length === 0) {\n                logger.info(\"tag 'layers' is empty !\");\n            }\n        }\n\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n\n        // TODO...\n        // outil de recherche des couches mapbox.\n        // 2 modes de recherches : exact ou par autocompletion\n        // affichage des resultats directement dans la liste des couches\n        // la recherche porte sur les champs suiavnts (options):\n        // * id (par defaut)\n        // * source-layer (par defaut)\n        // * type (ex. Symbol)\n        // * field (ex. HOPITAL_PONC) > recherche dans le champs filtre\n        // main container\n        this.container = div;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     * @returns {Object} - Search instance\n     */\n    add () {\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        return this;\n    }\n\n    /**\n     * Set display container or get\n     *\n     * @param {Boolean} display - show/hidden container or get status\n     * @returns {Boolean} - true/false\n     */\n    display (display) {\n        logger.trace(\"display()\", display);\n        if (typeof display !== \"undefined\") {\n            this.container.style.display = (display) ? \"flex\" : \"none\";\n        }\n        return (this.container.style.display === \"flex\");\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Search#editor:search:onsubmit\n     */\n    onSubmitSearchLayersMapBox (e) {\n        logger.trace(\"onSubmitSearchLayersMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.search.onsubmit, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Search#editor:search:onautocomplete\n     */\n    onAutocompleteSearchLayersMapBox (e) {\n        logger.trace(\"onAutocompleteSearchLayersMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.search.onautocomplete, e);\n    }\n\n};\n\nexport default Search;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Utils from \"../../Utils/Helper\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"editor-style\");\n\n/**\n * @classdesc\n *\n * MapBox styles management\n *\n * @constructor\n * @alias ol.style.editor.Style\n * @param {Object} options - options for function call.\n * @example\n *   var style = new Style ({\n *      target : ...,\n *      position : 1, // identifiant de position (unique !)\n *      tools : {\n *          edition : false,\n *          scale : true\n *      },\n *      title : \"Styles (JSON)\",\n *      obj : {\n *          paint : {},\n *          layout : {}\n *      }\n *   });\n *  style.add();\n *  style.display(true);\n *  style.getContainer();\n */\nclass Style {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Style\", options);\n\n        // options\n        this.options = options || {\n            // default...\n            target : null,\n            position : 0,\n            tools : null,\n            title : null,\n            obj : null\n        };\n\n        if (!(this instanceof Style)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null;\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        if (!this.options.position) {\n            this.options.position = 0;\n        }\n\n        var _toolsDefault = {\n            scale : true,\n            edition : false\n        };\n\n        if (!this.options.tools) {\n            this.options.tools = _toolsDefault;\n        }\n\n        Utils.mergeParams(this.options.tools, _toolsDefault, false);\n\n        if (!this.options.obj) {\n            // choix d'avoir un objet vide pour une edition futur...\n            this.options.obj = {\n                paint : {},\n                layout : {}\n            };\n        }\n\n        if (!this.options.title) {\n            this.options.title = \"JSON Styles :\";\n        }\n\n        this.container = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxStyleTarget\",\n            container : \"GPEditorMapBoxStyleContainer\",\n            containerjson : \"GPEditorMapBoxStyleJsonContainer\",\n            jsonlabel : \"GPEditorMapBoxStyleJsonTitle\",\n            jsondisplay : \"GPEditorMapBoxStyleJsonDisplay\",\n            containertoolsscale : \"GPEditorMapBoxStyleToolsScaleContainer\",\n            scaletitle : \"GPEditorMapBoxStyleScaleTitle\",\n            containertoolsminscale : \"GPEditorMapBoxStyleToolsScaleMinContainer\",\n            scalelabelmin : \"GPEditorMapBoxStyleScaleLabelMin\",\n            scaleinputmin : \"GPEditorMapBoxStyleScaleInputMin\",\n            containertoolsmaxscale : \"GPEditorMapBoxStyleToolsScaleMaxContainer\",\n            scalelabelmax : \"GPEditorMapBoxStyleScaleLabelMax\",\n            scaleinputmax : \"GPEditorMapBoxStyleScaleInputMax\",\n            containertoolsedit : \"GPEditorMapBoxStyleToolsEditionContainer\"\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * ie. this.container\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     * <div class=\"GPEditorMapBoxStyleContainer\">\n     *   <div class =\"GPEditorMapBoxStyleJsonContainer\">\n     *      <label class=\"GPEditorMapBoxStyleJsonTitle\">JSON Styles :</label>\n     *      <pre class=\"GPEditorMapBoxStyleJsonDisplay\">...</pre>\n     *   </div>\n     *   <div class =\"GPEditorMapBoxStyleToolsScaleContainer\"></div>\n     *   <div class =\"GPEditorMapBoxStyleToolsEditionContainer\"></div>\n     * </div>\n     */\n    _initContainer () {\n        // contexte\n        var self = this;\n\n        var _found = false;\n        var _obj = JSON.parse(JSON.stringify(this.options.obj)); // on manipule une copie  !\n        var _style = {};\n\n        // styles into tag 'paint' ?\n        if (_obj.paint) {\n            _found = true;\n            _style.paint = _obj.paint;\n            if (Object.keys(_obj.paint).length === 0) {\n                logger.info(\"tag 'paint' is empty !\");\n            }\n        }\n\n        // if not, search into tag 'layout' !\n        if (_obj.layout) {\n            _found = true;\n            _style.layout = _obj.layout;\n            // FIXME delete visibility from display ?\n            if (_obj.layout.visibility) {\n                delete _style.visibility;\n            }\n            if (Object.keys(_obj.layout).length === 0) {\n                logger.info(\"tag 'layout' is empty !\");\n            }\n        }\n\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n\n        var json = null;\n        if (_found) {\n            var strJson = JSON.stringify(_style, null, 4);\n            json = this._syntaxHighlight(strJson);\n        }\n\n        var divJson = document.createElement(\"div\");\n        divJson.className = this.name.containerjson;\n\n        var label = document.createElement(\"label\");\n        label.className = this.name.jsonlabel;\n        label.innerHTML = this.options.title;\n        divJson.appendChild(label);\n\n        var pre = document.createElement(\"pre\");\n        pre.className = this.name.jsondisplay;\n        pre.innerHTML = json;\n        if (pre.addEventListener) {\n            pre.addEventListener(\"click\", function (e) {\n                if (self.options.tools.edition) {\n                    self.onEditJsonStyleMapBox(e);\n                }\n            });\n        } else if (pre.attachEvent) {\n            pre.attachEvent(\"onclick\", function (e) {\n                if (self.options.tools.edition) {\n                    self.onEditJsonStyleMapBox(e);\n                }\n            });\n        }\n        divJson.appendChild(pre);\n        div.appendChild(divJson);\n\n        // scale\n        if (this.options.tools.scale) {\n            div.appendChild(this._createElementToolsScale({\n                min : (_style.layout) ? _style.layout.minzoom : 0,\n                max : (_style.layout) ? _style.layout.maxzoom : 21\n            }));\n        }\n\n        // TODO menu d'edition\n        if (this.options.tools.edition) {\n            div.appendChild(this._createElementToolsEdition());\n        }\n\n        // main container\n        this.container = div;\n    }\n\n    /**\n     * Graphical rendering of the scale tools\n     *\n     * @param {Object} scale - {min,max} or 0|21\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     * @example\n     *   <div class =\"GPEditorMapBoxStyleToolsScaleContainer\"></div>\n     */\n    _createElementToolsScale (scale) {\n        logger.trace(\"_createElementToolsScale\");\n\n        var self = this;\n\n        var obj = this.options.obj;\n\n        var divToolsScale = document.createElement(\"div\");\n        divToolsScale.className = this.name.containertoolsscale;\n\n        // FIXME Titre ?\n        // var label = document.createElement(\"label\");\n        // label.className = this.name.scaletitle;\n        // label.innerHTML = \"Scale :\";\n        // divToolsScale.appendChild(label);\n        var divMin = document.createElement(\"div\");\n        divMin.className = this.name.containertoolsminscale;\n\n        var labelMin = document.createElement(\"label\");\n        labelMin.className = this.name.scalelabelmin;\n        labelMin.innerHTML = \"min :\";\n        divMin.appendChild(labelMin);\n\n        var inputMin = document.createElement(\"input\");\n        inputMin.className = this.name.scaleinputmin;\n        inputMin.type = \"range\";\n        inputMin.value = scale.min || 0;\n        inputMin.title = scale.min || 0;\n        inputMin.disabled = false;\n        inputMin.min = 0;\n        inputMin.max = 21;\n        inputMin.data = obj; // on lie le DOM et la couche, utile lors d'evenement !\n        if (inputMin.addEventListener) {\n            inputMin.addEventListener(\"change\", function (e) {\n                self.onChangeStyleScaleMinMapBox(e);\n            });\n        } else if (inputMin.appendChild) {\n            inputMin.appendChild(\"onchange\", function (e) {\n                self.onChangeStyleScaleMinMapBox(e);\n            });\n        }\n        divMin.appendChild(inputMin);\n\n        divToolsScale.appendChild(divMin);\n\n        var divMax = document.createElement(\"div\");\n        divMax.className = this.name.containertoolsmaxscale;\n\n        var labelMax = document.createElement(\"label\");\n        labelMax.className = this.name.scalelabelmax;\n        labelMax.innerHTML = \"max :\";\n        divMax.appendChild(labelMax);\n\n        var inputMax = document.createElement(\"input\");\n        inputMax.className = this.name.scaleinputmin;\n        inputMax.type = \"range\";\n        inputMax.value = scale.max || 21;\n        inputMax.title = scale.max || 21;\n        inputMax.disabled = false;\n        inputMax.min = 0;\n        inputMax.max = 21;\n        inputMax.data = obj; // on lie le DOM et la couche, utile lors d'evenement !\n        if (inputMax.addEventListener) {\n            inputMax.addEventListener(\"change\", function (e) {\n                self.onChangeStyleScaleMaxMapBox(e);\n            });\n        } else if (inputMax.appendChild) {\n            inputMax.appendChild(\"onchange\", function (e) {\n                self.onChangeStyleScaleMaxMapBox(e);\n            });\n        }\n        divMax.appendChild(inputMax);\n\n        divToolsScale.appendChild(divMax);\n\n        return divToolsScale;\n    }\n\n    /**\n     * Graphical rendering of the edition tools\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     * @example\n     *   <div class =\"GPEditorMapBoxStyleToolsScaleContainer\"></div>\n     */\n    _createElementToolsEdition () {\n        logger.warn(\"_createElementToolsEdition, it's not yet implemented !\");\n\n        var divToolsEdit = document.createElement(\"div\");\n        divToolsEdit.className = this.name.containertoolsedit;\n\n        return divToolsEdit;\n    }\n\n    // ################################################################### //\n    // ##################### private methods ############################# //\n    // ################################################################### //\n    /**\n     * Transform a JSON into a DOM with a syntax in color\n     *\n     * @private\n     * @param {Object} json - json.\n     * @returns {DOMElement} dom element\n     */\n    _syntaxHighlight (json) {\n        json = json.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\");\n        return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)/g, function (match) {\n            var cls = \"gp-json-number\";\n            if (/^\"/.test(match)) {\n                if (/:$/.test(match)) {\n                    cls = \"gp-json-key\";\n                } else {\n                    cls = \"gp-json-string\";\n                }\n            } else if (/true|false/.test(match)) {\n                cls = \"gp-json-boolean\";\n            } else if (/null/.test(match)) {\n                cls = \"gp-json-null\";\n            }\n            return \"<span class='\" + cls + \"'>\" + match + \"</span>\";\n        });\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     * @returns {Object} - Legend instance\n     */\n    add () {\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        return this;\n    }\n\n    /**\n     * Set display container or get\n     *\n     * @param {Boolean} display - show/hidden container or get status\n     * @returns {Boolean} - true/false\n     */\n    display (display) {\n        logger.trace(\"display()\", display);\n        if (typeof display !== \"undefined\") {\n            this.container.style.display = (display) ? \"flex\" : \"none\";\n        }\n        return (this.container.style.display === \"flex\");\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Style#editor:style:oneditjson\n     */\n    onEditJsonStyleMapBox (e) {\n        logger.trace(\"onEditJsonStyleMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.style.oneditjson, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Style#editor:style:scale:onchangemin\n     */\n    onChangeStyleScaleMinMapBox (e) {\n        logger.trace(\"onChangeStyleScaleMinMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.style.scale.onchangemin, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form...\n     *\n     * 'e' contains the option object into 'e.target.data' !\n     * 'e' contains the id editor into 'e.target.editorID' !\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Style#editor:style:scale:onchangemax\n     */\n    onChangeStyleScaleMaxMapBox (e) {\n        logger.trace(\"onChangeStyleScaleMaxMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        EventBus.dispatch(EventEditor.style.scale.onchangemax, e);\n    }\n\n};\n\nexport default Style;\n","import EventBus from \"eventbusjs\";\nimport EventEditor from \"./Event\";\nimport Utils from \"../../Utils/Helper\";\nimport ID from \"../../Utils/SelectorID\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"editor-themes\");\n\n/**\n * @classdesc\n *\n * Mapbox Themes management\n *\n * @constructor\n * @alias ol.style.editor.Theme\n * @param {Object} options - options for function call.\n * @example\n *   var theme = new Themes ({\n *        \"target\": \"\",\n *        \"tools\": {\n *          \"thumbnails\": true,\n *          \"button\" : {\n *              \"visible\" : true,\n *              \"type\" : \"radio\" (par defaut) | \"checkbox\"\n *          }\n *        },\n *        \"obj\": {\n *          \"themesSummary\": \"\", // Titre du composant (non graphique !)\n *          \"themes\": [{\n *             \"thumbnail\": \"data/images/layer0.png\",\n *             \"name\": \"standard0\",\n *             \"url\": \"data/styles/layer0.json\",\n *             \"description\": \"\",\n *             \"selected\" : true\n *          },{\n *             \"thumbnail\": \"data/images/layer1.png\",\n *             \"name\": \"standard1\",\n *             \"url\": \"data/styles/layer1.json\",\n *             \"description\": \"\"\n *          }]\n *        }\n *   });\n *  theme.add();\n *  theme.display(true);\n *  theme.getContainer();\n */\nclass Themes {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Themes\", options);\n\n        // options\n        this.options = options || {\n            // TODO default...\n        };\n\n        if (!(this instanceof Themes)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n\n        this._initContainer();\n    }\n\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // unique editor id (optional!)\n        this.id = this.options.id || null;\n\n        if (!this.options.target) {\n            // cf. add()\n        }\n\n        var _toolsDefault = {\n            thumbnails : true,\n            button : {\n                visible : true,\n                type : \"radio\"\n            }\n        };\n\n        if (!this.options.tools || Object.keys(this.options.tools).length === 0) {\n            this.options.tools = _toolsDefault;\n        }\n\n        Utils.mergeParams(this.options.tools, _toolsDefault, false);\n\n        if (typeof this.options.obj === \"undefined\" ||\n            this.options.obj === null ||\n            !this.options.obj) {\n            // vide par defaut ?\n            this.options.obj = {\n                themesSummary : \"\",\n                themes : []\n            };\n        }\n\n        this.container = null;\n\n        // DOM : className or id\n        this.name = {\n            target : \"GPEditorMapBoxThemeTarget\",\n            container : \"GPEditorMapBoxThemesContainer\",\n            containertheme : \"GPEditorMapBoxThemeContainer\",\n            containerthemeID : \"GPEditorMapBoxThemeContainer_ID_\",\n            input : \"GPEditorMapBoxThemeInput\",\n            inputID : \"GPEditorMapBoxThemeInput_ID_\",\n            label : \"GPEditorMapBoxThemeTitle\",\n            labelID : \"GPEditorMapBoxThemeTitle_ID_\",\n            image : \"GPEditorMapBoxThemeImage\",\n            imageID : \"GPEditorMapBoxThemeImage_ID_\",\n            message : \"GPEditorMapBoxThemeMessage\"\n        };\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @private\n     * @example\n     *  <div class=\"GPEditorMapBoxThemesContainer\">\n     *      <div id=\"GPEditorMapBoxThemeContainer-1\" class=\"GPEditorMapBoxThemeContainer\">\n     *          <input type=\"radio\" id=\"GPEditorMapBoxThemeInput-1\" class=\"GPEditorMapBoxThemeInput\" name=\"1552920176933\">\n     *          <img class=\"GPEditorMapBoxThemeImage\" src=\"http://image1.png\" alt=\"Description1\"></img>\n     *          <label for=\"GPEditorMapBoxThemeInput-1\" class=\"GPEditorMapBoxThemeTitle\">Titre1</label>\n     *      </div>\n     *      <div id=\"GPEditorMapBoxThemeContainer-2\" class=\"GPEditorMapBoxThemeContainer\">\n     *          <input type=\"radio\" id=\"GPEditorMapBoxThemeInput-2\" class=\"GPEditorMapBoxThemeInput\" name=\"1552920176934\">\n     *          <img class=\"GPEditorMapBoxThemeImage\" src=\"http://image2.png\" alt=\"Description2\"></img>\n     *          <label for=\"GPEditorMapBoxThemeInput-2\" class=\"GPEditorMapBoxThemeTitle\">Titre2</label>\n     *      </div>\n     * </div>\n     */\n    _initContainer () {\n        // contexte\n        var self = this;\n\n        var obj = this.options.obj;\n\n        var id = this.id || ID.generate();\n\n        // div principale\n        var div = document.createElement(\"div\");\n        div.className = this.name.container;\n        div.title = obj.themesSummary || \"\";\n\n        var _lstThemes = obj.themes;\n        if (_lstThemes) {\n            for (var i = 0; i < _lstThemes.length; i++) {\n                var _theme = _lstThemes[i];\n\n                // div pour chaque theme\n                var divTheme = document.createElement(\"div\");\n                divTheme.id = this.name.containerthemeID + i + \"_\" + id;\n                divTheme.className = this.name.containertheme;\n                divTheme.tabIndex = i;\n\n                // url du style est obligatoire !\n                var _url = _theme.url;\n                // style selectionné par defaut (uniquement en mode radio-button !?)\n                var _selected = _theme.selected || false;\n                if (_url) {\n                    // bouton\n                    var button = this.options.tools.button;\n                    if (button.visible) {\n                        var _type = (button.type === \"checkbox\") ? \"checkbox\" : \"radio\";\n                        var _button = document.createElement(\"input\");\n                        _button.type = _type;\n                        _button.id = this.name.inputID + i + \"_\" + id;\n                        _button.className = this.name.input;\n                        _button.name = id;\n                        _button.checked = _selected;\n                        _button.data = _url; // on lie le DOM et la couche, utile lors d'evenement !\n                        if (_button.addEventListener) {\n                            _button.addEventListener(\"click\", function (e) {\n                                self.onClickThemeTitleMapBox(e);\n                            });\n                        } else if (_button.attachEvent) {\n                            _button.attachEvent(\"onclick\", function (e) {\n                                self.onClickThemeTitleMapBox(e);\n                            });\n                        }\n                        divTheme.appendChild(_button);\n                    }\n                    // vignette\n                    if (this.options.tools.thumbnails) {\n                        if (_theme.thumbnail) {\n                            var _img = document.createElement(\"img\");\n                            _img.id = this.name.imageID + i + \"_\" + id;\n                            _img.className = this.name.image;\n                            _img.src = _theme.thumbnail;\n                            _img.alt = _theme.thumbnail;\n                            _img.title = _theme.description || \"\"; // une description au survol de l'image ou titre...\n                            _img.data = _url; // on lie le DOM et la couche, utile lors d'evenement !\n                            if (_img.addEventListener) {\n                                _img.addEventListener(\"click\", function (e) {\n                                    self.onClickThemeImageMapBox(e);\n                                    // maj du radio button\n                                    var nodes = e.target.parentElement.childNodes;\n                                    if (nodes) {\n                                        var node = nodes[0];\n                                        if (node.tagName.toLowerCase() === \"input\") {\n                                            node.checked = !node.checked;\n                                        }\n                                    }\n                                });\n                            } else if (_img.attachEvent) {\n                                _img.attachEvent(\"onclick\", function (e) {\n                                    self.onClickThemeImageMapBox(e);\n                                    var nodes = e.target.parentElement.childNodes;\n                                    if (nodes) {\n                                        var node = nodes[0];\n                                        if (node.tagName.toLowerCase() === \"input\") {\n                                            node.checked = !node.checked;\n                                        }\n                                    }\n                                });\n                            }\n                            divTheme.appendChild(_img);\n                        }\n                    }\n                    // label\n                    if (_theme.name) {\n                        var _label = document.createElement(\"label\");\n                        _label.id = this.name.labelID + i + \"_\" + id;\n                        if (this.options.tools.button.visible) {\n                            _label.htmlFor = _button.id;\n                        }\n                        _label.className = this.name.label;\n                        _label.innerHTML = _theme.name;\n                        _label.title = _theme.description || \"\"; // une description au survol de l'image ou titre...\n                        _label.data = _url; // on lie le DOM et la couche, utile lors d'evenement !\n                        if (!this.options.tools.button.visible) {\n                            if (_label.addEventListener) {\n                                _label.addEventListener(\"click\", function (e) {\n                                    self.onClickThemeTitleMapBox(e);\n                                });\n                            } else if (_label.attachEvent) {\n                                _label.attachEvent(\"onclick\", function (e) {\n                                    self.onClickThemeTitleMapBox(e);\n                                });\n                            }\n                        }\n                        divTheme.appendChild(_label);\n                    }\n                } else {\n                    var _msg = document.createElement(\"label\");\n                    _msg.className = this.name.message;\n                    _msg.innerHTML = \"Thème non disponible...\";\n                    divTheme.appendChild(_msg);\n                }\n\n                div.appendChild(divTheme);\n            }\n        }\n\n        this.container = div;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Add element into target DOM\n     * @returns {Object} - Legend instance\n     */\n    add () {\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var div = document.createElement(\"div\");\n                div.id = this.name.target;\n                var node = document.documentElement ||\n                    document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0];\n                node.appendChild(div);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        return this;\n    }\n\n    /**\n     * Set display container or get\n     *\n     * @param {Boolean} display - show/hidden container or get status\n     * @returns {Boolean} - true/false\n     */\n    display (display) {\n        logger.trace(\"display()\", display);\n        if (typeof display !== \"undefined\") {\n            this.container.style.display = (display) ? \"flex\" : \"none\";\n        }\n        return (this.container.style.display === \"flex\");\n    }\n\n    /**\n     * Get container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n    /**\n     * this method is called by event '' on '' tag form\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Themes#editor:themes:image\n     */\n    onClickThemeImageMapBox (e) {\n        logger.trace(\"onClickThemeImageMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        if (this.options.tools.button.type === \"checkbox\") {\n            // GPEditorMapBoxThemeInput_ID_0_1571317605868\n            var targetIDX = e.target.previousSibling.id.substring(\n                e.target.previousSibling.id.lastIndexOf(\"_\") + 1\n            );\n            var _inputs = document.getElementsByClassName(this.name.input);\n            for (var i = 0; i < _inputs.length; i++) {\n                var el = _inputs[i];\n                if (el.id === e.target.previousSibling.id) {\n                    continue;\n                }\n                var elIDX = el.id.substring(el.id.lastIndexOf(\"_\") + 1);\n                if (elIDX !== targetIDX) {\n                    continue;\n                }\n                el.checked = false;\n            }\n        }\n        EventBus.dispatch(EventEditor.themes.onclickimage, e);\n    }\n\n    /**\n     * this method is called by event '' on '' tag form\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     * @fires Themes#editor:themes:title\n     */\n    onClickThemeTitleMapBox (e) {\n        logger.trace(\"onClickThemeTitleMapBox\", e);\n        e.editorID = this.id;\n        e.data = this.options;\n        if (this.options.tools.button.type === \"checkbox\") {\n            // GPEditorMapBoxThemeInput_ID_0_1571317605868\n            var targetIDX = e.target.id.substring(e.target.id.lastIndexOf(\"_\") + 1);\n            var _inputs = document.getElementsByClassName(this.name.input);\n            for (var i = 0; i < _inputs.length; i++) {\n                var el = _inputs[i];\n                if (el.id === e.target.id) {\n                    continue;\n                }\n                var elIDX = el.id.substring(el.id.lastIndexOf(\"_\") + 1);\n                if (elIDX !== targetIDX) {\n                    continue;\n                }\n                el.checked = false;\n            }\n        }\n        EventBus.dispatch(EventEditor.themes.onclicktitle, e);\n    }\n\n};\n\nexport default Themes;\n","/**\n * @module ColorUtils\n * @alias module:~utils/ColorUtils\n * @description\n * ...\n *\n * @example\n * import ColorUtils from \"gpf-ext-ol/utils/ColorUtils\"\n * ou \n * import {ColorUtils} from \"gpf-ext-ol\n * \n * ColorUtils.hex();\n * ColorUtils.num();\n * ColorUtils.arrayTorgba();\n * ColorUtils.arrayToHex();\n * ColorUtils.rgbaToHex();\n * ColorUtils.hexToRgba();\n * ColorUtils.isHex();\n * ColorUtils.isRGB();\n */\nvar ColorUtils = {\n\n    /**\n     * Number to hex conversion\n     *\n     * @param {Number} number - 0-255\n     * @returns {String} hex value\n     */\n    hex : function (number) {\n        if (number > 255) {\n            throw new Error(\"'\" + number + \"'' is greater than 255(0xff);\");\n        }\n        var str = Number(number).toString(16);\n        return (\"0\" + str).slice(-2);\n    },\n\n    /**\n     * Hexa to number conversion\n     *\n     * @param {*} hexa 00-FF\n     * @returns {Number} number value\n     */\n    num : function (hexa) {\n        return parseInt(hexa, 16);\n    },\n\n    /**\n     * Converts an array ([255,255,255,1]) to rgba string\n     *\n     * @function arrayToRgba\n     * @param {Array} values - array of values\n     * @returns {String} A color of RGB or RGBA format\n     */\n    arrayToRgba : function (values) {\n        if (!Array.isArray(values)) {\n            throw new Error(\"Not an array !\");\n        }\n        var red = values[0];\n        var green = values[1];\n        var blue = values[2];\n        var alpha = values[3] || 1;\n        var result = \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + parseFloat(alpha) + \")\";\n        return result;\n    },\n\n    /**\n     * Converts an array ([255,255,255,1]) to #RRGGBBAA\n     *\n     * @function arrayToHex\n     * @param {Array} values - array of values\n     * @returns {Object}  hex and opacity formated values\n     */\n    arrayToHex : function (values) {\n        if (!Array.isArray(values)) {\n            throw new Error(\"Not an array !\");\n        }\n        var red = values[0];\n        var green = values[1];\n        var blue = values[2];\n        var alpha = values[3];\n        var elems = [this.hex(red), this.hex(green), this.hex(blue)];\n        var result = {};\n        result.hex = \"#\" + elems.join(\"\");\n        if (alpha) {\n            // elems.push(hex(alpha));\n            result.opacity = parseFloat(alpha);\n        }\n        return result;\n    },\n\n    /**\n     * Converts rgba string to #RRGGBBAA\n     * (Code adapted from : https://gist.github.com/mstssk/afda4ce9e5c335fd79cd)\n     *\n     * @function rgbaToHex\n     * @param {String} rgba - A color of RGB or RGBA format.\n     * @returns {Object} hex and opacity formated values\n     */\n    rgbaToHex : function (rgba) {\n        var regex = /rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(0?.?\\d+)\\s*)?\\)/;\n        var parsed = regex.exec(rgba);\n        if (!parsed) {\n            throw new Error(\"Invalid format: \" + rgba);\n        }\n        var red = parsed[1];\n        var green = parsed[2];\n        var blue = parsed[3];\n        var alpha = parsed[4];\n        var elems = [this.hex(red), this.hex(green), this.hex(blue)];\n        var result = {};\n        result.hex = \"#\" + elems.join(\"\");\n        if (alpha) {\n            // elems.push(hex(alpha));\n            result.opacity = parseFloat(alpha);\n        }\n        return result;\n    },\n\n    /**\n     * Converts hex color and opacity value to rgba string.\n     * (Code adapted from : http://stackoverflow.com/a/5624139)\n     *\n     * @function hexToRgba\n     * @param {String} hex - A color value on RGB format (hexa).\n     * @param {Number} opacity - A opacity value.\n     * @returns {String} A color of RGB or RGBA format\n     */\n    hexToRgba : function (hex, opacity) {\n        // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        if (!hex) {\n            throw new Error(\"Invalid format\");\n        }\n        hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n\n        var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        rgb = rgb ? {\n            r : parseInt(rgb[1], 16),\n            g : parseInt(rgb[2], 16),\n            b : parseInt(rgb[3], 16)\n        } : null;\n        var result = rgb ? \"rgba(\" + rgb.r + \", \" + rgb.g + \", \" + rgb.b + \", \" + opacity + \")\" : null;\n        return result;\n    },\n\n    /**\n     * Determine if value is a correct hexa color.\n     * @param {*} value - hex color (#FFFFFF)\n     * @returns {Boolean} True if value is a hexa color\n     */\n    isHex : function (value) {\n        if (!value) {\n            return false;\n        }\n        if (value.charAt(0) !== \"#\") {\n            return false;\n        }\n        var regex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n        var parsed = regex.exec(value);\n        if (!parsed) {\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Determine if value is a correct rgba color.\n     * @param {*} value - rgba color (rgba(125,125,125,1))\n     * @returns {Boolean} True if value is a rgba color\n     */\n    isRGB : function (value) {\n        if (!value) {\n            return false;\n        }\n        var regex = /rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(0?.?\\d+)\\s*)?\\)/;\n        var parsed = regex.exec(value);\n        if (!parsed) {\n            return false;\n        }\n        return true;\n    }\n};\n\nexport default ColorUtils;\n","/**\n* @module Helper\n* @alias module:~utils/HelperUtils\n* @description\n* ...\n*\n* @example\n* import HelperUtils from \"gpf-ext-ol/utils/HelperUtils\"\n* ou \n* import {HelperUtils} from \"gpf-ext-ol\n* \n* HelperUtils.detectSupport();\n* HelperUtils.assign();\n* HelperUtils.mergeParams();\n*/\nvar Helper = {\n\n    /**\n     * this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     *\n     * @function detectSupport\n     * @returns {Boolean} isDesktop - true for desktop userAgent, false for mobile\n     */\n    detectSupport : function () {\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    /**\n     *  Copies all source object members to dest\n     *\n     * @function assign\n     * @param {Object} dest - destination object where properties and method will be copied\n     * @param {Object} source - source object from which properties and method will be copied\n     * @returns {Object} dest\n     */\n    assign : function (dest, source) {\n        dest = dest || {};\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                dest[prop] = source[prop];\n            }\n        }\n        return dest;\n    },\n\n    /**\n     * Merge two objects parameters (deeper than assign)\n     *\n     * @function mergeParams\n     * @param {Object} dest     - destination object where properties and method will be merge\n     * @param {Object} source   - source object from which properties and method will be merge\n     * @param {Boolean} replace - replace destination value by source if exists or not (true by default)\n     */\n    mergeParams : function (dest, source, replace) {\n        if (!dest || !source) {\n            return;\n        }\n        if (typeof replace === \"undefined\") {\n            replace = true;\n        }\n        for (var param in source) {\n            if (source.hasOwnProperty(param)) {\n                if (typeof source[param] === \"object\") {\n                    if (dest.hasOwnProperty(param)) {\n                        this.mergeParams(dest[param], source[param], replace);\n                    } else {\n                        dest[param] = source[param];\n                    }\n                } else {\n                    if (dest.hasOwnProperty(param)) {\n                        if (replace) {\n                            dest[param] = source[param];\n                        }\n                    } else {\n                        dest[param] = source[param];\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport default Helper;\n","import * as Log from \"loglevel\";\n\n/**\n * @module LoggerByDefault\n * @alias module:~utils/Logger\n * @description\n * ...\n *\n * @example\n * import Logger from \"gpf-ext-ol/utils/LoggerByDefault\"\n * ou \n * import {Logger} from \"gpf-ext-ol\n * \n * Logger.getLogger();\n * Logger.disableAll();\n * Logger.enableAll();\n */\nvar LoggerByDefault = {\n    /**\n     * creation d'un logger statique\n     *\n     * @function getLogger\n     * @param {String} [name=\"default\"] - the logger name\n     * @returns {Object} logger\n     */\n    getLogger : function (name) {\n        // on définit process si non défini dans l'environnement\n        if (typeof process === \"undefined\") {\n            var process = {};\n            process.env = {\n                VERBOSE : false\n            };\n        }\n        (process.env.VERBOSE) ? Log.enableAll() : Log.disableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    },\n    /**\n     * desactive tous les loggers\n     * @function disableAll\n     */\n    disableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.disableAll();\n            }\n        }\n    },\n    /**\n     * active tous les loggers\n     * @function enableAll\n     */\n    enableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.enableAll();\n            }\n        }\n    }\n};\n\nexport default LoggerByDefault;\n","/**\n * @module SelectorID\n * @alias module:~utils/SelectorID\n * @private\n * @description\n * formalisme d'un tag ID :\n * -> NAME(_ORDER)-1460636385836\n *\n * @example\n * Ex.\n *   GProutePoints-1460636385836\n *   GProutePoint_10-1460636385836\n */\nvar SelectorID = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     * @function generate\n     */\n    generate : (function () {\n        var timestamp = Math.floor(Date.now());\n        return function () {\n            return timestamp++;\n        };\n    })(),\n\n    /**\n     * nom du tag\n     * @function name\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    name : function (id) {\n        var name = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i === -1) {\n            name = id;\n        } else {\n            name = id.substring(0, i);\n        }\n\n        return name;\n    },\n\n    /**\n     * numero d'identifiant du tag\n     *\n     * @function index\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    index : function (id) {\n        var index = null;\n\n        var name = this.name(id);\n        // if (name !== id) {\n        var i = name.lastIndexOf(\"_\");\n        if (i !== -1) {\n            index = name.substring(i + 1);\n        }\n        // }\n\n        return index;\n    },\n\n    /**\n     * uuid du tag\n     *\n     * @function uuid\n     * @param {String} id - the id\n     * @returns {String} uuid\n     */\n    uuid : function (id) {\n        var uuid = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i !== -1) {\n            uuid = parseInt(id.substring(i + 1), 10);\n        }\n\n        return uuid;\n    }\n\n};\n\nexport default SelectorID;\n","(function(root,factory){if(typeof exports===\"object\"&&typeof module===\"object\")module.exports=factory();else if(typeof define===\"function\"&&define.amd)define(\"EventBus\",[],factory);else if(typeof exports===\"object\")exports[\"EventBus\"]=factory();else root[\"EventBus\"]=factory()})(this,function(){var EventBusClass={};EventBusClass=function(){this.listeners={}};EventBusClass.prototype={addEventListener:function(type,callback,scope){var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>3?args.splice(3,args.length-1):[];if(typeof this.listeners[type]!=\"undefined\"){this.listeners[type].push({scope:scope,callback:callback,args:args})}else{this.listeners[type]=[{scope:scope,callback:callback,args:args}]}},removeEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;var newArray=[];for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if(listener.scope==scope&&listener.callback==callback){}else{newArray.push(listener)}}this.listeners[type]=newArray}},hasEventListener:function(type,callback,scope){if(typeof this.listeners[type]!=\"undefined\"){var numOfCallbacks=this.listeners[type].length;if(callback===undefined&&scope===undefined){return numOfCallbacks>0}for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];if((scope?listener.scope==scope:true)&&listener.callback==callback){return true}}}return false},dispatch:function(type,target){var event={type:type,target:target};var args=[];var numOfArgs=arguments.length;for(var i=0;i<numOfArgs;i++){args.push(arguments[i])}args=args.length>2?args.splice(2,args.length-1):[];args=[event].concat(args);if(typeof this.listeners[type]!=\"undefined\"){var listeners=this.listeners[type].slice();var numOfCallbacks=listeners.length;for(var i=0;i<numOfCallbacks;i++){var listener=listeners[i];if(listener&&listener.callback){var concatArgs=args.concat(listener.args);listener.callback.apply(listener.scope,concatArgs)}}}},getEvents:function(){var str=\"\";for(var type in this.listeners){var numOfCallbacks=this.listeners[type].length;for(var i=0;i<numOfCallbacks;i++){var listener=this.listeners[type][i];str+=listener.scope&&listener.scope.className?listener.scope.className:\"anonymous\";str+=\" listen for '\"+type+\"'\\n\"}}return str}};var EventBus=new EventBusClass;return EventBus});","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","// extracted by mini-css-extract-plugin\nexport {};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// import CSS\nimport \"../../CSS/Controls/Editor/GPFeditor.css\";\n// import \"../../CSS/Controls/Editor/GPFeditorStyle.css\";\n// import library\nimport EventBus from \"eventbusjs\";\n// import local\nimport Utils from \"../../Utils/Helper\";\nimport ID from \"../../Utils/SelectorID\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Style from \"./Style\";\nimport Themes from \"./Themes\";\nimport Filter from \"./Filter\";\nimport Legend from \"./Legend\";\nimport Layer from \"./Layer\";\nimport Group from \"./Group\";\nimport Event from \"./Event\";\nimport Search from \"./Search\";\n\n// DOM\nimport EditorDOM from \"./EditorDOM\";\n\nvar logger = Logger.getLogger(\"editor\");\n\n/**\n * @classdesc\n *\n * Editor Styles MapBox...\n *\n * @constructor\n * @alias ol.style.Editor\n * @param {Object} options - options for function call.\n * @fires editor:layer:onclickvisibility\n * @fires editor:layer:onclickclone\n * @fires editor:layer:onclickremove\n * @fires editor:style:oneditjson\n * @fires editor:style:scale:onchangemin\n * @fires editor:style:scale:onchangemax\n * @fires editor:legend:onclickedition\n * @fires editor:legend:onchangevalue\n * @fires editor:filter:oneditjson\n * @fires editor:themes:onclickimage\n * @fires editor:themes:onclicktitle\n * @fires editor:group:oncollapse\n * @fires editor:onloaded\n * @example\n *   var editor = new Editor ({\n *      target : \"\",\n *      style : \"data/styles/layer.json\",\n *      themes: {\n *          themesSummary : \"\",\n *          themes : [{\n *             \"thumbnail\": \"data/images/layer0.png\",\n *             \"name\": \"standard0\",\n *             \"url\": \"data/styles/layer0.json\",\n *             \"description\": \"\",\n *             \"selected\" : true\n *          },{\n *             \"thumbnail\": \"data/images/layer1.png\",\n *             \"name\": \"standard1\",\n *             \"url\": \"data/styles/layer1.json\",\n *             \"description\": \"\"\n *          }]\n *      },\n *      scope : this,\n *      events : {\n *          \"editor:layer:onclickvisibility\" : ...,\n *          \"editor:layer:onclickclone\" : ...,\n *          \"editor:layer:onclickremove\" : ...,\n *          \"editor:style:oneditjson\" : ...,\n *          \"editor:style:scale:onchangemin\" : ...,\n *          \"editor:style:scale:onchangemax\" : ...,\n *          \"editor:filter:oneditjson\" : ...,\n *          \"editor:themes:onclickimage\" : this._onClickEventImageTheme(),\n *          \"editor:themes:onclicktitle\" : function(e) {...}\n *      },\n *      tools : {\n *          // afficher/cacher les themes (par defaut) ou utiliser les options\n *          themes : true | false | {\n *              target : \"...\",\n *              tools : {\n *                  \"thumbnails\": true,\n *                  \"button\": { visible : true, type : \"checkbox\" }\n *              },\n *          },\n *          layers : true | false,     // afficher les couches (layers)\n *          search : true | false,     // TODO : afficher l'outil de recheche de couches\n *          style : true | false,      // afficher les styles (sous menu layers)\n *          filter : true | false,     // afficher les filtres (sous menu layers)\n *          legend : true | false,     // afficher les legendes (layers)\n *          group : true | false,      // grouper les couches, l'option 'sort' doit être activée (layers)\n *          groupAuto : true | false,  // definir la construction automatiques des groupes\n *          sort : true | false,       // trier les couches (layers)\n *          sortBy : \"id|class|geom\",  // definir le type de tri (layers)\n *          sortOrder : \"asc, desc\",   // definir l'ordre de tri (layers)\n *          title : true | false       // afficher les titres des rubriques,\n *          collapse : true | false | undefined // afficher et/ou plier les couches ou ne pas afficher l'option,\n *          type : true | false,       // afficher le type de geometrie (layers)\n *          pin : true | false,        // afficher la puce pour chaque couche (layers)\n *          visibility : true | false, // afficher l'icone de visibilité (layers),\n *          icon : {                   // afficher l'icone \"oeil\" ou \"checkbox\" (layers),\n *              \"image\" : true,\n *              \"anchor\" : \"start\" // afficher l'icone au debut ou à la fin de la ligne\n *          },\n *          editable : true | false    // active l'edition de la legende (legendes)\n *      }\n *   });\n *   // options par defaut\n *   {\n *      themes : false,\n *      layers : true,\n *      search : false,\n *      style : false,\n *      filter : false,\n *      legend : false,\n *      group : false,\n *      groupAuto : false,\n *      sort : true,\n *      sortBy : \"id\",\n *      sortOrder : \"asc\",\n *      title : true,\n *      collapse : undefined,\n *      type : true,\n *      pin : true,\n *      visibility : true,\n *      icon : {\n *          image : true,\n *          anchor : \"end\"\n *      },\n *      editable : true\n *   }\n *   // Context\n *   editor.setContext(\"map\", map);\n *   editor.setContext(\"layer\", layer);\n *   // create DOM\n *   editor.createElement()\n *     .then(() => {\n *       console.warn(editor.getID());\n *       console.log(this.getContext(\"map\"));\n *       console.log(this.getContext(\"layer\"));\n *     })\n *     .catch(error => {});\n *   // possibility to add listeners with globale variable : eventbus\n *   eventbus.addEventListener(\"editor:style:scale:onchangemin\", function (e) {...});\n */\nclass Editor {\n\n    constructor (options) {\n        logger.trace(\"[constructor] Editor\", options);\n\n        // options\n        this.options = options || {\n            // TODO default...\n        };\n\n        if (!(this instanceof Editor)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this._initialize();\n    }\n\n    /**\n     * Initialize component\n     * (called by constructor)\n     *\n     * @private\n     */\n    _initialize () {\n        // gestion des options\n        if (!this.options.target) {\n            logger.info(\"La 'target' n'est pas renseignée (options.target).\");\n        }\n\n        if (!this.options.style) {\n            logger.error(\"Le 'style' MapBox n'est pas renseigné (options.style) !\");\n            return;\n        }\n\n        if (this.options.events) {\n            this._initEvents();\n        } else {\n            logger.warn(\"Les 'handlers' ne sont pas renseignés (options.events) !\");\n        }\n\n        if (!this.options.themes) {\n            logger.info(\"Les 'themes' MapBox ne sont pas renseignés (options.themes).\");\n        }\n\n        // options par defaut\n        var _toolsDefault = {\n            themes : false,\n            layers : true,\n            search : false,\n            style : false,\n            filter : false,\n            legend : false,\n            group : false,\n            groupAuto : false,\n            sort : true,\n            sortBy : \"id\",\n            sortOrder : \"asc\",\n            title : true,\n            collapse : undefined,\n            type : true,\n            pin : true,\n            visibility : true,\n            icon : {\n                image : true,\n                anchor : \"end\"\n            },\n            editable : true\n        };\n\n        if (!this.options.tools) {\n            logger.trace(\"Utilisation des outils MapBox par défaut (options.tools).\");\n            this.options.tools = _toolsDefault;\n        }\n\n        Utils.mergeParams(this.options.tools, _toolsDefault, false);\n\n        // id unique\n        this.id = this.options.id || ID.generate();\n\n        // context\n        this.context = {};\n        // property layers\n        this.layers = [];\n        // dom container\n        this.container = null;\n        // dom name\n        this.name = {\n            target : \"GPEditorMapBoxTarget\",\n            container : \"GPEditorMapBoxContainer\",\n            containerID : \"GPEditorMapBoxContainer_ID_\",\n            containerLayers : \"GPEditorMapBoxLayersContainer\",\n            titleLayers : \"GPEditorMapBoxLayersTitle\",\n            titleLayersID : \"GPEditorMapBoxLayersTitle_ID_\",\n            titleThemes : \"GPEditorMapBoxThemesTitle\",\n            titleThemesID : \"GPEditorMapBoxThemesTitle_ID_\",\n            sep : \"GPEditorMapBoxSep\"\n        };\n        // style json\n        this.mapbox = {};\n        // INFO\n        // sprites :\n        // {\n        //     url : null,\n        //     size : {\n        //         h : null,\n        //         w : null\n        //     },\n        //     json : {}\n        // }\n        this.sprites = {};\n    }\n\n    /**\n    * Initialize events with handlers\n    * (called by constructor)\n    *\n    * List Events :\n    *          \"editor:layer:visibility\"\n    *          \"editor:layer:clone\"\n    *          \"editor:layer:remove\"\n    *          \"editor:style:edit\"\n    *          \"editor:style:minScale\"\n    *          \"editor:style:maxScale\"\n    *          \"editor:filter:edit\"\n    *          \"editor:themes:image\",\n    *          \"editor:themes:title\"\n    * @private\n    */\n    _initEvents () {\n        var ctx = this.options.scope || this;\n        var events = this.options.events;\n        if (events) {\n            for (var event in events) {\n                if (events.hasOwnProperty(event)) {\n                    var handler = events[event];\n                    // test sur les events disponibles !\n                    if (handler) {\n                        if (!EventBus.hasEventListener(event, handler, ctx)) {\n                            EventBus.addEventListener(event, handler, ctx);\n                        }\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * Graphical rendering of the component\n     * (called by constructor)\n     *\n     * @example\n     *  <div class=\"GPEditorMapBoxContainer\" id=\"GPEditorMapBoxContainer_ID_0\">\n     *    <div id=\"GPEditorMapBoxThemesTitle\" class=\"GPEditorMapBoxThemesTitle\">Liste des 'thèmes'</div>\n     *    <div class=\"GPEditorMapBoxThemesContainer\">\n     *      ...\n     *    </div>\n     *    <div id=\"GPEditorMapBoxLayersTitle\" class=\"GPEditorMapBoxLayersTitle\">Liste des 'couches'</div>\n     *    <div class=\"GPEditorMapBoxLayersContainer\">\n     *      <div class=\"GPEditorMapBoxLayerContainer\">\n     *          <div id=\"GPEditorMapBoxLayerTitleContainer-0_1\" class=\"GPEditorMapBoxLayerTitleContainer\">\n     *              <label class=\"GPEditorMapBoxLayerImageLabel\"></label>\n     *              <input id=\"GPEditorMapBoxLayerTitleInput-0_1\" class=\"GPEditorMapBoxLayerTitleInput\" type=\"checkbox\">\n     *              <label class=\"GPEditorMapBoxLayerTitleLabel\" for=\"GPEditorMapBoxLayerTitleInput-0_1\" title=\"states\">population_lt_2m</label>\n     *          </div>\n     *      </div>\n     *      <div class=\"GPEditorMapBoxLayerContainer\">...</div>\n     *      <div class=\"GPEditorMapBoxLayerContainer\">...</div>\n     *    </div>\n     *  </div>\n     * @private\n     */\n    _initContainer () {\n        logger.trace(this.mapbox);\n\n        // existance d'un autre container (editeur) ?\n        // var _idx = 0;\n        // var elements = document.querySelectorAll(\"div[id^=\" + this.name.containerID + \"]\");\n        // for (var j = 0; j < elements.length; j++) {\n        //     var element = elements[j];\n        //     var num = parseInt(element.id.substring(element.id.lastIndexOf(\"_\") + 1), 10);\n        //     if (num > _idx) {\n        //         _idx = num;\n        //     }\n        // }\n        // if (elements.length) {\n        //     _idx += 1;\n        // }\n        // container principal de l'editeur\n        var div = document.createElement(\"div\");\n        div.id = this.name.containerID + this.id;\n        div.className = this.name.container;\n\n        // Themes\n        var _toolsThemes = this.options.tools.themes;\n        if (_toolsThemes && this.options.themes) {\n            // title\n            if (this.options.tools.title) {\n                var titleThemes = document.createElement(\"div\");\n                titleThemes.id = this.name.titleThemesID + this.id;\n                titleThemes.className = this.name.titleThemes;\n                titleThemes.innerHTML = \"Liste des 'thèmes'\";\n                div.appendChild(titleThemes);\n            }\n\n            // lien vers les styles\n            var themes = new Themes({\n                id : this.id,\n                target : div,\n                tools : (typeof _toolsThemes === \"object\") ? _toolsThemes : {},\n                obj : this.options.themes\n            });\n            themes.add();\n        }\n\n        // TODO : Recheche / filtre de couches\n        if (this.options.tools.search) {\n            var search = new Search({\n                id : this.id,\n                target : div,\n                tools : {},\n                obj : this.mapbox.layers // liste des objets layers\n            });\n            search.add();\n        }\n\n        for (var source in this.mapbox.sources) {\n            if (this.mapbox.sources.hasOwnProperty(source)) {\n                if (this.options.tools.layers) {\n                    // multisources ? Si oui, on renseigne un titre...\n                    var multisources = (Object.keys(this.mapbox.sources).length > 1) ? 1 : 0;\n                    if (multisources) {\n                        var hr = document.createElement(\"hr\");\n                        hr.className = this.name.sep;\n                        div.appendChild(hr);\n                    }\n                    // title\n                    if (this.options.tools.title) {\n                        var titleLayers = document.createElement(\"div\");\n                        titleLayers.id = this.name.titleLayersID + this.id;\n                        titleLayers.className = this.name.titleLayers;\n                        titleLayers.innerHTML = (multisources) ? \"Liste des 'couches' (\" + source + \")\" : \"Liste des 'couches'\";\n                        div.appendChild(titleLayers);\n                    }\n                }\n\n                // gestion de l'ordre avant tri avec la metadata 'order'\n                var _layers = this.mapbox.layers.slice(); // clone\n\n                // une fois les layers triés, la metadata:geoportail:order permet\n                // de savoir l'emplacement du layers dans le fichier de style.\n                _layers.forEach(function (layer, order) {\n                    // on écarte les layers sans source: ex. \"background\"\n                    // if (!layer.source) {\n                    //     return;\n                    // }\n                    // ajout de la metadata d'ordre\n                    var _metadata = layer[\"metadata\"];\n                    if (_metadata) {\n                        _metadata[\"geoportail:order\"] = order;\n                    } else {\n                        layer[\"metadata\"] = {\n                            \"geoportail:order\" : order\n                        };\n                    }\n                });\n                // tri des layers\n                if (this.options.tools.sort) {\n                    var sortBy = this.options.tools.sortBy;\n                    var sortOrder = this.options.tools.sortOrder;\n                    var sortFct = function (a, b) {\n                        // si on utilise les groupements utilisateurs, ils doivent\n                        // tous être renseignés sinon..., ça va coincer !\n                        var result = 0;\n                        if (a[\"metadata\"] &&\n                            a[\"metadata\"][\"geoportail:group\"] &&\n                            b[\"metadata\"] &&\n                            b[\"metadata\"][\"geoportail:group\"]) {\n                            var cmpA = null;\n                            var cmpB = null;\n                            cmpA = a[\"metadata\"][\"geoportail:group\"];\n                            cmpB = b[\"metadata\"][\"geoportail:group\"];\n                            result = cmpA.localeCompare(cmpB);\n                        } else {\n                            switch (sortBy) {\n                                case \"geom\":\n                                    result = sortOrder === \"asc\" ? a.type.localeCompare(b.type) || a.id.localeCompare(b.id)\n                                        : b.type.localeCompare(a.type) || b.id.localeCompare(a.id);\n                                    break;\n                                case \"class\":\n                                    result = sortOrder === \"asc\" ? a[\"source-layer\"].localeCompare(b[\"source-layer\"]) || a.id.localeCompare(b.id)\n                                        : b[\"source-layer\"].localeCompare(a[\"source-layer\"]) || b.id.localeCompare(a.id);\n                                    break;\n                                case \"id\":\n                                default:\n                                    // tri sur l'id par defaut\n                                    result = sortOrder === \"asc\" ? a.id.localeCompare(b.id) : b.id.localeCompare(a.id);\n                                    break;\n                            }\n                        }\n                        return result;\n                    };\n\n                    _layers.sort(sortFct);\n                }\n\n                logger.trace(\"Layers : \", _layers);\n\n                // gestion des groupes avec la metadata de groupe\n                var groupBy = this.options.tools.sortBy; // le même type de tri que les couches !\n                var groupAuto = this.options.tools.groupAuto;\n                var _groups = {}; // liste et comptage des layers dans chaque groupes\n                _layers.forEach(function (layer) {\n                    // on écarte les layers sans source: ex. \"background\"\n                    // if (!layer.source) {\n                    //     return;\n                    // }\n                    // balise metadata\n                    var _metadata = layer[\"metadata\"];\n                    // s'il existe déjà une meta de groupe, on l'utilise...\n                    // sinon, on la met en place.\n                    if (_metadata && _metadata[\"geoportail:group\"]) {\n                        var _groupName = _metadata[\"geoportail:group\"];\n                        _groups[_groupName] = (_groups[_groupName])\n                            ? _groups[_groupName] + 1 : 1;\n                    } else {\n                        var _field = null;\n                        switch (groupBy) {\n                            case \"class\":\n                                _field = layer[\"source-layer\"];\n                                break;\n                            case \"geom\":\n                                _field = layer.type;\n                                break;\n                            case \"id\":\n                            default:\n                                _field = layer.id;\n                                break;\n                        }\n                        var _newGroupName = _field;\n                        if (groupAuto) {\n                            // separateur\n                            var _regex = /_|-|:|=/; // TODO à definir via une option !\n\n                            // index\n                            var _idx = _field.search(_regex);\n                            // y'a t il un separateur ?\n                            _newGroupName = (_idx !== -1) ? _field.substring(0, _idx).trim() : _field;\n                        }\n                        // on compte le nombre d'entrée dans un groupe\n                        _groups[_newGroupName] = (_groups[_newGroupName])\n                            ? _groups[_newGroupName] + 1 : 1;\n\n                        // ajout de la metadata de groupe\n                        if (_metadata) {\n                            _metadata[\"geoportail:group\"] = _newGroupName;\n                        } else {\n                            layer[\"metadata\"] = {\n                                \"geoportail:group\" : _newGroupName\n                            };\n                        }\n                    }\n                });\n\n                logger.trace(\"Groups : \", _groups);\n\n                // container principal des couches\n                var divLayers = document.createElement(\"div\");\n                divLayers.className = this.name.containerLayers;\n                div.appendChild(divLayers);\n\n                var details;\n                if (this.options.tools.collapse !== undefined) {\n                    details = document.createElement(\"details\");\n                    details.className = \"\";\n                    details.open = !this.options.tools.collapse;\n                    divLayers.appendChild(details);\n\n                    var summary = document.createElement(\"summary\");\n                    summary.className = \"\";\n                    summary.innerHTML = \"\";\n                    details.appendChild(summary);\n                }\n\n                // container courant (cf. groupe) pour l'ajout des elements\n                var target = (this.options.tools.collapse !== undefined) ? details : divLayers;\n\n                // Ex. Layers, Styles, Groups et Filtres\n                //  \"id\": \"ocs - vegetation\",\n                //  \"type\": \"fill\",\n                //  \"source\": \"pyramide_proto\",\n                //  \"source-layer\": \"ocs_vegetation_surf\",\n                //  \"metadata\" : {\n                //      \"geoportail:group\": \"ocs\"\n                //  },\n                //  \"layout\": {\n                //    \"visibility\": \"visible\"\n                //  },\n                //  \"filter\": [\"in\",\"symbo\",\n                //      \"SURFACE_D_EAU\",\n                //      \"BASSIN\",\n                //      \"ZONE_MARINE\"\n                //  ],\n                //  \"paint\": {\n                //    \"fill-color\": \"#2BB3E1\"\n                //  }\n                var index = -1;\n                for (var ii = 0; ii < _layers.length; ii++) {\n                    var data = _layers[ii];\n                    index++;\n\n                    // traitement dans l'ordre des sources\n                    if (data.source === source) {\n                        // Groups\n                        // INFO la gestion des groupes est basée sur la balise metadata::geoportail:group\n                        // ainsi que sur l'ordre des couches.\n                        // il n'y a pas de regroupement sans tri des couches !\n                        if (this.options.tools.group && this.options.tools.sort) {\n                            var mtd = data.metadata;\n                            // creation du container de groupe\n                            // si le tag metadata existe\n                            if (mtd) {\n                                var grp = data.metadata[\"geoportail:group\"];\n                                if (grp) {\n                                    // le groupe doit contenir plus d'un element\n                                    if (_groups[grp] > 1) {\n                                        // le groupe est déjà créé, on en veut plus par la suite...\n                                        _groups[grp] = -1;\n                                        // creation du groupe\n                                        var oGroup = new Group({\n                                            id : this.id,\n                                            target : (this.options.tools.collapse !== undefined) ? details : divLayers,\n                                            title : grp,\n                                            collapse : true\n                                        });\n                                        oGroup.add();\n                                        // le nouveau container pour les elements suivants\n                                        target = oGroup.getContainer();\n                                    } else if (_groups[grp] === 1) {\n                                        // l'element est seul, donc pas d'ajout dans le\n                                        // groupe en cours\n                                        target = (this.options.tools.collapse !== undefined) ? details : divLayers;\n                                    } else {\n                                        // on ajoute l'element dans le groupe courant...\n                                    }\n                                } else {\n                                    target = (this.options.tools.collapse !== undefined) ? details : divLayers;\n                                }\n                            } else {\n                                target = (this.options.tools.collapse !== undefined) ? details : divLayers;\n                            }\n                        }\n                        // Layers\n                        if (this.options.tools.layers) {\n                            var oLayer = new Layer({\n                                id : this.id,\n                                target : target,\n                                position : index + \"_\" + this.id, // unique !\n                                tools : {\n                                    visibility : this.options.tools.visibility,\n                                    icon : this.options.tools.icon,\n                                    type : this.options.tools.type,\n                                    pin : this.options.tools.pin\n                                },\n                                obj : {\n                                    id : data.id,\n                                    type : data.type,\n                                    source : data.source,\n                                    \"source-layer\" : data[\"source-layer\"]\n                                }\n                            });\n                            oLayer.add();\n                            // update visibility layer\n                            if (data.layout && data.layout.visibility && data.layout.visibility === \"none\") {\n                                oLayer.visibility(false);\n                            }\n                            // sauvegarde des layers\n                            this.layers.push(oLayer);\n                        }\n                        // Legende\n                        if (this.options.tools.legend) {\n                            // gestion de l'edition de la legende :\n                            // l'option \"editable\" est prioritaire sur le tag \"editable\" du fichier de style !\n                            var isEditable = this.options.tools.editable;\n                            if (typeof isEditable === \"undefined\") {\n                                isEditable = data.editable;\n                            }\n                            var oLegend = new Legend({\n                                id : this.id,\n                                target : target,\n                                sprites : this.sprites,\n                                obj : {\n                                    id : data.id,\n                                    source : data.source,\n                                    title : data.id,\n                                    editable : (typeof isEditable !== \"undefined\") ? isEditable : false,\n                                    paint : data.paint,\n                                    layout : data.layout\n                                }\n                            });\n                            oLegend.add();\n                            oLegend.display(false);\n                            if (oLayer) {\n                                oLayer.addLegend(oLegend);\n                                oLayer.slotLegend(); // integration de la legende dans le container du layers !\n                            }\n                        }\n                        // Style\n                        if (this.options.tools.style) {\n                            var oStyle = new Style({\n                                id : this.id,\n                                target : target,\n                                position : index + \"_\" + this.id, // unique !,\n                                obj : {\n                                    id : data.id,\n                                    source : data.source,\n                                    layout : data.layout,\n                                    paint : data.paint\n                                }\n                            });\n                            oStyle.add();\n                            oStyle.display(false);\n                            if (oLayer) {\n                                oLayer.addStyle(oStyle);\n                            }\n                            // update visibility layer\n                            if (data.layout && data.layout.visibility && data.layout.visibility === \"none\") {\n                                oLayer.visibility(false);\n                            }\n                        }\n                        // Filter\n                        if (this.options.tools.filter) {\n                            var oFilter = new Filter({\n                                id : this.id,\n                                target : target,\n                                position : index + \"_\" + this.id, // unique !,\n                                obj : {\n                                    id : data.id,\n                                    source : data.source,\n                                    filter : data.Filter\n                                }\n                            });\n                            oFilter.add();\n                            oFilter.display(false);\n                            if (oLayer) {\n                                oLayer.addFilter(oFilter);\n                            }\n                        }\n                    } else {\n                        // on ecarte un layer car il n'est pas reconnu dans la source\n                        // on decremente la position du layer\n                        if (index >= 0) {\n                            index--;\n                        }\n                    }\n                }\n            }\n        }\n\n        // sauvegarde\n        this.container = div;\n\n        // container principal\n        if (!this.options.target) {\n            if (!document.getElementById(this.name.target)) {\n                var _target = document.createElement(\"div\");\n                _target.id = this.name.target;\n                var node = document.getElementsByTagName(\"body\")[0] ||\n                    document.getElementsByTagName(\"head\")[0] ||\n                    document.documentElement;\n                node.appendChild(_target);\n            }\n            this.options.target = document.getElementById(this.name.target);\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n        // dispatch event\n        EventBus.dispatch(Event.onloaded, this);\n    }\n\n    /**\n     * Getting Sprites informations\n     * (called by _initialize)\n     *\n     * @param {String} sprites - url des sprites\n     * @returns {Promise} - promise\n     * @private\n     */\n    _getSprites (sprites) {\n        var self = this;\n\n        // on ne doit pas mettre de promise en échec...\n        // car on souhaite continuer le traitement même si on n'a pas de sprites !\n        // si le protocole est mapbox://\n        if (sprites && sprites.startsWith(\"mapbox://\")) {\n            return new Promise((resolve, reject) => {\n                logger.error(\"Protocole mapbox:// non géré !\");\n                resolve(self);\n            });\n        }\n        // si pas de sprites\n        if (!sprites) {\n            return new Promise((resolve, reject) => {\n                logger.error(\"Auncun sprites disponibles !\");\n                resolve(self);\n            });\n        }\n\n        var fetchSpritesImage = function () {\n            var spritesImage = sprites + \".png\";\n            return fetch(spritesImage, {\n                credentials : \"same-origin\"\n            })\n                .then(function (response) {\n                    if (response.ok) {\n                        return response.blob()\n                            .then(function (blob) {\n                                self.sprites.url = spritesImage;\n                                // decode de l'image\n                                var theImage = new Image();\n                                theImage.src = spritesImage;\n                                return theImage.decode()\n                                    .then(function () {\n                                        self.sprites.size = {};\n                                        self.sprites.size.h = theImage.height;\n                                        self.sprites.size.w = theImage.width;\n                                    });\n                            })\n                            .catch(error => {\n                                logger.warn(\"fetch image sprites exception :\", error);\n                            });\n                    } else {\n                        var err = new Error(\"HTTP status code: \" + response.status);\n                        throw err;\n                    }\n                })\n                .catch(error => {\n                    return new Promise((resolve, reject) => {\n                        logger.error(\"fetch image sprites exception :\", error);\n                        reject(error);\n                    });\n                });\n        };\n        var fetchSpritesJson = function () {\n            var spritesJson = sprites + \".json\";\n            return fetch(spritesJson, {\n                credentials : \"same-origin\"\n            })\n                .then(function (response) {\n                    if (response.ok) {\n                        return response.json()\n                            .then(function (json) {\n                                self.sprites.json = json;\n                            })\n                            .catch(error => {\n                                logger.warn(\"fetch json sprites exception :\", error);\n                            });\n                    } else {\n                        var err = new Error(\"HTTP status code: \" + response.status);\n                        throw err;\n                    }\n                })\n                .catch(error => {\n                    return new Promise((resolve, reject) => {\n                        logger.error(\"fetch json sprites exception :\", error);\n                        reject(error);\n                    });\n                });\n        };\n\n        // promise\n        return Promise.all([\n            fetchSpritesImage(),\n            fetchSpritesJson()\n        ]);\n    }\n\n    // ################################################################### //\n    // ########################## INTERFACE ############################## //\n    // ################################################################### //\n    /**\n     * Create Editor\n     *\n     * @returns {Promise} - promise\n     */\n    createElement () {\n        var self = this;\n        // objet json\n        if (typeof this.options.style === \"object\") {\n            this.mapbox = this.options.style;\n            // les sprites sont utiles que si on veut une legende !\n            if (this.options.tools.legend) {\n                return this._getSprites(this.mapbox.sprite)\n                    .then(function () {\n                        // init du DOM\n                        self._initContainer();\n                        return self;\n                    })\n                    .catch(error => {\n                        logger.warn(\"fetch sprites exception :\", error);\n                    });\n            } else {\n                return new Promise((resolve, reject) => {\n                    self._initContainer();\n                    resolve(self);\n                });\n            }\n        }\n\n        // url\n        if (typeof this.options.style === \"string\") {\n            return fetch(this.options.style, {\n                credentials : \"same-origin\"\n            })\n                .then(response => {\n                    // sauvegarde du json\n                    return response.json()\n                        .then(style => {\n                            self.mapbox = style;\n                        })\n                        .then(function () {\n                            // les sprites sont utiles que si on veut une legende !\n                            if (self.options.tools.legend) {\n                                return self._getSprites(self.mapbox.sprite)\n                                    .then(function () {\n                                        // init du DOM\n                                        self._initContainer();\n                                        return self;\n                                    })\n                                    .catch(error => {\n                                        logger.warn(\"fetch sprites exception :\", error);\n                                    });\n                            } else {\n                                return new Promise((resolve, reject) => {\n                                    self._initContainer();\n                                    resolve(self);\n                                });\n                            }\n                        })\n                        .catch(error => {\n                            logger.error(\"json exception :\", error);\n                        });\n                })\n                .catch(error => {\n                    logger.error(\"fetch exception :\", error);\n                });\n        }\n    }\n\n    /**\n     * Set display container (DOM)\n     *\n     * @param {Boolean} display - show/hidden container\n     */\n    display (display) {\n        this.container.style.display = (display) ? \"block\" : \"none\";\n    }\n\n    setContext (key, value) {\n        this.context[key] = value;\n    }\n\n    getContext (key) {\n        return this.context[key];\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n    /**\n     * Get id editor\n     * @returns {Number} id\n     */\n    getID () {\n        return this.id;\n    }\n\n    /**\n     * Get container (DOM)\n     * @returns {DOMElement} DOM element\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    /**\n     * Get Style (json)\n     * @returns {Object} Style MapBox\n     */\n    getStyle () {\n        return this.mapbox;\n    }\n\n    /**\n     * Get layer style (json)\n     * @param {Number} i - index\n     * @returns {Object} Style MapBox of a layers\n     */\n    getStyleLayer (i) {\n        var layer = null;\n        var o = this.getLayer(i);\n        var id = o.options.obj.id;\n        for (var k = 0; k < this.mapbox.layers.length; k++) {\n            var l = this.mapbox.layers[k];\n            if (l.id === id) {\n                layer = l;\n                break;\n            }\n        }\n        return layer;\n    }\n\n    /**\n     * Get layer object from json style\n     * @param {Number} i - index into style json\n     * @returns {Object} Style MapBox of a layers\n     */\n    getLayerFromStyle (i) {\n        var layer = null;\n        var l = this.mapbox.layers[i];\n        for (var k = 0; k < this.getLayers().length; k++) {\n            var o = this.getLayer(k);\n            if (l.id === o.options.obj.id) {\n                layer = o;\n                break;\n            }\n        }\n        return layer;\n    }\n\n    /**\n     * Get a list of layer object sorted or not (see options.tools.sort)\n     * @returns {Array} - List of layer object\n     * @see {ol.style.editor.Layer}\n     */\n    getLayers () {\n        return this.layers;\n    }\n\n    /**\n     * Get the layer object from a list sorted or not (see options.tools.sort)\n     * @param {Number} i - index\n     * @returns {Object} - layer object\n     * @see {ol.style.editor.Layer}\n     */\n    getLayer (i) {\n        return this.layers[i];\n    }\n\n};\n\n// on récupère les méthodes de la classe DOM\nUtils.assign(Editor.prototype, EditorDOM);\n\n// ################################################################### //\n// ####################### handlers events to dom #################### //\n// ################################################################### //\n\nexport default Editor;\n\n// Expose Editor as ol.editor.View (for a build bundle)\nif (window.ol && window.ol.style) {\n    window.ol.style.Editor = Editor;\n}\n"],"names":["EditorDOM","_addUID","id","uid","_uid","EventEditor","onloaded","layer","onclickvisibility","onclickclone","onclickremove","legend","onclickedition","onchangevalue","group","oncollapse","style","oneditjson","scale","onchangemin","onchangemax","filter","themes","onclickimage","onclicktitle","search","onsubmit","onautocomplete","EventBus","Utils","Logger","logger","getLogger","Filter","options","_classCallCheck","trace","target","position","tools","title","obj","TypeError","_initialize","_initContainer","_createClass","key","value","_toolsDefault","edition","mergeParams","container","name","containerjson","jsonlabel","jsondisplay","containertoolsedit","self","_found","_filter","JSON","parse","stringify","length","info","div","document","createElement","className","json","divJson","labelJson","innerHTML","appendChild","preJson","addEventListener","e","onEditJsonFilterMapBox","attachEvent","divEdit","add","getElementById","node","documentElement","getElementsByTagName","display","getContainer","editorID","data","dispatch","Group","collapse","details","summary","open","nodes","childNodes","onCollapseGroupMapBox","Style","Legend","Layer","visibility","icon","image","anchor","type","pin","remove","clone","_objDefault","source","bSlotLegend","oFilter","oStyle","oLegend","DomVisibility","DomToggle","containerlegend","containertitle","imagelabelinput","imagelabel","typeimg","titleinput","titlelabel","containertools","visibilityinput","visibilitylabel","visibilityinputdisable","visibilitylabeldisable","divTitle","inputImage","labelImage","htmlFor","onClickLayerMapBox","_addTools","divTools","inputTools","checked","onVisibilityLayerMapBox","labelTools","warn","apply","imgType","toUpperCase","divLegend","inputTitle","labelTitle","addStyle","_typeof","addFilter","addLegend","slotLegend","nodesLvl1","idx","nodesLvl2","i","curnode","indexOf","render","getRenderContainer","click","visible","active","substring","isEditable","onCloneLayerMapBox","onRemoveLayerMapBox","Color","sprites","editable","paint","_editable","legendRender","values","width","stroke","color","opacity","rendercontainer","toolscontainer","containerlegendrender","legendrender","legendeditable","legendtitle","containerlegendtools","labels","_obj","Object","assign","layout","keys","params","bFound","test","split","_getProperties","edit","_createElementIconLegend","_createElementEditionLegend","isTextValue","isIconValue","valuesSupported","hasOwnProperty","call","val","PROPERTIES","includes","prop","replace","slice","_getValue","k","_renderThumbnail","svg","factor","styleText","hexToRgba","x","y","height","size","w","h","url","styleTextIcon","lstrockedasharray","Array","isArray","join","cstrockcolor","pattern","fstrokecolor","result","isNumber","forEach","v","stops","sort","a","b","numA","numB","lastStopsValue","onEditionLegendMapBox","span","createLineColor","createLineWidth","createLineOpacity","createFillColor","createFillOpacity","linecolor","lLineColor","inputLineColor","setAttribute","onChangeValueLegendMapBox","linewidth","lLineWidth","inputLineWidth","min","max","step","defaultValue","lineopacity","lLineOpacity","inputLineOpacity","fillcolor","lFillColor","inputFillColor","fillopacity","lFillOpacity","inputFillOpacity","getToolsContainer","line","fill","background","circle","text","Search","_search","layers","onSubmitSearchLayersMapBox","onAutocompleteSearchLayersMapBox","containertoolsscale","scaletitle","containertoolsminscale","scalelabelmin","scaleinputmin","containertoolsmaxscale","scalelabelmax","scaleinputmax","_style","strJson","_syntaxHighlight","label","pre","onEditJsonStyleMapBox","_createElementToolsScale","minzoom","maxzoom","_createElementToolsEdition","divToolsScale","divMin","labelMin","inputMin","disabled","onChangeStyleScaleMinMapBox","divMax","labelMax","inputMax","onChangeStyleScaleMaxMapBox","divToolsEdit","match","cls","ID","Themes","thumbnails","button","themesSummary","containertheme","containerthemeID","input","inputID","labelID","imageID","message","generate","_lstThemes","_theme","divTheme","tabIndex","_url","_selected","selected","_type","_button","onClickThemeTitleMapBox","thumbnail","_img","src","alt","description","onClickThemeImageMapBox","parentElement","tagName","toLowerCase","_label","_msg","targetIDX","previousSibling","lastIndexOf","_inputs","getElementsByClassName","el","elIDX","ColorUtils","hex","number","Error","str","Number","toString","num","hexa","parseInt","arrayToRgba","red","green","blue","alpha","parseFloat","arrayToHex","elems","rgbaToHex","rgba","regex","parsed","exec","shorthandRegex","m","r","g","rgb","isHex","charAt","isRGB","Helper","detectSupport","isDesktop","userAgent","window","navigator","dest","param","Log","LoggerByDefault","process","env","VERBOSE","enableAll","disableAll","logname","loggers","getLoggers","SelectorID","timestamp","Math","floor","Date","now","index","uuid","Event","Editor","error","events","_initEvents","groupAuto","sortBy","sortOrder","undefined","context","containerID","containerLayers","titleLayers","titleLayersID","titleThemes","titleThemesID","sep","mapbox","ctx","scope","event","handler","hasEventListener","_toolsThemes","sources","multisources","hr","_layers","order","_metadata","sortFct","cmpA","cmpB","localeCompare","groupBy","_groups","_groupName","_field","_newGroupName","_regex","_idx","trim","divLayers","ii","mtd","metadata","grp","oGroup","oLayer","push","_target","_getSprites","startsWith","Promise","resolve","reject","fetchSpritesImage","spritesImage","fetch","credentials","then","response","ok","blob","theImage","Image","decode","err","status","fetchSpritesJson","spritesJson","all","sprite","setContext","getContext","getID","getStyle","getStyleLayer","o","getLayer","l","getLayerFromStyle","getLayers","prototype","ol"],"sourceRoot":""}