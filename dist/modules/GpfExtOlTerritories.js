/*!
 * @brief geopf-extensions-openlayers
 *
 * This software is released under the licence AGPL-3.0
 * @see https://www.gnu.org/licenses/agpl-3.0.html#license-text
 * @see https://www.gnu.org/licenses/agpl-3.0.en.html#license-text
 *
 * @copyright copyright (c) IGN 
 * @license AGPL-3.0
 * @author IGN
 * @version 1.0.0-beta.6-468
 * @date 05/12/2025
 *
 */(()=>{var e={3065:function(e,t,n){var i,r;!function(){"use strict";i=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],r={},o=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(i){return"debug"===i&&(i="log"),typeof console!==t&&("trace"===i&&n?s:void 0!==console[i]?a(console,i):void 0!==console.log?a(console,"log"):e)}function c(){for(var n=this.getLevel(),r=0;r<i.length;r++){var o=i[r];this[o]=r<n?e:this.methodFactory(o,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function d(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(e,t,n){return l(e)||d.apply(this,arguments)}function f(e,n){var a,s,l,d=this,f="loglevel";function p(e){var n=(i[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+n+";"}catch(e){}}}function h(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,i=encodeURIComponent(f),r=n.indexOf(i+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+i.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function g(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function v(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=l?l:null!=s?s:a},d.setLevel=function(e,t){return l=v(e),!1!==t&&p(l),c.call(d)},d.setDefaultLevel=function(e){s=v(e),h()||d.setLevel(e,!1)},d.resetLevel=function(){l=null,g(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(o!==d&&(a=v(o.getLevel())),c.call(d),o===d)for(var e in r)r[e].rebuild()},a=v(o?o.getLevel():"WARN");var m=h();null!=m&&(l=v(m)),c.call(d)}(o=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new f(e,o.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return r},o.default=o,o},void 0===(r="function"==typeof i?i.call(t,n,t,e):i)||(e.exports=r)}()}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var i={};(()=>{"use strict";n.d(i,{default:()=>nn});const e=ol.control.Control;const t=function(){return""!==getComputedStyle(document.documentElement).getPropertyValue("--blue-france-sun-113-625")};function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,d(i.key),i)}}function c(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=p(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,n||[],p(e).constructor):t.apply(e,n))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}const g=function(e){function t(e){var n;return s(this,t),n=u(this,t,[{element:(e=e||{}).element,target:e.target,render:e.render}]),e&&e.listable?n.listable=!0:n.listable=!1,e&&e.description?n.description=e.description:n.description="",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),c(t,[{key:"setPosition",value:function(e){this.getMap()&&new b(this).set(e)}},{key:"updatePosition",value:function(e){this.getMap()&&new b(this).update(e)}}])}(n.n(e)());var v=["top-left","top-right","bottom-left","bottom-right"],m=new WeakSet,b=function(){return c(function e(t){return s(this,e),o(this,m),this.caller=t,this.container=null,a(m,this,w).call(this,"top-left"),a(m,this,w).call(this,"top-right"),a(m,this,w).call(this,"bottom-left"),a(m,this,w).call(this,"bottom-right"),this},[{key:"set",value:function(e){v.includes(e.toLowerCase())&&(a(m,this,E).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}},{key:"update",value:function(e){v.includes(e.toLowerCase())&&a(m,this,E).call(this,e,!0)}}])}();function y(e){return!!this.container.children["position-container-"+e]}function w(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!a(m,this,y).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}}function E(e,n){var i=this,r=function(e){return i.container.children["position-container-"+e].children.length},o=function(e){return i.container.children["position-container-"+e].offsetWidth},a=function(e){var t=i.container.children["position-container-"+e],r=t.offsetHeight;if(n){e.includes("top")&&(r=0);for(var o=0;o<t.children.length;o++){if(t.children[o].id===i.caller.element.id){r=e.includes("bottom")?r-i.caller.element.offsetHeight:-1*r;break}r-=t.children[o].offsetHeight}}return r},s=function(e){e.style.top="unset",e.style.bottom="unset",e.style.left="unset",e.style.right="unset"};s(this.caller.element),this.caller.element.style.position="unset";var l=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(0!==l.length){var c=0;l.forEach(function(n){if("dialog"===n.nodeName.toLowerCase()){switch(s(n),e.toLowerCase()){case"top-left":t()?n.style.top="0px":n.style.top=r(e)?a(e)+"px":"0px",n.style.left=o(e)+c+"px";break;case"bottom-left":t()?n.style.top="0px":n.style.bottom=r(e)?a(e)+"px":"0px",n.style.left=o(e)+c+"px";break;case"top-right":t()?n.style.top="0px":n.style.top=r(e)?a(e)+"px":"0px",n.style.right=o(e)+c+"px";break;case"bottom-right":t()?n.style.top="0px":n.style.bottom=r(e)?a(e)+"px":"0px",n.style.right=o(e)+c+"px"}c+=n.offsetWidth}})}}function T(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var _=["GPoverviewMap","GPfullScreen"];const S=function(e,t){var n=function(e,t){var n=[].concat(_,[t]),i=[];if(e&&e.includes("left")){var r=document.getElementById("position-container-bottom-left"),o=document.getElementById("position-container-top-left");i=[].concat(T(r.children),T(o.children))}if(e&&e.includes("right")){var a=document.getElementById("position-container-bottom-right"),s=document.getElementById("position-container-top-right");i=[].concat(T(a.children),T(s.children))}return i.filter(function(e){var t=e.id.match(/(\w+)-[0-9]+/)[1],i=n.includes(t);if("true"===e.getElementsByTagName("button")[0].getAttribute("aria-pressed")&&!i)return e})}(e,t);n.length>0&&n[0].getElementsByTagName("button")[0].click()};const x={onPanelOpen:function(){S(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},A=(ol.Map,ol.proj);function P(e){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},P(e)}var O={detectSupport:function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},assign:function(e,t){for(var n in e=e||{},t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},mergeParams:function(e,t,n){if(void 0!==e&&void 0!==t)for(var i in void 0===n&&(n=!0),t)t.hasOwnProperty(i)&&("object"===P(t[i])?e.hasOwnProperty(i)?this.mergeParams(e[i],t[i],n):e[i]=t[i]:e.hasOwnProperty(i)?n&&(e[i]=t[i]):e[i]=t[i])}};const D=O;var L,k={generate:(L=Math.floor(Date.now()),function(){return L++}),name:function(e){var t=null,n=e.lastIndexOf("-");return t=-1===n?e:e.substring(0,n),t},index:function(e){var t=null,n=this.name(e),i=n.lastIndexOf("_");return-1!==i&&(t=n.substring(i+1)),t},uuid:function(e){var t=null,n=e.lastIndexOf("-");return-1!==n&&(t=parseInt(e.substring(n+1),10)),t}};const I=k;var M=n(3065),N={getLogger:function(e){if(void 0===t)var t={env:{VERBOSE:!1}};t.env.VERBOSE?M.enableAll():M.disableAll();var n=e||"default";return M.getLogger(n)},disableAll:function(){var e=M.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=M.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}};const R=N;window.Gp&&(window.Gp.Logger=N);R.getLogger("draggable");const B={dragElement:function(e,t,n){var i,r=0,o=0,a=0,s=0,l=0,c=0;t?t.addEventListener("mousedown",u,!0):e.addEventListener("mousedown",u,!0);var d={bottom:0,left:0,right:0,top:0};function u(t){(t=t||window.event).preventDefault(),r=t.clientX,o=t.clientY,i=e.getBoundingClientRect();var a=n.getBoundingClientRect();d={bottom:a.bottom,left:a.left,right:a.right,top:a.top},document.addEventListener("mouseup",f,!0),document.addEventListener("mousemove",p,!0)}function f(){l-=a,c-=s,document.removeEventListener("mouseup",f,!0),document.removeEventListener("mousemove",p,!0)}function p(t){var n=(t=t||window.event).clientX,u=t.clientY,f=a,p=s;a=r-n,s=o-u;var h=i.left-a,g=i.top-s;if(h<d.left||g<d.top||h+i.width>d.right||g+i.height>d.bottom)a=f,s=p;else{var v=l-a,m=c-s;e.style.transform="translate("+v+"px,"+m+"px)"}}}},j=JSON.parse('[{"id":"FXX","title":"France métropolitaine","description":"","zoom":null,"bbox":[-9.86,41.15,10.38,51.56],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{"id":"GLP","title":"Guadeloupe","description":"","zoom":null,"bbox":[-61.97,15.72,-60.93,16.66],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{"id":"GUF","title":"Guyane","description":"","zoom":null,"bbox":[-55.65,1.49,-51.2,6.21],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{"id":"MTQ","title":"Martinique","description":"","zoom":null,"bbox":[-61.4,14.25,-60.67,15.04],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{"id":"REU","title":"Réunion","description":"","zoom":null,"bbox":[55.07,-21.46,55.86,-20.79],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{"id":"SPM","title":"Saint-Pierre-et-Miquelon","description":"","zoom":null,"bbox":[-56.48,46.69,-56.07,47.19],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{"id":"IDF","title":"Paris petite couronne","description":"","zoom":null,"bbox":[2.18,48.77,2.52,48.95],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{"id":"MYT","title":"Mayotte","description":"","zoom":null,"bbox":[44.95,-13.049,45.32,-12.57],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{"id":"NCL","title":"Nouvelle Calédonie","description":"","zoom":null,"bbox":[163.02,-23.08,167.86,-19.5],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}]');
/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach(function(t){X(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(){return U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},U.apply(this,arguments)}function H(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function G(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var z=G(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),W=G(/Edge/i),q=G(/firefox/i),Q=G(/safari/i)&&!G(/chrome/i)&&!G(/android/i),K=G(/iP(ad|od|hone)/i),Z=G(/chrome/i)&&G(/android/i),J={capture:!1,passive:!1};function $(e,t,n){e.addEventListener(t,n,!z&&J)}function ee(e,t,n){e.removeEventListener(t,n,!z&&J)}function te(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function ne(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function ie(e,t,n,i){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&te(e,t):te(e,t))||i&&e===n)return e;if(e===n)break}while(e=ne(e))}return null}var re,oe=/\s+/g;function ae(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(oe," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(oe," ")}}function se(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||-1!==t.indexOf("webkit")||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function le(e,t){var n="";if("string"==typeof e)n=e;else do{var i=se(e,"transform");i&&"none"!==i&&(n=i+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function ce(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function de(){var e=document.scrollingElement;return e||document.documentElement}function ue(e,t,n,i,r){if(e.getBoundingClientRect||e===window){var o,a,s,l,c,d,u;if(e!==window&&e.parentNode&&e!==de()?(a=(o=e.getBoundingClientRect()).top,s=o.left,l=o.bottom,c=o.right,d=o.height,u=o.width):(a=0,s=0,l=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!z))do{if(r&&r.getBoundingClientRect&&("none"!==se(r,"transform")||n&&"static"!==se(r,"position"))){var f=r.getBoundingClientRect();a-=f.top+parseInt(se(r,"border-top-width")),s-=f.left+parseInt(se(r,"border-left-width")),l=a+o.height,c=s+o.width;break}}while(r=r.parentNode);if(i&&e!==window){var p=le(r||e),h=p&&p.a,g=p&&p.d;p&&(l=(a/=g)+(d/=g),c=(s/=h)+(u/=h))}return{top:a,left:s,bottom:l,right:c,width:u,height:d}}}function fe(e,t,n){for(var i=me(e,!0),r=ue(e)[t];i;){var o=ue(i)[n];if(!("top"===n||"left"===n?r>=o:r<=o))return i;if(i===de())break;i=me(i,!1)}return!1}function pe(e,t,n,i){for(var r=0,o=0,a=e.children;o<a.length;){if("none"!==a[o].style.display&&a[o]!==Tt.ghost&&(i||a[o]!==Tt.dragged)&&ie(a[o],n.draggable,e,!1)){if(r===t)return a[o];r++}o++}return null}function he(e,t){for(var n=e.lastElementChild;n&&(n===Tt.ghost||"none"===se(n,"display")||t&&!te(n,t));)n=n.previousElementSibling;return n||null}function ge(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Tt.clone||t&&!te(e,t)||n++;return n}function ve(e){var t=0,n=0,i=de();if(e)do{var r=le(e),o=r.a,a=r.d;t+=e.scrollLeft*o,n+=e.scrollTop*a}while(e!==i&&(e=e.parentNode));return[t,n]}function me(e,t){if(!e||!e.getBoundingClientRect)return de();var n=e,i=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=se(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return de();if(i||t)return n;i=!0}}}while(n=n.parentNode);return de()}function be(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function ye(e,t){return function(){if(!re){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),re=setTimeout(function(){re=void 0},t)}}}function we(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function Ee(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function Te(e,t,n){var i={};return Array.from(e.children).forEach(function(r){var o,a,s,l;if(ie(r,t.draggable,e,!1)&&!r.animated&&r!==n){var c=ue(r);i.left=Math.min(null!==(o=i.left)&&void 0!==o?o:1/0,c.left),i.top=Math.min(null!==(a=i.top)&&void 0!==a?a:1/0,c.top),i.right=Math.max(null!==(s=i.right)&&void 0!==s?s:-1/0,c.right),i.bottom=Math.max(null!==(l=i.bottom)&&void 0!==l?l:-1/0,c.bottom)}}),i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}var Ce="Sortable"+(new Date).getTime();function _e(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach(function(e){if("none"!==se(e,"display")&&e!==Tt.ghost){t.push({target:e,rect:ue(e)});var n=F({},t[t.length-1].rect);if(e.thisAnimationDuration){var i=le(e,!0);i&&(n.top-=i.f,n.left-=i.e)}e.fromRect=n}})},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var i in t)if(t.hasOwnProperty(i)&&t[i]===e[n][i])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var i=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var r=!1,o=0;t.forEach(function(e){var t=0,n=e.target,a=n.fromRect,s=ue(n),l=n.prevFromRect,c=n.prevToRect,d=e.rect,u=le(n,!0);u&&(s.top-=u.f,s.left-=u.e),n.toRect=s,n.thisAnimationDuration&&be(l,s)&&!be(a,s)&&(d.top-s.top)/(d.left-s.left)===(a.top-s.top)/(a.left-s.left)&&(t=function(e,t,n,i){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*i.animation}(d,l,c,i.options)),be(s,a)||(n.prevFromRect=a,n.prevToRect=s,t||(t=i.options.animation),i.animate(n,d,s,t)),t&&(r=!0,o=Math.max(o,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(e),r?e=setTimeout(function(){"function"==typeof n&&n()},o):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,i){if(i){se(e,"transition",""),se(e,"transform","");var r=le(this.el),o=r&&r.a,a=r&&r.d,s=(t.left-n.left)/(o||1),l=(t.top-n.top)/(a||1);e.animatingX=!!s,e.animatingY=!!l,se(e,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),se(e,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),se(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout(function(){se(e,"transition",""),se(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1},i)}}}}var Se=[],xe={initializeByDefault:!0},Ae={mount:function(e){for(var t in xe)xe.hasOwnProperty(t)&&!(t in e)&&(e[t]=xe[t]);Se.forEach(function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Se.push(e)},pluginEvent:function(e,t,n){var i=this;this.eventCanceled=!1,n.cancel=function(){i.eventCanceled=!0};var r=e+"Global";Se.forEach(function(i){t[i.pluginName]&&(t[i.pluginName][r]&&t[i.pluginName][r](F({sortable:t},n)),t.options[i.pluginName]&&t[i.pluginName][e]&&t[i.pluginName][e](F({sortable:t},n)))})},initializePlugins:function(e,t,n,i){for(var r in Se.forEach(function(i){var r=i.pluginName;if(e.options[r]||i.initializeByDefault){var o=new i(e,t,e.options);o.sortable=e,o.options=e.options,e[r]=o,U(n,o.defaults)}}),e.options)if(e.options.hasOwnProperty(r)){var o=this.modifyOption(e,r,e.options[r]);void 0!==o&&(e.options[r]=o)}},getEventProperties:function(e,t){var n={};return Se.forEach(function(i){"function"==typeof i.eventProperties&&U(n,i.eventProperties.call(t[i.pluginName],e))}),n},modifyOption:function(e,t,n){var i;return Se.forEach(function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(i=r.optionListeners[t].call(e[r.pluginName],n))}),i}};function Pe(e){var t=e.sortable,n=e.rootEl,i=e.name,r=e.targetEl,o=e.cloneEl,a=e.toEl,s=e.fromEl,l=e.oldIndex,c=e.newIndex,d=e.oldDraggableIndex,u=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,h=e.extraEventProperties;if(t=t||n&&n[Ce]){var g,v=t.options,m="on"+i.charAt(0).toUpperCase()+i.substr(1);!window.CustomEvent||z||W?(g=document.createEvent("Event")).initEvent(i,!0,!0):g=new CustomEvent(i,{bubbles:!0,cancelable:!0}),g.to=a||n,g.from=s||n,g.item=r||n,g.clone=o,g.oldIndex=l,g.newIndex=c,g.oldDraggableIndex=d,g.newDraggableIndex=u,g.originalEvent=f,g.pullMode=p?p.lastPutMode:void 0;var b=F(F({},h),Ae.getEventProperties(i,t));for(var y in b)g[y]=b[y];n&&n.dispatchEvent(g),v[m]&&v[m].call(t,g)}}var Oe=["evt"],De=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.evt,r=H(n,Oe);Ae.pluginEvent.bind(Tt)(e,t,F({dragEl:ke,parentEl:Ie,ghostEl:Me,rootEl:Ne,nextEl:Re,lastDownEl:Be,cloneEl:je,cloneHidden:Ve,dragStarted:Je,putSortable:Ge,activeSortable:Tt.active,originalEvent:i,oldIndex:Fe,oldDraggableIndex:Xe,newIndex:Ye,newDraggableIndex:Ue,hideGhostForTarget:bt,unhideGhostForTarget:yt,cloneNowHidden:function(){Ve=!0},cloneNowShown:function(){Ve=!1},dispatchSortableEvent:function(e){Le({sortable:t,name:e,originalEvent:i})}},r))};function Le(e){Pe(F({putSortable:Ge,cloneEl:je,targetEl:ke,rootEl:Ne,oldIndex:Fe,oldDraggableIndex:Xe,newIndex:Ye,newDraggableIndex:Ue},e))}var ke,Ie,Me,Ne,Re,Be,je,Ve,Fe,Ye,Xe,Ue,He,Ge,ze,We,qe,Qe,Ke,Ze,Je,$e,et,tt,nt,it=!1,rt=!1,ot=[],at=!1,st=!1,lt=[],ct=!1,dt=[],ut="undefined"!=typeof document,ft=K,pt=W||z?"cssFloat":"float",ht=ut&&!Z&&!K&&"draggable"in document.createElement("div"),gt=function(){if(ut){if(z)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),vt=function(e,t){var n=se(e),i=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=pe(e,0,t),o=pe(e,1,t),a=r&&se(r),s=o&&se(o),l=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+ue(r).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+ue(o).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!o||"both"!==s.clear&&s.clear!==d?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||l>=i&&"none"===n[pt]||o&&"none"===n[pt]&&l+c>i)?"vertical":"horizontal"},mt=function(e){function t(e,n){return function(i,r,o,a){var s=i.options.group.name&&r.options.group.name&&i.options.group.name===r.options.group.name;if(null==e&&(n||s))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(i,r,o,a),n)(i,r,o,a);var l=(n?i:r).options.group.name;return!0===e||"string"==typeof e&&e===l||e.join&&e.indexOf(l)>-1}}var n={},i=e.group;i&&"object"==Y(i)||(i={name:i}),n.name=i.name,n.checkPull=t(i.pull,!0),n.checkPut=t(i.put),n.revertClone=i.revertClone,e.group=n},bt=function(){!gt&&Me&&se(Me,"display","none")},yt=function(){!gt&&Me&&se(Me,"display","")};ut&&!Z&&document.addEventListener("click",function(e){if(rt)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),rt=!1,!1},!0);var wt=function(e){if(ke){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,o=e.clientY,ot.some(function(e){var t=e[Ce].options.emptyInsertThreshold;if(t&&!he(e)){var n=ue(e),i=r>=n.left-t&&r<=n.right+t,s=o>=n.top-t&&o<=n.bottom+t;return i&&s?a=e:void 0}}),a);if(t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Ce]._onDragOver(n)}}var r,o,a},Et=function(e){ke&&ke.parentNode[Ce]._isOutsideThisEl(e.target)};function Tt(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=U({},t),e[Ce]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return vt(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Tt.supportPointer&&"PointerEvent"in window&&!Q,emptyInsertThreshold:5};for(var i in Ae.initializePlugins(this,e,n),n)!(i in t)&&(t[i]=n[i]);for(var r in mt(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&ht,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?$(e,"pointerdown",this._onTapStart):($(e,"mousedown",this._onTapStart),$(e,"touchstart",this._onTapStart)),this.nativeDraggable&&($(e,"dragover",this),$(e,"dragenter",this)),ot.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),U(this,_e())}function Ct(e,t,n,i,r,o,a,s){var l,c,d=e[Ce],u=d.options.onMove;return!window.CustomEvent||z||W?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=t,l.from=e,l.dragged=n,l.draggedRect=i,l.related=r||t,l.relatedRect=o||ue(t),l.willInsertAfter=s,l.originalEvent=a,e.dispatchEvent(l),u&&(c=u.call(d,l,a)),c}function _t(e){e.draggable=!1}function St(){ct=!1}function xt(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function At(e){return setTimeout(e,0)}function Pt(e){return clearTimeout(e)}Tt.prototype={constructor:Tt,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||($e=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,ke):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,i=this.options,r=i.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,s=(a||e).target,l=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,c=i.filter;if(function(e){dt.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var i=t[n];i.checked&&dt.push(i)}}(n),!ke&&!(/mousedown|pointerdown/.test(o)&&0!==e.button||i.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!Q||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=ie(s,i.draggable,n,!1))&&s.animated||Be===s)){if(Fe=ge(s),Xe=ge(s,i.draggable),"function"==typeof c){if(c.call(this,e,s,this))return Le({sortable:t,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),De("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some(function(i){if(i=ie(l,i.trim(),n,!1))return Le({sortable:t,rootEl:i,name:"filter",targetEl:s,fromEl:n,toEl:n}),De("filter",t,{evt:e}),!0})))return void(r&&e.cancelable&&e.preventDefault());i.handle&&!ie(l,i.handle,n,!1)||this._prepareDragStart(e,a,s)}}},_prepareDragStart:function(e,t,n){var i,r=this,o=r.el,a=r.options,s=o.ownerDocument;if(n&&!ke&&n.parentNode===o){var l=ue(n);if(Ne=o,Ie=(ke=n).parentNode,Re=ke.nextSibling,Be=n,He=a.group,Tt.dragged=ke,ze={target:ke,clientX:(t||e).clientX,clientY:(t||e).clientY},Ke=ze.clientX-l.left,Ze=ze.clientY-l.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,ke.style["will-change"]="all",i=function(){De("delayEnded",r,{evt:e}),Tt.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!q&&r.nativeDraggable&&(ke.draggable=!0),r._triggerDragStart(e,t),Le({sortable:r,name:"choose",originalEvent:e}),ae(ke,a.chosenClass,!0))},a.ignore.split(",").forEach(function(e){ce(ke,e.trim(),_t)}),$(s,"dragover",wt),$(s,"mousemove",wt),$(s,"touchmove",wt),$(s,"mouseup",r._onDrop),$(s,"touchend",r._onDrop),$(s,"touchcancel",r._onDrop),q&&this.nativeDraggable&&(this.options.touchStartThreshold=4,ke.draggable=!0),De("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(W||z))i();else{if(Tt.eventCanceled)return void this._onDrop();$(s,"mouseup",r._disableDelayedDrag),$(s,"touchend",r._disableDelayedDrag),$(s,"touchcancel",r._disableDelayedDrag),$(s,"mousemove",r._delayedDragTouchMoveHandler),$(s,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&$(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(i,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){ke&&_t(ke),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._disableDelayedDrag),ee(e,"touchend",this._disableDelayedDrag),ee(e,"touchcancel",this._disableDelayedDrag),ee(e,"mousemove",this._delayedDragTouchMoveHandler),ee(e,"touchmove",this._delayedDragTouchMoveHandler),ee(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?$(document,"pointermove",this._onTouchMove):$(document,t?"touchmove":"mousemove",this._onTouchMove):($(ke,"dragend",this),$(Ne,"dragstart",this._onDragStart));try{document.selection?At(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(it=!1,Ne&&ke){De("dragStarted",this,{evt:t}),this.nativeDraggable&&$(document,"dragover",Et);var n=this.options;!e&&ae(ke,n.dragClass,!1),ae(ke,n.ghostClass,!0),Tt.active=this,e&&this._appendGhost(),Le({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(We){this._lastX=We.clientX,this._lastY=We.clientY,bt();for(var e=document.elementFromPoint(We.clientX,We.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(We.clientX,We.clientY))!==t;)t=e;if(ke.parentNode[Ce]._isOutsideThisEl(e),t)do{if(t[Ce]){if(t[Ce]._onDragOver({clientX:We.clientX,clientY:We.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=ne(t));yt()}},_onTouchMove:function(e){if(ze){var t=this.options,n=t.fallbackTolerance,i=t.fallbackOffset,r=e.touches?e.touches[0]:e,o=Me&&le(Me,!0),a=Me&&o&&o.a,s=Me&&o&&o.d,l=ft&&nt&&ve(nt),c=(r.clientX-ze.clientX+i.x)/(a||1)+(l?l[0]-lt[0]:0)/(a||1),d=(r.clientY-ze.clientY+i.y)/(s||1)+(l?l[1]-lt[1]:0)/(s||1);if(!Tt.active&&!it){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Me){o?(o.e+=c-(qe||0),o.f+=d-(Qe||0)):o={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");se(Me,"webkitTransform",u),se(Me,"mozTransform",u),se(Me,"msTransform",u),se(Me,"transform",u),qe=c,Qe=d,We=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Me){var e=this.options.fallbackOnBody?document.body:Ne,t=ue(ke,!0,ft,!0,e),n=this.options;if(ft){for(nt=e;"static"===se(nt,"position")&&"none"===se(nt,"transform")&&nt!==document;)nt=nt.parentNode;nt!==document.body&&nt!==document.documentElement?(nt===document&&(nt=de()),t.top+=nt.scrollTop,t.left+=nt.scrollLeft):nt=de(),lt=ve(nt)}ae(Me=ke.cloneNode(!0),n.ghostClass,!1),ae(Me,n.fallbackClass,!0),ae(Me,n.dragClass,!0),se(Me,"transition",""),se(Me,"transform",""),se(Me,"box-sizing","border-box"),se(Me,"margin",0),se(Me,"top",t.top),se(Me,"left",t.left),se(Me,"width",t.width),se(Me,"height",t.height),se(Me,"opacity","0.8"),se(Me,"position",ft?"absolute":"fixed"),se(Me,"zIndex","100000"),se(Me,"pointerEvents","none"),Tt.ghost=Me,e.appendChild(Me),se(Me,"transform-origin",Ke/parseInt(Me.style.width)*100+"% "+Ze/parseInt(Me.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,i=e.dataTransfer,r=n.options;De("dragStart",this,{evt:e}),Tt.eventCanceled?this._onDrop():(De("setupClone",this),Tt.eventCanceled||((je=Ee(ke)).removeAttribute("id"),je.draggable=!1,je.style["will-change"]="",this._hideClone(),ae(je,this.options.chosenClass,!1),Tt.clone=je),n.cloneId=At(function(){De("clone",n),Tt.eventCanceled||(n.options.removeCloneOnHide||Ne.insertBefore(je,ke),n._hideClone(),Le({sortable:n,name:"clone"}))}),!t&&ae(ke,r.dragClass,!0),t?(rt=!0,n._loopId=setInterval(n._emulateDragOver,50)):(ee(document,"mouseup",n._onDrop),ee(document,"touchend",n._onDrop),ee(document,"touchcancel",n._onDrop),i&&(i.effectAllowed="move",r.setData&&r.setData.call(n,i,ke)),$(document,"drop",n),se(ke,"transform","translateZ(0)")),it=!0,n._dragStartId=At(n._dragStarted.bind(n,t,e)),$(document,"selectstart",n),Je=!0,Q&&se(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,i,r,o=this.el,a=e.target,s=this.options,l=s.group,c=Tt.active,d=He===l,u=s.sort,f=Ge||c,p=this,h=!1;if(!ct){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=ie(a,s.draggable,o,!0),O("dragOver"),Tt.eventCanceled)return h;if(ke.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return L(!1);if(rt=!1,c&&!s.disabled&&(d?u||(i=Ie!==Ne):Ge===this||(this.lastPutMode=He.checkPull(this,c,ke,e))&&l.checkPut(this,c,ke,e))){if(r="vertical"===this._getDirection(e,a),t=ue(ke),O("dragOverValid"),Tt.eventCanceled)return h;if(i)return Ie=Ne,D(),this._hideClone(),O("revert"),Tt.eventCanceled||(Re?Ne.insertBefore(ke,Re):Ne.appendChild(ke)),L(!0);var g=he(o,s.draggable);if(!g||function(e,t,n){var i=ue(he(n.el,n.options.draggable)),r=Te(n.el,n.options,Me),o=10;return t?e.clientX>r.right+o||e.clientY>i.bottom&&e.clientX>i.left:e.clientY>r.bottom+o||e.clientX>i.right&&e.clientY>i.top}(e,r,this)&&!g.animated){if(g===ke)return L(!1);if(g&&o===e.target&&(a=g),a&&(n=ue(a)),!1!==Ct(Ne,o,ke,t,a,n,e,!!a))return D(),g&&g.nextSibling?o.insertBefore(ke,g.nextSibling):o.appendChild(ke),Ie=o,k(),L(!0)}else if(g&&function(e,t,n){var i=ue(pe(n.el,0,n.options,!0)),r=Te(n.el,n.options,Me),o=10;return t?e.clientX<r.left-o||e.clientY<i.top&&e.clientX<i.right:e.clientY<r.top-o||e.clientY<i.bottom&&e.clientX<i.left}(e,r,this)){var v=pe(o,0,s,!0);if(v===ke)return L(!1);if(n=ue(a=v),!1!==Ct(Ne,o,ke,t,a,n,e,!1))return D(),o.insertBefore(ke,v),Ie=o,k(),L(!0)}else if(a.parentNode===o){n=ue(a);var m,b,y,w=ke.parentNode!==o,E=!function(e,t,n){var i=n?e.left:e.top,r=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,s=n?t.right:t.bottom,l=n?t.width:t.height;return i===a||r===s||i+o/2===a+l/2}(ke.animated&&ke.toRect||t,a.animated&&a.toRect||n,r),T=r?"top":"left",C=fe(a,"top","top")||fe(ke,"top","top"),_=C?C.scrollTop:void 0;if($e!==a&&(b=n[T],at=!1,st=!E&&s.invertSwap||w),m=function(e,t,n,i,r,o,a,s){var l=i?e.clientY:e.clientX,c=i?n.height:n.width,d=i?n.top:n.left,u=i?n.bottom:n.right,f=!1;if(!a)if(s&&tt<c*r){if(!at&&(1===et?l>d+c*o/2:l<u-c*o/2)&&(at=!0),at)f=!0;else if(1===et?l<d+tt:l>u-tt)return-et}else if(l>d+c*(1-r)/2&&l<u-c*(1-r)/2)return function(e){return ge(ke)<ge(e)?1:-1}(t);if((f=f||a)&&(l<d+c*o/2||l>u-c*o/2))return l>d+c/2?1:-1;return 0}(e,a,n,r,E?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,st,$e===a),0!==m){var S=ge(ke);do{S-=m,y=Ie.children[S]}while(y&&("none"===se(y,"display")||y===Me))}if(0===m||y===a)return L(!1);$e=a,et=m;var x=a.nextElementSibling,A=!1,P=Ct(Ne,o,ke,t,a,n,e,A=1===m);if(!1!==P)return 1!==P&&-1!==P||(A=1===P),ct=!0,setTimeout(St,30),D(),A&&!x?o.appendChild(ke):a.parentNode.insertBefore(ke,A?x:a),C&&we(C,0,_-C.scrollTop),Ie=ke.parentNode,void 0===b||st||(tt=Math.abs(b-ue(a)[T])),k(),L(!0)}if(o.contains(ke))return L(!1)}return!1}function O(s,l){De(s,p,F({evt:e,isOwner:d,axis:r?"vertical":"horizontal",revert:i,dragRect:t,targetRect:n,canSort:u,fromSortable:f,target:a,completed:L,onMove:function(n,i){return Ct(Ne,o,ke,t,n,ue(n),e,i)},changed:k},l))}function D(){O("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function L(t){return O("dragOverCompleted",{insertion:t}),t&&(d?c._hideClone():c._showClone(p),p!==f&&(ae(ke,Ge?Ge.options.ghostClass:c.options.ghostClass,!1),ae(ke,s.ghostClass,!0)),Ge!==p&&p!==Tt.active?Ge=p:p===Tt.active&&Ge&&(Ge=null),f===p&&(p._ignoreWhileAnimating=a),p.animateAll(function(){O("dragOverAnimationComplete"),p._ignoreWhileAnimating=null}),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===ke&&!ke.animated||a===o&&!a.animated)&&($e=null),s.dragoverBubble||e.rootEl||a===document||(ke.parentNode[Ce]._isOutsideThisEl(e.target),!t&&wt(e)),!s.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),h=!0}function k(){Ye=ge(ke),Ue=ge(ke,s.draggable),Le({sortable:p,name:"change",toEl:o,newIndex:Ye,newDraggableIndex:Ue,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){ee(document,"mousemove",this._onTouchMove),ee(document,"touchmove",this._onTouchMove),ee(document,"pointermove",this._onTouchMove),ee(document,"dragover",wt),ee(document,"mousemove",wt),ee(document,"touchmove",wt)},_offUpEvents:function(){var e=this.el.ownerDocument;ee(e,"mouseup",this._onDrop),ee(e,"touchend",this._onDrop),ee(e,"pointerup",this._onDrop),ee(e,"touchcancel",this._onDrop),ee(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;Ye=ge(ke),Ue=ge(ke,n.draggable),De("drop",this,{evt:e}),Ie=ke&&ke.parentNode,Ye=ge(ke),Ue=ge(ke,n.draggable),Tt.eventCanceled||(it=!1,st=!1,at=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Pt(this.cloneId),Pt(this._dragStartId),this.nativeDraggable&&(ee(document,"drop",this),ee(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Q&&se(document.body,"user-select",""),se(ke,"transform",""),e&&(Je&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Me&&Me.parentNode&&Me.parentNode.removeChild(Me),(Ne===Ie||Ge&&"clone"!==Ge.lastPutMode)&&je&&je.parentNode&&je.parentNode.removeChild(je),ke&&(this.nativeDraggable&&ee(ke,"dragend",this),_t(ke),ke.style["will-change"]="",Je&&!it&&ae(ke,Ge?Ge.options.ghostClass:this.options.ghostClass,!1),ae(ke,this.options.chosenClass,!1),Le({sortable:this,name:"unchoose",toEl:Ie,newIndex:null,newDraggableIndex:null,originalEvent:e}),Ne!==Ie?(Ye>=0&&(Le({rootEl:Ie,name:"add",toEl:Ie,fromEl:Ne,originalEvent:e}),Le({sortable:this,name:"remove",toEl:Ie,originalEvent:e}),Le({rootEl:Ie,name:"sort",toEl:Ie,fromEl:Ne,originalEvent:e}),Le({sortable:this,name:"sort",toEl:Ie,originalEvent:e})),Ge&&Ge.save()):Ye!==Fe&&Ye>=0&&(Le({sortable:this,name:"update",toEl:Ie,originalEvent:e}),Le({sortable:this,name:"sort",toEl:Ie,originalEvent:e})),Tt.active&&(null!=Ye&&-1!==Ye||(Ye=Fe,Ue=Xe),Le({sortable:this,name:"end",toEl:Ie,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){De("nulling",this),Ne=ke=Ie=Me=Re=je=Be=Ve=ze=We=Je=Ye=Ue=Fe=Xe=$e=et=Ge=He=Tt.dragged=Tt.ghost=Tt.clone=Tt.active=null,dt.forEach(function(e){e.checked=!0}),dt.length=qe=Qe=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":ke&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,i=0,r=n.length,o=this.options;i<r;i++)ie(e=n[i],o.draggable,this.el,!1)&&t.push(e.getAttribute(o.dataIdAttr)||xt(e));return t},sort:function(e,t){var n={},i=this.el;this.toArray().forEach(function(e,t){var r=i.children[t];ie(r,this.options.draggable,i,!1)&&(n[e]=r)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(i.removeChild(n[e]),i.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return ie(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var i=Ae.modifyOption(this,e,t);n[e]=void 0!==i?i:t,"group"===e&&mt(n)},destroy:function(){De("destroy",this);var e=this.el;e[Ce]=null,ee(e,"mousedown",this._onTapStart),ee(e,"touchstart",this._onTapStart),ee(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(ee(e,"dragover",this),ee(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),ot.splice(ot.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!Ve){if(De("hideClone",this),Tt.eventCanceled)return;se(je,"display","none"),this.options.removeCloneOnHide&&je.parentNode&&je.parentNode.removeChild(je),Ve=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(Ve){if(De("showClone",this),Tt.eventCanceled)return;ke.parentNode!=Ne||this.options.group.revertClone?Re?Ne.insertBefore(je,Re):Ne.appendChild(je):Ne.insertBefore(je,ke),this.options.group.revertClone&&this.animate(ke,je),se(je,"display",""),Ve=!1}}else this._hideClone()}},ut&&$(document,"touchmove",function(e){(Tt.active||it)&&e.cancelable&&e.preventDefault()}),Tt.utils={on:$,off:ee,css:se,find:ce,is:function(e,t){return!!ie(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:ye,closest:ie,toggleClass:ae,clone:Ee,index:ge,nextTick:At,cancelNextTick:Pt,detectDirection:vt,getChild:pe,expando:Ce},Tt.get=function(e){return e[Ce]},Tt.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Tt.utils=F(F({},Tt.utils),e.utils)),Ae.mount(e)})},Tt.create=function(e,t){return new Tt(e,t)},Tt.version="1.15.3";var Ot,Dt,Lt,kt,It,Mt,Nt=[],Rt=!1;function Bt(){Nt.forEach(function(e){clearInterval(e.pid)}),Nt=[]}function jt(){clearInterval(Mt)}var Vt=ye(function(e,t,n,i){if(t.scroll){var r,o=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,s=t.scrollSensitivity,l=t.scrollSpeed,c=de(),d=!1;Dt!==n&&(Dt=n,Bt(),Ot=t.scroll,r=t.scrollFn,!0===Ot&&(Ot=me(n,!0)));var u=0,f=Ot;do{var p=f,h=ue(p),g=h.top,v=h.bottom,m=h.left,b=h.right,y=h.width,w=h.height,E=void 0,T=void 0,C=p.scrollWidth,_=p.scrollHeight,S=se(p),x=p.scrollLeft,A=p.scrollTop;p===c?(E=y<C&&("auto"===S.overflowX||"scroll"===S.overflowX||"visible"===S.overflowX),T=w<_&&("auto"===S.overflowY||"scroll"===S.overflowY||"visible"===S.overflowY)):(E=y<C&&("auto"===S.overflowX||"scroll"===S.overflowX),T=w<_&&("auto"===S.overflowY||"scroll"===S.overflowY));var P=E&&(Math.abs(b-o)<=s&&x+y<C)-(Math.abs(m-o)<=s&&!!x),O=T&&(Math.abs(v-a)<=s&&A+w<_)-(Math.abs(g-a)<=s&&!!A);if(!Nt[u])for(var D=0;D<=u;D++)Nt[D]||(Nt[D]={});Nt[u].vx==P&&Nt[u].vy==O&&Nt[u].el===p||(Nt[u].el=p,Nt[u].vx=P,Nt[u].vy=O,clearInterval(Nt[u].pid),0==P&&0==O||(d=!0,Nt[u].pid=setInterval(function(){i&&0===this.layer&&Tt.active._onTouchMove(It);var t=Nt[this.layer].vy?Nt[this.layer].vy*l:0,n=Nt[this.layer].vx?Nt[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(Tt.dragged.parentNode[Ce],n,t,e,It,Nt[this.layer].el)||we(Nt[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&f!==c&&(f=me(f,!1)));Rt=d}},30),Ft=function(e){var t=e.originalEvent,n=e.putSortable,i=e.dragEl,r=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var l=n||r;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(d)&&(o("spill"),this.onSpill({dragEl:i,putSortable:n}))}};function Yt(){}function Xt(){}Yt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var i=pe(this.sortable.el,this.startIndex,this.options);i?this.sortable.el.insertBefore(t,i):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Ft},U(Yt,{pluginName:"revertOnSpill"}),Xt.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Ft},U(Xt,{pluginName:"removeOnSpill"});Tt.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?$(document,"dragover",this._handleAutoScroll):this.options.supportPointer?$(document,"pointermove",this._handleFallbackAutoScroll):t.touches?$(document,"touchmove",this._handleFallbackAutoScroll):$(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?ee(document,"dragover",this._handleAutoScroll):(ee(document,"pointermove",this._handleFallbackAutoScroll),ee(document,"touchmove",this._handleFallbackAutoScroll),ee(document,"mousemove",this._handleFallbackAutoScroll)),jt(),Bt(),clearTimeout(re),re=void 0},nulling:function(){It=Dt=Ot=Rt=Mt=Lt=kt=null,Nt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,i=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,o=document.elementFromPoint(i,r);if(It=e,t||this.options.forceAutoScrollFallback||W||z||Q){Vt(e,this.options,o,t);var a=me(o,!0);!Rt||Mt&&i===Lt&&r===kt||(Mt&&jt(),Mt=setInterval(function(){var o=me(document.elementFromPoint(i,r),!0);o!==a&&(a=o,Bt()),Vt(e,n.options,o,t)},10),Lt=i,kt=r)}else{if(!this.options.bubbleScroll||me(o,!0)===de())return void Bt();Vt(e,this.options,me(o,!1),!1)}}},U(e,{pluginName:"scroll",initializeByDefault:!0})}),Tt.mount(Xt,Yt);const Ut=Tt;var Ht=function(e){if(function(){if(!window.DOMParser)return!1;var e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0}())return(new DOMParser).parseFromString(e,"text/html").body;var t=document.createElement("div");return t.innerHTML=e,t};const Gt={_addUID:function(e){return this.uid?e+"-"+this.uid:e},createDraggableElement:function(e,t){return Ut.create(e,{animation:150,handle:".gpf-btn-icon-territories-draggable",draggable:".draggable-territories-view",ghostClass:"gpf-territories-view-ghost",onEnd:function(e){t.onReorderTerritoriesViews(e)}})},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPterritories"),e.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",e},_createShowTerritoriesPictoElement:function(){var e=this,t=document.createElement("button"),n=document.createElement("span");return t.appendChild(n),t.id=this._addUID("GPshowTerritoriesPicto"),t.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowTerritoriesPicto"),t.classList.add("gpf-btn","gpf-btn--tertiary","gpf-btn-icon","gpf-btn-icon-territories"),t.classList.add("fr-icon-france-line"),t.classList.add("fr-btn","fr-btn--tertiary"),t.setAttribute("aria-label","Sélecteur de territoire"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),e.onShowTerritoriesClick(t)}):t.attachEvent&&t.attachEvent("onclick",function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),e.onShowTerritoriesClick(t)}),t},_createTerritoriesPanelElement:function(){var e=document.createElement("dialog");return e.id=this._addUID("GPterritoriesPanel"),e.className="GPpanel gpf-panel fr-modal",e},_createTerritoriesPanelDivElement:function(){var e=document.createElement("div");return e.className="gpf-panel__territories",e},_createTerritoriesPanelHeaderElement:function(){var e=document.createElement("div");return e.className="gpf-panel__header_territories",e},_createTerritoriesPanelIconElement:function(){var e=document.createElement("label");return e.className="gpf-btn-header-territories gpf-btn-icon-header-territories",e.title="Selecteur de territoires",e},_createTerritoriesPanelTitleElement:function(e){var t=document.createElement("div");return t.className="gpf-panel__title_territories",t.innerHTML=e,t},_createTerritoriesPanelCloseElement:function(){var e=this,t=document.createElement("button");t.id="GPterritoriesPanelClose",t.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var n=document.createElement("span");return n.className="GPelementHidden gpf-visible",n.innerText="Fermer",t.appendChild(n),t.addEventListener?t.addEventListener("click",function(){document.getElementById(e._addUID("GPshowTerritoriesPicto")).click(),e.onCloseTerritoriesClick()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(e._addUID("GPshowTerritoriesPicto")).click(),e.onCloseTerritoriesClick()}),t},_createTerritoriesPanelOptionsElement:function(e,t){var n=this,i="gpf-territories-button-option-id",r="gpf-territories-upload-id",o="gpf-territories-upload-close-id",a="gpf-territories-toggle-messages",s="gpf-territories-apply-id",l='\n        <div>\n            <button type="button" \n                id="'.concat(i,'"\n                class="fr-btn fr-btn--tertiary-no-outline" \n                role="territories-button-options" \n                aria-expanded="false" \n                aria-controls="gpf-territories-upload-container-id">\n                ').concat("&#x2630",'\n            </button>\n            <dialog id="gpf-territories-upload-container-id" class="fr-modal__body fr-upload-group gpf-hidden">\n                <div class="gpf-territories-header-upload">\n                    <button \n                        id="').concat(o,'"\n                        type="button" \n                        class="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w"\n                        aria-expanded="false"\n                        title="Fermer le panneau">\n                        <span>Fermer</span>\n                    </button>\n                </div>\n                <label class="fr-label">\n                    ').concat(e,'\n                    <span class="fr-hint-text">').concat(t,'</span>\n                </label>\n                <fieldset class="fr-fieldset">\n                    <div class="fr-fieldset__element">\n                        <div class="fr-toggle fr-m-2v">\n                            <input \n                                id="').concat(a,'" \n                                class="fr-toggle__input" \n                                type="checkbox" \n                                aria-describedby="gpf-territories-toggle-messages">\n                            <label class="fr-toggle__label" for="').concat(a,'">Compléter la liste</label>\n                            <div class="fr-messages-group" id="gpf-territories-toggle-messages" aria-live="polite"></div>\n                        </div>\n                    </div>\n                    <div class="fr-fieldset__element">\n                        <input \n                            id="').concat(r,'" \n                            class="fr-upload" \n                            aria-describedby="gpf-territories-upload-id-messages" \n                            type="file" \n                            name="upload">\n                        <div class="fr-messages-group" id="gpf-territories-upload-id-messages" aria-live="polite"></div>\n                    </div>\n                </fieldset>\n                <fieldset class="fr-fieldset">\n                    <button \n                        id="').concat(s,'" \n                        class="gpf-button gpf-button fr-btn fr-btn--tertiary" \n                        aria-describedby="gpf-territories-apply-id-messages">Appliquer</button>\n                    <div class="fr-messages-group" id="gpf-territories-apply-id-messages" aria-live="polite"></div>\n                </fieldset>\n            </dialog>\n        </div>\n        '),c=Ht(l).attachShadow({mode:"open"});c.innerHTML=l.trim();var d=c.getElementById(i);d&&d.addEventListener("click",function(e){e.target.ariaExpanded=!("true"===e.target.ariaExpanded);var t=document.getElementById(e.target.getAttribute("aria-controls"));t&&("true"===e.target.ariaExpanded?(t.classList.add("gpf-visible"),t.classList.remove("gpf-hidden")):(t.classList.remove("gpf-visible"),t.classList.add("gpf-hidden")))},!1);var u=c.getElementById(o);u&&u.addEventListener("click",function(e){e.target.ariaExpanded=!("true"===e.target.ariaExpanded),document.getElementById(i).click()});var f=c.getElementById(r);f&&f.addEventListener("change",function(e){n.onUploadFileClick(e)},!1);var p=c.getElementById(a);a&&p.addEventListener("click",function(e){console.log(e.target.checked),n.onUploadToggleClick(e)});var h=c.getElementById(s);return h&&h.addEventListener("click",function(e){n.onApplyTerritoriesClick(e)},!1),c.firstChild},_createTerritoriesPanelMenuViewsDivElement:function(e,t){var n=document.createElement("div");return n.className="territories-views gpf-panel__menuviews_territories",n.appendChild(this._createTerritoriesButtonOpenMenuViewsElement(e,t)),n.appendChild(this._createTerritoriesPanelMenuViewsElement(e)),n},_createTerritoriesButtonOpenMenuViewsElement:function(e,t){var n=this,i=document.createElement("button"),r=document.createElement("span");return i.appendChild(r),i.id="gpf-territories-button-open-views-id",i.classList.add("gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),i.classList.add("fr-btn","fr-btn--tertiary"),i.setAttribute("aria-label",e),i.setAttribute("title",t),i.setAttribute("tabindex","0"),i.setAttribute("aria-pressed",!1),i.setAttribute("aria-controls","gpf-territories-views-container-id"),i.setAttribute("type","button"),i.innerHTML=e,i.addEventListener?i.addEventListener("click",function(e){var t="true"===e.target.ariaPressed;e.target.setAttribute("aria-pressed",!t);var i=document.getElementById(e.target.getAttribute("aria-controls"));i&&(t?(i.classList.remove("gpf-visible"),i.classList.add("gpf-hidden")):(i.classList.add("gpf-visible"),i.classList.remove("gpf-hidden")),n.onShowTerritoriesViewsClick(e))}):i.attachEvent&&i.attachEvent("onclick",function(e){var t="true"===e.target.ariaPressed;e.target.setAttribute("aria-pressed",!t);var i=document.getElementById(e.target.getAttribute("aria-controls"));i&&(t?(i.classList.remove("gpf-visible"),i.classList.add("gpf-hidden")):(i.classList.add("gpf-visible"),i.classList.remove("gpf-hidden")),n.onShowTerritoriesViewsClick(e))}),i},_createTerritoriesPanelMenuViewsElement:function(e){var t=document.createElement("dialog");return t.id="gpf-territories-views-container-id",t.className="fr-modal__body gpf-panel__views_territories-menu gpf-hidden",t.appendChild(this._createTerritoriesMenuAddViewElement(e)),t.appendChild(this._createTerritoriesMenuListViewElement()),t},_createTerritoriesMenuAddViewElement:function(e){var t=this,n="gpf-territories-views-back-button-id",i="gpf-territories-views-input-id",r="gpf-territories-views-form-id",o="gpf-territories-views-submit-id",a='\n        <div>\n            <button \n                id="'.concat(n,'" \n                class="fr-btn fr-icon-arrow-left-line fr-btn--icon-left fr-btn--tertiary-no-outline"\n                aria-pressed="false" \n                aria-controls="gpf-territories-views-container-id gpf-territories-button-open-views-id"\n                title="Retour au sélecteur de territoires" \n                type="button">\n                ').concat(e,'\n            </button>\n            <form id="').concat(r,'">\n                <fieldset \n                    class="fr-fieldset" \n                    id="add-view-form-fieldset" \n                    aria-labelledby="add-view-form-fieldset-legend add-view-form-fieldset-messages">\n                    <legend \n                        class="fr-fieldset__legend" \n                        id="add-view-form-fieldset-legend"> \n                        Ajouter la vue actuelle \n                    </legend>\n                    <div class="fr-fieldset__element">\n                        <div class="fr-input-group" id="').concat(i,'-input-group-view">\n                            <label class="fr-label" for="').concat(i,'"> Nom </label>\n                            <input class="fr-input" aria-describedby="').concat(i,'-messages" id="').concat(i,'" type="text">\n                            <div class="fr-messages-group" id="').concat(i,'-messages" aria-live="polite"></div>\n                        </div>\n                    </div>\n                    <div class="fr-messages-group" id="add-view-form-fieldset-messages" aria-live="polite">\n                        <p class="fr-message fr-message--error gpf-hidden" id="').concat(i,'-message-error-duplicate-id">Ce nom est déjà utilisé</p>\n                        <p class="fr-message fr-message--error gpf-hidden" id="').concat(i,'-message-error-empty-id">Le nom est vide</p>\n                    </div>\n                </fieldset>\n            </form>\n            <input type="submit" id="').concat(o,'" value="Ajouter" class="fr-btn">\n            <hr class="fr-m-1v"/>\n        </div>\n        '),s=Ht(a).attachShadow({mode:"open"});s.innerHTML=a.trim();var l=s.getElementById(n);l&&l.addEventListener("click",function(e){var n="true"===e.target.ariaPressed;e.target.setAttribute("aria-pressed",!n);var r=e.target.getAttribute("aria-controls").split(" "),o=document.getElementById(r[0]);if(o){o.classList.remove("gpf-visible"),o.classList.add("gpf-hidden");var a=document.getElementById(r[1]);if(a){a.setAttribute("aria-pressed","false");var s=document.getElementById(i);if(s){s.value="";var l=document.getElementById(i+"-message-error-empty-id"),c=document.getElementById(i+"-message-error-duplicate-id");l&&l.classList.add("gpf-hidden"),c&&c.classList.add("gpf-hidden")}t.onCloseTerritoriesViewsClick(e)}}},!1);var c=s.getElementById(r);c&&c.addEventListener("submit",function(e){e.preventDefault();var n=document.getElementById(i);n&&t.onAddTerritoriesViewClick(e,n.value)},!1);var d=s.getElementById(o);return d&&d.addEventListener("click",function(e){e.preventDefault();var n=document.getElementById(i);if(n){var r=t.territories.find(function(e){return e.data.title===n.value}),o=document.getElementById(i+"-message-error-empty-id"),a=document.getElementById(i+"-message-error-duplicate-id");if(""===n.value)return o&&o.classList.remove("gpf-hidden"),void(a&&a.classList.add("gpf-hidden"));if(r)return a&&a.classList.remove("gpf-hidden"),void(o&&o.classList.add("gpf-hidden"));o&&o.classList.add("gpf-hidden"),a&&a.classList.add("gpf-hidden"),t.onAddTerritoriesViewClick(e,n.value)}},!1),s.firstChild},_createTerritoriesMenuListViewElement:function(){var e=this,t="gpf-territories-views-reset-button-id",n='\n        <div class="gpf-panel__views_territories-listview">\n            \x3c!-- Menu de la liste des vues --\x3e\n            <div class="gpf-panel__views_territories-listview-header">\n                <div class="gpf-panel__views_territories-listview-count">\n                    <span class="fr-label" style="padding-right: 10px;"> Territoires </span>\n                    <span \n                        class="fr-message" \n                        id="'.concat("gpf-territories-views-count-id",'"> 0 </span>\n                </div>\n                <button \n                    id="').concat(t,'" \n                    class="fr-btn fr-btn--sm fr-btn--tertiary-no-outline"\n                    title="Réinitialiser la liste des territoires" \n                    type="button">\n                    Réinitialiser\n                </button>\n            </div>\n            \x3c!-- Liste des vues --\x3e\n            <div \n                id="gpf-territories-views-listview-entries-id"\n                class="gpf-panel__views_territories-listview-entries">\n            </div>\n        </div>\n        '),i=Ht(n).attachShadow({mode:"open"});i.innerHTML=n.trim();var r=i.getElementById(t);return r&&r.addEventListener("click",function(t){e.onResetTerritoriesViewClick(t)},!1),i.firstChild},_createTerritoriesElement:function(){var e=document.createElement("div");return e.className="territories-entries gpf-panel__body_territories fr-modal__body",e},_createTerritoryEntry:function(e){var t=this;if(e){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFvSURBVHgB7ZfBisIwEIb/aIWKHsXH8OCT+lBevHgRjwp6EBEREdRqTbKZLN3FXT20yRyK80FIqJR8mf4drDqfjUWNaKBmiDA3IsyNCHMjwtyIMDcizI0Ic/O5wsYA7bZCkjxfb7UQlWjCnY7CaJRhNtM/0nSAyUQjTRViEU3Yug+t8Tj3ws2mcpVVWCw0Gm4Hmv9Wvioq1jcdRaLbVX6+XCyUK+p0ql2VgevVYjhM/LVQolSYqni7AVlm/aB4UKXT9LvyFI35PE40goVJ9nSiYb0cPfrVyvh1Aa21BjYb4+KCIIKFiwhQNzgcSFphvTb/ugMdZLnULhbq6TBlCcowSex2v7dTRvd74+PxLq90kMEg8dGpQuUKF1GgR01VpvF4AP1+A3lu/frVOB4ttltT+QWsXGHakN7+V5mkQ9zv7++l33s95efS+4ZEIqRNVc1xUDu3UTp4OeTfGjcizI0IcyPC3IgwNyLMjQhzUzvhL49qosB5TImnAAAAAElFTkSuQmCC",i=e.thumbnail||n,r="",o=e.icon||n;r=o.startsWith("fr-icon-")?'\n                <button \n                    type="button" \n                    class="fr-btn fr-btn--lg '.concat(o,' fr-btn--tertiary-no-outline">\n                </button>'):'\n                <svg>       \n                    <image id="icon-'.concat(e.id,'" xlink:href="').concat(o,'" style="width:100%;"/>    \n                </svg>');var a=e.id.toLowerCase(),s=Ht('\n            <div class="gpf-tile fr-tile fr-tile--sm">\n                <div class="fr-tile__body">\n                    <div class="fr-tile__content">\n                        <p class="fr-tile__title">\n                            <label class="gpf-label fr-label" title="'.concat(e.description,'">').concat(e.title,'</label>\n                        </p>\n                    </div>\n                </div>\n                <div class="gpf-tile__header fr-tile__header">\n                    <div class="fr-tile__pictogram fr-tile__thumbnail">\n                        <img id="thumbnail-').concat(e.id,'" src="').concat(i,'" width="100%" height="100%" title="').concat(e.description,'"/>\n                    </div>\n                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--').concat(a,'">\n                        ').concat(r,"\n                    </div>\n                </div>\n            </div>\n            ")),l=s.firstChild;return l&&l.addEventListener("click",function(n){t.onImageTerritoriesClick(n,e.id)}),s.firstChild}},_createTerritoryView:function(e){var t=this,n="gpf-territories-view-entry-button-id-"+e.id;if(e){var i=Ht('\n            <div class="gpf-panel__views_territories-listview-entry draggable-territories-view">\n                \x3c!-- '.concat(e.title,' --\x3e\n                <div style="display: flex;flex-direction: row;align-items: center;">    \n                    <span class="gpf-btn gpf-btn-icon-territories-draggable gpf-btn--tertiary"></span>\n                    <label class="gpf-label fr-label" title="').concat(e.description,'">').concat(e.title,'</label>\n                </div>\n                <button \n                    id="').concat(n,'" \n                    type="button" \n                    class="fr-btn fr-btn--sm fr-btn--icon-left fr-btn--tertiary-no-outline gpf-btn gpf-btn-icon-territories-remove gpf-btn--tertiary"></button>\n            </div>\n            ')),r=i.firstChild;if(r){r.addEventListener("click",function(n){t.onViewTerritoryClick(n,e.id)});var o=i.querySelector("#"+n);o&&o.addEventListener("click",function(n){n.stopPropagation(),t.onViewTerritoryRemoveClick(n,e.id)})}return i.firstChild}}};function zt(e){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(e)}function Wt(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,qt(i.key),i)}}function qt(e){var t=function(e,t){if("object"!=zt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=zt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zt(t)?t:t+""}function Qt(e,t){if(t&&("object"==zt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Kt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(Kt=function(){return!!e})()}function Zt(){return Zt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var i=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Jt(e)););return e}(e,t);if(i){var r=Object.getOwnPropertyDescriptor(i,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},Zt.apply(null,arguments)}function Jt(e){return Jt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Jt(e)}function $t(e,t){return $t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},$t(e,t)}var en=R.getLogger("territories"),tn=function(e){function t(e){var n,i,r,o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,o=[e=e||{}],r=Jt(r=t),!((n=Qt(i,Kt()?Reflect.construct(r,o||[],Jt(i).constructor):r.apply(i,o)))instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return n.CLASSNAME="Territories",n.initialize(e),n.container=n.initContainer(),n.element?n.element.appendChild(n.container):n.element=n.container,Qt(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$t(e,t)}(t,e),n=t,i=[{key:"setMap",value:function(e){if(e){this.draggable&&B.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0);for(var n=this.auto?j:this.options.territories,i=0;i<n.length;i++){var r=n[i];this.setTerritory(r)}}var o,a,s,l,c;(o=t,a="setMap",s=this,c=Zt(Jt(1&(l=3)?o.prototype:o),a,s),2&l&&"function"==typeof c?function(e){return c.apply(s,e)}:c)([e]),this.options.position&&this.setPosition(this.options.position),!1===this.options.gutter&&this.getContainer().classList.add("gpf-button-no-gutter"),this.createDraggableElement(this.element.querySelector("#gpf-territories-views-listview-entries-id"),this),this.dispatchEvent({type:"territories:loaded"})}},{key:"setTerritory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.territories.some(function(t){return t.data.id===e.id});if(e&&!n){var i=this._createTerritoryEntry(e),r=this._createTerritoryView(e);if(i&&r){this.panelTerritoriesEntriesContainer.appendChild(i),this.panelTerritoriesViewsContainer.appendChild(r);var o=this.element.querySelector("#gpf-territories-views-count-id");if(o){var a=this.territories.filter(function(e){return!e.isRemoved}).length+1;o.innerText=a}return this.territories.push({isRemoved:!1,isAdded:t,data:e,initialIndex:this.territories.length,domEntry:i,domView:r}),!0}}return!1}},{key:"setTerritories",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];this.setTerritory(n)}}},{key:"removeTerritory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;if(e)for(var i=0;i<this.territories.length;i++)if(this.territories[i].data.id===e.data.id){t?(this.territories[i].domEntry.remove(),this.territories[i].domView.remove(),this.territories.splice(i,1)):(this.territories[i].isRemoved=!0,this.territories[i].domEntry.classList.add("gpf-hidden"),this.territories[i].domView.style.display="none"),n=!0;var r=this.element.querySelector("#gpf-territories-views-count-id");if(r){var o=this.territories.filter(function(e){return!e.isRemoved}).length;r.innerText=o}break}return n}},{key:"removeTerritories",value:function(){for(var e=0;e<this.territories.length;e++){var t=this.territories[e];t.domEntry.remove(),t.domView.remove()}this.territories=[]}},{key:"setCollapse",value:function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e):en.log("[ERROR] Territory:setCollapsed - missing collapsed parameter")}},{key:"setReduce",value:function(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}},{key:"getContainer",value:function(){return this.container}},{key:"initialize",value:function(e){this.uid=e.id||I.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,upload:{active:!1,title:"Ajouter un fichier de configuration",description:""},view:{active:!1,title:"Modifier les territoires",description:""},title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]};var t=D.assign(this.options.upload,e.upload);D.assign(this.options,e),D.assign(this.options.upload,t),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.uploadConfig=null,this.append=!1,this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.containerTerritoriesOptions=null,this.panelTerritoriesEntriesContainer=null,this.panelTerritoriesViewsContainer=null}},{key:"initContainer",value:function(){var e=this._createMainContainerElement(),t=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(t);var n=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();n.classList.add("tiles-direction"),n.classList.add("tiles-"+this.options.tiles);var i=this._createTerritoriesPanelDivElement();n.appendChild(i);var r=this._createTerritoriesPanelMenuViewsDivElement(this.options.view.title,this.options.view.description);n.appendChild(r),this.panelTerritoriesViewsContainer=r.querySelector("#gpf-territories-views-listview-entries-id"),this.options.view&&!this.options.view.active&&(r.style.display="none");var o=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(o.classList.add("tiles-direction"),o.classList.add("tiles-"+this.options.tiles),this.options.reduce&&o.classList.add("tiles-reduce"),this.options.thumbnail?o.classList.add("tiles-thumbnail"):o.classList.add("tiles-icon"),n.appendChild(o),this.options.panel){var a=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),s=this._createTerritoriesPanelIconElement();a.appendChild(s);var l=this._createTerritoriesPanelTitleElement(this.options.title);if(a.appendChild(l),this.options.upload&&this.options.upload.active){var c=this.containerTerritoriesOptions=this._createTerritoriesPanelOptionsElement(this.options.upload.title,this.options.upload.description);a.appendChild(c)}var d=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();a.appendChild(d),i.appendChild(a)}return e.appendChild(n),en.log(e),e}},{key:"closePanelUpLoad",value:function(){var e=this.containerTerritoriesOptions.children[0];e&&e.setAttribute("aria-expanded","false");var t=this.containerTerritoriesOptions.children[1];t&&(t.classList.add("gpf-hidden"),t.classList.remove("gpf-visible"))}},{key:"onShowTerritoriesClick",value:function(e){"true"===e.target.ariaPressed&&this.onPanelOpen(),en.trace(e),this.collapsed=!this.collapsed}},{key:"onCloseTerritoriesClick",value:function(e){en.trace(e)}},{key:"onImageTerritoriesClick",value:function(e,t){en.trace(e,t);var n=this.territories.find(function(e){return e.data.id===t});if(n){var i=n.data.zoom,r=n.data.bbox,o=n.data.point;if(r&&!r.length)return;if(!o&&!r)return;var a=this.getMap(),s=a.getView().getProjection().getCode();if(r){var l=(0,A.transformExtent)(r,"EPSG:4326",s);a.getView().fit(l,{size:a.getSize()})}if(o){var c=(0,A.transform)(o,"EPSG:4326",s);a.getView().setCenter(c)}i&&a.getView().setZoom(i),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:n.data})}}},{key:"onUploadFileClick",value:function(e){var t=e.target.files[0];if(e.target,t){var n=new FileReader,i=this;n.onerror=function(e){en.log("onerror")},n.onprogress=function(e){en.log("onprogress")},n.onloadstart=function(e){en.log("onloadstart")},n.onabort=function(e){en.log("onabort")},n.onloadend=function(e){en.log("onloadend : ",e)},n.onload=function(e){en.log("file content : ",e.target.result);try{if(i.uploadConfig=JSON.parse(e.target.result),!i.uploadConfig)return void console.error("Invalid configuration file !")}catch(e){return void console.error("Error parsing configuration file : ",e)}},n.readAsText(t)}else en.warn("Missing file to upload !")}},{key:"onUploadToggleClick",value:function(e){this.append=e.target.checked}},{key:"onApplyTerritoriesClick",value:function(e){en.trace(e),this.closePanelUpLoad(),this.uploadConfig?(this.append||this.removeTerritories(),this.setTerritories(this.uploadConfig)):en.error("No configuration to apply !")}},{key:"onShowTerritoriesViewsClick",value:function(e){en.trace(e)}},{key:"onCloseTerritoriesViewsClick",value:function(e){en.trace(e),this.closePanelUpLoad()}},{key:"onAddTerritoriesViewClick",value:function(e,t){en.trace(e,t);var n=Math.abs(Array.from(t).reduce(function(e,t){return Math.imul(31,e)+t.charCodeAt(0)|0},0)),i=this.getMap().getView(),r=i.getProjection().getCode(),o=(0,A.transform)(i.getCenter(),r,"EPSG:4326"),a=i.getZoom(),s={id:n.toString(),title:t,description:"Vue personnalisée",point:o,zoom:a,thumbnail:"",icon:"fr-icon-map-pin-2-line"};this.setTerritory(s,!0),this.dispatchEvent({type:"territories:add",territory:s})}},{key:"onResetTerritoriesViewClick",value:function(e){var t=this;en.trace(e);for(var n=0;n<this.territories.length;n++){var i=this.territories[n];i.isAdded?this.removeTerritory(i,!0):i.isRemoved&&(i.domEntry.classList.remove("gpf-hidden"),i.domView.style.display="",i.isRemoved=!1)}this.territories.sort(function(e,t){return e.initialIndex-t.initialIndex}),this.panelTerritoriesEntriesContainer.innerHTML="",this.territories.forEach(function(e){t.panelTerritoriesEntriesContainer.appendChild(e.domEntry)}),this.panelTerritoriesViewsContainer.innerHTML="",this.territories.forEach(function(e){t.panelTerritoriesViewsContainer.appendChild(e.domView)});var r=this.element.querySelector("#gpf-territories-views-count-id");if(r){var o=this.territories.filter(function(e){return!e.isRemoved}).length;r.innerText=o}}},{key:"onViewTerritoryClick",value:function(e,t){en.trace(e,t)}},{key:"onViewTerritoryRemoveClick",value:function(e,t){en.trace(e,t);var n=this.territories.find(function(e){return e.data.id===t});n&&(this.removeTerritory(n,n.isAdded),this.dispatchEvent({type:"territories:remove",territory:n.data}))}},{key:"onReorderTerritoriesViews",value:function(e){var t=this;en.trace(e);var n=Array.from(this.panelTerritoriesViewsContainer.children),i=[];n.forEach(function(e){var n=t.territories.find(function(t){return t.domView===e});n&&i.push(n)}),this.territories=i,this.panelTerritoriesEntriesContainer.innerHTML="",this.territories.forEach(function(e){t.panelTerritoriesEntriesContainer.appendChild(e.domEntry)})}}],i&&Wt(n.prototype,i),r&&Wt(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,r}(g);Object.assign(tn.prototype,Gt),Object.assign(tn.prototype,x);const nn=tn;window.ol&&window.ol.control&&(window.ol.control.Territories=tn)})(),GpfExtOlTerritories=i.default})();
//# sourceMappingURL=GpfExtOlTerritories.js.map