/*!
 * @brief geopf-extensions-openlayers
 *
 * This software is released under the licence AGPL-3.0
 * @see https://www.gnu.org/licenses/agpl-3.0.html#license-text
 * @see https://www.gnu.org/licenses/agpl-3.0.en.html#license-text
 *
 * @copyright copyright (c) IGN 
 * @license AGPL-3.0
 * @author IGN
 * @version 1.0.0-beta.6-446
 * @date 30/09/2025
 *
 */(()=>{var e={3065:function(e,t,r){var n,i;!function(){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],i={},o=null;function a(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?s:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}function c(){for(var r=this.getLevel(),i=0;i<n.length;i++){var o=n[i];this[o]=i<r?e:this.methodFactory(o,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function d(e,t,r){return l(e)||u.apply(this,arguments)}function f(e,r){var a,s,l,u=this,f="loglevel";function p(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&f){try{return void(window.localStorage[f]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"="+r+";"}catch(e){}}}function g(){var e;if(typeof window!==t&&f){try{e=window.localStorage[f]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(f),i=r.indexOf(n+"=");-1!==i&&(e=/^([^;]+)/.exec(r.slice(i+n.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function h(){if(typeof window!==t&&f){try{window.localStorage.removeItem(f)}catch(e){}try{window.document.cookie=encodeURIComponent(f)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function v(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?f+=":"+e:"symbol"==typeof e&&(f=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=r||d,u.getLevel=function(){return null!=l?l:null!=s?s:a},u.setLevel=function(e,t){return l=v(e),!1!==t&&p(l),c.call(u)},u.setDefaultLevel=function(e){s=v(e),g()||u.setLevel(e,!1)},u.resetLevel=function(){l=null,h(),c.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(o!==u&&(a=v(o.getLevel())),c.call(u),o===u)for(var e in i)i[e].rebuild()},a=v(o?o.getLevel():"WARN");var m=g();null!=m&&(l=v(m)),c.call(u)}(o=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new f(e,o.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return i},o.default=o,o},void 0===(i="function"==typeof n?n.call(t,r,t,e):n)||(e.exports=i)}()}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};(()=>{"use strict";r.d(n,{default:()=>K});const e=ol.control.Control;const t=function(){return""!==getComputedStyle(document.documentElement).getPropertyValue("--blue-france-sun-113-625")};function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function o(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function a(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function c(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}function d(e,t,r){return t=p(t),function(e,t){if(t&&("object"==i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,f()?Reflect.construct(t,r||[],p(e).constructor):t.apply(e,r))}function f(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(f=function(){return!!e})()}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}const h=function(e){function t(e){var r;return s(this,t),r=d(this,t,[{element:(e=e||{}).element,target:e.target,render:e.render}]),e&&e.listable?r.listable=!0:r.listable=!1,e&&e.description?r.description=e.description:r.description="",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),c(t,[{key:"setPosition",value:function(e){this.getMap()&&new b(this).set(e)}},{key:"updatePosition",value:function(e){this.getMap()&&new b(this).update(e)}}])}(r.n(e)());var v=["top-left","top-right","bottom-left","bottom-right"],m=new WeakSet,b=function(){return c(function e(t){return s(this,e),o(this,m),this.caller=t,this.container=null,a(m,this,w).call(this,"top-left"),a(m,this,w).call(this,"top-right"),a(m,this,w).call(this,"bottom-left"),a(m,this,w).call(this,"bottom-right"),this},[{key:"set",value:function(e){v.includes(e.toLowerCase())&&(a(m,this,E).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}},{key:"update",value:function(e){v.includes(e.toLowerCase())&&a(m,this,E).call(this,e,!0)}}])}();function y(e){return!!this.container.children["position-container-"+e]}function w(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!a(m,this,y).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}}function E(e,r){var n=this,i=function(e){return n.container.children["position-container-"+e].children.length},o=function(e){return n.container.children["position-container-"+e].offsetWidth},a=function(e){var t=n.container.children["position-container-"+e],i=t.offsetHeight;if(r){e.includes("top")&&(i=0);for(var o=0;o<t.children.length;o++){if(t.children[o].id===n.caller.element.id){i=e.includes("bottom")?i-n.caller.element.offsetHeight:-1*i;break}i-=t.children[o].offsetHeight}}return i},s=function(e){e.style.top="unset",e.style.bottom="unset",e.style.left="unset",e.style.right="unset"};s(this.caller.element),this.caller.element.style.position="unset";var l=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(0!==l.length){var c=0;l.forEach(function(r){if("dialog"===r.nodeName.toLowerCase()){switch(s(r),e.toLowerCase()){case"top-left":t()?r.style.top="0px":r.style.top=i(e)?a(e)+"px":"0px",r.style.left=o(e)+c+"px";break;case"bottom-left":t()?r.style.top="0px":r.style.bottom=i(e)?a(e)+"px":"0px",r.style.left=o(e)+c+"px";break;case"top-right":t()?r.style.top="0px":r.style.top=i(e)?a(e)+"px":"0px",r.style.right=o(e)+c+"px";break;case"bottom-right":t()?r.style.top="0px":r.style.bottom=i(e)?a(e)+"px":"0px",r.style.right=o(e)+c+"px"}c+=r.offsetWidth}})}}function T(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var P=["GPoverviewMap","GPfullScreen"];const x=function(e,t){var r=function(e,t){var r=[].concat(P,[t]),n=[];if(e&&e.includes("left")){var i=document.getElementById("position-container-bottom-left"),o=document.getElementById("position-container-top-left");n=[].concat(T(i.children),T(o.children))}if(e&&e.includes("right")){var a=document.getElementById("position-container-bottom-right"),s=document.getElementById("position-container-top-right");n=[].concat(T(a.children),T(s.children))}return n.filter(function(e){var t=e.id.match(/(\w+)-[0-9]+/)[1],n=r.includes(t);if("true"===e.getElementsByTagName("button")[0].getAttribute("aria-pressed")&&!n)return e})}(e,t);r.length>0&&r[0].getElementsByTagName("button")[0].click()};const O={onPanelOpen:function(){x(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},_=(ol.Map,ol.proj);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}const S={detectSupport:function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},assign:function(e,t){for(var r in e=e||{},t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},mergeParams:function(e,t,r){if(void 0!==e&&void 0!==t)for(var n in void 0===r&&(r=!0),t)t.hasOwnProperty(n)&&("object"===L(t[n])?e.hasOwnProperty(n)?this.mergeParams(e[n],t[n],r):e[n]=t[n]:e.hasOwnProperty(n)?r&&(e[n]=t[n]):e[n]=t[n])}};var M;const A={generate:(M=Math.floor(Date.now()),function(){return M++}),name:function(e){var t=null,r=e.lastIndexOf("-");return t=-1===r?e:e.substring(0,r),t},index:function(e){var t=null,r=this.name(e),n=r.lastIndexOf("_");return-1!==n&&(t=r.substring(n+1)),t},uuid:function(e){var t=null,r=e.lastIndexOf("-");return-1!==r&&(t=parseInt(e.substring(r+1),10)),t}};var I=r(3065),k={getLogger:function(e){if(void 0===t)var t={env:{VERBOSE:!1}};t.env.VERBOSE?I.enableAll():I.disableAll();var r=e||"default";return I.getLogger(r)},disableAll:function(){var e=I.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=I.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}};const j=k;window.Gp&&(window.Gp.Logger=k);j.getLogger("draggable");const D={dragElement:function(e,t,r){var n,i=0,o=0,a=0,s=0,l=0,c=0;t?t.addEventListener("mousedown",d,!0):e.addEventListener("mousedown",d,!0);var u={bottom:0,left:0,right:0,top:0};function d(t){(t=t||window.event).preventDefault(),i=t.clientX,o=t.clientY,n=e.getBoundingClientRect();var a=r.getBoundingClientRect();u={bottom:a.bottom,left:a.left,right:a.right,top:a.top},document.addEventListener("mouseup",f,!0),document.addEventListener("mousemove",p,!0)}function f(){l-=a,c-=s,document.removeEventListener("mouseup",f,!0),document.removeEventListener("mousemove",p,!0)}function p(t){var r=(t=t||window.event).clientX,d=t.clientY,f=a,p=s;a=i-r,s=o-d;var g=n.left-a,h=n.top-s;if(g<u.left||h<u.top||g+n.width>u.right||h+n.height>u.bottom)a=f,s=p;else{var v=l-a,m=c-s;e.style.transform="translate("+v+"px,"+m+"px)"}}}},R=JSON.parse('[{"id":"FXX","title":"France métropolitaine","description":"","zoom":null,"bbox":[-9.86,41.15,10.38,51.56],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{"id":"GLP","title":"Guadeloupe","description":"","zoom":null,"bbox":[-61.97,15.72,-60.93,16.66],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{"id":"GUF","title":"Guyane","description":"","zoom":null,"bbox":[-55.65,1.49,-51.2,6.21],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{"id":"MTQ","title":"Martinique","description":"","zoom":null,"bbox":[-61.4,14.25,-60.67,15.04],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{"id":"REU","title":"Réunion","description":"","zoom":10,"bbox":[55.07,-21.46,55.86,-20.79],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{"id":"SPM","title":"Saint-Pierre-et-Miquelon","description":"","zoom":null,"bbox":[-56.48,46.69,-56.07,47.19],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{"id":"IDF","title":"Paris petite couronne","description":"","zoom":12,"bbox":[2.18,48.77,2.52,48.95],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{"id":"MYT","title":"Mayotte","description":"","zoom":null,"bbox":[44.95,-13.049,45.32,-12.57],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{"id":"NCL","title":"Nouvelle Calédonie","description":"","zoom":null,"bbox":[163.02,-23.08,167.86,-19.5],"thumbnail":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png","icon":"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}]');var N=function(e){if(function(){if(!window.DOMParser)return!1;var e=new DOMParser;try{e.parseFromString("x","text/html")}catch(e){return!1}return!0}())return(new DOMParser).parseFromString(e,"text/html").body;var t=document.createElement("div");return t.innerHTML=e,t};const U={_addUID:function(e){return this.uid?e+"-"+this.uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPterritories"),e.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",e},_createShowTerritoriesPictoElement:function(){var e=this,t=document.createElement("button"),r=document.createElement("span");return t.appendChild(r),t.id=this._addUID("GPshowTerritoriesPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",t.setAttribute("aria-label","Sélecteur de territoire"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(t){var r="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!r),e.onShowTerritoriesClick(t)}):t.attachEvent&&t.attachEvent("onclick",function(t){var r="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!r),e.onShowTerritoriesClick(t)}),t},_createTerritoriesPanelElement:function(){var e=document.createElement("dialog");return e.id=this._addUID("GPterritoriesPanel"),e.className="GPpanel gpf-panel fr-modal",e},_createTerritoriesPanelDivElement:function(){var e=document.createElement("div");return e.className="gpf-panel__territories",e},_createTerritoriesPanelHeaderElement:function(){var e=document.createElement("div");return e.className="gpf-panel__header_territories",e},_createTerritoriesPanelIconElement:function(){var e=document.createElement("label");return e.className="gpf-btn-header-territories gpf-btn-icon-header-territories",e.title="Selecteur de territoires",e},_createTerritoriesPanelTitleElement:function(e){var t=document.createElement("div");return t.className="gpf-panel__title_territories",t.innerHTML=e,t},_createTerritoriesPanelCloseElement:function(){var e=this,t=document.createElement("button");t.id="GPterritoriesPanelClose",t.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",t.appendChild(r),t.addEventListener?t.addEventListener("click",function(){document.getElementById(e._addUID("GPshowTerritoriesPicto")).click(),e.onCloseTerritoriesClick()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(e._addUID("GPshowTerritoriesPicto")).click(),e.onCloseTerritoriesClick()}),t},_createTerritoriesPanelOptionsElement:function(e,t){var r=this,n="gpf-territories-button-option-id",i="gpf-territories-upload-id",o="gpf-territories-upload-close-id",a="gpf-territories-toggle-messages",s='\n        <div>\n            <button type="button" \n                id="'.concat(n,'"\n                class="fr-btn fr-btn--tertiary-no-outline" \n                role="territories-button-options" \n                aria-expanded="false" \n                aria-controls="gpf-territories-upload-container-id">\n                ').concat("&#x2630",'\n            </button>\n            <dialog id="gpf-territories-upload-container-id" class="fr-modal__body fr-upload-group gpf-hidden">\n                <div class="gpf-territories-header-upload">\n                    <button \n                        id="').concat(o,'"\n                        type="button" \n                        class="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w"\n                        aria-expanded="false"\n                        title="Fermer le panneau">\n                        <span>Fermer</span>\n                    </button>\n                </div>\n                <label class="fr-label" for="gpf-territories-upload-id">\n                    ').concat(e,'\n                    <span class="fr-hint-text">').concat(t,'</span>\n                </label>\n                <div class="fr-toggle fr-m-2v">\n                    <input \n                        id="').concat(a,'" \n                        class="fr-toggle__input" \n                        type="checkbox" \n                        aria-describedby="gpf-territories-toggle-messages">\n                    <label class="fr-toggle__label" for="').concat(a,'">Compléter la liste</label>\n                    <div class="fr-messages-group" id="gpf-territories-toggle-messages" aria-live="polite"></div>\n                </div>\n                <input \n                    id="').concat(i,'" \n                    class="fr-upload" \n                    aria-describedby="gpf-territories-upload-id-messages" \n                    type="file" \n                    name="upload">\n                <div class="fr-messages-group" id="gpf-territories-upload-id-messages" aria-live="polite"></div>\n            </dialog>\n        </div>\n        '),l=N(s).attachShadow({mode:"open"});l.innerHTML=s.trim();var c=l.getElementById(n);c&&c.addEventListener("click",function(e){e.target.ariaExpanded=!("true"===e.target.ariaExpanded);var t=document.getElementById(e.target.getAttribute("aria-controls"));t&&("true"===e.target.ariaExpanded?(t.classList.add("gpf-visible"),t.classList.remove("gpf-hidden")):(t.classList.remove("gpf-visible"),t.classList.add("gpf-hidden")))},!1);var u=l.getElementById(o);u&&u.addEventListener("click",function(e){e.target.ariaExpanded=!("true"===e.target.ariaExpanded),document.getElementById(n).click()});var d=l.getElementById(i);d&&d.addEventListener("change",function(e){r.onUploadFileClick(e)},!1);var f=l.getElementById(a);return a&&f.addEventListener("click",function(e){console.log(e.target.checked),r.onUploadToggleClick(e)}),l.firstChild},_createTerritoriesElement:function(){var e=document.createElement("div");return e.className="territories-entries gpf-panel__body_territories fr-modal__body",e},_createTerritoryEntry:function(e){var t=this;if(e){var r="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",n=e.thumbnail||r,i=e.icon||r,o=e.id.toLowerCase(),a=N('\n            <div class="gpf-tile fr-tile fr-tile--sm">\n                <div class="fr-tile__body">\n                    <div class="fr-tile__content">\n                        <p class="fr-tile__title">\n                            <label class="gpf-label fr-label" title="'.concat(e.description,'">').concat(e.title,'</label>\n                        </p>\n                    </div>\n                </div>\n                <div class="gpf-tile__header fr-tile__header">\n                    <div class="fr-tile__pictogram fr-tile__thumbnail">\n                        <img id="thumbnail-').concat(e.id,'" src="').concat(n,'" width="100%" height="100%" title="').concat(e.description,'"/>\n                    </div>\n                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--').concat(o,'">\n                        <svg>       \n                            <image id="icon-').concat(e.id,'" xlink:href="').concat(i,'" style="width:100%;"/>    \n                        </svg>\n                    </div>\n                </div>\n            </div>\n            ')),s=a.firstChild;return s&&s.addEventListener("click",function(r){t.onImageTerritoriesClick(r,e.id)}),a.firstChild}}};function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,F(n.key),n)}}function F(e){var t=function(e,t){if("object"!=B(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=B(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==B(t)?t:t+""}function z(e,t){if(t&&("object"==B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function H(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(H=function(){return!!e})()}function Z(){return Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},Z.apply(null,arguments)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function W(e,t){return W=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},W(e,t)}var J=j.getLogger("territories"),Q=function(e){function t(e){var r,n,i,o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,o=[e=e||{}],i=V(i=t),!((r=z(n,H()?Reflect.construct(i,o||[],V(n).constructor):i.apply(n,o)))instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return r.CLASSNAME="Territories",r.initialize(e),r.container=r.initContainer(),r.element?r.element.appendChild(r.container):r.element=r.container,z(r,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(t,e),r=t,n=[{key:"setMap",value:function(e){if(e){this.draggable&&D.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0);for(var r=this.auto?R:this.options.territories,n=0;n<r.length;n++){var i=r[n];this.setTerritory(i)}}var o,a,s,l,c;(o=t,a="setMap",s=this,c=Z(V(1&(l=3)?o.prototype:o),a,s),2&l&&"function"==typeof c?function(e){return c.apply(s,e)}:c)([e]),this.options.position&&this.setPosition(this.options.position),!1===this.options.gutter&&this.getContainer().classList.add("gpf-button-no-gutter")}},{key:"setTerritory",value:function(e){var t=this.territories.some(function(t){return t.data.id===e.id});if(e&&!t){var r=this._createTerritoryEntry(e);if(r)return this.panelTerritoriesEntriesContainer.appendChild(r),this.territories.push({data:e,dom:r}),!0}return!1}},{key:"setTerritories",value:function(e){for(var t=0;t<e.length;t++){var r=e[t];this.setTerritory(r)}}},{key:"removeTerritory",value:function(e){var t=!1;if(e)for(var r=0;r<this.territories.length;r++)if(this.territories[r].data.id===e.data.id){this.territories[r].dom.remove(),this.territories.splice(r,1),t=!0;break}return t}},{key:"removeTerritories",value:function(){for(var e=0;e<this.territories.length;e++)this.territories[e].dom.remove();this.territories=[]}},{key:"setCollapse",value:function(e){void 0!==e?e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e):J.log("[ERROR] Territory:setCollapsed - missing collapsed parameter")}},{key:"setReduce",value:function(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}},{key:"getContainer",value:function(){return this.container}},{key:"initialize",value:function(e){this.uid=e.id||A.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,upload:{active:!1,title:"Ajouter un fichier de configuration",description:""},title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]};var t=S.assign(this.options.upload,e.upload);S.assign(this.options,e),S.assign(this.options.upload,t),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.append=!1,this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.containerTerritoriesOptions=null,this.panelTerritoriesEntriesContainer=null}},{key:"initContainer",value:function(){var e=this._createMainContainerElement(),t=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(t);var r=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();r.classList.add("tiles-direction"),r.classList.add("tiles-"+this.options.tiles);var n=this._createTerritoriesPanelDivElement();r.appendChild(n);var i=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(i.classList.add("tiles-direction"),i.classList.add("tiles-"+this.options.tiles),this.options.reduce&&i.classList.add("tiles-reduce"),this.options.thumbnail?i.classList.add("tiles-thumbnail"):i.classList.add("tiles-icon"),r.appendChild(i),this.options.panel){var o=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),a=this._createTerritoriesPanelIconElement();o.appendChild(a);var s=this._createTerritoriesPanelTitleElement(this.options.title);if(o.appendChild(s),this.options.upload&&this.options.upload.active){var l=this.containerTerritoriesOptions=this._createTerritoriesPanelOptionsElement(this.options.upload.title,this.options.upload.description);o.appendChild(l)}var c=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();o.appendChild(c),n.appendChild(o)}return e.appendChild(r),J.log(e),e}},{key:"closePanelUpLoad",value:function(){this.containerTerritoriesOptions.children[0].click()}},{key:"onShowTerritoriesClick",value:function(e){"true"===e.target.ariaPressed&&this.onPanelOpen(),J.trace(e),this.collapsed=!this.collapsed}},{key:"onCloseTerritoriesClick",value:function(e){J.trace(e)}},{key:"onImageTerritoriesClick",value:function(e,t){J.trace(e,t);var r=this.territories.find(function(e){return e.data.id===t});if(r){var n=r.data.zoom,i=r.data.bbox,o=r.data.point;if(i&&!i.length)return;if(!o&&!i)return;var a=this.getMap(),s=a.getView().getProjection().getCode();if(i){var l=(0,_.transformExtent)(i,"EPSG:4326",s);a.getView().fit(l,a.getSize())}if(o){var c=(0,_.transform)(o,"EPSG:4326",s);a.getView().setCenter(c)}n&&a.getView().setZoom(n),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:r})}}},{key:"onUploadFileClick",value:function(e){var t=e.target.files[0],r=e.target;if(t){var n=new FileReader,i=this;n.onerror=function(e){J.log("onerror")},n.onprogress=function(e){J.log("onprogress")},n.onloadstart=function(e){J.log("onloadstart")},n.onabort=function(e){J.log("onabort")},n.onloadend=function(e){J.log("onloadend : ",e)},n.onload=function(e){J.log("file content : ",e.target.result),i.closePanelUpLoad(r);var t=JSON.parse(e.target.result);i.append||i.removeTerritories(),i.setTerritories(t)},n.readAsText(t)}else J.warn("Missing file to upload !")}},{key:"onUploadToggleClick",value:function(e){this.append=e.target.checked}}],n&&G(r.prototype,n),i&&G(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(h);Object.assign(Q.prototype,U),Object.assign(Q.prototype,O);const K=Q;window.ol&&window.ol.control&&(window.ol.control.Territories=Q)})(),GpfExtOlTerritories=n.default})();
//# sourceMappingURL=GpfExtOlTerritories.js.map