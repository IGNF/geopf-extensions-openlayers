{"version":3,"file":"GpfExtOlElevationPath.js","mappings":"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","sources":["webpack://geoportal-extensions-openlayers/./node_modules/@xmldom/xmldom/lib/conventions.js","webpack://geoportal-extensions-openlayers/./node_modules/@xmldom/xmldom/lib/dom-parser.js","webpack://geoportal-extensions-openlayers/./node_modules/@xmldom/xmldom/lib/dom.js","webpack://geoportal-extensions-openlayers/./node_modules/@xmldom/xmldom/lib/entities.js","webpack://geoportal-extensions-openlayers/./node_modules/@xmldom/xmldom/lib/index.js","webpack://geoportal-extensions-openlayers/./node_modules/@xmldom/xmldom/lib/sax.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Control.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Export/ExportDOM.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Export/Export.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/Config.js","webpack://geoportal-extensions-openlayers/./node_modules/sortablejs/modular/sortable.esm.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/LayerSwitcher/LayerSwitcherDOM.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/LayerSwitcher/LayerSwitcher.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Utils/Interactions.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Utils/Markers.js","webpack://geoportal-extensions-openlayers/external assign \"ol.format.GPX\"","webpack://geoportal-extensions-openlayers/external assign \"ol.geom.MultiLineString\"","webpack://geoportal-extensions-openlayers/external assign \"ol.geom.LineString\"","webpack://geoportal-extensions-openlayers/./src/packages/Formats/GPX.js","webpack://geoportal-extensions-openlayers/./src/packages/Formats/GeoJSON.js","webpack://geoportal-extensions-openlayers/external assign \"ol.format.KML\"","webpack://geoportal-extensions-openlayers/./src/packages/Formats/KML.js","webpack://geoportal-extensions-openlayers/external assign \"ol.geom.Polygon\"","webpack://geoportal-extensions-openlayers/external assign \"ol.geom.MultiPolygon\"","webpack://geoportal-extensions-openlayers/./src/packages/Formats/Styling.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/ColorUtils.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/Helper.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/LoggerByDefault.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/Parser.js","webpack://geoportal-extensions-openlayers/./src/packages/Utils/SelectorID.js","webpack://geoportal-extensions-openlayers/./node_modules/es6-promise/dist/es6-promise.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Exceptions/ErrorService.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Formats/WPS.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Formats/XML.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Gp.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Protocols/JSONP.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Protocols/Protocol.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Protocols/XHR.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Alti.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Formats/AltiResponseReader.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestREST.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestWPS.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiElevationRequest.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiProfilRequest.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiRequest.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/AltiResponseFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/AltiResponse.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/Elevation.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/Measure.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/AutoComplete.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/AutoCompleteResponseFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/AutoCompleteResponse.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/SuggestedLocation.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/CommonService.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Config/Config.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Config/ConfigInterface.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/DefaultUrlService.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Formats/GeocodeResponseParser.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Geocode.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Request/GeocodeRequestFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Request/GeocodeRequestREST.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/GeocodeParamREST.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Response/GeocodeResponseFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodeResponse.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodedLocation.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/ReverseGeocode.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/ProcessIsoCurve.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/ProcessIsoCurveRequest.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/model/ProcessIsoCurveParam.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/ProcessIsoCurveResponseFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestREST.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Request/model/RouteParamREST.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Response/RouteResponseFactory.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteInstruction.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteResponse.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Route.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Services.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Utils/Helper.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Utils/LoggerByDefault.js","webpack://geoportal-extensions-openlayers/./node_modules/geoportal-access-lib/src/Utils/MessagesResources.js","webpack://geoportal-extensions-openlayers/./node_modules/loglevel/lib/loglevel.js","webpack://geoportal-extensions-openlayers/./node_modules/node-fetch/browser.js","webpack://geoportal-extensions-openlayers/external assign \"ol.Feature\"","webpack://geoportal-extensions-openlayers/external assign \"ol.Observable\"","webpack://geoportal-extensions-openlayers/external assign \"ol.Overlay\"","webpack://geoportal-extensions-openlayers/external assign \"ol.control.Control\"","webpack://geoportal-extensions-openlayers/external assign \"ol.extent\"","webpack://geoportal-extensions-openlayers/external assign \"ol.format.GeoJSON\"","webpack://geoportal-extensions-openlayers/external assign \"ol.interaction\"","webpack://geoportal-extensions-openlayers/external assign \"ol.layer.Vector\"","webpack://geoportal-extensions-openlayers/external assign \"ol.proj\"","webpack://geoportal-extensions-openlayers/external assign \"ol.source.Vector\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style.Circle\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style.Fill\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style.Icon\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style.Stroke\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style.Style\"","webpack://geoportal-extensions-openlayers/external assign \"ol.style.Text\"","webpack://geoportal-extensions-openlayers/external assign {\"commonjs2\":\"xmldom\",\"commonjs\":\"xmldom\",\"amd\":\"require\"}","webpack://geoportal-extensions-openlayers/webpack/bootstrap","webpack://geoportal-extensions-openlayers/webpack/runtime/compat get default export","webpack://geoportal-extensions-openlayers/webpack/runtime/define property getters","webpack://geoportal-extensions-openlayers/webpack/runtime/global","webpack://geoportal-extensions-openlayers/webpack/runtime/hasOwnProperty shorthand","webpack://geoportal-extensions-openlayers/external assign \"ol.geom\"","webpack://geoportal-extensions-openlayers/external assign \"ol.sphere\"","webpack://geoportal-extensions-openlayers/./src/packages/Controls/ToolBoxMeasure/MeasureToolBoxDOM.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/ToolBoxMeasure/MeasureToolBox.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/Measures/Measures.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/ElevationPath/ElevationPathDOM.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/ElevationPath/ProfileElevationPathDOM.js","webpack://geoportal-extensions-openlayers/./src/packages/Controls/ElevationPath/ElevationPath.js"],"sourcesContent":["'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n","var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n","var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list,'length',ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i] || null;\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES;\n","var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n","var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: sax\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n","import Control from \"ol/control/Control\";\n\nvar ControlExtended = class ControlExtended extends Control {\n\n    constructor (options) {\n        super(options);\n    }\n\n    setPosition (pos) {\n        var instance = new PositionFactory(this);\n        instance.set(pos);\n    }\n\n};\n\nexport default ControlExtended;\n\n/**\n * gestion des anchors\n */\nconst ANCHORS = [\n    \"top-left\",\n    \"top-right\",\n    \"bottom-left\",\n    \"bottom-right\"\n];\n\n/**\n * Position\n * @private\n */\nclass PositionFactory {\n\n    /**\n     * constructor\n     * @param {*} caller - ...\n     */\n    constructor (caller) {\n        this.caller = caller;\n\n        this.#createContainer(\"top-left\");\n        this.#createContainer(\"top-right\");\n        this.#createContainer(\"bottom-left\");\n        this.#createContainer(\"bottom-right\");\n\n        return this;\n    }\n\n    /**\n     * ...\n     * @param {*} name  - ...\n     * @returns {Boolean} ...\n     */\n    #existContainer (name) {\n        var div = document.getElementById(\"position-container-\" + name);\n        if (div) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * ...\n     * @param {*} name - ...\n     * @private\n     */\n    #createContainer (name) {\n        if (this.#existContainer(name)) {\n            return;\n        }\n        // INFO\n        // positionner les classes position-container-[left|right|top|bottom]\n        // ex. { position:relative; height:50px; width:100%; }\n        var div = document.createElement(\"div\");\n        div.id = \"position-container-\" + name;\n        div.className = \"position position-container-\" + name ;\n        \n        var container = this.caller.getMap().getOverlayContainerStopEvent();\n        container.appendChild(div);\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @todo fonctionnement  tester !\n     */\n    #setAnchor (pos) {\n        const position = (pos) => {\n            var element = document.getElementById(\"position-container-\" + pos);\n            return element.children.length;\n        };\n        const sizeW = (pos) => {\n            var element = document.getElementById(\"position-container-\" + pos);\n            var width = element.offsetWidth;\n            return width;\n        };\n        const sizeH = (pos) => {\n            var element = document.getElementById(\"position-container-\" + pos);\n            var height = element.offsetHeight;\n            return height;\n        };\n        const clear = (element) => {\n            element.style.top = \"unset\";\n            element.style.bottom = \"unset\";\n            element.style.left = \"unset\";\n            element.style.right = \"unset\";\n        };\n\n        // on supprime le style de positionnement (top, left...) \n        // car on souhaite une nouvelle position\n        clear(this.caller.element);\n        this.caller.element.style.position = \"unset\"; // div.GPwidget\n\n        // on recherche les panneaux (panel) :\n        // * panel de formulaire\n        // * panel de resultats\n        var panels = Array.from(this.caller.element.getElementsByClassName(\"GPpanel\"));\n        if (panels.length === 0) {\n            return;\n        }\n        panels.forEach((panel) => {\n            clear(panel);\n            \n            // on modifie le positionnement du menu (dialog ou div : panel) \n            // en fonction du bouton\n            // ex. bouton : bottom-left, menu : bottom:0px; left:50px\n            switch (pos.toLowerCase()) {\n                case \"top-left\":\n                    panel.style.top = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.left = sizeW(pos) + \"px\";\n                    break;\n                case \"bottom-left\":\n                    panel.style.bottom = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.left = sizeW(pos) + \"px\";\n                    break;\n                case \"top-right\":\n                    panel.style.top = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.right = sizeW(pos) + \"px\";\n                    break;\n                case \"bottom-right\":\n                    panel.style.bottom = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.right = sizeW(pos) + \"px\";\n                    break;\n                default:\n                    break;\n            }\n        });\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @public\n     */\n    set (pos) {\n        if (!ANCHORS.includes(pos.toLowerCase())) {\n            return;\n        }\n        // positionnement de l'element\n        this.#setAnchor(pos);\n\n        if (pos.includes(\"bottom\")) {\n            document.getElementById(\"position-container-\" + pos).prepend(this.caller.element);\n        } else {\n            document.getElementById(\"position-container-\" + pos).appendChild(this.caller.element);\n        }\n    }\n\n};","var ExportDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this.uid) ? id + \"-\" + this.uid : id;\n        return uid;\n    }\n};\n\nexport default ExportDOM;\n","// import CSS\nimport \"../../CSS/Controls/Export/GPFexport.css\";\n// import \"../../CSS/Controls/Export/GPFexportStyle.css\";\n\n// import OpenLayers\nimport Control from \"ol/control/Control\";\n\n// import local\nimport ID from \"../../Utils/SelectorID\";\nimport Logger from \"../../Utils/LoggerByDefault\";\n\n// import local with ol dependencies\nimport KMLExtended from \"../../Formats/KML\";\nimport GeoJSONExtended from \"../../Formats/GeoJSON\";\nimport GPXExtended from \"../../Formats/GPX\";\n\n// DOM\nimport ExportDOM from \"./ExportDOM\";\n\nvar logger = Logger.getLogger(\"export\");\n\n/**\n * @classdesc\n *\n * Export button\n *\n * @constructor\n * @alias ol.control.Export\n * @param {Object} options - options for function call.\n * @param {String} [options.format = \"geojson\"] - geojson / kml / gpx\n * @param {String} [options.name = \"export\"] - export name\n * @param {String} [options.title = \"Exporter\"] - button name\n * @param {Boolean} [options.menu = false] - displays the format choice menu\n * @param {Function} [options.onExport] - callback\n * @param {DOMElement} [options.target] - target\n * @param {Object} options.control - instance of control\n * @fires export:compute\n * @example\n * // pluggued widget Export into control Isocurve\n * var iso = new ol.control.Isocurve();\n * map.addControl(iso);\n *\n * // method : call render()\n * var export = new ButtonExport();\n * export.setControl(iso);\n * export.setTarget(<!-- DOMElement -->);\n * export.setName(\"export\");\n * export.setFormat(\"geojson\");\n * export.setTitle(\"Exporter\");\n * export.setMenu(false);\n * export.render(); // <-- direct call to render function !\n * export.on(\"export:compute\", (data) => { console.log(data); });\n *\n * // method : call map.addControl()\n * var export = new ButtonExport();\n * export.setControl(iso);\n * export.setTarget(<!-- DOMElement -->);\n * export.setName(\"export\");\n * export.setFormat(\"geojson\");\n * export.setTitle(\"Exporter\");\n * export.setMenu(false);\n * export.on(\"export:compute\", (data) => { console.log(data); });\n * map.addControl(export); // <-- using the OpenLayers mechanism, don't call to render function !\n *\n * // use control options instead of setters\n * var export = new ButtonExport({\n *   control : iso,\n *   target : <!-- DOMElement -->,\n *   name : \"export\",\n *   format : \"geojson\",\n *   title : \"Exporter\",\n *   menu : false\n * });\n * map.addControl(export);\n *\n * // method with passing option into the control Isocurve\n * var iso = new ol.control.Isocurve({ export : true });\n * // with control options :\n * var iso = new ol.control.Isocurve({ export : {\n *   name : \"export\",\n *   format : \"geojson\",\n *   title : \"Exporter\",\n *   menu : false\n * }});\n */\nclass ButtonExport extends Control {\n\n    /**\n     * See {@link ol.control.Export}\n     * @module ButtonExport\n     * @alias module:~controls/ButtonExport\n     * @param {Object} [options] - options\n     * @example\n     * import ButtonExport from \"gpf-ext-ol/controls/ButtonExport\"\n     * ou \n     * import { ButtonExport } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        options = options || {\n            control : null,\n            target : null,\n            format : \"geojson\",\n            name : \"export\",\n            title : \"Exporter\",\n            menu : false,\n            onExport : null\n        };\n\n        logger.trace(\"[constructor] Export\", options);\n\n        super({\n            element : document.createElement(\"div\"),\n            render : options.render,\n            target : options.target\n        });\n\n        if (!(this instanceof ButtonExport)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        /**\n         * Response to the export of the route calculation\n         * (only for jsdoc)\n         *\n         * @example\n         * // GeoJSON format\n         * {\n         *   \"type\":\"FeatureCollection\",\n         *   \"features\":[...],\n         *   \"geoportail:compute\":{\n         *     \"points\":[ [2.588024210134887, 48.84192678293002 ] ],\n         *     \"transport\":\"Voiture\",\n         *     \"exclusions\":[...],\n         *     \"computation\":\"fastest\",\n         *     \"results\":{ <!-- Service --> }\n         * }\n         *\n         * @see {@link https://ignf.github.io/geoportal-access-lib/latest/jsdoc/Gp.Services.RouteResponse.html|Service}\n         */\n        // eslint-disable-next-line no-undef\n        this.EXPORT_ROUTE = {};\n\n        /**\n         * Response to the export of the isochron calculation\n         * (only for jsdoc)\n         *\n         * @example\n         * // GeoJSON format\n         * {\n         *    \"type\":\"FeatureCollection\",\n         *    \"features\":[...],\n         *    \"geoportail:compute\":{\n         *       \"transport\":\"Pieton\",\n         *       \"computation\":\"time\",\n         *       \"exclusions\":[\n         *\n         *       ],\n         *       \"direction\":\"departure\",\n         *       \"point\":[ 2.587835382718464, 48.84192678293002 ],\n         *       \"results\":{\n         *          \"message\":\"\",\n         *          \"id\":\"\",\n         *          \"location\":{\n         *             \"x\":\"2.587835382718464\",\n         *             \"y\":\"48.84192678293002\"\n         *          },\n         *          \"srs\":\"EPSG:4326\",\n         *          \"geometry\":{\n         *             \"type\":\"Polygon\",\n         *             \"coordinates\":[[...]]\n         *          },\n         *         \"time\":180,\n         *         \"distance\":\"\"\n         *      }\n         *    }\n         * }\n         *\n         * @see {@link https://ignf.github.io/geoportal-access-lib/latest/jsdoc/Gp.Services.IsoCurveResponse.html|Service}\n         */\n        // eslint-disable-next-line no-undef\n        this.EXPORT_ISOCHRON = {};\n\n        /**\n         * Response to the export of the profile calculation\n         * (only for jsdoc)\n         *\n         * @example\n         * // GeoJSON format\n         * {\n         *  \"type\":\"FeatureCollection\",\n         *   \"features\":[...],\n         *   \"geoportail:compute\":{\n         *      \"greaterSlope\":76,\n         *      \"meanSlope\":7,\n         *      \"distancePlus\":84,\n         *      \"distanceMinus\":48,\n         *      \"ascendingElevation\":5,\n         *      \"descendingElevation\":-4,\n         *      \"altMin\":\"92,04\",\n         *      \"altMax\":\"96,71\",\n         *      \"distance\":163,\n         *      \"unit\":\"m\",\n         *      \"points\":[\n         *        {\n         *            \"z\":95.68,\n         *            \"lon\":2.5874,\n         *            \"lat\":48.8419,\n         *            \"acc\":2.5,\n         *            \"dist\":0,\n         *            \"slope\":0\n         *         }\n         *      ]\n         *   }\n         * }\n         *\n         * @see {@link https://ignf.github.io/geoportal-access-lib/latest/jsdoc/Gp.Services.AltiResponse.html|Service}\n         */\n        // eslint-disable-next-line no-undef\n        this.EXPORT_PROFILE = {};\n\n        // id unique\n        this.uid = options.id || ID.generate();\n\n        // export\n        this.extension = null;\n        this.mimeType = null;\n\n        // dom\n        this.container = null;\n        this.button = null;\n        this.menu = null;\n        this.icon = \"\\u2630 \";\n        this.menuClassHidden = \"GPelementHidden gpf-hidden\";\n\n        this.initOptions(options);\n        this.initContainer();\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n\n    /**\n     * Render DOM\n     *\n     * @public\n     */\n    render () {\n        // container principal\n        if (!this.options.target) {\n            if (this.options.control) {\n                // insertion du composant dans le panneau du controle\n                var container = this.options.control.getContainer();\n                // ex. GP(iso|route)Panel-\n                this.options.target = container.lastChild;\n            }\n        }\n        if (this.container) {\n            this.options.target.appendChild(this.container);\n        }\n    }\n\n    // ################################################################### //\n    // #################### privates methods ############################# //\n    // ################################################################### //\n\n    /**\n     * Initialize options\n     * (called by constructor)\n     *\n     * @param {Object} options - options\n     * @private\n     */\n    initOptions (options) {\n        // options\n        this.options = options;\n\n        if (this.options.control) {\n            // ...\n        }\n\n        if (this.options.target) {\n            // ...\n        }\n\n        var format = this.options.format;\n        (format) ? this.setFormat(format) : this.setFormat(\"\");\n\n        if (!this.options.name) {\n            this.setName(\"export\");\n        }\n\n        if (!this.options.title) {\n            this.setTitle(\"Exporter\");\n        }\n\n        if (this.options.menu === undefined) {\n            this.setMenu(false);\n        }\n    }\n\n    /**\n     * Initialize container\n     * (called by constructor)\n     *\n     * @private\n     * @todo menu des options\n     */\n    initContainer () {\n        // TODO\n        // menu des options de l'export :\n        // * [ nom ]\n        // * format\n        // https://www.w3schools.com/howto/howto_css_dropdown.asp\n        // https://www.w3schools.com/howto/howto_css_custom_checkbox.asp\n\n        // afficher l'icone du menu\n        var title = this.options.title;\n        if (this.options.menu) {\n            title = this.icon + this.options.title;\n        }\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPexportContainer\");\n        div.className = \"GPexportMenuContainer\";\n\n        // bouton Exporter\n        // utiliser les templates literals avec la substitution ${...}\n        var button = this.stringToHTML(`\n            <input type=\"button\"\n                id=\"${this._addUID(\"GPexportButton\")}\" \n                class=\"GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn\"\n                value=\"${title}\">\n        `);\n\n        // add event click button\n        this.button = button.firstChild;\n        if (this.button) {\n            this.button.addEventListener(\"click\", (e) => this.onClickButtonExport(e));\n        }\n        div.appendChild(button.firstChild);\n\n        // menu des options\n        // utiliser les templates literals avec la substitution ${...}\n        var menu = this.stringToHTML(`\n            <div class=\"GPexportMenuContent ${this.menuClassHidden}\">\n                <label class=\"container\">GeoJSON\n                    <input type=\"radio\" \n                        id=\"GPmenuFormatGeojson-${this.uid}\"\n                        name=\"format\" \n                        value=\"geojson\">\n                    <span class=\"checkmark\"></span>\n                </label>\n                <label class=\"container\">KML\n                    <input type=\"radio\" \n                        id=\"GPmenuFormatKml-${this.uid}\"\n                        name=\"format\" \n                        value=\"kml\">\n                    <span class=\"checkmark\"></span>\n                </label>\n                <label class=\"container\">GPX\n                    <input type=\"radio\" \n                        id=\"GPmenuFormatGpx-${this.uid}\"\n                        name=\"format\" \n                        value=\"gpx\">\n                    <span class=\"checkmark\"></span>\n                </label>\n            </div>\n        `);\n\n        this.menu = menu.firstChild;\n        if (this.menu) {\n            if (this.options.menu) {\n                var className = this.menu.className;\n                this.menu.className = className.replace(this.menuClassHidden, \"\");\n            }\n            var radios = this.menu.querySelectorAll(`input[type=radio][name=\"format\"]`);\n            radios.forEach((radio) => {\n                // radio checked par defaut\n                if (radio.id.toUpperCase().includes(this.options.format.toUpperCase())) {\n                    radio.checked = true;\n                }\n                // ecouteur pour changer de format\n                radio.addEventListener(\"change\", (e) => {\n                    this.setFormat(e.target.value);\n                });\n            });\n        }\n        div.appendChild(menu.firstChild);\n\n        this.container = div;\n    }\n\n    /**\n     * ...\n     *\n     * @param {String} str - ...\n     * @returns {DOMElement} - ...\n     * @private\n     */\n    stringToHTML (str) {\n        var support = function () {\n            if (!window.DOMParser) {\n                return false;\n            }\n            var parser = new DOMParser();\n            try {\n                parser.parseFromString(\"x\", \"text/html\");\n            } catch (err) {\n                return false;\n            }\n            return true;\n        };\n\n        // If DOMParser is supported, use it\n        if (support()) {\n            var parser = new DOMParser();\n            var doc = parser.parseFromString(str, \"text/html\");\n            return doc.body;\n        }\n\n        // Otherwise, fallback to old-school method\n        var dom = document.createElement(\"div\");\n        dom.innerHTML = str;\n        return dom;\n    }\n\n    /**\n     * ...\n     * @returns {Boolean} - ...\n     * @private\n     */\n    isPluggableControl () {\n        // tester toutes les mthodes des widgets pluggable\n        // la mthode getData() n'est pas obligatoire car certains widgets\n        // n'ont pas de configuration.\n        if (this.options.control &&\n            typeof this.options.control.getContainer === \"function\" &&\n            typeof this.options.control.getLayer === \"function\") {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * ...\n     * @param {Object} layer - ...\n     * @param {Object} [data] - ...\n     * @param {Object} [style] - ...\n     * @returns {String} - ...\n     * @private\n     */\n    exportFeatures (layer, data, style) {\n        var result = null;\n        if (!layer) {\n            logger.warn(\"Impossible to export : no layer is hosting features.\");\n            return result;\n        }\n        if (!layer.getSource() ||\n            !layer.getSource().getFeatures() ||\n            !layer.getSource().getFeatures().length) {\n            logger.warn(\"Impossible to export : no features found.\");\n            return result;\n        }\n\n        // INFO\n        // les styles sont bien transmis pour l'outil de dessin\n        // mais, ce n'est pas toujours le cas pour certains widgets !?\n        // donc, on y ajoute les styles par defaut...\n        layer.getSource().getFeatures().forEach((feature) => {\n            var style = feature.getStyle();\n            if (!style && typeof this.options.control.getStyle === \"function\") {\n                feature.setStyle(this.options.control.getStyle());\n            }\n        });\n\n        // ajouter les metadonnes de calcul et de configuration\n        var options = {\n            defaultStyle : style\n        };\n        if (data) {\n            // properties ajoutes  la racine :\n            // ex. \"geoportail:compute\" : {}\n            options.extensions = {\n                \"geoportail:compute\" : data\n            };\n        }\n\n        var ClassName = null;\n        switch (this.options.format.toUpperCase()) {\n            case \"KML\":\n                options.writeStyles = true;\n                options.showPointNames = true;\n                ClassName = new KMLExtended(options);\n                break;\n            case \"GPX\":\n                ClassName = new GPXExtended(options);\n                break;\n            case \"GEOJSON\":\n                ClassName = new GeoJSONExtended(options);\n                break;\n            default:\n                break;\n        }\n\n        if (!ClassName) {\n            logger.warn(\"Impossible to export : format unknown !?\");\n            return result;\n        }\n\n        var featProj = layer.getSource().getProjection();\n\n        // INFO\n        // on determine la projection de la carte\n        // si le composant a t ajout sur la carte via le mcanisme d'OpenLayer...\n        var map = this.getMap();\n        if (map) {\n            featProj = featProj || map.getView().getProjection();\n        }\n\n        var features = layer.getSource().getFeatures();\n\n        // INFO\n        // par defaut, webmercator ou \"EPSG:3857\"\n        result = ClassName.writeFeatures(features, {\n            dataProjection : \"EPSG:4326\",\n            featureProjection : featProj || \"EPSG:3857\"\n        });\n\n        return result;\n    }\n    // ################################################################### //\n    // ######################## event dom ################################ //\n    // ################################################################### //\n\n    /**\n     * ...\n     * @param {*} e - Click\n     */\n    onClickButtonExport (e) {\n        if (!this.isPluggableControl()) {\n            logger.warn(\"Componant not pluggable with the control !\");\n            return;\n        }\n\n        var layer = this.options.control.getLayer();\n        var data = (this.options.control.getData !== undefined) ? this.options.control.getData() : {};\n        var style = (this.options.control.getStyle !== undefined) ? this.options.control.getStyle() : {};\n\n        var content = this.exportFeatures(layer, data, style);\n        if (!content || content === \"null\") {\n            return;\n        }\n\n        /**\n         * event triggered when the export is finished\n         *\n         * @event export:compute\n         * @typedef {Object}\n         * @property {Object} type - event\n         * @property {Object} target - instance Export\n         * @property {String} content - export data\n         * @example\n         * Export.on(\"export:compute\", function (e) {\n         *   console.log(e.target);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"export:compute\",\n            content : content\n        });\n\n        // INFO\n        // la callback annule le download du fichier.\n        if (this.options.onExport && typeof this.options.onExport === \"function\") {\n            this.options.onExport(content);\n            return;\n        }\n\n        var link = document.createElement(\"a\");\n        // determiner le bon charset !\n        var charset = \"utf-8\";\n        link.setAttribute(\"href\", \"data:\" + this.mimeType + \";charset=\" + charset + \",\" + encodeURIComponent(content));\n        link.setAttribute(\"download\", this.options.name + this.extension);\n        if (document.createEvent) {\n            var event = document.createEvent(\"MouseEvents\");\n            event.initEvent(\"click\", true, true);\n            link.dispatchEvent(event);\n        } else {\n            link.click();\n        }\n    }\n\n    // ################################################################### //\n    // ##################### public setters ############################## //\n    // ################################################################### //\n    /**\n     * ...\n     * @param {Object} control - ...\n     * @public\n     */\n    setControl (control) {\n        this.options.control = control;\n    }\n\n    /**\n     * ...\n     * @param {DOMElement} target - ...\n     * @public\n     */\n    setTarget (target) {\n        this.options.target = target;\n    }\n\n    /**\n     * ...\n     * @param {String} format - ...\n     * @public\n     */\n    setFormat (format) {\n        this.options.format = format.toUpperCase();\n        switch (this.options.format) {\n            case \"KML\":\n                this.extension = \".kml\";\n                this.mimeType = \"application/vnd.google-earth.kml+xml\";\n                break;\n            case \"GPX\":\n                this.extension = \".gpx\";\n                this.mimeType = \"application/gpx+xml\";\n                break;\n            case \"GEOJSON\":\n                this.extension = \".geojson\";\n                this.mimeType = \"application/geo+json\";\n                break;\n            default:\n                // redefine format by default !\n                this.options.format = \"GEOJSON\";\n                this.extension = \".geojson\";\n                this.mimeType = \"application/geo+json\";\n                break;\n        }\n    }\n\n    /**\n     * ...\n     * @param {String} name - ...\n     * @public\n     */\n    setName (name) {\n        this.options.name = name;\n    }\n\n    /**\n     * ...\n     * @param {String} title - ...\n     * @public\n     */\n    setTitle (title) {\n        this.options.title = title;\n        if (this.button) {\n            // afficher l'icone du menu / titre\n            this.button.value = (this.options.menu) ? this.icon + title : title;\n        }\n    }\n\n    /**\n     * ...\n     * @param {Boolean} active - ...\n     * @public\n     */\n    setMenu (active) {\n        this.options.menu = active;\n        if (this.button) {\n            // afficher l'icone du menu / titre\n            this.button.value = (this.options.menu) ? this.icon + this.options.title : this.options.title;\n        }\n        if (this.menu && this.options.menu) {\n            // afficher le menu\n            var className = this.menu.className;\n            this.menu.className = className.replace(this.menuClassHidden, \"\");\n            // format par defaut\n            var radios = this.menu.querySelectorAll(`input[type=radio][name=\"format\"]`);\n            radios.forEach((radio) => {\n                // radio checked par defaut\n                if (radio.id.toUpperCase().includes(this.options.format.toUpperCase())) {\n                    radio.checked = true;\n                }\n            });\n        }\n    }\n\n};\n\n// on rcupre les mthodes de la classe DOM\nObject.assign(ButtonExport.prototype, ExportDOM);\n\nexport default ButtonExport;\n\n// Expose Export as ol.control.Export (for a build bundle)\nif (window.ol && window.ol.control) {\n    window.ol.control.Export = ButtonExport;\n}\n","/**\n * @module Config\n * @alias module:~utils/Config\n * @private\n * @description\n * ...\n *\n * @example\n * isConfigLoaded();\n */\nvar Config = {\n\n    /**\n     * Config\n     *\n     * @public\n     * @type {Object}\n     */\n    configuration : {},\n\n    /**\n     * Check if the configuration is loaded\n     *\n     * @returns {Boolean} True if Config is loaded, false otherwise\n     */\n    isConfigLoaded : function () {\n        // config already loaded !\n        if (this.configuration && Object.keys(this.configuration).length !== 0) {\n            return true;\n        }\n        var scope = typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : typeof global !== \"undefined\" ? global : {};\n        if (scope.Gp && scope.Gp.Config && scope.Gp.Config.layers && Object.keys(scope.Gp.Config.layers).length !== 0) {\n            /** ts-syntax */ (this.configuration) = scope.Gp.Config;\n            return true;\n        }\n        return false;\n    }\n\n};\n\nexport default Config;\n","/**!\n * Sortable 1.15.2\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.2\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop);\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = parent.parentNode);\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\n\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","import Sortable from \"sortablejs\";\n\nvar LayerSwitcherDOM = {\n\n    /**\n     * Creation du drag and drop\n     *\n     * @param {Object} elementDraggable - Element HTML (DOM) Container\n     * @param {Object} context - this\n     */\n    _createDraggableElement : function (elementDraggable, context) {\n        // FIXME retirer cette dtection user-agent pour solution propre\n        // option forcefallback pour rparer sortable sous Chrome 97\n        // option forcefallback casse le layerswitcher du portail sous firefox\n        if (navigator.userAgent.match(/chrome|chromium|crios/i)) {\n            Sortable.create(elementDraggable, {\n                handle : \".GPlayerName\",\n                draggable : \".draggable-layer\",\n                ghostClass : \"GPghostLayer\",\n                animation : 200,\n                forceFallback : true,\n                // Call event function on drag and drop\n                onEnd : function (e) {\n                    // FIXME pas terrrible, mais il faut bien passer ce contexte...\n                    context._onEndDragAndDropLayerClick(e);\n                }\n            });\n        } else {\n            Sortable.create(elementDraggable, {\n                handle : \".GPlayerName\",\n                draggable : \".draggable-layer\",\n                ghostClass : \"GPghostLayer\",\n                animation : 200,\n                // Call event function on drag and drop\n                onEnd : function (e) {\n                    // FIXME pas terrrible, mais il faut bien passer ce contexte...\n                    context._onEndDragAndDropLayerClick(e);\n                }\n            });\n        }\n    },\n\n    // ################################################################### //\n    // ######################### Main container ########################## //\n    // ################################################################### //\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Creation du container principal (DOM)\n     *\n     * @returns {DOMElement} container - layer switcher DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPlayerSwitcher\");\n        container.className = \"GPwidget gpf-widget\"; // gpf-widget-button\n        return container;\n    },\n\n    /**\n     * Creation du container principal d\"affichage des layers (DOM)\n     *\n     * @returns {DOMElement} input - element for minimizing/maximizing the layer switcher\n     */\n    _createMainLayersShowElement : function () {\n        // <!-- Hidden checkbox for minimizing/maximizing -->\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPshowLayersList\");\n        input.type = \"checkbox\";\n        return input;\n    },\n\n    /**\n     * Creation du container principal des layers (DOM)\n     *\n     * @returns {DOMElement} container - layers list container\n     */\n    _createMainLayersElement : function () {\n        // ajout de la liste des layers dans le container principal\n        // <div id=\"GPlayersList\" class=\"GPpanel\">\n        //   (...)\n        // </div>\n        var dialog = document.createElement(\"dialog\");\n        dialog.id = this._addUID(\"GPlayersList\");\n        dialog.className = \"GPpanel gpf-panel fr-modal\";\n        return dialog;\n    },\n\n    _createMainLayersDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__body fr-modal__body\";\n        return div;\n    },\n\n    /**\n     * Creation du container du picto du controle (DOM)\n     *\n     * @returns {DOMElement} label\n     */\n    _createMainPictoElement : function () {\n        var self = this;\n\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPshowLayersListPicto\");\n        button.className = \"GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn\";\n        button.htmlFor = this._addUID(\"GPshowLayersList\");\n        button.title = \"Afficher/masquer le gestionnaire de couches\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                document.getElementById(self._addUID(\"GPshowLayersList\")).checked = status;\n                if (document.getElementById(self._addUID(\"GPshowLayersList\")).checked) {\n                    document.getElementById(self._addUID(\"GPlayerInfoPanel\")).classList.remove(\"GPlayerInfoPanelOpened\", \"gpf-visible\");\n                    document.getElementById(self._addUID(\"GPlayerInfoPanel\")).classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n                }\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                if (document.getElementById(self._addUID(\"GPshowLayersList\")).checked) {\n                    document.getElementById(self._addUID(\"GPlayerInfoPanel\")).classList.remove(\"GPlayerInfoPanelOpened\", \"gpf-visible\");\n                    document.getElementById(self._addUID(\"GPlayerInfoPanel\")).classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n                }\n            });\n        }\n\n        return button;\n    },\n\n    _createMainCounterLayersElement : function () {\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPlayerCounter\");\n        span.className = \"GPlayerCounter\";\n        span.innerHTML = \"0\";\n        return span;\n    },\n\n    /**\n     * Creation du container du panneau d\"information (DOM)\n     *\n     * @returns {DOMElement} container\n     */\n    _createMainInfoElement : function () {\n        // gestion du panneau d\"information dans le container principal\n        // <div id=\"GPlayerInfoPanel\" class=\"GPlayerInfoPanelClosed\">...</div>\n        var divP = document.createElement(\"div\");\n        divP.id = this._addUID(\"GPlayerInfoPanel\");\n        divP.className = \"GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal\";\n        return divP;\n    },\n\n    _createMainInfoDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__body fr-modal__body\";\n        return div;\n    },\n\n    // ################################################################### //\n    // ######################### Layer container ######################### //\n    // ################################################################### //\n\n    _createLayersPanelHeaderElement : function () {\n        var container = document.createElement(\"div\");\n        // FIXME on n'utilise pas le dsfr !\n        // container.className = \"GPpanelHeader gpf-panel__header fr-modal__header\";\n        container.className = \"GPpanelHeader gpf-panel__header_ls\";\n        return container;\n    },\n    _createLayersPanelIconElement : function () {\n        var label = document.createElement(\"label\");\n        label.className = \"GPpanelIcon gpf-btn-header gpf-btn-icon-layers\";\n        label.title = \"Couches de donnes\";\n        return label;\n    },\n    _createLayersPanelTitleElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPpanelTitle gpf-panel__title_ls\";\n        div.id = this._addUID(\"GPlayersHeaderTitle\");\n        div.innerHTML = \"Couches de donnes\";\n        return div;\n    },\n    _createLayersPanelCloseElement : function () {\n        // contexte\n        var self = this;\n\n        var btnClose = document.createElement(\"button\");\n        btnClose.id = this._addUID(\"GPlayersPanelClose\");\n        btnClose.className = \"GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        btnClose.title = \"Fermer le panneau\";\n\n        // Link panel close / visibility checkbox\n        if (btnClose.addEventListener) {\n            btnClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowLayersListPicto\")).click();\n            }, false);\n        } else if (btnClose.attachEvent) {\n            btnClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowLayersListPicto\")).click();\n            });\n        }\n\n        return btnClose;\n    },\n\n    /**\n     * Creation du container du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     * @param {Object} obj.layer - couche (ol ou leaflet)\n     * @param {String} obj.id - identifiant de la couche (pour ol ou leaflet)\n     * @param {String} obj.title - nom de la couche  afficher dans le controle\n     * @param {String} obj.description - description de la couche  afficher\n     * @param {Boolean} obj.visibility - visibilit de la couche dans la carte (true or false)\n     * @param {Float} obj.opacity - opacit de la couche\n     *\n     * @returns {DOMElement} container\n     */\n    _createContainerLayerElement : function (obj) {\n        // exemple :\n        // <div id=\"GPlayerSwitcher_ID_Layer1\" class=\"GPlayerSwitcher_layer outOfRange\">\n        //     <!-- Basic toolbar : visibility / layer name\n        //     _createBasicToolElement\n        //           _createBasicToolVisibilityElement\n        //           _createBasicToolNameElement\n        //     -->\n        //     <!-- Hidden checkbox + label for showing advanced toolbar\n        //     _createAdvancedToolShowElement\n        //     -->\n        //     <!-- Advanced toolbar : layer info / opacity slider / opacity value / removal\n        //     _createAdvancedToolElement\n        //           _createAdvancedToolDeleteElement\n        //           _createAdvancedToolInformationElement\n        //           _createAdvancedToolOpacityElement\n        //     -->\n        // </div>\n\n        // <!-- Layer entry in layer list -->\n        // <!-- Every item is marked with layerID, which is defined at layer import -->\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPlayerSwitcher_ID_\" + obj.id);\n        container.className = \"GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer\";\n\n        // ajout des outils basiques (visibility / layer name)\n        container.appendChild(this._createBasicToolElement(obj));\n        \n        // ajout bouton des outils avancs\n        container.appendChild(this._createAdvancedToolShowElement(obj));\n\n        // liste des outils avancs (layer info / opacity slider / opacity value / removal)\n        container.appendChild(this._createAdvancedToolElement(obj));\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ############################ Layer tool ########################### //\n    // ################################################################### //\n\n    /**\n     * Creation du container des outils basiques du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createBasicToolElement : function (obj) {\n        // exemple :\n        // <div id=\"GPbasicTools_ID_1\" class=\"GPlayerBasicTools\">\n        //      <!-- _createBasicToolVisibilityElement -->\n        //      <!-- _createBasicToolNameElement -->\n        // </div>\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPbasicTools_ID_\" + obj.id);\n        div.className = \"GPlayerBasicTools\";\n\n        div.appendChild(this._createBasicToolNameElement(obj));\n        div.appendChild(this._createBasicToolVisibilityElement(obj));\n        div.appendChild(this._createBasicToolDragNDropElement(obj));\n\n        return div;\n    },\n\n    _createBasicToolDragNDropElement : function (obj) {\n        // INFO inactif en mode classique !\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPdragndropPicto_ID_\" + obj.id);\n        button.className = \"GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        button.title = \"Deplacer la couche\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", true);\n\n        var self = this;\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                self._onStartDragAndDropLayerClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                self._onStartDragAndDropLayerClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    /**\n     * Creation du nom du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createBasicToolNameElement : function (obj) {\n        // exemple :\n        // <span id=\"GPname_ID_Layer1\" class=\"GPlayerName\" title=\"Quartiers prioritaires de la ville\">Quartiers prioritaires de la ville</span>\n        var label = document.createElement(\"label\");\n        label.id = this._addUID(\"GPname_ID_\" + obj.id);\n        label.className = \"GPlayerName gpf-label fr-label\";\n        label.title = obj.description || obj.title;\n        label.innerHTML = obj.title;\n\n        return label;\n    },\n\n    /**\n     * Creation de l'icone de visibilit du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n\n     * @returns {DOMElement[]} array containing input and label elements\n     */\n    _createBasicToolVisibilityElement : function (obj) {\n        var visible = (typeof obj.visibility !== \"undefined\") ? obj.visibility : true;\n\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPvisibilityPicto_ID_\" + obj.id);\n        button.className = \"GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary\";\n        button.title = \"Afficher/masquer la couche\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", visible);\n        \n        var context = this;\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context._onVisibilityLayerClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context._onVisibilityLayerClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    /**\n     * Creation de l'affichage du menu des outils avancs du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement[]} array containing input and label elements\n     */\n    _createAdvancedToolShowElement : function (obj) {\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPshowAdvancedTools_ID_\" + obj.id);\n\n        button.className = \"GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary\";\n        button.title = \"Plus d'outils\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n\n        var self = this;\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                var element = document.getElementById(self._addUID(\"GPadvancedTools_ID_\" + obj.id));\n                if (status) {\n                    element.classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                    element.classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                } else {\n                    element.classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n                    element.classList.replace(\"gpf-hidden\", \"gpf-visible\");\n                }\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                element.classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                element.classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            });\n        }\n\n        return button;\n    },\n\n    /**\n     * Creation du container des outils avancs du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createAdvancedToolElement : function (obj) {\n        // exemple :\n        // <div id=\"GPadvancedTools_ID_Layer1\" class=\"GPlayerAdvancedTools\">\n        //     <!-- _createAdvancedToolDeleteElement -->\n        //     <!-- _createAdvancedToolInformationElement -->\n        //     <!-- _createAdvancedToolOpacityElement -->\n        // </div>\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPadvancedTools_ID_\" + obj.id);\n        container.className = \"GPelementHidden GPlayerAdvancedTools gpf-hidden\";\n\n        container.appendChild(this._createAdvancedToolDeleteElement(obj));\n\n        // si on n'a de l'informations  afficher, on met en place ce composant\n        if (obj.title && obj.description) {\n            container.appendChild(this._createAdvancedToolInformationElement(obj));\n        }\n        if (obj.type !== \"feature\") {\n            var array = this._createAdvancedToolOpacityElement(obj);\n            for (var i = 0; i < array.length; i++) {\n                container.appendChild(array[i]);\n            }\n        }\n\n        container.appendChild(this._createAdvancedToolExtentElement(obj));\n        return container;\n    },\n\n    /**\n     * Creation de l'icone de suppression du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createAdvancedToolDeleteElement : function (obj) {\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPremove_ID_\" + obj.id);\n        button.className = \"GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary\";\n        button.title = \"Supprimer la couche\";\n        button.layerId = obj.id;\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", true);\n        \n        var context = this;\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context._onDropLayerClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context._onDropLayerClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    /**\n     * Creation de l'icone d'information du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createAdvancedToolInformationElement : function (obj) {\n        // exemple :\n        // <div id=\"GPinfo_ID_Layer1\" class=\"GPlayerInfo\" title=\"Informations/lgende\" onclick=\"GPopenLayerInfo(this);\"></div>\n\n        var btnInfo = document.createElement(\"button\");\n        btnInfo.id = this._addUID(\"GPinfo_ID_\" + obj.id);\n        btnInfo.className = \"GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary\";\n        btnInfo.title = \"Informations/lgende\";\n        btnInfo.layerId = obj.id;\n        btnInfo.setAttribute(\"tabindex\", \"0\");\n        btnInfo.setAttribute(\"aria-pressed\", true);\n        // add event on click\n        var context = this;\n        if (btnInfo.addEventListener) {\n            btnInfo.addEventListener(\n                \"click\",\n                function (e) {\n                    var status = (e.target.ariaPressed === \"true\");\n                    e.target.setAttribute(\"aria-pressed\", !status);\n                    context._onOpenLayerInfoClick(e);\n                }\n            );\n        } else if (btnInfo.attachEvent) {\n            // internet explorer\n            btnInfo.attachEvent(\n                \"onclick\",\n                function (e) {\n                    var status = (e.target.ariaPressed === \"true\");\n                    e.target.setAttribute(\"aria-pressed\", !status);\n                    context._onOpenLayerInfoClick(e);\n                }\n            );\n        }\n\n        return btnInfo;\n    },\n\n    /**\n     * Creation de l'icone de gestion de l'opacit du layer (DOM)\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement[]} array of two containers\n     */\n    _createAdvancedToolOpacityElement : function (obj) {\n        // exemple :\n        // <div id=\"GPopacity_ID_Layer1\" class=\"GPlayerOpacity\" title=\"Opacit\">\n        //   <input id=\"GPopacityRange_ID_Layer1\" type=\"range\" value=\"100\" oninput=\"GPchangeLayerOpacity(this);\" onchange=\"GPchangeLayerOpacity(this);\">\n        // </div>\n        // <div class=\"GPlayerOpacityValue\" id=\"GPopacityValueDiv_ID_Layer1\">\n        //   <span id=\"GPopacityValue_ID_Layer1\">100</span>\n        //   %\n        // </div>\n\n        var list = [];\n\n        // curseur pour changer l'opacit\n        var divO = document.createElement(\"div\");\n        divO.id = this._addUID(\"GPopacity_ID_\" + obj.id);\n        divO.className = \"GPlayerOpacity fr-range fr-range--sm\";\n        divO.title = \"Opacit\";\n\n        var opacity = (typeof obj.opacity !== \"undefined\") ? obj.opacity : 1;\n        opacity = Math.round(opacity * 100);\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPopacityValueDiv_ID_\" + obj.id);\n        input.type = \"range\";\n        input.value = opacity;\n        input.ariaLabel = \"Opacit\";\n\n        // add event for opacity change\n        var context = this;\n        if (input.addEventListener) {\n            input.addEventListener(\n                \"change\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        } else if (input.attachEvent) {\n            // internet explorer\n            input.attachEvent(\n                \"onchange\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        }\n\n        if (input.addEventListener) {\n            input.addEventListener(\n                \"input\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        } else if (input.attachEvent) {\n            // internet explorer\n            input.attachEvent(\n                \"oninput\",\n                function (e) {\n                    context._onChangeLayerOpacity(e);\n                }\n            );\n        }\n\n        divO.appendChild(input);\n\n        // Valeur d'opacit\n        var divC = document.createElement(\"div\");\n        divC.id = this._addUID(\"GPopacityValueDiv_ID_\" + obj.id);\n        divC.className = \"GPlayerOpacityValue\";\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPopacityValue_ID_\" + obj.id);\n        span.className = \"fr-range__output gpf-visible\";\n        span.innerHTML = opacity + \"%\";\n\n        divC.appendChild(span);\n\n        list.push(divO);\n        list.push(divC);\n\n        return list;\n    },\n\n    _createAdvancedToolExtentElement : function (obj) {\n        // FIXME inactif en mode classique !\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPextent_ID_\" + obj.id);\n        button.className = \"GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary\";\n        button.title = \"Zoomer dans l'tendue\";\n        button.layerId = obj.id;\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", true);\n        \n        var context = this;\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context._onZoomToExtentClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context._onZoomToExtentClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    // ################################################################### //\n    // ############################ Layer info ########################### //\n    // ################################################################### //\n\n    /**\n     * Creation du container du layer info (DOM)\n     *\n     * TODO GPlayerInfoPopup : ???\n     * TODO GPlayerInfoLink  : mettre en forme les chelles !\n     *\n     * @param {Object} obj - options de la couche  ajouter dans le layer switcher\n     *\n     * @returns {DOMElement} container\n     */\n    _createContainerLayerInfoElement : function (obj) {\n        var container = document.createElement(\"div\");\n\n        var header = document.createElement(\"div\");\n        // FIXME on n'utilise pas le dsfr !\n        // container.className = \"GPpanelHeader gpf-panel__header fr-modal__header\";\n        header.className = \"gpf-panel__header_ls\";\n        container.appendChild(header);\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info\";\n        label.title = \"Informations\";\n        header.appendChild(label);\n\n        var title = document.createElement(\"div\");\n        title.id = this._addUID(\"GPlayerInfoTitle\");\n        title.innerHTML = obj.title;\n        title.className = \"gpf-panel__title_ls\";\n        header.appendChild(title);\n\n        var btnClose = document.createElement(\"button\");\n        btnClose.id = this._addUID(\"GPlayerInfoClose\");\n        btnClose.className = \"GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        btnClose.title = \"Fermer la fentre\";\n\n        var self = this;\n        /** Call event function on close click */\n        var onCloseClick = function () {\n            document.getElementById(self._addUID(\"GPlayerInfoPanel\")).classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n            document.getElementById(self._addUID(\"GPlayerInfoPanel\")).classList.remove(\"GPlayerInfoPanelOpened\", \"gpf-visible\");\n            document.getElementById(obj.id).classList.add(\"GPlayerInfoClosed\");\n            document.getElementById(obj.id).classList.remove(\"GPlayerInfoOpened\");\n        };\n        if (btnClose.addEventListener) {\n            btnClose.addEventListener(\"click\", onCloseClick);\n        } else if (btnClose.attachEvent) {\n            // internet explorer\n            btnClose.attachEvent(\"onclick\", onCloseClick);\n        }\n        header.appendChild(btnClose);\n        container.appendChild(header);\n\n        var content = document.createElement(\"div\");\n        content.id = this._addUID(\"GPlayerInfoContent\");\n        content.className = \"gpf-panel__content fr-modal__content\";\n        container.appendChild(content);\n\n        if (obj.quicklookUrl) {\n            var quick = document.createElement(\"div\");\n            quick.id = this._addUID(\"GPlayerInfoQuicklook\");\n            quick.title = \"Afficher un aperu de la couche\";\n            var refquick = document.createElement(\"a\");\n            refquick.href = obj.quicklookUrl;\n            refquick.appendChild(quick);\n            content.appendChild(refquick);\n        }\n\n        var desc = document.createElement(\"div\");\n        desc.id = this._addUID(\"GPlayerInfoDescription\");\n        desc.innerHTML = obj.description;\n        content.appendChild(desc);\n\n        if (obj.metadata) {\n            var mtd = document.createElement(\"div\");\n            mtd.id = this._addUID(\"GPlayerInfoMetadata\");\n\n            var mtdtitle = document.createElement(\"div\");\n            mtdtitle.className = \"GPlayerInfoSubtitle\";\n            mtdtitle.innerHTML = \"Mtadonnes\";\n            mtd.appendChild(mtdtitle);\n\n            for (var i = 0; i < obj.metadata.length; i++) {\n                var urlmtd = obj.metadata[i].url;\n\n                var mtdlink = document.createElement(\"div\");\n                mtdlink.className = \"GPlayerInfoLink\";\n\n                var refmtd = document.createElement(\"a\");\n                refmtd.href = urlmtd;\n                refmtd.innerHTML = urlmtd;\n                mtdlink.appendChild(refmtd);\n                mtd.appendChild(mtdlink);\n            }\n\n            if (obj.metadata.length !== 0) {\n                content.appendChild(mtd);\n            }\n        }\n\n        if (obj.legends) {\n            var lgd = document.createElement(\"div\");\n            lgd.id = this._addUID(\"GPlayerInfoLegend\");\n\n            var lgdtitle = document.createElement(\"div\");\n            lgdtitle.className = \"GPlayerInfoSubtitle\";\n            lgdtitle.innerHTML = \"Lgende\";\n            lgd.appendChild(lgdtitle);\n\n            var legends = {};\n            var maxScale = obj.maxScaleDenominator || 560000000;\n\n            // on cre un tableau temporaire pour ordonner les lgendes selon le dnominateur d'chelle\n            for (var k = 0; k < obj.legends.length; k++) {\n                var minScale = obj.legends[k].minScaleDenominator;\n                if (minScale) {\n                    var s = minScale.toString();\n                    minScale = Math.round(parseInt(s.substring(0, 3), 10) / 10) * Math.pow(10, s.length - 2);\n                } else {\n                    minScale = 270;\n                }\n                legends[minScale] = obj.legends[k];\n            }\n\n            for (var scale in legends) {\n                if (legends.hasOwnProperty(scale)) {\n                    var urllgd = legends[scale].url;\n                    // on n'affiche pas les lgendes pointant vers \"nolegend.jpg\"\n                    if (typeof urllgd === \"string\" && urllgd.toLowerCase().indexOf(\"nolegend.jpg\") === -1) {\n                        // TODO GPlayerInfoPopup\n                        var lgdlink = document.createElement(\"div\");\n                        lgdlink.className = \"GPlayerInfoLink\";\n\n                        maxScale = legends[scale].maxScaleDenominator || maxScale;\n\n                        var reflgd = document.createElement(\"a\");\n                        reflgd.href = urllgd;\n                        reflgd.innerHTML = \"Du 1/\" + scale + \" au 1/\" + maxScale;\n                        lgdlink.appendChild(reflgd);\n                        lgd.appendChild(lgdlink);\n                    } else {\n                        delete legends[scale];\n                    }\n                }\n            }\n\n            if (Object.keys(legends).length !== 0) {\n                content.appendChild(lgd);\n            }\n        }\n\n        return container;\n    }\n};\n\nexport default LayerSwitcherDOM;\n","// import CSS\nimport \"../../CSS/Controls/LayerSwitcher/GPFlayerSwitcher.css\";\n// import \"../../CSS/Controls/LayerSwitcher/GPFlayerSwitcherStyle.css\";\n// import OpenLayers\n// import Control from \"ol/control/Control\";\nimport Control from \"../Control\";\nimport { unByKey as olObservableUnByKey } from \"ol/Observable\";\nimport { intersects as olIntersects } from \"ol/extent\";\nimport {\n    transformExtent as olTransformExtentProj\n} from \"ol/proj\";\n// import local\nimport SelectorID from \"../../Utils/SelectorID\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Config from \"../../Utils/Config\";\n// DOM\nimport LayerSwitcherDOM from \"./LayerSwitcherDOM\";\n\nvar logger = Logger.getLogger(\"layerswitcher\");\n\n/**\n * @classdesc\n * OpenLayers Control to manage map layers : their order, visibility and opacity, and display their informations (title, description, legends, metadata...)\n *\n * @constructor\n * @extends {ol.control.Control}\n * @alias ol.control.LayerSwitcher\n * @type {ol.control.LayerSwitcher}\n * @param {Object} options - control options\n * @param {Array} [options.layers] - list of layers to be configured. Each array element is an object, with following properties :\n * @param {ol.layer.Layer} [options.layers.layer] - ol.layer.Layer layer to be configured (that has been added to map)\n * @param {Object} [options.layers.config] - custom configuration object for layer information (title, description, legends, metadata, quicklook url), with following properties :\n * @param {String} [options.layers.config.title] - layer alias, to be displayed in widget layer list. E.g. : \"Cartes IGN\"\n * @param {String} [options.layers.config.description] - layer description, to be displayed on title hover, or in layer information panel.\n * @param {String} [options.layers.config.quicklookUrl] - link to a quick look image for this layer.\n * @param {Array} [options.layers.config.legends] - array of layer legends. Each array element is an object, with following properties :\n *      - url (String, mandatory) : link to a legend\n *      - minScaleDenominator (Number, optional) : min scale denominator for legend validity.\n * @param {Array} [options.layers.config.metadata] - array of layer metadata. Each array element is an object, with property url (String, mandatory) : link to a metadata\n * @param {Object} [options.options] - ol.control.Control options (see {@link http://openlayers.org/en/latest/apidoc/ol.control.Control.html ol.control.Control})\n * @param {Boolean} [options.options.collapsed = true] - Specify if widget has to be collapsed (true) or not (false) on map loading. Default is true.\n * @param {Boolean} [options.options.panel = false] - Specify if widget has to have a panel header. Default is false.\n * @param {Boolean} [options.options.counter = false] - Specify if widget has to have a counter. Default is false.\n * @fires layerswitcher:add\n * @fires layerswitcher:remove\n * @fires layerswitcher:extent\n * @fires layerswitcher:change:opacity\n * @fires layerswitcher:change:visibility\n * @fires layerswitcher:start:dragndrop (todo)\n * @fires layerswitcher:end:dragndrop (todo)\n * @example\n * map.addControl(new ol.control.LayerSwitcher(\n *  [\n *      {\n *          layer : wms1,\n *          config : {\n *              title : \"test layer name 1\",\n *              description : \"test layer desc 1\",\n *          }\n *      }\n *  ],\n *  {\n *      collapsed : true,\n *      panel : false,\n *      counter : false,\n *      position : \"top-left\"\n *  }\n * ));\n * \n * LayerSwitcher.on(\"layerswitcher:add\", function (e) {\n *    console.warn(\"layer\", e.layer);\n * });\n * LayerSwitcher.on(\"layerswitcher:remove\", function (e) {\n *    console.warn(\"layer\", e.layer);\n * });\n * LayerSwitcher.on(\"layerswitcher:change:opacity\", function (e) {\n *    console.warn(\"layer\", e.layer, e.opacity);\n * });\n * LayerSwitcher.on(\"layerswitcher:change:visibility\", function (e) {\n *    console.warn(\"layer\", e.layer, e.visibility);\n * });\n */\nvar LayerSwitcher = class LayerSwitcher extends Control {\n\n    /**\n     * See {@link ol.control.LayerSwitcher}\n     * @module LayerSwitcher\n     * @alias module:~controls/LayerSwitcher\n     * @param {*} options - options\n     * @example\n     * import LayerSwitcher from \"gpf-ext-ol/controls/LayerSwitcher\"\n     * ou \n     * import { LayerSwitcher } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        options = options || {};\n        var _options = options.options || {};\n        var _layers = options.layers || [];\n\n        // call ol.control.Control constructor\n        super({\n            element : _options.element,\n            target : _options.target,\n            render : _options.render\n        });\n\n        if (!(this instanceof LayerSwitcher)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        if (!Array.isArray(_layers)) {\n            throw new Error(\"ERROR WRONG_TYPE : layers should be an array\");\n        }\n\n        if (typeof _options !== \"object\") {\n            throw new Error(\"ERROR WRONG_TYPE : options should be an object\");\n        }\n\n        this._initialize(_options, _layers);\n\n        this.container = this._initContainer(_options);\n\n        // ajout du container\n        (this.element) ? this.element.appendChild(this.container) : this.element = this.container;\n\n        return this;\n    }\n\n    // ################################################################### //\n    // ############## public methods (getters, setters) ################## //\n    // ################################################################### //\n\n    /**\n     * Overload setMap function, that enables to catch map events, such as movend events.\n     *\n     * @param {ol.Map} map - Map.\n     */\n    setMap (map) {\n        // info : cette mthode est appele (entre autres?) aprs un map.addControl() ou map.removeControl()\n\n        if (map) { // dans le cas de l'ajout du contrle  la map\n            // on ajoute les couches\n            this._addMapLayers(map);\n\n            // mode \"collapsed\"\n            if (!this.collapsed) {\n                this._showLayerSwitcherButton.setAttribute(\"aria-pressed\", true);\n            }\n\n            // At every map movement, layer switcher may be updated,\n            // according to layers on map, and their range.\n            this._listeners.onMoveListener = map.on(\n                \"moveend\",\n                () => this._onMapMoveEnd(map)\n            );\n\n            // add event listeners when a new layer is added to map, to add it in LayerSwitcher control (and DOM)\n            this._listeners.onAddListener = map.getLayers().on(\n                \"add\",\n                (evt) => {\n                    var layer = evt.element;\n                    var id;\n                    // on attribue un nouvel identifiant  cette couche,\n                    // sauf si c'est une couche qui a dj t ajoute dans le LayerSwitcher au pralable (si gpLayerId existe)\n                    if (!layer.hasOwnProperty(\"gpLayerId\")) {\n                        id = this._layerId;\n                        layer.gpLayerId = id;\n                        this._layerId++;\n                    } else {\n                        id = layer.gpLayerId;\n                    }\n                    if (!this._layers[id]) {\n                        this.addLayer(layer);\n                    }\n                }\n            );\n\n            // add event listeners when a layer is removed from map, to remove it from LayerSwitcher control (and DOM)\n            this._listeners.onRemoveListener = map.getLayers().on(\n                \"remove\",\n                (evt) => {\n                    var layer = evt.element;\n                    var id = layer.gpLayerId;\n                    if (this._layers[id]) {\n                        this.removeLayer(layer);\n                    }\n                }\n            );\n        } else {\n            // we are in a setMap(null) case\n            // we forget the listeners linked to the layerSwitcher\n            olObservableUnByKey(this._listeners.onMoveListener);\n            olObservableUnByKey(this._listeners.onAddListener);\n            olObservableUnByKey(this._listeners.onRemoveListener);\n\n            // we put all the layers at Zindex = 0, without changing the visual order\n            // in order that the next added layers are not hidden by layers with Zindex > 0\n            for (var i = this._layersOrder.length - 1; i >= 0; i--) {\n                this._layersOrder[i].layer.setZIndex(0);\n            }\n        }\n\n        // on appelle la mthode setMap originale d'OpenLayers\n        super.setMap(map);\n\n        // position\n        if (this.options.position) {\n            this.setPosition(this.options.position);\n        }\n    }\n\n    /**\n     * Add a new layer to control (when added to map) or add new layer configuration\n     *\n     * @param {ol.layer.Layer} layer - layer to add to layer switcher\n     * @param {Object} [config] - additional options for layer configuration\n     * @param {Object} [config.title] - layer title (default is layer identifier)\n     * @param {Object} [config.description] - layer description (default is null)\n     * @param {Object} [config.legends] - layer legends (default is an empty array)\n     * @param {Object} [config.metadata] - layer metadata (default is an empty array)\n     * @param {Object} [config.quicklookUrl] - layer quicklookUrl (default is null)\n     * @fires layerswitcher:add\n     * @example\n     *   layerSwitcher.addLayer(\n     *       gpParcels,\n     *       {\n     *           title : \"Parcelles cadastrales\",\n     *           description : \"description de la couche\",\n     *           quicklookUrl : \"http://quicklookUrl.fr\"\n     *       }\n     *   )\n     */\n    addLayer (layer, config) {\n        var map = this.getMap();\n        config = config || {};\n\n        if (!layer) {\n            logger.log(\"[ERROR] LayerSwitcher:addLayer - missing layer parameter\");\n            return;\n        }\n\n        var id = layer.gpLayerId;\n        if (typeof id === \"undefined\") {\n            logger.trace(\"[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)\", layer);\n            return;\n        }\n\n        // make sure layer is in map layers\n        var isLayerInMap = false;\n        map.getLayers().forEach(\n            (lyr) => {\n                if (lyr.gpLayerId === id) {\n                    isLayerInMap = true;\n                }\n            }\n        );\n        if (!isLayerInMap) {\n            logger.log(\"[ERROR] LayerSwitcher:addLayer - configuration cannot be set for \", layer, \" layer (layer is not in map.getLayers() )\");\n            return;\n        }\n\n        // if layer is not already in layers list, add it to control (layers list and container div)\n        if (!this._layers[id]) {\n            // 1. add layer to layers list\n            var layerInfos = this.getLayerInfo(layer) || {};\n            var opacity = layer.getOpacity();\n            var visibility = layer.getVisible();\n            var isInRange = this.isInRange(layer, map);\n            var layerOptions = {\n                layer : layer,\n                id : id,\n                name : layer.name, // only geoportal layers\n                service : layer.service, // only geoportal layers\n                opacity : opacity != null ? opacity : 1,\n                visibility : visibility != null ? visibility : true,\n                inRange : isInRange != null ? isInRange : true,\n                title : config.title != null ? config.title : (layerInfos._title || id),\n                description : config.description || layerInfos._description || null,\n                legends : config.legends || layerInfos._legends || [],\n                metadata : config.metadata || layerInfos._metadata || [],\n                quicklookUrl : config.quicklookUrl || layerInfos._quicklookUrl || null\n            };\n            this._layers[id] = layerOptions;\n\n            // 2. create layer div (to be added to control main container)\n            // Cration de la div correspondante  cette couche\n            var layerDiv = this._createLayerDiv(layerOptions);\n            // on stocke la div dans les options de la couche, pour une ventuelle rorganisation (setZIndex par ex)\n            this._layers[id].div = layerDiv;\n\n            // 3. rorganisation des couches si un zIndex est spcifi\n            // FIXME :\n            //  _forceNullzIndex !?\n            //  getZIndex() retourne undefined au lieu de 0 !?\n            if ((layer.getZIndex && layer.getZIndex() !== 0 && typeof layer.getZIndex() !== \"undefined\") || layer._forceNullzIndex) {\n                // rorganisation des couches si un zIndex est spcifi\n                this._updateLayersOrder();\n            } else {\n                // sinon on ajoute la couche au dessus des autres\n                this._layersOrder.unshift(layerOptions);\n                this._lastZIndex++;\n                layer.setZIndex(this._lastZIndex);\n                this._layerListContainer.insertBefore(layerDiv, \n                    (this.options.panel) ? \n                        this._layerListContainer.childNodes[1] : this._layerListContainer.firstChild);\n            }\n\n            // 3. Add listeners for opacity and visibility changes\n            this._listeners.updateLayerOpacity = layer.on(\n                \"change:opacity\",\n                (e) => this._updateLayerOpacity(e)\n            );\n            this._listeners.updateLayerVisibility = layer.on(\n                \"change:visible\",\n                (e) => this._updateLayerVisibility(e)\n            );\n\n            if (this._layers[id].onZIndexChangeEvent == null) {\n                this._layers[id].onZIndexChangeEvent = layer.on(\n                    \"change:zIndex\",\n                    () => this._updateLayersOrder()\n                );\n            }\n\n            // user may also add a new configuration for an already added layer\n        } else {\n            // add new configuration parameters to layer informations\n            for (var prop in config) {\n                if (config.hasOwnProperty(prop)) {\n                    this._layers[id][prop] = config[prop];\n                }\n            }\n            // set new title in layer div\n            if (config.title) {\n                var nameDiv = document.getElementById(this._addUID(\"GPname_ID_\" + id));\n                if (nameDiv) {\n                    nameDiv.innerHTML = config.title;\n                    nameDiv.title = config.description || config.title;\n                }\n            }\n            // add layer info picto if necessary\n            var infodiv = document.getElementById(this._addUID(\"GPinfo_ID_\" + id));\n            if (!document.getElementById(this._addUID(\"GPinfo_ID_\" + id)) && config.description) {\n                var advancedTools = document.getElementById(this._addUID(\"GPadvancedTools_ID_\" + id));\n                if (advancedTools) {\n                    advancedTools.appendChild(\n                        this._createAdvancedToolInformationElement({\n                            id : id\n                        })\n                    );\n                }\n            }\n            // close layer info element if open, to update information.\n            if (infodiv && infodiv.className === \"GPlayerInfoOpened\") {\n                document.getElementById(this._addUID(\"GPlayerInfoPanel\")).classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n                // infodiv.className = \"GPlayerInfo\";\n            }\n        }\n        // on met  jour le compteur\n        this._updateLayerCounter();\n        /**\n         * event triggered when a layer is added\n         *\n         * @event layerswitcher:add\n         * @property {Object} type - event\n         * @property {Object} layer - layer\n         * @property {Object} target - instance LayerSwitcher\n         * @example\n         * LayerSwitcher.on(\"layerswitcher:add\", function (e) {\n         *   console.log(e.layer);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"layerswitcher:add\",\n            layer : this._layers[id]\n        });\n    };\n\n    /**\n     * Remove a layer from control\n     *\n     * @param {ol.layer.Layer} layer - layer.\n     * @fires layerswitcher:remove\n     * @deprecated on the future version ...\n     */\n    removeLayer (layer) {\n        if (!layer) {\n            return;\n        }\n\n        olObservableUnByKey(this._listeners.updateLayerOpacity);\n        olObservableUnByKey(this._listeners.updateLayerVisibility);\n        // olObservableUnByKey(this._listeners.updateLayersOrder);\n\n        logger.trace(layer);\n\n        var layerID = layer.gpLayerId;\n        var layerList = document.getElementById(this._addUID(\"GPlayersList\")).firstChild;\n        // close layer info element if open.\n        var infodiv = document.getElementById(this._addUID(\"GPinfo_ID_\" + layerID));\n        if (infodiv && infodiv.className === \"GPlayerInfoOpened\") {\n            document.getElementById(this._addUID(\"GPlayerInfoPanel\")).classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n            // infodiv.className = \"GPlayerInfo\";\n        }\n        // remove layer div\n        var layerDiv = document.getElementById(this._addUID(\"GPlayerSwitcher_ID_\" + layerID));\n        if (layerDiv) {\n            layerList.removeChild(layerDiv);\n        }\n\n        var layerIndex = Math.abs(layer.getZIndex() - this._lastZIndex);\n        // on retire la couche de la liste ordonne des layers\n        this._layersOrder.splice(layerIndex, 1);\n        this._lastZIndex--;\n        // on met  jour les zindex des couches restantes\n        var layerOrderTemp = this._layersOrder;\n        for (var i = 0; i < layerOrderTemp.length; i++) {\n            layerOrderTemp[i].layer.setZIndex(this._lastZIndex - i);\n        }\n\n        /**\n         * event triggered when a layer is removed\n         *\n         * @event layerswitcher:add\n         * @property {Object} type - event\n         * @property {Object} layer - layer\n         * @property {Object} target - instance LayerSwitcher\n         * @example\n         * LayerSwitcher.on(\"layerswitcher:remove\", function (e) {\n         *   console.log(e.layer);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"layerswitcher:remove\",\n            layer : this._layers[layerID]\n        });\n\n        // on retire la couche de la liste des layers\n        delete this._layers[layerID];\n\n        // on met  jour le compteur\n        this._updateLayerCounter();\n    }\n\n    /**\n     * Collapse or display control main container\n     *\n     * @param {Boolean} collapsed - True to collapse control, False to display it\n     */\n    setCollapsed (collapsed) {\n        if (collapsed === undefined) {\n            logger.log(\"[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter\");\n            return;\n        }\n        var isCollapsed = !document.getElementById(this._addUID(\"GPshowLayersList\")).checked;\n        if ((collapsed && isCollapsed) || (!collapsed && !isCollapsed)) {\n            return;\n        }\n        // on simule l'ouverture du panneau aprs un click\n        if (!isCollapsed) {\n            // var layers = document.getElementsByClassName(\"GPlayerInfoOpened\");\n            // for (var i = 0; i < layers.length; i++) {\n            //     layers[i].className = \"GPlayerInfo\";\n            // }\n            document.getElementById(this._addUID(\"GPlayerInfoPanel\")).classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n        }\n        document.getElementById(this._addUID(\"GPshowLayersList\")).checked = !collapsed;\n    }\n\n    /**\n     * Returns true if widget is collapsed (minimize), false otherwise\n     * @returns {Boolean} is collapsed\n     */\n    getCollapsed () {\n        return this.collapsed;\n    }\n\n    /**\n     * Display or hide removeLayerPicto from layerSwitcher for this layer\n     *\n     * @param {ol.layer.Layer} layer - ol.layer to be configured\n     * @param {Boolean} removable - specify if layer can be remove from layerSwitcher (true) or not (false). Default is true\n     */\n    setRemovable (layer, removable) {\n        if (!layer) {\n            return;\n        }\n        var layerID = layer.gpLayerId;\n        if (layerID == null) { // on teste si layerID est null ou undefined\n            logger.log(\"[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method\");\n            return;\n        }\n        var removalDiv = document.getElementById(this._addUID(\"GPremove_ID_\" + layerID));\n        if (removalDiv) {\n            if (removable === false) {\n                removalDiv.style.display = \"none\";\n            } else if (removable === true) {\n                removalDiv.style.display = \"block\";\n            } else {\n\n            }\n        }\n    }\n\n    // ################################################################### //\n    // ##################### init component ############################## //\n    // ################################################################### //\n\n    /**\n     * Initialize LayerSwitcher control (called by constructor)\n     *\n     * @param {Object} options - ol.control.Control options (see {@link http://openlayers.org/en/latest/apidoc/ol.control.Control.html ol.control.Control})\n     * @param {Array} layers - list of layers to be configured. Each array element is an object, with following properties :\n     * @private\n     */\n    _initialize (options, layers) {\n        // identifiant du contrle : utile pour suffixer les identifiants CSS (pour grer le cas o il y en a plusieurs dans la mme page)\n        this._uid = SelectorID.generate();\n\n        this.options = options;\n        this.options.layers = layers;\n\n        // {Object} control layers list. Each key is a layer id, and its value is an object of layers options (layer, id, opacity, visibility, title, description...)\n        this._layers = {};\n        // [Array] array of ordered control layers\n        this._layersOrder = [];\n        // [Object] associative array of layers ordered by zindex (keys are zindex values, and corresponding values are arrays of layers at this zindex)\n        this._layersIndex = {};\n        // {Number} layers max z index, to order layers using their z index\n        this._lastZIndex = 0;\n        // {Number} layers max id, incremented when a new layer is added\n        this._layerId = 0;\n        /** {Boolean} true if widget is collapsed, false otherwise */\n        this.collapsed = (options.collapsed !== undefined) ? options.collapsed : true;\n        // div qui contiendra les div des listes.\n        this._layerListContainer = null;\n        // [Object] listeners added to the layerSwitcher saved here in order to delete them if we remove the control from the map)\n        this._listeners = {};\n\n        // add options layers to layerlist.\n        // (seulement les couches configures dans les options du layerSwitcher par l'utilisateur),\n        // les autres couches de la carte seront ajoutes dans la mthode setMap\n        for (var i = 0; i < layers.length; i++) {\n            // recup la layer, son id,\n            var layer = layers[i].layer;\n            if (layer) {\n                var id;\n                // si elles ont dj un identifiant (gpLayerId), on le rcupre, sinon on en cre un nouveau, en incrmentant this_layerId.\n                if (!layer.hasOwnProperty(\"gpLayerId\")) {\n                    id = this._layerId;\n                    layer.gpLayerId = id;\n                    this._layerId++;\n                } else {\n                    id = layer.gpLayerId;\n                }\n\n                // et les infos de la conf si elles existent (title, description, legends, quicklook, metadata)\n                var conf = layers[i].config || {};\n                var opacity = layer.getOpacity();\n                var visibility = layer.getVisible();\n                var layerOptions = {\n                    layer : layer, // la couche ol.layer concerne\n                    id : id,\n                    name : layer.name, // only geoportal layers\n                    service : layer.service, // only geoportal layers\n                    opacity : opacity != null ? opacity : 1,\n                    visibility : visibility != null ? visibility : true,\n                    title : conf.title != null ? conf.title : conf.id ? conf.id : id,\n                    description : conf.description || null,\n                    legends : conf.legends || [],\n                    metadata : conf.metadata || [],\n                    quicklookUrl : conf.quicklookUrl || null\n                };\n                this._layers[id] = layerOptions;\n            }\n        }\n    }\n\n    /**\n     * Create control main container (called by constructor)\n     *\n     * @returns {DOMElement} container - control container\n     * @private\n     */\n    _initContainer () {\n        // creation du container principal\n        var container = this._createMainContainerElement();\n\n        // ajout dans le container principal d'affichage des layers\n        var input = this._createMainLayersShowElement();\n        container.appendChild(input);\n\n        // gestion du mode \"collapsed\"\n        if (!this.collapsed) {\n            input.checked = \"checked\";\n            this.collapsed = false;\n        } else {\n            this.collapsed = true;\n        }\n\n        // on ajoute un couteur d'vnement sur le bouton (checkbox) de dpliement/repliement des couches,\n        // pour modifier la proprit this.collapsed quand on clique dessus\n        var context = this;\n        // event listener\n        var changeCollapsed = function (e) {\n            this.collapsed = !e.target.checked;\n            // on gnre nous mme l'evenement OpenLayers de changement de pt\n            // (utiliser layerSwitcher.on(\"change:collapsed\", function ) pour s'abonner  cet vnement)\n            this.dispatchEvent(\"change:collapsed\");\n        };\n        input.addEventListener(\n            \"click\",\n            function (e) {\n                changeCollapsed.call(context, e);\n            }\n        );\n\n        // ajout dans le container principal du picto du controle\n        var picto = this._showLayerSwitcherButton = this._createMainPictoElement();\n        container.appendChild(picto);\n\n        // ajout du compteur de couches\n        if (this.options.counter) {\n            var counter = this._layerSwitcherCounter =  this._createMainCounterLayersElement();\n            picto.appendChild(counter);\n        }\n\n        // ajout dans le container principal de la liste des layers\n        var divL = this._createMainLayersElement();\n        container.appendChild(divL);\n\n        var div = this._layerListContainer = this._createMainLayersDivElement();\n        divL.appendChild(div);\n\n        // header ?\n        if (this.options.panel) {\n            // header\n            var panelHeader = this._createLayersPanelHeaderElement();\n            div.appendChild(panelHeader);\n            // icon\n            var panelIcon = this._createLayersPanelIconElement();\n            panelHeader.appendChild(panelIcon);\n            // title\n            var panelTitle = this._createLayersPanelTitleElement();\n            panelHeader.appendChild(panelTitle);\n            // close picto\n            var panelClose = this._createLayersPanelCloseElement();\n            panelHeader.appendChild(panelClose);\n        }\n\n        // creation du mode draggable\n        this._createDraggableElement(div, this);\n\n        // ajout dans le container principal du panneau d'information\n        var divI = this._createMainInfoElement();\n        var divD = this._createMainInfoDivElement();\n        divI.appendChild(divD);\n        container.appendChild(divI);\n\n        return container;\n    }\n\n    /**\n     * Add all map layers to control main container\n     *\n     * @param {Object} map - ol.Map object, to which control is added\n     * @private\n     */\n    _addMapLayers (map) {\n        this._layersIndex = {};\n\n        // on parcourt toutes les couches de la carte, pour les ajouter  la liste du controle si ce n'est pas dj le cas.\n        // ide : le layerSwitcher doit reprsenter l'ensemble des couches de la carte.\n        map.getLayers().forEach((layer) => {\n            // ajout des couches de la carte  la liste\n            var id = null;\n            // si elles ont dj un identifiant (gpLayerId), on le rcupre, sinon on en cre un nouveau, en incrmentant this_layerId.\n            if (!layer.hasOwnProperty(\"gpLayerId\")) {\n                id = this._layerId;\n                layer.gpLayerId = id;\n                this._layerId++;\n            } else {\n                id = layer.gpLayerId;\n            }\n\n            var layerInfos = this.getLayerInfo(layer) || {};\n            if (!this._layers[id]) {\n                // si la couche n'est pas encore dans la liste des layers (this._layers), on l'ajoute\n                var opacity = layer.getOpacity();\n                var visibility = layer.getVisible();\n                var isInRange = this.isInRange(layer, map);\n                var layerOptions = {\n                    layer : layer,\n                    id : id,\n                    name : layer.name, // only geoportal layers\n                    service : layer.service, // only geoportal layers\n                    opacity : opacity != null ? opacity : 1,\n                    visibility : visibility != null ? visibility : true,\n                    inRange : isInRange != null ? isInRange : true,\n                    title : layerInfos._title || id,\n                    description : layerInfos._description || null,\n                    legends : layerInfos._legends || [],\n                    metadata : layerInfos._metadata || [],\n                    quicklookUrl : layerInfos._quicklookUrl || null\n                };\n                this._layers[id] = layerOptions;\n            } else {\n                // si elle existe dj, on met  jour ses informations (visibility, opacity, inRange)\n                this._layers[id].opacity = layer.getOpacity();\n                this._layers[id].visibility = layer.getVisible();\n                this._layers[id].inRange = this.isInRange(layer, map);\n            }\n            // on met  jour le compteur\n            this._updateLayerCounter();\n\n            // Ajout de listeners sur les changements d'opacit, visibilit\n            this._listeners.updateLayerOpacity = layer.on(\n                \"change:opacity\",\n                (e) => this._updateLayerOpacity(e)\n            );\n            this._listeners._updateLayerVisibility = layer.on(\n                \"change:visible\",\n                (e) => this._updateLayerVisibility(e)\n            );\n\n            // rcupration des zindex des couches s'ils existent, pour les ordonner.\n            if (layer.getZIndex !== undefined) {\n                var layerIndex = layer.getZIndex() || 0; // FIXME le zIndex peut tre undefined !? donc par defaut  0 !\n                if (!this._layersIndex[layerIndex] || !Array.isArray(this._layersIndex[layerIndex])) {\n                    this._layersIndex[layerIndex] = [];\n                }\n                this._layersIndex[layerIndex].push(this._layers[id]);\n            };\n        });\n\n        // on rcupre l'ordre d'affichage des couches entre elles dans la carte,  partir de zindex.\n        for (var zindex in this._layersIndex) {\n            if (this._layersIndex.hasOwnProperty(zindex)) {\n                var layers = this._layersIndex[zindex];\n                for (var l = 0; l < layers.length; l++) { //  ce stade layers[l] est une couche de this._layers.\n                    // on conserve l'ordre des couches : la premire est celle qui se situe tout en haut, et la dernire est le \"fond de carte\"\n                    this._layersOrder.unshift(layers[l]);\n                    // et on rordonne les couches avec des zindex, uniques.\n                    this._lastZIndex++;\n                    layers[l].layer.setZIndex(this._lastZIndex);\n                    if (this._layers[layers[l].layer.gpLayerId].onZIndexChangeEvent == null) {\n                        this._layers[layers[l].layer.gpLayerId].onZIndexChangeEvent = layers[l].layer.on(\n                            \"change:zIndex\",\n                            () => this._updateLayersOrder()\n                        );\n                    }\n                }\n            }\n        }\n\n        // on ajoute les div correspondantes aux diffrentes couches (dans l'ordre inverse d'affichage) dans le controle.\n        for (var j = 0; j < this._layersOrder.length; j++) {\n            var layerOptions = this._layersOrder[j];\n            var layerDiv = this._createLayerDiv(layerOptions);\n            this._layerListContainer.appendChild(layerDiv);\n            // on stocke la div dans les options de la couche, pour une ventuelle rorganisation (setZIndex par ex)\n            this._layers[layerOptions.id].div = layerDiv;\n        }\n    }\n\n    /**\n     * create layer div (to append to control DOM element).\n     *\n     * @param {Object} layerOptions - layer options (id, title, description, legends, metadata, quicklookUrl ...)\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _createLayerDiv (layerOptions) {\n        var isLegends = layerOptions.legends && layerOptions.legends.length !== 0;\n        var isMetadata = layerOptions.metadata && layerOptions.metadata.length !== 0;\n        var isQuicklookUrl = layerOptions.quicklookUrl;\n        // on n'affiche les informations que si elles sont renseignes (pour ne pas avoir un panneau vide)\n        if (isLegends || isMetadata || isQuicklookUrl) {\n            layerOptions.displayInformationElement = true;\n        }\n\n        // ajout d'une div pour cette layer dans le control\n        var layerDiv = this._createContainerLayerElement(layerOptions);\n\n        if (!layerOptions.inRange) {\n            layerDiv.classList.add(\"outOfRange\");\n        }\n\n        return layerDiv;\n    }\n\n    // ################################################################### //\n    // ######################### DOM events ############################## //\n    // ################################################################### //\n\n    /**\n     * update layer counter\n     */\n    _updateLayerCounter () {\n        if (this._layerSwitcherCounter) {\n            this._layerSwitcherCounter.innerHTML = Object.keys(this._layers).length;\n        }\n    }\n\n    /**\n     * Change layer opacity on layer opacity picto click\n     *\n     * @param {Object} e - event\n     * @private\n     */\n    _onChangeLayerOpacity (e) {\n        var divId = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerID = SelectorID.index(divId); // ex. 26\n        var layer = this._layers[layerID].layer;\n\n        var opacityValue = e.target.value;\n        var opacityId = document.getElementById(this._addUID(\"GPopacityValue_ID_\" + layerID));\n        opacityId.innerHTML = opacityValue + \"%\";\n\n        layer.setOpacity(opacityValue / 100);\n    }\n\n    /**\n     * Update picto opacity value on layer opacity change\n     *\n     * @param {Object} e - event\n     * @fires layerswitcher:change:opacity\n     * @private\n     */\n    _updateLayerOpacity (e) {\n        var opacity = e.target.getOpacity();\n        if (opacity > 1) {\n            opacity = 1;\n        }\n        if (opacity < 0) {\n            opacity = 0;\n        }\n        var id = e.target.gpLayerId;\n\n        var layerOpacityInput = document.getElementById(this._addUID(\"GPopacityValueDiv_ID_\" + id));\n        if (layerOpacityInput) {\n            layerOpacityInput.value = Math.round(opacity * 100);\n        }\n\n        var layerOpacitySpan = document.getElementById(this._addUID(\"GPopacityValue_ID_\" + id));\n        if (layerOpacitySpan) {\n            layerOpacitySpan.innerHTML = Math.round(opacity * 100) + \"%\";\n        }\n\n        /**\n         * event triggered when an opacity layer is changed\n         *\n         * @event layerswitcher:change:opacity\n         * @property {Object} type - event\n         * @property {Object} opacity - opacity\n         * @property {Object} layer - layer\n         * @property {Object} target - instance LayerSwitcher\n         * @example\n         * LayerSwitcher.on(\"layerswitcher:change\", function (e) {\n         *   console.log(e.opacity);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"layerswitcher:change:opacity\",\n            opacity : opacity,\n            layer : this._layers[id]\n        });\n    }\n\n    /**\n     * Change layer visibility on layer visibility picto click\n     *\n     * @param {Object} e - event\n     * @private\n     */\n    _onVisibilityLayerClick (e) {\n        var divId = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerID = SelectorID.index(divId); // ex. 26\n        var layer = this._layers[layerID].layer;\n        layer.setVisible((e.target.ariaPressed === \"true\"));\n    }\n\n    /**\n     * Change picto visibility on layer visibility change\n     *\n     * @param {Object} e - event\n     * @fires layerswitcher:change:visibility\n     * @private\n     */\n    _updateLayerVisibility (e) {\n        var visible = e.target.getVisible();\n        var id = e.target.gpLayerId;\n        var layerVisibility = document.getElementById(this._addUID(\"GPvisibilityPicto_ID_\" + id));\n        if (layerVisibility) {\n            layerVisibility.ariaPressed = visible;\n        }\n\n        /**\n         * event triggered when an visibility layer is changed\n         *\n         * @event layerswitcher:change:visibility\n         * @property {Object} type - event\n         * @property {Object} visibility - visibility\n         * @property {Object} layer - layer\n         * @property {Object} target - instance LayerSwitcher\n         * @example\n         * LayerSwitcher.on(\"layerswitcher:change:visibility\", function (e) {\n         *   console.log(e.visibility);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"layerswitcher:change:visibility\",\n            visibility : visible,\n            layer : this._layers[id]\n        });\n    }\n\n    /**\n     * Change layers order in layerswitcher (control container) on a layer index change (on map) or when a layer is added to a specific zindex\n     * @todo fires layerswitcher:change:zindex\n     * @private\n     */\n    _updateLayersOrder () {\n        // info :\n        // 1. on rcupre les zindex et les couches associes dans un tableau associatif (objet)\n        // 2. on rordonne les couche selon leur index : on leur attribue de nouveaux zindex uniques\n        // 3. on vide le container des layers, et rajoute les div des couches dans l'ordre dcroissant des zindex\n\n        var map = this.getMap();\n        if (!map) {\n            return;\n        }\n        this._layersIndex = {};\n        var layerIndex;\n        var id;\n\n        // on parcourt toutes les couches pour rcuprer leur ordre :\n        // on stocke les couches dans un tableau associatif ou les cls sont les zindex, et les valeurs sont des tableaux des couches  ce zindex.\n        map.getLayers().forEach(\n            (layer) => {\n                id = layer.gpLayerId;\n\n                // on commence par dsactiver temporairement l'couteur d'vnements sur le changement de zindex.\n                olObservableUnByKey(this._layers[id].onZIndexChangeEvent);\n                this._layers[id].onZIndexChangeEvent = null;\n\n                // on ajoute la couche dans le tableau (de l'objet this._layersIndex) correspondant  son zindex\n                layerIndex = null;\n                if (layer.getZIndex !== undefined) {\n                    layerIndex = layer.getZIndex();\n                    if (!this._layersIndex[layerIndex] || !Array.isArray(this._layersIndex[layerIndex])) {\n                        this._layersIndex[layerIndex] = [];\n                    }\n                    this._layersIndex[layerIndex].push(this._layers[id]);\n                };\n            }\n        );\n\n        // on rordonne les couches entre elles dans la carte,  partir des zindex stocks ci-dessus.\n        this._lastZIndex = 0;\n        this._layersOrder = [];\n        for (var zindex in this._layersIndex) {\n            if (this._layersIndex.hasOwnProperty(zindex)) {\n                var layers = this._layersIndex[zindex];\n                for (var l = 0; l < layers.length; l++) { //  ce stade layers[l] est une couche de this._layers.\n                    // on conserve l'ordre des couches : la premire est celle qui se situe tout en haut, et la dernire est le \"fond de carte\"\n                    this._layersOrder.unshift(layers[l]);\n                    // et on rordonne les couches avec des zindex, uniques.\n                    this._lastZIndex++;\n                    // layers[l].layer.setZIndex(lastZIndex);\n                    // et on ractive l'couteur d'vnement sur les zindex\n                    if (this._layers[layers[l].layer.gpLayerId].onZIndexChangeEvent == null) {\n                        this._layers[layers[l].layer.gpLayerId].onZIndexChangeEvent = layers[l].layer.on(\n                            \"change:zIndex\",\n                            () => this._updateLayersOrder()\n                        );\n                    }\n                }\n            }\n        }\n\n        if (this._layerListContainer) {\n            // on vide le container prcdent\n            for (let index = 0; index < this._layerListContainer.childNodes.length; index++) {\n                const element = this._layerListContainer.childNodes[index];\n                if (element.id === \"\") {\n                    continue;\n                }\n                element.remove();\n            }\n            // et on rajoute les div correspondantes aux diffrentes couches, dans l'ordre dcroissant des zindex\n            for (var j = 0; j < this._layersOrder.length; j++) {\n                var layerOptions = this._layersOrder[j];\n                this._layerListContainer.appendChild(layerOptions.div);\n            }\n        } else {\n            logger.log(\"[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!\");\n        }\n    }\n\n    /**\n     * Open layer information panel on picto click\n     *\n     * @param {Event} e - MouseEvent\n     * @private\n     */\n    _onOpenLayerInfoClick (e) {\n        var id = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerID = SelectorID.index(id); // ex. 26\n        var layerOptions = this._layers[layerID];\n\n        var panel;\n        var info;\n\n        // Close layer info panel\n        var divId = document.getElementById(e.target.id);\n        if (divId.classList.contains(\"GPlayerInfoOpened\")) {\n            divId.classList.remove(\"GPlayerInfoOpened\");\n            divId.classList.add(\"GPlayerInfoClosed\");\n\n            panel = document.getElementById(this._addUID(\"GPlayerInfoPanel\"));\n            panel.classList.remove(\"GPlayerInfoPanelOpened\", \"gpf-visible\");\n            panel.classList.add(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n\n            info = document.getElementById(this._addUID(\"GPlayerInfoContent\"));\n            if (info) {\n                info.parentNode.remove();\n            }\n            return;\n        }\n\n        // Open layer info panel\n        if (divId.classList.contains(\"GPlayerInfoClosed\")) {\n            divId.classList.remove(\"GPlayerInfoClosed\");\n            divId.classList.add(\"GPlayerInfoOpened\");\n        }\n\n        panel = document.getElementById(this._addUID(\"GPlayerInfoPanel\"));\n        panel.classList.remove(\"GPlayerInfoPanelClosed\", \"gpf-hidden\");\n        panel.classList.add(\"GPlayerInfoPanelOpened\", \"gpf-visible\");\n\n        info = document.getElementById(this._addUID(\"GPlayerInfoContent\"));\n        if (info) {\n            info.parentNode.remove();\n        }\n\n        // on rcupre les infos associes au layer pour mettre dynamiquement le contenu du panel d'informations\n        var obj = {\n            id : id,\n            title : layerOptions.title,\n            description : layerOptions.description,\n            quicklookUrl : layerOptions.quicklookUrl,\n            metadata : layerOptions.metadata,\n            legends : layerOptions.legends\n        };\n        // get layer max scale denominator\n        var maxResolution = layerOptions.layer.getMaxResolution();\n        if (maxResolution === Infinity) {\n            obj._maxScaleDenominator = 560000000;\n        } else {\n            obj._maxScaleDenominator = Math.round(maxResolution / 0.00028);\n        }\n        var infoLayer = this._createContainerLayerInfoElement(obj);\n        panel.firstChild.appendChild(infoLayer);\n    }\n\n    /**\n     * remove layer from layer switcher and map on picto click\n     *\n     * @param {Event} e - MouseEvent\n     * @private\n     */\n    _onDropLayerClick (e) {\n        var divId = e.target.id; // ex GPvisibilityPicto_ID_26\n        var layerID = SelectorID.index(divId); // ex. 26\n        var layer = this._layers[layerID].layer;\n\n        // le retrait de la couche va dclencher l'ecouteur d'venement,\n        // et appeler this.removeLayer qui va supprimer la div.\n        this.getMap().getLayers().remove(layer);\n    }\n\n    /**\n     * change layers order (on map) on drag and drop (on control container)\n     * \n     * @private\n     */\n    _onEndDragAndDropLayerClick () {\n        // INFO : e.oldIndex et e.newIndex marchent en mode AMD mais pas Bundle.\n        var map = this.getMap();\n\n        // on rcupre l'ordre des div dans le contrle pour rordonner les couches (avec zindex)\n        var matchesLayers = document.querySelectorAll(\"div.GPlayerSwitcher_layer\");\n        var maxZIndex = matchesLayers.length;\n        // on vide la liste ordonne avant de la remplir avec l'ordre des couches selon les div.\n        this._layersOrder = [];\n        for (var i = 0; i < matchesLayers.length; i++) {\n            var tag = matchesLayers[i].id;\n            var id = SelectorID.index(tag);\n            var layer = this._layers[id].layer;\n\n            // on commence par dsactiver temporairement l'couteur d'vnements sur le changement de zindex.\n            olObservableUnByKey(this._layers[id].onZIndexChangeEvent);\n            this._layers[id].onZIndexChangeEvent = null;\n\n            if (layer.setZIndex) {\n                // maxZIndex--;\n                layer.setZIndex(maxZIndex);\n                this._layersOrder.push(this._layers[id]);\n                maxZIndex--;\n            }\n\n            // et on ractive l'couteur d'vnement sur les zindex\n            if (this._layers[id].onZIndexChangeEvent == null) {\n                this._layers[id].onZIndexChangeEvent = layer.on(\n                    \"change:zIndex\",\n                    () => this._updateLayersOrder()\n                );\n            }\n        }\n\n        // mise  jour de la visu\n        map.updateSize();\n    }\n\n    /**\n     * change layers order (on map) on drag and drop (on control container)\n     * \n     * @param {Event} e - DragNDrop Event\n     * @private\n     */\n    _onStartDragAndDropLayerClick (e) {\n        logger.debug(e);\n    }\n\n    /**\n     * zoom to extent\n     * @fixme dot it for other user data\n     * @param {PointerEvent} e - Event\n     */\n    _onZoomToExtentClick (e) {\n        logger.debug(e);\n\n        // FIXME \n        // le zoom to extent fonctionne par defaut pour les couches raster TMS/WMS/WMTS issues du catalogue\n        // mais doit aussi le faire pour les donnes utilisateurs du type : \n        // * vecteurs (imports)\n        // * raster par moissonnage (imports) \n\n        var domIDShort = e.target.id; // ex GPvisibilityPicto_ID_26\n        var domIDLong = SelectorID.index(domIDShort); // ex. 26\n        var data = this._layers[domIDLong];\n\n        var extent = null;\n        var error = null;\n        try {\n            // Check if configuration is loaded\n            if (!Config.isConfigLoaded()) {\n                throw \"ERROR : contract key configuration has to be loaded to load Geoportal layers.\";\n            }\n\n            if (!data.layer.hasOwnProperty(\"gpLayerId\")) {\n                throw \"WARN : User data not yet implemented !\";\n            }\n\n            var layerName = data.layer.name || data.layer.getSource().name;\n            var layerService = data.layer.service || data.layer.getSource().service;\n            var layerId = Config.configuration.getLayerId(layerName, layerService);\n            if (!layerId) {\n                throw \"ERROR : Layer ID not found into the catalogue !?\";\n            }\n\n            var globalConstraints = Config.configuration.getGlobalConstraints(layerId);\n            if (globalConstraints) {\n                var map = this.getMap();\n                if (!map || !map.getView()) {\n                    return;\n                }\n                var view = map.getView();\n                var crsTarget = view.getProjection();\n    \n                // rcupration de l'tendue (en EPSG:4326 par dfaut), \n                // et reprojection dans la projection de la couche\n                var bbox = [\n                    globalConstraints.extent.left,\n                    globalConstraints.extent.bottom,\n                    globalConstraints.extent.right,\n                    globalConstraints.extent.top\n                ];\n                var crsSource = globalConstraints.crs;\n                // projection par defaut\n                if (!crsSource) {\n                    crsSource = \"EPSG:4326\";\n                }\n                \n                extent = olTransformExtentProj(bbox, crsSource, crsTarget);\n                if (extent) {\n                    view.fit(extent);\n                }\n            }\n        } catch (e) {\n            error = e;\n        }\n\n        /**\n         * event triggered when an zoom extent is done\n         *\n         * @event layerswitcher:zoom\n         * @property {Object} type - event\n         * @property {Object} extent - extent (map projection)\n         * @property {Object} layer - layer\n         * @property {String} error - error\n         * @property {Object} target - instance LayerSwitcher\n         * @example\n         * LayerSwitcher.on(\"layerswitcher:extent\", function (e) {\n         *   console.log(e.extent);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"layerswitcher:extent\",\n            extent : extent,\n            layer : data,\n            error : error\n        });\n    }\n\n    /**\n     * check layers range on map movement\n     *\n     * @param {ol.Map} map - ol map on which event occured\n     * @private\n     */\n    _onMapMoveEnd (map) {\n        // pour chaque couche de la map, on vrifie qu'elle soit toujours dans la visu (inRange)\n        map.getLayers().forEach(\n            (layer) => {\n                var id = layer.gpLayerId;\n                if (this._layers[id]) {\n                    var layerOptions = this._layers[id];\n\n                    // Check if layer is out of range.\n                    var layerDiv;\n                    if (this.isInRange(layer, map) && !layerOptions.inRange) {\n                        layerOptions.inRange = true;\n                        layerDiv = document.getElementById(this._addUID(\"GPlayerSwitcher_ID_\" + id));\n                        layerDiv.classList.remove(\"outOfRange\");\n                    } else if (!this.isInRange(layer, map) && layerOptions.inRange) {\n                        layerOptions.inRange = false;\n                        layerDiv = document.getElementById(this._addUID(\"GPlayerSwitcher_ID_\" + id));\n                        layerDiv.classList.add(\"outOfRange\");\n                    }\n                }\n            }\n        );\n    }\n\n    // ################################################################### //\n    // ############################ Utils ################################ //\n    // ################################################################### //\n\n    /**\n     * Returns Layer Container Id associated with given olLayer\n     *\n     * @param {ol.layer.Layer} olLayer - ol layer object\n     * @returns {String} - div container Id ; null if layer not found.\n     */\n    getLayerDOMId (olLayer) {\n        var foundId = null;\n\n        this.getMap().getLayers().forEach((layer) => {\n            if (layer === olLayer) {\n                foundId = layer.hasOwnProperty(\"gpLayerId\") ? layer.gpLayerId : null;\n            }\n        });\n\n        // TODO : recuperer \"GPlayerSwitcher_ID\" depuis une constante\n        return foundId !== null ? this._addUID(\"GPlayerSwitcher_ID_\" + foundId) : null;\n    }\n\n    /**\n     * Check if map view is out of layer range (in terms of extent and zoom)\n     *\n     * @param {Object} layer - the ol.layer object\n     * @param {Object} map   - the ol.Map object\n     * @returns {Boolean} outOfRange - false if map view is out of layer range\n     */\n    isInRange (layer, map) {\n        if (!map) {\n            return;\n        }\n        // check if map zoom is in layer zoom range\n        var mapResolution = map.getView().getResolution();\n        if (mapResolution > layer.getMaxResolution() || mapResolution < layer.getMinResolution()) {\n            return false;\n        }\n\n        // check if map extent intersects layer extent (if defined)\n        var mapExtent = map.getView().calculateExtent(map.getSize());\n        var layerExtent = layer.getExtent();\n        if (layerExtent && !olIntersects(mapExtent, layerExtent)) {\n            return false;\n        }\n\n        return true;\n    }\n\n    /**\n     * Get layer informations : title, description, quicklookurl, legends, metadata\n     *\n     * @param {Object} layer - the ol.layer object\n     * @returns {Object} layerInfo - layer informations\n     */\n    getLayerInfo (layer) {\n        var layerInfo = {};\n        if (layer.getProperties !== undefined && layer.getSource !== undefined) {\n            var layerProperties = layer.getProperties();\n            var src = layerProperties.source;\n            if (src) {\n                layerInfo._title = src._title || layerProperties.id || \"\";\n                layerInfo._description = src._description || \"\";\n                layerInfo._quicklookUrl = src._quicklookUrl || \"\";\n                layerInfo._metadata = src._metadata || [];\n                layerInfo._legends = src._legends || [];\n            }\n        }\n        return layerInfo;\n    }\n\n};\n\n// on rcupre les mthodes de la classe commune LayerSwitcherDOM\nObject.assign(LayerSwitcher.prototype, LayerSwitcherDOM);\n\nexport default LayerSwitcher;\n\n// Expose LayerSwitcher as ol.control.LayerSwitcher (for a build bundle)\nif (window.ol && window.ol.control) {\n    window.ol.control.LayerSwitcher = LayerSwitcher;\n}\n","// import OpenLayers\nimport Control from \"ol/control/Control\";\nimport {\n    Select as SelectInteraction,\n    Modify as ModifyInteraction,\n    Draw as DrawInteraction\n} from \"ol/interaction\";\n// import local\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Utils from \"../../Utils/Helper\";\n\nvar logger = Logger.getLogger(\"interactions\");\n\n/**\n * @private\n * @description\n * Pourquoi et comment l'utiliser ?\n * Cette classe permet de grer les interactions entre chaque extension.\n * Une extension qui active une interaction avec la carte, doit desactiver\n * les autres interactions issues d'autre extensions.\n * La dsactivation d'une interaction s'accompagne d'actions telles que\n * le nettoyage des dessins, l'tat du composant graphique, ...\n *\n * Ex\n * // desactive toutes les interactions avec l'opration par defaut : clean\n * Interactions.unset(map);\n * // desactive les interactions sauf celles de Drawing. On execute des\n * // operations particulieres : status, collapse et message\n * Interactions.unset(map, {\n *    current : \"Drawing\",\n *    status : false,\n *    collapse : true,\n *    messsage : [\"WARNING\", \"Ceci est un avertissement !\"]\n * });\n *\n * Dans le code de l'extension, il faut placer des informations dans l'interaction :\n * interaction.setProperties({\n *     name : \"Drawing\",\n *     source : this\n * });\n */\nvar Interactions = {\n\n    /**\n     * Liste des extensions qui utilisent le mcanisme des interactions\n     */\n    _extensions : [\n        \"Measures\",\n        \"ElevationPath\",\n        \"Drawing\"\n    ],\n\n    /**\n     * Options par defaut\n     * - current : ex. \"Drawing\"\n     *       c'est l'extension qui demande la desactivation des autres interactions.\n     *       Par defaut, toutes les interactions sont desactives.\n     * - clean :\n     *       c'est la suppression des interactions, des dessins de la carte,\n     *       ainsi que la reinitialisation de l'tat graphique.\n     *       Les extensions doivent implementer la mthode 'clean()'.\n     *       Par defaut, tous les dessins sont supprims\n     */\n    _options : {\n        current : null,\n        clean : null\n    },\n\n    /**\n     * Permet de desactive les interactions (Draw) de la carte pour les extensions,\n     * sauf l'interaction courrante (si elle est renseigne avec l'option 'current').\n     * Il est possible d'ajouter des fonctionnalits via les options.\n     * Par defaut, l'option 'clean' est renseigne...\n     *\n     * @param {Object} map - the map\n     * @param {Object} options - options\n     */\n    unset : function (map, options) {\n        logger.trace(\"unset()\");\n\n        var opts = {};\n        Utils.mergeParams(opts, this._options);\n        Utils.mergeParams(opts, options);\n\n        var interactions = map.getInteractions().getArray();\n        for (var i = 0; i < interactions.length; i++) {\n            if (interactions[i].getActive() &&\n                (interactions[i] instanceof DrawInteraction ||\n                    interactions[i] instanceof SelectInteraction ||\n                    interactions[i] instanceof ModifyInteraction)) {\n                var prop = interactions[i].getProperties();\n                var name = prop.name;\n                if (typeof name !== \"undefined\" && this._extensions.indexOf(name) > -1) {\n                    // doit on desactiver l'interaction courrante ?\n                    if (opts.current && opts.current === name) {\n                        continue;\n                    }\n                    interactions[i].setActive(false);\n                    // instance de l'extension\n                    var source = prop.source;\n                    if (typeof source !== \"undefined\" && source instanceof Control) {\n                        // oprations sur le composant graphique\n                        for (var action in opts) {\n                            if (opts.hasOwnProperty(action)) {\n                                if (action === \"current\") {\n                                    continue;\n                                }\n                                if (typeof source[action] === \"function\") {\n                                    var args = Array.isArray(opts[action]) ? opts[action] : [opts[action]];\n                                    source[action].apply(source, args);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    interactions[i].setActive(false);\n                }\n            }\n        }\n    }\n};\n\nexport default Interactions;\n","var Marker = {\n    lightOrange : \"data:image/png;base64,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IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC\",\n    darkOrange : \"data:image/png;base64,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czpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC\",\n    red : \"data:image/png;base64,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293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==\",\n    turquoiseBlue : \"data:image/png;base64,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/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==\",\n    defaultOffset : [-25.5, -32]\n};\n\nexport default Marker;\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.format.GPX;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.geom.MultiLineString;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.geom.LineString;","// import openlayers\nimport olGPX from \"ol/format/GPX\";\n// import Geometry\nimport MultiLineString from \"ol/geom/MultiLineString\";\nimport LineString from \"ol/geom/LineString\";\n// import local\nimport Styling from \"./Styling\";\nimport Parser from \"../Utils/Parser\";\n\n/**\n * @classdesc\n *\n * Extended Styles GPX format to export (internal use only !)\n *\n * SPEC\n * cf. https://www.topografix.com/gpx.asp\n *\n *\n * @constructor\n * @alias ol.format.GPXExtended\n * @extends {ol.format.GPX}\n * @type {ol.format.GPXExtended}\n * @param {Object} options - Options\n * @param {Object} [options.defaultStyle] - Styles by default\n * @param {String} [options.orderBy] - Sort by key the feature before writing. By default, no sorting\n * @param {Object} [options.extensions] - Add properties to file root\n * @param {function} [options.readExtensions] - Reading extensions (native)\n */\nvar GPX = class GPX extends olGPX {\n\n    /**\n     * See {@link ol.format.GPXExtended}\n     * @module GPXExtended\n     * @alias module:~formats/GPXExtended\n     * @param {*} options - options\n     * @example\n     * import GPXExtended from from \"gpf-ext-ol/formats/GPXExtended\"\n     * ou \n     * import { GPXExtended } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        super(options);\n\n        if (!(this instanceof GPX)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this.options = options || {};\n\n        // INFO\n        // surcharge de la callback : readExtensions\n        if (this.options.readExtensions && typeof this.options.readExtensions === \"function\") {\n            var clbk = this.options.readExtensions; // callback definie par l'utilisateur\n            this.options.readExtensions = function (feature, node) {\n                this.readExtensions(feature, node);\n                clbk.call(this, feature, node);\n            };\n        } else {\n            this.options.readExtensions = this.readExtensions;\n        }\n\n        // INFO\n        // defaultStyle est un objet de type Style\n        if (this.options.defaultStyle === null || typeof this.options.defaultStyle === \"undefined\") {\n            this.options.defaultStyle = {};\n        }\n\n        this.source = null;\n\n        return this;\n    }\n\n    /**\n     * Read Extend Styles for Features.\n     * This function overloads ol.format.GPX.readFeatures ...\n     *\n     * @see ol.format.GPX.prototype.readFeatures\n     * @param {Document|Node} source - Source.\n     * @param {olx.format.ReadOptions=} options - options.\n     * @return {Array.<ol.Feature>} Features.\n     */\n    readFeatures (source, options) {\n        // INFO\n        // le travail de lecture des extensions du format est port\n        // par la callback des options : readExtensions\n        var features = super.readFeatures(source, options);\n\n        // String ou Dom\n        if (typeof source === \"string\") {\n            this.source = Parser.parse(source);\n        } else if (source !== null) {\n            this.source = source;\n        }\n\n        // INFO\n        // on applique les styles par defaut definis avec l'option defaultStyle\n        // sauf sur les features qui possdent des extensions.\n        // les features avec extensions sont trait au pralable\n        // dans la callback des options : readExtensions\n        var self = this;\n        features.forEach(function (feature, index, array) {\n            feature.setId(index + 1);\n            // HACK : enregistrement de la description de la balise 'desc' du format GPX\n            var value = feature.getProperties().desc;\n            if (value) {\n                feature.setProperties({\n                    description : value\n                });\n            }\n            var featureStyleFunction = feature.getStyleFunction();\n            if (!featureStyleFunction) {\n                var styleFunction = Styling.defineStyleFunctionByDefault(self.options.defaultStyle);\n                if (styleFunction) {\n                    feature.setStyle(styleFunction);\n                }\n            }\n        });\n        return features;\n    }\n\n    /**\n     * Write Extend Styles for Features.\n     * This function overloads ol.format.GPX.writeFeatures ...\n     *\n     * @see ol.format.GPX.prototype.writeFeatures\n     * @param {Object[]} features - Features.\n     * @param {Object} options - Options.\n     *\n     * @return {String} Result or null.\n     */\n    writeFeatures (features, options) {\n        // INFO\n        // il n'est pas possible de surcharger les parsers d'OpenLayers (private),\n        // on decide de (re)parser la sortie d'OpenLayers afin d'y placer les balises\n        // d'extensions\n\n        // on met  jour les properties de styles\n        features.forEach(function (feature, index, array) {\n            // HACK : enregistrement de la description dans la balise 'desc' du format GPX\n            var value = feature.getProperties().description;\n            if (value) {\n                feature.setProperties({\n                    desc : value\n                });\n            }\n\n            Styling.definePropertiesFromStyle(feature);\n\n            // HACK : Le type surfacique n'existe pas au format GPX,\n            // on doit la transformer en un lineaire.\n            // Par contre, on garde un trace de la transformation :\n            // * le style surfacique\n            // * le type de geometrie initiale\n            var type = feature.getGeometry().getType();\n            if (type === \"Polygon\") {\n                // creation d'une copie pour ne pas modifier les features de carte\n                var fp = feature.clone();\n                fp.set(\"type\", type);\n                fp.setGeometry(new LineString(feature.getGeometry().getCoordinates()));\n                features.push(fp);\n                // feature  supprimer de l'export\n                array.splice(index, 1);\n            } else if (type === \"MultiPolygon\") {\n                // creation d'une copie pour ne pas modifier les features de carte\n                var fm = feature.clone();\n                fm.set(\"type\", type);\n                fm.setGeometry(new MultiLineString(feature.getGeometry().getCoordinates()));\n                features.push(fm);\n                // feature  supprimer de l'export\n                array.splice(index, 1);\n            }\n        });\n\n        // tri des features en fonction de la balise \"number\" || \"id\" || \"order\"\n        if (this.options.orderBy !== undefined) {\n            var key = this.options.orderBy;\n            if (key) {\n                var sortFct = function (a, b) {\n                    var cmpA = a.get(key) || 0;\n                    var cmpB = b.get(key) || 0;\n                    return cmpA.toString().localeCompare(cmpB.toString(), undefined, { numeric : true });\n                };\n                features.sort(sortFct);\n            }\n        }\n\n        // nodes\n        var gpxNode = super.writeFeaturesNode(features, options);\n        if (gpxNode === null) {\n            return null;\n        }\n\n        // on ajoute les extensions  la racine pour les metadonnes de calcul\n        if (this.options.hasOwnProperty(\"extensions\")) {\n            this.writeRootExtensions_(gpxNode, this.options.extensions);\n        }\n\n        // INFO\n        //  chaque fois qu'un style est trouv dans un feature,\n        // on appelle la fonction d'insertion des balises extensions dans le DOM.\n        this.processExtensions_(gpxNode, features, {\n            extensions : this.writeExtensions_\n        });\n\n        // dom -> string\n        var gpxStringExtended = Parser.toString(gpxNode);\n        if (!gpxStringExtended) {\n            return null;\n        }\n\n        // format string\n        var gpxStringFormatted = Parser.format(gpxStringExtended);\n        if (gpxStringFormatted === \"\") {\n            return null;\n        }\n\n        return gpxStringFormatted;\n    }\n\n    /**\n     * Callback to read extensions from options : readExtensions\n     *\n     * @param {*} feature - ...\n     * @param {*} node - ...\n     */\n    readExtensions (feature, node) {\n        var _node = node;\n        // recherche de la properties de type Node ou Element\n        // si le node n'est pas renseign...\n        if (!node) {\n            var props = feature.getProperties();\n            for (const key in props) {\n                if (Object.hasOwnProperty.call(props, key)) {\n                    const element = props[key];\n                    if (element instanceof Node) {\n                        _node = element;\n                        break;\n                    }\n                }\n            }\n        }\n\n        if (!_node) {\n            // eslint-disable-next-line no-console\n            console.warn(\"node not found !\");\n            return;\n        }\n\n        // ex. de nodes :\n        // <extensions>\n        //     <marker-size>medium</marker-size>\n        //     <marker-symbol></marker-symbol>\n        //     <marker-color>#ffffff</marker-color>\n        // </extensions>\n        for (var index = 0; index < _node.childNodes.length; index++) {\n            var element = _node.childNodes[index];\n            if (element.nodeType === 1) {\n                feature.set(element.nodeName, element.textContent);\n            }\n        }\n\n        // cas particulier du format GPX :\n        // il n'existe pas de surfacique sur ce format, mais il est possible de forcer\n        // la transformation en polygone pour des besoins particuliers de visualisation\n        Styling.APPLY_CONVERT_GEOM_GPX = true;\n        var style = Styling.defineStyleFromProperties(feature);\n        if (style) {\n            feature.setStyle(style);\n        }\n    }\n\n    /**\n     * ...\n     * @param {*} key ...\n     * @returns {Object} json\n     * @todo\n     */\n    readRootExtensions (key) {\n        var value = {};\n        // Rechercher :\n        // <metadata>\n        //   <extensions xmlns=\"http://www.w3.org/1999/xhtml\">\n        //     <data name=\"geoportail:compute\">{...}</data>\n        //   </extensions>\n        // </metadata>\n\n        var firstNodeLevelGpx = this.source.childNodes[0]; // gpx\n        var searchChildNodesMeta = firstNodeLevelGpx.childNodes; // search metadata\n        for (var k = 0; k < searchChildNodesMeta.length; k++) {\n            var nodeMeta = searchChildNodesMeta[k];\n            if (nodeMeta.nodeName === \"metadata\") {\n                var searchChildNodesExt = nodeMeta.childNodes; // search extensions\n                for (var i = 0; i < searchChildNodesExt.length; i++) {\n                    var nodeExt = searchChildNodesExt[i];\n                    if (nodeExt.nodeName === \"extensions\") {\n                        var searchChildNodesData = nodeExt.childNodes; // search data\n                        for (var j = 0; j < searchChildNodesData.length; j++) {\n                            var nodeData = searchChildNodesData[j];\n                            if (nodeData.nodeName === \"data\") {\n                                var name = nodeData.attributes[0];\n                                if (name && name.nodeName === \"name\") {\n                                    if (name.nodeValue === key) {\n                                        value = JSON.parse(nodeData.textContent);\n                                        break;\n                                    }\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return value;\n    }\n\n    /**\n     * ...\n     *\n     * @param {*} doc - ...\n     * @param {*} extensions - ...\n     * @param {Boolean} [xml=false] - write tag xml or json\n     */\n    writeRootExtensions_ (doc, extensions, xml) {\n        // TODO namespace ?\n        var metadata = document.createElement(\"metadata\");\n        var extensionsRoot = document.createElement(\"extensions\");\n        // INFO\n        // convert JSON to XML (dom)\n        // * type string :\n        // { typestring: \"string\" } -> <typestring>string</typestring>\n        //\n        // * type object :\n        // { typeobject: { typestring1: \"string\", typestring2: \"string\" } }\n        // -> <typeobject>\n        //      <typestring1>string</typestring1>\n        //      <typestring2>string</typestring2>\n        //    </typeobject>\n        //\n        // * type array :\n        // { typearray : [\"item1\", \"item2\"] }\n        // -> <typearray type=\"array\" index=2>\n        //      <value>item1</value>\n        //      <value>item2</value>\n        //    </typearray>\n        //\n        // * type array of array\n        // -> <typearray type=\"array\" index=1>\n        //      <value type=\"array\" index=2>\n        //          <value>1</value>\n        //          <value>2</value>\n        //      </value>\n        //    </typearray>\n        //\n        // * type array of object\n        // -> <typearray type=\"array\" index=2>\n        //      <value>\n        //          <typestring1>string</typestring1>\n        //          <typestring2>string</typestring2>\n        //      </value>\n        //      <value>\n        //          <typestring1>string</typestring1>\n        //          <typestring2>string</typestring2>\n        //      </value>\n        //    </typearray>\n        function toDOM (node, json) {\n            for (const key in json) {\n                if (Object.hasOwnProperty.call(json, key)) {\n                    var element = json[key] || \"\"; // au cas o...\n                    var tag = document.createElement(key);\n                    // eslint-disable-next-line valid-typeof\n                    if (typeof element === \"string\" || typeof element === \"number\") {\n                        tag.innerHTML = element;\n                        node.appendChild(tag);\n                    } else if (element instanceof Array) {\n                        tag.setAttribute(\"type\", \"array\");\n                        tag.setAttribute(\"index\", element.length);\n                        for (let index = 0; index < element.length; index++) {\n                            var item = element[index] || \"\"; // au cas o...\n                            var n = document.createElement(\"value\");\n                            if (typeof item === \"string\" || typeof item === \"number\") {\n                                n.innerHTML = item;\n                                tag.appendChild(n);\n                            } else if (item instanceof Array) {\n                                n.setAttribute(\"type\", \"array\");\n                                n.setAttribute(\"index\", item.length);\n                                for (let i = 0; i < item.length; i++) {\n                                    var value = item[i] || \"\"; // au cas o...\n                                    var k = document.createElement(\"value\");\n                                    if (typeof value === \"string\" || typeof value === \"number\") {\n                                        k.innerHTML = value;\n                                        n.appendChild(k);\n                                    }\n                                }\n                                tag.appendChild(n);\n                            } else if (item instanceof Object) {\n                                tag.appendChild(toDOM(n, item));\n                            } else {\n                                // \"Unknown element !\"\n                            }\n                        }\n                        node.appendChild(tag);\n                    } else if (element instanceof Object) {\n                        node.appendChild(toDOM(tag, element));\n                    } else {\n                        // \"Unknown element !\"\n                    }\n                }\n            }\n            return node;\n        }\n\n        if (xml) {\n            // structure xml\n            toDOM(extensionsRoot, extensions);\n        } else {\n            // structure json par defaut\n            // ex.\n            // <metadata>\n            //   <extensions xmlns=\"http://www.w3.org/1999/xhtml\">\n            //     <data name=\"geoportail:compute\">{...}</data>\n            //   </extensions>\n            // </metadata>\n            for (const key in extensions) {\n                if (Object.hasOwnProperty.call(extensions, key)) {\n                    const value = extensions[key];\n                    var dataElement = document.createElement(\"data\");\n                    dataElement.setAttribute(\"name\", key);\n                    var data = document.createTextNode(JSON.stringify(value));\n                    dataElement.appendChild(data);\n                    extensionsRoot.appendChild(dataElement);\n                }\n            }\n        }\n        metadata.appendChild(extensionsRoot);\n        // insertion en 1ere place !\n        var firstChild = doc.firstChild;\n        doc.insertBefore(metadata, firstChild);\n    }\n\n    /**\n     * ...\n     *\n     * @param {Object} feature - ...\n     * @param {DOMElement} node - ...\n     * @private\n     */\n    writeExtensions_ (feature, node) {\n        // creation du DOM\n        var extensionsNode = document.createElementNS(node.parentNode.namespaceURI, \"extensions\");\n        Styling.getListTags().forEach(key => {\n            if (feature.get(key)) {\n                var extension = document.createElementNS(node.parentNode.namespaceURI, key);\n                extension.innerHTML = feature.get(key);\n                extensionsNode.appendChild(extension);\n            }\n        });\n        node.appendChild(extensionsNode);\n    }\n\n    /**\n     * ...\n     *\n     * @param {DOMElement} doc - ...\n     * @param {Object} features - ...\n     * @param {Object} actions - ...\n     * @private\n     */\n    processExtensions_ (doc, features, actions) {\n        // INFO\n        // OpenLayers ne gre pas tous les tags du format GPX : ex. metadata\n        // Liste des tags :\n        // * wpt\n        // * rte\n        // * trk\n        // On peut y placer nos balises extensions.\n\n        var index = -1;\n        var nodes = doc.childNodes;\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i];\n            switch (node.nodeName) {\n                case \"wpt\":\n                case \"rte\":\n                case \"trk\":\n                    index++;\n                    var feature = features[index];\n                    var style = feature.getStyle();\n                    if (style) {\n                        var fct = actions.extensions;\n                        if (fct && typeof fct === \"function\") {\n                            fct(feature, node);\n                        }\n                    }\n                    break;\n                case \"metadata\":\n                    break;\n                default:\n                    // on ne devrait jamais passer  ce niveau !?\n                    // eslint-disable-next-line no-console\n                    console.warn(\"nodename unknown :\", node.nodeName);\n                    break;\n            }\n        }\n    }\n\n};\n\nexport default GPX;\n\n// Expose GPX as ol.source.GPXExtended. (for a build bundle)\nif (window.ol && window.ol.format) {\n    window.ol.format.GPXExtended = GPX;\n}\n","// import openlayers\nimport olGeoJSON from \"ol/format/GeoJSON\";\n// import local\nimport Styling from \"./Styling\";\n\n/**\n * @classdesc\n *\n * Extended Styles GeoJSON format to export (internal use only !)\n *\n * SPEC\n * cf. https://github.com/mapbox/simplestyle-spec/\n * cf. https://geojson.org/\n *\n *\n * @constructor\n * @alias ol.format.GeoJSONExtended\n * @extends {ol.format.GeoJSON}\n * @type {ol.format.GeoJSONExtended}\n * @param {Object} options - Options\n * @param {Object} [options.defaultStyle] - Styles by default\n * @param {Object} [options.extensions] - Add properties to file root\n */\nvar GeoJSON = class GeoJSON extends olGeoJSON {\n\n    /**\n     * See {@link ol.format.GeoJSONExtended}\n     * @module GeoJSONExtended\n     * @alias module:~formats/GeoJSONExtended\n     * @param {*} options - options\n     * @example\n     * import GeoJSONExtended from \"gpf-ext-ol/formats/GeoJSONExtended\"\n     * ou \n     * import { GeoJSONExtended } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        super(options);\n\n        if (!(this instanceof GeoJSON)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        this.options = options || {};\n\n        // INFO\n        // defaultStyle est un objet de type Style\n        if (this.options.defaultStyle === null || typeof this.options.defaultStyle === \"undefined\") {\n            this.options.defaultStyle = {};\n        }\n\n        this.source = null;\n\n        return this;\n    }\n\n    /**\n     * Read Extend Styles for Features.\n     * This function overloads ol.format.GeoJSON.readFeatures ...\n     *\n     * @see ol.format.GeoJSON.prototype.readFeatures\n     * @param {Object|String} source - Source.\n     * @param {olx.format.ReadOptions} [options] - Options.\n     * @return {Array.<ol.Feature>} Features.\n     */\n    readFeatures (source, options) {\n        var features = super.readFeatures(source, options);\n\n        // String ou Object\n        if (typeof source === \"string\") {\n            this.source = JSON.parse(source);\n        } else if (source !== null) {\n            this.source = source;\n        }\n\n        features.forEach((feature) => {\n            var featureStyleFunction = feature.getStyleFunction();\n            // existe t il dj une fonction de style ?\n            // si oui, on l'applique !\n            if (featureStyleFunction) {\n                var styles = featureStyleFunction.call(this, feature, 0);\n                if (styles && styles.length !== 0) {\n                    feature.setStyle(styles[0]);\n                }\n            } else {\n                //  ce niveau, il n'existe pas de styles, donc :\n                // soit, on applique les styles par defaut\n                // soit, on prend en compte les styles definis dans les properties / tag du fichier\n                // les styles dfinis ecrasent les styles par defaut...\n                var style = Styling.defineStyleFromProperties(feature);\n                if (style) {\n                    feature.setStyle(style);\n                } else {\n                    // si aucun style disponible, on utilisera le style par defaut defini\n                    // par l'utilisateur ou l'application\n                    var styleFunction = Styling.defineStyleFunctionByDefault(this.options.defaultStyle);\n                    if (styleFunction) {\n                        feature.setStyle(styleFunction);\n                        Styling.definePropertiesFromStyle(feature);\n                    }\n                }\n            }\n        });\n\n        return features;\n    }\n\n    /**\n     * Write Extend Styles for Features.\n     * This function overloads ol.format.GeoJSON.writeFeatures ...\n     *\n     * @see ol.format.GeoJSON.prototype.writeFeatures\n     * @param {Array.<ol.Feature>} features - Features.\n     * @param {Object} [options] - Options.\n     *\n     * @return {String} Result.\n     */\n    writeFeatures (features, options) {\n        // on met  jour les properties de styles\n        features.forEach(function (feature) {\n            Styling.definePropertiesFromStyle(feature);\n        });\n\n        var geoJSONObject = this.writeFeaturesObject(features, options);\n\n        // ajout des properties  la racine du fichier\n        // ex. options : {\n        //   extensions : { /* liste des objets  ajouter */ }\n        // }\n        if (this.options.hasOwnProperty(\"extensions\")) {\n            Object.assign(geoJSONObject, this.options.extensions);\n        }\n\n        return JSON.stringify(geoJSONObject);\n    }\n\n    /**\n     * ...\n     * @param {*} key ...\n     * @returns {Object} json\n     */\n    readRootExtensions (key) {\n        return this.source[key];\n    }\n\n};\n\nexport default GeoJSON;\n\n// Expose GeoJSON as ol.source.GeoJSONExtended. (for a build bundle)\nif (window.ol && window.ol.format) {\n    window.ol.format.GeoJSONExtended = GeoJSON;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.format.KML;","// import openlayers\nimport olKML from \"ol/format/KML\";\nimport {\n    Fill,\n    Icon,\n    Stroke,\n    Style,\n    Text,\n    Circle\n} from \"ol/style\";\n// import local\nimport Styling from \"./Styling\";\nimport Color from \"../Utils/ColorUtils\";\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Parser from \"../Utils/Parser\";\nimport Utils from \"../Utils/Helper\";\n\nvar logger = Logger.getLogger(\"extended KML format\");\n\n/**\n * @classdesc\n *\n * Extended Styles KML format to export (internal use only !)\n *\n * INFO\n * only ol.Control is a user-extendable class.\n * Everything else requires integration with the original openlayers source and a new ol.js\n * to be built with your new classes incorporated.\n *\n * SPEC\n * cf. https://developers.google.com/kml/forum/advanced\n *\n * ISSUES\n * cf. https://github.com/openlayers/openlayers/issues/4829\n * cf. https://github.com/openlayers/openlayers/issues/4460\n * cf. https://github.com/openlayers/openlayers/pull/5590\n * cf. https://github.com/openlayers/openlayers/issues/5229\n * cf. https://github.com/openlayers/openlayers/issues/3371\n *\n * @constructor\n * @alias ol.format.KMLExtended\n * @type {ol.format.KMLExtended}\n * @extends {ol.format.KML}\n * @param {Object} options - Options\n * @param {Object} [options.extensions] - Add properties to file root\n */\nvar KML = class KML extends olKML {\n\n    /**\n     * See {@link ol.format.KMLExtended}\n     * @module KMLExtended\n     * @alias module:~formats/KMLExtended\n     * @param {*} options - options\n     * @example\n     * import KMLExtended from \"gpf-ext-ol/formats/KMLExtended\"\n     * ou \n     * import { KMLExtended } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        super(options);\n\n        if (!(this instanceof KML)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        options = options || {};\n\n        // INFO\n        // source DOM (Document ou Node)\n        this.source = null;\n\n        // INFO\n        // gestion des extensions\n        this.extensions = options.extensions || null;\n\n        // INFO\n        // defaultStyle est un tableau d'objet de type Style\n        if (options.defaultStyle && !Array.isArray(options.defaultStyle)) {\n            options.defaultStyle = [options.defaultStyle];\n        }\n\n        if (options.defaultStyle === null || typeof options.defaultStyle === \"undefined\") {\n            options.defaultStyle = [];\n        }\n\n        return this;\n    }\n\n    /**\n     *\n     * En lecture, on surcharge la mthode readFeatures.\n     *  In : kml string + features du format original\n     *  Out : features tendus avec des styles, et des metadatas (name ou extendData)\n     * > on modifie les features du format original avec les fonctionnalits non gres.\n     *\n     * En criture, on surcharge la mthode writeFearures.\n     *  In : kml du format original + features tendus\n     *  Out : kml tendu avec des styles, et des metadatas (name ou extendData)\n     * > on modifie le kml gnr par le format original avec les fonctionnalits que nous avons ajoutes aux features.\n     *\n     * Le principe\n     * On parse le kml, et on lit (get) ou on ajoute (set) des fonctionnalits.\n     *\n     * Les getters vont lire le kml (ex. LabelExtendStyle), et ajouter le style ainsi que le nom du label dans le feature original.\n     * getLabelIconStyle (appel des 2 fonctions suivantes)\n     * getLabelExtendStyle (New)\n     * getHotSpotIconStyle (Bug sur la lecture du  hotspot)\n     * getExtendData (New)\n     *\n     * Les setters vont crire dans le dom du kml original les fonctionnalits ajoutes dans les features.\n     * setLabelExtendStyle (New)\n     * setHotSpotIconStyle (Bug sur l'criture du hotspot)\n     * setNameData (Bug suppression de cette balise du format par dfaut).\n     *\n     */\n\n    /**\n     * Fonction de lecture du KML avec fonction de traitement en fonction du type\n     * PlaceMark (Label ou Marker).\n     * Les traitements sont de 2 types :\n     *  - creation de styles tendus ou correctifs sur le KML\n     *  - ajout de styles tendus sur les features\n     *\n     * @param {DOMElement} kmlNode - kml nodes\n     * @param {Object[]} features - features\n     * @param {Object} process - process\n     *\n     * @example\n     * // ajoute des fonctionnalits dans le KML\n     * _processKml(kmlDoc, {\n     *   labelStyle : createStyleLabel,\n     *   iconStyle  : createStyleIcon\n     * });\n     *\n     * // lit des fonctionnalits du KML non impl. par OpenLayers\n     * _processKml(kmlNode, {\n     *   labelStyle : getStyleToFeatureLabel,\n     *   iconStyle  : getStyleToFeatureIcon,\n     *   extendedData : getExtendedData\n     * });\n     */\n    _processKml (kmlNode, features, process) {\n        var firstNodeLevel = (kmlNode.nodeName === \"#document\") ? kmlNode.childNodes[0].childNodes : kmlNode.childNodes;\n\n        // Si le DOM contient un seul objet, le noeud est directement un PlaceMark\n        // sinon, c'est un ensemble de noeuds PlaceMark contenus dans le noeud Document.\n        var nodes = firstNodeLevel;\n        for (var ik = 0; ik < firstNodeLevel.length; ik++) {\n            const element = firstNodeLevel[ik];\n            if (element.nodeName === \"Document\") {\n                nodes = element.childNodes;\n                break;\n            }\n            if (element.nodeName === \"Placemark\") {\n                nodes = [element];\n                break;\n            }\n        }\n\n        // On recherche les PlaceMark de type Point ayant un Style...\n        // Le style peut tre plac directement dans le PlaceMark\n        // ou li avec un id (share)\n        var stylesUrl = {}; // listes des styles\n        var index = -1; // index du features...\n        for (var i = 0; i < nodes.length; i++) {\n            var node = nodes[i];\n            switch (node.nodeName) {\n                case \"Style\":\n                    // INFO\n                    // pour le traitement des balises Styles lies avec styleUrl,\n                    // elles doivent tre toujours dclares avant les PlaceMark !\n                    // On ne prend en compte que celles qui sont identifies via un ID !\n                    var id = node.attributes[0];\n                    if (id && id.nodeName === \"id\") {\n                        var _k = id.nodeValue;\n                        var _v = node;\n                        stylesUrl[_k] = _v;\n                    }\n                    break;\n\n                case \"Placemark\":\n\n                    index++;\n                    var types = node.childNodes; // Point, LineString, Polygon, Style, ...\n                    var point = false;\n                    var line = false;\n                    var poly = false;\n                    var domStyles = null; // dom\n                    var hdlDomStyle = null; // dom\n                    var domExtendedData = null; // dom\n                    var domNameTag = node; // dom\n                    for (var j = 0; j < types.length; j++) {\n                        switch (types[j].nodeName) {\n                            case \"Polygon\":\n                                poly = true;\n                                break;\n                            case \"LineString\":\n                                line = true;\n                                break;\n                            case \"Point\":\n                                point = true;\n                                break;\n                            case \"Style\":\n                                hdlDomStyle = types[j];\n                                domStyles = types[j].childNodes; // liste de styles\n                                break;\n                            case \"styleUrl\":\n                                // style avec lien vers...\n                                var _idStyle = types[j].textContent.slice(1);\n                                if (stylesUrl[_idStyle]) {\n                                    domStyles = stylesUrl[_idStyle].childNodes;\n                                }\n                                break;\n                            case \"ExtendedData\":\n                                domExtendedData = types[j].childNodes;\n                                break;\n                            case \"name\":\n                                domNameTag = null;\n                                break;\n                            default:\n                                // on ne traite pas les autres informations ...\n                                // car elles seront gres par defaut par le format standard...\n                        }\n                    }\n\n                    // On traite les balises kml:extendedData pour tous les objets !\n                    if (domExtendedData) {\n                        logger.log(\"ExtendedData :\", domExtendedData);\n                        var fctExtend = process.extendedData;\n                        if (fctExtend && typeof fctExtend === \"function\") {\n                            fctExtend(features[index], domExtendedData);\n                        }\n                    }\n\n                    // On traite la balise kml:name\n                    if (domNameTag) {\n                        logger.log(\"Name :\", domNameTag);\n                        var fctName = process.nameData;\n                        if (fctName && typeof fctName === \"function\") {\n                            fctName(features[index], domNameTag);\n                        }\n                    }\n\n                    // On a un Marker avec un Style.\n                    // Il peut tre associ avec un Label !\n                    // Les markers sans styles ne doivent pas tre gres par les styles par defaut\n                    // car le KML met en place une punaise google !\n                    if (point && domStyles && domStyles.length !== 0) {\n                        var labelStyleDom = null;\n                        var iconStyleDom = null;\n                        // On recherche le type de Style\n                        for (var k = 0; k < domStyles.length; k++) {\n                            switch (domStyles[k].nodeName) {\n                                case \"LabelStyle\":\n                                    labelStyleDom = domStyles[k];\n                                    break;\n                                case \"IconStyle\":\n                                    iconStyleDom = domStyles[k];\n                                    break;\n                                default:\n                                    // on ne traite pas les autres informations ...\n                            }\n                        }\n\n                        // Pour un label, il nous faut un titre !\n                        var labelName = features[index].getProperties().name;\n                        var labelDescription = features[index].getProperties().description;\n                        var value = labelName || labelDescription;\n                        logger.trace(value);\n\n                        // C'est uniquement un Label !\n                        if (!iconStyleDom && labelStyleDom) {\n                            var fctLabel = process.labelStyle;\n                            if (fctLabel && typeof fctLabel === \"function\") {\n                                fctLabel(features[index], labelStyleDom);\n                            }\n                        // C'est uniquement un marker !\n                        } else if (iconStyleDom && !labelStyleDom) {\n                            var fctIcon = process.iconStyle;\n                            if (fctIcon && typeof fctIcon === \"function\") {\n                                fctIcon(features[index], iconStyleDom);\n                            }\n                        // C'est un marker avec un label !\n                        } else if (iconStyleDom && labelStyleDom) {\n                            var fctIconLabel = process.iconLabelStyle;\n                            if (fctIconLabel && typeof fctIconLabel === \"function\") {\n                                fctIconLabel(features[index], iconStyleDom, labelStyleDom);\n                            }\n                        } else {\n                            // ...\n                        }\n                    } else {\n                        var feature = features[index];\n                        var style = feature.getStyle();\n                        if (style && typeof style === \"function\") {\n                            var fstyles = style.call(this, feature, 0);\n                            if (fstyles && fstyles.length !== 0) {\n                                style = fstyles[0];\n                            }\n                        }\n\n                        if (poly) {\n                            var fctPoly = process.polygonStyle;\n                            if (fctPoly && typeof fctPoly === \"function\") {\n                                fctPoly(features[index], domStyles);\n                            }\n                        }\n\n                        if (line) {\n                            var fctLine = process.lineStringStyle;\n                            if (fctLine && typeof fctLine === \"function\") {\n                                fctLine(features[index], domStyles);\n                            }\n                        }\n\n                        // INFO\n                        // On est sur un Point mais sans style dans le DOM.\n                        // On regarde le style dans le Feature : Icon ou Circle ?\n                        if (point && style) {\n                            var image = style.getImage();\n                            if (image && image instanceof Circle) {\n                                var fctCircle = process.circleStyle;\n                                if (fctCircle && typeof fctCircle === \"function\") {\n                                    fctCircle(features[index], hdlDomStyle);\n                                }\n                            } else if (image && image instanceof Icon) {\n                                var fctPoint = process.pointStyle;\n                                if (fctPoint && typeof fctPoint === \"function\") {\n                                    fctPoint(features[index], hdlDomStyle);\n                                }\n                            } else {\n                                // ...\n                            }\n                        }\n                    }\n                    break;\n                default:\n                    logger.trace(\"tag is not processing !\");\n            }\n        }\n    }\n\n    /**\n     * Write Extend for Features.\n     * This function overloads ol.format.KML.writeFeatures ...\n     *\n     * @see ol.format.KML.prototype.writeFeatures\n     * @param {Object[]} features - Features.\n     * @param {Object} options - Options.\n     *\n     * @return {String} kml string formatted\n     */\n    writeFeatures (features, options) {\n        logger.log(\"overload : ol.format.KML.writeFeatures\");\n        var kmlNode = super.writeFeaturesNode(features, options);\n        if (kmlNode === null) {\n            return null;\n        }\n\n        // on ajoute les extensions  la racine pour les metadonnes de calcul\n        if (this.hasOwnProperty(\"extensions\")) {\n            this._writeRootExtensions(kmlNode, this.extensions);\n        }\n\n        // On ajoute les styles tendus\n        var kmlStringExtended = this._writeExtendStylesFeatures(kmlNode, features, options);\n\n        // On realise un formattage du KML\n        var kmlStringFormatted = Parser.format(kmlStringExtended);\n        if (kmlStringFormatted === \"\") {\n            return null;\n        }\n\n        return kmlStringFormatted;\n    };\n\n    /**\n     * Write Extended Styles for each features\n     *\n     * @param {DOMElement} kmlNode - kml nodes\n     * @param {Object[]} features - features\n     * @param {Object} options - options\n     *\n     * @returns {String} kml string extended\n     *\n     * @private\n     */\n    _writeExtendStylesFeatures (kmlNode, features, options) {\n        // RGB Colors (RRGGBB) To KML Colors (AABBGGRR)\n        function __convertRGBColorsToKML (data, opacity) {\n            var strColor = data.toString(16);\n\n            if (strColor.charAt(0) === \"#\") {\n                strColor = strColor.slice(1);\n            }\n\n            opacity = opacity || 1;\n            opacity = parseInt(opacity * 255, 10);\n            opacity = opacity.toString(16);\n            var color = opacity;\n            color = color + strColor.substr(4, 2);\n            color = color + strColor.substr(2, 2);\n            color = color + strColor.substr(0, 2);\n            return color.toLowerCase();\n        }\n\n        /**\n         * C'est un Label !\n         * On va donc y ajouter qq styles sur le Label (police, halo, ...) :\n         * Insertion : PlaceMark>Style>LabelStyle\n         *\n         * @param {Object} feature - feature\n         * @param {DOMElement} node - node\n         *\n         * @example\n         *      <LabelStyleSimpleExtensionGroup fontFamily=\"Arial\" haloColor=\"16777215\" haloRadius=\"2\" haloOpacity=\"1\"/>\n         */\n        var __createExtendedStyleLabel = function (feature, node) {\n            logger.trace(\"label with style :\", node);\n\n            if (!feature) {\n                return;\n            }\n\n            // Si pas de style defini, c'est donc que l'on va utiliser celui par defaut...\n            if (feature.getStyle() instanceof Style) {\n                var textStyle = feature.getStyle().getText();\n                if (!textStyle) {\n                    return;\n                }\n\n                var _fontFamily = \"Sans\";\n                var _fontSize = \"16px\";\n                var _font = textStyle.getFont();\n                if (_font) {\n                    var splits = _font.split(\" \", 2);\n                    _fontSize = splits[0];\n                    _fontFamily = splits[1];\n                }\n\n                var strokeTextStyle = feature.getStyle().getText().getStroke();\n                if (!strokeTextStyle) {\n                    return;\n                }\n                if (strokeTextStyle instanceof Stroke) {\n                    var _haloColor = __convertRGBColorsToKML(\"#FFFFFF\"); // Par defaut\n                    var color = strokeTextStyle.getColor();\n                    // array ?\n                    if (Array.isArray(color)) {\n                        var cf = \"rgba(\";\n                        cf += color[0] + \",\";\n                        cf += color[1] + \",\";\n                        cf += color[2] + \",\";\n                        cf += color[3] + \")\";\n                        color = cf;\n                    }\n                    if (Color.isRGB(color)) {\n                        var colorHex = Color.rgbaToHex(color);\n                        _haloColor = __convertRGBColorsToKML(colorHex.hex, colorHex.opacity);\n                    } else {\n                        _haloColor = __convertRGBColorsToKML(color);\n                    }\n                    var _haloRadius = strokeTextStyle.getWidth() || \"0\";\n                    var _haloOpacity = \"1\"; // TODO lire param\n\n                    if (node && node.getElementsByTagName(\"LabelStyleSimpleExtensionGroup\").length === 0) {\n                        var labelExtended = document.createElementNS(kmlNode.namespaceURI, \"LabelStyleSimpleExtensionGroup\");\n                        labelExtended.setAttribute(\"fontSize\", _fontSize);\n                        labelExtended.setAttribute(\"fontFamily\", _fontFamily);\n                        labelExtended.setAttribute(\"haloColor\", _haloColor);\n                        labelExtended.setAttribute(\"haloRadius\", _haloRadius);\n                        labelExtended.setAttribute(\"haloOpacity\", _haloOpacity);\n                        node.appendChild(labelExtended);\n                    }\n                }\n\n                var fImageStyle = feature.getStyle().getImage();\n                if (!fImageStyle) {\n                    return;\n                }\n                if (fImageStyle instanceof Circle) {\n                    var strokeColor = null;\n                    var strokeWidth = null;\n                    if (fImageStyle.getStroke()) {\n                        strokeWidth = fImageStyle.getStroke().getWidth();\n                        strokeColor = fImageStyle.getStroke().getColor();\n                        // array ?\n                        if (Array.isArray(strokeColor)) {\n                            var cfs = \"rgba(\";\n                            cfs += strokeColor[0] + \",\";\n                            cfs += strokeColor[1] + \",\";\n                            cfs += strokeColor[2] + \",\";\n                            cfs += strokeColor[3] + \")\";\n                            strokeColor = cfs;\n                        }\n                        if (Color.isRGB(strokeColor)) {\n                            var strokeColorHex = Color.rgbaToHex(strokeColor);\n                            strokeColor = __convertRGBColorsToKML(strokeColorHex.hex, strokeColorHex.opacity);\n                        } else {\n                            strokeColor = __convertRGBColorsToKML(strokeColor);\n                        }\n                    }\n\n                    var fillColor = null;\n                    if (fImageStyle.getFill()) {\n                        fillColor = fImageStyle.getFill().getColor();\n                        // array ?\n                        if (Array.isArray(fillColor)) {\n                            var cff = \"rgba(\";\n                            cff += fillColor[0] + \",\";\n                            cff += fillColor[1] + \",\";\n                            cff += fillColor[2] + \",\";\n                            cff += fillColor[3] + \")\";\n                            fillColor = cff;\n                        }\n                        if (Color.isRGB(fillColor)) {\n                            var fillColorHex = Color.rgbaToHex(fillColor);\n                            fillColor = __convertRGBColorsToKML(fillColorHex.hex, fillColorHex.opacity);\n                        } else {\n                            fillColor = __convertRGBColorsToKML(fillColor);\n                        }\n                    }\n\n                    if (node && node.getElementsByTagName(\"ObjectSimpleExtensionGroup\").length === 0) {\n                        var iconExtended = document.createElementNS(kmlNode.namespaceURI, \"ObjectSimpleExtensionGroup\");\n                        iconExtended.setAttribute(\"type\", \"circle\"); // FIXME type circle only !\n                        iconExtended.setAttribute(\"radius\", fImageStyle.getRadius());\n                        iconExtended.setAttribute(\"fillColor\", fillColor);\n                        iconExtended.setAttribute(\"strokeColor\", strokeColor);\n                        iconExtended.setAttribute(\"strokeWidth\", strokeWidth);\n                        node.appendChild(iconExtended);\n                    }\n                }\n            }\n        };\n\n        /**\n         * C'est un marker !\n         * On va donc ajouter la balise hotspot :\n         *  Traiter le cas o les units sont de type\n         *   - FRACTION\n         *   - PIXELS\n         *  Insertion du correctif dans le noeud : <PlaceMark><Style>IconStyle\n         *\n         * @param {Object} feature - ol feature\n         * @param {DOMElement} node - node\n         *\n         *  @example\n         *  <Style><IconStyle>\n         *      <hotSpot x=\"0.5\"  y=\"1\" xunits=\"fraction\" yunits=\"fraction\"/>\n         *  </IconStyle></Style>\n         */\n        var __createExtendedStyleIcon = function (feature, node) {\n            logger.trace(\"marker with style (hotspot):\", node);\n\n            if (!feature) {\n                return;\n            }\n\n            // Si pas de style defini, c'est donc que l'on va utiliser celui par defaut...\n            if (feature.getStyle() instanceof Style) {\n                var fImageStyle = feature.getStyle().getImage();\n\n                if (!fImageStyle) {\n                    return;\n                }\n\n                if (fImageStyle instanceof Icon) {\n                    var x = 0;\n                    var y = 0;\n                    var xunits = \"pixels\";\n                    var yunits = \"pixels\";\n\n                    var size = fImageStyle.getSize();\n                    var anchor = fImageStyle.getAnchor(); // pixels ! but anchor_ in the current unit !\n\n                    if (anchor.length) {\n                        x = anchor[0];\n                        y = anchor[1];\n                        if (yunits === \"fraction\") {\n                            y = (y === 1) ? 0 : 1 - y; // cf. fixme contribution  faire !\n                        } else {\n                            y = (yunits === \"pixels\" && y === size[1]) ? 0 : size[1] - y; // cf. fixme contribution  faire !\n                        }\n                    }\n\n                    if (node && node.getElementsByTagName(\"hotSpot\").length === 0) {\n                        var hotspot = document.createElementNS(kmlNode.namespaceURI, \"hotSpot\");\n                        hotspot.setAttribute(\"x\", x);\n                        hotspot.setAttribute(\"y\", y);\n                        hotspot.setAttribute(\"xunits\", xunits);\n                        hotspot.setAttribute(\"yunits\", yunits);\n                        node.appendChild(hotspot);\n                    }\n                }\n            }\n        };\n\n        /**\n         * ...\n         * @param {*} feature - feature\n         * @param {DOMElement} node - node\n         */\n        var __createExtendedStyleToCircle = function (feature, node) {\n            if (!feature) {\n                return;\n            }\n\n            // Si pas de style defini, c'est donc que l'on va utiliser celui par defaut...\n            if (feature.getStyle() instanceof Style) {\n                var fImageStyle = feature.getStyle().getImage();\n                if (!fImageStyle) {\n                    return;\n                }\n                if (fImageStyle instanceof Circle) {\n                    var strokeColor = null;\n                    var strokeWidth = null;\n                    if (fImageStyle.getStroke()) {\n                        strokeWidth = fImageStyle.getStroke().getWidth();\n                        strokeColor = fImageStyle.getStroke().getColor();\n                        // array ?\n                        if (Array.isArray(strokeColor)) {\n                            var cf = \"rgba(\";\n                            cf += strokeColor[0] + \",\";\n                            cf += strokeColor[1] + \",\";\n                            cf += strokeColor[2] + \",\";\n                            cf += strokeColor[3] + \")\";\n                            strokeColor = cf;\n                        }\n                        if (Color.isRGB(strokeColor)) {\n                            var colorHex = Color.rgbaToHex(strokeColor);\n                            strokeColor = __convertRGBColorsToKML(colorHex.hex, colorHex.opacity);\n                        } else {\n                            strokeColor = __convertRGBColorsToKML(strokeColor);\n                        }\n                    }\n\n                    var fillColor = null;\n                    if (fImageStyle.getFill()) {\n                        fillColor = fImageStyle.getFill().getColor();\n                        // array ?\n                        if (Array.isArray(fillColor)) {\n                            var cfi = \"rgba(\";\n                            cfi += fillColor[0] + \",\";\n                            cfi += fillColor[1] + \",\";\n                            cfi += fillColor[2] + \",\";\n                            cfi += fillColor[3] + \")\";\n                            fillColor = cfi;\n                        }\n                        if (Color.isRGB(fillColor)) {\n                            var fillColorImgHex = Color.rgbaToHex(fillColor);\n                            fillColor = __convertRGBColorsToKML(fillColorImgHex.hex, fillColorImgHex.opacity);\n                        } else {\n                            fillColor = __convertRGBColorsToKML(fillColor);\n                        }\n                    }\n\n                    if (node && node.getElementsByTagName(\"ObjectSimpleExtensionGroup\").length === 0) {\n                        var labelStyle = document.createElementNS(kmlNode.namespaceURI, \"LabelStyle\");\n                        var circleExtended = document.createElementNS(kmlNode.namespaceURI, \"ObjectSimpleExtensionGroup\");\n                        circleExtended.setAttribute(\"type\", \"circle\"); // FIXME type circle only !\n                        circleExtended.setAttribute(\"radius\", fImageStyle.getRadius());\n                        circleExtended.setAttribute(\"fillColor\", fillColor);\n                        circleExtended.setAttribute(\"strokeColor\", strokeColor);\n                        circleExtended.setAttribute(\"strokeWidth\", strokeWidth);\n                        labelStyle.appendChild(circleExtended);\n                        node.appendChild(labelStyle);\n                    }\n                }\n            }\n        };\n\n        /**\n         * ...\n         * @param {*} feature - feature\n         * @param {DOMElement} node - node\n         */\n        var __createExtendedStyleToPoint = function (feature, node) {};\n\n        // TODO\n        var __createExtendedStyleToIconLabel = function (feature, nodeIconStyle, nodeLabelStyle) {\n            logger.trace(\"write an icon with a label\");\n            __createExtendedStyleIcon(feature, nodeIconStyle);\n            __createExtendedStyleLabel(feature, nodeLabelStyle);\n        };\n\n        // TODO\n        var __setNameData = function (feature, tags) {\n            for (var i = 0; i < tags.length; i++) {\n                var tag = tags[i];\n                if (tag.nodeName === \"name\") {\n                    return;\n                }\n            }\n\n            var labelName = feature.getProperties().name;\n            if (labelName) {\n                var name = document.createElement(\"name\");\n                name.innerHTML = labelName;\n                tags.appendChild(name);\n            }\n        };\n\n        // TODO\n        var _setExtendedDataStyle = function (feature, node) {\n            if (node && node.length) {\n                var removeNodes = [];\n                for (var k = 0; k < node.length; k++) {\n                    const element = node[k];\n                    if (element.nodeName === \"Data\") {\n                        var key = element.getAttribute(\"name\");\n                        if (Styling.getListTags().includes(key)) {\n                            removeNodes.push(element);\n                        }\n                    }\n                }\n                if (removeNodes && removeNodes.length) {\n                    removeNodes.forEach(e => {\n                        e.remove();\n                    });\n                }\n            }\n        };\n\n        // On ajoute les styles tendus dans le DOM\n        this._processKml(kmlNode, features, {\n            labelStyle : __createExtendedStyleLabel,\n            iconStyle : __createExtendedStyleIcon,\n            iconLabelStyle : __createExtendedStyleToIconLabel,\n            circleStyle : __createExtendedStyleToCircle,\n            pointStyle : __createExtendedStyleToPoint,\n            nameData : __setNameData,\n            extendedData : _setExtendedDataStyle\n        });\n\n        // On convertit le DOM en String...\n        var kmlStringExtended = Parser.toString(kmlNode);\n        if (!kmlStringExtended) {\n            return null;\n        }\n\n        return kmlStringExtended;\n    };\n\n    /**\n     * ...\n     *\n     * @param {*} kmlNode - ...\n     * @param {*} extensions - ...\n     */\n    _writeRootExtensions (kmlNode, extensions) {\n        var extendDataElement = document.createElementNS(kmlNode.namespaceURI, \"ExtendedData\");\n        // on boucle sur toutes les clefs\n        for (const key in extensions) {\n            if (Object.hasOwnProperty.call(extensions, key)) {\n                const value = extensions[key];\n                var dataElement = document.createElementNS(kmlNode.namespaceURI, \"Data\");\n                dataElement.setAttribute(\"name\", key);\n                var data = document.createTextNode(JSON.stringify(value));\n                dataElement.appendChild(data);\n                extendDataElement.appendChild(dataElement);\n            }\n        }\n        // insertion en 1ere place !\n        var firstChild = kmlNode.firstChild;\n        kmlNode.insertBefore(extendDataElement, firstChild);\n    }\n\n    /**\n     * Read Extend for Features.\n     * This function overloads ol.format.KML.readFeatures ...\n     *\n     * @see ol.format.KML.prototype.readFeatures\n     * @param {Document|Node} source - Source.\n     * @param {olx.format.ReadOptions=} options - options.\n     * @return {Array.<ol.Feature>} Features.\n     */\n    readFeatures (source, options) {\n        logger.log(\"overload : ol.format.KML.readFeatures\");\n\n        // String ou Dom\n        if (typeof source === \"string\") {\n            this.source = Parser.parse(source);\n        } else if (source !== null) {\n            this.source = source;\n        }\n\n        var features = this._readExtendStylesFeatures(source, options);\n        logger.trace(\"Styles tendus\", features);\n\n        // On met  jour les attributs de style dans les features\n        features.forEach(feature => {\n            Styling.definePropertiesFromStyle(feature);\n        });\n\n        return features;\n    };\n\n    /**\n     * Read Extended Styles for each features\n     *\n     * @param {(Document|Node|ArrayBuffer|Object|String)} source - source\n     * @param {olx.format.ReadOptions=} options - options\n     *\n     * @returns {Object[]} features\n     *\n     * @private\n     */\n    _readExtendStylesFeatures (source, options) {\n        var features = super.readFeatures(source, options);\n\n        var kmlDoc = null;\n        var kmlString = \"\";\n\n        if (typeof source === \"string\") {\n            kmlString = source;\n        } else {\n            kmlString = source.documentElement.outerHTML;\n        }\n\n        // On 'deformatte' le KML afin d'eviter des pb de parsing...\n        kmlString = kmlString.replace(/\\n/g, \"\");\n        kmlString = kmlString.replace(/(>)\\s*(<)/g, \"$1$2\");\n\n        // On met en place un Parser sur le KML\n        kmlDoc = Parser.parse(kmlString);\n\n        if (kmlDoc === null) {\n            // au cas o...\n            return features;\n        }\n\n        // KML Colors (AABBGGRR) To RGB Colors (RRGGBB)\n        function __convertKMLColorsToRGB (data) {\n            var color = \"\";\n            color = color + data.substr(6, 2);\n            color = color + data.substr(4, 2);\n            color = color + data.substr(2, 2);\n            var hex = parseInt(color, 16).toString(16);\n            var comp = \"\";\n            var len = hex.length || 0;\n            for (var i = 0; i < (6 - len); i++) {\n                comp += \"0\";\n            }\n            hex = \"#\" + comp + hex;\n            return hex;\n        }\n\n        /**\n         * Gestion des styles tendus sur le Label\n         *\n         * @param {Object} feature - ol feature\n         * @param {DOMElement} node - node\n         *\n         * @example\n         * <Placemark>\n         *  <description>Un label</description>\n         *  <name>C'est un label tendu !</name>\n         *  <Style>\n         *    <IconStyle>\n         *      <Icon>\n         *        <href>data:image/png;base64,...</href>\n         *      </Icon>\n         *    </IconStyle>\n         *    <LabelStyle>\n         *      <color>ffffffff</color>\n         *      <colorMode>normal</colorMode>\n         *      <scale>1.85</scale>\n         *      <LabelStyleSimpleExtensionGroup haloColor=\"16711680\" haloRadius=\"5\" haloOpacity=\"1\"/>\n         *    </LabelStyle>\n         *  </Style>\n         *  <Point>\n         *    <coordinates>2,48</coordinates>\n         *  </Point>\n         * </Placemark>\n         */\n        var __getExtendedStyleToFeatureLabel = function (feature, node) {\n            logger.trace(\"label with style :\", node);\n\n            if (!feature) {\n                return;\n            }\n\n            // label\n            var _text = feature.getProperties().name;\n            var _color = __convertKMLColorsToRGB(\"ff000000\"); // \"#000000\"\n            var _colorHalo = \"#FFFFFF\";\n            var _radiusHalo = 0;\n            // var _opacityHalo = 1; // TODO\n            var _font = \"Sans\";\n            var _fontSize = \"16px\";\n\n            // cercle\n            var _circleType = null;\n            var _circleRadius = 5;\n            var _circleFillColor = \"#000000\";\n            var _circleStrokeColor = \"#ffffff\";\n            var _circleStrokeWidth = 1;\n\n            // On recherche les balises du Style\n            var bLabelStyleSimpleExtensionGroup = false;\n            var bObjectSimpleExtensionGroup = false;\n            var nodeStyles = node.childNodes;\n            for (var k = 0; k < nodeStyles.length; k++) {\n                switch (nodeStyles[k].nodeName) {\n                    case \"scale\":\n                        // TODO\n                        break;\n                    case \"colorMode\":\n                        // TODO\n                        break;\n                    case \"color\":\n                        _color = __convertKMLColorsToRGB(nodeStyles[k].textContent);\n                        break;\n                    case \"LabelStyleSimpleExtensionGroup\":\n                        bLabelStyleSimpleExtensionGroup = true;\n                        var attributs = nodeStyles[k].attributes;\n                        for (var l = 0; l < attributs.length; l++) {\n                            switch (attributs[l].nodeName) {\n                                case \"fontFamily\":\n                                    _font = attributs[l].nodeValue;\n                                    break;\n                                case \"fontSize\":\n                                    _fontSize = attributs[l].nodeValue;\n                                    break;\n                                case \"haloColor\":\n                                    _colorHalo = __convertKMLColorsToRGB(attributs[l].nodeValue);\n                                    break;\n                                case \"haloRadius\":\n                                    _radiusHalo = parseInt(attributs[l].nodeValue, 10);\n                                    break;\n                                case \"haloOpacity\":\n                                    // _opacityHalo = parseFloat(attributs[l].nodeValue);\n                                    // TODO opacit !\n                                    // if (_opacityHalo !== 1) {\n                                    //     _colorHalo = Color.hexToRgba(_colorHalo, _opacityHalo);\n                                    // }\n                                    break;\n                                default:\n                            }\n                        }\n                        break;\n                    case \"ObjectSimpleExtensionGroup\":\n                        bObjectSimpleExtensionGroup = true;\n                        var attributsExt = nodeStyles[k].attributes;\n                        for (var ll = 0; ll < attributsExt.length; ll++) {\n                            // type=\"circle\" radius=\"15\" fillColor=\"7f3737a0\" strokeColor=\"cc000000\" strokeWidth=\"2\"\n                            switch (attributsExt[ll].nodeName) {\n                                case \"type\":\n                                    _circleType = attributsExt[ll].nodeValue;\n                                    break;\n                                case \"radius\":\n                                    _circleRadius = parseInt(attributsExt[ll].nodeValue, 10);\n                                    break;\n                                case \"fillColor\":\n                                    var fillColorValue = attributsExt[ll].nodeValue;\n                                    var fillOpacity = Math.round((Color.num(fillColorValue.substr(0, 2)) / 255) * 10) / 10;\n                                    var fillColorHexa = __convertKMLColorsToRGB(fillColorValue);\n                                    _circleFillColor = Color.hexToRgba(fillColorHexa, fillOpacity);\n                                    break;\n                                case \"strokeColor\":\n                                    var strokeColorValue = attributsExt[ll].nodeValue;\n                                    var strokeOpacity = Math.round((Color.num(strokeColorValue.substr(0, 2)) / 255) * 10) / 10;\n                                    var strokeColorHexa = __convertKMLColorsToRGB(strokeColorValue);\n                                    _circleStrokeColor = Color.hexToRgba(strokeColorHexa, strokeOpacity);\n                                    break;\n                                case \"strokeWidth\":\n                                    _circleStrokeWidth = parseInt(attributsExt[ll].nodeValue, 10);\n                                    break;\n                                default:\n                            }\n                        }\n                        break;\n                    default:\n                        // on ne traite pas les autres informations ...\n                }\n            }\n\n            var StyleInstance = null;\n            if (bObjectSimpleExtensionGroup && _circleType === \"circle\") {\n                StyleInstance = new Circle({\n                    radius : _circleRadius,\n                    fill : new Fill({\n                        color : _circleFillColor\n                    }),\n                    stroke : new Stroke({\n                        color : _circleStrokeColor,\n                        width : _circleStrokeWidth\n                    })\n                });\n            } else if (bLabelStyleSimpleExtensionGroup) {\n                // INFO\n                // on ajoute une image magique 1x1 pixel invisible\n                // afin d'eviter l'affichage d'une punaise google !\n                StyleInstance = new Icon({\n                    src : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=\",\n                    size : [51, 38],\n                    anchor : [25.5, 38],\n                    anchorOrigin : \"top-left\",\n                    anchorXUnits : \"pixels\",\n                    anchorYUnits : \"pixels\"\n                });\n            } else {\n                // ...\n            }\n            // On reconstruit le style !\n            feature.setStyle(new Style({\n                image : StyleInstance,\n                text : new Text({\n                    font : _fontSize + \" \" + _font,\n                    textAlign : \"left\",\n                    text : _text,\n                    // offsetX : 5, // FIXME valeur arbitraire MAIS esthtique !\n                    fill : new Fill({\n                        color : _color\n                    }),\n                    stroke : new Stroke({\n                        color : _colorHalo,\n                        width : _radiusHalo\n                    })\n                })\n            }));\n        };\n\n        /**\n         * Gestion des styles tendus sur un Marker\n         *\n         * > correctif sur la balise kml:hostSpot\n         * - problme avec 'hotspot y === 0' (?)\n         *\n         * @param {Object} feature - ol feature\n         * @param {DOMElement} node - node\n         *\n         * @example\n         * <Placemark>\n         *   <Style>\n         *     <IconStyle>\n         *       <Icon>\n         *         <href>data:image/png;base64,...</href>\n         *       </Icon>\n         *       <hotSpot x=\"25.5\" y=\"0\" xunits=\"pixels\" yunits=\"pixels\"/>\n         *     </IconStyle>\n         *   </Style>\n         *   <Point>\n         *     <coordinates>2,48</coordinates>\n         *   </Point>\n         * </Placemark>\n         */\n        var __getExtendedStyleToFeatureIcon = function (feature, node) {\n            logger.trace(\"hotspot :\", node);\n\n            // marker\n            var _src = null;\n            var _scale = null;\n            var _color = __convertKMLColorsToRGB(\"ffffffff\");\n\n            var _bSizeIcon = false;\n            var _sizeW = 51;\n            var _sizeH = 38;\n\n            var _bHotSpot = false;\n            var _anchorX = 25.5;\n            var _anchorXUnits = \"pixels\";\n            var _anchorY = 38;\n            var _anchorYUnits = \"pixels\";\n\n            var nodeStyles = node.childNodes;\n            var bIconStyle = false;\n            for (var k = 0; k < nodeStyles.length; k++) {\n                switch (nodeStyles[k].nodeName) {\n                    case \"Icon\":\n                        bIconStyle = true;\n                        var nodes = nodeStyles[k].childNodes;\n                        for (var i = 0; i < nodes.length; i++) {\n                            switch (nodes[i].nodeName) {\n                                case \"href\":\n                                    _src = nodes[i].textContent;\n                                    break;\n                                case \"gx:w\":\n                                    _bSizeIcon = true;\n                                    _sizeW = parseFloat(nodes[i].textContent);\n                                    break;\n                                case \"gx:h\":\n                                    _bSizeIcon = true;\n                                    _sizeH = parseFloat(nodes[i].textContent);\n                                    break;\n                                default:\n                            }\n                        }\n                        break;\n                    case \"hotSpot\":\n                        _bHotSpot = true;\n                        var attributs = nodeStyles[k].attributes;\n                        for (var l = 0; l < attributs.length; l++) {\n                            switch (attributs[l].nodeName) {\n                                case \"x\":\n                                    _anchorX = parseFloat(attributs[l].nodeValue);\n                                    break;\n                                case \"y\":\n                                    _anchorY = parseFloat(attributs[l].nodeValue);\n                                    break;\n                                case \"yunits\":\n                                    _anchorXUnits = attributs[l].nodeValue;\n                                    break;\n                                case \"xunits\":\n                                    _anchorYUnits = attributs[l].nodeValue;\n                                    break;\n                                default:\n                            }\n                        }\n                        break;\n                    case \"scale\":\n                        _scale = parseFloat(nodeStyles[k].textContent);\n                        break;\n                    case \"color\":\n                        _color = __convertKMLColorsToRGB(nodeStyles[k].textContent);\n                        break;\n                    default:\n                        // on ne traite pas les autres informations ...\n                }\n            }\n\n            var StyleInstance = null;\n            if (bIconStyle) {\n                // une image magique 1x1 pixel invisible\n                var optionsIcon = {\n                    src : _src || \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=\",\n                    color : _color,\n                    crossOrigin : \"anonymous\", // cf. https://gis.stackexchange.com/questions/121555/wms-server-with-cors-enabled/147403#147403\n                    scale : _scale || 1\n                };\n\n                if (_bSizeIcon) {\n                    Utils.mergeParams(optionsIcon, {\n                        size : [_sizeW, _sizeH]\n                    });\n                }\n\n                if (_bHotSpot) {\n                    Utils.mergeParams(optionsIcon, {\n                        anchor : [_anchorX, _anchorY],\n                        anchorOrigin : \"bottom-left\",\n                        anchorXUnits : _anchorXUnits || \"pixels\",\n                        anchorYUnits : _anchorYUnits || \"pixels\"\n                    });\n                }\n\n                StyleInstance = new Icon(optionsIcon);\n            }\n\n            // existe il dj le style du label ?\n            var featureStyleFunction = feature.getStyleFunction();\n            if (featureStyleFunction) {\n                var _styles = featureStyleFunction(feature, 0);\n                if (_styles && !Array.isArray(_styles)) {\n                    _styles = [_styles];\n                }\n                if (_styles && _styles.length !== 0) {\n                    var _style = (_styles.length === 1) ? _styles[0] : _styles[_styles.length - 1];\n                    // on crase l'icone magic du label !\n                    feature.setStyle(new Style({\n                        image : StyleInstance,\n                        text : _style.getText()\n                    }));\n                }\n            }\n        };\n\n        /**\n         * Gestion de la balise kml:ExtendedData\n         *\n         * @param {Object} feature - ol feature\n         * @param {DOMElement[]} extend - extend\n         *\n         * @example\n         * //--> Marker (Point), LineString, Polygon\n         * <ExtendedData>\n         *    <Data name=\"attributetitle\">\n         *        <displayName>title</displayName>\n         *        <value>Titre  concatener avec la valeur de la balise \"kml:description\"</value>\n         *    </Data>\n         * </ExtendedData>\n         * //--> Label\n         * <ExtendedData>\n         *    <Data name=\"label\">\n         *        <value>PARIS</value> // valeur  remplacer dans \"kml:name\"\n         *    </Data>\n         *    <Data name=\"attributetitle\">\n         *        <displayName>title</displayName>\n         *        <value>Titre  concatener avec la valeur de la balise \"kml:description\"</value>\n         *    </Data>\n         * </ExtendedData>\n         */\n        var __getExtendedData = function (feature, extend) {\n            logger.trace(\"extendData :\", extend);\n\n            if (!feature) {\n                return;\n            }\n\n            var props = {};\n\n            var _fname = feature.get(\"name\") || \"\";\n            var _fdescription = feature.get(\"description\") || \"\";\n            var _ftitle = null;\n            for (var i = 0; i < extend.length; i++) {\n                var data = extend[i];\n                var name = data.attributes[0]; // 1 seul attribut !\n                var nodes = data.childNodes;\n                if (name.nodeName === \"name\") {\n                    switch (name.nodeValue) {\n                        // compatibilit ancien geoportail !\n                        case \"label\":\n                            _fname = data.textContent;\n                            props.name = _fname;\n                            break;\n                        // compatibilit ancien geoportail !\n                        case \"title\":\n                        case \"attributetitle\":\n                            for (var j = 0; j < nodes.length; j++) {\n                                if (nodes[j].nodeName === \"value\") {\n                                    _ftitle = nodes[j].textContent;\n                                }\n                            }\n                            break;\n                        default:\n                            props[name.nodeValue] = data.textContent;\n                            break;\n                    }\n                }\n            }\n\n            // Modification des properties \"name\" et \"description\"\n            if (_ftitle) {\n                _fdescription = (_fdescription) ? _ftitle + \" : \" + _fdescription : _ftitle;\n                props.description = _fdescription;\n            }\n\n            if (Object.keys(props).length) {\n                feature.setProperties(props, true);\n            }\n        };\n\n        /**\n         * TODO\n         * ...\n         *\n         * @param {Object} feature - ol feature\n         * @param {DOMElement} nodeIconStyle - icon style\n         * @param {DOMElement} nodeLabelStyle - label style\n         * @example\n         * ...\n         */\n        var __getExtendedStyleToFeatureIconLabel = function (feature, nodeIconStyle, nodeLabelStyle) {\n            logger.trace(\"display icon and label\");\n            __getExtendedStyleToFeatureLabel(feature, nodeLabelStyle);\n            __getExtendedStyleToFeatureIcon(feature, nodeIconStyle);\n        };\n\n        // TODO...\n        var __getStyleToDefaultFeature = function (feature, node) {};\n\n        // On lit les styles tendus et on les ajoute aux features\n        this._processKml(kmlDoc, features, {\n            lineStringStyle : __getStyleToDefaultFeature,\n            polygonStyle : __getStyleToDefaultFeature,\n            pointStyle : __getStyleToDefaultFeature,\n            labelStyle : this.showPointNames_ ? __getExtendedStyleToFeatureLabel : null,\n            iconStyle : __getExtendedStyleToFeatureIcon,\n            iconLabelStyle : this.showPointNames_ ? __getExtendedStyleToFeatureIconLabel : __getExtendedStyleToFeatureIcon,\n            extendedData : __getExtendedData\n        });\n\n        return features;\n    };\n\n    /**\n     * ...\n     * @param {*} key ...\n     * @returns {Object} json\n     */\n    readRootExtensions (key) {\n        var value = {};\n        // Rechercher le tag avec la clef : geoportail:compute\n        // <ExtendedData>\n        //   <Data name=\"geoportail:compute\">{...}</Data>\n        // </ExtendedData>\n        var firstNodeLevelKml = (this.source.nodeName === \"#document\") ? this.source.childNodes[0] : this.source;\n        var childNodesLevel = firstNodeLevelKml.childNodes;\n        for (var i = 0; i < childNodesLevel.length; i++) {\n            var node1 = childNodesLevel[i];\n            if (node1.nodeName === \"ExtendedData\") {\n                var childNodesExtended = node1.childNodes;\n                for (var j = 0; j < childNodesExtended.length; j++) {\n                    var node2 = childNodesExtended[j];\n                    if (node2.nodeName === \"Data\") {\n                        var name = node2.attributes[0];\n                        if (name && name.nodeName === \"name\") {\n                            if (name.nodeValue === key) {\n                                value = JSON.parse(node2.textContent);\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        return value;\n    }\n\n};\n\nexport default KML;\n\n// Expose KML as ol.source.KMLExtended. (for a build bundle)\nif (window.ol && window.ol.format) {\n    window.ol.format.KMLExtended = KML;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.geom.Polygon;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.geom.MultiPolygon;","import Color from \"../Utils/ColorUtils\";\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Markers from \"../Controls/Utils/Markers\";\n// import ol\nimport Feature from \"ol/Feature\";\n// import Style\nimport Style from \"ol/style/Style\";\nimport CircleStyle from \"ol/style/Circle\";\nimport IconStyle from \"ol/style/Icon\";\nimport FillStyle from \"ol/style/Fill\";\nimport StrokeStyle from \"ol/style/Stroke\";\nimport TextStyle from \"ol/style/Text\";\n// import geom\nimport Polygon from \"ol/geom/Polygon\";\nimport MultiPolygon from \"ol/geom/MultiPolygon\";\n\nvar logger = Logger.getLogger(\"styling\");\n\nFeature.prototype.setPropertyFill = function () {\n    var style = this.getStyle();\n    if (!style) {\n        return;\n    }\n    if (Array.isArray(style) && style.length === 0) {\n        return;\n    }\n    var fill = style.getFill();\n    if (fill) {\n        var colorFill = fill.getColor();\n        // array\n        if (Array.isArray(colorFill)) {\n            var cf = \"rgba(\";\n            cf += colorFill[0] + \",\";\n            cf += colorFill[1] + \",\";\n            cf += colorFill[2] + \",\";\n            cf += colorFill[3] + \")\";\n            colorFill = cf;\n        }\n        if (Color.isRGB(colorFill)) {\n            var oColorFill = Color.rgbaToHex(colorFill);\n            this.set(\"fill\", oColorFill.hex);\n            this.set(\"fill-opacity\", oColorFill.opacity);\n        } else {\n            this.set(\"fill\", colorFill);\n            this.set(\"fill-opacity\", 1);\n        }\n    }\n};\n\nFeature.prototype.setPropertyStroke = function () {\n    var style = this.getStyle();\n    if (!style) {\n        return;\n    }\n    if (Array.isArray(style) && style.length === 0) {\n        return;\n    }\n    var stroke = style.getStroke();\n    if (stroke) {\n        var colorStroke = stroke.getColor();\n        // array\n        if (Array.isArray(colorStroke)) {\n            var cs = \"rgba(\";\n            cs += colorStroke[0] + \",\";\n            cs += colorStroke[1] + \",\";\n            cs += colorStroke[2] + \",\";\n            cs += colorStroke[3] + \")\";\n            colorStroke = cs;\n        }\n        if (Color.isRGB(colorStroke)) {\n            var oColorStroke = Color.rgbaToHex(colorStroke);\n            this.set(\"stroke\", oColorStroke.hex);\n            this.set(\"stroke-opacity\", oColorStroke.opacity);\n        } else {\n            this.set(\"stroke\", colorStroke);\n            this.set(\"stroke-opacity\", 1);\n        }\n        this.set(\"stroke-width\", stroke.getWidth());\n    }\n};\n\nFeature.prototype.setPropertyLabel = function () {\n    var style = this.getStyle();\n    if (!style) {\n        return;\n    }\n    if (Array.isArray(style) && style.length === 0) {\n        return;\n    }\n    var isName = this.get(\"name\") !== undefined;\n    var label = style.getText();\n    if (label && isName) {\n        var fill = style.getText().getFill();\n        if (fill) {\n            var colorFill = fill.getColor();\n            // array\n            if (Array.isArray(colorFill)) {\n                var cf = \"rgba(\";\n                cf += colorFill[0] + \",\";\n                cf += colorFill[1] + \",\";\n                cf += colorFill[2] + \",\";\n                cf += colorFill[3] + \")\";\n                colorFill = cf;\n            }\n            if (Color.isRGB(colorFill)) {\n                var oColorFill = Color.rgbaToHex(colorFill);\n                this.set(\"label-fill\", oColorFill.hex);\n                this.set(\"label-fill-opacity\", oColorFill.opacity);\n            } else {\n                this.set(\"label-fill\", colorFill);\n                this.set(\"label-fill-opacity\", 1);\n            }\n        }\n        var stroke = style.getText().getStroke();\n        if (stroke) {\n            var colorStroke = stroke.getColor();\n            // array\n            if (Array.isArray(colorStroke)) {\n                var cs = \"rgba(\";\n                cs += colorStroke[0] + \",\";\n                cs += colorStroke[1] + \",\";\n                cs += colorStroke[2] + \",\";\n                cs += colorStroke[3] + \")\";\n                colorStroke = cs;\n            }\n            if (Color.isRGB(colorStroke)) {\n                var oColorStroke = Color.rgbaToHex(colorStroke);\n                this.set(\"label-stroke\", oColorStroke.hex);\n                this.set(\"label-stroke-opacity\", oColorStroke.opacity);\n            } else {\n                this.set(\"label-stroke\", colorStroke);\n                this.set(\"label-stroke-opacity\", 1);\n            }\n            this.set(\"label-stroke-width\", stroke.getWidth());\n        }\n        this.set(\"label-font\", style.getText().getFont() || Styling.DEFAULT_TEXT.font);\n        this.set(\"label-textAlign\", style.getText().getTextAlign() || Styling.DEFAULT_TEXT.textAlign);\n    }\n};\n\nFeature.prototype.setPropertyMarker = function () {\n    var style = this.getStyle();\n    if (!style) {\n        return;\n    }\n    if (Array.isArray(style) && style.length === 0) {\n        return;\n    }\n    var image = style.getImage();\n    if (image) {\n        // si le tag image est seul...\n        // c'est soit un marker ou soit un cercle !\n        if (image instanceof IconStyle) {\n            var color = image.getColor();\n            // array\n            if (Array.isArray(color)) {\n                var c = \"rgba(\";\n                c += color[0] + \",\";\n                c += color[1] + \",\";\n                c += color[2] + \",\";\n                c += color[3] + \")\";\n                color = c;\n            }\n            // feature.set(\"marker-color\", \"\"); // par defaut\n            if (color) {\n                var colorIcon = Color.rgbaToHex(color);\n                this.set(\"marker-color\", colorIcon.hex);\n            }\n            var scaleIcon = image.getScale();\n            switch (Math.round(scaleIcon * 2) / 2) {\n                case 0:\n                case 0.5:\n                    this.set(\"marker-size\", \"small\");\n                    break;\n                case 1:\n                    this.set(\"marker-size\", \"medium\");\n                    break;\n                case 1.5:\n                case 2:\n                    this.set(\"marker-size\", \"large\");\n                    break;\n                default:\n                    // this.set(\"marker-size\", \"\"); // par defaut\n                    break;\n            }\n            // feature.set(\"marker-symbol\", \"\"); // par defaut\n            var srcImage = image.getSrc();\n            if (srcImage) {\n                this.set(\"marker-symbol\", srcImage);\n            }\n            // INFO\n            // cas particulier o un objet est transform :\n            //  * un cercle est transform en icone\n            //  > les attributs du cercle sont  supprimer !\n            this.unset(\"circle-fill\");\n            this.unset(\"circle-fill-opacity\");\n            this.unset(\"circle-stroke\");\n            this.unset(\"circle-stroke-width\");\n            this.unset(\"circle-stroke-opacity\");\n            this.unset(\"circle-radius\");\n        } else {\n            var fillImg = image.getFill();\n            if (fillImg) {\n                var colorFillImg = fillImg.getColor();\n                // array\n                if (Array.isArray(colorFillImg)) {\n                    var cfi = \"rgba(\";\n                    cfi += colorFillImg[0] + \",\";\n                    cfi += colorFillImg[1] + \",\";\n                    cfi += colorFillImg[2] + \",\";\n                    cfi += colorFillImg[3] + \")\";\n                    colorFillImg = cfi;\n                }\n                if (Color.isRGB(colorFillImg)) {\n                    var oColorFillImg = Color.rgbaToHex(colorFillImg);\n                    this.set(\"circle-fill\", oColorFillImg.hex);\n                    this.set(\"circle-fill-opacity\", oColorFillImg.opacity);\n                } else {\n                    this.set(\"circle-fill\", colorFillImg);\n                    this.set(\"circle-fill-opacity\", 1);\n                }\n            }\n            var strokeImg = image.getStroke();\n            if (strokeImg) {\n                var colorStrokeImg = strokeImg.getColor();\n                // array\n                if (Array.isArray(colorStrokeImg)) {\n                    var csi = \"rgba(\";\n                    csi += colorStrokeImg[0] + \",\";\n                    csi += colorStrokeImg[1] + \",\";\n                    csi += colorStrokeImg[2] + \",\";\n                    csi += colorStrokeImg[3] + \")\";\n                    colorStrokeImg = csi;\n                }\n                if (Color.isRGB(colorStrokeImg)) {\n                    var oColorStrokeImg = Color.rgbaToHex(colorStrokeImg);\n                    this.set(\"circle-stroke\", oColorStrokeImg.hex);\n                    this.set(\"circle-stroke-opacity\", oColorStrokeImg.opacity);\n                } else {\n                    this.set(\"circle-stroke\", colorStrokeImg);\n                    this.set(\"circle-stroke-opacity\", 1);\n                }\n                this.set(\"circle-stroke-width\", strokeImg.getWidth());\n            }\n            var radius = image.getRadius();\n            this.set(\"circle-radius\", radius);\n        }\n    }\n};\n\n/**\n * @module Styling\n * @alias Gp.Styling\n * @private\n * @todo ...\n * @description\n * A simple specification for styling GeoJSON / GPX / KML data.\n *\n * @see ol.format.GeoJSONExtended\n * @see ol.format.KMLExtended\n * @see ol.format.GPXExtended\n *\n * @example\n * feature.getStyle(); // null\n * feature.getProperties(); // {\"stroke\": \"#ff0000\", \"stroke-width\": 2}\n * Styling.defineStyleFromProperties(feature);\n * feature.getStyle(); // [Object Style]\n *\n * feature.getStyle(); // [Object Style]\n * feature.getProperties(); // {}\n * Styling.definePropertiesFromStyle(feature);\n * feature.getProperties(); // {\"stroke\": \"#ff0000\", \"stroke-width\": 2}\n *\n * var style = feature.getStyle(); // [Object Style]\n * var tag = Styling.setTag(style, \"GPX\");\n *\n * ex. output GeoJSON:\n * ```json\n *  \"properties\": {\n *   \"stroke\": \"#ff0000\",\n *   \"stroke-width\": 2\n *  }\n * ```\n */\nvar Styling = {\n\n    /**\n     * Options to convert geometry\n     */\n    APPLY_CONVERT_GEOM_GPX : true,\n\n    /**\n     * Default icon style options\n     */\n    DEFAULT_ICON : {\n        src : Markers[\"lightOrange\"],\n        anchor : [0.5, 1],\n        scale : 1\n    },\n\n    /**\n     * Default circle style options\n     */\n    DEFAULT_CIRCLE : {\n        radius : 10,\n        fill : {\n            opacity : 1,\n            color : [0, 0, 0, 1]\n        },\n        stroke : {\n            width : 1,\n            opacity : 1,\n            color : [0, 0, 0, 1]\n        }\n    },\n\n    /**\n     * Default stroke style options\n     */\n    DEFAULT_STROKE : {\n        width : 5,\n        opacity : 1,\n        color : [250, 250, 250, 1]\n    },\n\n    /**\n     * Default fill style options\n     */\n    DEFAULT_FILL : {\n        opacity : 1,\n        color : [0, 0, 0, 1]\n    },\n\n    /**\n     * Default text style options\n     * @see https://openlayers.org/en/v6.15.1/apidoc/module-ol_style_Text-Text.html\n     */\n    DEFAULT_TEXT : {\n        font : \"16px sans\",\n        textAlign : \"left\",\n        stroke : {\n            color : [250, 250, 250, 1],\n            width : 5,\n            opactity : 1\n        },\n        fill : {\n            opacity : 1,\n            color : [0, 0, 0, 1]\n        }\n        // offsetX\n        // offsetY\n        // placement\n        // scale\n        // rotation\n        // justify\n        // padding\n    },\n\n    /**\n     * All styling tags\n     * @function getListTags\n     * @returns {Array} all styling tags\n     * @example\n     * \"type\", // type de geometrie\n     * \"fill\",\n     * \"fill-opacity\",\n     * \"stroke\",\n     * \"stroke-opacity\",\n     * \"stroke-width\",\n     * \"circle-fill\",\n     * \"circle-fill-opacity\",\n     * \"circle-stroke\",\n     * \"circle-stroke-opacity\",\n     * \"circle-stroke-width\",\n     * \"circle-radius\",\n     * \"marker-symbol\",\n     * \"marker-color\",\n     * \"marker-size\"\n     */\n    getListTags : function () {\n        return [\n            \"type\",\n            \"fill\",\n            \"fill-opacity\",\n            \"stroke\",\n            \"stroke-opacity\",\n            \"stroke-width\",\n            \"circle-fill\",\n            \"circle-fill-opacity\",\n            \"circle-stroke\",\n            \"circle-stroke-opacity\",\n            \"circle-stroke-width\",\n            \"circle-radius\",\n            \"marker-symbol\",\n            \"marker-color\",\n            \"marker-size\",\n            \"label-fill\",\n            \"label-fill-opacity\",\n            \"label-stroke\",\n            \"label-stroke-width\",\n            \"label-stroke-opacity\",\n            \"label-font\",\n            \"label-textAlign\"\n        ];\n    },\n\n    /**\n     * Transform feature properties to a native style\n     *\n     * @function defineStyleFromProperties\n     * @param {*} feature - ...\n     * @returns {*} style - ...\n     * @public\n     *\n     * @description\n     * A la lecture du format :\n     * > tag styling ---> feature properties ---> feature style\n     *\n     * Les balises de 'styling' du fichier sont ajoutes dans les properties de chaque features\n     * (opration native sous OpenLayers):\n     *\n     * Ex. avec le format GeoJSON :\n     * ```json\n     * \"properties\": {\n     *    \"stroke\": \"#000000\",      -> feature.get(\"stroke\");\n     *    \"stroke-width\": 13,       -> feature.get(\"stroke-width\");\n     *    \"stroke-opacity\": 0.8,    -> feature.get(\"stroke-opacity\");\n     *    \"fill\": \"#a03737\",        -> feature.get(\"fill\");\n     *    \"fill-opacity\": 0.5       -> feature.get(\"fill-opacity\");\n     * }\n     * ```\n     *\n     * Ensuite, les properties des features sont transformes dans le style natif :\n     *\n     * ```js\n     * // Ex.\n     * feature.setStyle(new Style({\n     *  fill : new FillStyle({\n     *      color : Color.hexToRgba(feature.get(\"fill\"), feature.get(\"fill-opacity\") || 1)\n     *  }),\n     *  stroke : new StrokeStyle({\n     *      color : Color.hexToRgba(feature.get(\"stroke\"), feature.get(\"stroke-opacity\"))\n     *      width : feature.get(\"stroke-width\")\n     *  })\n     * }));\n     * ```\n     */\n    defineStyleFromProperties : function (feature) {\n        // style\n        var style = null;\n\n        // les options de styles dfinis dans le format\n        var options = {};\n\n        // properties :\n        // \"marker-size\" -> icon\n        // \"marker-symbol\" -> icon\n        // \"marker-color\" -> icon\n        var marker = null;\n        if (feature.get(\"marker-color\") ||\n            feature.get(\"marker-size\") ||\n            feature.get(\"marker-symbol\")) {\n            marker = {};\n            // icone par defaut\n            marker[\"src\"] = this.DEFAULT_ICON.src;\n            marker[\"anchor\"] = this.DEFAULT_ICON.anchor;\n            var symbolMarker = feature.get(\"marker-symbol\");\n            if (symbolMarker) {\n                if (symbolMarker.search(\"data:image/png;base64\") !== -1) {\n                    // icone du portail\n                    marker[\"src\"] = symbolMarker;\n                } else {\n                    // TODO\n                    // utiliser les symboles de Maki\n                    // (cf. https://labs.mapbox.com/maki-icons/)\n                }\n            }\n            var colorMarker = feature.get(\"marker-color\");\n            if (Color.isHex(colorMarker)) {\n                marker[\"color\"] = Color.hexToRgba(colorMarker, 1);\n            }\n            var size = feature.get(\"marker-size\");\n            if (size) {\n                switch (size) {\n                    case \"small\":\n                        marker[\"scale\"] = 0.5;\n                        break;\n                    case \"medium\":\n                        marker[\"scale\"] = 1;\n                        break;\n                    case \"large\":\n                        marker[\"scale\"] = 1.5;\n                        break;\n                    default:\n                        marker[\"scale\"] = this.DEFAULT_ICON.scale;\n                        break;\n                }\n            }\n        }\n\n        // properties :\n        // \"stroke\" -> line / polygon\n        // \"stroke-opacity\" -> line / polygon\n        // \"stroke-width\" -> line / polygon\n        var stroke = null;\n        if (feature.get(\"stroke\") ||\n            feature.get(\"stroke-opacity\") ||\n            feature.get(\"stroke-width\")) {\n            stroke = {};\n            stroke[\"color\"] = Color.hexToRgba(feature.get(\"stroke\"), +feature.get(\"stroke-opacity\") || this.DEFAULT_STROKE.opacity);\n            stroke[\"width\"] = +feature.get(\"stroke-width\") || this.DEFAULT_STROKE.width;\n        }\n\n        // properties :\n        // \"fill\" -> polygon\n        // \"fill-opacity\" -> polygon\n        var fill = null;\n        if (feature.get(\"fill\") ||\n            feature.get(\"fill-opacity\")) {\n            fill = {};\n            fill[\"color\"] = Color.hexToRgba(feature.get(\"fill\"), +feature.get(\"fill-opacity\") || this.DEFAULT_FILL.opacity);\n        }\n\n        // properties :\n        // \"label-fill\",\n        // \"label-fill-opacity\",\n        // \"label-stroke\",\n        // \"label-stroke-width\",\n        // \"label-stroke-opacity\",\n        // \"label-font\",\n        // \"label-textAlign\"\n        // \"name\" -> text\n        var labelStroke = null;\n        var labelFill = null;\n        var isLabel = feature.get(\"name\") !== \"\";\n        if (isLabel) {\n            if (feature.get(\"label-fill\") ||\n                feature.get(\"label-fill-opacity\")) {\n                labelFill = {};\n                labelFill[\"color\"] = Color.hexToRgba(feature.get(\"label-fill\"), +feature.get(\"label-fill-opacity\") || this.DEFAULT_TEXT.fill.opacity);\n            }\n            if (feature.get(\"label-stroke\") ||\n                feature.get(\"label-stroke-opacity\") ||\n                feature.get(\"label-stroke-width\")) {\n                labelStroke = {};\n                labelStroke[\"color\"] = Color.hexToRgba(feature.get(\"label-stroke\"), +feature.get(\"label-stroke-opacity\") || this.DEFAULT_TEXT.stroke.opacity);\n                labelStroke[\"width\"] = +feature.get(\"label-stroke-width\") || this.DEFAULT_TEXT.stroke.width;\n            }\n        }\n\n        // properties :\n        // \"circle-fill\"\n        // \"circle-stroke\"\n        // \"circle-stroke-width\"\n        // \"circle-radius\"\n        var circleRadius = feature.get(\"circle-radius\") || this.DEFAULT_CIRCLE.radius;\n        var circleStroke = null;\n        if (feature.get(\"circle-stroke\") ||\n            feature.get(\"circle-stroke-opacity\") ||\n            feature.get(\"circle-stroke-width\")) {\n            circleStroke = {};\n            circleStroke[\"color\"] = Color.hexToRgba(feature.get(\"circle-stroke\"), +feature.get(\"circle-stroke-opacity\") || this.DEFAULT_CIRCLE.stroke.opacity);\n            circleStroke[\"width\"] = +feature.get(\"circle-stroke-width\") || this.DEFAULT_CIRCLE.stroke.width;\n        }\n        var circleFill = null;\n        if (feature.get(\"circle-fill\") ||\n            feature.get(\"circle-fill-opacity\")) {\n            circleFill = {};\n            circleFill[\"color\"] = Color.hexToRgba(feature.get(\"circle-fill\"), +feature.get(\"circle-fill-opacity\") || this.DEFAULT_CIRCLE.fill.opacity);\n        }\n\n        // options du Style en fonction du type de geometrie\n        var type = feature.getGeometry().getType();\n        switch (type) {\n            case \"Circle\":\n            case \"Point\":\n            case \"MultiPoint\":\n                // Cercle\n                var isCircle = false;\n                var optionsCircle = {};\n                if (circleStroke) {\n                    optionsCircle[\"stroke\"] = new StrokeStyle(circleStroke);\n                }\n                if (circleFill) {\n                    optionsCircle[\"fill\"] = new FillStyle(circleFill);\n                }\n                if (Object.keys(optionsCircle).length !== 0) {\n                    isCircle = true;\n                    optionsCircle[\"radius\"] = +circleRadius; // Conversion en nombre\n                    options[\"image\"] = new CircleStyle(optionsCircle);\n                }\n                // Ponctuel\n                if (marker) {\n                    options[\"image\"] = new IconStyle(marker);\n                }\n                // Label\n                if (isLabel) {\n                    var optionsText = {};\n\n                    if (labelStroke) {\n                        optionsText[\"stroke\"] = new StrokeStyle(labelStroke);\n                    }\n                    if (labelFill) {\n                        optionsText[\"fill\"] = new FillStyle(labelFill);\n                    }\n                    if (Object.keys(optionsText).length !== 0) {\n                        optionsText[\"text\"] = feature.get(\"name\");\n                        optionsText[\"textAlign\"] = feature.get(\"label-textAlign\") || this.DEFAULT_TEXT.textAlign;\n                        optionsText[\"font\"] = feature.get(\"label-font\") || this.DEFAULT_TEXT.font;\n                        options[\"text\"] = new TextStyle(\n                            Object.assign({},\n                                this.DEFAULT_TEXT,\n                                optionsText\n                            ));\n                    } else {\n                        // on applique un style par defaut sur le label\n                        // pour un marker ou un cercle\n                        if (marker || isCircle) {\n                            var styleText = new TextStyle(\n                                Object.assign({},\n                                    this.DEFAULT_TEXT, {\n                                        fill : new FillStyle(this.DEFAULT_TEXT.fill),\n                                        stroke : new StrokeStyle(this.DEFAULT_TEXT.stroke)\n                                    }\n                                )\n                            );\n                            if (styleText) {\n                                var cloneStyleText = styleText.clone();\n                                cloneStyleText.setText(feature.get(\"name\"));\n                                options[\"text\"] = cloneStyleText;\n                            }\n                        }\n                    }\n                }\n                break;\n\n            case \"Polygon\":\n            case \"MultiPolygon\":\n                if (stroke) {\n                    options[\"stroke\"] = new StrokeStyle(stroke);\n                }\n                if (fill) {\n                    options[\"fill\"] = new FillStyle(fill);\n                }\n                break;\n\n            case \"LineString\":\n            case \"MultiLineString\":\n                if (stroke) {\n                    options[\"stroke\"] = new StrokeStyle(stroke);\n                }\n                if (this.APPLY_CONVERT_GEOM_GPX && fill) {\n                    // INFO\n                    // Lors d'une transformation de type de geometrie, le type est renseign.\n                    // Pour le format GPX,\n                    // -> on transforme une surface vers ligne lors de l'criture\n                    // -> on transforme une ligne vers une surface lors de la lecture si le type est prcis !\n                    var initType = feature.get(\"type\");\n                    if (initType && (initType === \"Polygon\" || initType === \"MultiPolygon\")) {\n                        options[\"fill\"] = new FillStyle(fill);\n                        var f = feature.clone();\n                        var ClassPoly = (type === \"LineString\") ? Polygon : MultiPolygon;\n                        feature.setGeometry(new ClassPoly([f.getGeometry().getCoordinates()]));\n                    }\n                }\n                break;\n\n            default:\n                break;\n        }\n\n        // si aucun style disponible, on utilisera le style par defaut defini\n        // par l'utilisateur ou l'application\n        if (Object.keys(options).length !== 0) {\n            style = new Style(options);\n        }\n\n        return style;\n    },\n\n    /**\n     * Define a default style function to apply to a feature\n     *\n     * @function defineStyleFunctionByDefault\n     * @param {Object} defaultStyle - ...\n     * @returns {Function} style function\n     * @public\n     *\n     * @description\n     * ...\n     */\n    defineStyleFunctionByDefault : function (defaultStyle) {\n        if (!defaultStyle) {\n            return [];\n        }\n\n        if (Object.keys(defaultStyle).length === 0) {\n            return [];\n        }\n\n        // les styles par defaut\n        var styleFunction = (feature, resolution) => {\n            var style = null;\n            var type = feature.getGeometry().getType();\n            switch (type) {\n                case \"Point\":\n                case \"MultiPoint\":\n                    // on n'a aucune information sur le type de style  appliquer sur un \"Point\" :\n                    // * label ou\n                    // * marker ou\n                    // * marker avec label\n                    // donc, c'est en fonction des styles par defaut...\n                    var opts = {};\n                    if (defaultStyle.getImage()) {\n                        opts[\"image\"] = defaultStyle.getImage();\n                    }\n                    if (defaultStyle.getText() && feature.get(\"name\")) {\n                        var styleText = defaultStyle.getText().clone();\n                        styleText.setText(feature.get(\"name\"));\n                        opts[\"text\"] = styleText;\n                    }\n                    style = new Style(opts);\n                    break;\n                case \"Circle\":\n                    var optsc = {};\n\n                    var optsCircle = {};\n                    if (defaultStyle.getFill()) {\n                        optsCircle.fill = defaultStyle.getFill();\n                    }\n                    if (defaultStyle.getStroke()) {\n                        optsCircle.stroke = defaultStyle.getStroke();\n                    }\n                    if (defaultStyle.getText() && feature.get(\"name\")) {\n                        var styleTextCircle = defaultStyle.getText().clone();\n                        styleTextCircle.setText(feature.get(\"name\"));\n                        optsc.text = styleTextCircle;\n                    }\n                    if (Object.keys(optsCircle).length !== 0) {\n                        // FIXME param radius ?\n                        optsCircle.radius = 3;\n                        optsc.image = new CircleStyle(optsCircle);\n                    }\n                    style = new Style(optsc);\n                    break;\n                case \"Polygon\":\n                case \"MultiPolygon\":\n                    var optsp = {};\n                    if (defaultStyle.getFill()) {\n                        optsp.fill = defaultStyle.getFill();\n                    }\n                    if (defaultStyle.getStroke()) {\n                        optsp.stroke = defaultStyle.getStroke();\n                    }\n                    style = new Style(optsp);\n                    break;\n                case \"LineString\":\n                case \"LinearRing\":\n                case \"MultiLineString\":\n                    var optsl = {};\n                    if (defaultStyle.getStroke()) {\n                        optsl.stroke = defaultStyle.getStroke();\n                    }\n                    style = new Style(optsl);\n                    break;\n            }\n            return [style];\n        };\n        return styleFunction;\n    },\n\n    /**\n     * Transform a native style to feature properties by type of geometry\n     *\n     * @todo not yet implemented !\n     * @param {*} feature - feature\n     */\n    definePropertiesFromStyleByType : function (feature) {\n        var geomType = feature.getGeometry().getType();\n        switch (geomType) {\n            case \"Point\":\n            case \"MultiPoint\":\n                feature.setPropertyMarker();\n                feature.setPropertyLabel();\n                break;\n            case \"LineString\":\n            case \"MultiLineString\":\n                feature.setPropertyStroke();\n                break;\n            case \"Polygon\":\n            case \"MultiPolygon\":\n                feature.setPropertyStroke();\n                feature.setPropertyFill();\n                break;\n            default:\n                break;\n        }\n    },\n\n    /**\n     * Transform a native style to feature properties\n     *\n     * @function definePropertiesFromStyle\n     * @param {*} feature - ...\n     * @public\n     *\n     * @description\n     * A l'criture du format.\n     * > feature style --> feature properties --> tag styling\n     *\n     * Le style natif est rcupr pour chaque feature :\n     *\n     * ```js\n     * // Ex.\n     * var style = feature.getStyle();\n     * ```\n     *\n     * Ensuite, le style natif est transform en properties pour chaque feature :\n     *\n     * ```js\n     * // Ex.\n     * var stroke = style.getStroke();\n     * var oColorStroke = Color.rgbaToHex(stroke.getColor());\n     * feature.set(\"stroke\", oColorStroke.hex); // #000000\n     * feature.set(\"stroke-opacity\", oColorStroke.opacity); // 0.8\n     * ```\n     *\n     * Et, chaque properties des features sont ecrites dans le format du fichier\n     * (opration native sous OpenLayers) :\n     *\n     * Ex. avec le format GeoJSON :\n     * ```json\n     * \"properties\": {\n     *    \"stroke\": \"#000000\",\n     *    \"stroke-opacity\": 0.8\n     * }\n     * ```\n     */\n    definePropertiesFromStyle : function (feature) {\n        var style = feature.getStyle() || feature.getStyleFunction();\n        if (style) {\n            // style ajout via une fonction, pour les styles par defaut par ex.\n            if (typeof style === \"function\") {\n                var styles = style.call(this, feature, 0);\n                if (styles && styles.length !== 0) {\n                    style = (Array.isArray(styles)) ? styles[0] : styles;\n                    feature.setStyle(style);\n                } else {\n                    // au cas o...\n                    return;\n                }\n            }\n            this.definePropertiesFromStyleByType(feature);\n        }\n    },\n\n    /**\n     * Transform a native style to tags 'styling' into the format\n     *\n     * @function defineTagFromStyle\n     * @param {*} style - ...\n     * @param {String} format - ...\n     * @returns {String} tags stringify into the format (json / xml)\n     * @todo\n     * @public\n     *\n     * @description\n     * A partir d'un style natif, on le transforme en balise de 'styling' dans le format demand,\n     * que l'on peut ensuite inserer dans le fichier.\n     * > style ---> tag styling\n     *\n     */\n    defineTagFromStyle : function (style, format) {\n        logger.trace(\"todo...\");\n        return null;\n    }\n};\n\nexport default Styling;\n","/**\n * @module ColorUtils\n * @alias module:~utils/ColorUtils\n * @description\n * ...\n *\n * @example\n * import ColorUtils from \"gpf-ext-ol/utils/ColorUtils\"\n * ou \n * import {ColorUtils} from \"gpf-ext-ol\n * \n * ColorUtils.hex();\n * ColorUtils.num();\n * ColorUtils.arrayTorgba();\n * ColorUtils.arrayToHex();\n * ColorUtils.rgbaToHex();\n * ColorUtils.hexToRgba();\n * ColorUtils.isHex();\n * ColorUtils.isRGB();\n */\nvar ColorUtils = {\n\n    /**\n     * Number to hex conversion\n     *\n     * @param {Number} number - 0-255\n     * @returns {String} hex value\n     */\n    hex : function (number) {\n        if (number > 255) {\n            throw new Error(\"'\" + number + \"'' is greater than 255(0xff);\");\n        }\n        var str = Number(number).toString(16);\n        return (\"0\" + str).slice(-2);\n    },\n\n    /**\n     * Hexa to number conversion\n     *\n     * @param {*} hexa 00-FF\n     * @returns {Number} number value\n     */\n    num : function (hexa) {\n        return parseInt(hexa, 16);\n    },\n\n    /**\n     * Converts an array ([255,255,255,1]) to rgba string\n     *\n     * @function arrayToRgba\n     * @param {Array} values - array of values\n     * @returns {String} A color of RGB or RGBA format\n     */\n    arrayToRgba : function (values) {\n        if (!Array.isArray(values)) {\n            throw new Error(\"Not an array !\");\n        }\n        var red = values[0];\n        var green = values[1];\n        var blue = values[2];\n        var alpha = values[3] || 1;\n        var result = \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + parseFloat(alpha) + \")\";\n        return result;\n    },\n\n    /**\n     * Converts an array ([255,255,255,1]) to #RRGGBBAA\n     *\n     * @function arrayToHex\n     * @param {Array} values - array of values\n     * @returns {Object}  hex and opacity formated values\n     */\n    arrayToHex : function (values) {\n        if (!Array.isArray(values)) {\n            throw new Error(\"Not an array !\");\n        }\n        var red = values[0];\n        var green = values[1];\n        var blue = values[2];\n        var alpha = values[3];\n        var elems = [this.hex(red), this.hex(green), this.hex(blue)];\n        var result = {};\n        result.hex = \"#\" + elems.join(\"\");\n        if (alpha) {\n            // elems.push(hex(alpha));\n            result.opacity = parseFloat(alpha);\n        }\n        return result;\n    },\n\n    /**\n     * Converts rgba string to #RRGGBBAA\n     * (Code adapted from : https://gist.github.com/mstssk/afda4ce9e5c335fd79cd)\n     *\n     * @function rgbaToHex\n     * @param {String} rgba - A color of RGB or RGBA format.\n     * @returns {Object} hex and opacity formated values\n     */\n    rgbaToHex : function (rgba) {\n        var regex = /rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(0?.?\\d+)\\s*)?\\)/;\n        var parsed = regex.exec(rgba);\n        if (!parsed) {\n            throw new Error(\"Invalid format: \" + rgba);\n        }\n        var red = parsed[1];\n        var green = parsed[2];\n        var blue = parsed[3];\n        var alpha = parsed[4];\n        var elems = [this.hex(red), this.hex(green), this.hex(blue)];\n        var result = {};\n        result.hex = \"#\" + elems.join(\"\");\n        if (alpha) {\n            // elems.push(hex(alpha));\n            result.opacity = parseFloat(alpha);\n        }\n        return result;\n    },\n\n    /**\n     * Converts hex color and opacity value to rgba string.\n     * (Code adapted from : http://stackoverflow.com/a/5624139)\n     *\n     * @function hexToRgba\n     * @param {String} hex - A color value on RGB format (hexa).\n     * @param {Number} opacity - A opacity value.\n     * @returns {String} A color of RGB or RGBA format\n     */\n    hexToRgba : function (hex, opacity) {\n        // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n        var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n        if (!hex) {\n            throw new Error(\"Invalid format\");\n        }\n        hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n            return r + r + g + g + b + b;\n        });\n\n        var rgb = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n        rgb = rgb ? {\n            r : parseInt(rgb[1], 16),\n            g : parseInt(rgb[2], 16),\n            b : parseInt(rgb[3], 16)\n        } : null;\n        var result = rgb ? \"rgba(\" + rgb.r + \", \" + rgb.g + \", \" + rgb.b + \", \" + opacity + \")\" : null;\n        return result;\n    },\n\n    /**\n     * Determine if value is a correct hexa color.\n     * @param {*} value - hex color (#FFFFFF)\n     * @returns {Boolean} True if value is a hexa color\n     */\n    isHex : function (value) {\n        if (!value) {\n            return false;\n        }\n        if (value.charAt(0) !== \"#\") {\n            return false;\n        }\n        var regex = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i;\n        var parsed = regex.exec(value);\n        if (!parsed) {\n            return false;\n        }\n        return true;\n    },\n\n    /**\n     * Determine if value is a correct rgba color.\n     * @param {*} value - rgba color (rgba(125,125,125,1))\n     * @returns {Boolean} True if value is a rgba color\n     */\n    isRGB : function (value) {\n        if (!value) {\n            return false;\n        }\n        var regex = /rgba?\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(?:,\\s*(0?.?\\d+)\\s*)?\\)/;\n        var parsed = regex.exec(value);\n        if (!parsed) {\n            return false;\n        }\n        return true;\n    }\n};\n\nexport default ColorUtils;\n","/**\n* @module Helper\n* @alias module:~utils/HelperUtils\n* @description\n* ...\n*\n* @example\n* import HelperUtils from \"gpf-ext-ol/utils/HelperUtils\"\n* ou \n* import {HelperUtils} from \"gpf-ext-ol\n* \n* HelperUtils.detectSupport();\n* HelperUtils.assign();\n* HelperUtils.mergeParams();\n*/\nvar Helper = {\n\n    /**\n     * this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     *\n     * @function detectSupport\n     * @returns {Boolean} isDesktop - true for desktop userAgent, false for mobile\n     */\n    detectSupport : function () {\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    /**\n     *  Copies all source object members to dest\n     *\n     * @function assign\n     * @param {Object} dest - destination object where properties and method will be copied\n     * @param {Object} source - source object from which properties and method will be copied\n     * @returns {Object} dest\n     */\n    assign : function (dest, source) {\n        dest = dest || {};\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                dest[prop] = source[prop];\n            }\n        }\n        return dest;\n    },\n\n    /**\n     * Merge two objects parameters (deeper than assign)\n     *\n     * @function mergeParams\n     * @param {Object} dest     - destination object where properties and method will be merge\n     * @param {Object} source   - source object from which properties and method will be merge\n     * @param {Boolean} replace - replace destination value by source if exists or not (true by default)\n     */\n    mergeParams : function (dest, source, replace) {\n        if (!dest || !source) {\n            return;\n        }\n        if (typeof replace === \"undefined\") {\n            replace = true;\n        }\n        for (var param in source) {\n            if (source.hasOwnProperty(param)) {\n                if (typeof source[param] === \"object\") {\n                    if (dest.hasOwnProperty(param)) {\n                        this.mergeParams(dest[param], source[param], replace);\n                    } else {\n                        dest[param] = source[param];\n                    }\n                } else {\n                    if (dest.hasOwnProperty(param)) {\n                        if (replace) {\n                            dest[param] = source[param];\n                        }\n                    } else {\n                        dest[param] = source[param];\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport default Helper;\n","import * as Log from \"loglevel\";\n\n/**\n * @module LoggerByDefault\n * @alias module:~utils/Logger\n * @description\n * ...\n *\n * @example\n * import Logger from \"gpf-ext-ol/utils/LoggerByDefault\"\n * ou \n * import {Logger} from \"gpf-ext-ol\n * \n * Logger.getLogger();\n * Logger.disableAll();\n * Logger.enableAll();\n */\nvar LoggerByDefault = {\n    /**\n     * creation d'un logger statique\n     *\n     * @function getLogger\n     * @param {String} [name=\"default\"] - the logger name\n     * @returns {Object} logger\n     */\n    getLogger : function (name) {\n        // on dfinit process si non dfini dans l'environnement\n        if (typeof process === \"undefined\") {\n            var process = {};\n            process.env = {\n                VERBOSE : false\n            };\n        }\n        (process.env.VERBOSE) ? Log.enableAll() : Log.disableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    },\n    /**\n     * desactive tous les loggers\n     * @function disableAll\n     */\n    disableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.disableAll();\n            }\n        }\n    },\n    /**\n     * active tous les loggers\n     * @function enableAll\n     */\n    enableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.enableAll();\n            }\n        }\n    }\n};\n\nexport default LoggerByDefault;\n","import Logger from \"./LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"parser\");\n\n/**\n* @module Parser\n* @alias module:~utils/Parser\n* @description\n* ...\n*\n* @example\n* parse();\n* toString();\n*/\nvar Parser = {\n\n    /**\n     * ...\n     *\n     * @param {String} xml - XML string\n     * @returns {DOMElement} doc\n     */\n    parse : function (xml) {\n        var doc = null;\n        var parser = null;\n        var scope = typeof window !== \"undefined\" ? window : null;\n\n        if (typeof exports === \"object\" && window === null) {\n            // code for nodejs\n            var DOMParser = require(\"xmldom\").DOMParser;\n            parser = new DOMParser();\n            doc = parser.parseFromString(xml, \"text/xml\");\n        } else if (scope.DOMParser) {\n            // code for modern browsers\n            parser = new scope.DOMParser();\n            doc = parser.parseFromString(xml, \"text/xml\");\n        } else if (scope.ActiveXObject) {\n            // code for old IE browsers\n            doc = new scope.ActiveXObject(\"Microsoft.XMLDOM\");\n            doc.async = false;\n            doc.loadXML(xml);\n        } else {\n            logger.log(\"Incompatible environment for DOM Parser !\");\n        }\n\n        var errorNode = doc.querySelector(\"parsererror\");\n        if (errorNode) {\n            // INFO parsing failed\n            // eslint-disable-next-line no-console\n            console.error(errorNode);\n            return null;\n        }\n\n        logger.trace(doc);\n        return doc;\n    },\n\n    /**\n     * ...\n     *\n     * @param {DOMElement} doc - doc\n     * @returns {String} XML string\n     */\n    toString : function (doc) {\n        // TODO\n        // try catch pour les exceptions !\n        // cf. https://developer.mozilla.org/en-US/docs/Web/API/XMLSerializer/serializeToString\n        var oSerializer = new XMLSerializer();\n        var xml = oSerializer.serializeToString(doc);\n\n        logger.trace(xml);\n        return xml;\n    },\n\n    /**\n     * ...\n     * cf. https://stackoverflow.com/questions/376373/pretty-printing-xml-with-javascript/\n     *\n     * @param {String} xml - XML string\n     * @returns {String} XML string formatted\n     */\n    format : function (xml) {\n        var reg = /(>)\\s*(<)(\\/*)/g; // updated Mar 30, 2015\n        var wsexp = / *(.*) +\\n/g;\n        var contexp = /(<.+>)(.+\\n)/g;\n        xml = xml.replace(reg, \"$1\\n$2$3\").replace(wsexp, \"$1\\n\").replace(contexp, \"$1\\n$2\");\n        var formatted = \"\";\n        var lines = xml.split(\"\\n\");\n        var indent = 0;\n        var lastType = \"other\";\n        // 4 types of tags - single, closing, opening, other (text, doctype, comment) - 4*4 = 16 transitions\n        var transitions = {\n            \"single->single\" : 0,\n            \"single->closing\" : -1,\n            \"single->opening\" : 0,\n            \"single->other\" : 0,\n            \"closing->single\" : 0,\n            \"closing->closing\" : -1,\n            \"closing->opening\" : 0,\n            \"closing->other\" : 0,\n            \"opening->single\" : 1,\n            \"opening->closing\" : 0,\n            \"opening->opening\" : 1,\n            \"opening->other\" : 1,\n            \"other->single\" : 0,\n            \"other->closing\" : -1,\n            \"other->opening\" : 0,\n            \"other->other\" : 0\n        };\n\n        for (var i = 0; i < lines.length; i++) {\n            var ln = lines[i];\n            var single = Boolean(ln.match(/<.+\\/>/)); // is this line a single tag? ex. <br />\n            var closing = Boolean(ln.match(/<\\/.+>/)); // is this a closing tag? ex. </a>\n            var opening = Boolean(ln.match(/<[^!].*>/)); // is this even a tag (that's not <!something>)\n            var type = single ? \"single\" : closing ? \"closing\" : opening ? \"opening\" : \"other\";\n            var fromTo = lastType + \"->\" + type;\n            lastType = type;\n            var padding = \"\";\n\n            indent += transitions[fromTo];\n            for (var j = 0; j < indent; j++) {\n                padding += \"\\t\";\n            }\n            if (fromTo === \"opening->closing\") {\n                formatted = formatted.substr(0, formatted.length - 1) + ln + \"\\n\"; // substr removes line break (\\n) from prev loop\n            } else {\n                formatted += padding + ln + \"\\n\";\n            }\n        }\n\n        logger.trace(formatted);\n        return formatted;\n    }\n};\n\nexport default Parser;\n","/**\n * @module SelectorID\n * @alias module:~utils/SelectorID\n * @private\n * @description\n * formalisme d'un tag ID :\n * -> NAME(_ORDER)-1460636385836\n *\n * @example\n * Ex.\n *   GProutePoints-1460636385836\n *   GProutePoint_10-1460636385836\n */\nvar SelectorID = {\n\n    /**\n     * Construction d'un identifiant statique bas sur le timestamp,\n     * et qui s'incremente de +1  chaque appel\n     * @function generate\n     */\n    generate : (function () {\n        var timestamp = Math.floor(Date.now());\n        return function () {\n            return timestamp++;\n        };\n    })(),\n\n    /**\n     * nom du tag\n     * @function name\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    name : function (id) {\n        var name = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i === -1) {\n            name = id;\n        } else {\n            name = id.substring(0, i);\n        }\n\n        return name;\n    },\n\n    /**\n     * numero d'identifiant du tag\n     *\n     * @function index\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    index : function (id) {\n        var index = null;\n\n        var name = this.name(id);\n        // if (name !== id) {\n        var i = name.lastIndexOf(\"_\");\n        if (i !== -1) {\n            index = name.substring(i + 1);\n        }\n        // }\n\n        return index;\n    },\n\n    /**\n     * uuid du tag\n     *\n     * @function uuid\n     * @param {String} id - the id\n     * @returns {String} uuid\n     */\n    uuid : function (id) {\n        var uuid = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i !== -1) {\n            uuid = parseInt(id.substring(i + 1), 10);\n        }\n\n        return uuid;\n    }\n\n};\n\nexport default SelectorID;\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","/**\n * Errors raised by API for one among three reasons : wrong API usage, underlying service error or unknown reason.\n *\n * @property {String} message - Error message\n * @property {Number} status - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes} ; -1 otherwise.\n * @property {String} type - Error type ({@link Gp.Error.TYPE_SRVERR}, {@link Gp.Error.TYPE_USEERR} or {@link Gp.Error.TYPE_UNKERR}).\n *\n * @namespace\n * @alias Gp.Error\n * @param {Object|String} error - Options for creating error object. Can be a String (message) or an Object.\n * @param {String} error.message - Error message to return to user.\n * @param {enum} [error.type=TYPE_UNKERR] - Error type\n * @param {status} [error.status=-1] - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}.\n *\n */\nfunction ErrorService (error) {\n    if (!(this instanceof ErrorService)) {\n        throw new TypeError(\"ErrorService constructor cannot be called as a function.\");\n    }\n\n    var e = error;\n    if (typeof error === \"string\" || error instanceof String) {\n        this.message = error;\n        this.status = -1;\n        this.type = ErrorService.TYPE_UNKERR;\n    } else {\n        this.message = e.message || \"undefined!?\";\n        this.type = e.type;\n        this.status = e.status || -1;\n    }\n\n    this.name = \"ErrorService\";\n    this.stack = (new Error()).stack;\n}\n\n/**\n * Error raised when underlying geoportal service answers on error.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_SRVERR = \"SERVICE_ERROR\";\n/**\n * Error raised when funcion use is inappropriate\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_USEERR = \"USAGE_ERROR\";\n/**\n * Error raised when API can't perform the job for a reason other than the two other ones.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_UNKERR = \"UNKNOWN_ERROR\";\n\n/**\n * @lends module:ErrorService\n */\nErrorService.prototype = Object.create(Error.prototype, {\n    constructor : {\n        value : ErrorService,\n        writable : true,\n        configurable : true\n    }\n});\n\nexport default ErrorService;\n","import Logger from \"../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Standard WPS\n *\n * @constructor\n * @alias Gp.Formats.WPS\n * @param {Object} options - options\n * @param {Object}   options.data - objet\n * @param {String}   options.method - POST|GET\n * @param {String}   options.param.service - \"WPS\"\n * @param {String}   options.param.version - \"1.0.0\"\n * @param {String}   options.param.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n * @param {String}   options.param.rawdataoutput - \"result\"\n * @param {String}   options.param.request - \"Execute\"\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n * @private\n */\nfunction WPS (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur WPS()]\");\n\n    if (!(this instanceof WPS)) {\n        throw new TypeError(\"WPS constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    /**\n     * Objet DATA\n     */\n    this.DataObject = this.options.data;\n\n    if (!this.DataObject) {\n        throw new TypeError(\"This data object is not defined !\");\n    }\n\n    /**\n     * param service.\n     * Par defaut, \"WPS\".\n     */\n    this.paramservice = this.options.param.service || \"WPS\";\n\n    /**\n     * param version.\n     * Par defaut, \"1.0.0\".\n     */\n    this.paramversion = this.options.param.version || \"1.0.0\";\n\n    /**\n     * param identifier\n     * Par defaut, \"gs:WPS\"\n     */\n    this.paramidentifier = this.options.param.identifier || \"gs:WPS\";\n\n    /**\n     * param rawdataoutput\n     * Par defaut, \"result\".\n     */\n    this.paramrawdataoutput = this.options.param.rawdataoutput || \"result\";\n\n    /**\n     * param request\n     * Par defaut, \"Execute\".\n     */\n    this.paramrequest = this.options.param.request || \"Execute\";\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nWPS.prototype = {\n\n    /**\n     * @lends module:WPS#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : WPS,\n\n    /**\n     * Template de la requte.\n     */\n    template : {\n        get : {\n            value : \"service=__SERVICE__\" +\n                \"&version=__VERSION__\" +\n                \"&rawdataoutput=__RAWDATAOUTPUT__\" +\n                \"&identifier=__IDENTIFIER__\" +\n                \"&request=__REQUEST__\" +\n                \"&datainputs=<!-- __DATAINPUTS__ -->\",\n\n            input : \"__KEY__=__DATA__\"\n\n        },\n        post : {\n\n            value : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\" +\n                \"<wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\" \" +\n                \"__NAMESPACE__ __SCHEMALOCATION__>\" +\n                \"<ows:Identifier>__IDENTIFIER__</ows:Identifier>\" +\n                \"<wps:DataInputs>\" +\n                \"<!-- __DATAINPUTS__ -->\" +\n                \"</wps:DataInputs>\" +\n                \"<wps:ResponseForm>\" +\n                \"<wps:RawDataOutput>\" +\n                \"<ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\" +\n                \"</wps:RawDataOutput>\" +\n                \"</wps:ResponseForm>\" +\n                \"</wps:__REQUEST__>\",\n\n            input : \"<wps:Input>\" +\n                \"<ows:Identifier>__KEY__</ows:Identifier>\" +\n                \"<wps:Data>\" +\n                \"<wps:LiteralData>__DATA__</wps:LiteralData>\" +\n                \"</wps:Data>\" +\n                \"</wps:Input>\"\n        }\n    },\n\n    /**\n     * Namespace par defaut de la requete POST.\n     *\n     * @returns {String} namespace\n     */\n    namespaceByDefault : function () {\n        var ns = [\n            \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\",\n            \"xmlns=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:wfs=\\\"http://www.opengis.net/wfs\\\"\",\n            \"xmlns:wps=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:ows=\\\"http://www.opengis.net/ows/1.1\\\"\",\n            \"xmlns:gml=\\\"http://www.opengis.net/gml\\\"\",\n            \"xmlns:ogc=\\\"http://www.opengis.net/ogc\\\"\",\n            \"xmlns:wcs=\\\"http://www.opengis.net/wcs/1.1.1\\\"\",\n            \"xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\"\n        ];\n\n        return ns.join(\" \");\n    },\n\n    /**\n     * Schemalocation par defaut.\n     *\n     * @returns {String} schemaLocation\n     */\n    schemaLocationByDefault : function () {\n        return \"xsi:schemaLocation=\\\"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\\\"\";\n    },\n\n    /**\n     * Construction de la requte.\n     *\n     * @example\n     * // GET  out :\n     * //  service=__SERVICE__\n     * //  &version=__VERSION__\n     * //  &rawdataoutput=__RAWDATAOUTPUT__\n     * //  &identifier=__IDENTIFIER__\n     * //  &request=__REQUEST__\n     * //  &datainputs=\"__DATAINPUTS__\"\n     * //  avec __DATAINPUTS__ = __KEY__=__DATA__;...\n     *\n     * // POST out :\n     * //      <?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\n     * //      <wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\"\n     * //         __NAMESPACE__ __SCHEMALOCATION__>\n     * //          <ows:Identifier>__IDENTIFIER__</ows:Identifier>\n     * //          <wps:DataInputs>\n     * //              <!-- __DATAINPUTS__ -->\n     * //          </wps:DataInputs>\n     * //          <wps:ResponseForm>\n     * //              <wps:RawDataOutput>\n     * //              <ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\n     * //              </wps:RawDataOutput>\n     * //          </wps:ResponseForm>\n     * //      </wps:__REQUEST__>\",\n     * //      avec __DATAINPUTS__\n     * //             <wps:Input>\n     * //                  <ows:Identifier>__KEY__</ows:Identifier>\n     * //                  <wps:Data>\n     * //                    <wps:LiteralData>__DATA__</wps:LiteralData>\n     * //                  </wps:Data>\n     * //              </wps:Input>\n     *\n     * @returns {Boolean} validation de la construction de la requete\n     */\n    processRequestString : function () {\n        this.logger.trace(\"WPS::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        } else {\n            this.logger.error(\"No other method supported by the service !\");\n            return false;\n        }\n\n        template = template.replace(/__SERVICE__/g, this.paramservice);\n        template = template.replace(/__VERSION__/g, this.paramversion);\n        template = template.replace(/__RAWDATAOUTPUT__/g, this.paramrawdataoutput);\n        template = template.replace(/__IDENTIFIER__/g, this.paramidentifier);\n        template = template.replace(/__REQUEST__/g, this.paramrequest);\n\n        // ajout +\n        if (this.method === \"POST\") {\n            template = template.replace(/__NAMESPACE__/g, this.namespaceByDefault);\n            template = template.replace(/__SCHEMALOCATION__/g, this.schemaLocationByDefault);\n        }\n\n        // ajout des datainputs\n        template = template.replace(/<!-- __DATAINPUTS__ -->/g, this.__addDataInputs());\n\n        if (!template) {\n            this.logger.warn(\"traduction tmpl : empty request !?\");\n            return false;\n        }\n\n        this.requestString = template;\n        this.logger.trace(\"traduction tmpl\", template);\n\n        return true;\n    },\n\n    /**\n     * Ajout des donnes\n     *\n     * @returns {String} Donnes concatnes dans une chaine\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"WPS::__addDataInputs ()\");\n\n        // c'est un peu grossier...\n        var tmpl = this.method === \"GET\" ? this.template.get.input : this.template.post.input;\n        var sep = this.method === \"GET\" ? \";\" : \"\";\n\n        var result = \"\";\n        var that = this;\n        var map = this.DataObject.getData();\n        for (var i = 0; i < map.length; i++) {\n            // FIXME closure ?\n            (function (j) {\n                if (sep) {\n                    sep = (j === map.length - 1) ? \"\" : \";\";\n                }\n                result = result.concat(that.__addDataInput(tmpl, map[j].k, map[j].v), sep);\n            })(i);\n        }\n\n        return result;\n    },\n\n    /**\n     * Ajout d'une donne.\n     *\n     * @param {String} tmpl - template\n     * @param {String} key - clef\n     * @param {String} data - valeur\n     * @returns {String} chaine avec les substitutions clef/valeur\n     */\n    __addDataInput : function (tmpl, key, data) {\n        var tmp = tmpl;\n        tmp = tmp.replace(/__KEY__/g, key);\n        tmp = tmp.replace(/__DATA__/g, data);\n        return tmp;\n    },\n\n    /**\n     * Definir le mode de requte\n     *\n     * @param {String} method - GET|POST\n     */\n    setMethod : function (method) {\n        if (method === \"GET\" || method === \"POST\") {\n            this.method = method;\n        } else {\n            this.logger.warn(\"support only GET and POST method !\");\n        }\n    },\n\n    /**\n     * Retourne le mode de requete (GET|POST).\n     *\n     * @returns {AltiRequest.options.mode|String} methode (GET|POST)\n     */\n    getMethod : function () {\n        return this.method;\n    }\n};\n\nexport default WPS;\n","/* global require */\n\nimport Logger from \"../Utils/LoggerByDefault\";\n// import __xmldom from \"xmldom\";\n\n/**\n * @classdesc\n *\n * Classe permettant d'crire ou de lire du XML, sous forme de document DOM,\n * ventuellement selon des cls de lecture (readers) ou d'criture (writers) spcifiques.\n *\n * @constructor\n * @alias Gp.Formats.XML\n *\n * @param {Object} [options] - options du format XML\n *\n * @param {Object} [options.reader] - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n *      utile pour interprter le XML lorsque sa structure est connue.\n *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n *\n * @param {Object} [options.writers] - writers\n *\n * @param {String} [options.xmlString] - chane de caractre contenant du XML  interprter.\n *\n * @private\n */\nfunction XML (options) {\n    if (!(this instanceof XML)) {\n        throw new TypeError(\"XML constructor cannot be called as a function.\");\n    }\n\n    // FIXME : notion de singleton\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur XML ()]\");\n\n    /**\n     * Chane de caractres contenant le texte XML\n     * @type {String}\n     */\n    this.xmlString = null;\n\n    /**\n     * DOM Element correspondant  la structure du XML.\n     * @type {DOMElement}\n     */\n    this.xmlDoc = null;\n\n    /**\n     * Objet contenant des fonctions de lecture des diffrentes balises XML.\n     * @type {Object}\n     */\n    this.reader = null;\n\n    // traitement des paramtres d'options s'il y en a\n    if (options) {\n        if (options.xmlString && typeof options.xmlString === \"string\") {\n            this.xmlString = options.xmlString;\n            // Si une chaine de caractre a t passe en entre : on la transforme aussi en XML document\n            this.xmlDoc = __getXMLDOC(options.xmlString);\n        }\n        if (options.reader) {\n            this.setReader(options.reader);\n        }\n    }\n}\n\nXML.prototype = {\n\n    /**\n     * @lends module:XML\n     */\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : XML,\n\n    /**\n     * Mthode permettant de rcuprer la chane de caractres associe au format XML\n     *\n     * @returns {String} xmlString - la chane de caractres correspondant au format XML\n     */\n    getXMLString : function () {\n        return this.xmlString;\n    },\n\n    /**\n     * Mthode permettant d'attribuer une chane de caractres au format XML (attribut xmlString).\n     * La mthode va aussi transformer cette chane de caractres en document XML,\n     * afin de remplir l'attribut xmlDoc.\n     *\n     * @param {String} xmlString - la chane de caractres correspondant au format XML\n     */\n    setXMLString : function (xmlString) {\n        if (xmlString && typeof xmlString === \"string\") {\n            this.xmlString = xmlString;\n            this.xmlDoc = __getXMLDOC(xmlString);\n        }\n    },\n\n    /**\n     * Mthode permettant de rcuprer les readers associs au format XML, s'ils ont t dfinis\n     *\n     * @return {Object} readers - les readers associs au format XML, s'ils existent,\n     *      sous forme d'une collection de fonctions\n     */\n    getReader : function () {\n        return this.reader;\n    },\n\n    /**\n     * Mthode permettant d'attribuer des readers, sous la forme d'un objet de fonctions (node, data),\n     *      lorsqu'ils n'ont pas t dfinis lors de l'instanciation par exemple (new XML (options)).\n     *\n     * @param {Object} reader - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n     *      utile pour interprter le XML lorsque sa structure est connue.\n     *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n     */\n    setReader : function (reader) {\n        if (reader && reader.read && typeof reader.read === \"function\") {\n            this.reader = reader;\n        }\n    },\n\n    /**\n     * Mthode permettant de rcuprer le document XML associ au format, s'il existe.\n     *\n     * @return {DOMElement} xmlDoc - le document XML (DOM document node) s'il existe\n     */\n    getXMLDoc : function () {\n        return this.xmlDoc;\n    },\n\n    /**\n     * Setter\n     */\n    setXMLDoc : function (doc) {\n        this.xmlDoc = doc;\n    },\n    /**\n     * Mthode initialisant la lecture du XML,  partir d'un XML Document :\n     *      cration d'un objet JavaScript contenant les informations du XML,\n     *      sauf dans le cas o il n'existe pas de XML Document  interprter (retourne un objet vide).\n     *\n     * @return {Object} [parserOutput] - un objet JavaScript contenant les informations du XML :\n     * - soit toutes les informations si aucun reader n'a t spcifi  la cration du format\n     * - soit les informations spcifies dans le reader.\n     */\n    parse : function () {\n        // build xml document from xmlString\n        if (!this.xmlDoc && this.xmlString) {\n            this.xmlDoc = __getXMLDOC(this.xmlString);\n        }\n        if (this.xmlDoc) {\n            var root = __getRootNode(this.xmlDoc);\n            if (root) {\n                var parserOutput;\n                // call reader if exists\n                if (this.reader && this.reader.read) {\n                    parserOutput = this.reader.read(root);\n                } else {\n                    parserOutput = {};\n                    parserOutput[root.nodeName] = __readDefault(root);\n                }\n                return parserOutput;\n            } else {\n                return {};\n            }\n        }\n    }\n\n};\n\n/**\n * Mthode de la classe (prive) permettant de crer un XML Document  partir d'une chane de caractres XML,\n *      en utilisant DOMParser () lorsque c'est possible.\n *      For more information, see: https://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html#the-domparser-interface\n *\n * @private\n * @memberof XML\n * @method __getXMLDOC\n * @param {String} xmlString - xml string to be converted into DOM element\n * @return {DOMElement} - the corresponding XML Document\n */\nfunction __getXMLDOC (xmlString) {\n    if (typeof window === \"undefined\") {\n        // env. nodejs\n        var DOMParser = require(\"@xmldom/xmldom\").DOMParser; // __xmldom.DOMParser;\n        return new DOMParser().parseFromString(xmlString, \"text/xml\");\n    } else {\n        // env. browser\n\n        var parser;\n        var xmlDoc;\n        var errorMsg = \"Erreur lors du parsing de la rponse du service : XML non conforme\";\n\n        if (window.ActiveXObject) {\n            // Internet Explorer < 9\n            xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = false;\n            xmlDoc.loadXML(xmlString);\n            var parseError = xmlDoc.parseError;\n            if (parseError.errorCode) {\n                if (parseError.line && parseError.linepos) {\n                    errorMsg += \"( ligne \" + parseError.line + \", colonne \" + parseError.linepos;\n                }\n                if (parseError.reason) {\n                    errorMsg += \":  \" + parseError.reason + \")\";\n                }\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else if (window.DOMParser) {\n            // les autres (Chrome, Mozilla, IE >= 9)\n            parser = new window.DOMParser();\n            try {\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n            } catch (e) {\n                // Internet Explorer browser raises exception if xmlString is not valid XML\n                if (e.message === \"SyntaxError\") {\n                    throw new Error(errorMsg);\n                } else {\n                    throw new Error(\"Erreur lors du parsing de la rponse du service : \" + e.message);\n                }\n            }\n            // look for parsing error in case no exception was raised\n            if (xmlDoc.getElementsByTagName(\"parsererror\").length > 0) {\n                var parsererror = xmlDoc.getElementsByTagName(\"parsererror\");\n                for (var i = 0; i < parsererror.length; i++) {\n                    var content = parsererror[i].innerHTML;\n                    // except in case parsererror is just because of huge xml, but parsing is done.\n                    if (content.indexOf(\"Huge input lookup\") === -1) {\n                        errorMsg += \"(\" + content + \")\";\n                        throw new Error(errorMsg);\n                    }\n                }\n            } else if (!xmlDoc.documentElement) { // may happen in chrome browser\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else {\n            // FIXME\n            throw new Error(\"Incompatible DOM Parser pour ce navigateur !\");\n        }\n    }\n}\n\n/**\n * Mthode de la classe (prive) permettant de rcuprer le noeud racine du document,\n *       partir d'un document node (nodeType=9), puis lecture de ce noeud (readNode)\n *\n * @private\n * @memberof XML\n * @method __getRootNode\n * @param {DOMElement} [xmlDoc] - a Document Node\n * @return {DOMElement} root - the document root node\n */\nfunction __getRootNode (xmlDoc) {\n    var root;\n    if (xmlDoc.nodeType === 9) {\n        // INFO : nodeType 9 represents the entire document (the root-node of the DOM tree)\n        root = xmlDoc.documentElement;\n    } else if (xmlDoc.nodeType === 1) {\n        root = xmlDoc;\n    }\n    return root;\n}\n\n/**\n * Mthode de la classe (prive) permettant de lire automatiquement un noeud XML,\n *      lorsqu'aucun reader spcifique n'a t spcifi (parser brut)\n *\n * @private\n * @memberof XML\n * @method readDefault\n * @param {DOMElement} node - a DOM element node\n * @example final data object looks like :\n *          data = {\n *              attributeName: attributeValue,\n *              childName: {\n *                  attributeName: attributeValue,\n *                  attributeName: attributeValue,\n *                  childName: {\n *                      \"textContent\": textContent\n *                  },\n *                  childName: {\n *                      childName: {\n *                          attributeName:attributeValue\n *                      }\n *                  }\n *              }\n *          }\n */\nfunction __readDefault (node) {\n    var data = {};\n\n    // if element node has attributes, set their values to data\n    if (node.attributes.length > 0) {\n        var dataAttributes = __getAttributes(node);\n        data[\"attributes\"] = dataAttributes;\n    }\n\n    // if element node has childNodes, read them and set them to data\n    if (node.hasChildNodes()) {\n        var childData = {};\n        var child;\n        var children = node.childNodes;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 3) { // TEXT_NODE\n                data[\"textContent\"] = child.nodeValue;\n            } else if (child.nodeType === 1) {\n                childData = __readDefault(child);\n\n                if (!data[child.nodeName]) {\n                    // store childData in an object\n                    data[child.nodeName] = childData;\n                } else {\n                    // in case several childNodes has the same name : store them in an array.\n                    // if data[nodeName] already exists but is not an array\n                    if (!Array.isArray(data[child.nodeName])) {\n                        var old = data[child.nodeName];\n                        data[child.nodeName] = [];\n                        data[child.nodeName].push(old);\n                    }\n                    data[child.nodeName].push(childData);\n                }\n            }\n            // TODO : manage other node types (4=CDATA, etc)\n        }\n    }\n\n    return data;\n}\n\n/**\n * Mthode de la classe (prive) permettant de rcuprer les attributs d'un noeud lment\n *\n * @private\n * @memberof XML\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherch\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des diffrents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\nexport default XML;\n","/**\n* Global variable Gp.\n*\n* @module Gp\n* @alias Gp\n* @description\n*\n* This is the global variable that is exposed in the browser environment.\n* Content is composed of constructor, functions and properties...\n*\n* > {@link Gp.Error Error()}\n*     - .TYPE_SRVERR : \"SERVICE_ERROR\"\n*     - .TYPE_UNKERR : \"UNKNOWN_ERROR\"\n*     - .TYPE_USEERR : \"USAGE_ERROR\"\n*\n* > {@link module:Helper Helper}\n*     - .indent()\n*     - .normalyzeParameters()\n*     - .normalyzeUrl()\n*\n* > {@link module:XHR Protocols.XHR}\n*     - .call()\n*\n* > {@link module:Services Services (objects)}\n*     - .Alti\n*         - {@link Gp.Services.Alti.Elevation .Elevation()}\n*     - {@link Gp.Services.AltiResponse .AltiResponse()}\n*     - .AutoComplete\n*         - {@link Gp.Services.AutoComplete.SuggestedLocation .SuggestedLocation()}\n*     - {@link Gp.Services.AutoCompleteResponse .AutoCompleteResponse()}\n*     - {@link Gp.Services.Config .Config()}\n*     - {@link Gp.Services.DefaultUrl .DefaultUrl()}\n*     - {@link Gp.Services.GeocodeResponse .GeocodeResponse()}\n*     - {@link Gp.Services.GetConfigResponse .GetConfigResponse()}\n*     - {@link Gp.Services.IsoCurveResponse .IsoCurveResponse()}\n*     - .Route\n*         - {@link Gp.Services.Route.RouteInstruction .RouteInstruction()}\n*     - {@link Gp.Services.RouteResponse .RouteResponse()}\n*\n* > Services (factory)\n*     - {@link module:Services~autoComplete .autoComplete()}\n*     - {@link module:Services~geocode .geocode()}\n*     - {@link module:Services~getAltitude .getAltitude()}\n*     - {@link module:Services~getConfig .getConfig()}\n*     - {@link module:Services~isoCurve .isoCurve()}\n*     - {@link module:Services~reverseGeocode .reverseGeocode()}\n*     - {@link module:Services~route .route()}\n*\n* > servicesDate : \"YYYY-MM-DD\"\n*\n* > servicesVersion : \"X.X.X\"\n*\n*/\n\nimport Services from \"./Services/Services\";\nimport DefaultUrl from \"./Services/DefaultUrlService\";\nimport AltiResponse from \"./Services/Alti/Response/model/AltiResponse\";\nimport Elevation from \"./Services/Alti/Response/model/Elevation\";\nimport AutoCompleteResponse from \"./Services/AutoComplete/Response/model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./Services/AutoComplete/Response/model/SuggestedLocation\";\nimport IsoCurveResponse from \"./Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse\";\nimport RouteResponse from \"./Services/Route/Response/model/RouteResponse\";\nimport RouteInstruction from \"./Services/Route/Response/model/RouteInstruction\";\nimport Config from \"./Services/Config/Config\";\nimport XHR from \"./Protocols/XHR\";\nimport Error from \"./Exceptions/ErrorService\";\nimport Helper from \"./Utils/Helper\";\n\nimport Pkg from \"../package.json\";\n\n/** Version */\nexport const servicesVersion = Pkg.version;\n/** Publication date */\nexport const servicesDate = Pkg.date;\n\n// on declare les ns dans root global\nvar Gp = {};\n\nGp.servicesVersion = servicesVersion;\nGp.servicesDate = servicesDate;\n\n// Export Protocols\nGp.Protocols = {};\nGp.Protocols.XHR = XHR;\n// Export services\nGp.Services = Services;\n// Export DefaultUrls\nGp.Services.DefaultUrl = DefaultUrl;\n// Export Alti\nGp.Services.AltiResponse = AltiResponse;\nGp.Services.Alti = {};\nGp.Services.Alti.Elevation = Elevation;\n// Export Autocomplete\nGp.Services.AutoCompleteResponse = AutoCompleteResponse;\nGp.Services.AutoComplete = {};\nGp.Services.AutoComplete.SuggestedLocation = SuggestedLocation;\n// Export Config\nGp.Services.Config = Config;\n// Export IsoCurve\nGp.Services.IsoCurveResponse = IsoCurveResponse;\n// Export Route\nGp.Services.RouteResponse = RouteResponse;\nGp.Services.Route = {};\nGp.Services.Route.RouteInstruction = RouteInstruction;\n// Export Erreurs et Outils\nGp.Error = Error;\nGp.Helper = Helper;\n\nexport default Gp;\n","/**\n * JSONP : Implmentation du protocole JSONP de la plateforme Goportail\n *\n * @module JSONP\n * @private\n * @alias Gp.Protocols.JSONP\n */\nimport Logger from \"../Utils/LoggerByDefault\";\n\n// cf. https://github.com/sobstel/jsonp.js\nvar JSONP = {\n\n    /**\n     * Construction d'un identifiant statique bas sur le timestamp,\n     * et qui s'incremente de +1  chaque appel\n     */\n    uuid : (function () {\n        var id = Math.floor(Date.now());\n        return function () {\n            return id++;\n        };\n    })(),\n\n    /**\n     * Cette fonction ralise l'appel du service fourni via le paramtre \"options.url\"\n     * en mettant en uvre le protocole JSONP.\n     *\n     * @method call\n     * @static\n     * @param {Object} options - parametres d'invocation du service en JSONP\n     * @param {String} options.url - URL du service  invoquer (indpendamment du protocole JSONP).\n     *  Cette URL contient dj les paramtres du service.\n     *  Si le paramtre ddi  la mise en oeuvre du protocole JSONP (callback=xxx) n'est pas prsent, il est rajout par la fonction ;\n     *  sa valeur est dtermine en fonction du paramtre callbackName.\n     * @param {Number} [options.timeOut = 0] - Nombre de ms au bout duquel on considre que le service n'a pas rpondu.\n     *  Une valeur de 0 pour ce paramtre permet de dsactiver la gestion du timeOut.\n     * @param {String} [options.callbackSuffix = null] - Suffixe de la fonction de callback  rajouter sur l'URL.\n     *  Si aucun suffixe n'est spcifi (cas par dfaut), on utilisera l'identifiant this.uuid () comme suffixe. Ex: \"callback1458574396582 ()\"\n     * @param {String} [options.callbackName = gp.protocol.jsonp] - Valeur du paramtre callback  rajouter sur l'URL.\n     *  Si l'URL fournie contient dj le paramtre callback, le paramtre callbackName ne sera pas pris en compte.\n     *  La fonction de callback est cre dynamiquement par la fonction JSONP ;\n     *  elle a deux fonctions :\n     *    elle annule la condition de timeOut\n     *    puis appelle la fonction fournie par l'utilisateur via le paramtre onResponse.\n     * @param {Function} options.onResponse - Nom de la fonction qui sera appele lors de la rception des rsultats du service.\n     *  Ce paramtre sera ignor si l'URL contient dj le paramtre callback.\n     *  La fonction de rappel appele sera alors celle ayant pour nom la valeur de ce paramtre.\n     * @param {Function} [options.onTimeOut] - Nom de la fonction qui sera appele en cas de non rponse du service.\n     *  Le temps au bout duquel on considre que le service n'a pas rpondu est dtermin par le paramtre timeOut.\n     *  @example\n     *  var options = {\n     *      url : 'http://localhost/some/test.json&callback=myResults',\n     *      timeOut : 100,\n     *      callbackName : 'myResults',\n     *      callbackSuffix : \"\",\n     *      onResponse : function (response) {\n     *          console.log('results : ', response);\n     *      },\n     *\n     *   };\n     *   JSONP.call(options);\n     */\n    call : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"JSONP\");\n        logger.trace(\"[JSONP::call ()]\");\n\n        // analyse parametres\n\n        if (!options) {\n            logger.error(\"missing parameter : options !\");\n            throw new Error(\"missing parameter : options !\");\n        }\n\n        if (!options.url) {\n            logger.error(\"missing parameter : options.url !\");\n            throw new Error(\"missing parameter : options.url !\");\n        }\n\n        if (!options.timeOut) {\n            logger.info(\"setting 'options.timeOut' default value\");\n            options.timeOut = 0;\n        }\n\n        // FIXME si un callback cot client a t mis en place,\n        // cette condition sur cette methode n'a pas de sens !?\n        if (!options.onResponse) {\n            logger.error(\"missing parameter : options.onResponse !\");\n            throw new Error(\"missing parameter : options.onResponse !\");\n            // FIXME doit on definir un callback interne par defaut !?\n            // options.onResponse = function (data) {\n            //    console.log(\"response callback (inner) : \", data);\n            // };\n        }\n\n        // ID du callback  utiliser : null ou string.\n        // si l'utilisateur a spcifi un suffixe pour le callback, on le rcupre comme un ID (ex: options.callbackSuffix = \"\")\n        // sinon, on utilise un timestamp : this.uuid ()\n        var callbackId = (typeof options.callbackSuffix === \"string\") ? options.callbackSuffix : this.uuid();\n\n        // on recherche le parametre callback et son nom de fonction dans l'url\n        var urlHasCallbackKey = false;\n        var urlHasCallbackName = false;\n\n        var idx = options.url.indexOf(\"callback=\");\n\n        if (idx !== -1) {\n            urlHasCallbackKey = true;\n            // extraction callbackName de l'url : entre \"callback=\" et \"&\" ou fin de ligne\n            var j = options.url.indexOf(\"&\", idx);\n            if (j === -1) {\n                j = options.url.length;\n            }\n\n            // on ecrase le parametre options.callbackName s'il avait t dfini\n            var callbackName = options.url.substring(idx + 9, j);\n\n            if (callbackName) {\n                urlHasCallbackName = true;\n                options.callbackName = callbackName;\n                logger.info(\"setting 'options.callbackName' value (\" + options.callbackName + \") from 'options.url' parameter\");\n            }\n        }\n\n        // on ajoute le parametre callback dans l'URL s'il n'existe pas\n        if (!urlHasCallbackKey) {\n            // gestion des autres param. et \"?\"\n            var k = options.url.indexOf(\"?\");\n            if (k === -1) {\n                // aucun param., ni de '?'\n                options.url = options.url + \"?\" + \"callback=\";\n            } else if (k === options.url.length) {\n                // uniquement le '?'\n                options.url = options.url + \"callback=\";\n            } else {\n                // le '?' et les param. existent\n                options.url = options.url + \"&\" + \"callback=\";\n            }\n            logger.info(\"setting callback default key in 'options.url' : \" + options.url);\n        }\n\n        // utilisation de la fonction callback cot client ?\n        var HasCallbackName = options.callbackName ? true : urlHasCallbackName;\n\n        // on ajoute le nom de la fonction callback dans l'URL si elle n'existe pas\n        if (!urlHasCallbackName) {\n            // fonction callback par defaut\n            if (!options.callbackName) {\n                logger.info(\"setting 'options.callbackName' default value\");\n                options.callbackName = \"callback\"; // ou \"gp.protocol.jsonp\" ?\n                // info : si on ne veut pas gerer d'ID dans le callback,\n                // options.callbackSuffix = \"\"\n                if (callbackId || callbackId === \"\") {\n                    options.callbackName += callbackId;\n                }\n            }\n            options.url = options.url.replace(\"callback=\", \"callback=\" + options.callbackName);\n            logger.info(\"setting callback function name in 'options.url' : \" + options.url);\n        }\n\n        // timeOut par defaut\n        if (!options.onTimeOut) {\n            logger.info(\"setting 'options.onTimeOut' default value\");\n            /** callback timeout par defaut */\n            options.onTimeOut = function (/* error */) {\n                console.log(\"TimeOut while invoking url : \" + options.url);\n            };\n        }\n\n        if (!HasCallbackName) {\n            var self = this;\n\n            // event du timeout\n            var onTimeOutTrigger = null;\n\n            // declenche le timeout si >  0 !\n            if (options.timeOut > 0) {\n                onTimeOutTrigger = window.setTimeout(\n                    function () {\n                        /** fonction de reponse du service */\n                        window[options.callbackName] = function () {};\n                        options.onTimeOut();\n                        self._deleteScript(callbackId);\n                    }, options.timeOut);\n            }\n\n            // FIXME le nom de la fonction n'accepte pas de namespace !\n            // ex. Gp.Function.callback\n            /**\n            * fonction de reponse du service\n            * @param {Object} data - data\n            * @private\n            */\n            window[options.callbackName] = function (data) {\n                window.clearTimeout(onTimeOutTrigger);\n                options.onResponse(data);\n                self._deleteScript(callbackId);\n            };\n        }\n\n        this._createScript(callbackId, options.url);\n    },\n\n    /**\n    * create Script\n    * @param {String} callbackId - callback Id\n    * @param {String} url - url\n    * @private\n    */\n    _createScript : function (callbackId, url) {\n        var scriptu;\n        var scripto = document.getElementById(\"results\" + callbackId);\n\n        scriptu = document.createElement(\"script\");\n        scriptu.setAttribute(\"type\", \"text/javascript\");\n        scriptu.setAttribute(\"src\", url);\n        scriptu.setAttribute(\"charset\", \"UTF-8\");\n        scriptu.setAttribute(\"id\", \"results\" + callbackId);\n        scriptu.setAttribute(\"async\", \"true\"); // FIXME async ?\n        // head ou body ou autres ?\n        var node = document.documentElement || document.getElementsByTagName(\"head\")[0];\n        if (scripto === null) {\n            node.appendChild(scriptu);\n        } else {\n            // s'il existe dj, on le remplace !\n            node.replaceChild(scriptu, scripto);\n        }\n    },\n\n    /**\n    * delete Script\n    * @param {String} callbackId - callback Id\n    * @private\n    */\n    _deleteScript : function (callbackId) {\n        var script = document.getElementById(\"results\" + callbackId);\n        if (script) {\n            var node = script.parentNode || document.documentElement;\n            if (!node) {\n                return;\n            }\n            node.removeChild(script);\n        }\n    }\n};\n\nexport default JSONP;\n","/**\n * Interface de dialogue avec les webservices\n *\n * @module Protocols\n * @private\n * @alias Gp.Protocols\n */\nimport Helper from \"../Utils/Helper\";\nimport XHR from \"./XHR\";\nimport JSONP from \"./JSONP\";\n\nvar Protocol = {\n\n    /**\n     * Interface unique d\"envoi d\"une requte.\n     *\n     * @method send\n     * @static\n     * @param {Object} options - options generales\n     * @param {String} options.url      - url du service\n     * @param {String} options.method   - GET, POST, PUT, DELETE\n     * @param {String} options.protocol - XHR | JSONP\n     * @param {String} options.format   - format de la reponse du service : json, xml ou null (brute)...\n     * @param {String} options.wrap     - encapsuler la reponse du service dans du JSON : true|false (true par defaut sur le protocole JSONP)\n     * @param {String} options.callbackSuffix - suffixe de la fonction de callback (JSONP uniquement) (ex: si callbackSuffix=\"\", la fonction s'appellera \"callback\")\n     * @param {String} options.timeOut  - 0 ms\n     * @param {Boolean} options.nocache  - true|false\n     * @param {Object|String} options.data        - content (post) ou param (get)\n     * @param {Object|String} options.headers     - (post) ex. referer\n     * @param {Object|String} options.content - (post) ex. \"application/json\"\n     * @param {String} options.scope       - this (TODO)\n     * @param {Function} options.onResponse - callback\n     * @param {Function} options.onFailure - callback\n     * @param {Function} options.onTimeOut - callback\n     * @param {String} options.proxyUrl -  (TODO)\n     */\n    send : function (options) {\n        // INFO\n        // \"output\" - param est interne  la classe \"Protocol\" (parametrable via \"wrap\"), et  ajouter  l\"url\n        //      ce param est independant du service car il est gr par le filtre LUA :\n        //          ex. json|xml (json par defaut).\n        //          Ce param. permet d\"encapsuler du XML dans du JSON :\n        //              {http : {status:200, error:null},xml :\"rponse du service\"}\n        //          Utile pour les services qui ne repondent que du XML (ex. Geocodage)\n        //\n        // |-------------------------------------------------|\n        // |      \\service |      |     |                    |\n        // | output\\ format| json | xml |     remarques      |\n        // |--------\\------|------|-----|--------------------|\n        // |    json       | json | json| json/xml encapsul |\n        // |    xml        | json | xml | param inactif      |\n        // |-------------------------------------------------|\n        // ex. le service demande une reponse native au \"format\" json et avec un \"output\" json.\n        // on a donc une reponse json encapsul dans un json : ce qu'on ne souhaite pas !\n        // dans ce cas on ne renseigne pas output=json\n\n        // INFO\n        // \"wrap\" - choix d\"encapsuler ou non les reponses dans du JSON.\n        //      Par defaut, on encapsule uniquement les reponses sur le protocole JSONP (et qui sont en xml) !\n\n        // INFO\n        // \"callback\" - param est interne  la classe \"Protocol\" (non parametrable), et  ajouter  l\"url\n        //      ce param est independant du service car il est gr aussi par le filtre LUA :\n        //          ex. callback|null\n        //          Ce param. permet de renvoyer une reponse javascript :\n        //              callback ({http : {status:200, error:null},xml :\"rponse du service\"})\n        //          Ce param. est non renseign par defaut car pour du JSONP, on utilise le\n        //          le protocol JSONP, et ce dernier implemente dj le callback !\n\n        // settings par defaut\n        var settings = options || {\n            method : \"GET\",\n            // protocol : \"JSONP\",\n            protocol : \"XHR\",\n            timeOut : 0,\n            format : null,\n            wrap : true,\n            nocache : true,\n            output : \"json\",\n            callback : null,\n            callbackSuffix : null\n        };\n\n        // on determine l'environnement d'execution : browser ou non ?\n        // et on stoppe pour nodeJS... sur un protocole JSONP !\n        if (typeof window === \"undefined\" && options.protocol === \"JSONP\") {\n            console.log(\"Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS\");\n            return;\n        }\n\n        if (options.protocol === \"XHR\" || options.format === \"json\") {\n            settings.wrap = false;\n        } else if (options.protocol === \"JSONP\" && options.format === \"xml\") {\n            settings.wrap = true;\n        }\n\n        settings.callback = null; // FIXME non gr !?\n        settings.output = settings.wrap ? \"json\" : null;\n\n        // on encapsule les reponses dans un objet JSON\n        if (settings.wrap) {\n            var params = {};\n            params.output = settings.output;\n            params.callback = settings.callback;\n            delete params.callback; // FIXME non gr !?\n            settings.url = Helper.normalyzeUrl(options.url, params);\n        }\n\n        // choix de l\"implementation :\n        // XHR ou JSONP\n        switch (settings.protocol) {\n            case \"XHR\":\n                // on normalise l'url (gestion du cache)\n                if (options.method === \"GET\" && options.nocache) {\n                    settings.url = Helper.normalyzeUrl(settings.url, {\n                        t : new Date().getTime()\n                    });\n                }\n                // appel du service en XHR\n                XHR.call(settings);\n                break;\n            case \"JSONP\":\n\n                // on normalise l'url si les params. sont renseigns dans la string|object \"data\"\n                if (settings.data) {\n                    settings.url = Helper.normalyzeUrl(settings.url, settings.data);\n                }\n\n                // appel du service en JSONP\n                JSONP.call(settings);\n                break;\n            default:\n                throw new Error(\"protocol not supported (XHR|JSONP) !\");\n        }\n    }\n\n};\n\nexport default Protocol;\n","/* global Promise, require, XDomainRequest */\n\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport ES6Promise from \"es6-promise\";\n// import __request from \"request\";\n// import __xmldom from \"xmldom\";\n\n/**\n * Ajax Request (use of Promises)\n *\n * @module XHR\n * @alias Gp.Protocols.XHR\n * @see dependance 'es6-promise'\n */\n\n// cf. https://xhr.spec.whatwg.org/\n// cf. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n\nvar XHR = {\n\n    /**\n     * Interface unique d'envoi d'une requte.\n     *\n     * @method call\n     * @static\n     * @param {Object} settings - options generales\n     * @param {String} settings.url    - url du service\n     * @param {String} settings.method - GET, POST, PUT, DELETE\n     * @param {String} settings.format - format de la reponse du service : json, xml ou null (brute)\n     * @param {String} settings.data   - content (post) ou param (get)\n     * @param {String} settings.proxy  - proxy url\n     * @param {Object|String} settings.headers - (post) ex. referer\n     * @param {Object|String} settings.content - (post) ex. 'application/json'\n     * @param {String} settings.timeOut - timeout = 0 par defaut\n     * @param {String} settings.scope - this\n     * @param {Function} settings.onResponse - callback\n     * @param {Function} settings.onFailure  - callback\n     */\n    call : function (settings) {\n        // logger\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::call()]\");\n\n        // FIXME\n        // To polyfill the global environment\n        ES6Promise.polyfill();\n\n        // test sur les settings obligatoires\n        if (!settings.url) {\n            throw new Error(\"missing parameter : url is not defined !\");\n        }\n\n        if (!settings.method) {\n            throw new Error(\"missing parameter : method is not defined !\");\n        }\n\n        if (!settings.format) {\n            settings.format = \"text\"; // reponse brute !\n        }\n\n        var options = {};\n        options.url = settings.url;\n        options.data = settings.data ? settings.data : null;\n        options.method = settings.method;\n        options.timeOut = settings.timeOut || 0;\n        options.scope = settings.scope || this;\n        options.proxy = settings.proxy || null;\n        options.content = settings.content || null;\n        options.headers = settings.headers || {\n            referer : \"http://localhost\"\n        };\n\n        // test sur les valeurs de 'settings.method'\n        switch (settings.method) {\n            case \"DELETE\":\n            case \"GET\":\n                break;\n            case \"PUT\":\n            case \"POST\":\n                // on force sur ces params spcifiques au mode POST\n                options.content = settings.content ? settings.content : \"application/x-www-form-urlencoded\"; // FIXME en attente des services : bascule en \"application/xml\" ou \"application/json\"\n                options.headers = settings.headers ? settings.headers : { referer : \"http://localhost\" }; // FIXME parametrable...\n                break;\n            case \"HEAD\":\n            case \"OPTIONS\":\n                throw new Error(\"HTTP method not yet supported !\");\n            default:\n                throw new Error(\"HTTP method unknown !\");\n        }\n\n        // test sur les valeurs de 'settings.format'\n        switch (settings.format) {\n            case \"text\":\n                this.__call(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"json\":\n                this.__callJSON(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"xml\":\n                this.__callXML(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            default:\n                throw new Error(\"This output Format is not yet supported !\");\n        }\n    },\n\n    /**\n     * Requete\n     *\n     * @method __call\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __call : function (options) {\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::__call()]\");\n\n        var promise = new Promise(\n            function (resolve, reject) {\n                // traitement du corps de la requte\n                var corps = (options.method === \"POST\" || options.method === \"PUT\") ? 1 : 0;\n\n                // seulement si options.data n'est pas vide (peut tre un objet ou une chaine de caractres)\n                if (options.data && ((typeof options.data === \"object\" && Object.keys(options.data).length) || (typeof options.data === \"string\" && options.data.length)) && !corps) {\n                    options.url = Helper.normalyzeUrl(options.url, options.data);\n                }\n\n                logger.trace(\"URL = \", options.url);\n\n                var hXHR = null;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var nodefetch = require(\"node-fetch\");\n\n                    var opts = {\n                        headers : {\n                            Referer : \"https://localhost\"\n                        }\n                    };\n\n                    if (options.data && typeof options.data === \"string\" && corps) {\n                        opts = {\n                            method : options.method,\n                            body : options.data,\n                            headers : {\n                                \"Content-Type\" : options.content,\n                                Referer : \"https://localhost\"\n                            }\n                        };\n                    }\n\n                    return nodefetch(options.url, opts)\n                        .then(function (response) {\n                            if (response.ok) { // res.status >= 200 && res.status < 300\n                                resolve(response.text());\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + response.statusText + \"' | url : '\" + response.url + \"')\";\n                                var status = response.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        })\n                        .catch(function (e) {\n                            reject({\n                                message : e,\n                                status : -1\n                            });\n                        });\n                } else {\n                    if (window.XMLHttpRequest) {\n                        logger.trace(\"XMLHttpRequest\");\n\n                        hXHR = new XMLHttpRequest();\n                        hXHR.open(options.method, options.url, true); // async\n                        hXHR.overrideMimeType = options.content;\n\n                        // gestion du timeout\n                        var onTimeOutTrigger = null;\n                        if (options.timeOut > 0) {\n                            // FIXME le timeout interne ne me permet pas de declencher le bon message...\n                            // hXHR.timeout = options.timeOut;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                            /**\n                             * Description\n                             *\n                             * @method onTimeOutTrigger\n                             * @private\n                             */\n                            onTimeOutTrigger = window.setTimeout(\n                                function () {\n                                    var message = \"TimeOut Occured on Http Request with XMLHttpRequest !\";\n                                    reject({\n                                        message : message,\n                                        status : -1\n                                    });\n                                }, options.timeOut);\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            logger.trace(\"data = \", options.data);\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * On Error\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function (e) {\n                            console.log(e);\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Timeout\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function (e) {\n                            console.log(e);\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method onreadystatechange\n                         * @private\n                         */\n                        hXHR.onreadystatechange = function (e) {\n                            if (hXHR.readyState === 4) { // DONE\n                                if (hXHR.status === 200) {\n                                    window.clearTimeout(onTimeOutTrigger);\n                                    resolve(hXHR.response);\n                                } else {\n                                    var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"' | response : '\" + e.target.response + \"')\";\n                                    var status = e.target.status;\n                                    reject({\n                                        message : message,\n                                        status : status\n                                    });\n                                }\n                            }\n                        };\n\n                        // gestion du content data\n                        var data4xhr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xhr);\n                    } else if (window.XDomainRequest) {\n                        // worked in Internet Explorer 810 only !\n                        logger.trace(\"XDomainRequest\");\n\n                        hXHR = new XDomainRequest();\n                        hXHR.open(options.method, options.url);\n\n                        hXHR.overrideMimeType = options.content;\n\n                        if (options.timeOut > 0) {\n                            hXHR.timeout = options.timeout;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * Description\n                         *\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function () {\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function () {\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Load\n                         *\n                         * @method onload\n                         * @private\n                         */\n                        hXHR.onload = function (e) {\n                            if (hXHR.status === 200) {\n                                resolve(hXHR.responseText);\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"')\";\n                                var status = e.target.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        };\n\n                        var data4xdr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xdr);\n                    } else {\n                        throw new Error(\"CORS not supported\");\n                    }\n                }\n            }\n        );\n\n        return promise;\n    },\n\n    /**\n     * Requete avec parser JSON\n     *\n     * @method __callJSON\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callJSON : function (options) {\n        return this.__call(options)\n            .then(JSON.parse)\n            .catch(function (error) {\n                console.log(\"_callJSON failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    },\n\n    /**\n     * Requete avec parser XML\n     *\n     * @method __callXML\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callXML : function (options) {\n        return this.__call(options)\n            .then(function (response) {\n                var xmlDoc;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var DOMParser = require(\"@xmldom/xmldom\").DOMParser; // __xmldom.DOMParser\n                    xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n                } else {\n                    if (window.DOMParser) {\n                        var parser = new window.DOMParser();\n                        xmlDoc = parser.parseFromString(response, \"text/xml\");\n                    } else { // IE\n                        xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n                        xmlDoc.async = false;\n                        xmlDoc.loadXML(response);\n                    }\n                }\n\n                return xmlDoc;\n            })\n            .catch(function (error) {\n                console.log(\"__callXML failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    }\n\n};\n\nexport default XHR;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport AltiRequestFactory from \"./Request/AltiRequestFactory\";\nimport AltiResponseFactory from \"./Response/AltiResponseFactory\";\n\n/**\n * @classdesc\n *\n * Appel du service d'altimtrie du Goportail\n *\n * @todo gestion du parma. output et callback\n * @todo outputFormat (REST) et format (WPS)\n * @todo La reponse JSON peut encapsuler un XML !\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Alti\n * @param {Object} options - options spcifiques au service (+ les options herites)\n *\n * @param {Array.<Object>} options.positions - Tableau ({lon:float,lat:float}) contenant les coordonnes des points (CRS:84)\n *      dont on veut connatre les altitudes (ou  partir desquelles on va calculer le profil).\n *      Chaque lment du tableau est un objet JavaScript avec deux attributs : lon et lat, qui sont des flottants.\n *      Minimum 2 lments si on souhaite calculer un profil altimtrique (ElevationLine).\n *      Maximum 50 lments.\n *\n * @param {String} options.outputFormat - Le format de la rponse du service alti : 'xml' ou 'json'.\n *      Ce paramtre dterminera l'extension '.xml' ou '.json' du service dans le cas de l'API REST,\n *      ou la valeur du paramtre 'format' dans le cas de la norme WPS.\n *      Ncessaire si serverUrl est renseign, et qu'on souhaite passer par l'API REST,\n *      pour connatre le format dans lequel sera fournie la rponse (pour son traitement).\n *      Non ncessaire pour la norme WPS. Par dfaut, ce paramtre vaut 'json'.\n *\n * @param {Number} [options.sampling] - Nombre de points  utiliser pour dterminer le trac d'un profil altimtrique, compris entre 2 et 5000.\n *      A spcifier lorsqu'on souhaite accder  cette fonctionnalit.\n *      Dans ce cas, les points fournis en entre (au minimum de deux) servent  dterminer l'axe planimtrique\n *      le long duquel le profil doit tre calcul.\n *      Si le paramtre sampling n'est pas spcifi ou moins de deux points sont fournis,\n *      c'est le service Elevation qui sera interrog (altitudes simples calcules pour les points fournis).\n *      Une valeur de sampling strictement infrieure  2 dclenchera un chantillonnage avec la valeur par dfaut du service (3 points).\n *\n * @param {String} [options.api] - Manire d'accder au service : 'REST' (via l'API REST) ou 'WPS' (via la norme WPS).\n *      Par dfaut, on utilise l'API REST.\n *\n * @param {Boolean} [options.zonly] - Permet de ne rcuprer que les altitudes en sortie s'il vaut 'true'.\n *      Vaut 'false' par dfaut.\n *\n * @param {String} [options.resource] - Resource utilise pour raliser le calcul.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spcifique au service\n *      positions : [{lon:, lat:}, {lon:, lat:}],\n *      outputFormat : 'json' // json|xml\n *      sampling : 3,\n *      api : 'REST', // REST|WPS\n *      zonly : false // false|true,\n *      resource : \"resource-par-defaut\"\n *   };\n *\n */\nfunction Alti (options) {\n    if (!(this instanceof Alti)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Alti\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Alti\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Alti\");\n    this.logger.trace(\"[Constructeur Alti (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    if (!options.positions) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"positions\"));\n    }\n\n    if (options.positions.length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"positions\"));\n    }\n\n    // ajout des options spcifiques au service\n    this.options.positions = options.positions;\n\n    // format de rponse du service : \"json\" ou \"xml\" (valeur par dfaut), en minuscule !\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"xml\";\n\n    // ressource utilise pour le calcul altimtrique\n    this.options.resource = options.resource || \"ign_rge_alti_wld\";\n\n    // sampling\n    this.options.sampling = options.sampling || null;\n\n    // type d'api utilis pour requeter le service, en majuscule !\n    this.options.api = (typeof options.api === \"string\") ? options.api.toUpperCase() : \"REST\";\n\n    // l'api ne peut tre interroge qu'en GET.\n    if (this.options.api === \"REST\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // param. zonly\n    this.options.zonly = options.zonly || false;\n\n    // param. measures\n    this.options.measures = options.measures || false;\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseigne, il faut utiliser les urls par defaut\n    // en fonction du type d'api, REST ou WPS, du format de reponse demand (outputFormat)\n    // ainsi que sur le type de service (profil ou elevation)\n    if (!this.options.serverUrl) {\n        var lstUrlByDefault = DefaultUrlService.Alti.newUrl();\n        var urlFound = null;\n        switch (this.options.api) {\n            case \"WPS\":\n                urlFound = lstUrlByDefault.wps;\n                break;\n            case \"REST\":\n                var key = (options.sampling ? \"profil\" : \"elevation\") + \"-\" + this.options.outputFormat;\n                urlFound = lstUrlByDefault[key];\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"api\"));\n        }\n\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Server URL by default : \" + this.options.serverUrl);\n    }\n\n    // gestion du type de service\n    // si l'extension de l'url est .json ou .xml, on surcharge le format de sortie (outputFormat)\n    var idx = this.options.serverUrl.lastIndexOf(\".\");\n    if (idx !== -1) {\n        var extension = this.options.serverUrl.substring(idx + 1);\n        if (extension && extension.length < 5) { // FIXME extension de moins de 4 car. ...\n            this.logger.trace(\"Server Extension URL : \" + extension);\n            switch (extension.toLowerCase()) {\n                case \"json\":\n                case \"xml\":\n                    this.options.outputFormat = extension.toLowerCase();\n                    break;\n                default:\n                    throw new Error(\"type of service : unknown or unsupported (json or xml) !\");\n            }\n        }\n    }\n}\n\n/**\n * @lends module:Alti#\n */\nAlti.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nAlti.prototype.constructor = Alti;\n\n/**\n * Cration de la requte (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.buildRequest = function (error, success) {\n    // utilisation en mode callback\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // callback\n        onSuccess : function (result) {\n            // sauvegarde de la requete !\n            this.request = result;\n            success.call(this, this.request);\n        },\n        onError : error,\n        scope : this,\n        // spcifique au service :\n        resource : this.options.resource,\n        positions : this.options.positions,\n        outputFormat : this.options.outputFormat,\n        sampling : this.options.sampling,\n        api : this.options.api,\n        zonly : this.options.zonly,\n        measures : this.options.measures\n    };\n\n    AltiRequestFactory.build(options);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexit du retour du service qui renvoie soit\n    //  - une 'string' qui contient du XML ou JSON natif en mode XHR\n    //  - un objet JSON qui est natif ou encapsul\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        AltiResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Alti;\n","\n/**\n * Fonction retournant un objet contenant des cls de lecture (readers)\n *      qui permettent de parser des rponses XML du service Altimtrique du Goportail\n *      (calcul altimtrique simple ou profil altimtrique d'une courbe),\n *      lorsque le paramtre output = xml,\n *      afin de rcuprer les lvations retournes.\n *\n * @module AltiResponseReader\n * @alias Gp.Services.Alti.Formats.AltiResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport AltiResponse from \"../Response/model/AltiResponse\";\nimport Elevation from \"../Response/model/Elevation\";\nimport Measure from \"../Response/model/Measure\";\n\n/**\n *\n * Objet AltiResponseReader\n *\n * @member {Object} AltiResponseReader\n *\n * @property {Object} AltiResponseReader.READERS - Objet contenant des fonctions de lecture, appeles \"readers\"\n *      dont chaque cl correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associe est une fonction (node, data)\n *      o node est un noeud du document DOM\n *      et data est un objet o l'on stocke les informations lues dans le XML.\n *\n * @property {Method} AltiResponseReader.READERS.elevations -  Lecture d'un noeud \"elevations\" de la rponse XML\n *      du service alti, correspondant logiquement  la racine du document\n *      (contient un ou plusieurs childNodes correspondant chacun  une lvation retourne)\n *\n * @property {Method} AltiResponseReader.READERS.elevation - Lecture d'un noeud \"elevation\" de la rponse xml du service alti.\n *      (contient un ou 4 childNode (s) correspondant  l'altitude (z) et ventuellement lat, lon, et acc)\n *\n * @property {Method} AltiResponseReader.READERS.lat - Lecture d'un noeud \"lat\" de la rponse xml du service alti.\n *      (contient une valeur de latitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.lon - Lecture d'un noeud \"lon\" de la rponse xml du service alti.\n *      (contient une valeur de longitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.z - Lecture d'un noeud \"z\" de la rponse xml du service alti.\n *      (contient une valeur d'altitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.acc - Lecture d'un noeud \"acc\" de la rponse xml du service alti.\n *      (contient une valeur de prcision, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.measures - Lecture d'un noeud \"measures\" de la rponse xml du service alti.\n *      (contient une valeur de prcision, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.source_name - Lecture d'un noeud \"source_name\" de la rponse xml du service alti.\n *      (pour remplir l'ventuel objet measure)\n *\n * @property {Method} AltiResponseReader.READERS.source_mesure - Lecture d'un noeud \"source_mesure\" de la rponse xml du service alti.\n *      (pour remplir l'ventuel objet measure)\n *\n * @property {Method} AltiResponseReader.READERS.exceptionreport - Lecture d'un noeud \"ExceptionReport\" de la rponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.READERS.exception - Lecture d'un noeud \"Exception\" de la rponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.read - Mthode permettant de lancer la lecture d'une rponse XML du service altimtrique,\n *       l'aide des readers de la classe.\n *\n */\nvar AltiResponseReader = {};\n\nAltiResponseReader.READERS = {\n\n    /**\n     * Lecture d'un noeud \"elevations\" de la rponse XML du service alti, correspondant logiquement  la racine du document\n     *      (contient un ou plusieurs childNodes correspondant chacun  une lvation retourne)\n     *\n     * @param {DOMElement} root - racine de la rponse XML\n     * @static\n     * @memberof AltiResponseReader\n     * @returns {Object} Retourne un objet de type AltiResponse\n     */\n    elevations : function (root) {\n        // INFO : on passe en paramtre l'objet en entre elevations, vide,  remplir.\n        var altiResponse = new AltiResponse();\n\n        if (root.hasChildNodes()) {\n            var children = root.childNodes;\n            var child;\n            var elevation;\n\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    elevation = AltiResponseReader.READERS[child.nodeName](child);\n                    altiResponse.elevations.push(elevation);\n                }\n            }\n        }\n\n        return altiResponse;\n    },\n\n    /**\n     * Lecture d'un noeud \"elevation\" de la rponse xml du service alti.\n     *      (contient un ou 5 childNode (s) correspondant  l'altitude (z) et ventuellement lat, lon, acc et measures)\n     *\n     * @param {DOMElement} node - noeud elevation  lire pour rcuprer les informations de l'lvation retourne (z [, lon, lat, acc, measures])\n     * @return {Array} elevationResponse - format de la rponse en sortie, instance de AltiResponse\n     * @static\n     * @memberof AltiResponseReader\n     */\n    elevation : function (node) {\n        var elevation = new Elevation();\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    // INFO : on passe en paramtre l'objet en entre elevation, vide,  remplir.\n                    AltiResponseReader.READERS[child.nodeName](child, elevation);\n                }\n            }\n        }\n        return elevation;\n    },\n\n    /**\n     * Lecture d'un noeud \"lat\" de la rponse xml du service alti.\n     *      (contient une valeur de latitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer la latitude\n     * @param {Object} elevation - objet dans lequel stocker la latitude retourne\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lat : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lat = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la rponse du service : latitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"lon\" de la rponse xml du service alti.\n     *      (contient une valeur de longitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer la longitude\n     * @param {Object} elevation - objet dans lequel stocker la longitude retourne\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lon : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lon = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la rponse du service : longitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"z\" de la rponse xml du service alti.\n     *      (contient une valeur d'altitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer l'altitude\n     * @param {Object} elevationObject - objet dans lequel stocker l'altitude retourne : elevation ou measure\n     * @static\n     * @memberof AltiResponseReader\n     */\n    z : function (node, elevationObject) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            if (elevationObject) {\n                elevationObject.z = parseFloat(textNode.nodeValue);\n            } else {\n                elevationObject = new Elevation();\n                elevationObject.z = parseFloat(textNode.nodeValue);\n                return elevationObject;\n            }\n        } else {\n            throw new Error(\"Erreur dans la lecture de la rponse du service : altitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"acc\" de la rponse xml du service alti.\n     *      (contient une valeur de prcision, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer la prcision\n     * @param {Object} elevationObject - objet dans lequel stocker la prcision retourne : elevation ou measure\n     * @static\n     * @memberof AltiResponseReader\n     */\n    acc : function (node, elevationObject) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevationObject.acc = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la rponse du service : prcision (acc) attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"source_name\" de la rponse xml du service alti.\n     *      (contient le nom de la source, qui est un string)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer la prcision\n     * @param {Object} measure - objet dans lequel stocker le nom de la source retourn\n     * @static\n     * @memberof AltiResponseReader\n     */\n    source_name : function (node, measure) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            measure.source_name = textNode.nodeValue;\n        } else {\n            throw new Error(\"Erreur dans la lecture de la rponse du service : source_name attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"source_measure\" de la rponse xml du service alti.\n     *      (contient le nom de la mesure, qui est un string)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer la prcision\n     * @param {Object} measure - objet dans lequel stocker le nom de la source retourn\n     * @static\n     * @memberof AltiResponseReader\n     */\n    source_measure : function (node, measure) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            measure.source_measure = textNode.nodeValue;\n        } else {\n            throw new Error(\"Erreur dans la lecture de la rponse du service : source_measure attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"measures\" et de ses enfants \"measure\" de la rponse xml du service alti.\n     *      (contient une valeur de prcision, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer la prcision\n     * @param {Object} elevation - objet dans lequel stocker la prcision retourne\n     * @static\n     * @memberof AltiResponseReader\n     */\n    measures : function (node, elevation) {\n        elevation.measures = [];\n        var measure;\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var measureNode;\n            var measureChildren;\n            for (var i = 0; i < children.length; i++) {\n                measure = new Measure();\n                measureNode = children[i];\n                measureChildren = measureNode.childNodes;\n                for (var j = 0; j < measureChildren.length; j++) {\n                    if (AltiResponseReader.READERS[measureChildren[j].nodeName]) {\n                        // INFO : on passe en paramtre l'objet en entre elevation, vide,  remplir.\n                        AltiResponseReader.READERS[measureChildren[j].nodeName](measureChildren[j], measure);\n                    } else {\n                        throw new Error(\"Erreur dans la lecture de la rponse du service : measures attendues mais absentes\");\n                    }\n                }\n                elevation.measures.push(measure);\n            }\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"ExceptionReport\" de la rponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exceptionreport : function (node) {\n        var response = {};\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = AltiResponseReader.READERS.exception(child);\n                }\n            }\n        }\n\n        return response;\n    },\n\n    /**\n     * Lecture d'un noeud \"Exception\" de la rponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception, avec deux attributs :\n     *      {String} exceptionReport.exceptionCode - qui contient l'identifiant du code de l'exception\n     *      {String} exceptionReport.exception - qui contient le message de l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    },\n\n    /**\n     * Lecture d'un noeud \"Error\" de la rponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud  lire pour rcuprer l'exception\n     * @return {Object} error - objet contenant l'exception\n     * @static\n     */\n    error : function (node) {\n        var response = {\n            error : {}\n        };\n        // get error code and description\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                var textNode;\n                // get error code\n                if (child.nodeType === 1 && child.nodeName === \"code\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.code = textNode.nodeValue;\n                    }\n                }\n                // get error description\n                if (child.nodeType === 1 && child.nodeName === \"description\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.description = textNode.nodeValue;\n                    }\n                }\n            }\n        }\n        return response;\n    }\n\n};\n\n/**\n * Mthode permettant de lancer la lecture d'une rponse XML du service altimtrique,\n *       l'aide des readers de la classe.\n *\n * @method AltiResponseReader.read\n * @param {DOMElement} root - racine de la rponse XML  lire\n * @static\n * @memberof AltiResponseReader\n */\nAltiResponseReader.read = function (root) {\n    if (root.nodeName === \"elevations\") {\n        var altiResponse = AltiResponseReader.READERS.elevations(root);\n        return altiResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = AltiResponseReader.READERS.exceptionreport(root);\n        return exceptionReport;\n    } else if (root.nodeName === \"error\") {\n        var error = AltiResponseReader.READERS.error(root);\n        return error;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la rponse : elle n'est pas au format attendu.\");\n    }\n};\n\nexport default AltiResponseReader;\n","/**\n * Creation d'une requte en REST ou WPS\n * (Factory)\n *\n * @module AltiRequestFactory\n * @alias Gp.Services.Alti.Request.AltiRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AltiRequestREST from \"./AltiRequestREST\";\nimport AltiRequestWPS from \"./AltiRequestWPS\";\n\nvar AltiRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      httpMethod : 'GET', // GET|POST\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      scope : this,\n     *      positions : [{lon:, lat:}, {lon:, lat:}],\n     *      outputFormat : 'json' // json|xml\n     *      sampling : 3,\n     *      api : 'REST', // REST|WPS\n     *      zonly : false // false|true\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestFactory\");\n        logger.trace([\"AltiRequestFactory::build()\"]);\n\n        var request = null;\n\n        // on factorise les options par groupe;\n        // - global,\n        // - param, les params pour les data inputs\n        // - wps, les param du service\n        // - callback\n\n        var settings = {\n            // ajout des valeurs par defaut spcifiques au service\n            type : options.sampling ? \"Profil\" : \"Elevation\",\n            method : options.httpMethod,\n            param : {\n                positions : null,\n                delimiter : null, // FIXME par defaut, on ne le met pas en place car a fait planter la requte !?\n                indent : null, // par defaut\n                crs : null, // par defaut\n                format : null, // (only to POST)\n                sampling : null, // (only use by Profil)\n                zonly : null, // (only use by Elevation)\n                measures : null // (only use by Elevation)\n            }\n        };\n\n        // surcharge des valeurs obligatoires\n        settings.param.positions = options.positions;\n        settings.param.format = options.outputFormat;\n        settings.param.sampling = options.sampling;\n        settings.param.zonly = options.zonly;\n        settings.param.measures = options.measures;\n        settings.param.resource = options.resource;\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\"); // cast variable to boolean\n        var bOnSuccess = !!(options.onSuccess !== null && typeof options.onSuccess === \"function\");\n\n        var message = null;\n        switch (options.api) {\n            case \"REST\":\n                // FIXME les exceptions ne sont pas 'catches' sur le constructeur !\n                var myReq = new AltiRequestREST(settings);\n                if (!myReq.processRequestString()) {\n                    message = \"Error in process request (rest) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                request = myReq.requestString;\n                break;\n            case \"WPS\":\n                // ajout des valeurs par defaut spcifiques au service WPS\n                settings.wps = {\n                    service : null, // par defaut\n                    version : null, // par defaut\n                    identifier : null, // par defaut\n                    rawdataoutput : null, // par defaut\n                    request : null // par defaut\n                };\n\n                request = AltiRequestWPS.build(settings);\n                if (!request) {\n                    message = \"Error in process request (wps) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                break;\n            default:\n                message = \"Type of API is not supported by service (REST or WPS) !\";\n                if (bOnError) {\n                    options.onError.call(options.scope, new ErrorService(message));\n                    return;\n                }\n                throw new Error(message);\n        }\n\n        if (bOnSuccess) {\n            options.onSuccess.call(options.scope, request);\n        }\n\n        return request;\n    }\n};\n\nexport default AltiRequestFactory;\n","/* jshint multistr : true */\n\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des requtes de type REST sur le service altimetrique.\n *\n * @todo Le service Alti n'implemente pas le POST !?\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequestREST\n * @param {Object} options - options\n * @param {Object}   options.param.positions - tableau de coordonnes lon/lat\n * @param {String}   options.param.delimiter - '|'\n * @param {Boolean}  options.param.indent - false|true\n * @param {String}   options.param.crs - 'CRS:84'\n * @param {String}   options.param.sampling - 3\n * @param {String}   options.param.resource - 'rge_alti_corse2a_float32_zip_lamb93'\n * @param {Boolean}  options.param.zonly - false|true\n * @param {Boolean}  options.param.measures - false|true\n * @param {String}   options.param.format - \"JSON|XML\"\n * @param {String}   options.type - \"Profil|Elevation\"\n * @param {String}   options.method - GET|POST\n *\n * @example\n *      var options = {\n *           type : 'Profil', // Elevation\n *           method : 'GET',  // par defaut\n *           param : {\n *               positions : [\n *                   {lon:'1.11', lat:'1.11'},\n *                   {lon:'1.10', lat:'1.10'},\n *                   {lon:'1.12', lat:'1.12'}\n *               ],\n *               delimiter : \";\",         // par defaut\n *               indent    : true,        // par defaut\n *               crs       : 'EPSG:4326', // par defaut\n *               format    : 'json',      // par defaut (only to POST)\n *               sampling  : 3 ,          // par defaut (only use by Profil)\n *               zonly     : false        // par defaut (only use by Elevation)\n *               measures  : false        // par defaut (only use by Elevation)\n *           }\n *      };\n *\n *      var result;\n *      try {\n *          var obj = new AltiRequestREST (options);\n *          if (! obj.processRequestString ()) {\n *              throw new Error(\"Request empty !?\")\n *          }\n *          result = obj.requestString;\n *      } catch (e) {\n *          // exceptions...\n *      }\n * @private\n */\nfunction AltiRequestREST (options) {\n    this.logger = Logger.getLogger(\"AltiRequestREST\");\n    this.logger.trace(\"[Constructeur AltiRequestREST ()]\");\n\n    if (!(this instanceof AltiRequestREST)) {\n        throw new TypeError(\"AltiRequestREST constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    // existance des options\n    if (!this.options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    // type de requete : Altitude ou Profil\n    // (param.  determiner en fonction des parametres d'entre)\n    if (!this.options.type) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n    }\n\n    // construction du modele de requte\n    // (test du type d'objet candidat)\n    this.DataObject = null;\n    switch (this.options.type) {\n        case \"Elevation\":\n            this.DataObject = new AltiElevationRequest(this.options.param);\n            break;\n        case \"Profil\":\n            this.DataObject = new AltiProfilRequest(this.options.param);\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n    }\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nAltiRequestREST.prototype = {\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequestREST,\n\n    /**\n     * Template de la requte.\n     */\n    template : {\n        get : {\n            // FIXME on retire le param 'delimiter' : &delimiter='__DELIMITER__'\n            value : \"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__\",\n            input : {\n                point : \"&zonly=__ZONLY__\",\n                profil : \"&sampling=__SAMPLING__\"\n            }\n        },\n        post : {\n            // FIXME on retire le param 'delimiter' : delimiter='__DELIMITER__'\\n\\\n            value : \"lon=__LON__\\n\" +\n                \"lat=__LAT__\\n\" +\n                \"indent=__INDENT__\\n\" +\n                \"crs='__CRS__'\\n\" +\n                \"resource='__RESOURCE__'\\n\" +\n                \"measures='__MEASURES__'\\n\",\n            input : {\n                point : \"zonly=__ZONLY__\\n\",\n                profil : \"sampling=__SAMPLING__\"\n            }\n        }\n    },\n\n    /**\n     * Construction de la requte.\n     *\n     * @example\n     * // GET  out : lon=0.2367,2.1570&lat=48.0551,46.6077&delimiter=,&indent=true&zonly=true&crs='CRS:84'\n     * // POST out : Not yet supported method POST !\n     * @returns {String}\n     */\n    processRequestString : function () {\n        this.logger.trace(\"AltiRequestREST::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        }\n\n        template = template.replace(/__LON__/g, this.DataObject.getLon());\n        template = template.replace(/__LAT__/g, this.DataObject.getLat());\n        // FIXME on retire le param 'delimiter'\n        // template = template.replace(/__DELIMITER__/g, this.DataObject.delimiter);\n        template = template.replace(/__INDENT__/g, this.DataObject.indent);\n        template = template.replace(/__CRS__/g, this.DataObject.crs);\n        template = template.replace(/__RESOURCE__/g, this.DataObject.resource);\n        template = template.replace(/__MEASURES__/g, this.DataObject.measures);\n\n        // ajout +\n        template = template + this.__addDataInputs();\n        this.logger.trace(\"traduction tmpl\", template);\n\n        // sauvegarde\n        this.requestString = template;\n\n        return this.requestString;\n    },\n\n    /**\n     * Ajout de parametres spcifiques (ex. zonly)\n     *\n     * @returns {String}\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"AltiRequestREST::addDataInput ()\");\n\n        var myTemplate;\n        if (this.method === \"POST\") {\n            myTemplate = this.template.post;\n        } else if (this.method === \"GET\") {\n            myTemplate = this.template.get;\n        } else {\n            throw new Error(\"No other HTTP method supported by the service !\");\n        }\n\n        var tmpl = null;\n        if (this.DataObject.CLASSNAME === \"AltiElevationRequest\") {\n            tmpl = myTemplate.input.point;\n            return tmpl.replace(/__ZONLY__/g, this.DataObject.zonly.toString());\n        } else if (this.DataObject.CLASSNAME === \"AltiProfilRequest\") {\n            tmpl = myTemplate.input.profil;\n            return tmpl.replace(/__SAMPLING__/g, this.DataObject.sampling);\n        } else {\n            throw new Error(\"No other object supported than elevation or profil !?\");\n        }\n    }\n};\n\nexport default AltiRequestREST;\n","/**\n * Classe d'interface des requtes de type WPS sur le service altimetrique.\n * (Factory)\n *\n * @module Gp.Services.Alti.Request.AltiRequestWPS\n * @alias Gp.Services.Alti.Request.AltiRequestWPS\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport WPS from \"../../../Formats/WPS\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\nvar AltiRequestWPS = {\n\n    /**\n     * Interface unique de construction de la requte.\n     *\n     * @method build\n     * @param {Object} options - options\n     * @param {Object}   options.param.positions - tableau de coordonnes lon/lat\n     * @param {String}   options.param.delimiter - '|'\n     * @param {Boolean}  options.param.indent - false|true\n     * @param {String}   options.param.crs - 'CRS:84'\n     * @param {String}   options.param.sampling - 3\n     * @param {Boolean}  options.param.zonly - false|true\n     * @param {String}   options.param.format - \"JSON|XML\" (only to POST)\n     * @param {String}   options.wps.service - \"WPS\"\n     * @param {String}   options.wps.version - \"1.0.0\"\n     * @param {String}   options.wps.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n     * @param {String}   options.wps.rawdataoutput - \"result\"\n     * @param {String}   options.wps.request - \"Execute\"\n     * @param {String}   options.type - \"Profil|Elevation\"\n     * @param {String}   options.method - GET|POST\n     * @example\n     *      var options = {\n     *           type : 'Profil', // Elevation\n     *           method : 'GET',  // par defaut\n     *           param : {\n     *               positions : [\n     *                   {lon:'1.11', lat:'1.11'},\n     *                   {lon:'1.10', lat:'1.10'},\n     *                   {lon:'1.12', lat:'1.12'}\n     *               ],\n     *               delimiter : \";\",         // par defaut\n     *               indent    : true,        // par defaut\n     *               crs       : 'EPSG:4326', // par defaut\n     *               format    : 'json',      // par defaut (only to POST)\n     *               sampling  : 3 ,          // par defaut (only use by Profil)\n     *               zonly     : false,       // par defaut (only use by Elevation)\n     *           },\n     *           wps : {\n     *                 service : 'WPS',         // par defaut\n     *                 version : '1.0.0',       // par defaut\n     *                 identifier : 'gs:WPS',   // par defaut, Elevation = gs:WPSElevation, Profil = gs:WPSLineElevation\n     *                 rawdataoutput : 'result',// par defaut\n     *                 request : 'Execute'      // par defaut\n     *           }\n     *       };\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestWPS\");\n        logger.trace([\"AltiRequestWPS::build()\"]);\n\n        // existance des options\n        if (!options) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n        }\n\n        // type de requete : Altitude ou Profil\n        // (param.  determiner en fonction des parametres d'entre)\n        if (!options.type) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction du modele de requte\n        // (test du type d'objet candidat)\n        var DataObject = null;\n        switch (options.type) {\n            case \"Elevation\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSElevation\";\n                DataObject = new AltiElevationRequest(options.param);\n                break;\n            case \"Profil\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSLineElevation\";\n                DataObject = new AltiProfilRequest(options.param);\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction de la requte WPS\n        var settings = {\n            data : DataObject,\n            method : options.method,\n            param : options.wps\n        };\n\n        var rqstWPS = new WPS(settings);\n\n        if (!rqstWPS.processRequestString()) {\n            throw new Error(\"Enable to process request !\");\n        }\n\n        return rqstWPS.requestString;\n    }\n};\n\nexport default AltiRequestWPS;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requtes de type POINT du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiElevationRequest\n * @param {Object} options - options\n * @param {Boolean}  options.zonly - false|true\n *\n * @private\n */\nfunction AltiElevationRequest (options) {\n    if (!(this instanceof AltiElevationRequest)) {\n        throw new TypeError(\"AltiElevationRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiElevationRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiElevationRequest ()]\");\n\n    /**\n     * Z uniquement.\n     * true|false\n     */\n    this.zonly = this.options.zonly || false; // test des options hrites !\n}\n\n/**\n * @lends module:AltiElevationRequest#\n */\n\nAltiElevationRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"zonly\"\n     */\n    zonly : {\n        /** getter */\n        get : function () {\n            return this._zonly;\n        },\n        /** setter */\n        set : function (z) {\n            this._zonly = z;\n        }\n    }\n\n});\n\n/**\n * Constructeur (alias)\n */\nAltiElevationRequest.prototype.constructor = AltiElevationRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array}\n */\nAltiElevationRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"zonly\",\n        v : this.zonly\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    return map;\n};\n\nexport default AltiElevationRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requtes de type PROFIL du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiProfilRequest\n * @param {Object}   options - options\n * @param {String}   options.sampling - 3\n *\n * @private\n */\nfunction AltiProfilRequest (options) {\n    if (!(this instanceof AltiProfilRequest)) {\n        throw new TypeError(\"AltiProfilRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiProfilRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiProfilRequest ()]\");\n\n    /**\n     * Sampling\n     * Par defaut, 3\n     */\n    this.sampling = this.options.sampling || 3; // test des options hrites !\n}\n\n/**\n * @lends module:AltiProfilRequest#\n */\n\nAltiProfilRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"sampling\"\n     */\n    sampling : {\n        /** getter */\n        get : function () {\n            return this._sampling;\n        },\n        /** setter */\n        set : function (value) {\n            this._sampling = value;\n        }\n    }\n});\n\n/**\n * Constructeur (alias)\n */\nAltiProfilRequest.prototype.constructor = AltiProfilRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiProfilRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"sampling\",\n        v : this.sampling\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    return map;\n};\n\nexport default AltiProfilRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requtes du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequest\n * @param {Object} options - options\n * @param {Object}   options.positions - tableau de coordonnes lon/lat\n * @param {String}   options.delimiter - \"|\"\n * @param {Boolean}  options.indent - false|true\n * @param {String}   options.crs - \"CRS:84\"\n * @param {String}   options.format - \"JSON|XML\"\n *\n * @private\n */\nfunction AltiRequest (options) {\n    if (!(this instanceof AltiRequest)) {\n        throw new TypeError(\"AltiRequest constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiRequest ()]\");\n\n    /**\n     * Options en paramtres du constructeur.\n     */\n    this.options = options || {};\n\n    /**\n     * Liste des coordonnes.\n     * @example\n     * var c = [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}];\n     */\n    this.positions = this.options.positions || [];\n\n    /**\n     * Caractre de sparation.\n     * Par defaut, \"|\".\n     */\n    this.delimiter = this.options.delimiter || \"|\";\n\n    /**\n     * Indentation.\n     * true|false\n     */\n    this.indent = this.options.indent || false;\n\n    /**\n     * Projection.\n     * Par defaut, CRS:84.\n     */\n    this.crs = this.options.crs || \"CRS:84\";\n\n    /**\n     * format de sortie.\n     * Par defaut, \"json\".\n     */\n    this.format = this.options.format || \"json\";\n\n    /*\n     * Ressource utilise\n    */\n    this.resource = this.options.resource;\n\n    /**\n     * Rponse dtaille (source & accuracy)\n     * true|false\n    */\n    this.measures = this.options.measures || false;\n}\n\n/**\n * CLASSNAME\n */\nAltiRequest.CLASSNAME = \"AltiRequest\";\n\nAltiRequest.prototype = {\n\n    /**\n     * @lends module:AltiRequest#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequest,\n\n    /**\n     * Ajout d\"une liste de coordonnes.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.setPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    setPositions : function (lstPosition) {\n        var positions = [];\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                positions.push(o);\n            }\n        }\n\n        this.positions = positions;\n    },\n\n    /**\n     * Liste des coordonnes.\n     *\n     * @param {Int} pos - position\n     * @returns {positions}\n     * @example\n     * obj.getPositions ();  // [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}]\n     * obj.getPositions (0); // [{lon : \"\", lat : \"\"}]\n     */\n    getPositions : function (pos) {\n        // FIXME test if not a number !?\n        if (!pos) {\n            return this.positions;\n        }\n\n        var index = this.positions.length - 1;\n        if (pos > index || pos < index) {\n            this.logger.warn(\"index out of range !\");\n            return this.positions;\n        }\n\n        return this.positions[pos];\n    },\n\n    /**\n     * Ajout d\"une liste de coordonnes.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.addPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    addPositions : function (lstPosition) {\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                this.positions.push(lstPosition[i]);\n            }\n        }\n    },\n\n    /**\n     * Retourne la liste des longitudes avec un caractre de sparation.\n     *\n     * @returns {String} - une liste de longitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLon : function () {\n        var lstLon = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLon.push(this.positions[i].lon);\n        }\n        this.logger.trace(lstLon);\n        return lstLon.join(this.delimiter);\n    },\n\n    /**\n     * Retourne la liste des lattitudes avec un caractre de sparation.\n     *\n     * @returns {String} - une liste de lattitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLat : function () {\n        var lstLat = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLat.push(this.positions[i].lat);\n        }\n        this.logger.trace(lstLat);\n        return lstLat.join(this.delimiter);\n    }\n\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiRequest.prototype.getData = function () {\n    var map = [];\n\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    map.push({\n        k : \"delimiter\",\n        v : this.delimiter\n    });\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiRequest;\n","/**\n * Factory pour gnrer une reponse JSON  partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AltiResponseFactory\n * @private\n * @alias Gp.Services.Alti.Response.AltiResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport AltiResponseReader from \"../Formats/AltiResponseReader\";\nimport AltiResponse from \"./model/AltiResponse\";\nimport Elevation from \"./model/Elevation\";\n\nvar AltiResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiResponseFactory\");\n        logger.trace([\"AltiResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                switch (options.outputFormat) {\n                    case \"xml\":\n                        logger.trace(\"analyze response : xml\");\n\n                        try {\n                            var p = new XML({\n                                reader : AltiResponseReader\n                            });\n\n                            if (typeof options.response === \"string\") {\n                                p.setXMLString(options.response);\n                            } else {\n                                p.setXMLDoc(options.response);\n                            }\n\n                            data = p.parse();\n\n                            if (!data) {\n                                throw new Error(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\"));\n                            }\n                        } catch (e) {\n                            var message = e.message;\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        break;\n\n                    case \"json\":\n                        logger.trace(\"analyze response : json\");\n                        logger.trace(\"analyze response : \", typeof options.response);\n\n                        var JSONResponse = null;\n                        if (typeof options.response === \"string\") {\n                            JSONResponse = JSON.parse(options.response);\n                        } else {\n                            JSONResponse = options.response;\n                        }\n\n                        // le service renvoie t il une erreur ?\n                        if (JSONResponse && JSONResponse.error) {\n                            // ex. {\"error\": {\"code\": \"BAD_PARAMETER\",\"description\": \"The values () cannot be parsed as a valid longitude (double value such as -180 < lat < 180).\"}}\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        // analyse de la reponse\n                        if (JSONResponse) {\n                            var elevations = JSONResponse.elevations;\n                            var altiResponse = new AltiResponse();\n                            var elevation;\n                            if (Array.isArray(elevations) && elevations.length) {\n                                for (var i = 0; i < elevations.length; i++) {\n                                    elevation = new Elevation();\n\n                                    if (typeof elevations[i] === \"object\") {\n                                        // elevations[i] est un objet elevation\n                                        if (elevations[i].lon) {\n                                            elevation.lon = elevations[i].lon;\n                                        }\n                                        if (elevations[i].lat) {\n                                            elevation.lat = elevations[i].lat;\n                                        }\n                                        if (elevations[i].z) {\n                                            elevation.z = elevations[i].z;\n                                        }\n                                        if (elevations[i].acc) {\n                                            elevation.acc = elevations[i].acc;\n                                        }\n                                        if (elevations[i].measures) {\n                                            elevation.measures = elevations[i].measures;\n                                        }\n                                    } else if (typeof elevations[i] === \"number\") {\n                                        // elevations[i] est un nombre, dans le cas de zonly=true notamment\n                                        elevation.z = elevations[i];\n                                    }\n\n                                    if (Array.isArray(altiResponse.elevations)) {\n                                        altiResponse.elevations.push(elevation);\n                                    }\n                                }\n                            }\n                            data = altiResponse;\n                        }\n\n                        if (!data) {\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                                type : ErrorService.TYPE_UNKERR,\n                                status : -1\n                            }));\n                            return;\n                        }\n                        break;\n\n                    default:\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_2\"),\n                            type : ErrorService.TYPE_UNKERR,\n                            status : -1\n                        }));\n                        return;\n                }\n\n                // Si la rponse contenait une exception renvoye par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                } else if (data.error) {\n                    var errorMess = data.error.description;\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", errorMess),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AltiResponseFactory;\n","/**\n * Response object for {@link module:Services~getAltitude Gp.Services.getAltitude ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Alti.Elevation>} elevations - Elevations array.\n *\n * @namespace\n * @alias Gp.Services.AltiResponse\n */\nfunction AltiResponse () {\n    if (!(this instanceof AltiResponse)) {\n        throw new TypeError(\"AltiResponse constructor cannot be called as a function.\");\n    }\n\n    this.elevations = [];\n}\n\nAltiResponse.prototype = {\n\n    constructor : AltiResponse\n\n};\n\nexport default AltiResponse;\n","\n/**\n * Single elevation object returned by underlying web service. Contains at least, one elevation (z). May also contain point coordinates and elevation accuracy if \"zonly\" parameter wasn't set to true.\n *\n * @property {Float} lat - Point latitude. (only if zonly=false)\n * @property {Float} lon - Point longitude. (only if zonly=false)\n * @property {Float} z - Point elevation.\n * @property {Float} acc - Accuracy of elevation for this point. (only if zonly=false)\n *\n * @namespace\n * @alias Gp.Services.Alti.Elevation\n */\nfunction Elevation () {\n    if (!(this instanceof Elevation)) {\n        throw new TypeError(\"Elevation constructor cannot be called as a function.\");\n    }\n\n    this.z = null;\n}\n\nElevation.prototype = {\n\n    constructor : Elevation\n\n};\n\nexport default Elevation;\n","\n/**\n * Single measure object returned by underlying web service if measures = true and zonly = false\n *\n * @property {String} source_name - Name of the source\n * @property {String} source_measure - Name of the measure\n * @property {Float} z - Point elevation.\n * @property {Float} acc - Accuracy of elevation for this point. (only if zonly=false)\n *\n * @namespace\n * @alias Gp.Services.Alti.Measure\n */\nfunction Measure () {\n    if (!(this instanceof Measure)) {\n        throw new TypeError(\"Measure constructor cannot be called as a function.\");\n    }\n\n    this.source_name = null;\n    this.source_measure = null;\n    this.z = null;\n    this.acc = null;\n}\n\nMeasure.prototype = {\n\n    constructor : Measure\n\n};\n\nexport default Measure;\n","import CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport AutoCompleteResponseFactory from \"./Response/AutoCompleteResponseFactory\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport MR from \"../../Utils/MessagesResources\";\nimport Helper from \"../../Utils/Helper\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\n\n/**\n * @classdesc\n * Appel du service d'autocompltion du Goportail :\n * envoi de la requte construite selon les paramtres en options,\n * ventuellement parsing et analyse  de la rponse,\n * retour d'une rponse en paramtre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.AutoComplete\n *\n * @param {Object} options - options spcifiques au service (+ les options herites)\n *\n * @param {String} options.text - La chane de caractre  complter.\n *      Cette chane n'est pas \"URL encode\".\n *      C'est l'API qui s'occupe de l'encoder pour l'inclure dans la requte.\n *\n * @param {Array.<String>} [options.type = [\"StreetAddress\"]] - Type de l'objet recherch.\n *      Le service d'autocompltion du Goportail permet de rechercher des toponymes 'PositionOfInterest' et/ou des adresses postales 'StreetAddress'.\n *      D'autres types pourront tre rajouts selon l'volution du service.\n *      Par dfaut, type = ['StreetAddress'].\n *\n * @param {String} [options.territory] - Limitation de la zone de recherche de localisants.\n *      Le service d'autocompltion du Goportail permet de limiter la recherche  la mtropole et la Corse : options.territory = 'METROPOLE',\n *      DOMS TOMS : options.territory = 'DOMTOM', ou  un dpartement : options.territory = '31'\n *      Pas de valeur par dfaut.\n *      La valeur par dfaut est donc celle du service.\n *      Le service d'autocompltion du Goportail renvoie toutes les informations quand aucun territoire n'est spcifi.\n *\n * @param {Number} [options.maximumResponses = 10] - Nombre de rponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par dfaut.\n *      La valeur par dfaut sera donc celle du service : 10.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spcifique au service\n *      text : \"\",\n *      type : \"StreetAddress\",\n *      territory : 'METROPOLE',\n *      maximumResponses : 10\n *   };\n */\nfunction AutoComplete (options_) {\n    if (!(this instanceof AutoComplete)) {\n        throw new TypeError(MR.getMessage(\"CLASS_CONSTRUCTOR\", \"AutoComplete\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"AutoComplete\";\n\n    this.logger = Logger.getLogger(\"Gp.Services.AutoComplete\");\n    this.logger.trace(\"[Constructeur AutoComplete (options)]\");\n\n    var options = this.patchOptionConvertor(options_);\n\n    if (!options.serverUrl) {\n        options.serverUrl = DefaultUrlService.AutoComplete.newUrl();\n    }\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    if (!options.text) {\n        throw new Error(MR.getMessage(\"PARAM_MISSING\", \"text\"));\n    }\n\n    // ajout des options spcifiques au service\n    this.options.text = options.text;\n\n    // on definit des parametres par defaut\n    if (!options.type) {\n        options.type = [\"StreetAddress,PositionOfInterest\"];\n    }\n\n    this.options.type = options.type;\n    this.options.territory = options.terr || \"\";\n    this.options.maximumResponses = options.maximumResponses || 10;\n\n    // INFO\n    // le service ne repond pas en mode POST (405 Method Not Allowed)\n    if (this.options.protocol === \"XHR\" && this.options.httpMethod === \"POST\") {\n        this.logger.warn(\"Le service ne gre pas le mode d'interrogation en POST, on bascule sur du GET !\");\n        this.options.httpMethod = \"GET\"; // on surcharge !\n    }\n\n    // attributs d'instances\n\n    /**\n     * Format forc de la rponse du service : \"json\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"json\";\n}\n\n/**\n * @lends module:AutoComplete#\n */\n\nAutoComplete.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nAutoComplete.prototype.constructor = AutoComplete;\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} options_ - options du service\n * @return {Object} - options\n */\nAutoComplete.prototype.patchOptionConvertor = function (options_) {\n    const options = options_;\n\n    if (options.filterOptions) {\n        this.logger.warn(\"The parameter 'filterOptions' is deprecated\");\n\n        if (options.filterOptions.type) {\n            this.logger.warn(\"The parameter 'filterOptions.type' is deprecated\");\n            if (!options.type) {\n                options.type = options.filterOptions.type;\n            }\n        }\n\n        if (options.filterOptions.territory) {\n            this.logger.warn(\"The parameter 'filterOptions.territory' is deprecated\");\n            if (!options.terr) {\n                options.terr = options.filterOptions.territory;\n            }\n        }\n\n        delete options.filterOptions;\n    }\n\n    return options;\n};\n\n/**\n * (overwrite)\n * Cration de la requte\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAutoComplete.prototype.buildRequest = function (error, success) {\n    // ex.\n    // http://wxs.ign.fr/CLEF/ols/apis/completion?\n    // text=Brie-Comt&\n    // type=StreetAddress,PositionOfInterest&\n    // territory=METROPOLE&\n    // maximumResponses=10\n\n    // traitement des param KPV sous forme de tableau\n    var territory = \"\";\n    if (this.options.territory) {\n        territory = this.options.territory;\n    }\n\n    var type = \"\";\n    if (this.options.type) {\n        type = this.options.type.join(\",\");\n    }\n\n    // normalisation de la requete avec param KPV\n    this.request = Helper.normalyzeParameters({\n        text : encodeURIComponent(this.options.text),\n        type : type,\n        terr : territory,\n        maximumResponses : this.options.maximumResponses\n    });\n\n    (!this.request)\n        ? error.call(this, new ErrorService(MR.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succs de l'analyse de la rponse\n */\nAutoComplete.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onSuccess : success,\n            onError : error,\n            scope : this\n        };\n\n        AutoCompleteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(MR.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default AutoComplete;\n","/**\n * Factory pour gnrer une reponse JSON  partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AutoCompleteResponseFactory\n * @private\n * @alias Gp.Services.AutoComplete.Response.AutoCompleteResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AutoCompleteResponse from \"./model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./model/SuggestedLocation\";\n\nvar AutoCompleteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AutoCompleteResponseFactory\");\n        logger.trace([\"AutoCompleteResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                var JSONResponse = null;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la rponse\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.error) {\n                        // ex. ?\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                            status : JSONResponse.error.code,\n                            type : ErrorService.TYPE_SRVERR\n                        }));\n                        return;\n                    }\n\n                    // cration de l'objet rponse\n                    data = new AutoCompleteResponse();\n\n                    // boucle sur les rsultats de l'autocompltion\n                    if (JSONResponse.results && Array.isArray(JSONResponse.results)) {\n                        var suggestedLocation = null;\n\n                        for (var i = 0; i < JSONResponse.results.length; i++) {\n                            var result = JSONResponse.results[i];\n                            suggestedLocation = new SuggestedLocation();\n\n                            if (result) {\n                                if (result.country === \"StreetAddress\") {\n                                    suggestedLocation.street = result.street;\n                                    suggestedLocation.type = \"StreetAddress\";\n                                } else if (result.country === \"PositionOfInterest\") {\n                                    suggestedLocation.poi = result.street;\n                                    suggestedLocation.type = \"PositionOfInterest\";\n                                    suggestedLocation.poiType = result.poiType;\n                                }\n\n                                if (suggestedLocation.position) {\n                                    suggestedLocation.position.x = result.x;\n                                    suggestedLocation.position.y = result.y;\n                                }\n\n                                suggestedLocation.kind = result.kind;\n                                suggestedLocation.commune = result.city;\n                                suggestedLocation.fullText = result.fulltext;\n                                suggestedLocation.postalCode = result.zipcode;\n                                suggestedLocation.classification = result.classification;\n                            }\n                            // Ajout du rsultat au tableau reverseGeocodedLocations de geocodedLocation\n                            data.suggestedLocations.push(suggestedLocation);\n                        }\n                    } else {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n\n                    if (!data.suggestedLocations.length) {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la rponse contenait une exception renvoye par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la rponse (xmlString) est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien pass, on appelle le callback de succs\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AutoCompleteResponseFactory;\n","/**\n * Response object for {@link module:Services~autoComplete Gp.Services.autoComplete ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.AutoComplete.SuggestedLocation>} suggestedLocations - SuggestedLocations array.\n *\n * @namespace\n * @alias Gp.Services.AutoCompleteResponse\n */\nfunction AutoCompleteResponse () {\n    if (!(this instanceof AutoCompleteResponse)) {\n        throw new TypeError(\"AutoCompleteResponse constructor cannot be called as a function.\");\n    }\n\n    this.suggestedLocations = [];\n}\n\nAutoCompleteResponse.prototype = {\n\n    constructor : AutoCompleteResponse\n\n};\n\nexport default AutoCompleteResponse;\n","\n/**\n * Single SuggestedLocation Object returned by underlying web service.\n * Each suggested location represents a street address (\"StreetAddress\") or a place name (\"PositionOfInterest\").\n *\n * @property {String} type - Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n * @property {Gp.Point} position - Position of the suggested location given in requested coordinates system.\n * @property {String} commune - Suggested municipality\n * @property {String} fullText - Full text representation of the suggested location.\n * @property {String} postalCode - Suggested location postcode\n * @property {Integer} classification - Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n * @property {String} street - Street name of the suggested location (\"StreetAddress\" only).\n * @property {String} kind - Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n *\n * @namespace\n * @alias Gp.Services.AutoComplete.SuggestedLocation\n */\nfunction SuggestedLocation () {\n    if (!(this instanceof SuggestedLocation)) {\n        throw new TypeError(\"SuggestedLocation constructor cannot be called as a function.\");\n    }\n\n    /* REPONSE :\n        {\n           \"status\" : \"OK\",\n           \"results\" : [\n              {\n                 \"country\":\"PositionOfInterest\",\n                 \"x\":-1.559185,\n                 \"y\":47.952603,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"35150\",\n                 \"street\":\"corbe\",\n                 \"kind\":\"Lieu-dit habit\",\n                 \"fulltext\":\"corbe, 35150 Brie\",\n                 \"classification\":6\n              },\n              {\n                 \"country\":\"StreetAddress\",\n                 \"x\":1.538295,\n                 \"y\":43.19646,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"09700\",\n                 \"street\":\"courreste\",\n                 \"kind\":\"\",\n                 \"fulltext\":\"courreste, 09700 Brie\",\n                 \"classification\":7\n              }\n           ]\n        }\n    */\n\n    /* REPONSE EN ERREUR\n        {\n            status : \"ERROR\",\n            results : [ ]\n        }\n    */\n\n    /**\n     * Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n     * @type {String}\n     */\n    this.type = null;\n\n    /**\n     * Position of the suggested location given in requested coordinates system.\n     * @type {Gp.Point}\n     */\n    this.position = {\n        x : null,\n        y : null\n    };\n\n    /**\n     * Suggested municipality\n     * @type {String}\n     */\n    this.commune = null;\n\n    /**\n     * Full text representation of the suggested location.\n     * @type {String}\n     */\n    this.fullText = null;\n\n    /**\n     * Suggested location postcode\n     * @type {Number}\n     */\n    this.postalCode = null;\n\n    /**\n     * Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n     * @type {Integer}\n     */\n    this.classification = null;\n\n    /**\n     * Street name of the suggested location (\"StreetAddress\" only).\n     * @type {String}\n     */\n    this.street = null;\n\n    /**\n     * Place name of the suggested location (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.poi = null;\n\n    /**\n     * Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.kind = null;\n}\n\nSuggestedLocation.prototype = {\n\n    constructor : SuggestedLocation\n};\n\nexport default SuggestedLocation;\n","import Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport _ from \"../Utils/MessagesResources\";\nimport Protocol from \"../Protocols/Protocol\";\nimport ErrorService from \"../Exceptions/ErrorService\";\n// import DefaultUrlService from \"./DefaultUrlService\";\n// package.json (extract version)\nimport Pkg from \"../../package.json\";\n\n/**\n * @classdesc\n * Composant Service\n *\n * @constructor\n * @alias Gp.Services.CommonService\n * @param {Object} options - options communes  tous les services\n *\n * @param {String} [options.serverUrl] - URL d'accs au service. Par dfaut \"https://data.geopf.fr/SERVICE/\".\n *      Permet de forcer l'utilisation d'un service quivalent dploy derrire une ventuelle autre URL d'accs.\n *      Si ce paramtre est renseign alors, le paramtre par dfaut est ignor.\n *\n * @param {String} [options.protocol] - Le protocole  utiliser pour rcuprer les informations du service :\n *      peut valoir 'JSONP' ou 'XHR'.\n *      Par dfaut, c'est le protocole XHR qui sera utilis.\n *      Attention, le protocole JSONP n'est pas valide dans un environnement NodeJS (Utilisation du mode XHR).\n *\n * @param {Boolean} [options.ssl] - Indique si l'on souhaite intrroger les services en https.\n *      Ce paramtre ne fonctionne que pour une utilisation hors navigateur (ex. NodeJS).\n *      Sur un navigateur, le protocole est automatiquement extrait de l'url du site...\n *      Par dfaut, on utilise le protocole http (ssl=false).\n *\n * @param {String} [options.proxyURL] - Le proxy  utiliser pour pallier au problme de cross-domain dans le cas d'une requte XHR.\n *      Utile si le paramtre 'protocol' vaut 'XHR', il ne sera pas pris en compte si protocol vaut JSONP.\n *\n * @param {String} [options.callbackSuffix] - Suffixe de la fonction de callback  utiliser, dans le cas du protocole JSONP.\n *      Par dfaut, la fonction de callback portera un nom du type \"callback\"+ID, o ID est soit un identifiant unique gnr  chaque requte,\n *      soit le paramtre callbackSuffix s'il est spcifi. Par exemple, si callbackSuffix=\"_2\", la fonction sera \"callback_2 ()\".\n *      Utile pour utiliser une rponse dj encapsule dans une fonction de callback, dont le nom est connu\n *      Utile seulement si le paramtre 'protocol' vaut 'JSONP', il ne sera pas pris en compte si protocol vaut 'XHR'.\n *\n * @param {String} [options.httpMethod] - La mthode HTTP\n *       utiliser dans le cas d'une requte XHR : peut valoir 'GET' ou 'POST'.\n *      Non pris en compte si 'protocol' vaut JSONP qui fonctionne obligatoirement en GET.\n *      Par dfaut, c'est la mthode GET qui est utilise.\n *\n * @param {String} [options.contentType] - Content-Type de la requete\n *       utiliser dans le cas d'une requte XHR en mode POST.\n *      Non pris en compte si 'protocol' vaut JSONP et/ou la mthode HTTP vaut GET.\n *      Par dfaut, c'est la mthode GET qui est utilise donc on n'utilise pas de Content-Type.\n *\n * @param {Number} [options.timeOut] - Dlai d'attente maximal (en ms) de la rponse du service ( partir de l'envoi de la requte).\n *      Par dfaut, aucun timeOut n'est pris en compte (timeoutDelay= 0).\n *\n * @param {Boolean} [options.rawResponse] - Indique si l'on souhaite que la rponse du service ne soit pas parse par l'API avant d'tre restitue.\n *      (Cf. paramtre  onSuccess  pour plus de dtails).\n *\n * @param {Function} [options.onSuccess] - Fonction appele lorsque le service rpond correctement  la requte\n *      (code HTTP 200, sans message d'erreur).\n *      Cette fonction prend en paramtre la rponse du service,\n *      soit sous la forme d'un Object Javascript format par le parseur ddi  la syntaxe du service (comportement par dfaut) ;\n *      soit brute au format String non prtrait si le paramtre  rawResponse  a t prcis avec la valeur  true .\n *\n * @param {Function} [options.onFailure] - Fonction appele lorsque le service ne rpond pas correctement\n *      (code HTTP de retour diffrent de 200 ou pas de rponse).\n *\n * @param {Function} [options.onBeforeParse] - Fonction appele avant le parsing de la rponse\n *      Permet de modifier la rponse avant parsing et la fonction doit retourner une String.\n *      Cette fonction prend en paramtre la rponse telle que renvoye par le service\n *      (cad au format json ou xml).\n *      Pour le JSONP, si le paramtre \"rawResponse\" a t prcis avec la valeur \"true\",\n *      la fonction prend en paramtre un Object JavaScript contenant la rponse XML.\n *\n * @example\n *   var options = {\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      ssl : false,\n *      proxyURL : null,\n *      callbackName : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      onBeforeParse : function (rawResponse) {}\n *   };\n */\nfunction CommonService (options) {\n    if (!(this instanceof CommonService)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\"));\n    }\n\n    this.logger = Logger.getLogger(\"CommonService\");\n    this.logger.trace(\"[Constructeur CommonService (options)]\");\n\n    // #####################\n    // rcupration des options par dfaut pour les paramtres optionnels\n    // #####################\n\n    /**\n     * Options du service\n     * @type {Object}\n     */\n    this.options = {\n        // protocol : \"JSONP\",\n        protocol : \"XHR\",\n        ssl : true,\n        proxyURL : \"\",\n        // callbackName : \"\",\n        callbackSuffix : null,\n        httpMethod : \"GET\",\n        timeOut : 0,\n        rawResponse : false,\n        scope : this,\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        onSuccess : function (response) {\n            console.log(\"onSuccess - la reponse est la suivante : \", response);\n        },\n        /**\n        * callback par defaut pour les erreurs\n        * @param {Object} error - error\n        * @private\n        */\n        onFailure : function (error) {\n            if (error.status === 200 || !error.status) {\n                console.log(\"onFailure : \", error.message);\n            } else {\n                console.log(\"onFailure - Erreur (\", error.status, \") : \", error.message);\n            }\n        }\n    };\n\n    // et on ajoute les options en paramtre aux options par dfaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // modification de la fonction de callback onSuccess dans le cas o la rponse brute est demande\n    if (this.options.rawResponse && !this.options.onSuccess) {\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        this.options.onSuccess = function (response) {\n            console.log(\"onSuccess - la rponse brute du service est la suivante : \", response);\n        };\n    }\n\n    // gestion du callback onSuccess\n    var bOnSuccess = !!(this.options.onSuccess !== null && typeof this.options.onSuccess === \"function\");\n    if (!bOnSuccess) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"onSuccess()\"));\n    }\n\n    // gestion de la methode HTTP\n    this.options.httpMethod = (typeof options.httpMethod === \"string\") ? options.httpMethod.toUpperCase() : \"GET\";\n\n    switch (this.options.httpMethod) {\n        case \"POST\":\n        case \"GET\":\n            break;\n        case \"PUT\":\n        case \"DELETE\":\n        case \"HEAD\":\n        case \"OPTIONS\":\n            throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"httpMethod\"));\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"httpMethod\"));\n    }\n\n    // gestion du protocole\n    // this.options.protocol = (typeof options.protocol === \"string\" ) ? options.protocol.toUpperCase() : \"JSONP\";\n    this.options.protocol = (typeof options.protocol === \"string\") ? options.protocol.toUpperCase() : \"XHR\";\n\n    switch (this.options.protocol) {\n        case \"JSONP\":\n        case \"XHR\":\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"protocol\"));\n    }\n\n    // on determine l'environnement d'execution : browser ou non ?\n    // et on lance une exception sur l'utilisation du protocole JSONP pour nodeJS...\n    if (typeof window === \"undefined\" && this.options.protocol === \"JSONP\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT_NODEJS\", \"protocol=JSONP (instead use XHR)\"));\n    }\n\n    // le protocole JSONP ne fonctionne qu'en GET.\n    if (this.options.protocol === \"JSONP\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // gestion du cache\n    this.options.nocache = options.nocache || false;\n\n    // #####################\n    // attributs d'instances\n    // #####################\n\n    /**\n     * Format de rponse du service\n     */\n    this.options.outputFormat = null;\n    /**\n     * Requte envoye au service\n     */\n    this.request = null;\n    /**\n     * Reponse du service\n     */\n    this.response = null;\n}\n\n/**\n * @lends module:CommonService\n */\nCommonService.prototype = {\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : CommonService,\n\n    /**\n     * Appel du service Goportail\n     */\n    call : function () {\n        /* jshint validthis : true */\n        this.logger.trace(\"CommonService::call ()\");\n\n        var context = this;\n        /** fonction d'execution */\n        function run () {\n            this.logger.trace(\"CommonService::run ()\");\n            this.buildRequest.call(context, onError, onBuildRequest);\n        }\n\n        run.call(context);\n\n        // callback de fin de construction de la requte\n        function onBuildRequest (result) {\n            this.logger.trace(\"CommonService::onBuildRequest : \", result);\n            this.callService.call(context, onError, onCallService);\n        }\n\n        // callback de fin d'appel au service\n        function onCallService (result) {\n            this.logger.trace(\"CommonService::onCallService : \", result);\n            this.analyzeResponse.call(context, onError, onAnalyzeResponse);\n        }\n\n        // callback de fin de lecture de la reponse\n        function onAnalyzeResponse (result) {\n            this.logger.trace(\"CommonService::onAnalyzeResponse : \", result);\n            if (result) {\n                this.options.onSuccess.call(this, result);\n            } else {\n                return onError.call(this, new ErrorService(\"Analyse de la reponse en chec !?\"));\n            }\n        }\n\n        // callback de gestion des erreurs : renvoit un objet de type ErrorService\n        function onError (error) {\n            this.logger.trace(\"CommonService::onError()\");\n            // error : l'objet est du type ErrorService ou Error\n            var e = error;\n            if (!(e instanceof ErrorService)) {\n                e = new ErrorService(error.message);\n            }\n            this.options.onFailure.call(this, e);\n        }\n    },\n\n    /**\n     * Cration de la requte\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    buildRequest : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet 'this.request'\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    },\n\n    /**\n     * Appel du service\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    callService : function (error, success) {\n        // INFO\n        // retourne l'objet 'this.response'\n\n        // NOTES\n        //  Pour le mode XHR, on recupre une reponse sous forme d'un json ou xml (#document).\n        //  Pour le mode JSONP, on a toujours un objet JSON mais sous 2 formes :\n        //      - natif\n        //      - XML encapsul :\n        //          {http : {status:200, error:null},xml :'rponse du service'}\n        //          {http : {status:400, error:'reponse du service'},xml :null}\n        //  En XHR, la reponse est directement sauvegarde dans 'this.response'.\n        //  Par contre, en JSONP, on doit analyser la reponse (status ou non vide),\n        //  et ne renvoyer que le contenu (xml ou l'objet)\n\n        // gestion de la proxification du service\n        var strUrlProxified = null;\n        var strData = this.request;\n\n        // a t on mis en place un proxy ?\n        // la proxyfication est valable uniquement en mode XHR !\n        var bUrlProxified = !!(this.options.proxyURL && this.options.protocol === \"XHR\");\n\n        // rajout de l'option gpbibaccess\n        // INFO : acces au numero de version de package.conf aprs compilation !\n        var requestMetaOptions = {\n            \"gp-access-lib\" : Pkg.version\n        };\n\n        if (this.options.apiKey) {\n            requestMetaOptions.apiKey = this.options.apiKey;\n        }\n\n        this.options.serverUrl = Helper.normalyzeUrl(this.options.serverUrl, requestMetaOptions, false);\n\n        // si le proxy est renseign, on proxifie l'url du service\n        if (bUrlProxified) {\n            if (this.options.httpMethod === \"GET\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, this.request, true);\n                strData = null;\n            }\n\n            if (this.options.httpMethod === \"POST\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, null, true);\n                strData = this.request;\n            }\n        }\n\n        // contexte du composant spcifique !\n        var self = this;\n\n        var options = {\n            url : strUrlProxified || this.options.serverUrl,\n            method : this.options.httpMethod,\n            protocol : this.options.protocol,\n            timeOut : this.options.timeOut || 0,\n            format : this.options.outputFormat, // ceci declenche le parsing de la reponse du service, mais on souhaite toujours une reponse brute (string) !\n            nocache : this.options.nocache || false, // ceci permet d'ajouter un timestamp dans la requte\n            wrap : this.options.protocol !== \"XHR\", // ceci declenche l'encapsulation de la reponse XML du service dans du JSON, mais pas en mode XHR !\n            callbackSuffix : this.options.callbackSuffix,\n            // callbackName : this.options.callbackName || null,\n            data : strData,\n            headers : null, // TODO...\n            content : this.options.contentType || \"application/xml\",\n            scope : this.options.scope || this,\n            // callback de reponse\n            onResponse : function (response) {\n                self.logger.trace(\"callService::onResponse()\");\n\n                // le contenu de la reponse  renvoyer !\n                var content = null;\n\n                // XHR : on renvoie toujours la reponse brute du service (json ou xml)\n                // au parser du composant...\n                if (self.options.protocol === \"XHR\") {\n                    self.logger.trace(\"Response XHR\", response);\n                    content = response; // par defaut, la reponse du service  !\n                }\n\n                // JSONP : on pre-analyse la reponse brute du service (encapsuler ou pas)\n                // avant de l'envoyer au parser du composant...\n                if (self.options.protocol === \"JSONP\") {\n                    self.logger.trace(\"Response JSON\", response);\n                    if (response) {\n                        if (response.http) {\n                            // reponse encapsule :\n                            // ex. reponse du service en xml\n                            // > {http : {status:200, error:null},xml :'rponse du service'}\n                            if (response.http.status !== 200) {\n                                error.call(self, new ErrorService({\n                                    status : response.http.status,\n                                    message : response.http.error,\n                                    type : ErrorService.TYPE_SRVERR\n                                }));\n                                return;\n                            } else {\n                                content = response.xml; // par defaut !\n                                if (self.options.rawResponse) {\n                                    content = response;\n                                }\n                            }\n                        } else {\n                            // reponse non encapsule :\n                            // ex. reponse du service en json ou xml\n                            content = response;\n                        }\n                    } else {\n                        error.call(self, new ErrorService(\"Le contenu de la reponse est vide !?\"));\n                        return;\n                    }\n                }\n\n                // si on souhaite parser la reponse du service\n                if (typeof self.options.onBeforeParse === \"function\") {\n                    var newResponse = self.options.onBeforeParse(content);\n                    if (typeof newResponse === \"string\") {\n                        // la reponse parse par l'utilisateur est retourne sous\n                        // forme de string !\n                        content = newResponse;\n                    }\n                }\n                // sauvegarde de la reponse dans l'objet parent (CommonService)\n                self.response = content;\n                // on renvoie la reponse...\n                success.call(self, content);\n            },\n            // callback des erreurs\n            onFailure : function (e) {\n                self.logger.trace(\"callService::onFailure()\");\n                // on est forcement sur une erreur leve par un service !\n                e.type = ErrorService.TYPE_SRVERR;\n                error.call(self, new ErrorService(e));\n            },\n            // callback de timeOut\n            onTimeOut : function () {\n                self.logger.trace(\"callService::onTimeOut()\");\n                error.call(self, new ErrorService(\"TimeOut!\"));\n            }\n        };\n\n        Protocol.send(options);\n    },\n\n    /**\n     * Analyse de la rponse\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    analyzeResponse : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet spcifique au type de composant (json)\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    }\n\n};\n\nexport default CommonService;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport ConfigInterface from \"./ConfigInterface\";\n\n/**\n * @classdesc\n *\n * Recupration de la configuration de cls Goportail sous forme de JSON\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Config\n * @param {Object} options - options spcifiques au service (+ les options herites)\n * @param {Sting} options.apiKey - cl(s) dont on veut obtenir la configuration. Si plusieurs cls, sparer chacune par une virgule\n * @param {Boolean} [options.sync=false] - force le mode synchrone\n * @param {String} options.customConfigFile - chemin vers un fichier de configuration personnalis. Surcharge le paramtre apiKey.\n *\n * @example\n *   var options = {\n *      apiKey : \"cartes,ortho\",\n *      sync : false,\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *   };\n *\n */\nfunction Config (options) {\n    if (!(this instanceof Config)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Config\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"Config\";\n\n    this.logger = Logger.getLogger(\"Gp.Config\");\n    this.logger.trace(\"[Constructeur Config (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // gestion du callback onSuccess\n    var bOnSuccess = !!(options.onSuccess !== null && typeof options.onSuccess === \"function\");\n    if (!bOnSuccess) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"onSuccess()\"));\n    }\n    if (!options.apiKey && !options.customConfigFile) {\n        // si pas de thme spcifi, on rcupre toutes les ressources possibles dans l'objet Config\n        options.apiKey = \"full\";\n    }\n    this.options = {};\n    this.options.onSuccess = options.onSuccess;\n    this.options.onFailure = options.onFailure;\n\n    // mode sync\n    this.options.sync = options.sync || false;\n\n    // gestion d'un tableau d'url des fichiers de configuration\n    this.options.listConfigUrls = (options.customConfigFile)\n        ? [options.customConfigFile]\n        : !Array.isArray(options.apiKey)\n            ? DefaultUrlService.Config.url(options.apiKey.split(\",\"))\n            : DefaultUrlService.Config.url(options.apiKey);\n}\n\n/**\n * @lends module:Config#\n */\nConfig.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nConfig.prototype.constructor = Config;\n\n/**\n * Cration de la requte\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n * @overload\n */\nConfig.prototype.buildRequest = function (error, success) {\n    // liste des urls des fichiers de configuration en JSON\n    this.listConfigUrls = this.options.listConfigUrls;\n\n    if (!this.listConfigUrls) {\n        error.call(this, new Error(\"url by default not found !\"));\n        return;\n    }\n\n    // INFO :\n    // il n'y a pas de construction de requte,\n    // on passe directement  l'appel des requtes\n    success.call(this, this.listConfigUrls);\n};\n\n/**\n * Rcupration des configuration\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n * @overload\n */\nConfig.prototype.callService = function (error, success) {\n    if (this.options.sync) {\n        __callServiceSync.call(this, error, success);\n    } else {\n        __callService.call(this, error, success);\n    }\n};\n\n/**\n * Requtes en mode asynchrone\n *\n * @param {*} error\n * @param {*} success\n * @private\n */\nvar __callService = function (error, success) {\n    // liste des resultats au format JSON\n    this.listConfigResults = [];\n\n    // test on env. nodejs or browser\n    let Fetch = null;\n    if (typeof window === \"undefined\") {\n        var nodefetch = require(\"node-fetch\");\n        Fetch = nodefetch;\n    } else {\n        Fetch = window.fetch;\n    }\n\n    // the factory of fetch !\n    var fetchFactory = (url) => {\n        return Fetch(url, { credentials : \"same-origin\" })\n            .then((response) => {\n                if (response.ok) {\n                    return response.json()\n                        .then((json) => {\n                            // TODO :\n                            // tester le contenu !\n                            return json;\n                        })\n                        .catch((error) => {\n                            throw new Error(\"Exception Json : \" + error);\n                        });\n                } else {\n                    throw new Error(\"Exception HTTP : \" + response.status + \" (status code) !\");\n                }\n            })\n            .catch((error) => {\n                return new Promise((resolve, reject) => {\n                    // eslint-disable-line no-unused-vars\n                    reject(error);\n                });\n            });\n    };\n\n    // construction des promises fetch\n    var promises = [];\n    for (let index = 0; index < this.listConfigUrls.length; index++) {\n        const url = this.listConfigUrls[index];\n        promises.push(fetchFactory(url));\n    }\n\n    Promise.all(promises)\n        .then((results) => {\n            if (!results) {\n                throw new Error(\"results config empty !?\");\n            }\n            results.forEach((result) => {\n                // TODO :\n                // verification des resultats\n                this.listConfigResults.push(result);\n            });\n        })\n        .then(() => {\n            success.call(this, this.listConfigResults);\n        })\n        .catch((e) => {\n            // TODO :\n            // construction d'un message\n            error.call(this, e);\n        });\n};\n\n/**\n * Requtes en mode synchrone\n *\n * @param {*} error\n * @param {*} success\n * @private\n */\nvar __callServiceSync = function (error, success) {\n    // liste des resultats au format JSON\n    this.listConfigResults = [];\n\n    // FIXME :\n    // boucle synchrone !\n    for (var i = 0; i < this.listConfigUrls.length; i++) {\n        const url = this.listConfigUrls[i];\n        // TODO :\n        // prvoir le CORS, headers, ...\n        const request = new XMLHttpRequest();\n        request.open(\"GET\", url, false);\n        request.send(null);\n        if (request.status === 200) {\n            // TODO :\n            // tester la reponse !\n            var response = JSON.parse(request.responseText);\n            this.listConfigResults.push(response);\n        }\n    }\n    // callback\n    if (this.listConfigResults.length !== 0) {\n        success.call(this, this.listConfigResults);\n    } else {\n        error.call(this, new Error(\"...\"));\n    }\n};\n\n/**\n * Analyse et mise en forme de la rponse en fusionnant les configurations\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n * @overload\n */\nConfig.prototype.analyzeResponse = function (error, success) {\n    // fonction de merge des objects JSON\n    var mergeConfig = function (objects) {\n        // objet fusion des couches\n        var allLayersConfig = {};\n        // objet fusion des cls\n        var allKeysConfig = {};\n        // objet fusion des TMS\n        var allTMSConfig = {};\n\n        // on fusionne les rsultat\n        for (var i = 0; i < objects.length; i++) {\n            if (!objects[i].generalOptions || !objects[i].layers) {\n                return;\n            }\n            allKeysConfig = {\n                ...allKeysConfig,\n                ...objects[i].generalOptions.apiKeys\n            };\n            allLayersConfig = {\n                ...allLayersConfig,\n                ...objects[i].layers\n            };\n            allTMSConfig = {\n                ...allTMSConfig,\n                ...objects[i].tileMatrixSets\n            };\n        }\n\n        var mergedConfig = {\n            generalOptions : {\n                apiKeys : allKeysConfig\n            },\n            layers : allLayersConfig,\n            tileMatrixSets : allTMSConfig\n        };\n        return mergedConfig;\n    };\n\n    // fusion des configurations JSON\n    var ConfigJSON = mergeConfig(this.listConfigResults);\n    if (!ConfigJSON) {\n        error.call(this, new Error(\"configuration structure not conforme !\"));\n        return;\n    }\n\n    // creation des interfaces\n    var IConfig = new ConfigInterface();\n    // ajout des interfaces avec la configuration JSON\n    Object.assign(IConfig, ConfigJSON);\n\n    // dfinition de la variable globale Gp.Config\n    var scope = typeof window !== \"undefined\" ? window : {};\n    if (!scope.Gp) {\n        scope.Gp = {};\n    }\n\n    // enregistrement\n    if (scope.Gp.Config) {\n        Object.assign(scope.Gp.Config, IConfig);\n        // dans le doute..., ceinture et bretelles !\n        for (var property in IConfig) {\n            scope.Gp.Config[property] = IConfig[property];\n        }\n    } else {\n        scope.Gp.Config = IConfig;\n    }\n\n    // INFO :\n    // il n'y a pas d'analyse des rsultats,\n    // on passe directement  l'appel de la callback utilisateur\n    success.call(this, scope.Gp.Config);\n};\n\nexport default Config;\n","\n/**\n * Response object for {@link module:Services~getConfig Gp.Services.getConfig ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Object} generalOptions - General properties for default map configuration resources.\n * @property {Object} generalOptions.apiKeys - Object that associates apiKey (s) with an array of resources IDs availables with that key.\n * @property {String} generalOptions.title - Underlying web service Title.\n * @property {String} generalOptions.defaultGMLGFIStyle - XSL URL used by default to translate an XML GetFeatureInfo response into an HTML array.\n * @property {String} generalOptions.theme - default theme (FIXME : for what ?)\n * @property {Array.<Float>} generalOptions.wgs84Resolutions - geographical resolutions Array for each [zoom level of the Geoportal platform]{@link http://api.ign.fr/tech-docs-js/webmaster/layers.html#Geoportal_resolutions} from 0 to 21. Expressed in degrees/pixel.\n * @property {Object} layers - Associative array mapping resources availables IDs (keys) with their properties (values given as {@link Gp.Services.Config.Layer}).\n * @property {Object} tileMatrixSets - Associative Array mapping TileMatrixSets IDs (keys) availables with their properties (values given as {@link Gp.Services.Config.TileMatrixSet}).\n *\n * @namespace\n * @alias Gp.Services.GetConfigInterface\n */\nfunction ConfigInterface () {\n    if (!(this instanceof ConfigInterface)) {\n        throw new TypeError(\"ConfigInterface constructor cannot be called as a function.\");\n    }\n\n    this.generalOptions = {\n        apiKeys : {},\n        title : null,\n        defaultGMLGFIStyle : null,\n        theme : null,\n        wgs84Resolutions : []\n    };\n\n    this.layers = {};\n\n    this.tileMatrixSets = {};\n}\n\nConfigInterface.prototype = {\n\n    /*\n     * Constructor (alias)\n     */\n    constructor : ConfigInterface,\n\n    /**\n     * Check if config is loaded for a given key\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Boolean} isKeyConfLoaded - true if config of the key is already loaded, false otherwise\n     */\n    isKeyConfLoaded : function (apiKey) {\n        if (!apiKey) {\n            return;\n        }\n        if (this.generalOptions.apiKeys[apiKey]) {\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Returns an array of Geoportal layers identifiers, corresponding to an API contract key.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Array} apiKeys - Array of geoportal layers identifiers\n     */\n    getLayersId : function (apiKey) {\n        return this.generalOptions.apiKeys[apiKey];\n    },\n\n    /**\n     * Returns the id of a Geoportal layer with its name and its service.\n     *\n     * @param {String} layerName - name of the layer (ex. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {String} service   - name of the service (ex. \"WMS\" ou \"WMTS\")\n     * @returns {String} Id of the layer (ex. \"ORTHOIMAGERY.ORTHOPHOTOS$GEOPORTAIL:OGC:WMTS\")\n     */\n    getLayerId : function (layerName, service) {\n        if (!layerName || !service) {\n            return;\n        }\n        var layerId = null;\n\n        // layer\n        // key : [layerName]$[contexte]:OGC:[service]\n        // ex : \"ORTHOIMAGERY.ORTHOPHOTOS$GEOPORTAIL:OGC:WMTS\"\n\n        // service\n        // key : [layerName]$[contexte];[service]\n        // ex : PositionOfInterest$OGC:OPENLS;ReverseGeocode\n\n        if (this.layers) {\n            var layers = this.layers;\n            for (var key in layers) {\n                if (layers.hasOwnProperty(key)) {\n                    var parts = key.split(\"$\");\n                    if (layerName === parts[0]) {\n                        if (parts[1]) {\n                            var servicePartsLayer = parts[1].split(\":\");\n                            var servicePartsService = parts[1].split(\";\");\n\n                            if (servicePartsService[1] === service.toUpperCase()) {\n                                layerId = key;\n                                break;\n                            }\n                            if (servicePartsLayer[2] === service.toUpperCase()) {\n                                layerId = key;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!layerId) {\n            return;\n        }\n        return layerId;\n    },\n\n    /**\n     * Returns an associative array of Geoportal layers configurations, corresponding to an API contract key.\n     * If no key is specified, all layers from configuration are returned.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Object} layers - Object which properties are layers identifiers.\n     */\n    getLayersConf : function (apiKey) {\n        var layers = {};\n        var layersIdArray = this.getLayersId(apiKey);\n        if (layersIdArray) {\n            for (var i = 0; i < layersIdArray.length; i++) {\n                var lyrId = layersIdArray[i];\n                layers[lyrId] = this.layers[lyrId];\n            }\n        }\n        return layers;\n    },\n\n    /**\n     * Returns a geoportal layer configuration, given its identifier\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @return {Object} layer - Layer configuration\n     */\n    getLayerConf : function (layerId) {\n        if (!this.layers) {\n            return;\n        }\n        return this.layers[layerId];\n    },\n\n    /**\n     * Get all parameters needed to display a WMS or WMTS layer given its name, its service and its key\n     *\n     * @param {String} layerName - name of the layer (ex. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {String} service   - name of the service (ex. \"WMS\" ou \"WMTS\")\n     * @param {String} [apiKey]  - Contract API key\n     * @returns {Object} params  - params of the service (WMS or WMTS) for the given layer\n     * @returns {String} params.url        - Url of the service to reach to display the layer\n     * @returns {String} params.version    - Version of the service\n     * @returns {String} params.styles     - Default style of the layer\n     * @returns {String} params.format     - Default format of the layer\n     * @returns {String} params.projection - Default projection of the layer\n     * @returns {Number} params.minScale   - Min scale denominator of the layer\n     * @returns {Number} params.maxScale   - Max scale denominator of the layer\n     * @returns {Gp.BBox} params.extent    - Extent of the layer, in the projection of the layer\n     * @returns {Array} params.legends     - Array of legends associated to the layer\n     * @returns {Array} params.title       - Name of the layer, readable by a human\n     * @returns {Array} params.description - Description of the layer\n     * @returns {String} params.[TMSLink]          - Id of the Tile Matrix Set (TMS), in the case of WMTS layer\n     * @returns {Gp.Point} params.[matrixOrigin]   - Originof the tile matrix (top left corner), in the case of WMTS layer\n     * @returns {Array} params.[nativeResolutions] - Array with the resolution of each level of the tile matrix set, in the case of WMTS layer\n     * @returns {Array} params.[matrixIds]         - Array with the ID of each level of the tile matrix set, in the case of WMTS layer\n     */\n    getLayerParams : function (layerName, service) {\n        var params = {};\n\n        if ((service === \"WMS\" || Object.keys(this.tileMatrixSets).length !== 0) && Object.keys(this.layers).length !== 0) {\n            // get the layerId of the layer\n            var layerId = this.getLayerId(layerName, service);\n\n            if (layerId) {\n                // get the layer Conf Object\n                var layerConf = this.getLayerConf(layerId);\n\n                var keys = this.getLayerKey(layerId);\n                if (keys.length === 0) {\n                    return;\n                }\n\n                // get services params\n                for (var i = 0; i < keys.length; i++) {\n                    // only one serverUrl is saved in Gp.Config : with multiKeys, we have to retrieve the key used in the serverUrl property\n                    if (layerConf.serviceParams.serverUrl[keys[i]]) {\n                        params.url = layerConf.serviceParams.serverUrl[keys[i]];\n                    }\n                }\n\n                const wmsTypeRegex = /\\/v\\//;\n                // WMS vector style always empty (not in getCap)\n                if (wmsTypeRegex.test(params.url)) {\n                    params.styles = \" \";\n                } else {\n                    // WMS raster style is defined in getCap\n                    params.styles = layerConf.styles[0].name;\n                }\n\n                params.version = layerConf.serviceParams.version;\n                params.format = layerConf.formats[0].name;\n                params.projection = layerConf.defaultProjection;\n\n                // get layer info and constraints\n                params.minScale = layerConf.globalConstraint.minScaleDenominator;\n                params.maxScale = layerConf.globalConstraint.maxScaleDenominator;\n                params.extent = layerConf.globalConstraint.bbox;\n                params.legends = layerConf.legends;\n                params.title = layerConf.title;\n                params.description = layerConf.description;\n\n                if (service === \"WMS\") {\n                    params.metadata = layerConf.metadata;\n                }\n\n                // Informations  non disponibles avec les getCap\n                // params.metadata = layerConf.getMetadata();\n                // params.originators = layerConf.getOriginators();\n                // params.quicklookUrl = layerConf.getQuicklookUrl();\n\n                // WMTS : get the tileMatrixSetLimits\n                if (layerConf.wmtsOptions) {\n                    params.tileMatrixSetLimits = layerConf.wmtsOptions.tileMatrixSetLimits;\n                    var TMSLink = layerConf.wmtsOptions.tileMatrixSetLink;\n                    if (TMSLink) {\n                        params.TMSLink = TMSLink;\n                        var tmsConf = this.getTMSConf(TMSLink);\n                        // Get matrix origin : Gp.Point = Object{x:Float, y:Float}\n                        // params.matrixOrigin = tmsConf.getTopLeftCorner();\n                        params.matrixIds = Object.keys(tmsConf.tileMatrices);\n                        params.tileMatrices = tmsConf.tileMatrices;\n                        // by default, pseudo mercator resolutions\n                        params.nativeResolutions = tmsConf.nativeResolutions || this.getTMSConf(\"PM\").nativeResolutions;\n                    }\n                }\n            }\n        }\n        return params;\n    },\n\n    /**\n     * Get the contract key(s) associated to a given layer.\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @return {Array} layerKey - array of key(s) associated to the given layer\n     */\n    getLayerKey : function (layerId) {\n        var layerKey = [];\n        if (this.generalOptions && this.generalOptions.apiKeys && Object.keys(this.generalOptions.apiKeys).length !== 0) {\n            var resourcesByKey = this.generalOptions.apiKeys;\n            for (var key in resourcesByKey) {\n                var resourcesArray = resourcesByKey[key];\n                resourcesArray.forEach(function (arrayLayerId) {\n                    if (arrayLayerId === layerId) {\n                        layerKey.push(key);\n                    }\n                });\n            }\n        }\n        return layerKey;\n    },\n\n    /**\n     * Returns an associative array of Tile Matrix Sets configurations.\n     *\n     * @return {Object} tileMatrixSets - Object which properties are TMS identifiers\n     *\n     */\n    getTileMatrixSets : function () {\n        return this.tileMatrixSets;\n    },\n\n    /**\n     * Returns a Tile Matrix Sets configuration, given its identifier.\n     *\n     * @param {String} tmsID - Tile Matrix Set identifier (e.g. : \"PM\")\n     * @return {Object} tileMatrixSet - Tile Matrix Set configuration\n     */\n    getTMSConf : function (tmsID) {\n        if (!this.tileMatrixSets) {\n            return;\n        }\n        return this.tileMatrixSets[tmsID];\n    },\n\n    /**\n     * Get global constraints for a given Layer : extent, minScale, maxScale, projection\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @returns {Object} params - layer constraints\n     * @returns {String} params.projection - default layer projection\n     * @returns {Number} params.minScale   - layer min scale denominator\n     * @returns {Number} params.maxScale   - layer max scale denominator\n     * @returns {Gp.BBox} params.extent    - layer extent expressed in the layer projection\n     */\n    getGlobalConstraints : function (layerId) {\n        var params = {};\n\n        if (layerId) {\n            // get layer configuration object\n            var layerConf = this.getLayerConf(layerId);\n            params.projection = layerConf.defaultProjection;\n            params.minScale = layerConf.globalConstraint.minScaleDenominator;\n            params.maxScale = layerConf.globalConstraint.maxScaleDenominator;\n            params.extent = layerConf.globalConstraint.bbox;\n        }\n\n        return params;\n    }\n\n};\n\nexport default ConfigInterface;\n","// cette classe contient les URLs par defaut des services.\n//  DefaultUrlService.Alti.url(key)[elevation-json]\n//  DefaultUrlService.Alti.url(key)[elevation-xml]\n//  DefaultUrlService.Alti.url(key)[profil-json]\n//  DefaultUrlService.Alti.url(key)[profil-xml]\n//  DefaultUrlService.ProcessIsoCurve.url(key)\n//  DefaultUrlService.AutoComplete.url(key)\n//  DefaultUrlService.ReverseGeocode.url(key)\n//  DefaultUrlService.Geocode.url(key)\n//  DefaultUrlService.Route.url(key)\n\n// Example :\n//\n// DefaultUrlService.Alti.url('alti')[elevation-json]\n//  output {String} -> http://wxs.ign.fr/calcul/alti/rest/elevation.json\n//\n// DefaultUrlService.Alti.url('calcul')\n// output {Object|String}\n// -> http://wxs.ign.fr/calcul/alti/rest/elevation.json\n// -> http://wxs.ign.fr/calcul/alti/rest/elevation.xml\n// -> http://wxs.ign.fr/calcul/alti/rest/elevationLine.json\n// -> http://wxs.ign.fr/calcul/alti/rest/elevationLine.xml\n//\n// ssl by default.\n//\n// Force to not do ssl :\n// DefaultUrlService.ssl = false;\n//\n// DefaultUrlService.AutoComplete.url('calcul')\n// output {Object|String}\n// -> https://wxs.ign.fr/calcul/ols/apis/completion\n\n/**\n * Default Geoportal web services URLs access.\n *\n * @namespace\n * @alias Gp.Services.DefaultUrl\n */\nvar DefaultUrlService = {\n\n    /** if set true, require the use of https protocol */\n    ssl : true,\n\n    /**\n    * base new-url of geoplateforme services (ssl protocol management)\n    * @param {String} path - path\n    * @returns {String} url\n    */\n    newUrl : function (path) {\n        var NEW_GPF_HOSTNAME = \"data.geopf.fr\";\n\n        // comportement par dfaut => https\n        // sinon, il est fix par l'option 'ssl' (false => http)\n        var _protocol;\n        if (DefaultUrlService.ssl === false) {\n            _protocol = \"http://\";\n        } else {\n            _protocol = \"https://\";\n        }\n\n        return _protocol + NEW_GPF_HOSTNAME + path;\n    },\n\n    /**\n     * Elevation web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns elevation service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"elevation-json\", \"elevation-xml\", \"profil-json\" or \"profil-xml\").\n     */\n    Alti : {\n        new_key : {\n            // rest\n            \"elevation-json\" : \"/altimetrie/1.0/calcul/alti/rest/elevation.json\",\n            \"elevation-xml\" : \"/altimetrie/1.0/calcul/alti/rest/elevation.xml\",\n            \"profil-json\" : \"/altimetrie/1.0/calcul/alti/rest/elevationLine.json\",\n            \"profil-xml\" : \"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml\"\n        },\n\n        /**\n        * newurl from geoplateforme service\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return {\n                // rest\n                \"elevation-json\" : DefaultUrlService.newUrl(this.new_key[\"elevation-json\"]),\n                \"elevation-xml\" : DefaultUrlService.newUrl(this.new_key[\"elevation-xml\"]),\n                \"profil-json\" : DefaultUrlService.newUrl(this.new_key[\"profil-json\"]),\n                \"profil-xml\" : DefaultUrlService.newUrl(this.new_key[\"profil-xml\"])\n            };\n        }\n    },\n    /**\n     * IsoCurve web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns isocurve service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"iso-json\" or \"iso-xml\").\n     */\n    ProcessIsoCurve : {\n\n        new_key : \"/navigation/isochrone\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Config web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns config service default urls with or without geoportal access key given as a parameter.\n     */\n    Config : {\n        _key : \"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            // key must be an array of one or several keys\n            if (!Array.isArray(key)) {\n                key = key.split(\",\");\n            }\n            // not homogeneous with others geoportal services URLs\n            var url = [];\n            for (var i = 0; i < key.length; i++) {\n                url[i] = this._key + key[i] + \"Config.json\";\n            }\n            return url;\n        }\n    },\n    /**\n     * Autocompletion web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns autocomplete service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    AutoComplete : {\n        new_key : \"/geocodage/completion\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Reverse geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns reverse geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    ReverseGeocode : {\n        new_key : \"/geocodage/reverse\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    Geocode : {\n        new_key : \"/geocodage/search\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Routing web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns routing service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols.\n     */\n    Route : {\n        new_key : \"/navigation/itineraire\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    }\n};\n\nexport default DefaultUrlService;\n","// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MR from \"../../../Utils/MessagesResources\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport GeocodeResponse from \"../Response/model/GeocodeResponse\";\nimport GeocodedLocation from \"../Response/model/GeocodedLocation\";\n\n/**\n * Fonction retournant un objet contenant des cls de lecture (readers)\n *      qui permettent de parser des rponses XML du service de gocodage direct du Goportail\n *      afin de rcuprer les rsultats retourns.\n * @module GeocodeResponseParser\n * @alias Gp.Services.Geocode.Formats.GeocodeResponseParser\n * @private\n */\n\n/**\n * @classdesc\n *\n * Classe permettant de parser une rponse GeoJSON\n *\n * @constructor\n * @alias Gp.Formats.GeocodeResponseParser\n *\n * @private\n */\nfunction GeocodeResponseParser () {\n    if (!(this instanceof GeocodeResponseParser)) {\n        throw new TypeError(\"GeocodeResponseParser constructor cannot be called as a function.\");\n    }\n}\n\nGeocodeResponseParser.prototype = {\n\n    /**\n     * @lends module:GeocodeResponseParser\n     */\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : GeocodeResponseParser,\n\n    /**\n     * Mthode permettant de lancer la lecture d'une rponse GeoJSON,\n     *\n     * @param {String} json - rponse au format GeoJSON\n     * @return {Object} geocodeResponse|exceptionReport : l'objet contenant les informations de la rponse GeoJSON,\n     *      sous la forme d'un objet GeocodeResponse, ou un objet littral exceptionReport si le service a renvoy une exception.\n     */\n    parse : function (json) {\n        var geocodeResponse = new GeocodeResponse();\n\n        const obj = JSON.parse(json);\n\n        if (obj.type === \"FeatureCollection\") {\n            for (var i = 0; i < obj.features.length; ++i) {\n                _parseFeature(obj.features[i], geocodeResponse);\n            }\n        } else if (obj.type === \"Feature\") {\n            _parseFeature(obj, geocodeResponse);\n        } else if (obj.type === \"SERVICE_ERROR\") {\n            return _parseError(obj);\n        } else {\n            var mess = MR.getMessage(\"SERVICE_RESPONSE_ANALYSE\", obj.type);\n            throw new ErrSrv({\n                message : mess,\n                type : ErrSrv.TYPE_UNKERR,\n                status : 200\n            });\n        }\n\n        return geocodeResponse;\n    }\n};\n\n/**\n * Mthode permettant de parser un feature\n *\n * @private\n *\n * @param {Object} feature\n * @param {Object} geocodeResponse\n *\n * @memberof GeocodeResponseParser\n * @return {Object} objet GeocodedLocation\n */\nfunction _parseFeature (feature, geocodeResponse) {\n    var location = new GeocodedLocation();\n    if (feature.geometry && feature.geometry.type === \"Point\") {\n        location.position = {\n            lon : feature.geometry.coordinates[0],\n            lat : feature.geometry.coordinates[1]\n        };\n    }\n    if (feature.properties) {\n        for (var prop in feature.properties) {\n            if (prop === \"score\") {\n                location.accuracy = feature.properties[prop];\n            } else if (prop === \"_type\") {\n                if (feature.properties[prop] === \"address\") {\n                    location.type = \"StreetAddress\";\n                } else if (feature.properties[prop] === \"poi\") {\n                    location.type = \"PositionOfInterest\";\n                } else if (feature.properties[prop] === \"parcel\" || feature.properties[prop] === \"cadastral\") {\n                    location.type = \"CadastralParcel\";\n                }\n            } else {\n                location.placeAttributes[prop] = feature.properties[prop];\n            }\n        }\n        if (feature.properties._type === \"address\") {\n            location.matchType = feature.properties.number !== undefined && feature.properties.number !== null ? \"street number\" : \"street\";\n        }\n    }\n    geocodeResponse.locations.push(location);\n}\n\n/**\n * Mthode permettant de parser une erreur\n *\n * @private\n *\n * @param {Object} error\n *\n * @memberof GeocodeResponseParser\n * @return {Object}\n */\nfunction _parseError (error) {\n    return {\n        exceptionReport : error\n    };\n}\n\nexport default GeocodeResponseParser;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport GeocodeRequestFactory from \"./Request/GeocodeRequestFactory\";\nimport GeocodeResponseFactory from \"./Response/GeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de gocodage direct du Goportail :\n *     envoi de la requte construite selon les paramtres en options,\n *     ventuellement parsing et analyse  de la rponse,\n *     retour d'une rponse en paramtre de la fonction onSuccess.\n *\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Geocode\n *\n * @param {Object} options - options spcifiques au service (+ les options herites)\n *\n * @param {String|Object} options.query - Nom de l'adresse, du toponyme, de l'unit administrative ou de la parcelle cadastrale recherche.\n *\n * @param {Object} [options.filters] - Les proprits possibles de cet objet sont dcrites ci-aprs.\n * @param {String} [options.filters.[prop]] - Critre supplmentaire pour filtrer la recherche sous la forme\n *      d'un couple cl/valeur  dfinir selon les possibilits du serveur ajout  la requte.\n *      Le service de gocodage du Goportail permet de filtrer les adresses postales avec les proprits :\n *          \"postalCode\", \"inseeCode\", \"city\".\n *      Il permet galement de filtrer les toponymes avec les proprits :\n *          \"postalCode\", \"inseeCode\", \"type\".\n *      Enfin, il permet de filtrer les parcelles cadastrales avec les proprits :\n *          \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n *\n * @param {String} [options.index = \"StreetAddress\"] - Type de l'objet recherch.\n *      Le service de gocodage du Goportail permet de rechercher des 'PositionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales ou des 'CadastralParcel' pour des parcelles cadastrales.\n *      L'index 'location' regroupe les indexes 'StreetAddress' et 'PositionOfInterest'.\n *      D'autres types pourront tre rajouts selon l'volution du service.\n *      Par dfaut, index = 'StreetAddress'.\n *\n * @param {Object} options.position - Position du point de rfrence pour le calcul de proximit exprime dans le systme de rfrence spcifi par le srs.\n *      @param {Float} options.position.lon - Longitude du point de rfrence pour le calcul de proximit.\n *      @param {Float} options.position.lat - Latitude du point de rfrence pour le calcul de proximit.\n *\n * @param {Number} [options.maximumResponses] - Nombre de rponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par dfaut.\n *      Si le serveur consult est celui du Goportail, la valeur par dfaut sera donc celle du service : 20.\n *\n * @param {Boolean} [options.returnTrueGeometry = false] - Boolen indiquant si l'on souhaite rcuprer la gomtrie vraie des objects golocaliss.\n *      false par dfaut.\n *\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      proxyURL : null,\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spcifique au service\n *      position : {lon:, lat:},\n *      index : 'StreetAddress',\n *      query : '10 rue du pont Machin-ville'\n *      (...)\n *   };\n */\nfunction Geocode (options_) {\n    if (!(this instanceof Geocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Geocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Geocode\";\n\n    this.logger = Logger.getLogger(\"Gp.Services.Geocode\");\n    this.logger.trace(\"[Constructeur Geocode (options)]\");\n\n    var options = this.patchOptionConvertor(options_);\n    if (!options.serverUrl) {\n        options.serverUrl = DefaultUrlService.Geocode.newUrl();\n    }\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, [options]);\n\n    if (!options.hasOwnProperty(\"query\")) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"query\"));\n    }\n\n    // ajout des options spcifiques au service\n    this.options.query = options.query;\n\n    // on definit l'index par defaut\n    if (!options.index) {\n        this.options.index = options.index = \"StreetAddress\";\n    }\n\n    if (options.filters) {\n        var filter = Object.keys(options.filters);\n        for (var i = 0; i < filter.length; i++) {\n            var key = filter[i];\n            // on supprime les filtres vides\n            if (typeof options.filters[key] === \"undefined\" ||\n                (typeof options.filters[key] === \"object\" && Object.keys(options.filters[key]).length === 0) ||\n                (typeof options.filters[key] === \"string\" && options.filters[key].length === 0) ||\n                (Array.isArray(options.filters[key]) && options.filters[key].length === 0)\n            ) {\n                delete this.options.filters[key];\n            }\n        }\n    }\n\n    this.options.index = options.index || \"StreetAddress\";\n    this.options.maximumResponses = options.maximumResponses || 20;\n}\n\n/**\n * @lends module:Geocode#\n */\nGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nGeocode.prototype.constructor = Geocode;\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} options_ - options du service\n * @return {Object} - options\n */\nGeocode.prototype.patchOptionConvertor = function (options_) {\n    const options = options_;\n\n    if (options.hasOwnProperty(\"location\")) {\n        this.logger.warn(\"The parameter 'location' is deprecated\");\n\n        if (!options.query) {\n            options.query = options.location;\n        }\n        delete options.location;\n    }\n\n    if (options.filterOptions) {\n        this.logger.warn(\"The parameter 'filterOptions' is deprecated\");\n\n        if (!options.filters) {\n            options.filters = options.filterOptions;\n\n            if (options.filters.type) {\n                this.logger.warn(\"The parameter 'filterOptions.type' is deprecated\");\n                if (!options.index) {\n                    if (Array.isArray(options.filters.type) && options.filters.type.length > 0) {\n                        options.index = options.filters.type[0];\n                    } else {\n                        options.index = options.filters.type;\n                    }\n                }\n                delete options.filters.type;\n            }\n\n            if (options.filters.bbox) {\n                this.logger.warn(\"The parameter 'filterOptions.bbox' is deprecated\");\n                delete options.filters.bbox;\n            }\n        }\n        delete options.filterOptions;\n    }\n\n    if (options.position) {\n        if (options.position.x) {\n            this.logger.warn(\"The parameter 'position.x' is deprecated\");\n\n            if (!options.position.lon) {\n                options.position.lon = options.position.x;\n            }\n            delete options.position.x;\n        }\n\n        if (options.position.y) {\n            this.logger.warn(\"The parameter 'position.y' is deprecated\");\n\n            if (!options.position.lat) {\n                options.position.lat = options.position.y;\n            }\n            delete options.position.y;\n        }\n    }\n\n    if (options.returnFreeForm) {\n        this.logger.warn(\"The parameter 'returnFreeForm' is deprecated\");\n        delete options.returnFreeForm;\n    }\n\n    if (options.srs) {\n        this.logger.warn(\"The parameter 'srs' is deprecated\");\n        delete options.srs;\n    }\n\n    return options;\n};\n\n/**\n * Cration de la requte (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        geocodeMethod : \"search\",\n        query : this.options.query,\n        index : this.options.index,\n        returnTrueGeometry : this.options.returnTrueGeometry,\n        position : this.options.position,\n        maxResp : this.options.maximumResponses,\n        filters : this.options.filters\n    };\n\n    this.request = GeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien t construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.analyzeResponse = function (error, success) {\n    /* INFO :\n         Etape 1 : Cration de la requte (URL)\n            -> stockage de la requte dans this.request\n         Etape 2 : Envoi de la requte\n            -> appel du protocol XHR, et envoi (par ex send ())\n            -> rcupration de la rponse JSON dans la fonction onSuccess () (this.response)\n            -> si code HTTP 200 et pas de message d'erreur : etape 3\n            -> si code HTTP != 200 : lancement de la fonction de callback onFailure avec le message d'erreur\n         Etape 3 : Analyse de la rponse JSON (si rawResponse === false )\n            -> appel du parser pour rcuprer le document\n         Etape 4 : Lancement de la fonction de callback onSuccess avec la rponse :\n            -> JSON (si rawResponse === true)\n            -> ou geocodedLocations\n    */\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        GeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Geocode;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport GeocodeRequestREST from \"./GeocodeRequestREST\";\n\n/**\n * Creation d'une requte\n * (Factory)\n *\n * @module GeocodeRequestFactory\n * @alias Gp.Services.Geocode.Request.GeocodeRequestFactory\n * @private\n */\nvar GeocodeRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      // options specifiques du service\n     *      geocodeMethod:\n     *      query:\n     *      filters:\n     *      maximumResponses:\n     *   };\n     *   var result = GeocodeRequestFactory.build(options);\n     *   if (!result) {\n     *       // error...\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"GeocodeRequestFactory\");\n        logger.trace([\"GeocodeRequestFactory::build()\"]);\n\n        var settings = options || {};\n\n        var myReq = new GeocodeRequestREST(settings);\n        if (!myReq.processRequestString()) {\n            throw new Error(\"Error process request (rest) !\");\n        }\n        var request = myReq.requestString;\n\n        logger.trace(request);\n\n        return request;\n    }\n};\n\nexport default GeocodeRequestFactory;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport GeocodeParamREST from \"./model/GeocodeParamREST\";\n\n/**\n * @classdesc\n * Classe de gestion des requtes de type REST sur le service de calcul d'itineraire\n * (uniquement en GET)\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.GeocodeRequestREST\n * @param {Object} options - options definies dans le composant Route\n *\n * @example\n * var options = {\n *      (...)\n * };\n *\n * @private\n */\nfunction GeocodeRequestREST (options) {\n    this.logger = Logger.getLogger(\"GeocodeRequestREST\");\n    this.logger.trace(\"[Constructeur GeocodeRequestREST ()]\");\n\n    if (!(this instanceof GeocodeRequestREST)) {\n        throw new TypeError(\"GeocodeRequestREST constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /** liste des options */\n    this.settings = options;\n}\n\nGeocodeRequestREST.prototype = {\n\n    /**\n     * @lends module:GeocodeRequestREST#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeRequestREST,\n\n    /**\n     * Construction de la requte.\n     *\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        var request = \"\";\n\n        // Mapping des options avec le service de l'API REST\n        const oParams = new GeocodeParamREST(this.settings);\n\n        const params = oParams.getParams();\n        for (var i = 0; i < params.length; i++) {\n            var o = params[i];\n            if (request) {\n                request += \"&\";\n            }\n            request += o.k + \"=\" + o.v;\n        }\n\n        if (!this.settings.geocodeMethod || (this.settings.geocodeMethod !== \"search\" && this.settings.geocodeMethod !== \"reverse\")) {\n            throw new Error(\"Error geocodeMethod not valid\");\n        }\n\n        this.requestString = \"?\" + request;\n        this.logger.trace(this.requestString);\n\n        return this.requestString;\n    }\n};\n\nexport default GeocodeRequestREST;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requtes du service de calcul d'itineraire (REST).\n *      Permet le mapping avec les options du service.\n * @constructor\n * @alias Gp.Services.Route.Request.RouteParamREST\n * @param {Object} options - options\n *\n * @private\n */\nfunction GeocodeParamREST (options) {\n    if (!(this instanceof GeocodeParamREST)) {\n        throw new TypeError(\"GeocodeParamREST constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur GeocodeParamREST ()]\");\n\n    /**\n     * Options en paramtres du constructeur.\n     */\n    this.options = options || {};\n\n    // methode de geocodage\n    if (!this.options.geocodeMethod || (this.options.geocodeMethod !== \"search\" && this.options.geocodeMethod !== \"reverse\")) {\n        throw new Error(\"Error geocodeMethod not valid\");\n    }\n    this.geocodeMethod = this.options.geocodeMethod;\n\n    // mapping des options avec l'API REST\n    this.query = (typeof this.options !== \"undefined\") ? this.options.query : null;\n\n    this.searchGeometry = this.options.searchGeometry || null;\n\n    this.index = this.options.index || null;\n\n    this.lon = this.options.position && this.options.position.lon ? this.options.position.lon : null;\n\n    this.lat = this.options.position && this.options.position.lat ? this.options.position.lat : null;\n\n    this.maxResp = this.options.maxResp || null;\n\n    this.returnTrueGeometry = this.options.returnTrueGeometry || null;\n\n    this.filters = this.options.filters || {};\n}\n\n/**\n * CLASSNAME\n */\nGeocodeParamREST.CLASSNAME = \"GeocodeParamREST\";\n\nGeocodeParamREST.prototype = {\n\n    /**\n     * @lends module:GeocodeParamREST#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeParamREST,\n\n    /**\n     * Retourne les filtres\n     * @returns {String} les filtres\n     */\n    getFilters : function () {\n        var filters = {};\n        for (var prop in this.filters) {\n            if (this.filters.hasOwnProperty(prop)) {\n                filters[prop] = this.filters[prop];\n            }\n        }\n        return filters;\n    },\n\n    /**\n     * Retourne l'index\n     * @returns {String} l'index\n     */\n    getIndex : function () {\n        if (this.index === undefined) {\n            return null;\n        }\n        if (this.index === \"StreetAddress\") {\n            return \"address\";\n        } else if (this.index === \"CadastralParcel\") {\n            return \"parcel\";\n        } else if (this.index === \"PositionOfInterest\") {\n            return \"poi\";\n        } else if (this.index === \"location\") {\n            return \"location\";\n        }\n        return this.index;\n    },\n\n    /**\n     * Retourne la gomtrie de recherche\n     * @returns {String} la gomtrie de recherche au format json\n     */\n    getSearchGeometry : function () {\n        return JSON.stringify(this.searchGeometry);\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array} liste de paramtres\n */\nGeocodeParamREST.prototype.getParams = function () {\n    var map = [];\n\n    if (this.geocodeMethod === \"search\") {\n        map.push({\n            k : \"q\",\n            v : this.query\n        });\n    }\n\n    if (this.index) {\n        map.push({\n            k : \"index\",\n            v : this.getIndex()\n        });\n    }\n\n    if (this.geocodeMethod === \"reverse\" && this.searchGeometry) {\n        map.push({\n            k : \"searchgeom\",\n            v : this.getSearchGeometry()\n        });\n    }\n\n    if (this.lon && this.lat) {\n        map.push({\n            k : \"lon\",\n            v : this.lon\n        });\n        map.push({\n            k : \"lat\",\n            v : this.lat\n        });\n    }\n\n    if (this.maxResp) {\n        map.push({\n            k : \"limit\",\n            v : this.maxResp\n        });\n    }\n\n    if (this.returnTrueGeometry) {\n        map.push({\n            k : \"returntruegeometry\",\n            v : this.returnTrueGeometry\n        });\n    }\n\n    const filters = this.getFilters();\n    for (var key in filters) {\n        map.push({\n            k : key,\n            v : filters[key]\n        });\n    }\n\n    return map;\n};\n\nexport default GeocodeParamREST;\n","/**\n * Factory pour gnrer une reponse JSON  partir d'un XML\n * (Factory)\n *\n * @module GeocodeResponseFactory\n * @alias Gp.Services.Geocode.Response.GeocodeResponseFactory\n * @private\n */\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport GeocodeResponseParser from \"../Formats/GeocodeResponseParser\";\n\nvar GeocodeReponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // data de type GeocodeResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    const parser = new GeocodeResponseParser();\n                    data = parser.parse(options.response);\n\n                    if (!data) {\n                        throw new Error(\"L'analyse de la rponse du service !?\");\n                    }\n                } catch (e) {\n                    var message = e.message;\n                    if (typeof options.response === \"string\") {\n                        message += \"('\" + options.response + \"')\";\n                    } else {\n                        message += \"('\" + options.response.documentElement.innerHTML + \"')\";\n                    }\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", message),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la rponse contenait une exception renvoye par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200 // FIXME : 200 ?\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService({\n                message : MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\"),\n                type : ErrorService.TYPE_SRVERR,\n                status : -1 // FIXME : status response\n            }));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default GeocodeReponseFactory;\n","\n/**\n * Response object for {@link module:Services~geocode Gp.Services.geocode ()} or {@link module:Services~reverseGeocode Gp.Services.reverseGeocode ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Geocode.GeocodedLocation>} locations - locations array.\n *\n * @namespace\n * @alias Gp.Services.GeocodeResponse\n */\nfunction GeocodeResponse () {\n    if (!(this instanceof GeocodeResponse)) {\n        throw new TypeError(\"GeocodeResponse constructor cannot be called as a function.\");\n    }\n\n    this.locations = [];\n}\n\nGeocodeResponse.prototype = {\n\n    constructor : GeocodeResponse\n\n};\n\nexport default GeocodeResponse;\n","\n/**\n * Single location object returned by the underlying geocoding web service.\n *\n * @property {Gp.Point} position - Position of the location given in the requested coordinates system.\n * @property {String} type - location type \"StreetAddress\" (for an address), \"PositionOfInterest\" (for a place name) or \"CadastralParcel\" (for cadastral parcel).\n * @property {String} matchType - how geocoding is performed : \"street number\" (exact address), \"street enhanced\" (street number calculated by interpolation), \"street\" (only the street), \"city\" (only the city).\n * @property {Float} accuracy - Accuracy of the response towards the requested location between 0 (unaccurate) and 1 (exact match).\n * @property {Object} placeAttributes - Associative array matching the following attributes with their values given by the underlying web service :\n *\n * *Common attributes : *\n *\n * - **trueGeometry** - the 'real life' geometry if different from 'Point' type.\n *\n * *if type === \"StreetAddress\" :*\n *\n * - **number** - Street number.\n * - **postalCode** - PostCode\n * - **street** - Street name\n * - **city** - City\n * - **houseNumberInfos** - additional street number information\n * - **inseeCode** - INSEE Code\n *\n *\n * *if type === \"PositionOfInterest\" :*\n *\n * - **type** - Place name type\n * - **postalCode** - PostCode\n * - **toponyme** - Toponyme\n * - **extraFields** - additional place name properties\n * - **inseeCode** - INSEE Code\n *\n *\n * *si type = \"CadastralParcel\" :*\n *\n * - **codeCommuneAbs** - when a parcel comes from a city that was absorbed by another, code of that old city. \"000\" otherwise.\n * - **codeArrondissement** - arrondissement\n * - **identifiant** - cadastral parcel code\n * - **feuille** - Parcel Sheet (eg. \"1\").\n * - **numero** - Parcel Number (eg. \"0041\")\n * - **section** - Parcel Section (eg. \"0D\").\n * - **nomCommune** - Parcel municipality name.\n * - **codeCommune** - Parcel municipality.\n * - **codeDepartement** - Parcel Department.\n *\n * @namespace\n * @alias Gp.Services.Geocode.GeocodedLocation\n */\nfunction GeocodedLocation () {\n    if (!(this instanceof GeocodedLocation)) {\n        throw new TypeError(\"GeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    this.position = null;\n\n    this.matchType = null;\n\n    this.placeAttributes = {};\n\n    this.type = null;\n\n    this.accuracy = null;\n\n    /**\n     * Nom de la classe : \"GeocodedLocation\"\n     * @type {String}\n     */\n    this.CLASSNAME = \"GeocodedLocation\";\n}\n\nGeocodedLocation.prototype = {\n\n    constructor : GeocodedLocation\n\n};\n\nexport default GeocodedLocation;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport GeocodeRequestFactory from \"./Request/GeocodeRequestFactory\";\nimport GeocodeResponseFactory from \"./Response/GeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de gocodage inverse du Goportail :\n *     envoi de la requte construite selon les paramtres en options,\n *     ventuellement parsing et analyse  de la rponse,\n *     retour d'une rponse en paramtre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ReverseGeocode\n *\n * @param {Object} options - options spcifiques au service (+ les options herites)\n *\n * @param {Object} options.position - Position du point de rfrence pour le calcul de proximit exprime dans le systme de rfrence spcifi par le srs.\n *      @param {Float} options.position.lon - Longitude du point de rfrence pour le calcul de proximit.\n *      @param {Float} options.position.lat - Latitude du point de rfrence pour le calcul de proximit.\n *\n * @param {Object} [options.filters] - Les proprits possibles de cet objet.\n * @param {String} [options.filters.[proprietes du filtre]] - Critre supplmentaire pour filtrer la recherche sous la forme\n *      d'un couple cl/valeur  dfinir selon les possibilits du serveur ajout  la requte.\n *      Le service de gocodage du Goportail permet de filtrer les adresses postales avec les proprits :\n *          \"postalCode\", \"inseeCode\", \"city\".\n *      Il permet galement de filtrer les toponymes avec les proprits :\n *          \"postalCode\", \"inseeCode\", \"type\".\n *      Enfin, il permet de filtrer les parcelles cadastrales avec les proprits :\n *          \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n *\n * @param {Object} [options.searchGeometry] - Emprise dans laquelle on souhaite effectuer la recherche.\n *      Les proprits possibles de cet objet sont dcrites ci-aprs.\n *      @param {String} options.searchGeometry.type   - Type de gometrie (Point|Circle|Linestring|Polygon)\n *      @param {Array.<Float>|Array.Array.<Float>} options.searchGeometry.coordinates - Coordonnes des points constituant la gomtrie.\n *      @param {Float} options.searchGeometry.radius    - Rayon. Paramtre applicable uniquement pour le type 'Circle'.\n *\n * @param {String} [options.index = \"StreetAddress\"] - Type de l'objet recherch.\n *      Le service de gocodage du Goportail permet de rechercher des 'PositionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales ou des 'CadastralParcel' pour des parcelles cadastrales. L'index 'location' permet une recherche\n *      multi-indexes en regroupant les indexes 'PositionOfInterest' et 'StreetAddress'.\n *      D'autres types pourront tre rajouts selon l'volution du service.\n *      Par dfaut, index = 'StreetAddress'.\n *\n * @param {Number} [options.maximumResponses] - Nombre de rponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par dfaut. Si le serveur consult est celui du Goportail, la valeur par dfaut sera donc celle du service : 20s.\n *\n * @param {Boolean} [options.returnTrueGeometry] - Boolen indiquant si l'on souhaite rcuprer la gomtrie vraie des objects golocaliss.\n *      false par dfaut.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      proxyURL : null,\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spcifique au service\n *      index : 'StreetAddress',\n *      searchGeometry : {\n *          type : Circle,\n *          coordinates : [48, 2],\n *          radius : 100\n *      },\n *      position : {lon:2 , lat:48.5},\n *      maximumResponses : 25,\n *   };\n *\n */\nfunction ReverseGeocode (options_) {\n    if (!(this instanceof ReverseGeocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ReverseGeocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ReverseGeocode\";\n\n    this.logger = Logger.getLogger(\"Gp.Services.ReverseGeocode\");\n    this.logger.trace(\"[Constructeur ReverseGeocode (options)]\");\n\n    var options = this.patchOptionConvertor(options_);\n    if (!options.serverUrl) {\n        options.serverUrl = DefaultUrlService.ReverseGeocode.newUrl();\n    }\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, [options]);\n\n    if (!options.searchGeometry) {\n        if (!options.position) {\n            throw new Error(_.getMessage(\"PARAM_MISSING\", \"searchGeometry\"));\n        }\n    } else {\n        this.options.searchGeometry = options.searchGeometry;\n    }\n\n    // on definit l'index par defaut\n    if (!options.index) {\n        this.options.index = options.index = \"StreetAddress\";\n    }\n\n    if (options.filters) {\n        var filter = Object.keys(options.filters);\n        for (var i = 0; i < filter.length; i++) {\n            var key = filter[i];\n            // on supprime les filtres vides\n            if (typeof options.filters[key] === \"undefined\" ||\n                (typeof options.filters[key] === \"object\" && Object.keys(options.filters[key]).length === 0) ||\n                (typeof options.filters[key] === \"string\" && options.filters[key].length === 0) ||\n                (Array.isArray(options.filters[key]) && options.filters[key].length === 0)\n            ) {\n                delete this.options.filters[key];\n            }\n        }\n    }\n\n    this.options.position = options.position;\n    this.options.index = options.index || \"StreetAddress\";\n    this.options.maximumResponses = options.maximumResponses || 20;\n}\n\n/**\n * @lends module:ReverseGeocode#\n */\nReverseGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nReverseGeocode.prototype.constructor = ReverseGeocode;\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} options_ - options du service\n * @return {Object} - options\n */\nReverseGeocode.prototype.patchOptionConvertor = function (options_) {\n    var options = options_;\n\n    if (options.filterOptions) {\n        this.logger.warn(\"The parameter 'filterOptions' is deprecated\");\n\n        if (options.filterOptions.type) {\n            this.logger.warn(\"The parameter 'filterOptions.type' is deprecated\");\n            if (!options.index) {\n                if (Array.isArray(options.filterOptions.type) && options.filterOptions.type.length > 0) {\n                    options.index = options.filterOptions.type[0];\n                } else {\n                    options.index = options.filterOptions.type;\n                }\n            }\n            delete options.filterOptions.type;\n        }\n\n        if (options.filterOptions.bbox) {\n            this.logger.warn(\"The parameter 'filterOptions.bbox' is deprecated\");\n            if (!options.searchGeometry) {\n                // convertir la geometrie\n                options.searchGeometry = this.bbox2Json(options.filterOptions.bbox);\n            }\n            delete options.filterOptions.bbox;\n        }\n\n        if (options.filterOptions.circle) {\n            this.logger.warn(\"The parameter 'filterOptions.circle' is deprecated\");\n            if (!options.searchGeometry) {\n                // convertir la geometrie\n                options.searchGeometry = this.circle2Json(options.filterOptions.circle);\n            }\n            delete options.filterOptions.circle;\n        }\n\n        if (options.filterOptions.polygon) {\n            this.logger.warn(\"The parameter 'filterOptions.polygon' is deprecated\");\n            if (!options.searchGeometry) {\n                // convertir la geometrie\n                options.searchGeometry = this.polygon2Json(options.filterOptions.polygon);\n            }\n            delete options.filterOptions.polygon;\n        }\n\n        if (!options.filters && Object.keys(options.filterOptions).length > 0) {\n            options.filters = options.filterOptions;\n        }\n\n        delete options.filterOptions;\n    }\n\n    if (options.position) {\n        if (options.position.x) {\n            this.logger.warn(\"The parameter 'position.x' is deprecated\");\n\n            if (!options.position.lon) {\n                options.position.lon = options.position.x;\n            }\n            delete options.position.x;\n        }\n\n        if (options.position.y) {\n            this.logger.warn(\"The parameter 'position.y' is deprecated\");\n\n            if (!options.position.lat) {\n                options.position.lat = options.position.y;\n            }\n            delete options.position.y;\n        }\n    }\n\n    if (options.srs) {\n        this.logger.warn(\"The parameter 'srs' is deprecated\");\n        delete options.srs;\n    }\n\n    return options;\n};\n\n/**\n * (overwrite)\n * Cration de la requte\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        geocodeMethod : \"reverse\",\n        searchGeometry : this.options.searchGeometry,\n        index : this.options.index,\n        position : this.options.position,\n        returnTrueGeometry : this.options.returnTrueGeometry,\n        maxResp : this.options.maximumResponses,\n        filters : this.options.filters\n    };\n\n    this.request = GeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien t construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        GeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Array} bbox - bbox\n * @return {Object} - geometrie au format json\n */\nReverseGeocode.prototype.bbox2Json = function (bbox) {\n    return {\n        type : \"Polygon\",\n        coordinates : [[\n            [bbox.left, bbox.top],\n            [bbox.right, bbox.top],\n            [bbox.right, bbox.bottom],\n            [bbox.left, bbox.bottom],\n            [bbox.left, bbox.top]\n        ]]\n    };\n};\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} circle - circle\n * @return {Object} - geometrie au format json\n */\nReverseGeocode.prototype.circle2Json = function (circle) {\n    return {\n        type : \"Circle\",\n        radius : circle.radius,\n        coordinates : [circle.x, circle.y]\n    };\n};\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Array} polygon - polygon\n * @return {Object} - geometrie au format json\n */\nReverseGeocode.prototype.polygon2Json = function (polygon) {\n    var jsonGeom = {\n        type : \"Polygon\",\n        coordinates : [[]]\n    };\n\n    for (var i = 0; i < polygon.length; ++i) {\n        jsonGeom.coordinates[0].push([polygon[i].x, polygon[i].y]);\n    }\n\n    return jsonGeom;\n};\n\n/**\n * Codes EPSG gographiques (lat/lon). Utiles car les coordonnes doivent tre inverses.\n */\nReverseGeocode.geoEPSG = [\"EPSG:4326\"];\n\nexport default ReverseGeocode;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport ProcessIsoCurveRequest from \"./Request/ProcessIsoCurveRequest\";\nimport ProcessIsoCurveResponseFactory from \"./Response/ProcessIsoCurveResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'isochrone/distance du Goportail :\n *     envoi de la requte construite selon les paramtres en options,\n *     ventuellement parsing et analyse  de la rponse,\n *     retour d'une rponse en paramtre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ProcessIsoCurve\n * @param {Object} options - options spcifiques au service (+ les options herites)\n *\n * @param {String} options.resource - La ressource utilise pour le calcul : bdtopo-valhalla (par dfaut) ou bdtopo-pgr.\n *\n * @param {String} options.outputFormat - Le format de la rponse du service iso : 'json' uniquement et par dfaut.\n *\n * @param {Object} options.position - Point de dpart du calcul.\n *      Coordonnes exprimes en longitudes, latitudes (EPSG:4326)\n *      @param {Float} options.position.x - Abcisse du point de dpart du calcul d'isochrone/distance.\n *      @param {Float} options.position.y - Ordonne du point de dpart du calcul d'isochrone/distance.\n *\n * @param {String} options.srs - Projection.\n *      Systme de coordonnes dans lequel les coordonnes du point  location  sont exprimes et\n *      dans lequel la gomtrie de la courbe rsultante sera exprime.\n *      Par dfaut, le systme de coordonnes utilis sera  EPSG:4326 .\n *\n * @param {String} [options.graph = \"voiture\"] - Nom du graphe  utiliser pour le calcul ( Pieton  ou  Voiture ).\n *      La valeur par dfaut est : voiture\n *\n * @param {Array.<String>} [options.exclusions] - DEPRECATED: Ce paramtre est conserv pour une rtrocompatibilit de l'api. Le nouveau paramtre  utiliser est options.constraints.\n *      Critres d'exclusions  appliquer pour le calcul.\n *      On prcise ici le type de tronons que l'on ne veut pas que l'isochrone/distance emprunte\n *      (valeurs possibles :  toll  (viter les pages),  bridge ,  tunnel ).\n *\n * @param {Object[]} [options.constraints] - Critres de contraintes  appliquer sur un itinraire. Les valeurs disponibles dpendent de la ressource utilise. Il est donc utile de regarder le getCapabilities.\n *      @param {String} [options.constraints.constraintType] - Type de la contrainte. Gnralement \"banned\".\n *      @param {String} [options.constraints.key] - Cl de la contrainte. Gnralement \"wayType\".\n *      @param {String} [options.constraints.operator] - Oprateur de la contrainte. Gnralement \"=\".\n *      @param {String} [options.constraints.value] - Valeur de la contrainte. Gnralement \"autoroute\".\n *\n * @param {String} [options.method = \"time\"] - Mthode utilise pour le calcul de la courbe iso.\n *      Les valeurs possible sont \"time\" pour un calcul d'isochrone, \"distance\" pour un calcul d'isodistance.\n *      Pas de valeur spcifi quivaut  un calcul d'isochrone.\n *\n * @param {String} [options.distanceUnit = \"m\"] - Indique si la distance doit tre exprime en km ou m dans la rponse (\"m\" or \"km\").\n *\n * @param {String} [options.timeUnit = \"second\"] - Indique si la dure doit tre exprime en seconde, minute ou heure dans la rponse (\"standard\", \"second\", \"minute\", \"hour\"). Il peut-tre formatt hh:mm::ss avec la valeur standard.\n *\n * @param {Float} options.time - Dure maximum (exprime en secondes)  utiliser pour le calcul de la courbe  partir du ou jusqu'au point  location .\n *      Ce paramtre doit tre renseign si l'option \"mthod\" a la valeur \"time\".\n *      Si l'option method n'est pas renseigne, ce paramtre doit tre renseign.\n *\n * @param {Float} options.distance - Distance maximum (exprime en metres)  utiliser pour le calcul de la courbe  partir du ou j'usqu'au point  location .\n *      Ce paramtre doit tre renseign si l'option \"mthod\" a la valeur \"DISTANCE\".\n *      Si l'option \"method\" n'est pas renseigne, ce paramtre sera ignor.\n *\n * @param {Boolean} [options.reverse = false] - Indique si la gomtrie rsultante doit tre lisse ( true ) pour ne pas avoir d'effet d'escalier.\n *      Par dfaut, la valeur  false  est applique.\n *\n * @param {Boolean} [options.smoothing = false] - Indique si la gomtrie rsultante doit tre lisse ( true ) pour ne pas avoir d'effet d'escalier.\n *      Par dfaut, la valeur  false  est applique.\n *\n * @param {Boolean} [options.holes = false] - Indique si la gomtrie rsultante (surface) doit tre retourne avec des trous ( true ).\n *      Par dfaut, la valeur  false  est applique.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spcifique au service\n *      position : {\n *           x : 2.3242664298058053,\n *           y : 48.86118017324745\n *      },\n *      resource : bdtopo-valhalla,\n *      distance : 200,\n *      [time : ]\n *      method : \"distance\",\n *      graph : \"voiture\",\n *      reverse : false\n *  };\n */\n\nfunction ProcessIsoCurve (options) {\n    if (!(this instanceof ProcessIsoCurve)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ProcessIsoCurve\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ProcessIsoCurve\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.ProcessIsoCurve\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurve (options)]\");\n\n    if (!options.position) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.position.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.x\"));\n    }\n\n    if (options.position.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.y\"));\n    }\n\n    if (!options.time && !options.distance) {\n        throw new Error(\"Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance\");\n    }\n\n    // si on a que le paramtre \"distance\" en entre, on calcule une isodistance.\n    // Le paramtre \"mthode\" doit pour avoir une rponse du service, tre pass  \"distance\"\n    if (!options.time && options.distance) {\n        this.options.method = \"distance\";\n        // on supprime l'ventuel attribut time, rsidu d'un appel antrieur\n        if (this.options.time) {\n            delete this.options.time;\n        }\n    }\n\n    // si on a que le paramtre \"time\" en entre, on calcule une isochrone.\n    // Le paramtre \"mthode\" doit pour avoir une rponse du service, tre pass  \"time\"\n    if (options.time && !options.distance) {\n        this.options.method = \"time\";\n        // on supprime l'ventuel attribut time, rsidu d'un appel antrieur\n        if (this.options.distance) {\n            delete this.options.distance;\n        }\n    }\n\n    // au cas o on a ni l'un, ni l'autre...\n    this.options.method = this.options.method || \"time\";\n\n    // options par defaut du service\n    // TODO: modifier la ressource lors de la mise en production du service\n    this.options.resource = options.resource || \"bdtopo-valhalla\";\n    this.options.exclusions = options.exclusions || [];\n    this.options.reverse = options.reverse || false;\n    this.options.srs = options.srs || \"EPSG:4326\";\n    this.options.distanceUnit = options.distanceUnit || \"m\";\n    this.options.timeUnit = options.timeUnit || \"second\";\n\n    // options depreciees\n    if (options.smoothing) {\n        this.logger.warn(\"options.smoothing is DEPRECATED\");\n    }\n    this.options.smoothing = false;\n    if (options.holes) {\n        this.logger.warn(\"options.holes is DEPRECATED\");\n    }\n    this.options.holes = false;\n\n    // Gestion du graphe\n    if (options.graph) {\n        if (options.graph === \"Voiture\") {\n            this.options.graph = \"car\";\n        }\n        if (options.graph === \"Pieton\") {\n            this.options.graph = \"pedestrian\";\n        }\n    } else {\n        this.options.graph = \"car\";\n    }\n\n    // Gestions des contraintes\n    this.options.constraints = [];\n    if (options.constraints) {\n        if (Array.isArray(options.constraints)) {\n            for (var k = 0; k < options.constraints.length; k++) {\n                this.options.constraints.push(options.constraints[k]);\n            }\n        } else {\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"constraints\"));\n        }\n    }\n\n    // Gestion de l'ancien paramtre exclusions\n    var constraintTunnel = {};\n    var constraintPont = {};\n    var constraintAutoroute = {};\n    if (options.exclusions) {\n        if (options.exclusions.length !== 0) {\n            this.logger.warn(\"options.exclusions is DEPRECATED !!\");\n            for (var c = 0; c < options.exclusions.length; c++) {\n                if (typeof options.exclusions[c] === \"string\") {\n                    options.exclusions[c] = options.exclusions[c].toLowerCase();\n                } else {\n                    // on ne cre pas une erreur pour rtro-compatibilit avec les anciennes versions\n                    continue;\n                }\n                if (options.exclusions[c] === \"toll\") {\n                    constraintAutoroute.constraintType = \"banned\";\n                    constraintAutoroute.key = \"wayType\";\n                    constraintAutoroute.operator = \"=\";\n                    constraintAutoroute.value = \"autoroute\";\n                    this.options.constraints.push(constraintAutoroute);\n                }\n                if (options.exclusions[c] === \"tunnel\") {\n                    constraintTunnel.constraintType = \"banned\";\n                    constraintTunnel.key = \"wayType\";\n                    constraintTunnel.operator = \"=\";\n                    constraintTunnel.value = \"tunnel\";\n                    this.options.constraints.push(constraintTunnel);\n                }\n                if (options.exclusions[c] === \"bridge\") {\n                    constraintPont.constraintType = \"banned\";\n                    constraintPont.key = \"wayType\";\n                    constraintPont.operator = \"=\";\n                    constraintPont.value = \"pont\";\n                    this.options.constraints.push(constraintPont);\n                }\n            }\n        }\n    }\n\n    // on passe l'option outputFormat en minuscules afin d'viter des exceptions.\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"json\";\n    if (options.outputFormat && options.outputFormat !== \"json\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"outputFormat\"));\n    }\n    this.options.outputFormat = \"json\";\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseigne, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var urlFound = DefaultUrlService.ProcessIsoCurve.newUrl();\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n}\n\n/**\n * @lends module:ProcessIsoCurve#\n */\nProcessIsoCurve.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nProcessIsoCurve.prototype.constructor = ProcessIsoCurve;\n\n/**\n * Cration de la requte (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nProcessIsoCurve.prototype.buildRequest = function (error, success) {\n    try {\n        var oIsoCurve = new ProcessIsoCurveRequest(this.options);\n        if (!oIsoCurve.processRequestString()) {\n            throw new Error(_.getMessage(\"SERVICE_REQUEST_BUILD\"));\n        }\n\n        this.request = oIsoCurve.requestString;\n    } catch (e) {\n        error.call(this, new ErrorService(e.message));\n        return;\n    }\n\n    success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} onError   - callback des erreurs\n * @param {Function} onSuccess - callback de succs de l'analyse de la rponse\n */\nProcessIsoCurve.prototype.analyzeResponse = function (onError, onSuccess) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat,\n            rawResponse : this.options.rawResponse,\n            onSuccess : onSuccess,\n            onError : onError,\n            scope : this\n        };\n\n        ProcessIsoCurveResponseFactory.build(options);\n    } else {\n        onError.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default ProcessIsoCurve;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport ProcessIsoCurveParam from \"./model/ProcessIsoCurveParam\";\n\n/**\n * @classdesc\n * Classe de gestion des requtes sur le service de calcul d'isoschrone/isodistance.\n *  Les requtes peuvent tre en mode GET ou POST,\n *  et le format de sorti est en JSON.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveRequest\n * @param {Object} options - options\n *\n * @example\n * var options = {\n *      httpMethod : 'GET', // GET|POST\n *      // spcifique au service\n *      position : {\n *          x : 2.3242664298058053,\n *          y : 48.86118017324745\n *      },\n *      graph : \"car\",\n *      method : 'time',\n *      time : 1000, //distance : 200\n *      reverse : false,\n *      srs : 'EPSG:4326'\n *  };\n *\n * try {\n *\n *      var oIsoCurve = new ProcessIsoCurveRequest (options);\n *      if (!oIsoCurve.processRequestString ()) {\n *          // error\n *      }\n *\n *      var request = oIsoCurve.requestString;\n *\n * } catch (e) {\n *      // error\n * }\n * @private\n */\nfunction ProcessIsoCurveRequest (options) {\n    this.logger = Logger.getLogger(\"ProcessIsoCurveRequest\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurveRequest ()]\");\n\n    if (!(this instanceof ProcessIsoCurveRequest)) {\n        throw new TypeError(\"ProcessIsoCurveRequest constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /**\n     * Liste des options\n     */\n    this.settings = options;\n\n    /**\n     * Mode HTPP.\n     * Par defaut, \"GET\".\n     * @type {String}\n     */\n    this.mode = this.settings.httpMethod || \"GET\";\n}\n\nProcessIsoCurveRequest.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveRequest#\n     */\n\n    /**\n     * Requte\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveRequest,\n\n    /**\n     * Construction de la requte.\n     *\n     * @example\n     * // GET  out :\n     *   //  (http://wxs.ign.fr/KEY/isochrone?)\n     *   //  resource=&\n     *   //  point=&\n     *   //  costValue=&\n     *   //  costType=&\n     *   //  profile=&\n     *   //  constraints=&\n     *   //  direction=&\n     *   //  crs=\n     *\n     * // POST out :\n     * {\n     *  resource: \"bduni-idf-pgr\",\n     *  point: \"2.337306,48.849319\",\n     *  costValue: 100,\n     *  costType: \"time\",\n     *  profile: \"car\",\n     *  constraints: [{\n     *      constraintType: \"banned\",\n     *      key: \"ways_type\",\n     *      operator: \"=\",\n     *      value: \"autoroute\"\n     *  }]\n     * }\n     *\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        var request = \"\";\n        var i = 0;\n\n        switch (this.mode) {\n            case \"GET\":\n                this.logger.trace(\"Process GET Request\");\n\n                // Mapping des options avec le service de l'API REST\n                var oParams = new ProcessIsoCurveParam(this.settings);\n                var params = oParams.getParams();\n\n                for (i = 0; i < params.length; i++) {\n                    var o = params[i];\n                    if (request) {\n                        request += \"&\";\n                    }\n                    request += o.k + \"=\" + o.v;\n                }\n\n                break;\n\n            case \"POST\":\n                this.logger.trace(\"Process POST Request\");\n                // creation du JSON\n                var postRequest = {};\n\n                postRequest.resource = this.settings.resource;\n\n                postRequest.point = this.settings.position.x + \",\" + this.settings.position.y;\n\n                if (this.settings.method === \"distance\") {\n                    postRequest.costType = \"distance\";\n                    postRequest.costValue = this.settings.distance;\n                } else {\n                    postRequest.costType = \"time\";\n                    postRequest.costValue = this.settings.time;\n                }\n\n                postRequest.profile = this.settings.graph;\n\n                if (this.settings.reverse) {\n                    postRequest.direction = \"arrival\";\n                } else {\n                    postRequest.direction = \"departure\";\n                }\n\n                postRequest.constraints = this.settings.constraints;\n\n                postRequest.distanceUnit = this.settings.distanceUnit;\n\n                postRequest.timeUnit = this.settings.timeUnit;\n\n                postRequest.crs = this.settings.srs;\n\n                // conversion en chane de caractres\n                request = JSON.stringify(postRequest);\n                break;\n\n            default:\n                this.logger.error(\"No other HTTP method supported by the service !\");\n        }\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default ProcessIsoCurveRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requtes du service de calcul des iso.\n * Permet le mapping avec les options du service.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveParam\n * @param {Object} options - options\n * @private\n *\n */\nfunction ProcessIsoCurveParam (options) {\n    if (!(this instanceof ProcessIsoCurveParam)) {\n        throw new TypeError(\"ProcessIsoCurveParam constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur ProcessIsoCurveParam ()]\");\n\n    /**\n     * Options en paramtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Identifiant de lisochrone */\n    this.id = this.options.id;\n\n    /** Resource */\n    this.resource = this.options.resource;\n\n    /** Coordonnes de dpart (ou arrive si le reverse est  true). */\n    this.point = this.options.position;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.crs = this.options.srs;\n\n    /**\n     * Profil de vhicule  utiliser pour le calcul.\n     * Voiture ou Pieton\n     */\n    this.profile = this.options.graph;\n\n    /** Liste des rgles de restrictions  utiliser */\n    this.constraints = this.options.constraints;\n\n    this.reverse = this.options.reverse;\n\n    this.timeUnit = this.options.timeUnit;\n\n    this.distanceUnit = this.options.distanceUnit;\n\n    /**\n     * \"time\" pour isochrone ou \"distance\" for isodistance.\n     * Par defaut, time...\n     */\n    if (this.options.method === \"distance\") {\n        this.costType = \"distance\";\n        this.costValue = this.options.distance;\n        if (this.distanceUnit === \"m\" && this.costValue >= 50000) {\n            this.distanceUnit = \"km\";\n            this.costValue /= 1000;\n        }\n    } else {\n        this.costType = \"time\";\n        this.costValue = this.options.time;\n    }\n}\n\n/**\n * CLASSNAME\n */\nProcessIsoCurveParam.CLASSNAME = \"ProcessIsoCurveParam\";\n\nProcessIsoCurveParam.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveParam#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveParam,\n\n    /**\n     * Retourne le point\n     * @returns {String} x,y\n     */\n    getLocation : function () {\n        return this.point.x + \",\" + this.point.y;\n    },\n\n    /**\n     * Retourne l'unit de la distance\n     * @returns {String}\n     */\n    getDistanceUnit : function () {\n        if (this.distanceUnit === \"m\") {\n            return \"meter\";\n        }\n        if (this.distanceUnit === \"km\") {\n            return \"kilometer\";\n        }\n        return \"\";\n    },\n\n    /**\n     * Retourne la liste des contraintes\n     * @returns {String}\n     */\n    getConstraints : function () {\n        var constraintArray = [];\n\n        if (this.constraints.length !== 0) {\n            for (var k = 0; k < this.constraints.length; k++) {\n                constraintArray.push(JSON.stringify(this.constraints[k]));\n            }\n        }\n        return constraintArray.join(\"|\");\n    },\n\n    /**\n     * Retourne la direction\n     * @returns {String}\n     */\n    getDirection : function () {\n        if (this.reverse) {\n            return \"arrival\";\n        } else {\n            return \"departure\";\n        }\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]} KVP\n */\nProcessIsoCurveParam.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    map.push({\n        k : \"point\",\n        v : this.getLocation()\n    });\n\n    map.push({\n        k : \"direction\",\n        v : this.getDirection()\n    });\n\n    map.push({\n        k : \"costType\",\n        v : this.costType\n    });\n\n    map.push({\n        k : \"costValue\",\n        v : this.costValue\n    });\n\n    map.push({\n        k : \"profile\",\n        v : this.profile\n    });\n\n    map.push({\n        k : \"timeUnit\",\n        v : this.timeUnit\n    });\n\n    map.push({\n        k : \"distanceUnit\",\n        v : this.getDistanceUnit()\n    });\n\n    if (this.crs) {\n        map.push({\n            k : \"crs\",\n            v : this.crs\n        });\n    }\n\n    if (this.constraints) {\n        map.push({\n            k : \"constraints\",\n            v : this.getConstraints()\n        });\n    }\n\n    return map;\n};\n\nexport default ProcessIsoCurveParam;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport ProcessIsoCurveResponse from \"./model/ProcessIsoCurveResponse\";\n\n/**\n * Factory pour gnrer une reponse JSON  partir d'un JSON\n * (Factory)\n *\n * @module ProcessIsoCurveResponseFactory\n * @alias Gp.Services.ProcessIsoCurve.Response.ProcessIsoCurveResponseFactory\n * @private\n */\nvar ProcessIsoCurveResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant ProcessIsoCurve\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"ProcessIsoCurveResponseFactory\");\n        logger.trace([\"ProcessIsoCurveResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                logger.trace(\"analyze response : json\");\n\n                var JSONResponse;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la reponse\n                // cration de l'objet de rponse\n                data = new ProcessIsoCurveResponse();\n\n                // remplissage de l'objet cr avec les attribtuts de la rponse du service\n                if (JSONResponse) {\n                    if (JSONResponse.costType === \"distance\") {\n                        data.time = \"\";\n                        data.distance = JSONResponse.costValue;\n                    } else {\n                        data.time = JSONResponse.costValue;\n                        data.distance = \"\";\n                    }\n\n                    data.message = \"\";\n                    data.id = \"\";\n                    data.srs = JSONResponse.crs;\n                    data.geometry = JSONResponse.geometry;\n                    var coords = JSONResponse.point.split(\",\");\n                    if (data.location) {\n                        data.location.x = coords[0];\n                        data.location.y = coords[1];\n                    }\n                } else {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", options.response)));\n                    return;\n                }\n\n                // info : en cas de problmes de droits (cl invalide ou autre), la rponse est au format XML !!\n                // ex. <ExceptionReport><Exception exceptionCode=\"MissingParameter\">Key does not exist or has expired</Exception></ExceptionReport>\n                // mais le statut est 403, l'erreur est donc remonte plus tt.\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la rponse est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien pass, on appelle le callback de succs\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default ProcessIsoCurveResponseFactory;\n","\n/**\n * Response object for {@link module:Services~isoCurve Gp.Services.isoCurve ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Float} distance - distance (expressed in meters) used for the request.\n * @property {Float} time - time (expressed in seconds) used for the request.\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the isocurve.\n * @property {String} id - request id (used by underlying webservice).\n * @property {Gp.Point} location - Position of the start or end point used for the request (expressed in \"srs\" coordinates system).\n * @property {String} message - message\n * @property {String} srs - Identifier of the coordinates system used for the isocurve.\n *\n * @namespace\n * @alias Gp.Services.IsoCurveResponse\n *\n */\nfunction ProcessIsoCurveResponse () {\n    if (!(this instanceof ProcessIsoCurveResponse)) {\n        throw new TypeError(\"ProcessIsoCurveResponse constructor cannot be called as a function.\");\n    }\n\n    this.message = null;\n\n    this.id = null;\n\n    this.location = {};\n    this.location.x = null;\n    this.location.y = null;\n\n    this.srs = null;\n\n    this.geometry = null;\n\n    this.time = null;\n\n    this.distance = null;\n}\n\nProcessIsoCurveResponse.prototype = {\n\n    constructor : ProcessIsoCurveResponse\n\n};\n\nexport default ProcessIsoCurveResponse;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteRequestREST from \"./RouteRequestREST\";\n\n/**\n * Creation d'une requte REST en mode POST ou GET\n * (Factory)\n *\n * @module RouteRequestFactory\n * @alias Gp.Services.Route.Request.RouteRequestFactory\n * @private\n */\nvar RouteRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   // utilisation avec les callback\n     *   var options = {\n     *      (...)\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      // spcifique au service\n     *      startPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      endPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      provideBbox : false,\n     *      exclusions : [\"bridge\", \"tunnel\", \"toll\"],\n     *      distanceUnit : \"km\",\n     *      graph : \"Voiture\",\n     *      geometryInInstructions : false,\n     *      routePreference : \"fastest\"\n     *   };\n     *   RouteRequestFactory.build(options);\n     *\n     *   // utilisation sans callback\n     *   var options = {...};\n     *   try {\n     *      var result = RouteRequestFactory.build(options);\n     *      if (! result) { throw new Error(\"...\"):}\n     *   } catch (e) {\n     *      // todo\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteRequestFactory\");\n        logger.trace([\"RouteRequestFactory::build()\"]);\n\n        var request = null;\n\n        var settings = options || {};\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\");\n\n        var message = null;\n\n        // FIXME les exceptions ne sont pas 'catches' sur le constructeur !\n        var myReq = new RouteRequestREST(settings);\n        if (!myReq.processRequestString()) {\n            message = \"Error process request (rest) !\";\n            if (bOnError) {\n                options.onError.call(options.scope, new ErrorService(message));\n                return;\n            }\n            throw new Error(message);\n        }\n        request = myReq.requestString;\n\n        return request;\n    }\n};\n\nexport default RouteRequestFactory;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport RouteParamREST from \"./model/RouteParamREST\";\n\n/**\n * @classdesc\n * Classe de gestion des requtes de type REST sur le service de calcul d'itineraire\n * (uniquement en GET)\n *\n * @constructor\n * @alias Gp.Services.Route.Request.RouteRequestREST\n * @param {Object} options - options definies dans le composant Route\n *\n * @example\n * var options = {\n *      (...)\n * };\n *\n * @private\n */\nfunction RouteRequestREST (options) {\n    this.logger = Logger.getLogger(\"RouteRequestREST\");\n    this.logger.trace(\"[Constructeur RouteRequestREST ()]\");\n\n    if (!(this instanceof RouteRequestREST)) {\n        throw new TypeError(\"RouteRequestREST constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /** liste des options */\n    this.settings = options;\n}\n\nRouteRequestREST.prototype = {\n\n    /**\n     * @lends module:RouteRequestREST#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteRequestREST,\n\n    /**\n     * Construction de la requte.\n     *\n     * @example\n     * // GET  out : origin=2.416907353809513,48.8465772142297&destination=2.4248037771493673,48.84591353161838\n     * // POST out : Not yet supported method POST !\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        // INFO\n        // construction simple sans template...,\n        // mais en attendant que les services soient fixs, on taggue ce composant en mode PROTOTYPE !\n        this.logger.warn(\" PROTOTYPE !\");\n\n        // Mapping des options avec le service de l'API REST\n        var oParams = new RouteParamREST(this.settings);\n        var params = oParams.getParams();\n\n        var request = \"\";\n        for (var i = 0; i < params.length; i++) {\n            var o = params[i];\n            if (request) {\n                request += \"&\";\n            }\n            request += o.k + \"=\" + o.v;\n        }\n\n        // Exemple :\n        //  http://wxs.ign.fr/KEY/itineraire/rest/route.json?\n        //  origin=&\n        //  destination=&\n        //  waypoints=&\n        //  method=DISTANCE&\n        //  graph=Pieton&\n        //  graphName=Pieton&\n        //  exclusions=&\n        //  tolerance=10&\n        //  srs=\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default RouteRequestREST;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requtes du service de calcul d'itineraire (REST).\n *      Permet le mapping avec les options du service.\n * @constructor\n * @alias Gp.Services.Route.Request.RouteParamREST\n * @param {Object} options - options\n *\n * @private\n */\nfunction RouteParamREST (options) {\n    if (!(this instanceof RouteParamREST)) {\n        throw new TypeError(\"RouteParamREST constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RouteParamREST ()]\");\n    /**\n     * Options en paramtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Ressource utilise */\n    this.resource = this.options.resource;\n\n    /** Coordonnes du point de dpart. */\n    this.start = this.options.startPoint.x + \",\" + this.options.startPoint.y;\n\n    /** Coordonnes du point darrive. */\n    this.end = this.options.endPoint.x + \",\" + this.options.endPoint.y;\n\n    /** Coordonnes des tapes point de dpart. */\n    this.intermediates = this.options.viaPoints;\n\n    /** Nom du profile  utiliser */\n    this.profile = this.options.graph;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.crs = this.options.srs;\n\n    /** Liste des contraintes */\n    this.constraints = this.options.constraints;\n\n    /** Nom de l'optimisation  utiliser */\n    this.optimization = this.options.routePreference;\n\n    /** Format de sortie (rsum de litinraire) */\n    this.getSteps = (this.options.geometryInInstructions) ? \"true\" : \"false\";\n\n    /** Unit des distances */\n    this.distanceUnit = this.options.distanceUnit;\n\n    /** Unit des dures */\n    this.timeUnit = this.options.timeUnit;\n\n    /** Attributs des voies */\n    this.waysAttributes = this.options.waysAttributes;\n}\n\n/**\n * CLASSNAME\n */\nRouteParamREST.CLASSNAME = \"RouteParamREST\";\n\nRouteParamREST.prototype = {\n\n    /**\n     * @lends module:RouteParamREST#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteParamREST,\n\n    /**\n     * Retourne une liste de points\n     * @returns {String} une liste de points (sep '|')\n     */\n    getIntermediates : function () {\n        var array = [];\n        if (this.intermediates.length !== 0) {\n            for (var i = 0; i < this.intermediates.length; i++) {\n                var obj = this.intermediates[i];\n                array.push(obj.x + \",\" + obj.y);\n            }\n        }\n\n        return array.join(\"|\");\n    },\n\n    /**\n     * Retourne une liste d'attributs\n     * @returns {String} une liste d'attributs (sep '|')\n     */\n    getWaysAttributes : function () {\n        return this.waysAttributes.join(\"|\");\n    },\n\n    /**\n     * Retourne un profile\n     * @returns {String} profile\n     */\n    getProfile : function () {\n        return this.profile;\n    },\n\n    /**\n     * Retourne un distanceUnit\n     * @returns {String} distanceUnit\n     */\n    getDistanceUnit : function () {\n        if (this.distanceUnit === \"m\") {\n            return \"meter\";\n        }\n        if (this.distanceUnit === \"km\") {\n            return \"kilometer\";\n        }\n        return \"\";\n    },\n\n    /**\n     * Retourne une optimisation\n     * @returns {String} optimization\n     */\n    getOptimization : function () {\n        if (this.optimization) {\n            return this.optimization;\n        } else {\n            return \"\";\n        }\n    },\n\n    /**\n     * Retourne la liste des constraints\n     * @returns {String} une liste des constraints (sep '|')\n     */\n    getConstraints : function () {\n        var constraintArray = [];\n\n        if (this.constraints.length !== 0) {\n            for (var k = 0; k < this.constraints.length; k++) {\n                constraintArray.push(JSON.stringify(this.constraints[k]));\n            }\n        }\n        return constraintArray.join(\"|\");\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array} liste de paramtres\n */\nRouteParamREST.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    map.push({\n        k : \"start\",\n        v : this.start\n    });\n\n    map.push({\n        k : \"end\",\n        v : this.end\n    });\n\n    map.push({\n        k : \"geometryFormat\",\n        v : \"geojson\"\n    });\n\n    if (this.optimization) {\n        map.push({\n            k : \"optimization\",\n            v : this.getOptimization()\n        });\n    }\n\n    if (this.intermediates) {\n        map.push({\n            k : \"intermediates\",\n            v : this.getIntermediates()\n        });\n    }\n\n    if (this.profile) {\n        map.push({\n            k : \"profile\",\n            v : this.getProfile()\n        });\n    }\n\n    if (this.constraints) {\n        map.push({\n            k : \"constraints\",\n            v : this.getConstraints()\n        });\n    }\n\n    if (this.crs) {\n        map.push({\n            k : \"crs\",\n            v : this.crs\n        });\n    }\n\n    if (this.distanceUnit) {\n        map.push({\n            k : \"distanceUnit\",\n            v : this.getDistanceUnit()\n        });\n    }\n\n    if (this.timeUnit) {\n        map.push({\n            k : \"timeUnit\",\n            v : this.timeUnit\n        });\n    }\n\n    if (this.waysAttributes) {\n        map.push({\n            k : \"waysAttributes\",\n            v : this.getWaysAttributes()\n        });\n    }\n\n    return map;\n};\n\nexport default RouteParamREST;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteResponse from \"./model/RouteResponse\";\nimport RouteInstruction from \"./model/RouteInstruction\";\n\n/**\n * Factory pour gnrer une reponse JSON  partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module RouteResponseFactory\n * @alias Gp.Services.Route.Response.RouteResponseFactory\n * @private\n */\nvar RouteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteResponseFactory\");\n        logger.trace(\"RouteResponseFactory::build()\");\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                logger.trace(\"analyze response : json\");\n\n                var JSONResponse;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // construction de l'objet rponse JSON\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.message) {\n                        // ex. {\"message\":\"message not null\", \"status\":\"ERROR\"}\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.message)));\n                        return;\n                    }\n                    var legs = [];\n                    var legSteps = [];\n                    var steps = [];\n\n                    data = new RouteResponse();\n\n                    if (data.hasOwnProperty(\"totalTime\")) {\n                        data.totalTime = parseFloat(JSONResponse.duration);\n                    }\n                    if (data.hasOwnProperty(\"totalDistance\")) {\n                        data.totalDistance = parseFloat(JSONResponse.distance);\n                    }\n\n                    if (data.hasOwnProperty(\"bbox\")) {\n                        data.bbox.left = parseFloat(JSONResponse.bbox[0]);\n                        data.bbox.bottom = parseFloat(JSONResponse.bbox[1]);\n                        data.bbox.right = parseFloat(JSONResponse.bbox[2]);\n                        data.bbox.top = parseFloat(JSONResponse.bbox[3]);\n                    }\n\n                    if (data.hasOwnProperty(\"routeGeometry\") && !options.geometryInInstructions) {\n                        data.routeGeometry = JSONResponse.geometry;\n                    }\n\n                    if (data.hasOwnProperty(\"routeInstructions\") && options.geometryInInstructions) {\n                        var legList = JSONResponse.portions;\n                        var i;\n                        if (Array.isArray(legList) && legList.length) {\n                            for (i = 0; i < legList.length; i++) {\n                                legs.push(legList[i]);\n                            }\n                        }\n                        if (legs.length) {\n                            for (i = 0; i < legs.length; i++) {\n                                legSteps.push(legs[i].steps);\n                            }\n                        }\n                        if (legSteps.length) {\n                            for (i = 0; i < legSteps.length; i++) {\n                                steps = steps.concat(legSteps[i]);\n                            }\n                        }\n\n                        steps.forEach(function (step) {\n                            data.routeInstructions.push(new RouteInstruction());\n                            data.routeInstructions[data.routeInstructions.length - 1].duration = step.duration;\n                            data.routeInstructions[data.routeInstructions.length - 1].distance = step.distance;\n                            data.routeInstructions[data.routeInstructions.length - 1].code = \"\";\n                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"\";\n                            data.routeInstructions[data.routeInstructions.length - 1].geometry = step.geometry;\n\n                            // on ne souhaite pas de ce type de valeur...\n                            if (step.name === \"Valeur non renseigne\") {\n                                step.name = \"\";\n                            }\n\n                            switch (step.instruction.type) {\n                                case \"turn\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Tourner\";\n                                    break;\n                                case \"new name\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Continuer tout droit\";\n                                    break;\n                                case \"depart\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Dpart\";\n                                    break;\n                                case \"arrive\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Arrive\";\n                                    break;\n                                case \"merge\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Rejoindre\";\n                                    break;\n                                case \"ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la bretelle\";\n                                    break;\n                                case \"on ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la bretelle\";\n                                    break;\n                                case \"off ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la sortie\";\n                                    break;\n                                case \"fork\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Sur la bifurcation, prendre\";\n                                    break;\n                                case \"end of road\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \" la fin de la route, prendre\";\n                                    break;\n                                case \"use lane\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Utiliser la file\";\n                                    break;\n                                case \"continue\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Continuer\";\n                                    break;\n                                case \"roundabout\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond-point\";\n                                    break;\n                                case \"rotary\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond-point\";\n                                    break;\n                                case \"roundabout turn\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond point, tourner\";\n                                    break;\n                                case \"notification\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"\";\n                                    break;\n                                default:\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"?\" + step.instruction.type + \"?\";\n                                    break;\n                            }\n\n                            if (step.instruction.modifier) {\n                                switch (step.instruction.modifier) {\n                                    case \"uturn\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Faire demi-tour\";\n                                        break;\n                                    case \"sharp right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" compltement  droite\";\n                                        break;\n                                    case \"right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \"  droite\";\n                                        break;\n                                    case \"slight right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" lgrement  droite\";\n                                        break;\n                                    case \"straight\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Continuer tout droit\";\n                                        break;\n                                    case \"slight left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" lgrement  gauche\";\n                                        break;\n                                    case \"left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \"  gauche\";\n                                        break;\n                                    case \"sharp left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" compltement  gauche\";\n                                        break;\n                                    default:\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" ?\" + step.instruction.modifier + \"?\";\n                                        break;\n                                }\n                            }\n\n                            if (step.instruction.exit) {\n                                data.routeInstructions[data.routeInstructions.length - 1].instruction += `${step.instruction.exit}e sortie`;\n                            }\n\n                            if (step.attributes.name) {\n                                if (step.attributes.name.nom_1_droite || step.attributes.name.toponyme) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \" sur\";\n                                }\n\n                                if (step.attributes.name.nom_1_droite) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += ` ${step.attributes.name.nom_1_droite}`;\n                                }\n\n                                if (step.attributes.name.toponyme) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += ` ${step.attributes.name.toponyme}`;\n                                }\n                            }\n                        });\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", \"json\")));\n                    return;\n                }\n\n                // Si la rponse contenait une exception renvoye par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\")));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default RouteResponseFactory;\n","\n/**\n * Single Route Instruction object.\n *\n * @property {String} code - Instruction code :\n *\n * - \"F\" : Straight forward\n * - \"B\" : U-turn\n * - \"L\" : turn left\n * - \"R\" : turn right\n * - \"BL\" : turn left strongly\n * - \"BR\" : turn right strongly\n * - \"FL\" : turn lightly to the left\n * - \"FR\" : turn lightly to the right\n * - \"round_about_entry\" : round about entry\n * - \"round_about_exit\" : round about exit\n *\n * @property {String} instruction - Instruction text : translated code + street name\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the street.\n * @property {Float} distance - Length of the instruction. Expressed in km or m, depending on distanceUnit parameter.\n * @property {Float} duration - Instruction duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.Route.RouteInstruction\n */\nfunction RouteInstruction () {\n    if (!(this instanceof RouteInstruction)) {\n        throw new TypeError(\"RouteInstruction constructor cannot be called as a function.\");\n    }\n\n    this.duration = null;\n\n    this.distance = null;\n\n    this.code = null;\n\n    this.instruction = null;\n\n    this.geometry = null; // FIXME can be null if option 'geometryInInstructions' is false !\n}\n\nRouteInstruction.prototype = {\n\n    constructor : RouteInstruction\n\n};\n\nexport default RouteInstruction;\n","/**\n * Response object for {@link module:Services~route Gp.Services.route ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Gp.BBox} bbox - Bounding Box of the route. Given when provideBBox parameter is used in function call.\n * @property {Object} routeGeometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the route.\n * @property {Array.<Gp.Services.Route.RouteInstruction>} routeInstructions - Instructions of the route.\n * @property {String} totalDistance - Length of the route. If distanceUnit parameter was set to \"km\" (default), totalDistance is a string containing the total distance expressed in kilometers, followed by \" Km\" (e.g. : \"19.6 Km\"). If distanceUnit parameter was set to \"m\", totalDistance is a string containing the total distance expressed in meters (e.g. : \"19599.14\").\n * @property {Float} totalTime - Route duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.RouteResponse\n */\nfunction RouteResponse () {\n    if (!(this instanceof RouteResponse)) {\n        throw new TypeError(\"RouteResponse constructor cannot be called as a function.\");\n    }\n\n    this.totalTime = null;\n\n    this.totalDistance = null;\n\n    this.bbox = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.routeGeometry = null; // FIXME can be null if option 'geometryInInstructions' is true !\n\n    this.routeInstructions = [];\n}\n\nRouteResponse.prototype = {\n\n    constructor : RouteResponse\n\n};\n\nexport default RouteResponse;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport RouteRequestFactory from \"./Request/RouteRequestFactory\";\nimport RouteResponseFactory from \"./Response/RouteResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'itinraire du Goportail :\n *     envoi de la requte construite selon les paramtres en options,\n *     ventuellement parsing et analyse  de la rponse,\n *     retour d'une rponse en paramtre de la fonction onSuccess.\n *\n * @alias Gp.Services.Route\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @param {Object} options - options spcifiques au service (+ les options herites)\n *\n * @param {String} options.resource - La ressource utilise pour le calcul. Ce paramtre devrait tre obligatoire car il l'est dans l'appel au service. Mais il ne l'est pas pour des raisons de rtrocompatibilit.\n *\n * @param {String} options.outputFormat - Le format de la rponse du service itineraire : 'json' uniquement et par dfaut.\n *\n * @param {String} [options.routePreference = \"fastest\"] - Mode de calcul  utiliser :\n * - le plus rapide  fastest \n * - le plus court  shortest \n * Par dfaut :  fastest .\n *\n * @param {Object} options.startPoint - Point de dpart du calcul. Coordonnes exprimes en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.startPoint.x - Abcisse du point de dpart du calcul d'itinraire.\n * @param {Float} options.startPoint.y - Ordonne du point de dpart du calcul d'itinraire.\n *\n * @param {Object} options.endPoint - Point d'arrive du calcul. Coordonnes exprimes en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.endPoint.x - Abcisse du point d'arrive du calcul d'itinraire.\n * @param {Float} options.endPoint.y - Ordonne du point d'arrive du calcul d'itinraire.\n *\n * @param {Object[]} [options.viaPoints] - Liste de point ({x:Float,y:Float}) intermdaires que l'itinraire doit emprunter dans l'ordre du tableau.\n *      Coordonnes exprimes en longitudes, latitudes (EPSG:4326) :{x:float, y:float}\n *\n * @param {String} [options.graph = \"voiture\"] - Type de graphe utilis : \"Voiture\" ou \"Pieton\".\n *      Dtermine le profil de vitesses utilis pour le calcul ainsi que les tronons autoriss ou non.\n *      Par dfaut, c'est la valeur \"Voiture\" qui sera utilise.\n *\n * @param {String[]} [options.exclusions] - DEPRECATED: Critres d'exclusions  appliquer pour le calcul. (correspond au paramtre \"avoidFeature\" d'OpenLS)\n *      On prcise ici le type de tronons que l'on ne veut pas que l'itinraire emprunte\n *      (valeurs possibles :  toll  (viter les pages),  bridge ,  tunnel ).\n *      Ce paramtre est conserv pour une rtrocompatibilit de l'api. Le nouveau paramtre  utiliser est options.constraints\n *\n * @param {Object[]} [options.constraints] - Critres de contraintes  appliquer sur un itinraire. Les valeurs disponibles dpendent de la ressource utilise. Il est donc utile de regarder le getCapabilities.\n * @param {String} [options.constraints.constraintType] - Type de la contrainte. Gnralement \"banned\".\n * @param {String} [options.constraints.key] - Cl de la contrainte. Gnralement \"wayType\".\n * @param {String} [options.constraints.operator] - Oprateur de la contrainte. Gnralement \"=\".\n * @param {String} [options.constraints.value] - Valeur de la contrainte. Gnralement \"autoroute\".\n *\n * @param {Boolean} [options.geometryInInstructions = false] - Indique si la gomtrie de l'itinraire doit tre reprise morceau par morceau dans les instructions.\n *      (correspond au paramtre \"provideGeometry\" d'OpenLS) Par dfaut : false.\n *\n * @param {Boolean} [options.provideBbox = true] - Indique si les instructions doivent tre localises par une bbox dans la rponse.\n *      Par dfaut : true.\n *\n * @param {String} [options.distanceUnit = \"m\"] - Indique si la distance doit tre exprime en km ou m dans la rponse.\n *      Par dfaut : m.\n * @param {String} [options.timeUnit = \"second\"] - Indique si la dure doit tre exprime en seconde, minute ou heure dans la rponse. Il peut-tre formatt hh:mm::ss avec la valeur standard.\n *      Les valeurs possibles sont \"standard\", \"second\", \"minute\" ou \"hour\".\n *      Par dfaut : \"standard\".\n *\n * @param {String} [options.srs] - Systme de coordonnes dans lequel les paramtres gographiques en entre et la rponse du service sont exprims.\n *      Pas de valeur par dfaut. Si le serveur consult est celui du Goportail, la valeur par dfaut sera donc celle du service : 'EPSG:4326'.\n *\n * @param {String[]} [options.waysAttributes] - Nom des attributs des voies. Les valeurs disponibles dpendent de la ressource utilise. Il est donc utile de regarder le getCapabilities.\n *\n * @example\n *  var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'XHR',\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spcifique au service\n *      resource : 'bdtopo'\n *      outputFormat : 'json',\n *      startPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      endPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      provideBbox : true,\n *      exclusions : [\"Bridge\", \"Tunnel\", \"Toll\"],\n *      distanceUnit : \"km\",\n *      graph : \"Voiture\",\n *      geometryInInstructions : true,\n *      routePreference : \"fastest\"\n *  };\n *\n */\nfunction Route (options) {\n    if (!(this instanceof Route)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Route\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"Route\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Route\");\n    this.logger.trace(\"[Constructeur Route (options)]\");\n\n    if (!options.startPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.startPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.x\"));\n    }\n\n    if (options.startPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.y\"));\n    }\n\n    if (!options.endPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.endPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.x\"));\n    }\n\n    if (options.endPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.y\"));\n    }\n\n    // options par defaut\n\n    // on passe l'option outputFormat en minuscules afin d'viter des exceptions.\n    if (options.outputFormat && options.outputFormat !== \"json\") {\n        this.logger.warn(\"options.outputFormat could only be json\");\n    }\n    this.options.outputFormat = \"json\";\n\n    this.options.resource = options.resource || \"bdtopo-osrm\";\n    this.options.startPoint = options.startPoint;\n    this.options.endPoint = options.endPoint;\n    this.options.viaPoints = options.viaPoints || [];\n    this.options.routePreference = options.routePreference || \"fastest\";\n    /** Gestion des anciennes valeurs de graph */\n    if (options.graph) {\n        if (options.graph === \"Voiture\") {\n            this.options.graph = \"car\";\n        }\n        if (options.graph === \"Pieton\") {\n            this.options.graph = \"pedestrian\";\n        }\n    } else {\n        this.options.graph = \"car\";\n    }\n    this.options.constraints = [];\n    if (options.constraints) {\n        if (Array.isArray(options.constraints)) {\n            for (var k = 0; k < options.constraints.length; k++) {\n                this.options.constraints.push(options.constraints[k]);\n            }\n        } else {\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"constraints\"));\n        }\n    }\n\n    /** Gestion de l'ancien paramtre exclusion */\n    var constraintTunnel = {};\n    var constraintPont = {};\n    var constraintAutoroute = {};\n    if (options.exclusions) {\n        if (options.exclusions.length !== 0) {\n            this.logger.warn(\"options.exclusions is DEPRECATED !!\");\n            for (var c = 0; c < options.exclusions.length; c++) {\n                if (typeof options.exclusions[c] === \"string\") {\n                    options.exclusions[c] = options.exclusions[c].toLowerCase();\n                } else {\n                    // on ne cre pas une erreur pour rtro-compatibilit avec les anciennes versions\n                    continue;\n                }\n                if (options.exclusions[c] === \"toll\") {\n                    constraintAutoroute.constraintType = \"banned\";\n                    constraintAutoroute.key = \"wayType\";\n                    constraintAutoroute.operator = \"=\";\n                    constraintAutoroute.value = \"autoroute\";\n                    this.options.constraints.push(constraintAutoroute);\n                }\n                if (options.exclusions[c] === \"tunnel\") {\n                    constraintTunnel.constraintType = \"banned\";\n                    constraintTunnel.key = \"wayType\";\n                    constraintTunnel.operator = \"=\";\n                    constraintTunnel.value = \"tunnel\";\n                    this.options.constraints.push(constraintTunnel);\n                }\n                if (options.exclusions[c] === \"bridge\") {\n                    constraintPont.constraintType = \"banned\";\n                    constraintPont.key = \"wayType\";\n                    constraintPont.operator = \"=\";\n                    constraintPont.value = \"pont\";\n                    this.options.constraints.push(constraintPont);\n                }\n            }\n        }\n    }\n\n    this.options.geometryInInstructions = options.geometryInInstructions || false;\n    this.options.provideBbox = options.provideBbox || true;\n    this.options.distanceUnit = options.distanceUnit || \"m\";\n    this.options.timeUnit = options.timeUnit || \"second\";\n    this.options.expectedStartTime = null; // FIXME not yet implemented !\n    this.options.srs = options.srs || \"EPSG:4326\";\n    this.options.waysAttributes = options.waysAttributes || [];\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseigne, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var UrlByDefault = DefaultUrlService.Route.newUrl();\n\n        if (!UrlByDefault) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = UrlByDefault;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n}\n\n/**\n * @lends module:Route#\n */\nRoute.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nRoute.prototype.constructor = Route;\n\n/**\n * (overwrite)\n * Cration de la requte\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.buildRequest = function (error, success) {\n    var options = {\n        // spcifique au service\n        resource : this.options.resource,\n        startPoint : this.options.startPoint,\n        endPoint : this.options.endPoint,\n        viaPoints : this.options.viaPoints,\n        provideBbox : this.options.provideBbox,\n        constraints : this.options.constraints,\n        distanceUnit : this.options.distanceUnit,\n        timeUnit : this.options.timeUnit,\n        graph : this.options.graph,\n        geometryInInstructions : this.options.geometryInInstructions,\n        routePreference : this.options.routePreference,\n        srs : this.options.srs,\n        waysAttributes : this.options.waysAttributes\n    };\n\n    this.request = RouteRequestFactory.build(options);\n\n    // on teste si la requete a bien t construite !\n    if (!this.request) {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")));\n    } else {\n        success.call(this, this.request);\n    }\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexit du retour du service\n\n    if (this.response) {\n        var options = {\n            distanceUnit : this.options.distanceUnit,\n            timeUnit : this.options.timeUnit,\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this,\n            geometryInInstructions : this.options.geometryInInstructions\n        };\n\n        RouteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Route;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"point|circle|bbox\" }] */\n\n/**\n* Geoportal web services invocation namespace.\n*\n* @module Services\n* @alias Gp.Services\n*/\nimport Config from \"./Config/Config\";\nimport Alti from \"./Alti/Alti\";\nimport Geocode from \"./Geocode/Geocode\";\nimport ReverseGeocode from \"./Geocode/ReverseGeocode\";\nimport AutoComplete from \"./AutoComplete/AutoComplete\";\nimport Route from \"./Route/Route\";\nimport ProcessIsoCurve from \"./ProcessIsoCurve/ProcessIsoCurve\";\n\nvar Services = {\n    /**\n     * Access to Geoportal resources metadata availables with one ore several keys\n     *\n     * @method getConfig\n     * @param {Object} options - Options for function call.\n     * @param {String} [options.apiKey] - Access key(s) (\",\" as separator, no spaces) to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}\n     * @param {String} [options.customConfigFile] - path to a local config file. Overload the apiKey parameter\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GetConfigResponse} object as a parameter except if \"rawResponse\" parameter is set to true : a String will be returned.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     */\n    getConfig : function (options) {\n        var configService = new Config(options);\n        configService.call();\n    },\n    /**\n     * Getting elevations in or along of one or several points on french territories using the [elevation services of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/alti.html}.<br/>\n     * Two use cases are availables :<br/>\n     * 1. getting elevations of the given points : don't use the options.sampling parameter ;<br/>\n     * 2. getting a regular set of elevations along the given points : use the options.sampling parameter.\n     *\n     * @method getAltitude\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {Array.<Object>} options.positions - Array of positions ({lon:float, lat:float}) expressed in CRS:84 coordinates system, where to get elevations. 50 positions maximum may be given. 2 positions minimum are required if you use the options.sampling parameter.\n     * @param {Number} [options.sampling] - Number of points to use (between 2 and 5000) in order to compute an elevation path. The points given with the options.positions parameter are used to fix the planimetric path along which the elevations will be computed.<br/>\n     * If not used, only elevations of these positions will be returned.\n     * @param {Boolean} [options.zonly=false] - Set this parameter to true if you only want to have elevations returned without corresponding coordinates.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AltiResponse} object as a parameter, except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/altimetrie/1.0/calcul/alti/rest/elevation.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     * @param {String} [options.api='REST'] - What API to use for interacting with underlying web service : 'REST'. Only use if you know what you are doing.\n     * @param {String} [options.outputFormat='xml'] - Output format for underlying web service response : 'xml' or 'json'. Only use if you know what you are doing.\n     */\n    getAltitude : function (options) {\n        var altiService = new Alti(options);\n        altiService.call();\n    },\n    /**\n     * Getting positon of a geographic identifier (places names, address, cadastral parcel, other...) using the [geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage.html}.\n     *\n     * @example\n     * Gp.Services.geocode ({\n     *     apiKey : \"carte\",\n     *     location : \"73 avenue de Paris, Saint-Mand\",\n     *     // traitement des resultats\n     *     onSuccess  : function (result) {\n     *         console.log(\"found (x:\"+result.position.x+\", y:\"+result.position.y+\")\") ;\n     *     }\n     * }) ;\n     *\n     *\n     * @method geocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.index=\"StreetAddress\"] - Geographical identifier type to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search, \"location\" for a multi-index search on \"StreetAddress\" and \"PositionOfInterest\". Default is \"StreetAddress\".\n     * @param {String} options.query - Geographic identifier to locate.\n     * @param {Object} [options.filters] - Additional filters to apply to search. The following properties may be given.\n     *      @param {String} [options.filters.[prop]] - Additionnal properties to filter search. Properties depends on options.index, and values type should be \"String\".\n     *      <br/><br/>\n     *      Properties availables for address search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"city\".\n     *      <br/><br/>\n     *      Properties availables for place names search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"type\".\n     *      <br/><br/>\n     *      Properties availables for cadastral parcels search :<br/>\n     *      \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n     * @param {Number} [options.maximumResponses=20] - Maximum number of responses. Default underlying service value applies (20) if not provided.\n     * @param {Boolean} [options.returnTrueGeometry=false] - Set this parameter to true if you wish to have the true geometrie returned.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://data.geopf.fr/geocodage/search] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    geocode : function (options) {\n        var geocodeService = new Geocode(options);\n        geocodeService.call();\n    },\n    /**\n     * Retrieving geographical identifiers (place names, address, cadastral parcels, ...) near a given position, using the [reverse geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage-inverse.html}.\n     *\n     * @method reverseGeocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.index=\"StreetAddress\"] - Geographical identifier type to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search, \"location\" for a multi-index search on \"StreetAddress\" and \"PositionOfInterest\". Default is \"StreetAddress\".\n     * @param {Object} options.position - Reference position where to search geographical identifiers.\n     *      @param {Float} options.position.lon - Longitude\n     *      @param {Float} options.position.lat - Latitude\n     * @param {Object} [options.filters] - Additional filters to apply to search. The following properties may be given.\n     *      @param {String} [options.filters.[prop]] - Additionnal properties to filter search. Properties depends on options.index, and values type should be \"String\".\n     *      <br/><br/>\n     *      Properties availables for address search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"city\".\n     *      <br/><br/>\n     *      Properties availables for place names search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"type\".\n     *      <br/><br/>\n     *      Properties availables for cadastral parcels search :<br/>\n     *      \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n     * @param {Object} [options.searchGeometry] - Location where to perform the search.\n     *      @param {String} options.searchGeometry.type - Geometry type (Point|Circle|Linestring|Polygon)\n     *      @param {Array.<Float>|Array.Array.<Float>} options.searchGeometry.coordinates - Coordinates\n     *      @param {Float} [options.searchGeometry.radius] - Radius (only for type 'Circle')\n     * @param {Number} [options.maximumResponses=20] - Maximum number of responses. Default underlying service value applies (20) if not provided.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/geocodage/reverse] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    reverseGeocode : function (options) {\n        var reverseGeocodeService = new ReverseGeocode(options);\n        reverseGeocodeService.call();\n    },\n    /**\n     * Getting suggestions of probable places names or address based on uncomplete texts, using the [autocompletion service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/autocompletion.html}\n     *\n     * @method autoComplete\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} options.text - Text input to complete.\n     * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Suggestion types to provide : address (\"StreetAddress\") and/or place name (\"PositionOfInterest\").\n     * @param {Array.<String>} [options.filterOptions.territory] - Places where to limit the search of suggestions : \"METROPOLE\" (Corsica and metropolitan France), \"DOMTOM\" (French overseas departments and territories), or an INSEE code of a department. No limitation by default. For instance : ['METROPOLE', '31']\n     * @param {Number} [options.maximumResponses = 10] - Maximum number of responses.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AutoCompleteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/geocodage/completion] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    autoComplete : function (options) {\n        var autoCompleteService = new AutoComplete(options);\n        autoCompleteService.call();\n    },\n    /**\n     * Getting a route from one point to another using the [route service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/itineraires.html}.\n     *\n     * @method route\n     * @param {Object} options - Options for function call.\n     * @param {String} options.resource - Resource used to compute the route. Available values are in the GetCapabilities.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.routePreference = \"fastest\"] - Indicates the way to compute the route : \"fastest\" (time optimisation) or \"shortest\" (distance optimisation). Available values are in the GetCapabilities.\n     * @param {Gp.Point} options.startPoint - Start point of the route. Expressed in CRS:84 coordinates system (startPoint.x corresponds to longitude, startPoint.y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {Gp.Point} options.endPoint - End point of the route. Expressed in CRS:84 coordinates system (endPoint.x corresponds to longitude, endPoint.y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {Array.<Gp.Point>} [options.viaPoints] - Ordered via Points of the route. Expressed in CRS:84 coordinates system (viaPoints[i].x corresponds to longitude, viaPoints[i].y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the route : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads the route may use and the average speed. Available bbox are in the GetCapabilities.\n     * @param {Array.<String>} [options.exclusions] - DEPRECATED: use options.constraints. Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Boolean} [options.geometryInInstructions = false] - Indicates if route geometry has to be also returned with route instructions.\n     * @param {Boolean} [options.provideBoundingBox = true] - Indicates if route instructions has to be localised with a BBOX in the response.\n     * @param {String} [options.distanceUnit = \"m\"] - The unit used to provide distances in the response (\"meter\" or \"kilometer\").\n     * @param {String} [options.timeUnit = \"second\"] - The unit used to provide duration in the response (\"standard\", \"second\", \"minute\", \"hour\").\n     * @param {Array.<String>} [options.waysAttributes] - Way Attributes to add in the response. Available values are in the GetCapabilities.\n     * @param {Array.<Object>} [options.constraints] - Constraints used ({'constraintType':'banned','key':'ways_type','operator':'=','value':'autoroute'}). Available values are in the GetCapabilities.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.RouteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\" or \"xml\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/navigation/itineraire] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    route : function (options) {\n        var routeService = new Route(options);\n        routeService.call();\n    },\n    /**\n     * Computing a set of places (curve) reachable from a given point (or from where to start to reach a given point) within a time or distance constraint using the [isochrone service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/isochrones.html}.\n     *\n     * @method isoCurve\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} options.resource - Resource used to compute the route. Available values are in the GetCapabilities.\n     * @param {Gp.Point} options.position - Start or Arrival (options.reverse===true) Point for the computing. Expressed in CRS:84 coordinates system (position.x corresponds to longitude, position.y corresponds to latitude).\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the isoCurve : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads to use and the average speed. Available values are in the GetCapabilities.\n     * @param {Array.<String>} [options.exclusions] - DEPRECATED: use options.constraints. Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Array.<Object>} [options.constraints] - Constraints used ({'constraintType':'banned','key':'ways_type','operator':'=','value':'autoroute'}). Available values are in the GetCapabilities.\n     * @param {String} [options.method = \"time\"] - Computing method to use : \"time\" (using a duration as a constraint) or \"distance\" (using a distance as a constraint). Available values are in the GetCapabilities.\n     * @param {Float} options.time - Maximum duration (expressed in seconds) to use when options.method is set to \"time\".\n     * @param {Float} options.distance - Maximum distance (expressed in meters) to use when options.method is set to \"distance\".\n     * @param {Boolean} [options.reverse = false] - Set this parameter to true if you want options.position to be the destination (instead of departure) for the computing.\n     * @param {String} [options.distanceUnit = \"km\"] - The unit used to provide distances in the response (\"m\" or \"km\").\n     * @param {String} [options.timeUnit = \"second\"] - The unit used to provide duration in the response (\"standard\", \"second\", \"minute\", \"hour\").\n     * @param {Boolean} [options.smoothing = false] - DEPRECATED: Set this parameter to true if you want the resulting geometry to be smoothed.\n     * @param {Boolean} [options.holes = false] - DEPRECATED: Set this parameter to true if you want the resulting geometry (polygon) to have holes if pertinent.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.IsoCurveResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/navigation/isochrone] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    isoCurve : function (options) {\n        var processIsoCurveService = new ProcessIsoCurve(options);\n        processIsoCurveService.call();\n    }\n};\n\n/**\n * Point object.\n *\n * @namespace\n * @alias Gp.Point\n *\n * @property {Float} x - Point abscissa\n * @property {Float} y - Point ordinate\n */\nvar point = {};\n\n/**\n * Circle object.\n *\n * @namespace\n * @alias Gp.Circle\n *\n * @property {Float} x - Circle center abscissa.\n * @property {Float} y - Circle center ordinate.\n * @property {Float} radius - Circle radius.\n */\nvar circle = {};\n\n/**\n * Bounding box object, expressed with four coordinates.\n *\n * @namespace\n * @alias Gp.BBox\n *\n * @property {Float} left - minimum abscissa\n * @property {Float} right - maximum abscissa\n * @property {Float} bottom - minimum ordinate\n * @property {Float} top - maximum ordinate\n */\nvar bbox = {};\n\nexport default Services;\n","/**\n * Classe utilitaire\n *\n * @module Helper\n * @alias Gp.Helper\n */\nvar Helper = {\n\n    /**\n     * concatenation des parametres key/value dans les urls\n     *\n     * @method normalyzeParameters\n     * @static\n     * @param {Object} params - tableau de clef/valeur\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeParameters ({\n     *         key1:value1,\n     *         key2:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne les paramtres concatns\n     */\n    normalyzeParameters : function (params) {\n        var myParams = null;\n\n        if (params) {\n            var tabParams = [];\n            for (var key in params) {\n                if (params.hasOwnProperty(key)) {\n                    var value = params[key];\n                    if (!value) {\n                        value = \"\";\n                    }\n                    tabParams.push(key + \"=\" + value);\n                }\n            }\n\n            myParams = tabParams.join(\"&\");\n        }\n\n        return myParams;\n    },\n\n    /**\n     * Concatnation et encodage des urls.\n     *\n     * @method normalyzeUrl\n     * @static\n     * @param {String} url - url\n     * @param {Object|String} params - tableau de clef/valeur ou string\n     * @param {Boolean} encode - true|false, false par defaut\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeUrl (url, {\n     *         key1:value1,\n     *         key2=:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"url?key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne une url normalise\n     */\n    normalyzeUrl : function (url, params, encode) {\n        var myUrl = url;\n\n        if (url) {\n            if (url.split(\"?\").length - 1 >= 2) {\n                // S'il y a plusieurs \"?\" dans l'URL, on garde le premier et on remplace les autres par des &\n                var firstOccuranceIndex = url.search(/\\?/) + 1;\n                myUrl = url.substring(0, firstOccuranceIndex) + url.slice(firstOccuranceIndex).replace(/\\?/g, \"&\");\n            }\n\n            var k = url.indexOf(\"?\");\n            if (k === -1) { // pas de ? et KVP\n                myUrl += \"?\";\n            }\n\n            if (k !== -1 && k !== url.length - 1) { // KVP\n                myUrl += \"&\";\n            }\n        }\n\n        if (params) {\n            if (typeof params === \"string\") {\n                params = params.replace(\"?\", \"\");\n                myUrl += params;\n            } else {\n                myUrl += this.normalyzeParameters(params);\n            }\n        }\n\n        if (encode) {\n            // FIXME bonne ide ?\n            myUrl = encodeURIComponent(myUrl);\n        }\n\n        return myUrl;\n    },\n\n    /**\n     * Indentation d'une chaine\n     *\n     * @method indent\n     * @static\n     * @param {Number} n - nombre de tabulation\n     * @param {String} msg - chaine\n     *\n     * @example\n     * Gp.Utils.Helper.indent (2, \"message  indenter\")\n     * // out\n     * // ........message  indenter\n     *\n     * @returns {String} retourne une chaine indente\n     */\n    indent : function (n, msg) {\n        var num = n || 0;\n        return new Array(num + 1).join(\"\\t\") + msg;\n    }\n};\n\nexport default Helper;\n","import * as Log from \"loglevel\";\n\nvar LoggerByDefault = {\n    /**\n     * logger statique\n     *\n     * @static\n     * @param {String} name - nom du logger\n     * @returns {Object} retourne un logger\n     */\n    getLogger : function (name) {\n        // Substitute global constants configured at compile time\n        // cf. webpack.config.js\n        // on dfinit process si non dfini dans l'environnement\n        // eslint-disable-next-line no-use-before-define\n        if (typeof process === \"undefined\") {\n            var process = {};\n            process.env = {\n                VERBOSE : false\n            };\n        }\n        (process.env.VERBOSE) ? Log.enableAll() : Log.disableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    }\n};\n\nexport default LoggerByDefault;\n","/**\n * Classe de gestion des erreurs qui permer d'associer un message d'erreur  l'exception lance.\n *\n * @example\n * MessagesResources.getMessage(\"ERROR_PARAM_MISSING\", \"x\", \"y\", \"z\")));\n * // --> output : Parameter(s) 'x - y - z' missing\n *\n * @module MessagesResources\n * @alias Gp.Utils.MessagesResources\n * @private\n */\nvar MessagesResources = {\n\n    // Paramtres\n    PARAM_MISSING : \"Parameter(s) '%var%' missing\",\n    PARAM_EMPTY : \"Parameter(s) '%var%' empty\",\n    PARAM_TYPE : \"Wrong type(s) for parameter(s) '%var%'\",\n    PARAM_FORMAT : \"Parameter(s) '%var%' not correctly formatted\",\n    PARAM_NOT_SUPPORT : \"Value(s) for parameter(s) '%var%' not supported\",\n    PARAM_NOT_SUPPORT_NODEJS : \"Value(s) for parameter(s) '%var%' not supported to NodeJS\",\n    PARAM_UNKNOWN : \"Value(s) for parameter(s) '%var%' unknown\",\n\n    // Services\n    // Requte\n    SERVICE_REQUEST_BUILD : \"An error occurred during the request building of the service\",\n    SERVICE_REQUEST_EMPTY : \"The request sent to the service is empty\",\n\n    // Rponse\n    SERVICE_RESPONSE_EXCEPTION : \"The service returned an exception : '%var%'\",\n    SERVICE_RESPONSE_EXCEPTION_2 : \"The service returned an exception\",\n    SERVICE_RESPONSE_ANALYSE : \"An error occurred while parsing the response '%var%' of the service\",\n    SERVICE_RESPONSE_ANALYSE_2 : \"An unknown error occurred while parsing the response\",\n    SERVICE_RESPONSE_EMPTY : \"The response of the service is empty\",\n    SERVICE_RESPONSE_EMPTY_2 : \"The response from the service could not be analyzed or is empty\",\n    SERVICE_RESPONSE_FORMAT : \"The format of the service response is not supported (handled format(s) : '%var%')\",\n    SERVICE_RESPONSE_FORMAT_2 : \"The format of the service response is not supported\",\n    SERVICE_RESPONSE_FORMAT_3 : \"No suggestion matching the search\",\n\n    // Classes\n    CLASS_CONSTRUCTOR : \"'%var%' constructor cannot be called as a function.\",\n\n    /**\n     * Fonction qui va retourner le message d'erreur associ  la cl donne\n     *\n     * @method getMessage\n     * @param {String} clef - Clef de l'erreur (ex : ERROR_PARAM)\n     * @param {String[]} parametres - Paramtres/variables concerns par le message d'erreur associ  la clef donne\n     * @return {String} message - String contenant le message de l'exception\n     */\n    getMessage : function (clef, parametres) {\n        // param de la fonction uniquement pour la documentation...\n\n        if (Object.keys(arguments).length === 0) {\n            return \"Message indefined !\";\n        }\n\n        var params = Array.prototype.slice.call(arguments);\n        var key = params.shift();\n        var args = params;\n\n        var message = this[key];\n\n        try {\n            if (Array.isArray(args) && args.length > 0) {\n                message = message.replace(\"%var%\", args.join(\" - \"));\n            } else {\n                message = message.replace(\"%var%\", \"%var% (not specified)\");\n            }\n        } catch (e) {\n            // error de string.replace()\n\n        }\n\n        return message;\n    }\n};\n\nexport default MessagesResources;\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar globalObject = getGlobal();\n\nmodule.exports = exports = globalObject.fetch;\n\n// Needed for TypeScript and Webpack.\nif (globalObject.fetch) {\n\texports.default = globalObject.fetch.bind(globalObject);\n}\n\nexports.Headers = globalObject.Headers;\nexports.Request = globalObject.Request;\nexports.Response = globalObject.Response;\n","module.exports = ol.Feature;","module.exports = ol.Observable;","module.exports = ol.Overlay;","module.exports = ol.control.Control;","module.exports = ol.extent;","module.exports = ol.format.GeoJSON;","module.exports = ol.interaction;","module.exports = ol.layer.Vector;","module.exports = ol.proj;","module.exports = ol.source.Vector;","module.exports = ol.style;","module.exports = ol.style.Circle;","module.exports = ol.style.Fill;","module.exports = ol.style.Icon;","module.exports = ol.style.Stroke;","module.exports = ol.style.Style;","module.exports = ol.style.Text;","module.exports = undefined;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = ol.geom;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.sphere;","var MeasureToolBoxDOM = {\n\n    _toolboxId : \"GPtoolbox-measure-main\",\n    _buttonId : \"GPtoolbox-measure-button\",\n    _widgetId : \"GPtoolbox-measure-widget\",\n\n    /**\n    * get toolBox ID\n    * @param {Number} uid - uid\n    * @returns {String} id selector unique\n    */\n    getToolBoxID : function (uid) {\n        return (uid) ? this._toolboxId + \"-\" + uid : this._toolboxId;\n    },\n\n    /**\n    * get button ID\n    * @param {Number} uid - uid\n    * @returns {String} id selector unique\n    */\n    getButtonID : function (uid) {\n        return (uid) ? this._buttonId + \"-\" + uid : this._buttonId;\n    },\n\n    /**\n    * get toolBox Container for widget\n    * @param {Number} uid - uid\n    * @returns {String} id selector unique\n    */\n    getWidgetID : function (uid) {\n        return (uid) ? this._widgetId + \"-\" + uid : this._widgetId;\n    },\n\n    /**\n     * Main container (DOM)\n     * @param {Number} uid - uid\n     * @returns {DOMElement} DOM element\n     */\n    _createToolBoxContainerElement : function (uid) {\n        // <div id=\"GPtoolbox-measure-main\">\n        //   <button id=\"GPtoolbox-measure-button\">&#9776;</button>\n        //   <div id=\"GPtoolbox-measure-widget\">\n        //     <!-- HERE : widgets tools measures -->\n        //   </div>\n        // </div>\n        var container = document.createElement(\"div\");\n        container.id = this.getToolBoxID(uid);\n        container.className = \"GPshowAdvancedToolPicto\";\n\n        var button = document.createElement(\"button\");\n        button.id = this.getButtonID(uid);\n        button.className = \"GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n\n        var self = this;\n        button.addEventListener(\"click\", function (e) {\n            var status = (e.target.ariaPressed === \"true\");\n            e.target.setAttribute(\"aria-pressed\", !status);\n            this.blur(); // permet de perdre le focus !\n            var widget = document.getElementById(self.getWidgetID(uid));\n            if (widget.style.display === \"block\") {\n                widget.style.display = \"none\";\n            } else {\n                widget.style.display = \"block\";\n            }\n        });\n        container.appendChild(button);\n\n        var widget = document.createElement(\"div\");\n        widget.id = this.getWidgetID(uid);\n        widget.addEventListener(\"click\", function () {\n\n            /*\n                e.preventDefault();\n\n                // FIXME desactiver tous les outils sur\n                // l'ouverture/fermeture de la toolbox ?\n\n                var current = e.target.parentNode.getAttribute(\"for\");\n                var widgets = this.querySelectorAll(\"div > input\");\n                for (var i = 0; i < widgets.length; i++) {\n                    var id = widgets[i].id;\n\n                    if (document.getElementById(id) &&\n                        document.getElementById(id).checked &&\n                        document.querySelector(\"#\" + id + \" + label\")) {\n                            document.querySelector(\"#\" + id + \" + label\").click();\n                            // document.getElementById(id).checked = true;\n                    }\n\n                    if (current === id && widgets[i].checked) {\n                        widgets[i].checked = false;\n                    } else if (current === id && !widgets[i].checked) {\n                        widgets[i].checked = true;\n                    }\n                }\n            */\n\n        }, false);\n\n        container.appendChild(widget);\n\n        return container;\n    }\n};\n\nexport default MeasureToolBoxDOM;\n","// import CSS\nimport \"../../CSS/Controls/ToolBoxMeasure/GPFtoolBoxMeasure.css\";\n// import \"../../CSS/Controls/ToolBoxMeasure/GPFtoolBoxMeasureStyle.css\";\n// import local\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Utils from \"../../Utils/Helper\";\nimport ID from \"../../Utils/SelectorID\";\n// DOM\nimport MeasureToolBoxDOM from \"./MeasureToolBoxDOM\";\n\nvar logger = Logger.getLogger(\"toolbox\");\n\n/**\n * @type {ol.control.MeasureToolBox}\n * MeasureToolBox - Boite  outils (ToolBox) pour les outils de mesures.\n * - distance\n * - aire\n * - azimut\n */\nvar MeasureToolBox = {\n\n    /**\n     * liste des uid/map (pour chaque toolbox)\n     * { map : uid }\n     * Ex. { \"map1\" : 465456456486845 }\n     */\n    _toolbox : {},\n\n    /**\n     * Ajout d'un controle dans la ToolBox.\n     * Creation de la toolbox si besoin...\n     *\n     * @param {ol.Map} map - map\n     * @param {ol.control.Control} ctrl - objet  ajouter\n     */\n    add : function (map, ctrl) {\n        logger.trace(\"ToolBox.add()\", ctrl);\n\n        if (!map) {\n            logger.trace(\"map doesn't exist !?\");\n            return;\n        }\n\n        // contexte d'execution\n        var context = typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : null;\n        if (context) {\n            // Pour info\n            // l'objet ToolBox devrait tre partag avec les outils de mesures...,\n            // mais, ce n'est pas le cas pour le mode modules cad un module par extension.\n            // c'est pourquoi, on l'enregistre dans le contexte, qui lui est partag (ex. window)\n            this._toolbox = context.gpShareMeasureToolBox || {};\n        }\n\n        var mapContainer = map.getTargetElement();\n        var mapDocument = mapContainer.ownerDocument;\n        var mapId = mapContainer.id;\n\n        if (!this._toolbox || Object.keys(this._toolbox).length === 0) {\n            this._toolbox = {};\n            this._toolbox[mapId] = ID.generate();\n        } else {\n            if (!this._toolbox[mapId]) {\n                this._toolbox[mapId] = ID.generate();\n            }\n        }\n\n        var uid = this._toolbox[mapId];\n        if (!mapDocument.getElementById(this.getToolBoxID(uid))) {\n            logger.trace(\"create toolbox !\");\n            // creation et ajout de la toolbox sur la map\n            var toolboxContainer = this._createToolBoxContainerElement(uid);\n            toolboxContainer.style.pointerEvents = \"auto\"; // ajout pour ol6\n            var overlaysContainer = mapContainer.getElementsByClassName(\"ol-overlaycontainer-stopevent\");\n            overlaysContainer[0].appendChild(toolboxContainer);\n            // mapContainer.appendChild(toolboxContainer);\n        }\n\n        // ajout du widget dans la toolbox\n        var widgetContainer = mapDocument.getElementById(this.getWidgetID(uid));\n        ctrl.setTarget(widgetContainer);\n        if (context) {\n            // Pour info\n            // on partage (enregistre) l'objet ToolBox dans le contexte d'execution !\n            context.gpShareMeasureToolBox = this._toolbox;\n        }\n        logger.trace(\"add control to toolbox !\");\n    }\n};\n\nUtils.assign(MeasureToolBox, MeasureToolBoxDOM);\n\nexport default MeasureToolBox;\n","// import OpenLayers\nimport Overlay from \"ol/Overlay\";\nimport { Draw as DrawInteraction } from \"ol/interaction\";\nimport {\n    Fill,\n    Stroke,\n    Style,\n    Circle\n} from \"ol/style\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\n// import local\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Interactions from \"../Utils/Interactions\";\n// import local with ol dependencies\nimport LayerSwitcher from \"../LayerSwitcher/LayerSwitcher\";\n\n// Derived from OpenLayers measure example\n// http://openlayers.org/en/latest/examples/measure.html\n\nvar logger = Logger.getLogger(\"measures\");\n\n/**\n * @type {ol.control.Measures}\n * @abstract\n * Measures Tools :\n * - length\n * - aera\n * - azimut\n */\nvar Measures = {\n\n    // ****************************************************************** //\n    // > Default Styles\n    // ****************************************************************** //\n\n    /*\n     * Pointer\n     */\n    DEFAULT_POINTER_STYLE : new Circle({\n        radius : 5,\n        stroke : new Stroke({\n            color : \"#002A50\",\n            width : 2\n        }),\n        fill : new Fill({\n            color : \"rgba(255, 155, 0, 0.7)\"\n        })\n    }),\n\n    /*\n     * Measures style line\n     */\n    DEFAULT_DRAW_START_STYLE : new Style({\n        fill : new Fill({\n            color : \"rgba(0, 183, 152, 0.2)\"\n        }),\n        stroke : new Stroke({\n            color : \"#002A50\",\n            lineDash : [10, 10],\n            width : 2\n        })\n    }),\n\n    /*\n     * Measures final style line\n     */\n    DEFAULT_DRAW_FINISH_STYLE : new Style({\n        fill : new Fill({\n            color : \"rgba(0, 183, 152, 0.3)\"\n        }),\n        stroke : new Stroke({\n            color : \"#002A50\",\n            width : 3\n        })\n    }),\n\n    // ****************************************************************** //\n    // > ToolBox : these tools work together\n    // ****************************************************************** //\n    // sample :\n    // tools[name_control][0].(active|instance|map)\n    // tools : {\n    //      MeasureLength : [\n    //          { active : true, instance : [Object MeasureLength], map : \"map1\" },\n    //          { active : true, instance : [Object MeasureLength], map : \"map2\" }\n    //      ],\n    //      MeasureArea : [],\n    //      MeasureAzimuth : []\n    // }\n    tools : {\n        MeasureLength : [],\n        MeasureArea : [],\n        MeasureAzimuth : []\n    },\n\n    // ****************************************************************** //\n    // > Variables\n    // ****************************************************************** //\n\n    /**\n     * Global measure draw interaction\n     * @type {ol.interaction.Draw}\n     */\n    measureDraw : null,\n\n    /**\n     * Global vector source for measure\n     * @type {ol.source.Vector}\n     */\n    measureSource : null,\n\n    /**\n     * Global vector layer for measure\n     * @type {ol.layer.Vector}\n     */\n    measureVector : null,\n\n    /**\n     * Currently drawn feature.\n     * @type {ol.Feature}\n     */\n    sketch : null,\n\n    /**\n     * The measure tooltip element.\n     * @type {Element}\n     */\n    measureTooltipElement : null,\n\n    /**\n     * Overlay to show the measurement.\n     * @type {ol.Overlay}\n     */\n    measureTooltip : null,\n\n    /**\n     * TODO The help tooltip element.\n     * @type {Element}\n     */\n    helpTooltipElement : null,\n\n    /**\n     * TODO Overlay to show the help.\n     * @type {ol.Overlay}\n     */\n    helpTooltip : null,\n\n    // ****************************************************************** //\n    // > Methods Public\n    // ****************************************************************** //\n\n    /** Desactived Tool Measure */\n    clean : function () {\n        var _class = this.CLASSNAME;\n\n        logger.trace(\"[\" + _class + \"] deactived tool !\");\n        // sur la desactivation de l'outil de mesure\n        // on fait un nettoyage des ressources\n        // ainsi que le DOM\n        this.clearMeasure();\n        this.clearMeasureToolTip();\n        this.removeMeasureEvents();\n        this._pictoContainer.setAttribute(\"aria-pressed\", false);\n    },\n\n    // ****************************************************************** //\n    // > Methods Events\n    // ****************************************************************** //\n\n    /**\n     * Handle pointer move.\n     *\n     * @param {ol.MapBrowserEvent} e - The event.\n     */\n    onPointerMoveHandler : function (e) {\n        if (e.dragging) {\n            return;\n        }\n\n        /** @type {ol.Coordinate|undefined} */\n        var tooltipCoord = e.coordinate;\n\n        if (this.sketch) {\n            var output;\n            var geom = (this.sketch.getGeometry());\n            output = this.format((geom));\n            if (geom.getType() === \"LineString\") {\n                tooltipCoord = geom.getLastCoordinate();\n            } else if (geom.getType() === \"Polygon\") {\n                tooltipCoord = geom.getInteriorPoint().getCoordinates();\n            } else {\n                return;\n            }\n            this.measureTooltipElement.innerHTML = output;\n            this.measureTooltip.setPosition(tooltipCoord);\n        }\n    },\n\n    /**\n     * Main program !\n     * This method is called by event 'click' on control picto\n     *\n     * @param {Object} e - HTMLElement\n     * @param {String} type - LineString or Polygon\n     * @private\n     */\n    onShowMeasureClick : function (e, type) {\n        var map = this.getMap();\n        var currentMapId = map.getTargetElement().id;\n\n        // contexte d'execution\n        var context = typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : null;\n        if (context) {\n            // Pour info\n            // les objets de mesures ont du code partag\n            // (afin de gerer les interactions entre eux).\n            // Dans un mode \"modules\", on partage cet objet (this.tools) via le contexte\n            // d'execution (ex. avec window)\n            this.tools = context.gpShareMeasures || {};\n        }\n\n        // desactivation des controles de mesures sur la carte courrante\n        var mySelf = this.CLASSNAME; // this.constructor.name : pas possible en mode minifi/manglifi !\n        for (var className in this.tools) {\n            if (this.tools.hasOwnProperty(className)) {\n                var measures = this.tools[className];\n                for (var i = 0; i < measures.length; i++) {\n                    var o = measures[i];\n                    if (o && o.active && className !== mySelf && o.map === currentMapId) {\n                        o.active = false;\n                        if (o.instance !== null) { // au cas o le controle a t supprim !\n                            o.instance.clean();\n                        }\n                    }\n                }\n            }\n        }\n\n        // desactivation des autres interactions parasites\n        Interactions.unset(map, {\n            current : \"Measures\"\n        });\n\n        var opened = this._pictoContainer.ariaPressed;\n        if (opened === \"true\") {\n            this.addMeasureEvents();\n            this.initMeasureInteraction();\n            this.addMeasureInteraction(type);\n            for (var j = 0; j < this.tools[mySelf].length; j++) {\n                if (this.tools[mySelf][j].map === currentMapId) {\n                    this.tools[mySelf][j].active = true;\n                }\n            }\n        } else {\n            this.clearMeasure();\n            this.clearMeasureToolTip();\n            this.removeMeasureEvents();\n            for (var k = 0; k < this.tools[mySelf].length; k++) {\n                if (this.tools[mySelf][k].map === currentMapId) {\n                    this.tools[mySelf][k].active = false;\n                }\n            }\n        }\n    },\n\n    // ****************************************************************** //\n    // > Methods not Public\n    // ****************************************************************** //\n\n    /**\n     * Clear all dom tooltip of length, area or azimut object.\n     */\n    clearMeasureToolTip : function () {\n        var map = this.getMap();\n        if (!map) {\n            return;\n        }\n\n        var mapContainer = map.getTargetElement();\n        // au cas o il y'aurait plusieurs container de carte !\n        var overlays = mapContainer.getElementsByClassName(\"ol-overlaycontainer\");\n        for (var k = 0; k < overlays.length; k++) {\n            var nodes = overlays[k];\n            var len = nodes.children.length;\n            var nodesToRemove = [];\n            for (var i = 0; i < len; i++) {\n                var node = nodes.children[i];\n                if (node.children.length !== 0) {\n                    var child = node.children[0];\n                    if (child.className === \"GPmeasureTooltip GPmeasureTooltip-static\" ||\n                        child.className === \"GPmeasureTooltip GPmeasureTooltip-measure\") {\n                        nodesToRemove.push(node);\n                    }\n                }\n            }\n            for (var j = 0; j < nodesToRemove.length; j++) {\n                nodes.removeChild(nodesToRemove[j]);\n            }\n        }\n    },\n\n    /**\n     * Clear all length, area or azimut object.\n     */\n    clearMeasure : function () {\n        var map = this.getMap();\n\n        // FIXME !?\n        // if (this.measureTooltip) {\n        //     map.removeOverlay(this.measureTooltip);\n        //     this.measureTooltip = null;\n        // }\n\n        if (this.measureVector) {\n            map.removeLayer(this.measureVector);\n            this.measureVector = null;\n        }\n\n        if (this.measureDraw) {\n            map.removeInteraction(this.measureDraw);\n            this.measureDraw = null;\n        }\n    },\n\n    /**\n     * Creates a new measure tooltip\n     * FIXME bug d'affichage de la tooltip de saisie en cours si on ne termine pas\n     * la saisie  !?\n     *\n     * @param {ol.Map} map - The Map.\n     */\n    createMeasureTooltip : function (map) {\n        if (this.measureTooltipElement) {\n            this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement);\n        }\n\n        this.measureTooltipElement = document.createElement(\"div\");\n        this.measureTooltipElement.className = \"GPmeasureTooltip GPmeasureTooltip-measure\";\n\n        this.measureTooltip = new Overlay({\n            element : this.measureTooltipElement,\n            stopEvent : false,\n            offset : [0, -15],\n            positioning : \"bottom-center\"\n        });\n\n        map.addOverlay(this.measureTooltip);\n    },\n\n    /**\n     * TODO evolution\n     * Creates a new help tooltip\n     *\n     * @param {ol.Map} map - The Map.\n     */\n    createHelpTooltip : function (map) {\n        if (this.helpTooltipElement) {\n            this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement);\n        }\n\n        this.helpTooltipElement = document.createElement(\"div\");\n        this.helpTooltipElement.className = \"tooltip hidden\";\n\n        this.helpTooltip = new Overlay({\n            element : this.helpTooltipElement,\n            stopEvent : false,\n            offset : [15, 0],\n            positioning : \"center-left\"\n        });\n\n        map.addOverlay(this.helpTooltip);\n    },\n\n    /**\n     * Creates a style for drawing\n     *\n     * @param {Object} styles - styles.\n     */\n    createStylingMeasureInteraction : function (styles) {\n        this.options.styles = styles || {};\n\n        // style de depart\n        logger.trace(\"style start\", this.options.styles.start);\n\n        // Creation  partir des styles par dfaut\n        var startStyleOpts = {\n            image : Measures.DEFAULT_POINTER_STYLE,\n            fill : Measures.DEFAULT_DRAW_START_STYLE.getFill(),\n            stroke : Measures.DEFAULT_DRAW_START_STYLE.getStroke()\n        };\n        // ecrasement  partir des proprits renseignes\n        if (this.options.styles.hasOwnProperty(\"pointer\") && this.options.styles.pointer instanceof Image) {\n            startStyleOpts.image = this.options.styles.pointer;\n        }\n        if (this.options.styles.hasOwnProperty(\"start\") && this.options.styles.start instanceof Style) {\n            if (this.options.styles.start.getFill() != null) {\n                startStyleOpts.fill = this.options.styles.start.getFill();\n            }\n            if (this.options.styles.start.getStroke() != null) {\n                startStyleOpts.stroke = this.options.styles.start.getStroke();\n            }\n        }\n\n        this.options.styles.start = new Style(startStyleOpts);\n\n        // style de fin\n        logger.trace(\"style finish\", this.options.styles.finish);\n\n        var finishStyleOpts = {\n            fill : Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),\n            stroke : Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()\n        };\n        // ecrasement  partir des proprits renseignes\n        if (this.options.styles.hasOwnProperty(\"finish\") && this.options.styles.finish instanceof Style) {\n            if (this.options.styles.finish.getFill() != null) {\n                finishStyleOpts.fill = this.options.styles.finish.getFill();\n            }\n            if (this.options.styles.finish.getStroke() != null) {\n                finishStyleOpts.stroke = this.options.styles.finish.getStroke();\n            }\n        }\n\n        this.options.styles.finish = new Style(finishStyleOpts);\n    },\n\n    /**\n     * Add the measure interaction\n     *\n     * @param {String} type - LineString or Polygon.\n     */\n    addMeasureInteraction : function (type) {\n        var map = this.getMap();\n\n        // Creates and adds the interaction\n        var self = this;\n        this.measureDraw = new DrawInteraction({\n            source : this.measureSource,\n            // condition : permet de gerer la suppression des derniers points saisis\n            condition : function (event) {\n                if (event.originalEvent.ctrlKey) {\n                    if (self.sketch) {\n                        this.removeLastPoint();\n                    }\n                    return false;\n                }\n                return true;\n            },\n            type : type,\n            style : this.options.styles.start || Measures.DEFAULT_DRAW_START_STYLE\n        });\n        this.measureDraw.setProperties({\n            name : \"Measures\",\n            source : this\n        });\n        map.addInteraction(this.measureDraw);\n\n        // Create tooltips\n        this.createMeasureTooltip(map);\n\n        // Event start measuring\n        this.measureDraw.on(\"drawstart\", (evt) => {\n            // set sketch\n            self.sketch = evt.feature;\n        });\n\n        // Event end measuring\n        this.measureDraw.on(\"drawend\", () => {\n            // FIXME MaJ de la tooltip en mode mobile !\n            if (self.sketch) {\n                var output;\n                var tooltipCoord;\n                var geom = (self.sketch.getGeometry());\n                output = self.format((geom));\n                if (geom.getType() === \"LineString\") {\n                    tooltipCoord = geom.getLastCoordinate();\n                } else if (geom.getType() === \"Polygon\") {\n                    tooltipCoord = geom.getInteriorPoint().getCoordinates();\n                } else {\n                    return;\n                }\n                self.measureTooltipElement.innerHTML = output;\n                self.measureTooltip.setPosition(tooltipCoord);\n            }\n\n            self.measureTooltipElement.className = \"GPmeasureTooltip GPmeasureTooltip-static\";\n            self.measureTooltip.setOffset([0, -7]);\n\n            // unset sketch\n            self.sketch = null;\n            // unset tooltip so that a new one can be created\n            self.measureTooltipElement = null;\n            self.createMeasureTooltip(map);\n        });\n    },\n\n    /**\n     * Init the measure interaction\n     */\n    initMeasureInteraction : function () {\n        var map = this.getMap();\n\n        this.measureSource = new VectorSource();\n\n        this.measureVector = new VectorLayer({\n            source : this.measureSource,\n            style : this.options.styles.finish || Measures.DEFAULT_DRAW_FINISH_STYLE\n        });\n\n        // on rajoute le champ gpResultLayerId permettant d'identifier une couche cre par le composant.\n        this.measureVector.gpResultLayerId = \"measure\";\n\n        map.addLayer(this.measureVector);\n\n        // Si un layer switcher est prsent dans la carte, on lui affecte des informations pour cette couche\n        map.getControls().forEach(\n            (control) => {\n                if (control instanceof LayerSwitcher) {\n                    // un layer switcher est prsent dans la carte\n                    var layerId = this.measureVector.gpLayerId;\n                    // on n'ajoute des informations que s'il n'y en a pas dj (si le titre est le numro par dfaut)\n                    if (control._layers[layerId].title === layerId) {\n                        control.addLayer(\n                            this.measureVector, {\n                                title : this.options.layerDescription.title,\n                                description : this.options.layerDescription.description\n                            }\n                        );\n                    }\n                }\n            }\n        );\n    }\n};\n\nexport default Measures;\n","var ElevationPathDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPelevationPath\");\n        container.className = \"GPwidget gpf-widget gpf-widget-button\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################# Methods to display Main Panel ################### //\n    // ################################################################### //\n\n    /**\n     * Show control\n     * see event !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowElevationPathPictoElement : function () {\n        // contexte d'execution\n        var context = this;\n\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPshowElevationPathPicto\");\n        button.className = \"GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-elevation fr-btn\";\n        button.title = \"Calculer un profil\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n\n        // gestionnaire d'evenement :\n        // on ouvre le menu de saisie de saisie\n        // L'ouverture/Fermeture permet de faire le menage\n        // (reinitialisation)\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context.onShowElevationPathClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                context.onShowElevationPathClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    // ################################################################### //\n    // ######################### Methods to Panel ######################## //\n    // ################################################################### //\n\n    /**\n     * Create Container Panel\n     *\n     * FIXME\n     * don't call this._createElevationPathPanelHeaderElement\n     * don't call this._createElevationPathPanelProfilElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathPanelElement : function () {\n        var dialog = document.createElement(\"dialog\");\n        dialog.id = this._addUID(\"GPelevationPathPanel\");\n        dialog.className = \"GPpanel gpf-panel fr-modal\";\n\n        // dialog.appendChild(this._createElevationPathPanelHeaderElement());\n        // dialog.appendChild(this._createElevationPathPanelProfilElement());\n\n        return dialog;\n    },\n\n    _createElevationPathPanelDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__body fr-modal__body\";\n        return div;\n    },\n\n    /**\n     * Create Header Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathPanelHeaderElement : function () {\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader gpf-panel__header fr-modal__header\";\n\n        var divInfo = document.createElement(\"button\");\n        divInfo.id = this._addUID(\"GPelevationPathPanelInfo\");\n        divInfo.className = \"GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary fr-m-1w\";\n        divInfo.title = \"Informations\";\n        // add event on click\n        if (divInfo.addEventListener) {\n            divInfo.addEventListener(\n                \"click\",\n                function () {\n                    self.onOpenElevationPathInfoClick();\n                }\n            );\n        } else if (divInfo.attachEvent) {\n            // internet explorer\n            divInfo.attachEvent(\n                \"onclick\",\n                function () {\n                    self.onOpenElevationPathInfoClick();\n                }\n            );\n        }\n        container.appendChild(divInfo);\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w\";\n        divTitle.innerHTML = \"Profil Altimtrique\";\n        container.appendChild(divTitle);\n\n        var buttonReduce = document.createElement(\"button\");\n        buttonReduce.id = this._addUID(\"GPelevationPathPanelReduce\");\n        buttonReduce.className = \"GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary\";\n        buttonReduce.title = \"Masquer le panneau\";\n\n        if (buttonReduce.addEventListener) {\n            buttonReduce.addEventListener(\"click\", function (e) {\n                if (typeof self.onReduceElevationPathPanelClick === \"function\") {\n                    self.onReduceElevationPathPanelClick();\n                }\n            }, false);\n        } else if (buttonReduce.attachEvent) {\n            buttonReduce.attachEvent(\"onclick\", function (e) {\n                if (typeof self.onReduceElevationPathPanelClick === \"function\") {\n                    self.onReduceElevationPathPanelClick();\n                }\n            });\n        }\n        container.appendChild(buttonReduce);\n\n        var buttonClose = document.createElement(\"button\");\n        buttonClose.id = this._addUID(\"GPelevationPathPanelClose\");\n        buttonClose.className = \"GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        buttonClose.title = \"Fermer le panneau\";\n\n        // Link panel close / visibility checkbox\n        if (buttonClose.addEventListener) {\n            buttonClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowElevationPathPicto\")).click();\n            }, false);\n        } else if (buttonClose.attachEvent) {\n            buttonClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowElevationPathPicto\")).click();\n            });\n        }\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPelementHidden gpf-visible\"; // afficher en dsfr\n        span.innerText = \"Fermer\";\n\n        buttonClose.appendChild(span);\n        container.appendChild(buttonClose);\n\n        return container;\n    },\n\n    /**\n     * Create Form\n     * see evenement !\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathPanelProfilElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = \"GPelevationPathProfil\";\n\n        return div;\n    },\n\n    /**\n     * Create Waiting Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathWaitingElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPelevationPathCalcWaitingContainer\");\n        div.className = \"GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GPwaitingContainerInfo gpf-waiting_info\";\n        p.innerHTML = \"Recherche en cours...\";\n\n        div.appendChild(p);\n\n        return div;\n    },\n\n    /**\n     * Create information Panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createElevationPathInformationsElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPelevationPathInformationsContainer\");\n        div.className = \"GPelementHidden gpf-hidden\";\n\n        var p = document.createElement(\"p\");\n        p.className = \"GPelevationPathInformations\";\n        p.innerHTML = \"Aucune information...\";\n        div.appendChild(p);\n\n        return div;\n    },\n\n    /**\n     * Add a information into Panel\n     *\n     * @param {String} value - value of item\n     * @returns {DOMElement} DOM element\n     */\n    _addElevationPathInformationsItem : function (value) {\n        var div = document.getElementById(this._addUID(\"GPelevationPathInformationsContainer\"));\n\n        if (div) {\n            var p = document.createElement(\"p\");\n            p.className = \"GPelevationPathInformations\";\n            p.innerHTML = value;\n            div.appendChild(p);\n        }\n\n        return div;\n    }\n};\n\nexport default ElevationPathDOM;\n","/* globals AmCharts, d3 */\nvar ProfileElevationPathDOM = {\n\n    /**\n     * Gets a css property from an element\n     *\n     * @private\n     * @param {HTMLElement} element The element to get the property from\n     * @param {String} property The css property\n     * @returns {String} The value of the property\n     *\n     * @see https://stackoverflow.com/questions/7444451/how-to-get-the-actual-rendered-font-when-its-not-defined-in-css\n     */\n    _getCssProperty : function (element, property) {\n        return window.getComputedStyle(element, null).getPropertyValue(property);\n    },\n\n    /**\n     * Uses canvas.measureText to compute and return the width of the given text of given font in pixels.\n     *\n     * @private\n     * @param {String} text The text to be rendered.\n     * @param {HTMLElement} container The container of the text\n     * @param {String} font The font of the container if known, format: 'weight size familiy'\n     * @returns {Number} The width of the text\n     *\n     * @see https://stackoverflow.com/questions/118241/calculate-text-width-with-javascript/21015393#21015393\n     */\n    _getTextWidth : function (text, container, font = null) {\n        // re-use canvas object for better performance\n        var canvas = /** ts-syntax */(this.canvas) || ((this.canvas) = document.createElement(\"canvas\"));\n        var context = canvas.getContext(\"2d\");\n        if (font === null) {\n            context.font = `${this._getCssProperty(container, \"font-weight\")} ${this._getCssProperty(container, \"font-size\")} ${this._getCssProperty(container, \"font-family\")}`;\n        } else {\n            context.font = font;\n        }\n\n        var metrics = context.measureText(text);\n        return metrics.width;\n    },\n\n    /**\n     * Converts a data point z to svg y coord\n     *\n     * @private\n     * @param {Object} z The z to convert.\n     * @param {Number} pathHeight The height of the path in the svg container in px\n     * @param {Number} minGraphZ Min z of the graph\n     * @param {Number} pxPerMZ Number of pixels per meter for the z (y) axis\n     * @returns {Number} The y svg coordinate of the point\n     *\n     */\n    _dataZToSvgY : function (z, pathHeight, minGraphZ, pxPerMZ) {\n        return pathHeight - (z - minGraphZ) * pxPerMZ - 0.5;\n    },\n\n    /**\n     * Converts a data point dist value to svg x coord\n     *\n     * @private\n     * @param {Number} dist The dist to convert\n     * @param {Number} svgWidth The witdth of the svg container in px\n     * @param {Number} pathWidth The witdth of the path in the svg container in px\n     * @param {Number} pxPerMX Number of pixels per meter for the x axis\n     * @returns {Array} The x svg coordinate of the point\n     *\n     */\n    _dataDistToSvgX : function (dist, svgWidth, pathWidth, pxPerMX) {\n        return (svgWidth - pathWidth) + dist * pxPerMX;\n    },\n\n    /**\n     * Converts a svg x coord to dist value\n     *\n     * @private\n     * @param {Number} svgX The dist to convert\n     * @param {Number} svgWidth The witdth of the svg container in px\n     * @param {Number} pathWidth The witdth of the path in the svg container in px\n     * @param {Number} pxPerMX Number of pixels per meter for the x axis\n     * @returns {Array} The dist value\n     *\n     */\n    _svgXToDataDist : function (svgX, svgWidth, pathWidth, pxPerMX) {\n        return (svgX + pathWidth - svgWidth) / pxPerMX;\n    },\n\n    /**\n     * Returns the index of value if it were inserted in sorted (by dist) array of data points.\n     *\n     * @private\n     * @param {Array} array Sorted array of data points (with dist property)\n     * @param {Number} value Value to test the index of.\n     * @returns {Number} The index the value would have.\n     *\n     */\n    _arrayBisect : function (array, value) {\n        let idx;\n        if (array.length === 0) {\n            return 0;\n        }\n        for (idx = 0; idx < array.length; idx++) {\n            if (value < array[idx].dist) {\n                return idx;\n            }\n        }\n        return idx - 1;\n    },\n\n    /**\n     * Display Profile function used by default : no additonal framework needed.\n     *\n     * @public\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileByDefault : function (data, container, context, className) {\n        var self = context;\n\n        if (!container) {\n            return;\n        }\n\n        if (!data) {\n            return;\n        }\n\n        // on nettoie toujours...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        const margin = {\n            top : 25,\n            right : 15,\n            bottom : 10,\n            left : 10\n        };\n\n        var _displayProfileOptions = self.options.displayProfileOptions;\n        var _points = data.points;\n\n        var sortedElev = JSON.parse(JSON.stringify(_points));\n        sortedElev.sort(function (e1, e2) {\n            return e1.z - e2.z;\n        });\n\n        var minZ = sortedElev[0].z;\n        var maxZ = sortedElev[sortedElev.length - 1].z;\n        var dist = data.distance;\n        let distUnit = \"m\";\n\n        const widgetDiv = document.createElement(\"div\");\n        widgetDiv.id = \"profileElevationByDefault\";\n        container.appendChild(widgetDiv);\n\n        // Dtermination des tailles en pixels des lments du widget\n        var clientWidth = window.getComputedStyle(container).getPropertyValue(\"width\").replace(/px/, \"\");\n        var clientHeight = window.getComputedStyle(container).getPropertyValue(\"height\").replace(/px/, \"\");\n        const widgetHeigth = clientHeight - margin.top - margin.bottom;\n        const widgetWidth = clientWidth - margin.left - margin.right;\n        // const widgetHeigth = container.clientHeight - margin.top - margin.bottom;\n        // const widgetWidth = container.clientWidth - margin.left - margin.right;\n\n        const zLabelWidth = 17;\n        const zGradWidth = this._getTextWidth(Math.round(maxZ).toLocaleString() + \",88\", container, \"400 10 Verdana\");\n        const xLabelHeight = 17;\n        const xGradHeight = 15;\n\n        const minZguideHeigth = 15;\n        const minXguideWidth = this._getTextWidth(Math.round(dist).toLocaleString() + \",5\", container);\n        const minNumXGuides = 1;\n\n        const pathHeight = widgetHeigth - xLabelHeight - xGradHeight;\n        const pathWidth = widgetWidth - zLabelWidth - zGradWidth;\n\n        const elevationSvg = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n        elevationSvg.id = \"profileElevationByDefaultSvg\";\n        elevationSvg.setAttribute(\"style\", \"display: block; margin: auto; overflow: visible; position: absolute; left: 10px;\");\n        elevationSvg.setAttribute(\"viewBox\", `0 0 ${clientWidth} ${clientHeight}`);\n        elevationSvg.setAttribute(\"width\", \"100%\");\n        elevationSvg.setAttribute(\"height\", \"100%\");\n\n        // Dtermination des guides en ordonne :\n        const maxNumZguides = Math.floor(pathHeight / minZguideHeigth);\n        let gradZ;\n        // Traitement du cas altitude max = altitude min\n        if (maxZ === minZ) {\n            gradZ = 0.1;\n        } else {\n            gradZ = Math.pow(10, (Math.ceil(Math.log((maxZ - minZ) / maxNumZguides) / Math.log(10)))) / 2;\n        }\n        let minGraphZ = Math.floor(minZ / gradZ) * gradZ;\n        let maxGraphZ = Math.ceil(maxZ / gradZ) * gradZ;\n        // cas o le path atteint pile les graduations extremes : ajout d'une gradiation\n        if (maxGraphZ === maxZ) {\n            maxGraphZ += gradZ;\n        }\n        // cas o gradZ < 1 : nombres flottants capricieux...\n        minGraphZ = Math.round(minGraphZ * 100) / 100;\n        maxGraphZ = Math.round(maxGraphZ * 100) / 100;\n\n        let numZguides = Math.round((maxGraphZ - minGraphZ) / gradZ);\n\n        // Si plus de guides que le max, on passe  une graduation de 10**x en 10**x (et non 10**x / 2)\n        if (numZguides + 1 > maxNumZguides) {\n            gradZ = Math.pow(10, (Math.ceil(Math.log((maxZ - minZ) / maxNumZguides) / Math.log(10))));\n            minGraphZ = Math.floor(minZ / gradZ) * gradZ;\n            maxGraphZ = Math.ceil(maxZ / gradZ) * gradZ;\n            // cas o le path atteint pile les graduations extremes : ajout d'une gradiation\n            if (maxGraphZ === maxZ) {\n                maxGraphZ += gradZ;\n            }\n            // cas o gradZ < 1 : nombres flottants capricieux...\n            minGraphZ = Math.round(minGraphZ * 100) / 100;\n            maxGraphZ = Math.round(maxGraphZ * 100) / 100;\n            numZguides = Math.floor((maxGraphZ - minGraphZ) / gradZ);\n        }\n\n        numZguides = Math.max(Math.round(numZguides), 1);\n\n        const axisZ = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        axisZ.setAttribute(\"class\", \"profile-z-vertical\");\n\n        const guidesZ = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        const gradZyOffsetPx = pathHeight / numZguides;\n        let pxPerMZ;\n        // Traitement du cas altitude max = altitude min\n        if (maxZ === minZ) {\n            pxPerMZ = pathHeight / 0.2;\n        } else {\n            pxPerMZ = pathHeight / (maxGraphZ - minGraphZ);\n        }\n\n        let gradZtext;\n        let yTextTranslation;\n        let yStrokeTranslation;\n        let gradZstroke;\n        let gradZpath;\n        let gradZgrad;\n        // Ajout des graduations au graphique\n        for (let i = 0; i <= numZguides; i++) {\n            gradZtext = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            gradZtext.setAttribute(\"class\", \"profile-z-graduation\");\n            gradZtext.setAttribute(\"font-family\", \"Verdana\");\n            gradZtext.setAttribute(\"font-size\", \"10px\");\n            gradZtext.setAttribute(\"fill\", \"#5E5E5E\");\n            // Cas o gradZ < 1 : nombres flottants capricieux...\n            // Le Math.round est pour viter des ennuis du genre 3 * 0.1 = 0.300000000000004\n            gradZtext.textContent = (Math.round(100 * (minGraphZ + i * gradZ)) / 100).toLocaleString();\n\n            yTextTranslation = pathHeight - i * gradZyOffsetPx;\n\n            gradZtext.setAttribute(\"transform\", `translate(${zLabelWidth + zGradWidth - 8}, ${yTextTranslation + 5})`);\n            gradZtext.setAttribute(\"text-anchor\", \"end\");\n            axisZ.appendChild(gradZtext);\n\n            yStrokeTranslation = Math.round(yTextTranslation) - 0.5;\n\n            gradZstroke = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            gradZpath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradZpath.setAttribute(\"cs\", \"100,100\");\n            gradZpath.setAttribute(\"stroke-width\", \"1\");\n            if (i !== 0) {\n                gradZpath.setAttribute(\"stroke-opacity\", \"0.2\");\n            } else {\n                gradZpath.setAttribute(\"stroke-opacity\", \"1\");\n            }\n            gradZpath.setAttribute(\"stroke\", \"#000000\");\n            gradZpath.setAttribute(\"fill\", \"none\");\n            gradZpath.setAttribute(\"d\", `M${zLabelWidth + zGradWidth},${yStrokeTranslation} L${pathWidth + zLabelWidth + zGradWidth},${yStrokeTranslation}`);\n\n            gradZgrad = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradZgrad.setAttribute(\"cs\", \"100,100\");\n            gradZgrad.setAttribute(\"stroke-width\", \"1\");\n            gradZgrad.setAttribute(\"stroke-opacity\", \"1\");\n            gradZgrad.setAttribute(\"stroke\", \"#000000\");\n            gradZgrad.setAttribute(\"fill\", \"none\");\n            gradZgrad.setAttribute(\"d\", `M${zLabelWidth + zGradWidth},${yStrokeTranslation} L${zLabelWidth + zGradWidth + 5},${yStrokeTranslation}`);\n            gradZgrad.setAttribute(\"transform\", \"translate(-5, 0)\");\n\n            gradZstroke.appendChild(gradZgrad);\n            gradZstroke.appendChild(gradZpath);\n            guidesZ.appendChild(gradZstroke);\n        }\n\n        var axisZLegend = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        axisZLegend.setAttribute(\"class\", \"profile-z-legend\");\n        axisZLegend.setAttribute(\"font-family\", \"Verdana\");\n        axisZLegend.setAttribute(\"font-size\", \"11px\");\n        axisZLegend.setAttribute(\"fill\", \"#5E5E5E\");\n        axisZLegend.textContent = \"Altitude (m)\";\n\n        axisZLegend.setAttribute(\"transform\", `translate(${zLabelWidth - 8}, ${Math.round(pathHeight / 2)}) rotate(-90)`);\n        axisZLegend.setAttribute(\"text-anchor\", \"middle\");\n\n        axisZ.appendChild(axisZLegend);\n        elevationSvg.appendChild(axisZ);\n        elevationSvg.appendChild(guidesZ);\n\n        // Dtermination des guides en abscisse :\n        // Passage ventuel en km\n        if (dist > 2000) {\n            dist /= 1000;\n            distUnit = \"km\";\n        }\n\n        const maxNumXguides = Math.floor(pathWidth / minXguideWidth);\n        let gradX = Math.pow(10, (Math.ceil(Math.log((dist) / maxNumXguides) / Math.log(10)))) / 2;\n        const maxGraphX = dist;\n\n        // Si plus de guides que le max, on passe  une graduation de 10**x en 10**x (et non 10**x / 2)\n        let numXguides = Math.floor(maxGraphX / gradX);\n        if (numXguides > maxNumXguides) {\n            gradX = Math.pow(10, (Math.ceil(Math.log((dist) / maxNumXguides) / Math.log(10))));\n            numXguides = Math.floor(maxGraphX / gradX);\n        } else if (numXguides < minNumXGuides) {\n            gradX = Math.pow(10, (Math.ceil(Math.log((dist) / maxNumXguides) / Math.log(10))) - 1);\n            numXguides = Math.floor(maxGraphX / gradX);\n        }\n\n        numXguides = Math.max(numXguides, 1);\n        const lastGradX = gradX * numXguides;\n\n        const axisX = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        axisX.setAttribute(\"class\", \"profile-x-vertical\");\n\n        const guidesX = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        // Dcalage des graduations pour que la dernire corresponde  la distance max\n        const pxPerMX = pathWidth / maxGraphX;\n        const xOffset = (maxGraphX - lastGradX) * pxPerMX;\n        const gradXxOffsetPx = Math.round((pathWidth - xOffset) / numXguides);\n\n        let gradXtext;\n        let xTextTranslation;\n        let xStrokeTranslation;\n        let gradXstroke;\n        let gradXpath;\n        let gradXgrad;\n        // Ajout des graduations au graphique\n        for (let i = 0; i <= numXguides + 1; i++) {\n            gradXtext = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            gradXtext.setAttribute(\"class\", \"profile-x-graduation\");\n            gradXtext.setAttribute(\"font-family\", \"Verdana\");\n            gradXtext.setAttribute(\"font-size\", \"10px\");\n            gradXtext.setAttribute(\"fill\", \"#5E5E5E\");\n\n            // Exclusion du cas de la dernire graduation : correspond  la distance max : pas de texte\n            if (i !== numXguides + 1) {\n                // Cas o gradX < 1 : nombres flottants capricieux...\n                gradXtext.textContent = (Math.round(100 * i * gradX) / 100).toLocaleString();\n            }\n\n            xTextTranslation = zLabelWidth + zGradWidth + i * gradXxOffsetPx;\n            // Cas de la dernire graduation : correspond  la distance max\n            if (i === numXguides + 1) {\n                xTextTranslation = zLabelWidth + zGradWidth + pathWidth;\n            }\n\n            gradXtext.setAttribute(\"transform\", `translate(${xTextTranslation}, ${pathHeight + xGradHeight + 5})`);\n            gradXtext.setAttribute(\"text-anchor\", \"middle\");\n            axisX.appendChild(gradXtext);\n\n            xStrokeTranslation = xTextTranslation - 0.5;\n\n            gradXstroke = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            gradXpath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradXpath.setAttribute(\"cs\", \"100,100\");\n            gradXpath.setAttribute(\"stroke-width\", \"1\");\n            if (i !== 0) {\n                gradXpath.setAttribute(\"stroke-opacity\", \"0.2\");\n            } else {\n                gradXpath.setAttribute(\"stroke-opacity\", \"1\");\n            }\n            gradXpath.setAttribute(\"stroke\", \"#000000\");\n            gradXpath.setAttribute(\"fill\", \"none\");\n            gradXpath.setAttribute(\"d\", `M${xStrokeTranslation},${pathHeight} L${xStrokeTranslation},0`);\n\n            gradXgrad = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            gradXgrad.setAttribute(\"cs\", \"100,100\");\n            gradXgrad.setAttribute(\"stroke-width\", \"1\");\n            gradXgrad.setAttribute(\"stroke-opacity\", \"1\");\n            gradXgrad.setAttribute(\"stroke\", \"#000000\");\n            gradXgrad.setAttribute(\"fill\", \"none\");\n            gradXgrad.setAttribute(\"d\", `M${xStrokeTranslation},${pathHeight} L${xStrokeTranslation},${pathHeight - 5}`);\n            gradXgrad.setAttribute(\"transform\", \"translate(0, 5)\");\n\n            gradXstroke.appendChild(gradXgrad);\n            gradXstroke.appendChild(gradXpath);\n            guidesX.appendChild(gradXstroke);\n        }\n\n        var axisXLegend = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        axisXLegend.setAttribute(\"class\", \"profile-x-legend\");\n        axisXLegend.setAttribute(\"font-family\", \"Verdana\");\n        axisXLegend.setAttribute(\"font-size\", \"11px\");\n        axisXLegend.setAttribute(\"fill\", \"#5E5E5E\");\n        axisXLegend.textContent = `Distance (${distUnit})`;\n\n        axisXLegend.setAttribute(\"transform\", `translate(${zLabelWidth + zGradWidth + pathWidth / 2}, ${pathHeight + xGradHeight + xLabelHeight + 3})`);\n        axisXLegend.setAttribute(\"text-anchor\", \"middle\");\n\n        axisX.appendChild(axisXLegend);\n        elevationSvg.appendChild(axisX);\n        elevationSvg.appendChild(guidesX);\n\n        const elevationPathG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        let factor = 1;\n        if (distUnit === \"km\") {\n            factor = 1000;\n        }\n\n        let pointX = this._dataDistToSvgX(_points[0].dist / factor, widgetWidth, pathWidth, pxPerMX);\n        let pointY = this._dataZToSvgY(_points[0].z, pathHeight, minGraphZ, pxPerMZ);\n        let pathD = `M${pointX},${pointY}`;\n\n        for (let i = 1; i < _points.length; i++) {\n            pointX = this._dataDistToSvgX(_points[i].dist / factor, widgetWidth, pathWidth, pxPerMX);\n            pointY = this._dataZToSvgY(_points[i].z, pathHeight, minGraphZ, pxPerMZ);\n            pathD += ` L${pointX},${pointY}`;\n        }\n\n        const pathPath = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        pathPath.setAttribute(\"cs\", \"100,100\");\n        pathPath.setAttribute(\"stroke-width\", \"1\");\n        pathPath.setAttribute(\"stroke-opacity\", \"1\");\n        pathPath.setAttribute(\"stroke\", \"#0B6BA7\");\n        pathPath.setAttribute(\"fill\", \"none\");\n        pathPath.setAttribute(\"d\", pathD);\n\n        // Fermeture du path pour le fill\n        pathD += ` L${pointX},${pathHeight}`;\n        pathD += ` L${widgetWidth - pathWidth},${pathHeight}`;\n\n        const pathFill = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        pathFill.setAttribute(\"cs\", \"100,100\");\n        pathFill.setAttribute(\"stroke-width\", \"1\");\n        pathFill.setAttribute(\"stroke-opacity\", \"0\");\n        pathFill.setAttribute(\"stroke\", \"#000000\");\n        pathFill.setAttribute(\"fill\", \"#00B798\");\n        pathFill.setAttribute(\"fill-opacity\", \"0.4\");\n        pathFill.setAttribute(\"d\", pathD);\n\n        elevationPathG.appendChild(pathPath);\n        elevationPathG.appendChild(pathFill);\n        elevationSvg.appendChild(elevationPathG);\n\n        // Mise en place de l'couteur d'vnement : pour l'affichage dynamique\n        const dynamicsG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        // Pour couter la position de la souris\n        const pathRectangle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        pathRectangle.setAttribute(\"width\", pathWidth);\n        pathRectangle.setAttribute(\"height\", pathHeight);\n        pathRectangle.setAttribute(\"transform\", `translate(${widgetWidth - pathWidth},0)`);\n        pathRectangle.setAttribute(\"visibility\", \"hidden\");\n        pathRectangle.setAttribute(\"pointer-events\", \"all\");\n\n        const sortedDist = JSON.parse(JSON.stringify(_points));\n        sortedDist.sort(function (e1, e2) {\n            return e1.dist - e2.dist;\n        });\n\n        const focusLineX = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n        focusLineX.setAttribute(\"id\", \"focusLineX\");\n        focusLineX.setAttribute(\"class\", \"focusLine-default\");\n        focusLineX.setAttribute(\"fill\", \"none\");\n        focusLineX.setAttribute(\"stroke\", \"#F90\");\n        focusLineX.setAttribute(\"stroke-width\", \"0.5px\");\n        focusLineX.setAttribute(\"visibility\", \"hidden\");\n\n        const focusLineY = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n        focusLineY.setAttribute(\"id\", \"focusLineY\");\n        focusLineY.setAttribute(\"class\", \"focusLine-default\");\n        focusLineY.setAttribute(\"fill\", \"none\");\n        focusLineY.setAttribute(\"stroke\", \"#F90\");\n        focusLineY.setAttribute(\"stroke-width\", \"0.5px\");\n        focusLineY.setAttribute(\"visibility\", \"hidden\");\n\n        const focusCircle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n        focusCircle.setAttribute(\"id\", \"focusCircle\");\n        focusCircle.setAttribute(\"r\", 4);\n        focusCircle.setAttribute(\"class\", \"circle-default focusCircle-default\");\n        focusCircle.setAttribute(\"fill\", \"#F90\");\n        focusCircle.setAttribute(\"visibility\", \"hidden\");\n\n        dynamicsG.appendChild(focusCircle);\n        dynamicsG.appendChild(focusLineX);\n        dynamicsG.appendChild(focusLineY);\n\n        // Tooltip\n        const tooltipDiv = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        const altiSpan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n        const slopeSpan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n        const coordsSpan = document.createElementNS(\"http://www.w3.org/2000/svg\", \"tspan\");\n\n        tooltipDiv.setAttribute(\"style\", \"text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;\");\n        tooltipDiv.style.pointerEvents = \"none\";\n        tooltipDiv.style.position = \"fixed\";\n        // tooltipDiv.classList.add(\"tooltipInit\");\n        // IE...\n        tooltipDiv.setAttribute(\"class\", \"tooltipInit\");\n        tooltipDiv.setAttribute(\"text-anchor\", \"middle\");\n\n        widgetDiv.appendChild(tooltipDiv);\n\n        altiSpan.setAttribute(\"class\", \"altiPathValue\");\n        altiSpan.setAttribute(\"x\", \"0\");\n        altiSpan.setAttribute(\"dy\", \"-.7em\");\n\n        slopeSpan.setAttribute(\"class\", \"altiPathValue\");\n        slopeSpan.setAttribute(\"x\", \"0\");\n        slopeSpan.setAttribute(\"dy\", \"1em\");\n\n        coordsSpan.setAttribute(\"class\", \"altiPathCoords\");\n        coordsSpan.setAttribute(\"x\", \"0\");\n        coordsSpan.setAttribute(\"dy\", \"1em\");\n\n        tooltipDiv.appendChild(altiSpan);\n        if (_displayProfileOptions.currentSlope) {\n            tooltipDiv.appendChild(slopeSpan);\n        }\n        tooltipDiv.appendChild(coordsSpan);\n\n        const tooltipG = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n\n        dynamicsG.appendChild(tooltipG);\n\n        const tooltipBubble = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        tooltipBubble.setAttribute(\"cs\", \"100,100\");\n        tooltipBubble.setAttribute(\"fill\", \"#FFFFFF\");\n        tooltipBubble.setAttribute(\"stroke\", \"#CCCCCC\");\n        tooltipBubble.setAttribute(\"fill-opacity\", \"0.8\");\n        tooltipBubble.setAttribute(\"stroke-width\", \"1\");\n        tooltipBubble.setAttribute(\"stroke-opacity\", \"1\");\n\n        const tooltipBubbleShadow = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        tooltipBubbleShadow.setAttribute(\"cs\", \"100,100\");\n        tooltipBubbleShadow.setAttribute(\"fill\", \"#FFFFFF\");\n        tooltipBubbleShadow.setAttribute(\"stroke\", \"#000000\");\n        tooltipBubbleShadow.setAttribute(\"fill-opacity\", \"0\");\n        tooltipBubbleShadow.setAttribute(\"stroke-width\", \"1\");\n        tooltipBubbleShadow.setAttribute(\"stroke-opacity\", \"0.4\");\n        tooltipBubbleShadow.setAttribute(\"transform\", \"translate(1,1)\");\n\n        tooltipG.appendChild(tooltipBubbleShadow);\n        tooltipG.appendChild(tooltipBubble);\n        tooltipG.appendChild(tooltipDiv);\n\n        // tooltipG.classList.add(\"tooltipInit\");\n        // IE... deprecated\n        tooltipG.setAttribute(\"class\", \"tooltipInit\");\n        tooltipG.style.pointerEvents = \"none\";\n\n        function onMouseOver () {\n            focusLineX.setAttribute(\"visibility\", \"visible\");\n            focusLineY.setAttribute(\"visibility\", \"visible\");\n            focusCircle.setAttribute(\"visibility\", \"visible\");\n            className.__createProfileMarker(self, _points[0]);\n\n            // tooltips\n            // tooltipDiv.classList.remove(\"tooltipInit\");\n            // tooltipG.classList.remove(\"tooltipInit\");\n            // tooltipDiv.classList.remove(\"tooltipFadeOut\");\n            // tooltipG.classList.remove(\"tooltipFadeOut\");\n            // tooltipDiv.classList.add(\"tooltipFadeIn\");\n            // tooltipG.classList.add(\"tooltipFadeIn\");\n            // IE... deprecated\n            tooltipDiv.setAttribute(\"class\", \"tooltipFadeIn\");\n            tooltipG.setAttribute(\"class\", \"tooltipFadeIn\");\n        }\n\n        function onMouseOut () {\n            focusLineX.setAttribute(\"visibility\", \"hidden\");\n            focusLineY.setAttribute(\"visibility\", \"hidden\");\n            focusCircle.setAttribute(\"visibility\", \"hidden\");\n            className.__removeProfileMarker(self);\n            // tooltips\n            // tooltipDiv.classList.remove(\"tooltipFadeIn\");\n            // tooltipG.classList.remove(\"tooltipFadeIn\");\n            // tooltipDiv.classList.add(\"tooltipFadeOut\");\n            // tooltipG.classList.add(\"tooltipFadeOut\");\n            // IE... deprecated\n            tooltipDiv.setAttribute(\"class\", \"tooltipFadeOut\");\n            tooltipG.setAttribute(\"class\", \"tooltipFadeOut\");\n        }\n\n        function onMouseMove (e) {\n            const mousePoint = elevationSvg.createSVGPoint();\n            mousePoint.x = e.clientX;\n            mousePoint.y = e.clientY;\n            const svgMousePoint = mousePoint.matrixTransform(elevationSvg.getScreenCTM().inverse());\n            const mouseDist = this._svgXToDataDist(svgMousePoint.x, widgetWidth, pathWidth, pxPerMX) * factor;\n\n            // Math.max pour viter de sortir de l'array\n            const distIndex = Math.max(1, this._arrayBisect(sortedDist, mouseDist));\n\n            const d0 = _points[distIndex - 1];\n            const d1 = _points[distIndex];\n            let d = d0;\n            if (mouseDist - d0.dist > d1.dist - mouseDist) {\n                d = d1;\n            }\n\n            const focusX = this._dataDistToSvgX(d.dist / factor, widgetWidth, pathWidth, pxPerMX);\n            const focusY = this._dataZToSvgY(d.z, pathHeight, minGraphZ, pxPerMZ);\n\n            // Mise  jour des lments graphiques\n            focusCircle.setAttribute(\"cx\", focusX);\n            focusCircle.setAttribute(\"cy\", focusY);\n\n            focusLineX.setAttribute(\"x1\", focusX);\n            focusLineX.setAttribute(\"y1\", pathHeight);\n            focusLineX.setAttribute(\"x2\", focusX);\n            focusLineX.setAttribute(\"y2\", 0);\n\n            focusLineY.setAttribute(\"x1\", zLabelWidth + zGradWidth);\n            focusLineY.setAttribute(\"y1\", focusY);\n            focusLineY.setAttribute(\"x2\", pathWidth + zLabelWidth + zGradWidth);\n            focusLineY.setAttribute(\"y2\", focusY);\n\n            className.__updateProfileMarker(self, d);\n\n            // Mise  jour du tooltip\n            const altiSpanTxt = `Altitude : ${d.z.toLocaleString()} m`;\n            const slopeSpanTxt = `Pente : ${d.slope} %`;\n            const coordsSpanTxt = `(lat : ${d.lat.toLocaleString()} / lon : ${d.lon.toLocaleString()})`;\n\n            altiSpan.innerHTML = altiSpanTxt;\n            slopeSpan.innerHTML = slopeSpanTxt;\n            coordsSpan.innerHTML = coordsSpanTxt;\n\n            const tooltipTextWidth = Math.max(\n                this._getTextWidth(coordsSpanTxt, coordsSpan),\n                this._getTextWidth(altiSpanTxt, altiSpan)\n            );\n\n            let toolTipBubbleD;\n            if (d.dist > (dist * factor) / 2) {\n                toolTipBubbleD = `M -0.5 -0.5 l -6 6 l 0 16 l -${tooltipTextWidth + 10} 0 l 0 -44 l ${tooltipTextWidth + 10} 0 l 0 16 l 6 6`;\n                tooltipDiv.setAttribute(\"transform\", `translate(${-(tooltipTextWidth / 2 + 12)},0)`); // IE11 !\n            } else if (d.dist <= (dist * factor) / 2) {\n                toolTipBubbleD = `M -0.5 -0.5 l 6 6 l 0 16 l ${tooltipTextWidth + 10} 0 l 0 -44 l -${tooltipTextWidth + 10} 0 l 0 16 l -6 6`;\n                // Largeur de la fleche de la bulle du tooltip\n                tooltipDiv.setAttribute(\"transform\", `translate(${(tooltipTextWidth / 2 + 12)},0)`); // IE11 !\n            }\n\n            tooltipBubble.setAttribute(\"d\", toolTipBubbleD);\n            tooltipBubbleShadow.setAttribute(\"d\", toolTipBubbleD);\n\n            tooltipG.setAttribute(\"transform\", `translate(${focusX},${focusY})`); // IE11 !\n            tooltipG.style.transform = `translate(${focusX}px,${focusY}px)`;\n        }\n\n        pathRectangle.addEventListener(\"pointerover\", onMouseOver);\n        pathRectangle.addEventListener(\"pointerout\", onMouseOut);\n        pathRectangle.addEventListener(\"pointermove\", onMouseMove.bind(this));\n\n        dynamicsG.appendChild(pathRectangle);\n        elevationSvg.appendChild(dynamicsG);\n\n        widgetDiv.appendChild(elevationSvg);\n\n        return container;\n    },\n\n    /**\n     * Display Profile without graphical rendering (raw service response)\n     *\n     * @public\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileRaw : function (data, container, context, className) {\n        if (!container) {\n            return;\n        }\n\n        // on nettoie toujours...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var _points = (data && data.points) ? data.points : {};\n\n        var div = document.createElement(\"textarea\");\n        div.id = \"profilElevationResults\";\n        div.rows = 10;\n        div.cols = 50;\n        div.style.width = \"100%\";\n        div.innerHTML = JSON.stringify(_points, undefined, 4);\n        div.addEventListener(\"mouseover\", function (e) {\n            className.__customRawProfileMouseOverEvent(context, e);\n        });\n\n        // TODO\n        // for (var i = 0; i < _points.length; i++) {\n        //     var point = _points[i];\n        //     var divC  = document.createElement(\"code\");\n        //     divC.id = \"point_\" + i;\n        //     divC.innerHTML = JSON.stringify(point, undefined, 4);\n        //     div.appendChild(divC);\n        //     divC.addEventListener(\"mouseover\", function (e) {\n        //          className.__customRawProfileMouseOverEvent(context, e);\n        //     });\n        // }\n\n        container.appendChild(div);\n\n        return container;\n    },\n\n    /**\n     * Display Profile using D3 javascript framework. This method needs D3 libraries to be loaded.\n     *\n     * @public\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileLibD3 : function (data, container, context, className) {\n        var self = context;\n\n        if (!container) {\n            return;\n        }\n\n        if (!data) {\n            return;\n        }\n\n        // on nettoie toujours...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var _points = data.points;\n\n        if (data.distance > 2000) {\n            data.unit = \"km\";\n            for (let i = 0; i < _points.length; i++) {\n                _points[i].dist /= 1000;\n            }\n        }\n\n        var _displayProfileOptions = self.options.displayProfileOptions;\n\n        var margin = {\n            top : 20,\n            right : 20,\n            bottom : 30,\n            left : 40\n        };\n\n        var widgetWidth = window.getComputedStyle(container).getPropertyValue(\"width\");\n        var widgetHeigth = window.getComputedStyle(container).getPropertyValue(\"height\");\n        var width = widgetWidth.replace(/px/, \"\") - margin.left - margin.right;\n        var height = widgetHeigth.replace(/px/, \"\") - margin.top - margin.bottom;\n\n        var x = d3.scale.linear()\n            .range([0, width]);\n\n        var y = d3.scale.linear()\n            .range([height, 0]);\n\n        var xAxis = d3.svg.axis()\n            .scale(x)\n            .orient(\"bottom\")\n            .ticks(5);\n\n        var yAxis = d3.svg.axis()\n            .scale(y)\n            .orient(\"left\")\n            .ticks(5);\n\n        var line = d3.svg.line()\n            .interpolate(\"basis\")\n            .x(function (d) {\n                return x(d.dist);\n            })\n            .y(function (d) {\n                return y(d.z);\n            });\n\n        var area = d3.svg.area()\n            .interpolate(\"basis\")\n            .x(function (d) {\n                return x(d.dist);\n            })\n            .y0(height)\n            .y1(function (d) {\n                return y(d.z);\n            });\n\n        var svg = d3.select(container)\n            .append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n        var xDomain = d3.extent(_points, function (d) {\n            return d.dist;\n        });\n        x.domain(xDomain);\n\n        var yDomain = [\n            0,\n            d3.max(_points, function (d) {\n                return d.z;\n            })\n        ];\n        y.domain(yDomain);\n\n        svg.append(\"path\")\n            .datum(_points)\n            .attr(\"class\", \"area-d3\")\n            .attr(\"d\", area);\n\n        svg.append(\"g\")\n            .attr(\"class\", \"x axis-d3\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis)\n            .append(\"text\")\n            .attr(\"y\", -15)\n            .attr(\"dy\", \".71em\")\n            .attr(\"x\", width)\n            .text(\"Distance (\" + data.unit + \")\");\n\n        svg.append(\"g\")\n            .attr(\"class\", \"y axis-d3\")\n            .call(yAxis)\n            .append(\"text\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"y\", 6)\n            .attr(\"dy\", \".71em\")\n            .text(\"Altitude (m)\");\n\n        svg.append(\"g\")\n            .attr(\"class\", \"grid-d3 vertical\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(xAxis\n                .orient(\"bottom\")\n                .tickSize(-height, 0, 0)\n                .tickFormat(\"\")\n            );\n\n        svg.append(\"g\")\n            .attr(\"class\", \"grid-d3 horizontal\")\n            .call(yAxis\n                .orient(\"left\")\n                .tickSize(-width, 0, 0)\n                .tickFormat(\"\")\n            );\n\n        svg.append(\"path\")\n            .datum(_points)\n            .attr(\"class\", \"line-d3\")\n            .attr(\"d\", line);\n\n        svg.selectAll(\"circle\")\n            .data(_points)\n            .enter()\n            .append(\"circle\")\n            .attr(\"cx\", function (d) {\n                return x(d.dist);\n            })\n            .attr(\"cy\", function (d) {\n                return y(d.z);\n            })\n            .attr(\"r\", 0)\n            .attr(\"class\", \"circle-d3\");\n\n        var focus = svg.append(\"g\").style(\"display\", \"none\");\n\n        focus.append(\"line\")\n            .attr(\"id\", \"focusLineX\")\n            .attr(\"class\", \"focusLine-d3\");\n        focus.append(\"line\")\n            .attr(\"id\", \"focusLineY\")\n            .attr(\"class\", \"focusLine-d3\");\n        focus.append(\"circle\")\n            .attr(\"id\", \"focusCircle\")\n            .attr(\"r\", 4)\n            .attr(\"class\", \"circle-d3 focusCircle-d3\");\n\n        var div = d3.select(container).append(\"div\")\n            .attr(\"class\", \"tooltip-d3\")\n            .style(\"opacity\", 0);\n\n        var bisectDist = d3.bisector(function (d) {\n            return d.dist;\n        }).left;\n\n        svg.append(\"rect\")\n            .attr(\"class\", \"overlay-d3\")\n            .attr(\"width\", width)\n            .attr(\"height\", height)\n            .on(\"mouseover\", function () {\n                focus.style(\"display\", null);\n                className.__createProfileMarker(self, _points[0]);\n            })\n            .on(\"mouseout\", function () {\n                focus.style(\"display\", \"none\");\n                className.__removeProfileMarker(self);\n\n                // tooltips\n                div.transition()\n                    .duration(500)\n                    .style(\"opacity\", 0);\n            })\n            .on(\"mousemove\", function () {\n                var m = d3.mouse(this);\n                var distance = x.invert(m[0]);\n                // Math.max pour viter de sortir de l'array\n                var i = Math.max(1, bisectDist(_points, distance));\n\n                var d0 = _points[i - 1];\n                var d1 = _points[i];\n                var d = distance - d0[0] > d1[0] - distance ? d1 : d0;\n\n                var xc = x(d.dist);\n                var yc = y(d.z);\n\n                focus.select(\"#focusCircle\")\n                    .attr(\"cx\", xc)\n                    .attr(\"cy\", yc);\n                focus.select(\"#focusLineX\")\n                    .attr(\"x1\", xc).attr(\"y1\", y(yDomain[0]))\n                    .attr(\"x2\", xc).attr(\"y2\", y(yDomain[1]));\n                focus.select(\"#focusLineY\")\n                    .attr(\"x1\", x(xDomain[0])).attr(\"y1\", yc)\n                    .attr(\"x2\", x(xDomain[1])).attr(\"y2\", yc);\n\n                className.__updateProfileMarker(self, d);\n\n                // tooltips\n                div.transition()\n                    .duration(200)\n                    .style(\"opacity\", 0.9);\n\n                var _message = \"\";\n                _message += \" Altitude : \" + d.z + \" m\";\n                if (_displayProfileOptions.currentSlope) {\n                    _message += \"<br/> Pente : \" + d.slope + \" %\";\n                }\n                _message += \"<br/> (Lat : \" + d.lat + \"/ Lon : \" + d.lon + \")\";\n\n                div.html(_message)\n                    .style(\"left\", (d3.event.pageX) + \"px\")\n                    .style(\"top\", (d3.event.pageY - 28) + \"px\");\n            });\n\n        // return d3.selectAll(\"rect.overlay\")[0][0];\n        return svg;\n    },\n\n    /**\n     * Display Profile using Amcharts framework. This method needs AmCharts libraries to be loaded.\n     *\n     * @public\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     * @param {Object} className - calling class (ie ElevationPath)\n     * @returns {DOMElement} profil container\n     */\n    displayProfileLibAmCharts : function (data, container, context, className) {\n        var self = context;\n\n        if (!container) {\n            return;\n        }\n\n        if (!data) {\n            return;\n        }\n\n        var _points = data.points;\n\n        var ballonText = \"<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>\";\n        var currentSlope = self.options.displayProfileOptions.currentSlope;\n        if (currentSlope) {\n            ballonText += \"<span class='altiPathValue'>Pente : [[slope]] %</span><br/>\";\n        }\n        ballonText += \"<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>\";\n\n        AmCharts.addInitHandler(function () {});\n\n        if (data.distance > 2000) {\n            data.unit = \"km\";\n            for (let i = 0; i < _points.length; i++) {\n                _points[i].dist /= 1000;\n            }\n        }\n\n        for (let i = 0; i < _points.length; i++) {\n            var dist = _points[i].dist;\n            var coeffArrond = 100;\n            if (dist > 100) {\n                coeffArrond = 1;\n            } else if (dist > 10) {\n                coeffArrond = 10;\n            }\n\n            // Correction arrondi distance totale\n            dist = Math.round(dist * coeffArrond) / coeffArrond;\n            _points[i].dist = dist;\n        }\n\n        var settings = {\n            type : \"serial\",\n            pathToImages : \"http://cdn.amcharts.com/lib/3/images/\",\n            categoryField : \"dist\",\n            autoMarginOffset : 0,\n            marginRight : 10,\n            marginTop : 10,\n            startDuration : 0,\n            color : \"#5E5E5E\",\n            fontSize : 8,\n            theme : \"light\",\n            thousandsSeparator : \"\",\n            numberFormatter : {\n                precision : -1,\n                decimalSeparator : \",\",\n                thousandsSeparator : \" \"\n            },\n            categoryAxis : {\n                color : \"#5E5E5E\",\n                gridPosition : \"start\",\n                minHorizontalGap : 40,\n                tickPosition : \"start\",\n                title : \"Distance (\" + data.unit + \")\",\n                titleColor : \"#5E5E5E\",\n                labelOffset : 0,\n                startOnAxis : true\n            },\n            chartCursor : {\n                animationDuration : 0,\n                bulletsEnabled : true,\n                bulletSize : 10,\n                categoryBalloonEnabled : false,\n                cursorColor : \"#F90\",\n                graphBulletAlpha : 1,\n                graphBulletSize : 1,\n                zoomable : false\n            },\n            trendLines : [],\n            graphs : [{\n                balloonColor : \"#CCCCCC\",\n                balloonText : ballonText,\n                bullet : \"round\",\n                bulletAlpha : 0,\n                bulletBorderColor : \"#FFF\",\n                bulletBorderThickness : 2,\n                bulletColor : \"#F90\",\n                bulletSize : 6,\n                hidden : false,\n                id : \"AmGraph-1\",\n                fillAlphas : 0.4,\n                fillColors : \"#C77A04\",\n                lineAlpha : 1,\n                lineColor : \"#C77A04\",\n                lineThickness : 1,\n                title : \"Altitude\",\n                valueField : \"z\"\n            }],\n            guides : [],\n            valueAxes : [{\n                id : \"ValueAxis-1\",\n                minVerticalGap : 20,\n                title : \"Altitude (m)\"\n            }],\n            balloon : {\n                borderColor : \"#CCCCCC\",\n                borderThickness : 1,\n                fillColor : \"#FFFFFF\",\n                showBullet : true\n            },\n            titles : [],\n            allLabels : [],\n            dataProvider : _points\n        };\n\n        var _containerProfile = AmCharts.makeChart(container, settings);\n\n        _containerProfile.addListener(\"changed\", function (e) {\n            var obj = e.chart.dataProvider[e.index];\n            className.__updateProfileMarker(self, obj);\n        });\n\n        return _containerProfile;\n    }\n};\n\nexport default ProfileElevationPathDOM;\n","/** globals AmCharts, d3 */\n// import CSS\nimport \"../../CSS/Controls/ElevationPath/GPFelevationPath.css\";\n// import \"../../CSS/Controls/ElevationPath/GPFelevationPathStyle.css\";\n// import OpenLayers\n// import Control from \"ol/control/Control\";\nimport Control from \"../Control\";\nimport {\n    Fill,\n    Icon,\n    Stroke,\n    Style,\n    Image,\n    Circle\n} from \"ol/style\";\nimport { Point } from \"ol/geom\";\nimport { Draw as DrawInteraction } from \"ol/interaction\";\nimport { transform as olTransformProj } from \"ol/proj\";\nimport { getDistance as olGetDistanceSphere } from \"ol/sphere\";\nimport Feature from \"ol/Feature\";\nimport VectorLayer from \"ol/layer/Vector\";\nimport VectorSource from \"ol/source/Vector\";\n// import geoportal library access\nimport Gp from \"geoportal-access-lib\";\n// import local\nimport Utils from \"../../Utils/Helper\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport ID from \"../../Utils/SelectorID\";\nimport Markers from \"../Utils/Markers\";\n// import local with ol dependencies\nimport Interactions from \"../Utils/Interactions\";\nimport MeasureToolBox from \"../ToolBoxMeasure/MeasureToolBox\";\nimport Measures from \"../Measures/Measures\";\nimport LayerSwitcher from \"../LayerSwitcher/LayerSwitcher\";\nimport ButtonExport from \"../Export/Export\";\nimport GeoJSONExtended from \"../../Formats/GeoJSON\";\n// DOM\nimport ElevationPathDOM from \"./ElevationPathDOM\";\nimport ProfileElevationPathDOM from \"./ProfileElevationPathDOM\";\n\nvar logger = Logger.getLogger(\"elevationpath\");\n\n/**\n * @classdesc\n *\n * Elevation Path Control. Allows users to draw a path on a Openlayers map see the elevation profile computed with geoportal elevation path web service along that path.\n *\n * @constructor\n * @alias ol.control.ElevationPath\n * @type {ol.control.ElevationPath}\n * @extends ol.control.Control\n * @param {Object} options - options for function call.\n * @param {String} [options.apiKey] - API key for services call (isocurve and autocomplete services). The key \"calcul\" is used by default.\n * @param {Boolean} [options.active = false] - specify if control should be actived at startup. Default is false.\n * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n * @param {Boolean|Object} [options.export = false] - Specify if button \"Export\" is displayed. For the use of the options of the \"Export\" control, see {@link ol.control.Export}\n * @param {Object} [options.elevationOptions = {}] - elevation path service options. See {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~getAltitude Gp.Services.getAltitude()} for available options\n * @param {Object} [options.layerDescription = {}] - Layer informations to be displayed in LayerSwitcher widget (only if a LayerSwitcher is also added to the map)\n * @param {String} [options.layerDescription.title = \"Profil altimtrique\"] - Layer title to be displayed in LayerSwitcher\n * @param {String} [options.layerDescription.description = \"Mon profil altimtrique\"] - Layer description to be displayed in LayerSwitcher\n * @param {Object} [options.stylesOptions] - styles management\n * @param {Object} [options.stylesOptions.marker = {}] - styles management of marker displayed on map when the user follows the elevation path. Specified with an {@link https://openlayers.org/en/latest/apidoc/module-ol_style_Image-ImageStyle.html ol.style.Image} subclass object\n * @param {Object} [options.stylesOptions.draw = {}] - styles used when drawing. Specified with following properties.\n * @param {Object} [options.stylesOptions.draw.pointer = {}] - Style for mouse pointer when drawing the line. Specified with an {@link https://openlayers.org/en/latest/apidoc/module-ol_style_Image-ImageStyle.html ol.style.Image} subclass object.\n * @param {Object} [options.stylesOptions.draw.start = {}] - Line Style when drawing. Specified with an {@link https://openlayers.org/en/latest/apidoc/module-ol_style_Stroke-Stroke.html ol.style.Stroke} object.\n * @param {Object} [options.stylesOptions.draw.finish = {}] - Line Style when finished drawing. Specified with an {@link https://openlayers.org/en/latest/apidoc/module-ol_style_Stroke-Stroke.html ol.style.Stroke} object.\n * @param {Object} [options.displayProfileOptions = {}] - profile options.\n * @param {Boolean} [options.displayProfileOptions.totalDistance = true] - display the total distance of the path\n * @param {Boolean} [options.displayProfileOptions.greaterSlope = true] - display the greater slope into the graph\n * @param {Boolean} [options.displayProfileOptions.meanSlope = true] -  display the mean slope into the graph\n * @param {Boolean} [options.displayProfileOptions.ascendingElevation = true] -  display the ascending elevation into the graph\n * @param {Boolean} [options.displayProfileOptions.descendingElevation = true] -  display the descending elevation into the graph\n * @param {Boolean} [options.displayProfileOptions.currentSlope = true] -  display current slope value on profile mouseover\n * @param {Function} [options.displayProfileOptions.apply] - function to display profile if you want to cutomise it. By default, ([DISPLAY_PROFILE_BY_DEFAULT()](./ol.control.ElevationPath.html#.DISPLAY_PROFILE_BY_DEFAULT)) is used. Helper functions to use with D3 ([DISPLAY_PROFILE_LIB_D3()](./ol.control.ElevationPath.html#.DISPLAY_PROFILE_LIB_D3)) or AmCharts ([DISPLAY_PROFILE_LIB_AMCHARTS()](./ol.control.ElevationPath.html#.DISPLAY_PROFILE_LIB_AMCHARTS)) frameworks are also provided. You may also provide your own function.\n * @param {Object} [options.displayProfileOptions.target] - DOM container to use to display the profile.\n * @fires elevationpath:drawstart\n * @fires elevationpath:drawend\n * @fires elevationpath:compute\n * @fires export:compute\n * @example\n *\n * var measure = new ol.control.ElevationPath({\n *    export : false,\n *    stylesOptions : {\n *     draw : {\n *       finish : new ol.style.Stroke({\n *            color : \"rgba(0, 0, 0, 0.5)\",\n *            width : 2\n *       })\n *     },\n *    }\n *    displayProfileOptions : {\n *       apply : ol.control.ElevationPath.DISPLAY_PROFILE_RAW,\n *    }\n * });\n *\n * // if you want to pluggued the control Export with options :\n * var measure = new ol.control.ElevationPath({\n *    export : {\n *      name : \"export\",\n *      format : \"geojson\",\n *      title : \"Exporter\",\n *      menu : false\n *    }\n * });\n *\n * Exemples :\n * - displayProfileOptions.apply : null\n * - displayProfileOptions.apply : function (elevations, container, context) {  // do some stuff... }\n * - displayProfileOptions.apply : ol.control.ElevationPath.DISPLAY_PROFILE_{LIB_AMCHARTS | LIB_D3 | RAW}\n *\n */\nvar ElevationPath = class ElevationPath extends Control {\n\n    /**\n     * See {@link ol.control.ElevationPath}\n     * @module ElevationPath\n     * @alias module:~controls/ElevationPath\n     * @param {*} options - options\n     * @example\n     * import ElevationPath from \"gpf-ext-ol/controls/ElevationPath\"\n     * ou \n     * import { ElevationPath } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        logger.trace(\"ElevationPath()\");\n\n        /**\n         * options\n         * @private\n         */\n        options = options || {};\n\n        // call ol.control.Control constructor\n        super({\n            element : options.element,\n            target : options.target,\n            render : options.render\n        });\n\n        if (!(this instanceof ElevationPath)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        /**\n         * Nom de la classe (heritage)\n         * @private\n         */\n        this.CLASSNAME = \"ElevationPath\";\n\n        // uuid\n        this._uid = ID.generate();\n\n        // container : HTMLElement\n        this._showContainer = null;\n        this._pictoButton = null;\n        this._panelContainer = null;\n        this._profileContainer = null;\n        this._waitingContainer = null;\n        this._infoContainer = null;\n\n        // timer sur la fenetre d'informations des donnes\n        this._timerHdlr = null;\n\n        // objet de type \"ol.style\"\n        this._drawStyleStart = null;\n        this._drawStyleFinish = null;\n        this._markerStyle = null;\n\n        // graph\n        this._profile = null;\n\n        // data elevations\n        this._data = {};\n\n        /* objet de type\n            \"ol.source.Vector\",\n            \"ol.layer.Vector\",\n            \"ol.interaction.Draw\"\n        */\n        this._measureSource = null;\n        this._measureVector = null;\n        this._measureDraw = null;\n\n        // objet de type ol.feature, saisie en cours\n        this._lastSketch = null;\n        this._currentSketch = null;\n\n        // objet de type ol.feature, marker\n        this._marker = null;\n\n        // initialisation du composant\n        this._initialize(options);\n\n        // creation du DOM container\n        this._container = this._initializeContainer();\n\n        // ajout du container\n        (this.element) ? this.element.appendChild(this._container) : this.element = this._container;\n\n        return this;\n    }\n\n    /**\n    * Styles applied by default if stylesOptions property is not set.\n    */\n    static DEFAULT_STYLES = {\n        // styling drawing by default\n        // see => Measures.DEFAULTS_STYLES\n        // stying marker to the profile by default\n        MARKER : new Icon({\n            src : Markers[\"lightOrange\"],\n            // image avec un mauvais ratio size 51/38 pixels\n            // src : \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAsCAYAAAAATWqyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTtJREFUeNq8WGtsFUUU/rb3gtdCAykFG9AUDTQUKimhxUewEusrJYoBo4FfEgoqotHERH6oP9TGmJhIrIlWAf9hjAaEiME2pgFfVVpFii8sWqIQLLSx3EJLW7p+Z2Z2b2l7d/b23vZLTmZ2duacb2fmnDk7DlKA67rXs1hJKacsohRQppjXFygnKT9TDlH2O47zFzIFGnco91EOuqnjoBnr2Ow4FhIlLN6m3DykFTh3BGj/Doj/CfSe082xPCDnBmDWTUBeyXDVjZTHOUNHUiZCEs+weI0ySTV0/w0c2wa07gIungn+vOx8YN46oPhpYOp1Xms/5TmSeSMUERKImFnYqBoGuPRNL5LEW8BgX2rrmjWZZLYApS8BUW8r4T0zO5eTEjFr+S6lSjV0HgPqVwNdf6S30abNB+7aDeQWey3bKZtIxvU5DxvyrE/izJfAvuXpkxCIDtElOjWqjK2RM8LZWMbiG0oEnUc5kB7a14WMYvI04H56du5ieZKluZWz8r0/IyQh5TuKRH8cqFuTeRIC0Sm6xYbYok1j21+ahyhLVO3wC8D5VowbRLfY0FhibOulIavDLEoRZyD8sJDeMWBXKG5ZsIobsdDsg+OMq3u1m1u9KQo8zP45EqjRxOUpk6i50IRl4FuGjpZtwUoiMYa314GFj/EzIsN8n8v+C1e4kfvwcm+wnhsZY27xQ8oiWZpKrWRQB6tAElfxpKnjsCdGklDzG9HvpI/0DYLYEpsalVnmAAM6fgR62oMHl70C5N9mn3rpI32DILbEpkZ5ljlFgbPNFtebzij5VPhNKX1lTBASNtXSzPZ3cxCuvVOH7FTCu4yxeZDGbCES0z5+PniQ3uGpwTYmYTOWCPGTpgYP6u9OnYhtzBCbQkSH0NiM4EEdP6VOxDYmYbNLiJxQ1elFwYPaG3XQCn3QHddjgpCweUKI6K2bvzw4YROf//rJob6fZl/H2FRoFiINfqo3qyzYwD8MVIeYLw32J+8j76SP9A2C2BKbGg1CZL+EF/W4YKP9a3/fCeyhkrY9DOOXEu1SlzZ5J31sSNjqURm/OfQkY9qgvkYOvXhbuH0g505Oga7HT9rPF9+t5+pDL0ulwzt46FV5ROax+JUSRRtP0LoHMK64+xNg7iqVEVOKSKRVxRGpsKhRnaRD4SPjR0J0axKCGmP7ilQxm4X8d8xXmfvHJZlPkCR3WfODl9FLMlxCIhevSJ5Nwzo1XdKxYpe3hpmB6BKdmoS43VqPxIgsni+aWOg8biZ3f+nLmSMiuvKWek/P01az7QdLyNVT7lC/l59WAKcb0iMxhzpW1nvmvpDtSiKD1l9OkpnDgv8UyMWFU9wvTP8vdY6NhJwnD1JVtso2OiiLSeL0iJUbNfg6zikVVwRTyOn2HWOfjfLtHgnBhtFIJCViyNDZUatdmnGlaFPqJIoe1WM1aqlz71ivJbLNobgAA9zgu7nZ/vstHAk5WVdzaPRqmGC5lER6kjpV4OWJdq+1kkshSk4VH9izcy/bV66qSPQZV+0J9G7rTY6+XNmqHmYwyJVV24kse1X31dhKHdasygkzy+a64oC4nWr47F4e858nSbLv4V/KAe9JKpVDrx/SImLIXMOiRUKdujESl+49O8xVZxpXzVc/C/I/RxL/hgq8YYkYhev9q6kVO4d9B+sr3vdICNaHJTHWW8Ya/87wqy2uWwstUk/gTYw3aCRGOarMDfS67kfFWqSuIe9imAjQEC272nJHixYNaSvGRIIGN49ywbsZEw1zI11N6TZSHeaGORn+F2AAJtRIMx4t+hUAAAAASUVORK5CYII=\",\n            anchor : [0.5, 1],\n            snapToPixel : true\n        }),\n        // styling service results points by default\n        RESULTS : {\n            // INFO orient maintenance !\n            imageRadius : 5,\n            imageFillColor : \"rgba(128, 128, 128, 0.2)\",\n            imageStrokeColor : \"rgba(0, 0, 0, 0.7)\",\n            imageStrokeWidth : 2\n        }\n        // FIXME ???\n        // PROFILE : {\n        //     type : \"serial\",\n        //     pathToImages : \"http://cdn.amcharts.com/lib/3/images/\",\n        //     categoryField : \"dist\",\n        //     autoMarginOffset : 0,\n        //     marginRight : 10,\n        //     marginTop : 10,\n        //     startDuration : 0,\n        //     color : \"#5E5E5E\",\n        //     fontSize : 10,\n        //     theme : \"light\",\n        //     thousandsSeparator : \"\",\n        //     categoryAxis : {\n        //         color : \"#5E5E5E\",\n        //         gridPosition : \"start\",\n        //         minHorizontalGap : 40,\n        //         tickPosition : \"start\",\n        //         title : \"Distance (km)\",\n        //         titleColor : \"#5E5E5E\",\n        //         startOnAxis : true\n        //     },\n        //     chartCursor : {\n        //         animationDuration : 0,\n        //         bulletsEnabled : true,\n        //         bulletSize : 10,\n        //         categoryBalloonEnabled : false,\n        //         cursorColor : \"#F90\",\n        //         graphBulletAlpha : 1,\n        //         graphBulletSize : 1,\n        //         zoomable : false\n        //     },\n        //     trendLines : [],\n        //     graphs : [\n        //         {\n        //             balloonColor : \"#CCCCCC\",\n        //             balloonText : \"<span class='altiPathValue'>[[title]] : [[value]]m</span><br/><span class='altiPathCoords'>(lat: [[lat]] / lon:[[lon]])</span>\",\n        //             bullet : \"round\",\n        //             bulletAlpha : 0,\n        //             bulletBorderColor : \"#FFF\",\n        //             bulletBorderThickness : 2,currentSlope\n        //             bulletColor : \"#F90\",\n        //             bulletSize : 6,\n        //             hidden : false,\n        //             id : \"AmGraph-1\",\n        //             fillAlphas : 0.4,\n        //             fillColors : \"#C77A04\",\n        //             lineAlpha : 1,\n        //             lineColor : \"#C77A04\",\n        //             lineThickness : 1,\n        //             title : \"Altitude\",\n        //             valueField : \"z\"\n        //         }\n        //     ],\n        //     guides : [],\n        //     valueAxes : [\n        //         {\n        //             id : \"ValueAxis-1\",\n        //             minVerticalGap : 20,\n        //             title : \"Altitude (m)\"\n        //         }\n        //     ],\n        //     allLabels : [],\n        //     balloon : {\n        //         borderColor : \"#CCCCCC\",\n        //         borderThickness : 1,\n        //         fillColor : \"#FFFFFF\",\n        //         showBullet : true\n        //     },\n        //     titles : []\n        // }\n    };\n\n    /**\n     * suppression du marker\n     *\n     * @param {Object} context - context\n     *\n     * @private\n     */\n    static __removeProfileMarker (context) {\n        var self = context;\n        // suppression de l'ancien marker\n        if (self._marker) {\n            self._measureSource.removeFeature(self._marker);\n            self._marker = null;\n        }\n    };\n\n    /**\n     * suppression du marker\n     *\n     * @param {Object} context - context\n     * @param {Object} d - d\n     *\n     * @private\n     */\n    static __createProfileMarker (context, d) {\n        var self = context;\n        // suppression de l'ancien marker\n        if (self._marker) {\n            self._measureSource.removeFeature(self._marker);\n            self._marker = null;\n        }\n        var map = self.getMap();\n        var proj = map.getView().getProjection();\n\n        var _coordinate = olTransformProj([d.lon, d.lat], \"EPSG:4326\", proj);\n        var _coordinateProj = self._measureSource\n            .getFeatures()[0]\n            .getGeometry()\n            .getClosestPoint(_coordinate);\n\n        var _geometry = new Point(_coordinateProj);\n\n        self._marker = new Feature({\n            geometry : _geometry\n        });\n        logger.trace(_geometry);\n\n        // style\n        self._marker.setStyle(self._markerStyle);\n\n        // ajout du marker sur la map\n        self._measureSource.addFeature(self._marker);\n    }\n\n    /**\n     * mise  jour du marker\n     *\n     * @param {Object} context - context\n     * @param {Object} d - data\n     *\n     * @private\n     */\n    static __updateProfileMarker (context, d) {\n        var self = context;\n        ElevationPath.__removeProfileMarker(self);\n        ElevationPath.__createProfileMarker(self, d);\n    }\n\n    /**\n     * TODO : customisation possible d'une opration sur le profil\n     *\n     * @param {Object} context - context\n     * @param {Object} d - data\n     *\n     * @private\n     */\n    static __customRawProfileOperation (context, d) {\n        logger.log(\"__customRawProfileOperation\");\n\n        var self = context;\n\n        var _pts = d.points;\n        var _proj = self.getMap().getView().getProjection();\n        for (var i = 0; i < _pts.length; i++) {\n            var obj = _pts[i];\n            var _coordinate = olTransformProj([obj.lon, obj.lat], \"EPSG:4326\", _proj);\n            var _geometry = new Point(_coordinate);\n\n            self._marker = new Feature({\n                geometry : _geometry\n            });\n            logger.trace(_geometry);\n\n            // TODO style en options ?\n            var styles = ElevationPath.DEFAULT_STYLES.RESULTS;\n            var _image = new Circle({\n                radius : styles.imageRadius,\n                stroke : new Stroke({\n                    color : styles.imageStrokeColor,\n                    width : styles.imageStrokeWidth\n                }),\n                fill : new Fill({\n                    color : styles.imageFillColor\n                })\n            });\n            self._marker.setStyle(new Style({\n                image : _image\n            }));\n\n            // ajout du marker sur la map\n            self._measureSource.addFeature(self._marker);\n        }\n    }\n\n    /**\n     * TODO : customisation possible d'une opration sur le profil\n     * Ex. Methode apple dans le DOM : ProfileElevationPathDOM\n     *\n     * @param {Object} context - context\n     * @param {Object} e - event\n     * @private\n     */\n    static __customRawProfileMouseOverEvent (context, e) {\n        logger.log(\"__customRawProfileMouseOverEvent\", context, e);\n    }\n\n    /**\n     * display Profile using Amcharts framework. This method needs AmCharts libraries to be loaded.\n     *\n     * @param {Object} data - collection elevations\n     * @param {HTMLElement} container - container\n     * @param {Object} context - this control object\n     */\n    static DISPLAY_PROFILE_LIB_AMCHARTS (data, container, context) {\n        logger.trace(\"ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS\");\n\n        // Calcul du profile\n        if (typeof AmCharts === \"undefined\") {\n            logger.log(\"Lib. AmCharts is not loaded !\");\n            return;\n        }\n\n        var profile = ProfileElevationPathDOM.displayProfileLibAmCharts(data, container, context, ElevationPath);\n        // on sauvegarde le profil du container dans l'objet\n        if (profile) {\n            this._profile = profile;\n        }\n    }\n\n    /**\n     * display Profile using D3 javascript framework. This method needs D3 libraries to be loaded.\n     *\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     */\n    static DISPLAY_PROFILE_LIB_D3 (data, container, context) {\n        logger.trace(\"ElevationPath.DISPLAY_PROFILE_LIB_D3\");\n\n        // Calcul du profile\n        if (typeof d3 === \"undefined\") {\n            logger.log(\"Lib. D3 is not loaded !\");\n            return;\n        }\n\n        var profile = ProfileElevationPathDOM.displayProfileLibD3(data, container, context, ElevationPath);\n        // on sauvegarde le profil du container dans l'objet\n        if (profile) {\n            this._profile = profile;\n        }\n    }\n\n    /**\n     * display Profile without graphical rendering (raw service response)\n     *\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     */\n    static DISPLAY_PROFILE_RAW (data, container, context) {\n        logger.trace(\"ElevationPath.DISPLAY_PROFILE_RAW\");\n\n        var profile = ProfileElevationPathDOM.displayProfileRaw(data, container, context, ElevationPath);\n        // on sauvegarde le profil du container dans l'objet\n        if (profile) {\n            this._profile = profile;\n        }\n    };\n\n    /**\n     * Display Profile function used by default : no additonal framework needed.\n     *\n     * @param {Object} data - elevations values for profile\n     * @param {HTMLElement} container - html container where to display profile\n     * @param {Object} context - this control object\n     */\n    static DISPLAY_PROFILE_BY_DEFAULT (data, container, context) {\n        logger.trace(\"ElevationPath.DISPLAY_PROFILE_BY_DEFAULT\");\n\n        var profile = ProfileElevationPathDOM.displayProfileByDefault(data, container, context, ElevationPath);\n        // on sauvegarde le profil du container dans l'objet\n        if (profile) {\n            this._profile = profile;\n        }\n    };\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n\n    /**\n     * Attach control to map. Overloaded ol.control.Control.setMap() method.\n     *\n     * @param {ol.Map} map - Map.\n     */\n    setMap (map) {\n        logger.trace(\"ElevationPath::setMap\");\n\n        if (map) {\n            // activation des interactions de dessin selon la valeur de\n            // l'option active\n            if (this.options.active) {\n                // on n'affiche pas la fenetre de profile s'il n'existe pas...\n                if (this._profile === null) {\n                    this._panelContainer.style.display = \"none\";\n                    // this._panelContainer.style.visibility = \"hidden\";\n                }\n                this._initMeasureInteraction(map);\n                this._addMeasureInteraction(map);\n            }\n\n            // ajout du composant dans une toolbox\n            if (!this.options.target && !this.options.position) {\n                MeasureToolBox.add(map, this);\n            }\n\n            // ajout d'un bouton d'export\n            if (this.options.export) {\n                var opts = Utils.assign({ control : this }, this.options.export);\n                this.export = new ButtonExport(opts);\n                this.export.render();\n                var self = this;\n                this.export.on(\"export:compute\", (e) => {\n                    self.dispatchEvent({\n                        type : \"export:compute\",\n                        content : e.content\n                    });\n                });\n            }\n        }\n\n        // on appelle la mthode setMap originale d'OpenLayers\n        super.setMap(map);\n\n        // position\n        if (this.options.position) {\n            this.setPosition(this.options.position);\n        }\n    };\n\n    /**\n     * Returns true if widget is actived (drawing),\n     * false otherwise\n     *\n     * @returns {Boolean} active - true or false\n     */\n    getActive () {\n        logger.trace(\"ElevationPath::getActive\");\n        return this.options.active;\n    }\n\n    /**\n     * Actived widget drawing or not\n     *\n     * @param {Boolean} active - true / false\n     */\n    setActive (active) {\n        logger.trace(\"ElevationPath::setActive\");\n        this.options.active = active;\n    }\n\n    /**\n     * Get elevation data\n     *\n     * @returns {Object} data - elevations\n     * @example\n     * {\n     *        type // \"elevationpath\"\n     *        greaterSlope // pente max\n     *        meanSlope  // pente moyenne\n     *        distancePlus // distance cumule positive\n     *        distanceMinus // distance cumule ngative\n     *        ascendingElevation // dnivel cumule positive\n     *        descendingElevation // dnivel cumule ngative\n     *        altMin // altitude min\n     *        altMax // altitude max\n     *        distance // distance totale\n     *        unit // unit des mesures de distance\n     *        points // elevations\n     *   }\n     */\n    getData () {\n        return Utils.assign({\n            type : \"elevationpath\"\n        }, this._data);\n    }\n\n    /**\n     * Set profile data\n     *\n     * @param {*} data - elevations\n     * @example\n     * {\n     *        greaterSlope // pente max\n     *        meanSlope  // pente moyenne\n     *        distancePlus // distance cumule positive\n     *        distanceMinus // distance cumule ngative\n     *        ascendingElevation // dnivel cumule positive\n     *        descendingElevation // dnivel cumule ngative\n     *        altMin // altitude min\n     *        altMax // altitude max\n     *        distance // distance totale\n     *        unit // unit des mesures de distance\n     *        points // elevations\n     * }\n     */\n    setData (data) {\n        this._data = data;\n    }\n\n    /**\n     * Get container\n     *\n     * @returns {DOMElement} container\n     */\n    getContainer () {\n        return this._container;\n    }\n\n    /**\n     * Get layer\n     *\n     * @returns {ol.layer.Vector} layer\n     */\n    getLayer () {\n        return this._measureVector;\n    }\n\n    /**\n     * Set layer\n     *\n     * @param {Object} layer - ol.layer.Vector profil layer\n     */\n    setLayer (layer) {\n        if (!layer) {\n            this._measureVector = null;\n            return;\n        }\n\n        if (!(layer instanceof VectorLayer)) {\n            logger.log(\"no valid layer given for hosting drawn features.\");\n            return;\n        }\n\n        // application des styles\n        layer.setStyle(this._drawStyleFinish);\n        // sauvegarde\n        this._measureVector = layer;\n        this._measureSource = layer.getSource();\n    }\n\n    /**\n     * Get vector layer\n     *\n     * @returns {String} geojson - GeoJSON format layer\n     */\n    getGeoJSON () {\n        var features = this._measureVector.getSource().getFeatures();\n\n        var Format = new GeoJSONExtended({\n            defaultStyle : this._drawStyleFinish\n        });\n        // INFO\n        // par defaut, webmercator ou \"EPSG:3857\"\n        var geojson = Format.writeFeatures(features, {\n            dataProjection : \"EPSG:4326\",\n            featureProjection : \"EPSG:3857\"\n        });\n\n        return geojson;\n    }\n\n    /**\n     * Get default style\n     *\n     * @returns {ol.style} style\n     */\n    getStyle () {\n        return this._drawStyleFinish;\n    }\n\n    /**\n     * clean\n     * @param {Boolean} remove - remove layer\n     */\n    clean (remove) {\n        logger.trace(\"ElevationPath::clean\");\n\n        var map = this.getMap();\n\n        // fenetre du profil\n        this._panelContainer.style.display = \"none\";\n        // this._panelContainer.style.visibility = \"hidden\";\n\n        // picto\n        this._pictoButton.setAttribute(\"aria-pressed\", false);\n\n        // this._removeMeasure();\n        this._removeProfile();\n        this._removeMeasureInteraction(map, typeof remove !== \"undefined\" ? remove : false);\n\n        this.setLayer();\n    }\n\n    /**\n     * This method is public.\n     * It allows to init the control.\n     * @fixme\n     */\n    init () {\n        // FIXME\n        // le panneau du profil ne peut pas afficher un profil si il est cach\n        // car le profil est calcul en fonction de la taille du panneau (clientHeight / clientWidth),\n        // et ces valeurs sont  0 !?\n        this._pictoButton.setAttribute(\"aria-pressed\", true);\n        this._panelContainer.style.display = \"block\";\n        this._displayProfile(this._data);\n        this._waitingContainer.className = \"GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden\";\n    }\n\n    // ################################################################### //\n    // ##################### init component ############################## //\n    // ################################################################### //\n\n    /**\n     * Initialize control (called by constructor)\n     *\n     * @param {Object} options - options\n     *\n     * @private\n     */\n    _initialize (options) {\n        logger.trace(\"ElevationPath::_initialize : \", options);\n\n        // liste des options\n        this.options = {\n            target : null,\n            render : null,\n            active : false,\n            apiKey : null,\n            export : false,\n            elevationOptions : {\n                outputFormat : \"json\"\n            },\n            layerDescription : {\n                title : \"Profil altimtrique\",\n                description : \"Mon profil altimtrique\"\n            },\n            displayProfileOptions : {\n                totalDistance : true,\n                greaterSlope : true,\n                meanSlope : true,\n                ascendingElevation : true,\n                descendingElevation : true,\n                currentSlope : true,\n                apply : null,\n                target : null\n            },\n            stylesOptions : {\n                profile : null,\n                draw : null,\n                marker : null\n            }\n        };\n\n        // merge with user options\n        Utils.mergeParams(this.options, options);\n\n        this.options.target = options.target || null;\n        // this.options.render = options.render || null;\n\n        // cle API sur le service\n        this.options.apiKey = options.apiKey;\n\n        // gestion de l'affichage du profil\n        var _profile = options.displayProfileOptions || {};\n\n        // bouton export\n        this.export = null;\n\n        // gestion de la fonction du profil\n        var displayFunction = _profile.apply;\n        this.options.displayProfileOptions.apply = (typeof displayFunction === \"function\")\n            ? displayFunction : ElevationPath.DISPLAY_PROFILE_BY_DEFAULT;\n\n        // gestion du container du profil\n        var displayContainer = _profile.target;\n        this.options.displayProfileOptions.target = (typeof displayContainer !== \"undefined\")\n            ? displayContainer : null;\n\n        // gestion des styles\n        var _styles = options.stylesOptions || {};\n\n        // FIXME ???\n        // gestion du style du profil\n        // var profileStyle = _styles.profile;\n        // this.options.stylesOptions.profile = ( typeof profileStyle === \"undefined\" || Object.keys(profileStyle).length === 0 ) ?\n        //     ElevationPath.DEFAULT_STYLES.PROFILE : profileStyle;\n        // this._createStylingProfile();\n\n        // gestion des styles du trac\n        this.options.stylesOptions.draw = _styles.draw || {};\n        this._createStylingDraw();\n\n        // gestion des styles du marker\n        this.options.stylesOptions.marker = _styles.marker || {};\n        this._createStylingMarker();\n    }\n\n    /**\n     * initialize component container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _initializeContainer () {\n        logger.trace(\"ElevationPath::_initializeContainer : \", this._uid);\n\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var picto = this._pictoButton = this._createShowElevationPathPictoElement();\n        container.appendChild(picto);\n\n        // mode \"active\"\n        if (this.options.active) {\n            this._pictoButton.click();\n        }\n\n        // panneau\n        var panel = this._panelContainer = this._createElevationPathPanelElement();\n        var panelDiv = this._createElevationPathPanelDivElement();\n        panel.appendChild(panelDiv);\n\n        // header\n        var header = this._createElevationPathPanelHeaderElement();\n        panelDiv.appendChild(header);\n\n        // profile\n        var profile = this._profileContainer = this._createElevationPathPanelProfilElement();\n        panelDiv.appendChild(profile);\n\n        // waiting\n        var waiting = this._waitingContainer = this._createElevationPathWaitingElement();\n        panelDiv.appendChild(waiting);\n\n        // info\n        var info = this._infoContainer = this._createElevationPathInformationsElement();\n        panelDiv.appendChild(info);\n\n        if (this.options.displayProfileOptions.target === null) {\n            container.appendChild(panel);\n        }\n\n        return container;\n    }\n\n    // ################################################################### //\n    // ###################### init styles ################################ //\n    // ################################################################### //\n\n    /**\n     * create style marker object : \"ol.style\"\n     *\n     * @private\n     */\n    _createStylingMarker () {\n        logger.trace(\"ElevationPath::_createStylingMarker \");\n\n        var marker = ElevationPath.DEFAULT_STYLES.MARKER;\n        logger.trace(\"style marker\", marker);\n\n        // si marker n'est pas un objet ol.style.Image, on applique le\n        // style par dfaut.\n        if (this.options.stylesOptions.marker instanceof Image) {\n            marker = this.options.stylesOptions.marker;\n        }\n\n        this._markerStyle = new Style({\n            image : marker\n        });\n    }\n\n    /**\n     * create style draw object : \"ol.style\"\n     *\n     * @private\n     */\n    _createStylingDraw () {\n        logger.trace(\"ElevationPath::_createStylingDraw\");\n\n        // on interprete les params pour y creer un objet ol.Style\n        var styles = this.options.stylesOptions.draw;\n\n        // style de depart\n        logger.trace(\"style start\", styles.start);\n\n        // Creation  partir des styles par dfaut\n        var startStyleOpts = {\n            image : Measures.DEFAULT_POINTER_STYLE,\n            stroke : Measures.DEFAULT_DRAW_START_STYLE.getStroke()\n        };\n        // ecrasement  partir des proprits renseignes\n        if (styles.hasOwnProperty(\"pointer\") && styles.pointer instanceof Image) {\n            startStyleOpts.image = styles.pointer;\n        }\n        if (styles.hasOwnProperty(\"start\") && styles.start instanceof Stroke) {\n            startStyleOpts.stroke = styles.start;\n        }\n\n        this._drawStyleStart = new Style(startStyleOpts);\n\n        // style de fin\n        logger.trace(\"style finish\", styles.finish);\n\n        var finishStyleOpts = {\n            stroke : Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()\n        };\n        // ecrasement  partir des proprits renseignes\n        if (styles.hasOwnProperty(\"finish\") && styles.finish instanceof Stroke) {\n            finishStyleOpts.stroke = styles.finish;\n        }\n\n        this._drawStyleFinish = new Style(finishStyleOpts);\n    }\n\n    /**\n     * create style graph\n     * FIXME :  revoir car ne sert que pour AmCharts !?\n     *\n     * @private\n     */\n    _createStylingProfile () {\n        logger.trace(\"ElevationPath::_createStylingProfile\");\n\n        var userStyles = this.options.stylesOptions.profile;\n\n        logger.trace(\"style profile\", userStyles);\n\n        var defaultStyle = ElevationPath.DEFAULT_STYLES.PROFILE;\n        Object.keys(defaultStyle).forEach((key) => {\n            if (!userStyles.hasOwnProperty(key)) {\n                // si le style user n'existe pas, on ajoute celui par defaut\n                userStyles[key] = defaultStyle[key];\n            } else {\n                var _defaultStyle = defaultStyle[key];\n                if (typeof _defaultStyle === \"object\") {\n                    // on merge avec un objet,\n                    // les styles user ecrasent ceux par defaut...\n                    Utils.mergeParams(_defaultStyle, userStyles[key]);\n                    userStyles[key] = _defaultStyle;\n                }\n            }\n        });\n    }\n\n    // ################################################################### //\n    // ################### Map interactions management ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onShowElevationPathClick,\n     * and initialize a vector layer, if widget is active.\n     *\n     * @param {ol.Map} map - Map\n     * @private\n     */\n    _initMeasureInteraction (map) {\n        logger.trace(\"ElevationPath::_initMeasureInteraction()\");\n\n        // var map = this.getMap();\n        if (!map) {\n            return;\n        }\n\n        this._measureSource = new VectorSource();\n\n        this._measureVector = new VectorLayer({\n            source : this._measureSource,\n            style : this._drawStyleFinish\n        });\n\n        // on rajoute le champ gpResultLayerId permettant d'identifier une couche cre par le composant.\n        this._measureVector.gpResultLayerId = \"measure:profil\";\n\n        map.addLayer(this._measureVector);\n\n        // Si un layer switcher est prsent dans la carte, on lui affecte des informations pour cette couche\n        map.getControls().forEach(\n            (control) => {\n                if (control instanceof LayerSwitcher) {\n                    // un layer switcher est prsent dans la carte\n                    var layerId = this._measureVector.gpLayerId;\n                    // on n'ajoute des informations que s'il n'y en a pas dj (si le titre est le numro par dfaut)\n                    if (control._layers[layerId].title === layerId) {\n                        control.addLayer(\n                            this._measureVector, {\n                                title : this.options.layerDescription.title,\n                                description : this.options.layerDescription.description\n                            }\n                        );\n                    }\n                }\n            }\n        );\n    }\n\n    /**\n     * this method is called by this.onShowElevationPathClick,\n     * and add draw interaction to map, if widget is not active.\n     *\n     * @param {ol.Map} map - Map\n     * @private\n     */\n    _addMeasureInteraction (map) {\n        logger.trace(\"ElevationPath::_addMeasureInteraction()\");\n\n        // var map = this.getMap();\n        if (!map) {\n            return;\n        }\n\n        // Creates and adds the interaction\n        this._measureDraw = new DrawInteraction({\n            source : this._measureSource,\n            type : \"LineString\",\n            style : this._drawStyleStart,\n            stopClick : true\n        });\n\n        this._measureDraw.setProperties({\n            name : \"ElevationPath\",\n            source : this\n        });\n\n        map.addInteraction(this._measureDraw);\n\n        // Event start\n        this._measureDraw.on(\"drawstart\", (evt) => {\n            logger.trace(\"drawstart\", evt);\n\n            // delete marker current\n            if (this._marker !== null) {\n                this._measureSource.removeFeature(this._marker);\n                this._marker = null;\n            }\n\n            // set new feature and remove last feature\n            if (this._lastSketch !== null) {\n                this._measureSource.removeFeature(this._lastSketch);\n                this._lastSketch = null;\n            }\n            this._currentSketch = evt.feature;\n\n            // and, all features\n            var _features = this._measureSource.getFeatures();\n            for (var i = 0; i < _features.length; i++) {\n                this._measureSource.removeFeature(_features[i]);\n            }\n            /**\n            * event triggered at the start of drawing input\n            * @event elevationpath:drawstart\n            */\n            this.dispatchEvent(\"elevationpath:drawstart\");\n        });\n\n        // Event end\n        this._measureDraw.on(\"drawend\", (evt) => {\n            logger.trace(\"drawend\", evt);\n            /**\n            * event triggered at the end of drawing input\n            * @event elevationpath:drawend\n            */\n            this.dispatchEvent(\"elevationpath:drawend\");\n\n            // set feature\n            this._lastSketch = this._currentSketch;\n\n            // Si il n'y a pas de surcharge utilisateur de la fonction de recuperation des\n            // resultats, on realise l'affichage du panneau\n            if (typeof this.options.elevationOptions.onSuccess === \"undefined\" && this.options.displayProfileOptions.target === null) {\n                this._panelContainer.style.display = \"block\";\n                // self._panelContainer.style.visibility = \"visible\";\n            }\n\n            // set an alti request and display results\n            this._measureDraw.setActive(false);\n            this._requestService();\n        });\n    }\n\n    /**\n     * this method is called by this.onShowElevationPathClick,\n     * and removes draw interaction from map (if exists)\n     * And removes layer too...\n     *\n     * @param {ol.Map} map - Map\n     * @param {Boolean} remove - Remove layer\n     * @private\n     */\n    _removeMeasureInteraction (map, remove) {\n        logger.trace(\"ElevationPath::_removeMeasureInteraction()\");\n\n        // var map = this.getMap();\n        if (!map) {\n            return;\n        }\n\n        if (remove) {\n            if (this._measureVector) {\n                map.removeLayer(this._measureVector);\n                this._measureVector = null;\n            }\n        }\n\n        if (this._measureDraw) {\n            map.removeInteraction(this._measureDraw);\n            this._measureDraw = null;\n        }\n    }\n\n    // ################################################################### //\n    // ############################ Alti request ######################### //\n    // ################################################################### //\n\n    /**\n     * transforme geometry feature to position coordinate (service)\n     *\n     * @returns {Object[]} geometry\n     *\n     * @private\n     */\n    _getGeometry () {\n        // INFO\n        // on transmet toujours des coordonnes au service en EPSG:4326\n\n        if (this._currentSketch === null) {\n            logger.warn(\"Current Feature undefined !?\");\n            return;\n        }\n\n        var geometry = [];\n\n        var map = this.getMap();\n        var projSrc = map.getView().getProjection();\n        var projDest = \"EPSG:4326\";\n        var coordinates = this._currentSketch.getGeometry().getCoordinates();\n        for (var i = 0; i < coordinates.length; i++) {\n            var xy = coordinates[i];\n            var ll = xy;\n            // on transmet au service des coordonnes en EPSG:4326\n            if (projSrc !== projDest) {\n                ll = olTransformProj(xy, projSrc, projDest);\n            }\n            geometry.push({\n                lon : Math.round(ll[0] * 1e8) / 1e8,\n                lat : Math.round(ll[1] * 1e8) / 1e8\n            });\n        }\n\n        return geometry;\n    }\n\n    /**\n     * get geometry feature length\n     *\n     * @returns {Integer} length\n     *\n     * @private\n     */\n    _getLength () {\n        if (this._currentSketch === null) {\n            logger.warn(\"Current Feature undefined !?\");\n            return;\n        }\n\n        var length = 0;\n\n        var map = this.getMap();\n        var projSrc = map.getView().getProjection();\n        var projDest = \"EPSG:4326\";\n\n        var coordinates = this._currentSketch.getGeometry().getCoordinates();\n        for (var i = 0, ii = coordinates.length - 1; i < ii; ++i) {\n            var c1 = olTransformProj(coordinates[i], projSrc, projDest);\n            var c2 = olTransformProj(coordinates[i + 1], projSrc, projDest);\n            c1[0] = Math.round(c1[0] * 1e8) / 1e8;\n            c1[1] = Math.round(c1[1] * 1e8) / 1e8;\n            c2[0] = Math.round(c2[0] * 1e8) / 1e8;\n            c2[1] = Math.round(c2[1] * 1e8) / 1e8;\n            length += olGetDistanceSphere(c1, c2);\n        }\n\n        return length;\n    }\n\n    /**\n     * get geometry feature point coords in EPSG:4326 [lon, lat]\n     *\n     * @returns {Array} point coords in EPSG:4326 [lon, lat]\n     *\n     * @private\n     */\n    _getSketchCoords () {\n        if (this._currentSketch === null) {\n            logger.warn(\"Current Feature undefined !?\");\n            return;\n        }\n\n        var map = this.getMap();\n        var projSrc = map.getView().getProjection();\n        var projDest = \"EPSG:4326\";\n\n        var pointCoords = [];\n\n        var coordinates = this._currentSketch.getGeometry().getCoordinates();\n        for (var i = 0; i < coordinates.length; i++) {\n            var c1 = olTransformProj(coordinates[i], projSrc, projDest);\n            c1[0] = Math.round(c1[0] * 1e8) / 1e8;\n            c1[1] = Math.round(c1[1] * 1e8) / 1e8;\n            pointCoords.push(c1);\n        }\n\n        return pointCoords;\n    }\n\n    /**\n     * this method is called at the end of the path,\n     * it generates and sends alti request, then displays results\n     *\n     * @private\n     */\n    _requestService () {\n        logger.trace(\"ElevationPath::_requestService\");\n\n        // les coordonnes sont obligatoires\n        var geometry = this._getGeometry();\n        logger.trace(\"geometry\", geometry);\n        if (!geometry) {\n            logger.warn(\"missing geometry !?\");\n            return;\n        }\n\n        // on construit les options pour la requte\n        var options = {};\n\n        // on surcharge avec les options de l'utilisateur\n        Utils.mergeParams(options, this.options.elevationOptions);\n\n        // au cas o ...\n        Utils.mergeParams(options, {\n            apiKey : options.apiKey || this.options.apiKey\n        });\n\n        // si l'utilisateur a spcifi le paramtre ssl au niveau du control, on s'en sert\n        // true par dfaut (https)\n        if (typeof options.ssl !== \"boolean\") {\n            if (typeof this.options.ssl === \"boolean\") {\n                options.ssl = this.options.ssl;\n            } else {\n                options.ssl = true;\n            }\n        }\n\n        Utils.mergeParams(options, {\n            ssl : options.ssl\n        });\n\n        // les callbacks\n        var self = this;\n\n        // gestion des callback\n        var bOnFailure = !!(this.options.elevationOptions.onFailure !== null && typeof this.options.elevationOptions.onFailure === \"function\"); // cast variable to boolean\n        var bOnSuccess = !!(this.options.elevationOptions.onSuccess !== null && typeof this.options.elevationOptions.onSuccess === \"function\");\n\n        // callback _requestServiceOnSuccess\n        var _requestServiceOnSuccess = function (result) {\n            logger.trace(result);\n            if (result) {\n                self._panelContainer.style.display = \"block\";\n                // self._panelContainer.style.visibility = \"visible\";\n                if (self._data) {\n                    self._data = {};\n                }\n                self._data = self._computeElevationMeasure(result.elevations);\n                self._displayProfile(self._data);\n                self._waitingContainer.className = \"GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden\";\n                self._waiting = false;\n                self._measureDraw.setActive(true);\n            }\n            if (bOnSuccess) {\n                self.options.elevationOptions.onSuccess.call(self, self.getData());\n            }\n        };\n\n        // callback _requestServiceOnFailure\n        var _requestServiceOnFailure = function (error) {\n            // on ferme le panneau en cas d'erreur !\n            self._panelContainer.style.display = \"none\";\n            // self._panelContainer.style.visibility = \"hidden\";\n            logger.error(error.message);\n            self._waitingContainer.className = \"GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden\";\n            self._waiting = false;\n            self._measureDraw.setActive(true);\n            if (bOnFailure) {\n                self.options.elevationOptions.onFailure.call(self, error);\n            }\n        };\n\n        Utils.mergeParams(options, {\n            onSuccess : _requestServiceOnSuccess,\n            onFailure : _requestServiceOnFailure\n        });\n\n        // le sampling est soit defini par l'utilisateur (opts),\n        // ou soit calcul dynamiquement...\n        var sampling = options.sampling;\n        if (!sampling) {\n            // computing sampling\n            var _sampling;\n            var _length = this._getLength();\n            logger.trace(\"length\", _length);\n            var p = Math.max(50, Math.floor(_length) / 5); // en mtre sur un pas moyen de 5m !\n            if (p > 200) {\n                _sampling = 200;\n            } else {\n                _sampling = Math.floor(p);\n            }\n            var pointNumber = this._getSketchCoords().length;\n            if (pointNumber > 100) {\n                _sampling = 0;\n            }\n        }\n\n        if (_sampling > 0) {\n            Utils.mergeParams(options, {\n                sampling : _sampling\n            });\n        }\n\n        // et enfin, la geometrie\n        Utils.mergeParams(options, {\n            positions : geometry\n        });\n\n        logger.trace(\"options du service\", options);\n\n        // mise en place de la patience\n        this._waitingContainer.className = \"GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible\";\n\n        // Request altitude service\n        Gp.Services.getAltitude(options);\n    }\n\n    // ################################################################### //\n    // ########################## Profil display ######################### //\n    // ################################################################### //\n\n    /**\n     * this method computes results elevations (Z and distance)\n     *\n     * @param {Array} elevations - array of elevation\n     * @return {Array} elevations\n     * @private\n     */\n    _computeElevationMeasure (elevations) {\n        logger.trace(\"ElevationPath::_computeElevationMeasure\", elevations);\n\n        var _data = elevations;\n\n        var _unit = \"m\";\n\n        var _sketchPoints = this._getSketchCoords();\n        if (!_sketchPoints) {\n            return;\n        }\n        // section actuelle du sketch sur laquelle on est\n        var _currentSection = 0;\n        // longueur cumule des sections prcdentes\n        var _previousSectionsLength = 0;\n        var _nextSectionBegining = _sketchPoints[1];\n\n        // Calcul de la distance au dpart pour chaque point + arrondi des lat/lon\n        _data[0].dist = 0;\n        _data[0].slope = 0;\n        _data[0].lat = Math.round(_data[0].lat * 10000) / 10000;\n        _data[0].lon = Math.round(_data[0].lon * 10000) / 10000;\n\n        var _distanceMinus = 0;\n        var _distancePlus = 0;\n        var _ascendingElevation = 0;\n        var _descendingElevation = 0;\n        var _distance = 0;\n        var _slopes = 0;\n\n        var distances = [];\n\n        for (var i = 1; i < _data.length; i++) {\n            var a = [_data[i].lon, _data[i].lat];\n            var distanceToStart = _previousSectionsLength + olGetDistanceSphere(a, _sketchPoints[_currentSection]);\n            var dist = distanceToStart - _distance;\n\n            // Changement de section\n            if (a[0] === _nextSectionBegining[0] && a[1] === _nextSectionBegining[1]) {\n                _currentSection++;\n                _previousSectionsLength = distanceToStart;\n                // Pas de next section si on est sur le dernier point\n                if (i !== _data.length - 1) {\n                    _nextSectionBegining = _sketchPoints[_currentSection + 1];\n                }\n            }\n\n            var za = _data[i].z;\n            var zb = _data[i - 1].z;\n            if (za < 0) {\n                za = 0;\n            }\n            if (zb < 0) {\n                zb = 0;\n            }\n            var slope = za - zb;\n            if (slope < 0) {\n                _distanceMinus += dist;\n                _descendingElevation += slope;\n            } else if (slope > 0) {\n                _distancePlus += dist;\n                _ascendingElevation += slope;\n            }\n            _distance = distanceToStart;\n            _data[i].dist = distanceToStart;\n\n            distances.push(distanceToStart);\n\n            _slopes += (slope) ? Math.abs(Math.round(slope / dist * 100)) : 0;\n            _data[i].slope = (slope) ? Math.abs(Math.round(slope / dist * 100)) : 0;\n\n            // EVOL ?\n            // cf. gradiant\n            // http://www.color-hex.com/color/00b798\n            var value = _data[i].slope;\n            if (value > 15 && value < 30) {\n                _data[i].color = \"#005b4c\";\n            } else if (value > 30 && value < 45) {\n                _data[i].color = \"#00362d\";\n            } else if (value > 45) {\n                _data[i].color = \"#00120f\";\n            } else {\n                _data[i].color = \"#00B798\";\n            }\n\n            _data[i].lat = Math.round(_data[i].lat * 10000) / 10000;\n            _data[i].lon = Math.round(_data[i].lon * 10000) / 10000;\n        }\n\n        // check distance totale\n        logger.trace(\"List Distances\", distances);\n\n        // Correction des altitudes aberrantes + arrondi des calculs de distance + ...\n        var _altMin = _data[0].z;\n        var _altMax = _data[0].z;\n        var _greaterSlope = _data[0].slope;\n\n        for (var ji = 0; ji < _data.length; ji++) {\n            var d = _data[ji];\n            if (d.z < -100) {\n                d.z = 0;\n            }\n            if (d.z > _altMax) {\n                _altMax = d.z;\n            }\n            if (d.z < _altMin) {\n                _altMin = d.z;\n            }\n\n            if (d.slope > _greaterSlope) {\n                _greaterSlope = d.slope;\n            }\n        }\n\n        return {\n            greaterSlope : _greaterSlope, // pente max\n            meanSlope : Math.round(_slopes / _data.length), // pente moyenne\n            distancePlus : _distancePlus, // distance cumule positive\n            distanceMinus : _distanceMinus, // distance cumule ngative\n            ascendingElevation : _ascendingElevation, // dnivel cumule positive\n            descendingElevation : _descendingElevation, // dnivel cumule ngative\n            altMin : _altMin.toLocaleString(), // altitude min TODO: inutile ?\n            altMax : _altMax.toLocaleString(), // altitude max TODO: inutile ?\n            distance : this._getLength(), // distance totale\n            unit : _unit, // unit des mesures de distance\n            points : _data\n        };\n    }\n\n    /**\n     * this method is called after service request (in case of success)\n     * and display results\n     *\n     * @param {Array} elevations - array of elevation\n     * @private\n     */\n    _displayProfile (elevations) {\n        logger.trace(\"ElevationPath::_displayProfile\", elevations);\n\n        this._updateInfoContainer();\n\n        // container\n        var container = this.options.displayProfileOptions.target;\n        if (container) {\n            container.appendChild(this._panelContainer);\n        }\n        container = this._profileContainer;\n\n        // TODO contexte ?\n        var context = this;\n\n        // fonction\n        var displayFunction = this.options.displayProfileOptions.apply;\n\n        // execution...\n        displayFunction.call(this, elevations, container, context);\n\n        var opts = this.options.displayProfileOptions;\n        var element = document.getElementById(\"GPelevationPathPanelInfo-\" + this._uid);\n        if (element) {\n            if (opts.totalDistance ||\n                opts.greaterSlope ||\n                opts.meanSlope ||\n                opts.ascendingElevation ||\n                opts.descendingElevation) {\n                // on affiche les informations\n                element.style.display = \"block\";\n            }\n        }\n\n        /**\n         * event triggered when the compute is finished\n         *\n         * @event elevationpath:compute\n         * @typedef {Object}\n         * @property {Object} type - event\n         * @property {Object} target - instance ElevationPath\n         * @example\n         * ElevationPath.on(\"elevationpath:compute\", function (e) {\n         *   console.log(e.target.getData());\n         * })\n         */\n        this.dispatchEvent({\n            type : \"elevationpath:compute\"\n        });\n    }\n\n    /**\n     * update info container\n     *\n     * @private\n     */\n    _updateInfoContainer () {\n        logger.trace(\"ElevationPath::_updateInfoContainer\");\n\n        // options d'affichage\n        var totalDistance = this.options.displayProfileOptions.totalDistance;\n        var meanSlope = this.options.displayProfileOptions.meanSlope;\n        var greaterSlope = this.options.displayProfileOptions.greaterSlope;\n        var ascendingElevation = this.options.displayProfileOptions.ascendingElevation;\n        var descendingElevation = this.options.displayProfileOptions.descendingElevation;\n\n        // clean\n        var div = this._infoContainer;\n        if (div.childElementCount) {\n            while (div.firstChild) {\n                div.removeChild(div.firstChild);\n            }\n        }\n\n        // creation des infomations\n        if (totalDistance) {\n            this._addElevationPathInformationsItem(\"Distance totale : \" + Math.round(this._data.distance).toLocaleString() + \" m\");\n        }\n\n        if (ascendingElevation) {\n            this._addElevationPathInformationsItem(\"Dnivel positif : \" + this._data.ascendingElevation.toLocaleString() + \" m\");\n        }\n\n        if (descendingElevation) {\n            this._addElevationPathInformationsItem(\"Dnivel ngatif : \" + this._data.descendingElevation.toLocaleString() + \" m\");\n        }\n\n        if (meanSlope) {\n            this._addElevationPathInformationsItem(\"Pente moyenne : \" + this._data.meanSlope.toLocaleString() + \" %\");\n        }\n\n        if (greaterSlope) {\n            this._addElevationPathInformationsItem(\"Plus forte pente : \" + this._data.greaterSlope.toLocaleString() + \" %\");\n        }\n    }\n\n    /**\n     * Remove measure\n     * @private\n     */\n    _removeMeasure () {\n        // sketch\n        this._lastSketch = null;\n        this._currentSketch = null;\n\n        if (this._measureSource) {\n            // marker\n            if (this._marker) {\n                this._measureSource.removeFeature(this._marker);\n                this._marker = null;\n            }\n\n            // all other features\n            var _features = this._measureSource.getFeatures();\n            for (var i = 0; i < _features.length; i++) {\n                this._measureSource.removeFeature(_features[i]);\n            }\n        }\n    }\n\n    /**\n     * Remove profile\n     * @private\n     */\n    _removeProfile () {\n        // graph\n        this._profile = null;\n\n        // on vide le container\n        if (this._profileContainer) {\n            while (this._profileContainer.firstChild) {\n                this._profileContainer.removeChild(this._profileContainer.firstChild);\n            }\n        }\n    }\n\n    // ################################################################### //\n    // ####################### handlers events to dom #################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on '' picto\n     * and enable or disable the entry of the path\n     *\n     * @param {Object} e - event\n     * @private\n     */\n    onShowElevationPathClick (e) {\n        var map = this.getMap();\n        Interactions.unset(map, {\n            current : \"ElevationPath\"\n        });\n\n        // Activation/Desactivation des interactions de dessins\n        var opened = this._pictoButton.ariaPressed;\n        if (opened === \"true\") {\n            // on n'affiche pas la fenetre de profile s'il n'existe pas...\n            if (this._profile === null) {\n                this._panelContainer.style.display = \"none\";\n                // this._panelContainer.style.visibility = \"hidden\";\n            }\n            this._initMeasureInteraction(map);\n            this._addMeasureInteraction(map);\n        } else {\n            this._panelContainer.style.display = \"none\";\n            // HACK\n            // il est possible de faire passer une instruction via le DOM et les dataset :\n            // * data-remove-measure : true|false\n            // * data-remove-layer : true|false\n            if (e && e.target.dataset && e.target.dataset.removeMeasure) {\n                if (e.target.dataset.removeMeasure === \"true\") {\n                    this._removeMeasure();\n                } else {\n                    // sketch\n                    this._lastSketch = null;\n                    this._currentSketch = null;\n                }\n            } else {\n                this._removeMeasure();\n            }\n            this._removeProfile();\n\n            if (e && e.target.dataset && e.target.dataset.removeLayer) {\n                this._removeMeasureInteraction(map, (e.target.dataset.removeLayer === \"true\"));\n            } else {\n                this._removeMeasureInteraction(map, true);\n            }\n        }\n    }\n\n    /**\n     * this method is called by event 'click' on '' picto\n     * (cf. this.),\n     * and display the panel info\n     *\n     * @private\n     */\n    onOpenElevationPathInfoClick () {\n        var div = this._infoContainer;\n\n        // show des informations !\n        if (div.className === \"GPelementVisible gpf-visible\") {\n            clearTimeout(this._timerHdlr);\n            div.className = \"GPelementHidden gpf-hidden\";\n        } else {\n            div.className = \"GPelevationPathInformationsContainerVisible\";\n        }\n\n        // hidden des informations !\n        this._timerHdlr = setTimeout(function () {\n            div.className = \"GPelementHidden gpf-hidden\";\n        }, 4000);\n    }\n\n};\n\n// on rcupre les mthodes de la classe commune ElevationPath\nObject.assign(ElevationPath.prototype, ElevationPathDOM);\n\nexport default ElevationPath;\n\n// Expose ElevationPath as ol.control.ElevationPath (for a build bundle)\nif (window.ol && window.ol.control) {\n    window.ol.control.ElevationPath = ElevationPath;\n}\n"],"names":["freeze","object","oc","undefined","Object","MIME_TYPE","HTML","isHTML","value","XML_APPLICATION","XML_TEXT","XML_XHTML_APPLICATION","XML_SVG_IMAGE","NAMESPACE","uri","SVG","XML","XMLNS","exports","assign","target","source","TypeError","key","prototype","hasOwnProperty","call","find","list","predicate","ac","Array","i","length","item","conventions","dom","entities","sax","DOMImplementation","ParseError","XMLReader","normalizeLineEndings","input","replace","DOMParser","options","this","locator","DOMHandler","cdata","position","node","lineNumber","columnNumber","_locator","l","systemId","_toString","chars","start","substr","java","lang","String","appendElement","hander","currentElement","appendChild","doc","parseFromString","mimeType","domBuilder","errorHandler","defaultNSMap","xmlns","test","entityMap","HTML_ENTITIES","XML_ENTITIES","setDocumentLocator","errorImpl","isCallback","Function","build","fn","msg","buildErrorHandler","xml","normalize","parse","error","startDocument","createDocument","documentURI","startElement","namespaceURI","localName","qName","attrs","el","createElementNS","len","getURI","getValue","attr","getQName","createAttributeNS","getLocator","nodeValue","setAttributeNode","endElement","current","tagName","parentNode","startPrefixMapping","prefix","endPrefixMapping","processingInstruction","data","ins","createProcessingInstruction","ignorableWhitespace","ch","characters","apply","arguments","charNode","createCDATASection","createTextNode","skippedEntity","name","endDocument","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","doctype","warning","console","warn","fatalError","notEmptyString","orderedSetReducer","element","toOrderedSet","split","filter","splitOnASCIIWhitespace","keys","reduce","copy","src","dest","p","_extends","Class","Super","pt","t","constructor","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","code","message","Error","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","$$length","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","ns","_nsMap","_onAddAttribute","_removeNamedNode","lastIndex","Node","_xmlEncoder","c","charCodeAt","_visitNode","callback","firstChild","nextSibling","Document","remove","_onUpdateChild","newChild","cs","childNodes","child","_removeChild","previous","previousSibling","next","lastChild","isDocTypeNode","nodeType","isElementNode","isTextNode","isElementInsertionPossible","parentChildNodes","docTypeNode","indexOf","isElementReplacementPossible","assertPreInsertionValidity1to5","parent","hasValidParentNodeType","hasInsertableNodeType","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","assertPreReplacementValidityInDocument","_insertBefore","_inDocumentAssertion","cp","removeChild","newFirst","newLast","pre","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer","nodeSerializeToString","isHtml","nodeFilter","buf","refNode","documentElement","lookupPrefix","visibleNamespaces","namespace","serializeToString","join","needNamespaceDefine","addSerializedAttribute","qualifiedName","push","attributes","nodeName","prefixedNodeName","defaultNS","ai","nsi","slice","pubid","sysid","sub","internalSubset","importNode","deep","node2","cloneNode","n","v","attrs2","_ownerElement","index","toString","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","feature","version","root","insertBefore","refChild","replaceChild","oldChild","hasChildNodes","appendData","isSupported","hasAttributes","map","lookupNamespaceURI","isDefaultNamespace","importedNode","getElementById","id","rtv","getAttribute","getElementsByClassName","classNames","classNamesSet","base","nodeClassNames","matches","nodeClassNamesSet","every","createElement","createDocumentFragment","createAttribute","specified","createEntityReference","pl","hasAttribute","getAttributeNode","setAttribute","removeAttribute","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","substringData","offset","count","substring","text","insertData","replaceData","deleteData","splitText","newText","newNode","defineProperty","getTextContent","get","set","e","amp","apos","gt","lt","quot","Aacute","aacute","Abreve","abreve","acd","acE","Acirc","acirc","acute","Acy","acy","AElig","aelig","af","Afr","afr","Agrave","agrave","alefsym","aleph","Alpha","alpha","Amacr","amacr","amalg","AMP","And","and","andand","andd","andslope","andv","ang","ange","angle","angmsd","angmsdaa","angmsdab","angmsdac","angmsdad","angmsdae","angmsdaf","angmsdag","angmsdah","angrt","angrtvb","angrtvbd","angsph","angst","angzarr","Aogon","aogon","Aopf","aopf","ap","apacir","apE","ape","apid","ApplyFunction","approx","approxeq","Aring","aring","Ascr","ascr","Assign","ast","asymp","asympeq","Atilde","atilde","Auml","auml","awconint","awint","backcong","backepsilon","backprime","backsim","backsimeq","Backslash","Barv","barvee","Barwed","barwed","barwedge","bbrk","bbrktbrk","bcong","Bcy","bcy","bdquo","becaus","Because","because","bemptyv","bepsi","bernou","Bernoullis","Beta","beta","beth","between","Bfr","bfr","bigcap","bigcirc","bigcup","bigodot","bigoplus","bigotimes","bigsqcup","bigstar","bigtriangledown","bigtriangleup","biguplus","bigvee","bigwedge","bkarow","blacklozenge","blacksquare","blacktriangle","blacktriangledown","blacktriangleleft","blacktriangleright","blank","blk12","blk14","blk34","block","bne","bnequiv","bNot","bnot","Bopf","bopf","bot","bottom","bowtie","boxbox","boxDL","boxDl","boxdL","boxdl","boxDR","boxDr","boxdR","boxdr","boxH","boxh","boxHD","boxHd","boxhD","boxhd","boxHU","boxHu","boxhU","boxhu","boxminus","boxplus","boxtimes","boxUL","boxUl","boxuL","boxul","boxUR","boxUr","boxuR","boxur","boxV","boxv","boxVH","boxVh","boxvH","boxvh","boxVL","boxVl","boxvL","boxvl","boxVR","boxVr","boxvR","boxvr","bprime","Breve","breve","brvbar","Bscr","bscr","bsemi","bsim","bsime","bsol","bsolb","bsolhsub","bull","bullet","bump","bumpE","bumpe","Bumpeq","bumpeq","Cacute","cacute","Cap","cap","capand","capbrcup","capcap","capcup","capdot","CapitalDifferentialD","caps","caret","caron","Cayleys","ccaps","Ccaron","ccaron","Ccedil","ccedil","Ccirc","ccirc","Cconint","ccups","ccupssm","Cdot","cdot","cedil","Cedilla","cemptyv","cent","CenterDot","centerdot","Cfr","cfr","CHcy","chcy","check","checkmark","Chi","chi","cir","circ","circeq","circlearrowleft","circlearrowright","circledast","circledcirc","circleddash","CircleDot","circledR","circledS","CircleMinus","CirclePlus","CircleTimes","cirE","cire","cirfnint","cirmid","cirscir","ClockwiseContourIntegral","CloseCurlyDoubleQuote","CloseCurlyQuote","clubs","clubsuit","Colon","colon","Colone","colone","coloneq","comma","commat","comp","compfn","complement","complexes","cong","congdot","Congruent","Conint","conint","ContourIntegral","Copf","copf","coprod","Coproduct","COPY","copysr","CounterClockwiseContourIntegral","crarr","Cross","cross","Cscr","cscr","csub","csube","csup","csupe","ctdot","cudarrl","cudarrr","cuepr","cuesc","cularr","cularrp","Cup","cup","cupbrcap","CupCap","cupcap","cupcup","cupdot","cupor","cups","curarr","curarrm","curlyeqprec","curlyeqsucc","curlyvee","curlywedge","curren","curvearrowleft","curvearrowright","cuvee","cuwed","cwconint","cwint","cylcty","Dagger","dagger","daleth","Darr","dArr","darr","dash","Dashv","dashv","dbkarow","dblac","Dcaron","dcaron","Dcy","dcy","DD","dd","ddagger","ddarr","DDotrahd","ddotseq","deg","Del","Delta","delta","demptyv","dfisht","Dfr","dfr","dHar","dharl","dharr","DiacriticalAcute","DiacriticalDot","DiacriticalDoubleAcute","DiacriticalGrave","DiacriticalTilde","diam","Diamond","diamond","diamondsuit","diams","die","DifferentialD","digamma","disin","div","divide","divideontimes","divonx","DJcy","djcy","dlcorn","dlcrop","dollar","Dopf","dopf","Dot","dot","DotDot","doteq","doteqdot","DotEqual","dotminus","dotplus","dotsquare","doublebarwedge","DoubleContourIntegral","DoubleDot","DoubleDownArrow","DoubleLeftArrow","DoubleLeftRightArrow","DoubleLeftTee","DoubleLongLeftArrow","DoubleLongLeftRightArrow","DoubleLongRightArrow","DoubleRightArrow","DoubleRightTee","DoubleUpArrow","DoubleUpDownArrow","DoubleVerticalBar","DownArrow","Downarrow","downarrow","DownArrowBar","DownArrowUpArrow","DownBreve","downdownarrows","downharpoonleft","downharpoonright","DownLeftRightVector","DownLeftTeeVector","DownLeftVector","DownLeftVectorBar","DownRightTeeVector","DownRightVector","DownRightVectorBar","DownTee","DownTeeArrow","drbkarow","drcorn","drcrop","Dscr","dscr","DScy","dscy","dsol","Dstrok","dstrok","dtdot","dtri","dtrif","duarr","duhar","dwangle","DZcy","dzcy","dzigrarr","Eacute","eacute","easter","Ecaron","ecaron","ecir","Ecirc","ecirc","ecolon","Ecy","ecy","eDDot","Edot","eDot","edot","ee","efDot","Efr","efr","eg","Egrave","egrave","egs","egsdot","elinters","ell","els","elsdot","Emacr","emacr","empty","emptyset","EmptySmallSquare","emptyv","EmptyVerySmallSquare","emsp","emsp13","emsp14","ENG","eng","ensp","Eogon","eogon","Eopf","eopf","epar","eparsl","eplus","epsi","Epsilon","epsilon","epsiv","eqcirc","eqcolon","eqsim","eqslantgtr","eqslantless","Equal","equals","EqualTilde","equest","Equilibrium","equiv","equivDD","eqvparsl","erarr","erDot","Escr","escr","esdot","Esim","esim","Eta","eta","ETH","eth","Euml","euml","euro","excl","exist","Exists","expectation","ExponentialE","exponentiale","fallingdotseq","Fcy","fcy","female","ffilig","fflig","ffllig","Ffr","ffr","filig","FilledSmallSquare","FilledVerySmallSquare","fjlig","flat","fllig","fltns","fnof","Fopf","fopf","ForAll","forall","fork","forkv","Fouriertrf","fpartint","frac12","frac13","frac14","frac15","frac16","frac18","frac23","frac25","frac34","frac35","frac38","frac45","frac56","frac58","frac78","frasl","frown","Fscr","fscr","gacute","Gamma","gamma","Gammad","gammad","gap","Gbreve","gbreve","Gcedil","Gcirc","gcirc","Gcy","gcy","Gdot","gdot","gE","ge","gEl","gel","geq","geqq","geqslant","ges","gescc","gesdot","gesdoto","gesdotol","gesl","gesles","Gfr","gfr","Gg","gg","ggg","gimel","GJcy","gjcy","gl","gla","glE","glj","gnap","gnapprox","gnE","gne","gneq","gneqq","gnsim","Gopf","gopf","grave","GreaterEqual","GreaterEqualLess","GreaterFullEqual","GreaterGreater","GreaterLess","GreaterSlantEqual","GreaterTilde","Gscr","gscr","gsim","gsime","gsiml","Gt","GT","gtcc","gtcir","gtdot","gtlPar","gtquest","gtrapprox","gtrarr","gtrdot","gtreqless","gtreqqless","gtrless","gtrsim","gvertneqq","gvnE","Hacek","hairsp","half","hamilt","HARDcy","hardcy","hArr","harr","harrcir","harrw","Hat","hbar","Hcirc","hcirc","hearts","heartsuit","hellip","hercon","Hfr","hfr","HilbertSpace","hksearow","hkswarow","hoarr","homtht","hookleftarrow","hookrightarrow","Hopf","hopf","horbar","HorizontalLine","Hscr","hscr","hslash","Hstrok","hstrok","HumpDownHump","HumpEqual","hybull","hyphen","Iacute","iacute","ic","Icirc","icirc","Icy","icy","Idot","IEcy","iecy","iexcl","iff","Ifr","ifr","Igrave","igrave","ii","iiiint","iiint","iinfin","iiota","IJlig","ijlig","Im","Imacr","imacr","image","ImaginaryI","imagline","imagpart","imath","imof","imped","Implies","in","incare","infin","infintie","inodot","Int","int","intcal","integers","Integral","intercal","Intersection","intlarhk","intprod","InvisibleComma","InvisibleTimes","IOcy","iocy","Iogon","iogon","Iopf","iopf","Iota","iota","iprod","iquest","Iscr","iscr","isin","isindot","isinE","isins","isinsv","isinv","it","Itilde","itilde","Iukcy","iukcy","Iuml","iuml","Jcirc","jcirc","Jcy","jcy","Jfr","jfr","jmath","Jopf","jopf","Jscr","jscr","Jsercy","jsercy","Jukcy","jukcy","Kappa","kappa","kappav","Kcedil","kcedil","Kcy","kcy","Kfr","kfr","kgreen","KHcy","khcy","KJcy","kjcy","Kopf","kopf","Kscr","kscr","lAarr","Lacute","lacute","laemptyv","lagran","Lambda","lambda","Lang","langd","langle","lap","Laplacetrf","laquo","Larr","lArr","larr","larrb","larrbfs","larrfs","larrhk","larrlp","larrpl","larrsim","larrtl","lat","lAtail","latail","late","lates","lBarr","lbarr","lbbrk","lbrace","lbrack","lbrke","lbrksld","lbrkslu","Lcaron","lcaron","Lcedil","lcedil","lceil","lcub","Lcy","lcy","ldca","ldquo","ldquor","ldrdhar","ldrushar","ldsh","lE","le","LeftAngleBracket","LeftArrow","Leftarrow","leftarrow","LeftArrowBar","LeftArrowRightArrow","leftarrowtail","LeftCeiling","LeftDoubleBracket","LeftDownTeeVector","LeftDownVector","LeftDownVectorBar","LeftFloor","leftharpoondown","leftharpoonup","leftleftarrows","LeftRightArrow","Leftrightarrow","leftrightarrow","leftrightarrows","leftrightharpoons","leftrightsquigarrow","LeftRightVector","LeftTee","LeftTeeArrow","LeftTeeVector","leftthreetimes","LeftTriangle","LeftTriangleBar","LeftTriangleEqual","LeftUpDownVector","LeftUpTeeVector","LeftUpVector","LeftUpVectorBar","LeftVector","LeftVectorBar","lEg","leg","leq","leqq","leqslant","les","lescc","lesdot","lesdoto","lesdotor","lesg","lesges","lessapprox","lessdot","lesseqgtr","lesseqqgtr","LessEqualGreater","LessFullEqual","LessGreater","lessgtr","LessLess","lesssim","LessSlantEqual","LessTilde","lfisht","lfloor","Lfr","lfr","lg","lgE","lHar","lhard","lharu","lharul","lhblk","LJcy","ljcy","Ll","ll","llarr","llcorner","Lleftarrow","llhard","lltri","Lmidot","lmidot","lmoust","lmoustache","lnap","lnapprox","lnE","lne","lneq","lneqq","lnsim","loang","loarr","lobrk","LongLeftArrow","Longleftarrow","longleftarrow","LongLeftRightArrow","Longleftrightarrow","longleftrightarrow","longmapsto","LongRightArrow","Longrightarrow","longrightarrow","looparrowleft","looparrowright","lopar","Lopf","lopf","loplus","lotimes","lowast","lowbar","LowerLeftArrow","LowerRightArrow","loz","lozenge","lozf","lpar","lparlt","lrarr","lrcorner","lrhar","lrhard","lrm","lrtri","lsaquo","Lscr","lscr","Lsh","lsh","lsim","lsime","lsimg","lsqb","lsquo","lsquor","Lstrok","lstrok","Lt","LT","ltcc","ltcir","ltdot","lthree","ltimes","ltlarr","ltquest","ltri","ltrie","ltrif","ltrPar","lurdshar","luruhar","lvertneqq","lvnE","macr","male","malt","maltese","Map","mapsto","mapstodown","mapstoleft","mapstoup","marker","mcomma","Mcy","mcy","mdash","mDDot","measuredangle","MediumSpace","Mellintrf","Mfr","mfr","mho","micro","mid","midast","midcir","middot","minus","minusb","minusd","minusdu","MinusPlus","mlcp","mldr","mnplus","models","Mopf","mopf","mp","Mscr","mscr","mstpos","Mu","mu","multimap","mumap","nabla","Nacute","nacute","nang","nap","napE","napid","napos","napprox","natur","natural","naturals","nbsp","nbump","nbumpe","ncap","Ncaron","ncaron","Ncedil","ncedil","ncong","ncongdot","ncup","Ncy","ncy","ndash","ne","nearhk","neArr","nearr","nearrow","nedot","NegativeMediumSpace","NegativeThickSpace","NegativeThinSpace","NegativeVeryThinSpace","nequiv","nesear","nesim","NestedGreaterGreater","NestedLessLess","NewLine","nexist","nexists","Nfr","nfr","ngE","nge","ngeq","ngeqq","ngeqslant","nges","nGg","ngsim","nGt","ngt","ngtr","nGtv","nhArr","nharr","nhpar","ni","nis","nisd","niv","NJcy","njcy","nlArr","nlarr","nldr","nlE","nle","nLeftarrow","nleftarrow","nLeftrightarrow","nleftrightarrow","nleq","nleqq","nleqslant","nles","nless","nLl","nlsim","nLt","nlt","nltri","nltrie","nLtv","nmid","NoBreak","NonBreakingSpace","Nopf","nopf","Not","not","NotCongruent","NotCupCap","NotDoubleVerticalBar","NotElement","NotEqual","NotEqualTilde","NotExists","NotGreater","NotGreaterEqual","NotGreaterFullEqual","NotGreaterGreater","NotGreaterLess","NotGreaterSlantEqual","NotGreaterTilde","NotHumpDownHump","NotHumpEqual","notin","notindot","notinE","notinva","notinvb","notinvc","NotLeftTriangle","NotLeftTriangleBar","NotLeftTriangleEqual","NotLess","NotLessEqual","NotLessGreater","NotLessLess","NotLessSlantEqual","NotLessTilde","NotNestedGreaterGreater","NotNestedLessLess","notni","notniva","notnivb","notnivc","NotPrecedes","NotPrecedesEqual","NotPrecedesSlantEqual","NotReverseElement","NotRightTriangle","NotRightTriangleBar","NotRightTriangleEqual","NotSquareSubset","NotSquareSubsetEqual","NotSquareSuperset","NotSquareSupersetEqual","NotSubset","NotSubsetEqual","NotSucceeds","NotSucceedsEqual","NotSucceedsSlantEqual","NotSucceedsTilde","NotSuperset","NotSupersetEqual","NotTilde","NotTildeEqual","NotTildeFullEqual","NotTildeTilde","NotVerticalBar","npar","nparallel","nparsl","npart","npolint","npr","nprcue","npre","nprec","npreceq","nrArr","nrarr","nrarrc","nrarrw","nRightarrow","nrightarrow","nrtri","nrtrie","nsc","nsccue","nsce","Nscr","nscr","nshortmid","nshortparallel","nsim","nsime","nsimeq","nsmid","nspar","nsqsube","nsqsupe","nsub","nsubE","nsube","nsubset","nsubseteq","nsubseteqq","nsucc","nsucceq","nsup","nsupE","nsupe","nsupset","nsupseteq","nsupseteqq","ntgl","Ntilde","ntilde","ntlg","ntriangleleft","ntrianglelefteq","ntriangleright","ntrianglerighteq","Nu","nu","num","numero","numsp","nvap","nVDash","nVdash","nvDash","nvdash","nvge","nvgt","nvHarr","nvinfin","nvlArr","nvle","nvlt","nvltrie","nvrArr","nvrtrie","nvsim","nwarhk","nwArr","nwarr","nwarrow","nwnear","Oacute","oacute","oast","ocir","Ocirc","ocirc","Ocy","ocy","odash","Odblac","odblac","odiv","odot","odsold","OElig","oelig","ofcir","Ofr","ofr","ogon","Ograve","ograve","ogt","ohbar","ohm","oint","olarr","olcir","olcross","oline","olt","Omacr","omacr","Omega","omega","Omicron","omicron","omid","ominus","Oopf","oopf","opar","OpenCurlyDoubleQuote","OpenCurlyQuote","operp","oplus","Or","or","orarr","ord","order","orderof","ordf","ordm","origof","oror","orslope","orv","oS","Oscr","oscr","Oslash","oslash","osol","Otilde","otilde","Otimes","otimes","otimesas","Ouml","ouml","ovbar","OverBar","OverBrace","OverBracket","OverParenthesis","par","para","parallel","parsim","parsl","part","PartialD","Pcy","pcy","percnt","period","permil","perp","pertenk","Pfr","pfr","Phi","phi","phiv","phmmat","phone","Pi","pi","pitchfork","piv","planck","planckh","plankv","plus","plusacir","plusb","pluscir","plusdo","plusdu","pluse","PlusMinus","plusmn","plussim","plustwo","pm","Poincareplane","pointint","Popf","popf","pound","Pr","pr","prap","prcue","prE","prec","precapprox","preccurlyeq","Precedes","PrecedesEqual","PrecedesSlantEqual","PrecedesTilde","preceq","precnapprox","precneqq","precnsim","precsim","Prime","prime","primes","prnap","prnE","prnsim","prod","Product","profalar","profline","profsurf","prop","Proportion","Proportional","propto","prsim","prurel","Pscr","pscr","Psi","psi","puncsp","Qfr","qfr","qint","Qopf","qopf","qprime","Qscr","qscr","quaternions","quatint","quest","questeq","QUOT","rAarr","race","Racute","racute","radic","raemptyv","Rang","rang","rangd","range","rangle","raquo","Rarr","rArr","rarr","rarrap","rarrb","rarrbfs","rarrc","rarrfs","rarrhk","rarrlp","rarrpl","rarrsim","Rarrtl","rarrtl","rarrw","rAtail","ratail","ratio","rationals","RBarr","rBarr","rbarr","rbbrk","rbrace","rbrack","rbrke","rbrksld","rbrkslu","Rcaron","rcaron","Rcedil","rcedil","rceil","rcub","Rcy","rcy","rdca","rdldhar","rdquo","rdquor","rdsh","Re","real","realine","realpart","reals","rect","REG","reg","ReverseElement","ReverseEquilibrium","ReverseUpEquilibrium","rfisht","rfloor","Rfr","rfr","rHar","rhard","rharu","rharul","Rho","rho","rhov","RightAngleBracket","RightArrow","Rightarrow","rightarrow","RightArrowBar","RightArrowLeftArrow","rightarrowtail","RightCeiling","RightDoubleBracket","RightDownTeeVector","RightDownVector","RightDownVectorBar","RightFloor","rightharpoondown","rightharpoonup","rightleftarrows","rightleftharpoons","rightrightarrows","rightsquigarrow","RightTee","RightTeeArrow","RightTeeVector","rightthreetimes","RightTriangle","RightTriangleBar","RightTriangleEqual","RightUpDownVector","RightUpTeeVector","RightUpVector","RightUpVectorBar","RightVector","RightVectorBar","ring","risingdotseq","rlarr","rlhar","rlm","rmoust","rmoustache","rnmid","roang","roarr","robrk","ropar","Ropf","ropf","roplus","rotimes","RoundImplies","rpar","rpargt","rppolint","rrarr","Rrightarrow","rsaquo","Rscr","rscr","Rsh","rsh","rsqb","rsquo","rsquor","rthree","rtimes","rtri","rtrie","rtrif","rtriltri","RuleDelayed","ruluhar","rx","Sacute","sacute","sbquo","Sc","sc","scap","Scaron","scaron","sccue","scE","sce","Scedil","scedil","Scirc","scirc","scnap","scnE","scnsim","scpolint","scsim","Scy","scy","sdot","sdotb","sdote","searhk","seArr","searr","searrow","sect","semi","seswar","setminus","setmn","sext","Sfr","sfr","sfrown","sharp","SHCHcy","shchcy","SHcy","shcy","ShortDownArrow","ShortLeftArrow","shortmid","shortparallel","ShortRightArrow","ShortUpArrow","shy","Sigma","sigma","sigmaf","sigmav","sim","simdot","sime","simeq","simg","simgE","siml","simlE","simne","simplus","simrarr","slarr","SmallCircle","smallsetminus","smashp","smeparsl","smid","smile","smt","smte","smtes","SOFTcy","softcy","sol","solb","solbar","Sopf","sopf","spades","spadesuit","spar","sqcap","sqcaps","sqcup","sqcups","Sqrt","sqsub","sqsube","sqsubset","sqsubseteq","sqsup","sqsupe","sqsupset","sqsupseteq","squ","Square","square","SquareIntersection","SquareSubset","SquareSubsetEqual","SquareSuperset","SquareSupersetEqual","SquareUnion","squarf","squf","srarr","Sscr","sscr","ssetmn","ssmile","sstarf","Star","star","starf","straightepsilon","straightphi","strns","Sub","subdot","subE","sube","subedot","submult","subnE","subne","subplus","subrarr","Subset","subset","subseteq","subseteqq","SubsetEqual","subsetneq","subsetneqq","subsim","subsub","subsup","succ","succapprox","succcurlyeq","Succeeds","SucceedsEqual","SucceedsSlantEqual","SucceedsTilde","succeq","succnapprox","succneqq","succnsim","succsim","SuchThat","Sum","sum","sung","Sup","sup","sup1","sup2","sup3","supdot","supdsub","supE","supe","supedot","Superset","SupersetEqual","suphsol","suphsub","suplarr","supmult","supnE","supne","supplus","Supset","supset","supseteq","supseteqq","supsetneq","supsetneqq","supsim","supsub","supsup","swarhk","swArr","swarr","swarrow","swnwar","szlig","Tab","Tau","tau","tbrk","Tcaron","tcaron","Tcedil","tcedil","Tcy","tcy","tdot","telrec","Tfr","tfr","there4","Therefore","therefore","Theta","theta","thetasym","thetav","thickapprox","thicksim","ThickSpace","thinsp","ThinSpace","thkap","thksim","THORN","thorn","Tilde","tilde","TildeEqual","TildeFullEqual","TildeTilde","times","timesb","timesbar","timesd","tint","toea","top","topbot","topcir","Topf","topf","topfork","tosa","tprime","TRADE","trade","triangle","triangledown","triangleleft","trianglelefteq","triangleq","triangleright","trianglerighteq","tridot","trie","triminus","TripleDot","triplus","trisb","tritime","trpezium","Tscr","tscr","TScy","tscy","TSHcy","tshcy","Tstrok","tstrok","twixt","twoheadleftarrow","twoheadrightarrow","Uacute","uacute","Uarr","uArr","uarr","Uarrocir","Ubrcy","ubrcy","Ubreve","ubreve","Ucirc","ucirc","Ucy","ucy","udarr","Udblac","udblac","udhar","ufisht","Ufr","ufr","Ugrave","ugrave","uHar","uharl","uharr","uhblk","ulcorn","ulcorner","ulcrop","ultri","Umacr","umacr","uml","UnderBar","UnderBrace","UnderBracket","UnderParenthesis","Union","UnionPlus","Uogon","uogon","Uopf","uopf","UpArrow","Uparrow","uparrow","UpArrowBar","UpArrowDownArrow","UpDownArrow","Updownarrow","updownarrow","UpEquilibrium","upharpoonleft","upharpoonright","uplus","UpperLeftArrow","UpperRightArrow","Upsi","upsi","upsih","Upsilon","upsilon","UpTee","UpTeeArrow","upuparrows","urcorn","urcorner","urcrop","Uring","uring","urtri","Uscr","uscr","utdot","Utilde","utilde","utri","utrif","uuarr","Uuml","uuml","uwangle","vangrt","varepsilon","varkappa","varnothing","varphi","varpi","varpropto","vArr","varr","varrho","varsigma","varsubsetneq","varsubsetneqq","varsupsetneq","varsupsetneqq","vartheta","vartriangleleft","vartriangleright","Vbar","vBar","vBarv","Vcy","vcy","VDash","Vdash","vDash","vdash","Vdashl","Vee","vee","veebar","veeeq","vellip","Verbar","verbar","Vert","vert","VerticalBar","VerticalLine","VerticalSeparator","VerticalTilde","VeryThinSpace","Vfr","vfr","vltri","vnsub","vnsup","Vopf","vopf","vprop","vrtri","Vscr","vscr","vsubnE","vsubne","vsupnE","vsupne","Vvdash","vzigzag","Wcirc","wcirc","wedbar","Wedge","wedge","wedgeq","weierp","Wfr","wfr","Wopf","wopf","wp","wr","wreath","Wscr","wscr","xcap","xcirc","xcup","xdtri","Xfr","xfr","xhArr","xharr","Xi","xi","xlArr","xlarr","xmap","xnis","xodot","Xopf","xopf","xoplus","xotime","xrArr","xrarr","Xscr","xscr","xsqcup","xuplus","xutri","xvee","xwedge","Yacute","yacute","YAcy","yacy","Ycirc","ycirc","Ycy","ycy","yen","Yfr","yfr","YIcy","yicy","Yopf","yopf","Yscr","yscr","YUcy","yucy","Yuml","yuml","Zacute","zacute","Zcaron","zcaron","Zcy","zcy","Zdot","zdot","zeetrf","ZeroWidthSpace","Zeta","zeta","Zfr","zfr","ZHcy","zhcy","zigrarr","Zopf","zopf","Zscr","zscr","zwj","zwnj","nameStartChar","nameChar","RegExp","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","copyLocator","f","parseElementStartPart","currentNSMap","entityReplacer","addAttribute","qname","startIndex","attributeNames","addValue","attrName","s","charAt","setTagName","closed","match","localNSMap","a","nsp","nsPrefix","_copy","parseHtmlSpecialContent","elStartEnd","elEndStart","fixSelfClosed","closeMap","pos","lastIndexOf","parseDCC","end","matchs","exec","lastMatch","endDTD","parseInstruction","ElementAttributes","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","fromCharCode","k","parseInt","appendText","xt","m","lineEnd","linePattern","lineStart","parseStack","tagStart","config","pop","endMatch","toLowerCase","locator2","Math","max","getLocalName","_Control","ControlExtended","_classCallCheck","_callSuper","_inherits","_createClass","PositionFactory","Control","ANCHORS","_PositionFactory_brand","WeakSet","caller","_classPrivateMethodInitSpec","_assertClassBrand","_createContainer","includes","_setAnchor","document","prepend","_existContainer","className","getMap","getOverlayContainerStopEvent","children","sizeW","offsetWidth","sizeH","offsetHeight","clear","style","left","right","panels","from","forEach","panel","_addUID","uid","logger","Logger","getLogger","ButtonExport","_this","control","format","title","menu","onExport","trace","render","EXPORT_ROUTE","EXPORT_ISOCHRON","EXPORT_PROFILE","ID","generate","extension","container","button","icon","menuClassHidden","initOptions","initContainer","getContainer","setFormat","setName","setTitle","setMenu","_this2","stringToHTML","concat","addEventListener","onClickButtonExport","querySelectorAll","radio","toUpperCase","checked","str","window","parser","err","support","body","innerHTML","getLayer","layer","_this3","result","getSource","getFeatures","getStyle","setStyle","defaultStyle","extensions","ClassName","writeStyles","showPointNames","KMLExtended","GPXExtended","GeoJSONExtended","featProj","getProjection","getView","features","writeFeatures","dataProjection","featureProjection","isPluggableControl","getData","content","exportFeatures","dispatchEvent","type","link","encodeURIComponent","createEvent","event","initEvent","click","active","_this4","ExportDOM","ol","Export","configuration","isConfigLoaded","scope","self","global","Gp","Config","layers","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","enumerable","_objectSpread2","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","obj","Symbol","iterator","configurable","writable","_objectWithoutProperties","excluded","sourceKeys","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","userAgent","pattern","navigator","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","capture","passive","on","off","removeEventListener","selector","msMatchesSelector","webkitMatchesSelector","_","getParentOrHost","host","closest","ctx","includeCTX","_throttleTimeout","R_SPACE","toggleClass","state","classList","css","val","defaultView","getComputedStyle","currentStyle","matrix","selfOnly","appliedTransforms","transform","matrixFn","DOMMatrix","WebKitCSSMatrix","CSSMatrix","MSCSSMatrix","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","getBoundingClientRect","elRect","height","width","innerHeight","innerWidth","containerRect","elMatrix","scaleX","scaleY","d","isScrolledPast","elSide","parentSide","getParentAutoScrollElement","elSideVal","parentSideVal","getChild","childNum","includeDragEl","currentChild","display","Sortable","ghost","dragged","draggable","last","lastElementChild","previousElementSibling","clone","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","scrollLeft","scrollTop","includeSelf","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","isRectEqual","rect1","rect2","round","throttle","ms","args","setTimeout","scrollBy","x","y","Polymer","$","jQuery","Zepto","getChildContainingRectFromElement","ghostEl","_rect$left","_rect$top","_rect$right","_rect$bottom","animated","childRect","min","Infinity","expando","Date","getTime","AnimationStateManager","animationCallbackId","animationStates","captureAnimationState","animation","fromRect","thisAnimationDuration","childMatrix","addAnimationState","removeAnimationState","splice","arr","Number","indexOfObject","animateAll","clearTimeout","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","sqrt","pow","calculateRealTime","animate","animationResetTimer","currentRect","duration","translateX","translateY","animatingX","animatingY","forRepaintDummy","repaint","easing","plugins","defaults","initializeByDefault","PluginManager","mount","plugin","option","pluginName","pluginEvent","eventName","sortable","evt","eventCanceled","cancel","eventNameGlobal","initializePlugins","initialized","modified","modifyOption","getEventProperties","eventProperties","modifiedValue","optionListeners","_ref","rootEl","targetEl","cloneEl","toEl","fromEl","oldIndex","newIndex","oldDraggableIndex","newDraggableIndex","originalEvent","putSortable","extraEventProperties","onName","CustomEvent","bubbles","cancelable","to","pullMode","lastPutMode","allEventProperties","_excluded","bind","dragEl","parentEl","nextEl","lastDownEl","cloneHidden","dragStarted","moved","activeSortable","hideGhostForTarget","_hideGhostForTarget","unhideGhostForTarget","_unhideGhostForTarget","cloneNowHidden","cloneNowShown","dispatchSortableEvent","_dispatchEvent","info","activeGroup","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","targetMoveDistance","ghostRelativeParent","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","supportCssPointerEvents","cssText","pointerEvents","_detectDirection","elCSS","elWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","secondChildWidth","flexDirection","gridTemplateColumns","touchingSideChild2","_prepareGroup","toFn","pull","sameGroup","group","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","preventDefault","stopPropagation","stopImmediatePropagation","nearestEmptyInsertDetectEvent","touches","nearest","clientX","clientY","some","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","ret","_onDragOver","_checkOutsideTargetEl","_isOutsideThisEl","sort","disabled","store","handle","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_onTapStart","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_generateId","href","_nextTick","_cancelNextTick","contains","_getDirection","touch","pointerType","originalTarget","shadowRoot","path","composedPath","inputs","idx","_saveInputCheckedState","isContentEditable","criteria","trim","_prepareDragStart","dragStartFn","_lastX","_lastY","_onDrop","_disableDelayedDragEvents","_triggerDragStart","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","abs","floor","_onTouchMove","_onDragStart","selection","getSelection","removeAllRanges","_dragStarted","fallback","_appendGhost","_nulling","_emulateDragOver","elementFromPoint","ghostMatrix","relativeScrollOffset","dx","dy","b","cssMatrix","_hideClone","cloneId","_loopId","setInterval","effectAllowed","_dragStartId","revert","vertical","isOwner","canSort","fromSortable","completedFired","dragOverEvent","_ignoreWhileAnimating","completed","elLastChild","lastElRect","childContainingRect","spacer","_ghostIsLast","changed","firstElRect","_ghostIsFirst","targetBeforeFirstSwap","sibling","differentLevel","differentRowCol","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_dragElInRowColumn","side1","scrolledPastTop","scrollBefore","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","_getSwapDirection","dragIndex","nextElementSibling","after","moveVector","extra","axis","insertion","_showClone","_offMoveEvents","_offUpEvents","clearInterval","save","handleEvent","dropEffect","_globalDragOver","toArray","useAnimation","items","destroy","utils","is","extend","dst","nextTick","cancelNextTick","detectDirection","_len","_key","create","scrollEl","scrollRootEl","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","autoScrolls","scrolling","clearAutoScrolls","autoScroll","pid","clearPointerElemChangedInterval","isFallback","scroll","scrollCustomFn","sens","scrollSensitivity","speed","scrollSpeed","scrollThisInstance","scrollFn","layersOut","currentParent","canScrollX","canScrollY","scrollPosX","scrollPosY","vx","vy","scrollOffsetY","scrollOffsetX","bubbleScroll","drop","toSortable","changedTouches","onSpill","Revert","Remove","dragStart","_ref2","_ref3","_ref4","parentSortable","AutoScroll","forceAutoScrollFallback","_handleAutoScroll","_handleFallbackAutoScroll","dragOverCompleted","dragOverBubble","nulling","ogElemScroller","newElem","_createDraggableElement","elementDraggable","context","onEnd","_onEndDragAndDropLayerClick","_uid","_createMainContainerElement","_createMainLayersShowElement","_createMainLayersElement","dialog","_createMainLayersDivElement","_createMainPictoElement","htmlFor","status","ariaPressed","add","attachEvent","_createMainCounterLayersElement","span","_createMainInfoElement","divP","_createMainInfoDivElement","_createLayersPanelHeaderElement","_createLayersPanelIconElement","label","_createLayersPanelTitleElement","_createLayersPanelCloseElement","btnClose","_createContainerLayerElement","_createBasicToolElement","_createAdvancedToolShowElement","_createAdvancedToolElement","_createBasicToolNameElement","_createBasicToolVisibilityElement","_createBasicToolDragNDropElement","_onStartDragAndDropLayerClick","description","visible","visibility","_onVisibilityLayerClick","_createAdvancedToolDeleteElement","_createAdvancedToolInformationElement","array","_createAdvancedToolOpacityElement","_createAdvancedToolExtentElement","layerId","_onDropLayerClick","btnInfo","_onOpenLayerInfoClick","divO","opacity","ariaLabel","_onChangeLayerOpacity","divC","_onZoomToExtentClick","_createContainerLayerInfoElement","header","onCloseClick","quicklookUrl","quick","refquick","desc","metadata","mtd","mtdtitle","urlmtd","url","mtdlink","refmtd","legends","lgd","lgdtitle","maxScale","maxScaleDenominator","minScale","minScaleDenominator","scale","urllgd","lgdlink","reflgd","LayerSwitcher","_options","_layers","isArray","_initialize","_initContainer","_possibleConstructorReturn","_addMapLayers","collapsed","_showLayerSwitcherButton","_listeners","onMoveListener","_onMapMoveEnd","onAddListener","getLayers","gpLayerId","_layerId","addLayer","onRemoveListener","removeLayer","olObservableUnByKey","_layersOrder","setZIndex","_get","_getPrototypeOf","setPosition","isLayerInMap","lyr","nameDiv","infodiv","advancedTools","layerInfos","getLayerInfo","getOpacity","getVisible","isInRange","layerOptions","service","inRange","_title","_description","_legends","_metadata","_quicklookUrl","layerDiv","_createLayerDiv","getZIndex","_forceNullzIndex","_updateLayersOrder","unshift","_lastZIndex","_layerListContainer","updateLayerOpacity","_updateLayerOpacity","updateLayerVisibility","_updateLayerVisibility","onZIndexChangeEvent","_updateLayerCounter","log","layerID","layerList","layerIndex","layerOrderTemp","isCollapsed","removable","removalDiv","SelectorID","_layersIndex","conf","changeCollapsed","picto","counter","_layerSwitcherCounter","divL","panelHeader","panelIcon","panelTitle","panelClose","divI","divD","zindex","j","isLegends","isMetadata","isQuicklookUrl","displayInformationElement","divId","opacityValue","setOpacity","layerOpacityInput","layerOpacitySpan","setVisible","layerVisibility","_this5","maxResolution","getMaxResolution","_maxScaleDenominator","infoLayer","_this6","matchesLayers","maxZIndex","tag","updateSize","debug","domIDShort","domIDLong","extent","layerName","layerService","getLayerId","globalConstraints","getGlobalConstraints","view","crsTarget","bbox","crsSource","crs","olTransformExtentProj","fit","_this7","olLayer","foundId","mapResolution","getResolution","getMinResolution","mapExtent","calculateExtent","getSize","layerExtent","getExtent","olIntersects","layerInfo","getProperties","layerProperties","LayerSwitcherDOM","_extensions","clean","unset","opts","Utils","mergeParams","interactions","getInteractions","getArray","getActive","DrawInteraction","SelectInteraction","ModifyInteraction","setActive","action","lightOrange","darkOrange","red","turquoiseBlue","defaultOffset","GPX","geom","MultiLineString","LineString","_olGPX","readExtensions","clbk","Parser","setId","setProperties","getStyleFunction","styleFunction","Styling","defineStyleFunctionByDefault","definePropertiesFromStyle","getGeometry","getType","fp","setGeometry","getCoordinates","fm","orderBy","cmpA","cmpB","localeCompare","numeric","gpxNode","writeRootExtensions_","processExtensions_","writeExtensions_","gpxStringExtended","gpxStringFormatted","props","APPLY_CONVERT_GEOM_GPX","defineStyleFromProperties","searchChildNodesMeta","nodeMeta","searchChildNodesExt","nodeExt","searchChildNodesData","nodeData","JSON","extensionsRoot","toDOM","json","dataElement","stringify","extensionsNode","getListTags","actions","nodes","fct","olGPX","GeoJSON","_olGeoJSON","featureStyleFunction","styles","geoJSONObject","writeFeaturesObject","olGeoJSON","KML","_olKML","kmlNode","process","firstNodeLevel","ik","stylesUrl","_v","types","point","line","poly","domStyles","hdlDomStyle","domExtendedData","domNameTag","_idStyle","fctExtend","extendedData","fctName","nameData","labelStyleDom","iconStyleDom","labelName","labelDescription","fctLabel","labelStyle","fctIcon","iconStyle","fctIconLabel","iconLabelStyle","fstyles","fctPoly","polygonStyle","fctLine","lineStringStyle","getImage","Circle","fctCircle","circleStyle","Icon","fctPoint","pointStyle","_writeRootExtensions","kmlStringExtended","_writeExtendStylesFeatures","kmlStringFormatted","__convertRGBColorsToKML","strColor","color","__createExtendedStyleLabel","Style","textStyle","getText","_fontFamily","_fontSize","_font","getFont","splits","strokeTextStyle","getStroke","Stroke","_haloColor","getColor","cf","Color","isRGB","colorHex","rgbaToHex","hex","_haloRadius","getWidth","labelExtended","fImageStyle","strokeColor","strokeWidth","cfs","strokeColorHex","fillColor","getFill","cff","fillColorHex","iconExtended","getRadius","__createExtendedStyleIcon","yunits","size","anchor","getAnchor","hotspot","_processKml","nodeIconStyle","nodeLabelStyle","cfi","fillColorImgHex","circleExtended","tags","removeNodes","extendDataElement","_readExtendStylesFeatures","kmlDoc","kmlString","outerHTML","__convertKMLColorsToRGB","__getExtendedStyleToFeatureLabel","_text","_color","_colorHalo","_radiusHalo","_circleType","_circleRadius","_circleFillColor","_circleStrokeColor","_circleStrokeWidth","bLabelStyleSimpleExtensionGroup","bObjectSimpleExtensionGroup","nodeStyles","attributs","attributsExt","fillColorValue","fillOpacity","fillColorHexa","hexToRgba","strokeColorValue","strokeOpacity","strokeColorHexa","StyleInstance","radius","fill","Fill","stroke","anchorOrigin","anchorXUnits","anchorYUnits","font","textAlign","__getExtendedStyleToFeatureIcon","_src","_scale","_bSizeIcon","_sizeW","_sizeH","_bHotSpot","_anchorX","_anchorXUnits","_anchorY","_anchorYUnits","bIconStyle","parseFloat","optionsIcon","crossOrigin","_styles","_style","__getStyleToDefaultFeature","showPointNames_","_fname","_fdescription","_ftitle","childNodesLevel","node1","childNodesExtended","olKML","Polygon","MultiPolygon","Feature","setPropertyFill","colorFill","oColorFill","setPropertyStroke","colorStroke","oColorStroke","setPropertyLabel","isName","DEFAULT_TEXT","getTextAlign","setPropertyMarker","IconStyle","colorIcon","scaleIcon","getScale","srcImage","getSrc","fillImg","colorFillImg","oColorFillImg","strokeImg","colorStrokeImg","csi","oColorStrokeImg","DEFAULT_ICON","Markers","DEFAULT_CIRCLE","DEFAULT_STROKE","DEFAULT_FILL","opactity","symbolMarker","search","colorMarker","isHex","labelStroke","labelFill","isLabel","circleRadius","circleStroke","circleFill","isCircle","optionsCircle","StrokeStyle","FillStyle","CircleStyle","optionsText","TextStyle","styleText","cloneStyleText","setText","initType","ClassPoly","resolution","optsc","optsCircle","styleTextCircle","optsp","optsl","definePropertiesFromStyleByType","defineTagFromStyle","number","hexa","arrayToRgba","values","green","blue","arrayToHex","elems","rgba","parsed","r","g","rgb","detectSupport","isDesktop","param","VERBOSE","env","Log","logname","disableAll","loggers","enableAll","require","ActiveXObject","async","loadXML","errorNode","querySelector","formatted","lines","indent","lastType","transitions","ln","single","Boolean","closing","opening","fromTo","padding","timestamp","now","uuid","module","objectOrFunction","isFunction","vertxNext","customSchedulerFn","asap","arg","queue","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useNextTick","useVertxTimer","useSetTimeout","useMutationObserver","iterations","observer","observe","characterData","useMessageChannel","channel","port1","onmessage","port2","postMessage","globalSetTimeout","attemptVertx","vertx","runOnLoop","runOnContext","then","onFulfillment","onRejection","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","Constructor","promise","resolve","random","PENDING","FULFILLED","REJECTED","selfFulfillment","cannotReturnOwn","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","reject","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","detail","hasCallback","succeeded","initializePromise","resolver","nextId","validationError","Enumerator","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","resolve$$1","_then","didError","_settledAt","Promise$1","_willSettleAt","enumerator","all","entries","reject$1","needsResolver","needsNew","Promise","catch","finally","polyfill","local","P","promiseToString","cast","_setScheduler","_setAsap","_asap","factory","ErrorService","TYPE_UNKERR","stack","TYPE_SRVERR","TYPE_USEERR","WPS","DataObject","paramservice","paramversion","paramidentifier","identifier","paramrawdataoutput","rawdataoutput","paramrequest","request","method","requestString","template","post","namespaceByDefault","schemaLocationByDefault","processRequestString","__addDataInputs","tmpl","sep","that","__addDataInput","tmp","setMethod","getMethod","xmlString","xmlDoc","reader","__getXMLDOC","setReader","errorMsg","parseError","errorCode","linepos","parsererror","__readDefault","dataAttributes","nodeAttributes","attribute","__getAttributes","childData","getXMLString","setXMLString","getReader","read","getXMLDoc","setXMLDoc","parserOutput","__getRootNode","servicesVersion","servicesDate","Protocols","XHR","Services","DefaultUrl","AltiResponse","A","Alti","Elevation","AutoCompleteResponse","AutoComplete","SuggestedLocation","IsoCurveResponse","RouteResponse","Route","RouteInstruction","Helper","timeOut","onResponse","callbackId","callbackSuffix","urlHasCallbackKey","urlHasCallbackName","callbackName","HasCallbackName","onTimeOut","onTimeOutTrigger","_deleteScript","_createScript","scriptu","scripto","script","send","settings","protocol","wrap","nocache","output","params","normalyzeUrl","proxy","headers","referer","__call","response","onFailure","__callJSON","__callXML","corps","hXHR","nodefetch","Referer","ok","statusText","XMLHttpRequest","open","overrideMimeType","setRequestHeader","onerror","ontimeout","onreadystatechange","readyState","responseURL","data4xhr","XDomainRequest","timeout","onload","responseText","data4xdr","getMessage","CLASSNAME","positions","outputFormat","resource","sampling","api","httpMethod","zonly","measures","serverUrl","lstUrlByDefault","newUrl","urlFound","wps","buildRequest","success","onSuccess","onError","analyzeResponse","rawResponse","AltiResponseReader","READERS","elevations","altiResponse","elevation","textNode","lon","z","elevationObject","acc","source_name","measure","source_measure","measureChildren","exceptionreport","exceptionReport","exception","exceptionCode","delimiter","bOnError","bOnSuccess","myReq","AltiRequestREST","profil","getLon","getLat","myTemplate","rqstWPS","AltiElevationRequest","_zonly","AltiProfilRequest","_sampling","AltiRequest","setPositions","lstPosition","o","getPositions","addPositions","lstLon","lstLat","JSONResponse","errorMess","Measure","options_","patchOptionConvertor","territory","terr","maximumResponses","filterOptions","normalyzeParameters","results","suggestedLocation","country","street","poi","poiType","kind","commune","city","fullText","fulltext","postalCode","zipcode","classification","suggestedLocations","CommonService","opt","ssl","proxyURL","onBuildRequest","callService","onCallService","onAnalyzeResponse","strUrlProxified","strData","bUrlProxified","requestMetaOptions","apiKey","contentType","http","onBeforeParse","newResponse","customConfigFile","sync","listConfigUrls","__callServiceSync","__callService","listConfigResults","Fetch","fetch","fetchFactory","credentials","promises","ConfigJSON","objects","allLayersConfig","allKeysConfig","allTMSConfig","generalOptions","apiKeys","tileMatrixSets","mergeConfig","IConfig","property","ConfigInterface","defaultGMLGFIStyle","theme","wgs84Resolutions","isKeyConfLoaded","getLayersId","parts","servicePartsLayer","getLayersConf","layersIdArray","lyrId","getLayerConf","getLayerParams","layerConf","getLayerKey","serviceParams","formats","projection","defaultProjection","globalConstraint","wmtsOptions","tileMatrixSetLimits","TMSLink","tileMatrixSetLink","tmsConf","getTMSConf","matrixIds","tileMatrices","nativeResolutions","layerKey","resourcesByKey","arrayLayerId","getTileMatrixSets","tmsID","DefaultUrlService","new_key","ProcessIsoCurve","ReverseGeocode","Geocode","GeocodeResponseParser","_parseFeature","geocodeResponse","location","geometry","coordinates","properties","accuracy","placeAttributes","_type","matchType","locations","mess","query","filters","returnFreeForm","srs","geocodeMethod","returnTrueGeometry","maxResp","GeocodeRequestREST","getParams","GeocodeParamREST","searchGeometry","getFilters","getIndex","getSearchGeometry","GeocodeResponse","GeocodedLocation","bbox2Json","circle","circle2Json","polygon","polygon2Json","jsonGeom","geoEPSG","distance","exclusions","reverse","distanceUnit","timeUnit","smoothing","holes","graph","constraints","constraintTunnel","constraintPont","constraintAutoroute","constraintType","operator","oIsoCurve","ProcessIsoCurveRequest","mode","postRequest","costType","costValue","profile","ProcessIsoCurveParam","getLocation","getDistanceUnit","getConstraints","constraintArray","getDirection","coords","ProcessIsoCurveResponse","RouteRequestREST","RouteParamREST","startPoint","endPoint","intermediates","viaPoints","optimization","routePreference","getSteps","waysAttributes","getIntermediates","getWaysAttributes","getProfile","getOptimization","legs","legSteps","steps","totalTime","totalDistance","geometryInInstructions","routeGeometry","legList","portions","step","routeInstructions","instruction","modifier","exit","nom_1_droite","toponyme","provideBbox","expectedStartTime","UrlByDefault","getConfig","getAltitude","geocode","reverseGeocode","autoComplete","route","isoCurve","myParams","tabParams","encode","myUrl","firstOccuranceIndex","PARAM_MISSING","PARAM_EMPTY","PARAM_TYPE","PARAM_FORMAT","PARAM_NOT_SUPPORT","PARAM_NOT_SUPPORT_NODEJS","PARAM_UNKNOWN","SERVICE_REQUEST_BUILD","SERVICE_REQUEST_EMPTY","SERVICE_RESPONSE_EXCEPTION","SERVICE_RESPONSE_EXCEPTION_2","SERVICE_RESPONSE_ANALYSE","SERVICE_RESPONSE_ANALYSE_2","SERVICE_RESPONSE_EMPTY","SERVICE_RESPONSE_EMPTY_2","SERVICE_RESPONSE_FORMAT","SERVICE_RESPONSE_FORMAT_2","SERVICE_RESPONSE_FORMAT_3","CLASS_CONSTRUCTOR","clef","parametres","shift","definition","undefinedType","isIE","logMethods","_loggersByName","defaultLogger","bindMethod","methodName","traceForIE","realMethod","replaceLoggingMethods","level","getLevel","methodFactory","levels","SILENT","enableLoggingWhenConsoleArrives","defaultMethodFactory","_level","_loggerName","inheritedLevel","defaultLevel","userLevel","storageKey","persistLevelIfPossible","levelNum","levelName","localStorage","cookie","getPersistedLevel","storedLevel","cookieName","clearPersistedLevel","removeItem","normalizeLevel","setLevel","persist","setDefaultLevel","resetLevel","TRACE","rebuild","childName","initialLevel","_log","noConflict","getLoggers","globalObject","getGlobal","Headers","Request","Response","Observable","Overlay","interaction","Vector","proj","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","__esModule","globalThis","sphere","MeasureToolBoxDOM","_toolboxId","_buttonId","_widgetId","getToolBoxID","getButtonID","getWidgetID","_createToolBoxContainerElement","blur","widget","MeasureToolBox","_toolbox","ctrl","gpShareMeasureToolBox","mapContainer","getTargetElement","mapDocument","mapId","toolboxContainer","widgetContainer","setTarget","Measures","DEFAULT_POINTER_STYLE","DEFAULT_DRAW_START_STYLE","lineDash","DEFAULT_DRAW_FINISH_STYLE","tools","MeasureLength","MeasureArea","MeasureAzimuth","measureDraw","measureSource","measureVector","sketch","measureTooltipElement","measureTooltip","helpTooltipElement","helpTooltip","_class","clearMeasure","clearMeasureToolTip","removeMeasureEvents","_pictoContainer","onPointerMoveHandler","dragging","tooltipCoord","coordinate","getLastCoordinate","getInteriorPoint","onShowMeasureClick","currentMapId","gpShareMeasures","mySelf","instance","Interactions","addMeasureEvents","initMeasureInteraction","addMeasureInteraction","overlays","nodesToRemove","removeInteraction","createMeasureTooltip","stopEvent","positioning","addOverlay","createHelpTooltip","createStylingMeasureInteraction","startStyleOpts","pointer","Image","finish","finishStyleOpts","condition","ctrlKey","removeLastPoint","addInteraction","setOffset","VectorSource","VectorLayer","gpResultLayerId","getControls","layerDescription","ElevationPathDOM","_createShowElevationPathPictoElement","onShowElevationPathClick","_createElevationPathPanelElement","_createElevationPathPanelDivElement","_createElevationPathPanelHeaderElement","divInfo","onOpenElevationPathInfoClick","divTitle","buttonReduce","onReduceElevationPathPanelClick","buttonClose","innerText","_createElevationPathPanelProfilElement","_createElevationPathWaitingElement","_createElevationPathInformationsElement","_addElevationPathInformationsItem","ProfileElevationPathDOM","_getCssProperty","getPropertyValue","_getTextWidth","canvas","getContext","measureText","_dataZToSvgY","pathHeight","minGraphZ","pxPerMZ","_dataDistToSvgX","dist","svgWidth","pathWidth","pxPerMX","_svgXToDataDist","svgX","_arrayBisect","displayProfileByDefault","margin","_displayProfileOptions","displayProfileOptions","_points","points","sortedElev","e1","e2","minZ","maxZ","distUnit","widgetDiv","widgetHeigth","widgetWidth","zLabelWidth","zGradWidth","toLocaleString","minXguideWidth","elevationSvg","gradZ","maxNumZguides","ceil","maxGraphZ","numZguides","axisZ","gradZtext","yTextTranslation","yStrokeTranslation","gradZstroke","gradZpath","gradZgrad","guidesZ","gradZyOffsetPx","axisZLegend","maxNumXguides","gradX","maxGraphX","numXguides","lastGradX","axisX","gradXtext","xTextTranslation","xStrokeTranslation","gradXstroke","gradXpath","gradXgrad","guidesX","xOffset","gradXxOffsetPx","axisXLegend","elevationPathG","factor","pointX","pointY","pathD","pathPath","pathFill","dynamicsG","pathRectangle","sortedDist","focusLineX","focusLineY","focusCircle","tooltipDiv","altiSpan","slopeSpan","coordsSpan","currentSlope","tooltipG","tooltipBubble","tooltipBubbleShadow","__createProfileMarker","__removeProfileMarker","mousePoint","createSVGPoint","svgMousePoint","matrixTransform","getScreenCTM","inverse","mouseDist","distIndex","d0","d1","focusX","focusY","__updateProfileMarker","altiSpanTxt","slopeSpanTxt","slope","coordsSpanTxt","toolTipBubbleD","tooltipTextWidth","displayProfileRaw","rows","cols","__customRawProfileMouseOverEvent","displayProfileLibD3","unit","d3","linear","xAxis","svg","orient","ticks","yAxis","interpolate","area","y0","y1","select","append","xDomain","domain","yDomain","datum","tickSize","tickFormat","selectAll","enter","focus","bisectDist","bisector","transition","mouse","xc","yc","_message","html","pageX","pageY","displayProfileLibAmCharts","ballonText","AmCharts","addInitHandler","coeffArrond","pathToImages","categoryField","autoMarginOffset","marginTop","startDuration","fontSize","thousandsSeparator","numberFormatter","precision","decimalSeparator","categoryAxis","gridPosition","minHorizontalGap","tickPosition","titleColor","labelOffset","startOnAxis","chartCursor","animationDuration","bulletsEnabled","bulletSize","categoryBalloonEnabled","cursorColor","graphBulletAlpha","graphBulletSize","zoomable","trendLines","graphs","balloonColor","balloonText","bulletAlpha","bulletBorderColor","bulletBorderThickness","bulletColor","hidden","fillAlphas","fillColors","lineAlpha","lineColor","lineThickness","valueField","guides","valueAxes","minVerticalGap","balloon","borderColor","borderThickness","showBullet","titles","allLabels","dataProvider","_containerProfile","makeChart","addListener","chart","ElevationPath","_ElevationPath","_showContainer","_pictoButton","_panelContainer","_profileContainer","_waitingContainer","_infoContainer","_timerHdlr","_drawStyleStart","_drawStyleFinish","_markerStyle","_profile","_data","_measureSource","_measureVector","_measureDraw","_lastSketch","_currentSketch","_marker","_container","_initializeContainer","_initMeasureInteraction","_addMeasureInteraction","_removeProfile","_removeMeasureInteraction","setLayer","_displayProfile","export","elevationOptions","greaterSlope","meanSlope","ascendingElevation","descendingElevation","stylesOptions","draw","displayFunction","DISPLAY_PROFILE_BY_DEFAULT","displayContainer","_createStylingDraw","_createStylingMarker","panelDiv","waiting","DEFAULT_STYLES","MARKER","userStyles","PROFILE","_defaultStyle","stopClick","removeFeature","_features","_requestService","projSrc","projDest","xy","olTransformProj","c1","c2","olGetDistanceSphere","pointCoords","_getGeometry","bOnFailure","_computeElevationMeasure","_waiting","_length","_getLength","_getSketchCoords","_sketchPoints","_currentSection","_previousSectionsLength","_nextSectionBegining","_distanceMinus","_distancePlus","_ascendingElevation","_descendingElevation","_distance","_slopes","distances","distanceToStart","za","zb","_altMin","_altMax","_greaterSlope","ji","distancePlus","distanceMinus","altMin","altMax","_updateInfoContainer","childElementCount","dataset","removeMeasure","_removeMeasure","_coordinate","_coordinateProj","getClosestPoint","_geometry","Point","addFeature","_pts","_proj","RESULTS","_image","imageRadius","imageStrokeColor","imageStrokeWidth","imageFillColor","snapToPixel"],"sourceRoot":""}