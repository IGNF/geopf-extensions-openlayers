{"version":3,"file":"GpfExtOlTerritories.js","mappings":";;;;;;;;;;;;;qCAAA,SAMC,WACG,aAEI,EAMA,WAIJ,IAAIA,EAAO,WAAY,EACnBC,EAAgB,YAChBC,SAAeC,SAAWF,UAA0BE,OAAOC,YAAcH,GACzE,kBAAkBI,KAAKF,OAAOC,UAAUE,WAGxCC,EAAa,CACb,QACA,QACA,OACA,OACA,SAGAC,EAAiB,CAAC,EAClBC,EAAgB,KAGpB,SAASC,EAAWC,EAAKC,GACrB,IAAIC,EAASF,EAAIC,GACjB,GAA2B,mBAAhBC,EAAOC,KACd,OAAOD,EAAOC,KAAKH,GAEnB,IACI,OAAOI,SAASC,UAAUF,KAAKG,KAAKJ,EAAQF,EAChD,CAAE,MAAOO,GAEL,OAAO,WACH,OAAOH,SAASC,UAAUG,MAAMA,MAAMN,EAAQ,CAACF,EAAKS,WACxD,CACJ,CAER,CAGA,SAASC,IACDC,QAAQC,MACJD,QAAQC,IAAIJ,MACZG,QAAQC,IAAIJ,MAAMG,QAASF,WAG3BL,SAASC,UAAUG,MAAMA,MAAMG,QAAQC,IAAK,CAACD,QAASF,aAG1DE,QAAQE,OAAOF,QAAQE,OAC/B,CAIA,SAASC,EAAWb,GAKhB,MAJmB,UAAfA,IACAA,EAAa,cAGNU,UAAYrB,IAEG,UAAfW,GAA0BV,EAC1BmB,OACwBK,IAAxBJ,QAAQV,GACRF,EAAWY,QAASV,QACJc,IAAhBJ,QAAQC,IACRb,EAAWY,QAAS,OAEpBtB,EAEf,CAIA,SAAS2B,IAKL,IAHA,IAAIC,EAAQC,KAAKC,WAGRC,EAAI,EAAGA,EAAIxB,EAAWyB,OAAQD,IAAK,CACxC,IAAInB,EAAaL,EAAWwB,GAC5BF,KAAKjB,GAAemB,EAAIH,EACpB5B,EACA6B,KAAKI,cAAcrB,EAAYgB,EAAOC,KAAKK,KACnD,CAMA,GAHAL,KAAKN,IAAMM,KAAKM,aAGLb,UAAYrB,GAAiB2B,EAAQC,KAAKO,OAAOC,OACxD,MAAO,kCAEf,CAIA,SAASC,EAAgC1B,GACrC,OAAO,kBACQU,UAAYrB,IACnB0B,EAAsBV,KAAKY,MAC3BA,KAAKjB,GAAYO,MAAMU,KAAMT,WAErC,CACJ,CAIA,SAASmB,EAAqB3B,EAAY4B,EAAQC,GAE9C,OAAOhB,EAAWb,IACX0B,EAAgCnB,MAAMU,KAAMT,UACvD,CAEA,SAASsB,EAAOR,EAAMS,GAEpB,IASIC,EAMAC,EAMAC,EArBAC,EAAOlB,KAuBPmB,EAAa,WAOjB,SAASC,EAAuBC,GAC5B,IAAIC,GAAa5C,EAAW2C,IAAa,UAAUE,cAEnD,UAAWjD,SAAWF,GAAkB+C,EAAxC,CAGA,IAEI,YADA7C,OAAOkD,aAAaL,GAAcG,EAEtC,CAAE,MAAOG,GAAS,CAGlB,IACInD,OAAOoD,SAASC,OACdC,mBAAmBT,GAAc,IAAMG,EAAY,GACzD,CAAE,MAAOG,GAAS,CAZwC,CAa9D,CAEA,SAASI,IACL,IAAIC,EAEJ,UAAWxD,SAAWF,GAAkB+C,EAAxC,CAEA,IACIW,EAAcxD,OAAOkD,aAAaL,EACtC,CAAE,MAAOM,GAAS,CAGlB,UAAWK,IAAgB1D,EACvB,IACI,IAAIuD,EAASrD,OAAOoD,SAASC,OACzBI,EAAaH,mBAAmBT,GAChCa,EAAWL,EAAOM,QAAQF,EAAa,MACzB,IAAdC,IACAF,EAAc,WAAWI,KACrBP,EAAOQ,MAAMH,EAAWD,EAAW5B,OAAS,IAC9C,GAEV,CAAE,MAAOsB,GAAS,CAQtB,YAJiC5B,IAA7BqB,EAAKX,OAAOuB,KACZA,OAAcjC,GAGXiC,CAzBmD,CA0B9D,CAEA,SAASM,IACL,UAAW9D,SAAWF,GAAkB+C,EAAxC,CAGA,IACI7C,OAAOkD,aAAaa,WAAWlB,EACnC,CAAE,MAAOM,GAAS,CAGlB,IACInD,OAAOoD,SAASC,OACdC,mBAAmBT,GAAc,0CACvC,CAAE,MAAOM,GAAS,CAXwC,CAY9D,CAEA,SAASa,EAAeC,GACpB,IAAIxC,EAAQwC,EAIZ,GAHqB,iBAAVxC,QAA2DF,IAArCqB,EAAKX,OAAOR,EAAMwB,iBAC/CxB,EAAQmB,EAAKX,OAAOR,EAAMwB,gBAET,iBAAVxB,GAAsBA,GAAS,GAAKA,GAASmB,EAAKX,OAAOC,OAChE,OAAOT,EAEP,MAAM,IAAIyC,UAAU,6CAA+CD,EAE3E,CAhFoB,iBAATlC,EACTc,GAAc,IAAMd,EACK,iBAATA,IAChBc,OAAatB,GAqFfqB,EAAKb,KAAOA,EAEZa,EAAKX,OAAS,CAAE,MAAS,EAAG,MAAS,EAAG,KAAQ,EAAG,KAAQ,EACvD,MAAS,EAAG,OAAU,GAE1BW,EAAKd,cAAgBU,GAAWJ,EAEhCQ,EAAKjB,SAAW,WACZ,OAAiB,MAAbgB,EACKA,EACkB,MAAhBD,EACFA,EAEAD,CAEb,EAEAG,EAAKuB,SAAW,SAAU1C,EAAO2C,GAO7B,OANAzB,EAAYqB,EAAevC,IACX,IAAZ2C,GACAtB,EAAuBH,GAIpBnB,EAAsBV,KAAK8B,EACtC,EAEAA,EAAKyB,gBAAkB,SAAU5C,GAC7BiB,EAAesB,EAAevC,GACzB8B,KACDX,EAAKuB,SAAS1C,GAAO,EAE7B,EAEAmB,EAAK0B,WAAa,WACd3B,EAAY,KACZmB,IACAtC,EAAsBV,KAAK8B,EAC/B,EAEAA,EAAK2B,UAAY,SAASH,GACtBxB,EAAKuB,SAASvB,EAAKX,OAAOuC,MAAOJ,EACrC,EAEAxB,EAAK6B,WAAa,SAASL,GACvBxB,EAAKuB,SAASvB,EAAKX,OAAOC,OAAQkC,EACtC,EAEAxB,EAAK8B,QAAU,WAMX,GALIpE,IAAkBsC,IAClBH,EAAiBuB,EAAe1D,EAAcqB,aAElDH,EAAsBV,KAAK8B,GAEvBtC,IAAkBsC,EAClB,IAAK,IAAI+B,KAAatE,EACpBA,EAAesE,GAAWD,SAGpC,EAGAjC,EAAiBuB,EACb1D,EAAgBA,EAAcqB,WAAa,QAE/C,IAAIiD,EAAerB,IACC,MAAhBqB,IACAjC,EAAYqB,EAAeY,IAE/BpD,EAAsBV,KAAK8B,EAC7B,EAQAtC,EAAgB,IAAIiC,GAENsC,UAAY,SAAmB9C,GACzC,GAAqB,iBAATA,GAAqC,iBAATA,GAA+B,KAATA,EAC1D,MAAM,IAAImC,UAAU,kDAGxB,IAAIY,EAASzE,EAAe0B,GAO5B,OANK+C,IACDA,EAASzE,EAAe0B,GAAQ,IAAIQ,EAChCR,EACAzB,EAAcwB,gBAGfgD,CACX,EAGA,IAAIC,SAAe/E,SAAWF,EAAiBE,OAAOoB,SAAMG,EAiB5D,OAhBAjB,EAAc0E,WAAa,WAMvB,cALWhF,SAAWF,GACfE,OAAOoB,MAAQd,IAClBN,OAAOoB,IAAM2D,GAGVzE,CACX,EAEAA,EAAc2E,WAAa,WACvB,OAAO5E,CACX,EAGAC,EAAuB,QAAIA,EAEpBA,CACX,OA3VyB,6DAMzB,CATA,E,GCLI4E,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqB7D,IAAjB8D,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUtE,KAAKyE,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CCrBAH,EAAoBM,EAAKF,IACxB,IAAIG,EAASH,GAAUA,EAAOI,WAC7B,IAAOJ,EAAiB,QACxB,IAAM,EAEP,OADAJ,EAAoBS,EAAEF,EAAQ,CAAEG,EAAGH,IAC5BA,GCLRP,EAAoBS,EAAI,CAACN,EAASQ,KACjC,IAAI,IAAIC,KAAOD,EACXX,EAAoBa,EAAEF,EAAYC,KAASZ,EAAoBa,EAAEV,EAASS,IAC5EE,OAAOC,eAAeZ,EAASS,EAAK,CAAEI,YAAY,EAAMC,IAAKN,EAAWC,MCJ3EZ,EAAoBa,EAAI,CAACxF,EAAK6F,IAAUJ,OAAOpF,UAAUyF,eAAexF,KAAKN,EAAK6F,G,mDCAlF,MAAM,EAA+BE,GAAGC,QAAQC,QCUhD,QAVgB,WAIZ,MAAc,KAFFC,iBAAiBtD,SAASuD,iBACpBC,iBAAiB,4BAKvC,E,q9DCkCA,QAvCqB,SAAAC,GAEjB,SAAAC,EAAaC,GAAS,IAAAC,EAkBjB,OAlBiBC,EAAA,KAAAH,GAElBE,EAAAE,EAAA,KAAAJ,EAAA,CAAM,CACFK,SAFJJ,EAAUA,GAAW,CAAC,GAEAI,QAClBC,OAASL,EAAQK,OACjBC,OAASN,EAAQM,UAGjBN,GAAWA,EAAQO,SACnBN,EAAKM,UAAW,EAEhBN,EAAKM,UAAW,EAGhBP,GAAWA,EAAQQ,YACnBP,EAAKO,YAAcR,EAAQQ,YAE3BP,EAAKO,YAAc,GACtBP,CACL,CAAC,O,qRAAAQ,CAAAV,EAAAD,GAAAY,EAAAX,EAAA,EAAAf,IAAA,cAAA2B,MAED,SAAaC,GACLjG,KAAKkG,UACU,IAAIC,EAAgBnG,MAC1BoG,IAAIH,EAErB,GAAC,CAAA5B,IAAA,iBAAA2B,MAED,SAAgBC,GACRjG,KAAKkG,UACU,IAAIC,EAAgBnG,MAC1BqG,OAAOJ,EAExB,IAAC,CAnCgB,C,MAASlB,IA4C9B,IAAMuB,EAAU,CACZ,WACA,YACA,cACA,gBAGJC,EAAA,IAAAC,QAIML,EAAe,WAgBhB,OAAAJ,EAVD,SAAAI,EAAaM,GAST,OATiBlB,EAAA,KAAAY,GAYrBO,EAAA,KAAAH,GAXIvG,KAAKyG,OAASA,EACdzG,KAAK2G,UAAY,KAEjBC,EAAAL,EAAAvG,KAAK6G,GAAgBzH,KAArBY,KAAsB,YACtB4G,EAAAL,EAAAvG,KAAK6G,GAAgBzH,KAArBY,KAAsB,aACtB4G,EAAAL,EAAAvG,KAAK6G,GAAgBzH,KAArBY,KAAsB,eACtB4G,EAAAL,EAAAvG,KAAK6G,GAAgBzH,KAArBY,KAAsB,gBAEfA,IACX,EAAC,EAAAqE,IAAA,MAAA2B,MAqJD,SAAKC,GACIK,EAAQQ,SAASb,EAAIc,iBAI1BH,EAAAL,EAAAvG,KAAKgH,GAAU5H,KAAfY,KAAgBiG,GAAK,GAEjBA,EAAIa,SAAS,UACb9G,KAAK2G,UAAUM,SAAS,sBAAwBhB,GAAKiB,QAAQlH,KAAKyG,OAAOhB,SAEzEzF,KAAK2G,UAAUM,SAAS,sBAAwBhB,GAAKkB,YAAYnH,KAAKyG,OAAOhB,SAErF,GAEA,CAAApB,IAAA,SAAA2B,MAKA,SAAQC,GACCK,EAAQQ,SAASb,EAAIc,gBAK1BH,EAAAL,EAAAvG,KAAKgH,GAAU5H,KAAfY,KAAgBiG,GAAK,EACzB,IAAC,CA/LgB,GA+LhB,SAAAmB,EAxKgB/G,GAEb,QADUL,KAAK2G,UAAUM,SAAS,sBAAwB5G,EAK9D,CAEA,SAAAwG,EAKkBxG,GAGd,GAFAL,KAAK2G,UAAY3G,KAAKyG,OAAOP,SAASmB,gCAElCT,EAAAL,EAAAvG,KAAKoH,GAAehI,KAApBY,KAAqBK,GAAzB,CAMA,IAAIiH,EAAM5F,SAAS6F,cAAc,OACjCD,EAAIE,GAAK,sBAAwBnH,EACjCiH,EAAIG,UAAY,+BAAiCpH,EAEjDL,KAAK2G,UAAUQ,YAAYG,EAR3B,CASJ,CAEA,SAAAN,EAMYf,EAAKI,GACb,IAAInF,EAAOlB,KACL0H,EAAW,SAACzB,GAEd,OADc/E,EAAKyF,UAAUM,SAAS,sBAAwBhB,GAC/CgB,SAAS9G,MAC5B,EACMwH,EAAQ,SAAC1B,GAGX,OAFc/E,EAAKyF,UAAUM,SAAS,sBAAwBhB,GAC1C2B,WAExB,EACMC,EAAQ,SAAC5B,GACX,IAAIR,EAAUvE,EAAKyF,UAAUM,SAAS,sBAAwBhB,GAC1D6B,EAASrC,EAAQsC,aACrB,GAAI1B,EAAQ,CACJJ,EAAIa,SAAS,SACbgB,EAAS,GAGb,IAAK,IAAIE,EAAQ,EAAGA,EAAQvC,EAAQwB,SAAS9G,OAAQ6H,IAAS,CAE1D,GADWvC,EAAQwB,SAASe,GAAOR,KACxBtG,EAAKuF,OAAOhB,QAAQ+B,GAAI,CAC/BM,EAAU7B,EAAIa,SAAS,UAAagB,EAAS5G,EAAKuF,OAAOhB,QAAQsC,cAA0B,EAAXD,EAChF,KACJ,CACAA,GAAUrC,EAAQwB,SAASe,GAAOD,YACtC,CACJ,CACA,OAAOD,CACX,EACMG,EAAQ,SAACxC,GACXA,EAAQyC,MAAMC,IAAM,QACpB1C,EAAQyC,MAAME,OAAS,QACvB3C,EAAQyC,MAAMG,KAAO,QACrB5C,EAAQyC,MAAMI,MAAQ,OAC1B,EAIAL,EAAMjI,KAAKyG,OAAOhB,SAClBzF,KAAKyG,OAAOhB,QAAQyC,MAAMR,SAAW,QAKrC,IAAIa,EAASC,MAAMC,KAAKzI,KAAKyG,OAAOhB,QAAQiD,uBAAuB,YACnE,GAAsB,IAAlBH,EAAOpI,OAAX,CAGA,IAAIwI,EAAS,EACbJ,EAAOK,QAAQ,SAACC,GAKZ,GAAqC,WAAjCA,EAAMC,SAAS/B,cAAnB,CAOA,OAJAkB,EAAMY,GAIE5C,EAAIc,eACR,IAAK,WACGgC,IACAF,EAAMX,MAAMC,IAAM,MAElBU,EAAMX,MAAMC,IAAMT,EAASzB,GAAO4B,EAAM5B,GAAO,KAAO,MAE1D4C,EAAMX,MAAMG,KAAOV,EAAM1B,GAAO0C,EAAS,KACzC,MACJ,IAAK,cACGI,IACAF,EAAMX,MAAMC,IAAM,MAElBU,EAAMX,MAAME,OAASV,EAASzB,GAAO4B,EAAM5B,GAAO,KAAO,MAE7D4C,EAAMX,MAAMG,KAAOV,EAAM1B,GAAO0C,EAAS,KACzC,MACJ,IAAK,YACGI,IACAF,EAAMX,MAAMC,IAAM,MAElBU,EAAMX,MAAMC,IAAMT,EAASzB,GAAO4B,EAAM5B,GAAO,KAAO,MAE1D4C,EAAMX,MAAMI,MAAQX,EAAM1B,GAAO0C,EAAS,KAC1C,MACJ,IAAK,eACGI,IACAF,EAAMX,MAAMC,IAAM,MAElBU,EAAMX,MAAME,OAASV,EAASzB,GAAO4B,EAAM5B,GAAO,KAAO,MAE7D4C,EAAMX,MAAMI,MAAQX,EAAM1B,GAAO0C,EAAS,KAKlDA,GAAUE,EAAMjB,WAzChB,CA0CJ,EAnDA,CAoDJ,C,8tBCxNJ,IAAMoB,EAAa,CAAC,gBAAiB,gBAkCrC,QAPmB,SAAUtB,EAAUuB,GACnC,IAAIC,EA1BR,SAAiCxB,EAAUuB,GAEvC,IAAIE,EAAiB,GAAHC,OAAOJ,EAAY,CAAAC,IACjCI,EAAgB,GACpB,GAAI3B,GAAYA,EAASZ,SAAS,QAAS,CACvC,IAAIwC,EAAa5H,SAAS6H,eAAe,kCACrCC,EAAU9H,SAAS6H,eAAe,+BACtCF,EAAgB,GAAHD,OAAAK,EAAOH,EAAWrC,UAAQwC,EAAKD,EAAQvC,UACxD,CACA,GAAIS,GAAYA,EAASZ,SAAS,SAAU,CACxC,IAAI4C,EAAchI,SAAS6H,eAAe,mCACtCI,EAAWjI,SAAS6H,eAAe,gCACvCF,EAAgB,GAAHD,OAAAK,EAAOC,EAAYzC,UAAQwC,EAAKE,EAAS1C,UAC1D,CAEA,OAAOoC,EAAcO,OAAO,SAAAC,GACxB,IAAIC,EAAUD,EAAErC,GAAGuC,MAAM,gBAAgB,GACrCC,EAAcb,EAAerC,SAASgD,GAE1C,GAAiB,SADFD,EAAEI,qBAAqB,UAAU,GAAGC,aAAa,kBACpCF,EACxB,OAAOH,CAEf,EACJ,CAGsBM,CAAuBzC,EAAUuB,GAC/CC,EAAY/I,OAAS,GACrB+I,EAAY,GAAGe,qBAAqB,UAAU,GAAGG,OAEzD,EChBA,QAXa,CAKTC,YAAc,WAEVC,EAAatK,KAAKqF,QAAQqC,SAAU1H,KAAKyF,QAAQ+B,GAAGuC,MAAM,gBAAgB,GAC9E,GCbE,GCA+BlF,GAAG0F,IDAH1F,GAAG2F,M,sOEwGxC,QAzFa,CAUTC,cAAgB,WACZ,IAAIC,GAAY,EACZjM,EAAYH,OAAOC,UAAUE,UAAUsI,cAmB3C,OAjBqC,IAAjCtI,EAAUwD,QAAQ,YACa,IAA/BxD,EAAUwD,QAAQ,UACa,IAA/BxD,EAAUwD,QAAQ,UACgB,IAAlCxD,EAAUwD,QAAQ,aACe,IAAjCxD,EAAUwD,QAAQ,YACmB,IAArCxD,EAAUwD,QAAQ,gBACe,IAAjCxD,EAAUwD,QAAQ,YACc,IAAhCxD,EAAUwD,QAAQ,WACc,IAAhCxD,EAAUwD,QAAQ,WAClByI,GAAY,IAGmB,IAA/BjM,EAAUwD,QAAQ,UACgB,IAAlCxD,EAAUwD,QAAQ,aAClByI,GAAY,GAGTA,CACX,EAUAC,OAAS,SAAUC,EAAMC,GAErB,IAAK,IAAIlG,KADTiG,EAAOA,GAAQ,CAAC,EACCC,EACTA,EAAOjG,eAAeD,KACtBiG,EAAKjG,GAAQkG,EAAOlG,IAG5B,OAAOiG,CACX,EAUAE,YAAc,SAAUF,EAAMC,EAAQE,GAClC,QAAoB,IAATH,QAA0C,IAAXC,EAM1C,IAAK,IAAIG,UAHc,IAAZD,IACPA,GAAU,GAEIF,EACVA,EAAOjG,eAAeoG,KACO,WAAzBC,EAAOJ,EAAOG,IACVJ,EAAKhG,eAAeoG,GACpBhL,KAAK8K,YAAYF,EAAKI,GAAQH,EAAOG,GAAQD,GAE7CH,EAAKI,GAASH,EAAOG,GAGrBJ,EAAKhG,eAAeoG,GAChBD,IACAH,EAAKI,GAASH,EAAOG,IAGzBJ,EAAKI,GAASH,EAAOG,GAKzC,GCxFJ,IAQYE,EAkEZ,QA1EiB,CAObC,UACQD,EAAYE,KAAKC,MAAMC,KAAKC,OACzB,WACH,OAAOL,GACX,GASJ7K,KAAO,SAAUmH,GACb,IAAInH,EAAO,KAEPH,EAAIsH,EAAGgE,YAAY,KAOvB,OALInL,GADO,IAAPH,EACOsH,EAEAA,EAAGiE,UAAU,EAAGvL,GAGpBG,CACX,EASA2H,MAAQ,SAAUR,GACd,IAAIQ,EAAQ,KAER3H,EAAOL,KAAKK,KAAKmH,GAEjBtH,EAAIG,EAAKmL,YAAY,KAMzB,OALW,IAAPtL,IACA8H,EAAQ3H,EAAKoL,UAAUvL,EAAI,IAIxB8H,CACX,EASA0D,KAAO,SAAUlE,GACb,IAAIkE,EAAO,KAEPxL,EAAIsH,EAAGgE,YAAY,KAKvB,OAJW,IAAPtL,IACAwL,EAAOC,SAASnE,EAAGiE,UAAUvL,EAAI,GAAI,KAGlCwL,CACX,G,cClEAE,EAAkB,CAQlBzI,UAAY,SAAU9C,GAElB,QAAuB,IAAZwL,EACP,IAAIA,EAAU,CACdA,IAAc,CACVC,SAAU,IAGjBD,EAAQE,IAAID,QAAWE,EAAAA,YAAkBA,EAAAA,aAC1C,IAAIC,EAAU5L,GAAQ,UACtB,OAAO2L,EAAAA,UAAcC,EACzB,EAKAlJ,WAAa,WACT,IAAImJ,EAAUF,EAAAA,aACd,IAAK,IAAM3H,KAAO6H,EAAS,CACvB,GAAI3H,OAAOK,eAAexF,KAAK8M,EAAS7H,GACrB6H,EAAQ7H,GAChBtB,YAEf,CACJ,EAKAF,UAAY,WACR,IAAIqJ,EAAUF,EAAAA,aACd,IAAK,IAAM3H,KAAO6H,EAAS,CACvB,GAAI3H,OAAOK,eAAexF,KAAK8M,EAAS7H,GACrB6H,EAAQ7H,GAChBxB,WAEf,CACJ,GAGJ,UAGIvE,OAAO6N,KACP7N,OAAO6N,GAAGtL,OAAS+K,GCnEV/K,EAAOsC,UAAU,aAmH9B,QAtGgB,CAyBZiJ,YAAc,SAAU3G,EAAS4G,EAAQ1F,GAErC,IAMI2F,EANAC,EAAkB,EAAGC,EAAkB,EAAGC,EAAQ,EAAGC,EAAQ,EAAGC,EAAY,EAAGC,EAAY,EAC3FP,EACAA,EAAOQ,iBAAiB,YAAaC,GAAe,GAEpDrH,EAAQoH,iBAAiB,YAAaC,GAAe,GAGzD,IAAIC,EAAW,CACX3E,OAAS,EACTC,KAAO,EACPC,MAAQ,EACRH,IAAM,GAGV,SAAS2E,EAAezN,IACpBA,EAAIA,GAAKf,OAAO0O,OACdC,iBAEFV,EAAkBlN,EAAE6N,QACpBV,EAAkBnN,EAAE8N,QAEpBb,EAAO7G,EAAQ2H,wBACf,IAAMC,EAAe1G,EAAUyG,wBAC/BL,EAAW,CACP3E,OAASiF,EAAajF,OACtBC,KAAOgF,EAAahF,KACpBC,MAAQ+E,EAAa/E,MACrBH,IAAMkF,EAAalF,KAGvBzG,SAASmL,iBAAiB,UAAWS,GAAkB,GACvD5L,SAASmL,iBAAiB,YAAaU,GAAa,EACxD,CAEA,SAASD,IAELX,GAAaF,EACbG,GAAaF,EACbhL,SAAS8L,oBAAoB,UAAWF,GAAkB,GAC1D5L,SAAS8L,oBAAoB,YAAaD,GAAa,EAC3D,CAEA,SAASA,EAAalO,GAGlB,IAAIoO,GAFJpO,EAAIA,GAAKf,OAAO0O,OAEME,QAClBQ,EAAgBrO,EAAE8N,QAElBQ,EAAWlB,EACXmB,EAAWlB,EAEfD,EAAQF,EAAkBkB,EAC1Bf,EAAQF,EAAkBkB,EAE1B,IAAIG,EAAUvB,EAAKjE,KAAOoE,EACtBqB,EAASxB,EAAKnE,IAAMuE,EAExB,GAAImB,EAAUd,EAAS1E,MAChByF,EAASf,EAAS5E,KAClB0F,EAAUvB,EAAKyB,MAAQhB,EAASzE,OAChCwF,EAASxB,EAAKxE,OAASiF,EAAS3E,OAGnCqE,EAAQkB,EACRjB,EAAQkB,MACL,CAEH,IAAII,EAAOrB,EAAYF,EACnBwB,EAAOrB,EAAYF,EACvBjH,EAAQyC,MAAMgG,UAAY,aAAeF,EAAO,MAAQC,EAAO,KACnE,CACJ,CACJ,G,kxFClHJ,IAAME,EAAe,SAACC,GAelB,GAdc,WACV,IAAK9P,OAAO+P,UACR,OAAO,EAEX,IAAIC,EAAS,IAAID,UACjB,IACIC,EAAOC,gBAAgB,IAAK,YAChC,CAAE,MAAOC,GACL,OAAO,CACX,CACA,OAAO,CACX,CAGIC,GAGA,OAFa,IAAIJ,WACAE,gBAAgBH,EAAK,aAC3BM,KAIf,IAAIC,EAAMjN,SAAS6F,cAAc,OAEjC,OADAoH,EAAIC,UAAYR,EACTO,CACX,EAgmBA,QA9lBqB,CAOjBE,QAAU,SAAUrH,GAEhB,OADWxH,KAAK8O,IAAOtH,EAAK,IAAMxH,KAAK8O,IAAMtH,CAEjD,EAOAuH,4BAA8B,WAC1B,IAAIpI,EAAYjF,SAAS6F,cAAc,OAGvC,OAFAZ,EAAUa,GAAKxH,KAAK6O,QAAQ,iBAC5BlI,EAAUc,UAAY,8DACfd,CACX,EAWAqI,mCAAqC,WACjC,IAAI9N,EAAOlB,KAEPiP,EAASvN,SAAS6F,cAAc,UAEhC2H,EAAOxN,SAAS6F,cAAc,QA2BlC,OA1BA0H,EAAO9H,YAAY+H,GACnBD,EAAOzH,GAAKxH,KAAK6O,QAAQ,0BACzBI,EAAOE,UAAUC,IAAI,aAAc,0BAA2B,0BAC9DH,EAAOE,UAAUC,IAAI,UAAW,oBAAqB,eAAgB,4BACrEH,EAAOE,UAAUC,IAAI,uBACrBH,EAAOE,UAAUC,IAAI,SAAU,oBAC/BH,EAAOI,aAAa,aAAc,2BAClCJ,EAAOI,aAAa,WAAY,KAChCJ,EAAOI,aAAa,gBAAgB,GACpCJ,EAAOI,aAAa,OAAQ,UAGxBJ,EAAOpC,iBACPoC,EAAOpC,iBAAiB,QAAS,SAAUxN,GACvC,IAAIiQ,EAAmC,SAAzBjQ,EAAEqG,OAAO6J,YACvBlQ,EAAEqG,OAAO2J,aAAa,gBAAiBC,GACvCpO,EAAKsO,uBAAuBnQ,EAChC,GACO4P,EAAOQ,aACdR,EAAOQ,YAAY,UAAW,SAAUpQ,GACpC,IAAIiQ,EAAmC,SAAzBjQ,EAAEqG,OAAO6J,YACvBlQ,EAAEqG,OAAO2J,aAAa,gBAAiBC,GACvCpO,EAAKsO,uBAAuBnQ,EAChC,GAGG4P,CACX,EAWAS,+BAAiC,WAC7B,IAAIC,EAASjO,SAAS6F,cAAc,UAIpC,OAHAoI,EAAOnI,GAAKxH,KAAK6O,QAAQ,sBACzBc,EAAOlI,UAAY,6BAEZkI,CACX,EAEAC,kCAAoC,WAChC,IAAItI,EAAM5F,SAAS6F,cAAc,OAEjC,OADAD,EAAIG,UAAY,yBACTH,CACX,EAOAuI,qCAAuC,WACnC,IAAIlJ,EAAYjF,SAAS6F,cAAc,OAEvC,OADAZ,EAAUc,UAAY,gCACfd,CACX,EACAmJ,mCAAqC,WACjC,IAAIC,EAAQrO,SAAS6F,cAAc,SAGnC,OAFAwI,EAAMtI,UAAY,6DAClBsI,EAAMC,MAAQ,2BACPD,CACX,EACAE,oCAAsC,SAAUD,GAC5C,IAAI1I,EAAM5F,SAAS6F,cAAc,OAGjC,OAFAD,EAAIG,UAAY,+BAChBH,EAAIsH,UAAYoB,EACT1I,CACX,EACA4I,oCAAsC,WAClC,IAAIhP,EAAOlB,KAEPmQ,EAAWzO,SAAS6F,cAAc,UACtC4I,EAAS3I,GAAK,0BACd2I,EAAS1I,UAAY,sFACrB0I,EAASH,MAAQ,oBAEjB,IAAId,EAAOxN,SAAS6F,cAAc,QAmBlC,OAlBA2H,EAAKzH,UAAY,8BACjByH,EAAKkB,UAAY,SAEjBD,EAAShJ,YAAY+H,GAGjBiB,EAAStD,iBACTsD,EAAStD,iBAAiB,QAAS,WAC/BnL,SAAS6H,eAAerI,EAAK2N,QAAQ,2BAA2BzE,QAChElJ,EAAKmP,yBACT,GAAG,GACIF,EAASV,aAChBU,EAASV,YAAY,UAAW,WAC5B/N,SAAS6H,eAAerI,EAAK2N,QAAQ,2BAA2BzE,QAChElJ,EAAKmP,yBACT,GAGGF,CACX,EACAG,sCAAwC,SAAUN,EAAOnK,GACrD,IAAI3E,EAAOlB,KAIPuQ,EAAW,mCACXC,EAAgB,4BAChBC,EAAU,kCACVC,EAAW,kCACXC,EAAa,2BAEbC,EAAe,4EAAHxH,OAGFmH,EAAQ,sPAAAnH,OAXR,UAgBG,qQAAAA,OAKKqH,EAAO,yaAAArH,OASf4G,EAAK,qDAAA5G,OACsBvD,EAAW,iRAAAuD,OAMtBsH,EAAQ,2QAAAtH,OAIqBsH,EAAQ,kVAAAtH,OAMzCoH,EAAa,+fAAApH,OAUjBuH,EAAU,0XAW1BE,EAHU1C,EAAayC,GAGJE,aAAa,CAAEC,KAAO,SAC/CF,EAAOjC,UAAYgC,EAAaI,OAEhC,IAAI/B,EAAS4B,EAAOtH,eAAegH,GAC/BtB,GACAA,EAAOpC,iBAAiB,QAAS,SAACxN,GAC9BA,EAAEqG,OAAOuL,eAA2C,SAA1B5R,EAAEqG,OAAOuL,cACnC,IAAIC,EAAWxP,SAAS6H,eAAelK,EAAEqG,OAAOwE,aAAa,kBACxDgH,IAGyB,SAA1B7R,EAAEqG,OAAOuL,cACTC,EAAS/B,UAAUC,IAAI,eACvB8B,EAAS/B,UAAUgC,OAAO,gBAE1BD,EAAS/B,UAAUgC,OAAO,eAC1BD,EAAS/B,UAAUC,IAAI,eAE/B,GAAG,GAGP,IAAIgC,EAAQP,EAAOtH,eAAekH,GAC9BW,GACAA,EAAMvE,iBAAiB,QAAS,SAACxN,GAC7BA,EAAEqG,OAAOuL,eAA2C,SAA1B5R,EAAEqG,OAAOuL,cACtBvP,SAAS6H,eAAegH,GAC9BnG,OACX,GAKJ,IAAIiH,EAAcR,EAAOtH,eAAeiH,GACpCa,GACAA,EAAYxE,iBAAiB,SAAU,SAACxN,GACpC6B,EAAKoQ,kBAAkBjS,EAC3B,GAAG,GAGP,IAAIkS,EAASV,EAAOtH,eAAemH,GAC/BA,GACAa,EAAO1E,iBAAiB,QAAS,SAACxN,GAC9BI,QAAQC,IAAIL,EAAEqG,OAAO8L,SACrBtQ,EAAKuQ,oBAAoBpS,EAC7B,GAGJ,IAAIqS,EAAab,EAAOtH,eAAeoH,GAMvC,OALIe,GACAA,EAAW7E,iBAAiB,QAAS,SAACxN,GAClC6B,EAAKyQ,wBAAwBtS,EACjC,GAAG,GAEAwR,EAAOe,UAClB,EAKAC,2CAA6C,WACzC,IAAIvK,EAAM5F,SAAS6F,cAAc,OAIjC,OAHAD,EAAIG,UAAY,qDAChBH,EAAIH,YAAYnH,KAAK8R,gDACrBxK,EAAIH,YAAYnH,KAAK+R,2CACdzK,CACX,EAEAwK,6CAA+C,WAC3C,IAAI5Q,EAAOlB,KAEPiP,EAASvN,SAAS6F,cAAc,UAEhC2H,EAAOxN,SAAS6F,cAAc,QAiDlC,OAhDA0H,EAAO9H,YAAY+H,GACnBD,EAAOzH,GAAK,uCACZyH,EAAOE,UAAUC,IAAI,UAAW,oBAAqB,gBACrDH,EAAOE,UAAUC,IAAI,SAAU,oBAC/BH,EAAOI,aAAa,aAAc,4BAClCJ,EAAOI,aAAa,WAAY,KAChCJ,EAAOI,aAAa,gBAAgB,GACpCJ,EAAOI,aAAa,gBAAiB,sCACrCJ,EAAOI,aAAa,OAAQ,UAC5BJ,EAAOL,UAAY,2BAGfK,EAAOpC,iBACPoC,EAAOpC,iBAAiB,QAAS,SAAUxN,GACvC,IAAIiQ,EAAmC,SAAzBjQ,EAAEqG,OAAO6J,YACvBlQ,EAAEqG,OAAO2J,aAAa,gBAAiBC,GACvC,IAAI4B,EAAWxP,SAAS6H,eAAelK,EAAEqG,OAAOwE,aAAa,kBACxDgH,IAGD5B,GACA4B,EAAS/B,UAAUgC,OAAO,eAC1BD,EAAS/B,UAAUC,IAAI,gBAEvB8B,EAAS/B,UAAUC,IAAI,eACvB8B,EAAS/B,UAAUgC,OAAO,eAE9BjQ,EAAK8Q,4BAA4B3S,GACrC,GACO4P,EAAOQ,aACdR,EAAOQ,YAAY,UAAW,SAAUpQ,GACpC,IAAIiQ,EAAmC,SAAzBjQ,EAAEqG,OAAO6J,YACvBlQ,EAAEqG,OAAO2J,aAAa,gBAAiBC,GACvC,IAAI4B,EAAWxP,SAAS6H,eAAelK,EAAEqG,OAAOwE,aAAa,kBACxDgH,IAGD5B,GACA4B,EAAS/B,UAAUgC,OAAO,eAC1BD,EAAS/B,UAAUC,IAAI,gBAEvB8B,EAAS/B,UAAUC,IAAI,eACvB8B,EAAS/B,UAAUgC,OAAO,eAE9BjQ,EAAK8Q,4BAA4B3S,GACrC,GAGG4P,CACX,EAEA8C,wCAA0C,WACtC,IAAIpC,EAASjO,SAAS6F,cAAc,UAKpC,OAJAoI,EAAOnI,GAAK,qCACZmI,EAAOlI,UAAY,8DACnBkI,EAAOxI,YAAYnH,KAAKiS,wCACxBtC,EAAOxI,YAAYnH,KAAKkS,yCACjBvC,CACX,EACAsC,qCAAuC,WACnC,IAAI/Q,EAAOlB,KAEPmS,EAAW,uCACXC,EAAU,iCACVC,EAAS,gCACTC,EAAW,kCAEX1B,EAAe,8DAAHxH,OAGF+I,EAAQ,kbAAA/I,OAQNiJ,EAAM,yjBAAAjJ,OAW4BgJ,EAAO,kFAAAhJ,OACNgJ,EAAO,2FAAAhJ,OACMgJ,EAAO,mBAAAhJ,OAAkBgJ,EAAO,mFAAAhJ,OACvCgJ,EAAO,kSAAAhJ,OAISgJ,EAAO,uKAAAhJ,OAIjDkJ,EAAQ,kGAOjCzB,EAHU1C,EAAayC,GAGJE,aAAa,CAAEC,KAAO,SAC/CF,EAAOjC,UAAYgC,EAAaI,OAEhC,IAAI/B,EAAS4B,EAAOtH,eAAe4I,GAC/BlD,GACAA,EAAOpC,iBAAiB,QAAS,SAACxN,GAC9B,IAAIiQ,EAAmC,SAAzBjQ,EAAEqG,OAAO6J,YACvBlQ,EAAEqG,OAAO2J,aAAa,gBAAiBC,GAEvC,IAAIiD,EAAWlT,EAAEqG,OAAOwE,aAAa,iBAAiBsI,MAAM,KAExDtB,EAAWxP,SAAS6H,eAAegJ,EAAS,IAChD,GAAKrB,EAAL,CAGAA,EAAS/B,UAAUgC,OAAO,eAC1BD,EAAS/B,UAAUC,IAAI,cAEvB,IAAIH,EAASvN,SAAS6H,eAAegJ,EAAS,IACzCtD,IAGLA,EAAOI,aAAa,eAAgB,SACpCnO,EAAKuR,6BAA6BpT,GATlC,CAUJ,GAAG,GAEP,IAAIqT,EAAO7B,EAAOtH,eAAe8I,GAC7BK,GACAA,EAAK7F,iBAAiB,SAAU,SAACxN,GAC7BA,EAAE4N,iBACF,IAAI1K,EAAQb,SAAS6H,eAAe6I,GAChC7P,GACArB,EAAKyR,0BAA0BtT,EAAGkD,EAAMyD,MAEhD,GAAG,GAEP,IAAI4M,EAAS/B,EAAOtH,eAAe+I,GAuBnC,OAtBIM,GACAA,EAAO/F,iBAAiB,QAAS,SAACxN,GAC9BA,EAAE4N,iBACF,IAAI1K,EAAQb,SAAS6H,eAAe6I,GACpC,GAAI7P,EAAO,CACP,IAAIsQ,EAAUnR,SAAS6H,eAAe6I,EAAU,qBAC5CU,EAAY5R,EAAK6R,YAAYC,KAAK,SAAA3T,GAAC,OAAIA,EAAE4T,KAAKjD,QAAUzN,EAAMyD,KAAK,GACvE,GAAI6M,GAA2B,KAAhBtQ,EAAMyD,MACjB,OAGJ,GAAI6M,GAAWC,EAEX,YADAD,EAAQ1D,UAAUgC,OAAO,cAGzB0B,EAAQ1D,UAAUC,IAAI,cAE1BlO,EAAKyR,0BAA0BtT,EAAGkD,EAAMyD,MAC5C,CACJ,GAAG,GAGA6K,EAAOe,UAClB,EAEAM,sCAAwC,WACpC,IAAIhR,EAAOlB,KAEPmS,EAAW,wCAGXvB,EAAe,8cAAHxH,OAFF,iCAUe,4FAAAA,OAGX+I,EAAQ,ggBAiBpBtB,EAHU1C,EAAayC,GAGJE,aAAa,CAAEC,KAAO,SAC/CF,EAAOjC,UAAYgC,EAAaI,OAEhC,IAAI/B,EAAS4B,EAAOtH,eAAe4I,GAOnC,OANIlD,GACAA,EAAOpC,iBAAiB,QAAS,SAACxN,GAC9B6B,EAAKgS,4BAA4B7T,EACrC,GAAG,GAGAwR,EAAOe,UAClB,EAMAuB,0BAA4B,WACxB,IAAI7L,EAAM5F,SAAS6F,cAAc,OAEjC,OADAD,EAAIG,UAAY,iEACTH,CACX,EAEA8L,sBAAwB,SAAU9O,GAC9B,IAAIpD,EAAOlB,KAEX,GAAIsE,EAAG,CAGH,IAAI+O,EAAe,ipBAEfC,EAAYhP,EAAEgP,WAAaD,EAC3BE,EAAU,GACVC,EAAOlP,EAAEkP,MAAQH,EAEjBE,EADAC,EAAKC,WAAW,YACN,gHAAHrK,OAGwBoK,EAAI,6DAGzB,uEAAHpK,OAEe9E,EAAEkD,GAAE,kBAAA4B,OAAiBoK,EAAI,uDAGnD,IAAIhM,EAAKlD,EAAEkD,GAAGT,cAEV2M,EAAQvF,EAAa,uRAAD/E,OAKmC9E,EAAEuB,YAAW,MAAAuD,OAAK9E,EAAE0L,MAAK,oRAAA5G,OAMnD9E,EAAEkD,GAAE,WAAA4B,OAAUkK,EAAS,wCAAAlK,OAAuC9E,EAAEuB,YAAW,qHAAAuD,OAEtC5B,EAAE,gCAAA4B,OAC1DmK,EAAO,2FAMjBjM,EAAMoM,EAAM9B,WAMhB,OALItK,GACAA,EAAIuF,iBAAiB,QAAS,SAACxN,GAC3B6B,EAAKyS,wBAAwBtU,EAAGiF,EAAEkD,GACtC,GAEGkM,EAAM9B,UACjB,CACJ,EAEAgC,qBAAuB,SAAUtP,GAC7B,IAAIpD,EAAOlB,KAEPmS,EAAW,wCAA0C7N,EAAEkD,GAC3D,GAAIlD,EAAG,CACH,IAAIoP,EAAQvF,EAAa,oGAAD/E,OAEb9E,EAAE0L,MAAK,4QAAA5G,OAGiC9E,EAAEuB,YAAW,MAAAuD,OAAK9E,EAAE0L,MAAK,wFAAA5G,OAG9D+I,EAAQ,8OAKlB7K,EAAMoM,EAAM9B,WAChB,GAAItK,EAAK,CACLA,EAAIuF,iBAAiB,QAAS,SAACxN,GAE3B6B,EAAK2S,qBAAqBxU,EAAGiF,EAAEkD,GACnC,GACA,IAAIyH,EAASyE,EAAMI,cAAc,IAAM3B,GACnClD,GACAA,EAAOpC,iBAAiB,QAAS,SAACxN,GAC9BA,EAAE0U,kBAEF7S,EAAK8S,2BAA2B3U,EAAGiF,EAAEkD,GACzC,EAER,CACA,OAAOkM,EAAM9B,UACjB,CACJ,G,05EC9lBJ,IAAIxO,EAASvC,EAAOsC,UAAU,eA0CxB8Q,EAAW,SAAA9O,GA6Bb,SAAA8O,EAAa5O,GAAS,IAAAC,E,MAMlB,G,4FANkBC,CAAA,KAAA0O,G,EAIlB,K,EAAA,CAHA5O,EAAUA,GAAW,CAAC,G,MAGtB4O,MAAA3O,E,6EAEsB2O,GAClB,MAAM,IAAIzR,UAAU,2BAgBxB,OAVA8C,EAAK4O,UAAY,cAEjB5O,EAAK6O,WAAW9O,GAGhBC,EAAKqB,UAAYrB,EAAK8O,gBAGrB9O,EAAKG,QAAWH,EAAKG,QAAQ0B,YAAY7B,EAAKqB,WAAarB,EAAKG,QAAUH,EAAKqB,UAEhF0N,EAAA/O,EAAAA,EACJ,CAMA,O,qRAAAQ,CAAAmO,EAAA9O,G,EAAA8O,E,EAAA,EAAA5P,IAAA,SAAA2B,MAKA,SAAQsO,GACJ,GAAIA,EAAK,CAEDtU,KAAKuU,WACLC,EAAUpI,YACNpM,KAAKyU,0BACLzU,KAAK0U,gCACLJ,EAAIK,oBAIP3U,KAAK4U,WACN5U,KAAK6U,sBAAsBxF,aAAa,gBAAgB,GAK5D,IADA,IAAI0D,EAAe/S,KAAK8U,KAAQC,EAAkB/U,KAAKqF,QAAQ0N,YACtD/K,EAAQ,EAAGA,EAAQ+K,EAAY5S,OAAQ6H,IAAS,CACrD,IAAM8K,EAAYC,EAAY/K,GAC9BhI,KAAKgV,aAAalC,EACtB,CACJ,C,iBAKAmB,E,EAAA,S,EAAA,K,WAAA,G,kFAAA,CAAaK,IAGTtU,KAAKqF,QAAQqC,UACb1H,KAAKiV,YAAYjV,KAAKqF,QAAQqC,WAIN,IAAxB1H,KAAKqF,QAAQ6P,QACblV,KAAKmV,eAAehG,UAAUC,IAAI,wBAgBtCpP,KAAKoV,cAAc,CACfC,KAAO,sBAEf,GAMA,CAAAhR,IAAA,eAAA2B,MAgBA,SAAc8M,GAA4B,IAAjBwC,EAAO/V,UAAAY,OAAA,QAAAN,IAAAN,UAAA,IAAAA,UAAA,GAExBgW,EAAUvV,KAAK+S,YAAYyC,KAAK,SAAAnW,GAAC,OAAIA,EAAE4T,KAAKzL,KAAOsL,EAAUtL,EAAE,GACnE,GAAIsL,IAAcyC,EAAS,CACvB,IAAI7B,EAAQ1T,KAAKoT,sBAAsBN,GACnC2C,EAAOzV,KAAK4T,qBAAqBd,GACrC,GAAIY,GAAS+B,EAAM,CACfzV,KAAK0V,iCAAiCvO,YAAYuM,GAClD,IAAIiC,EAAiC3V,KAAKyF,QAAQqO,cAAc,8CAC5D6B,GACAA,EAA+BxO,YAAYsO,GAE/C,IAAIG,EAAQ5V,KAAKyF,QAAQqO,cAAc,mCACvC,GAAI8B,EAAO,CACP,IAAIC,EAAK7V,KAAK+S,YAAYnJ,OAAO,SAAAkM,GAAC,OAAKA,EAAEC,SAAS,GAAE5V,OAAS,EAC7DyV,EAAMxF,UAAYyF,CACtB,CAQA,OAPA7V,KAAK+S,YAAYiD,KAAK,CAClBD,WAAY,EACZT,QAAUA,EACVrC,KAAOH,EACPmD,SAAWvC,EACXwC,QAAUT,KAEP,CACX,CACJ,CACA,OAAO,CACX,GAEA,CAAApR,IAAA,iBAAA2B,MAKA,SAAgB+M,GACZ,IAAK,IAAIoD,EAAI,EAAGA,EAAIpD,EAAY5S,OAAQgW,IAAK,CACzC,IAAMrD,EAAYC,EAAYoD,GAC9BnW,KAAKgV,aAAalC,EACtB,CACJ,GAEA,CAAAzO,IAAA,kBAAA2B,MAUA,SAAiB8M,GAA0B,IAAfsD,EAAK7W,UAAAY,OAAA,QAAAN,IAAAN,UAAA,IAAAA,UAAA,GACzB8W,GAAQ,EACZ,GAAIvD,EACA,IAAK,IAAI5S,EAAI,EAAGA,EAAIF,KAAK+S,YAAY5S,OAAQD,IAEzC,GADUF,KAAK+S,YAAY7S,GACrB+S,KAAKzL,KAAOsL,EAAUG,KAAKzL,GAAI,CACjCxH,KAAK+S,YAAY7S,GAAG+V,SAAS9E,SAC7BnR,KAAK+S,YAAY7S,GAAGgW,QAAQ/E,SACvBiF,EAMDpW,KAAK+S,YAAYuD,OAAOpW,EAAG,GAH3BF,KAAK+S,YAAY7S,GAAG6V,WAAY,EAKpCM,GAAQ,EACR,IAAIT,EAAQ5V,KAAKyF,QAAQqO,cAAc,mCACvC,GAAI8B,EAAO,CACP,IAAIC,EAAK7V,KAAK+S,YAAYnJ,OAAO,SAAAkM,GAAC,OAAKA,EAAEC,SAAS,GAAE5V,OACpDyV,EAAMxF,UAAYyF,CACtB,CACA,KACJ,CAGR,OAAOQ,CACX,GAEA,CAAAhS,IAAA,oBAAA2B,MAGA,WACI,IAAK,IAAI9F,EAAI,EAAGA,EAAIF,KAAK+S,YAAY5S,OAAQD,IAAK,CAC9C,IAAM4S,EAAY9S,KAAK+S,YAAY7S,GACnC4S,EAAUmD,SAAS9E,SACnB2B,EAAUoD,QAAQ/E,QACtB,CACAnR,KAAK+S,YAAc,EACvB,GAEA,CAAA1O,IAAA,cAAA2B,MAOA,SAAa4O,QACS/U,IAAd+U,EAICA,GAAa5U,KAAK4U,YAAgBA,IAAc5U,KAAK4U,YAGtDA,EACAlT,SAAS6H,eAAe,2BAA2Ba,QAEnDpK,KAAK6U,sBAAsBzK,QAE/BpK,KAAK4U,UAAYA,GAXbxR,EAAO1D,IAAI,+DAYnB,GAEA,CAAA2E,IAAA,YAAA2B,MAMA,SAAWuQ,GACHA,EACAvW,KAAK0V,iCAAiCvG,UAAUC,IAAI,gBAEpDpP,KAAK0V,iCAAiCvG,UAAUgC,OAAO,eAE/D,GAEA,CAAA9M,IAAA,eAAA2B,MAKA,WACI,OAAOhG,KAAK2G,SAChB,GAMA,CAAAtC,IAAA,aAAA2B,MAMA,SAAYX,GACRrF,KAAK8O,IAAMzJ,EAAQmC,IAAMgP,EAAWrL,WAGpCnL,KAAKqF,QAAU,CACXuP,WAAY,EACZL,WAAY,EACZ1L,OAAQ,EACR4N,OAAS,CACLC,QAAS,EACT1G,MAAQ,sCACRnK,YAAc,IAElBmK,MAAQ,6BACR8E,MAAO,EACPxB,WAAY,EACZiD,QAAS,EACTI,MAAQ,EACR5D,YAAc,IAIlB,IAAI6D,EAAaC,EAAMlM,OAAO3K,KAAKqF,QAAQoR,OAAQpR,EAAQoR,QAC3DI,EAAMlM,OAAO3K,KAAKqF,QAASA,GAC3BwR,EAAMlM,OAAO3K,KAAKqF,QAAQoR,OAAQG,GAKlC5W,KAAK4U,UAAY5U,KAAKqF,QAAQuP,UAM9B5U,KAAKuU,UAAYvU,KAAKqF,QAAQkP,UAK9BvU,KAAK8U,KAAO9U,KAAKqF,QAAQyP,KAmBzB9U,KAAK+S,YAAc,GAInB/S,KAAK8W,aAAe,KAKpB9W,KAAK+W,QAAS,EAGd/W,KAAK6U,sBAAwB,KAE7B7U,KAAKyU,0BAA4B,KAEjCzU,KAAK0U,gCAAkC,KAEvC1U,KAAKgX,uBAAyB,KAE9BhX,KAAKiX,4BAA8B,KAEnCjX,KAAK0V,iCAAmC,IAC5C,GAEA,CAAArR,IAAA,gBAAA2B,MAMA,WAEI,IAAIW,EAAY3G,KAAK+O,8BAEjBmI,EAAQlX,KAAK6U,sBAAwB7U,KAAKgP,qCAC9CrI,EAAUQ,YAAY+P,GAGtB,IAAIC,EAAmBnX,KAAKyU,0BAA4BzU,KAAK0P,iCAC7DyH,EAAiBhI,UAAUC,IAAI,mBAC/B+H,EAAiBhI,UAAUC,IAAI,SAAWpP,KAAKqF,QAAQsR,OAEvD,IAAIS,EAAsBpX,KAAK4P,oCAC/BuH,EAAiBhQ,YAAYiQ,GAG7B,IAAIC,EAA+BrX,KAAK6R,6CACxCsF,EAAiBhQ,YAAYkQ,GAQ7B,IAAIC,EAAwBtX,KAAK0V,iCAAmC1V,KAAKmT,4BAczE,GAbAmE,EAAsBnI,UAAUC,IAAI,mBACpCkI,EAAsBnI,UAAUC,IAAI,SAAWpP,KAAKqF,QAAQsR,OACxD3W,KAAKqF,QAAQkR,QACbe,EAAsBnI,UAAUC,IAAI,gBAEpCpP,KAAKqF,QAAQiO,UACbgE,EAAsBnI,UAAUC,IAAI,mBAEpCkI,EAAsBnI,UAAUC,IAAI,cAExC+H,EAAiBhQ,YAAYmQ,GAGzBtX,KAAKqF,QAAQwD,MAAO,CACpB,IAAI0O,EAAyBvX,KAAK0U,gCAAkC1U,KAAK6P,uCAErE2H,EAAuBxX,KAAK8P,qCAChCyH,EAAuBpQ,YAAYqQ,GAEnC,IAAIC,EAAwBzX,KAAKiQ,oCAAoCjQ,KAAKqF,QAAQ2K,OAGlF,GAFAuH,EAAuBpQ,YAAYsQ,GAE/BzX,KAAKqF,QAAQoR,QAAUzW,KAAKqF,QAAQoR,OAAOC,OAAQ,CACnD,IAAIgB,EAA0B1X,KAAKiX,4BAA8BjX,KAAKsQ,sCAAsCtQ,KAAKqF,QAAQoR,OAAOzG,MAAOhQ,KAAKqF,QAAQoR,OAAO5Q,aAC3J0R,EAAuBpQ,YAAYuQ,EACvC,CAEA,IAAIC,EAAsB3X,KAAKgX,uBAAyBhX,KAAKkQ,sCAC7DqH,EAAuBpQ,YAAYwQ,GACnCP,EAAoBjQ,YAAYoQ,EACpC,CAMA,OAJA5Q,EAAUQ,YAAYgQ,GAEtB/T,EAAO1D,IAAIiH,GAEJA,CACX,GAEA,CAAAtC,IAAA,mBAAA2B,MAIA,WAEI,IAAIiJ,EAASjP,KAAKiX,4BAA4BhQ,SAAS,GACnDgI,GACAA,EAAOI,aAAa,gBAAiB,SAEzC,IAAIM,EAAS3P,KAAKiX,4BAA4BhQ,SAAS,GACnD0I,IACAA,EAAOR,UAAUC,IAAI,cACrBO,EAAOR,UAAUgC,OAAO,eAEhC,GAMA,CAAA9M,IAAA,yBAAA2B,MAKA,SAAwB3G,GACS,SAAzBA,EAAEqG,OAAO6J,aACTvP,KAAKqK,cAETjH,EAAOzD,MAAMN,GACbW,KAAK4U,WAAa5U,KAAK4U,SAC3B,GAEA,CAAAvQ,IAAA,0BAAA2B,MAKA,SAAyB3G,GACrB+D,EAAOzD,MAAMN,EACjB,GAEA,CAAAgF,IAAA,0BAAA2B,MAMA,SAAyB3G,EAAGmI,GACxBpE,EAAOzD,MAAMN,EAAGmI,GAChB,IAAIsL,EAAY9S,KAAK+S,YAAYC,KAAK,SAAA3T,GAAC,OAAIA,EAAE4T,KAAKzL,KAAOA,CAAE,GAC3D,GAAIsL,EAAW,CACX,IAAI8E,EAAO9E,EAAUG,KAAK2E,KACtBC,EAAO/E,EAAUG,KAAK4E,KACtBC,EAAQhF,EAAUG,KAAK6E,MAC3B,GAAID,IAASA,EAAK1X,OACd,OAEJ,IAAK2X,IAAUD,EACX,OAGJ,IAAIvD,EAAMtU,KAAKkG,SACXsE,EAAO8J,EAAIyD,UAAUC,gBAAgBC,UACzC,GAAIJ,EAAM,CACN,IAAIK,GAASC,EAAAA,EAAAA,iBAAsBN,EAAM,YAAarN,GACtD8J,EAAIyD,UAAUK,IAAIF,EAAQ,CACtBG,KAAO/D,EAAIgE,WAEnB,CACA,GAAIR,EAAO,CACP,IAAIS,GAAQC,EAAAA,EAAAA,WAAgBV,EAAO,YAAatN,GAChD8J,EAAIyD,UAAUU,UAAUF,EAC5B,CACIX,GACAtD,EAAIyD,UAAUW,QAAQd,GAE1B5X,KAAK2Y,aAAY,GAejB3Y,KAAKoV,cAAc,CACfC,KAAO,qBACPvC,UAAYA,EAAUG,MAE9B,CACJ,GAEA,CAAA5O,IAAA,oBAAA2B,MAKA,SAAmB3G,GACf,IAAIuZ,EAAOvZ,EAAEqG,OAAOmT,MAAM,GAE1B,GADaxZ,EAAEqG,OACVkT,EAAL,CAIA,IAAIE,EAAU,IAAIC,WAGd7X,EAAOlB,KAMX8Y,EAAQE,QAAU,SAAC3Z,GACf+D,EAAO1D,IAAI,UACf,EAKAoZ,EAAQG,WAAa,SAAC5Z,GAClB+D,EAAO1D,IAAI,aACf,EAKAoZ,EAAQI,YAAc,SAAC7Z,GACnB+D,EAAO1D,IAAI,cACf,EAKAoZ,EAAQK,QAAU,SAAC9Z,GACf+D,EAAO1D,IAAI,UACf,EAKAoZ,EAAQM,UAAY,SAAC/Z,GACjB+D,EAAO1D,IAAI,eAAgBL,EAC/B,EAKAyZ,EAAQO,OAAS,SAACha,GACd+D,EAAO1D,IAAI,kBAAmBL,EAAEqG,OAAO4T,QAEvC,IAGI,GADApY,EAAK4V,aAAeyC,KAAKC,MAAMna,EAAEqG,OAAO4T,SACnCpY,EAAK4V,aAEN,YADArX,QAAQga,MAAM,+BAGtB,CAAE,MAAOjL,GAEL,YADA/O,QAAQga,MAAM,sCAAuCjL,EAEzD,CACJ,EAGAsK,EAAQY,WAAWd,EA9DnB,MAFIxV,EAAOuW,KAAK,2BAiEpB,GAEA,CAAAtV,IAAA,sBAAA2B,MAKA,SAAqB3G,GAIjBW,KAAK+W,OAAS1X,EAAEqG,OAAO8L,OAC3B,GAEA,CAAAnN,IAAA,0BAAA2B,MAKA,SAAyB3G,GACrB+D,EAAOzD,MAAMN,GAEbW,KAAK4Z,mBACA5Z,KAAK8W,cAIL9W,KAAK+W,QAEN/W,KAAK6Z,oBAGT7Z,KAAK8Z,eAAe9Z,KAAK8W,eARrB1T,EAAOqW,MAAM,8BASrB,GAEA,CAAApV,IAAA,8BAAA2B,MAKA,SAA6B3G,GACzB+D,EAAOzD,MAAMN,EACjB,GAEA,CAAAgF,IAAA,+BAAA2B,MAKA,SAA8B3G,GAC1B+D,EAAOzD,MAAMN,GAEbW,KAAK4Z,kBACT,GAEA,CAAAvV,IAAA,4BAAA2B,MAMA,SAA2B3G,EAAG0a,GAC1B3W,EAAOzD,MAAMN,EAAG0a,GAChB,IAAIvS,EAAK4D,KAAK4O,IAAIxR,MAAMC,KAAKsR,GAAUxD,OAAO,SAAC0D,EAAGC,GAAC,OAAK9O,KAAK+O,KAAK,GAAIF,GAAKC,EAAEE,WAAW,GAAK,CAAC,EAAE,IAC5F3E,EAAOzV,KAAKkG,SAAS6R,UACrBvN,EAAOiL,EAAKuC,gBAAgBC,UAC5BM,GAAQC,EAAAA,EAAAA,WAAgB/C,EAAK4E,YAAa7P,EAAM,aAChDoN,EAAOnC,EAAK6E,UACZxH,EAAY,CACZ,GAAOtL,EAAG+S,WACV,MAAUR,EACV,YAAgB,oBAChB,MAAUxB,EACV,KAASX,EACT,UAAc,GACd,KAAS,0BAEb5X,KAAKgV,aAAalC,GAAW,GAe7B9S,KAAKoV,cAAc,CACfC,KAAO,kBACPvC,UAAYA,GAEpB,GAEA,CAAAzO,IAAA,8BAAA2B,MAKA,SAA6B3G,GACzB+D,EAAOzD,MAAMN,GAIb,IADA,IAAI0T,EAAWtJ,EAAOzJ,KAAK+S,aAClB/K,EAAQ,EAAGA,EAAQ+K,EAAY5S,OAAQ6H,IAAS,CACrD,IAAM8K,EAAYC,EAAY/K,GAC9B,GAAI8K,EAAUwC,QACVtV,KAAKwa,gBAAgB1H,GAAW,QAGhC,GAAIA,EAAUiD,UAAW,CACrB/V,KAAK0V,iCAAiCvO,YAAY2L,EAAUmD,UAC5D,IAAIN,EAAiC3V,KAAKyF,QAAQqO,cAAc,8CAC5D6B,GACAA,EAA+BxO,YAAY2L,EAAUoD,SAEzDpD,EAAUiD,WAAY,CAC1B,CAER,CAEA,IAAIH,EAAQ5V,KAAKyF,QAAQqO,cAAc,mCACvC,GAAI8B,EAAO,CACP,IAAIC,EAAK7V,KAAK+S,YAAYnJ,OAAO,SAAAkM,GAAC,OAAKA,EAAEC,SAAS,GAAE5V,OACpDyV,EAAMxF,UAAYyF,CACtB,CACJ,GAEA,CAAAxR,IAAA,uBAAA2B,MAMA,SAAsB3G,EAAGmI,GACrBpE,EAAOzD,MAAMN,EAAGmI,EACpB,GAEA,CAAAnD,IAAA,6BAAA2B,MAMA,SAA4B3G,EAAGmI,GAC3BpE,EAAOzD,MAAMN,EAAGmI,GAChB,IAAIsL,EAAY9S,KAAK+S,YAAYC,KAAK,SAAA3T,GAAC,OAAIA,EAAE4T,KAAKzL,KAAOA,CAAE,GACvDsL,IAGA9S,KAAKwa,gBAAgB1H,EAAWA,EAAUwC,SAe1CtV,KAAKoV,cAAc,CACfC,KAAO,qBACPvC,UAAYA,EAAUG,OAGlC,I,4FAAC,CAxxBY,CAASlO,GA6xB1BR,OAAOoG,OAAOsJ,EAAY9U,UAAWsb,GACrClW,OAAOoG,OAAOsJ,EAAY9U,UAAWub,GAErC,UAGIpc,OAAOuG,IAAMvG,OAAOuG,GAAGC,UACvBxG,OAAOuG,GAAGC,QAAQmP,YAAcA,E","sources":["webpack://geopf-extensions-openlayers/./node_modules/loglevel/lib/loglevel.js","webpack://geopf-extensions-openlayers/webpack/bootstrap","webpack://geopf-extensions-openlayers/webpack/runtime/compat get default export","webpack://geopf-extensions-openlayers/webpack/runtime/define property getters","webpack://geopf-extensions-openlayers/webpack/runtime/hasOwnProperty shorthand","webpack://geopf-extensions-openlayers/external assign \"ol.control.Control\"","webpack://geopf-extensions-openlayers/./src/packages/Controls/Utils/CheckDsfr.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/Control.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/PanelManager.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/Widget.js","webpack://geopf-extensions-openlayers/external assign \"ol.proj\"","webpack://geopf-extensions-openlayers/external assign \"ol.Map\"","webpack://geopf-extensions-openlayers/./src/packages/Utils/Helper.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/SelectorID.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/LoggerByDefault.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/Draggable.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/Territories/TerritoriesDOM.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/Territories/Territories.js"],"sourcesContent":["/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = ol.control.Control;","var checkDsfr = function () {\n    // HACK: check si le styl dsfr est chargé via la variable blue-france-sun-113-625\n    var style = getComputedStyle(document.documentElement);\n    var color = style.getPropertyValue(\"--blue-france-sun-113-625\");\n    if (color === \"\") {\n        return false;\n    }\n    return true;\n};\n\nexport default checkDsfr;\n\n","import Control from \"ol/control/Control\";\nimport checkDsfr from \"./Utils/CheckDsfr\";\n\nclass ControlExtended extends Control {\n\n    constructor (options) {\n        options = options || {};\n        super({\n            element : options.element,\n            target : options.target,\n            render : options.render\n        });\n        // Can the control appear in the ControlList control\n        if (options && options.listable) {\n            this.listable = true;\n        } else {\n            this.listable = false;\n        }\n        // Set the control desctiption\n        if (options && options.description) {\n            this.description = options.description;\n        } else {\n            this.description = \"\";\n        }\n    }\n\n    setPosition (pos) {\n        if (this.getMap()) {\n            var instance = new PositionFactory(this);\n            instance.set(pos);\n        }\n    }\n\n    updatePosition (pos) {\n        if (this.getMap()) {\n            var instance = new PositionFactory(this);\n            instance.update(pos);\n        }\n    }\n\n};\n\nexport default ControlExtended;\n\n/**\n * gestion des anchors\n */\nconst ANCHORS = [\n    \"top-left\",\n    \"top-right\",\n    \"bottom-left\",\n    \"bottom-right\"\n];\n\n/**\n * Position\n * @private\n */\nclass PositionFactory {\n\n    /**\n     * constructor\n     * @param {*} caller - ...\n     */\n    constructor (caller) {\n        this.caller = caller;\n        this.container = null;\n\n        this.#createContainer(\"top-left\");\n        this.#createContainer(\"top-right\");\n        this.#createContainer(\"bottom-left\");\n        this.#createContainer(\"bottom-right\");\n\n        return this;\n    }\n\n    /**\n     * ...\n     * @param {*} name  - ...\n     * @returns {Boolean} ...\n     */\n    #existContainer (name) {\n        var div = this.container.children[\"position-container-\" + name];\n        if (div) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * ...\n     * @param {*} name - ...\n     * @private\n     */\n    #createContainer (name) {\n        this.container = this.caller.getMap().getOverlayContainerStopEvent();\n\n        if (this.#existContainer(name)) {\n            return;\n        }\n        // INFO\n        // positionner les classes position-container-[left|right|top|bottom]\n        // ex. { position:relative; height:50px; width:100%; }\n        var div = document.createElement(\"div\");\n        div.id = \"position-container-\" + name;\n        div.className = \"position position-container-\" + name ;\n\n        this.container.appendChild(div);\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @param {*} update - ...\n     * @todo fonctionnement à tester !\n     */\n    #setAnchor (pos, update) {\n        var self = this;\n        const position = (pos) => {\n            var element = self.container.children[\"position-container-\" + pos];\n            return element.children.length;\n        };\n        const sizeW = (pos) => {\n            var element = self.container.children[\"position-container-\" + pos];\n            var width = element.offsetWidth;\n            return width;\n        };\n        const sizeH = (pos) => {\n            var element = self.container.children[\"position-container-\" + pos];\n            var height = element.offsetHeight;\n            if (update) {\n                if (pos.includes(\"top\")) {\n                    height = 0;\n                }\n                // on recalcule la position en hauteur\n                for (let index = 0; index < element.children.length; index++) {\n                    const id = element.children[index].id;\n                    if (id === self.caller.element.id) {\n                        height = (pos.includes(\"bottom\")) ? height - self.caller.element.offsetHeight : height * (-1);\n                        break;\n                    }\n                    height -= element.children[index].offsetHeight;\n                }\n            }\n            return height;\n        };\n        const clear = (element) => {\n            element.style.top = \"unset\";\n            element.style.bottom = \"unset\";\n            element.style.left = \"unset\";\n            element.style.right = \"unset\";\n        };\n\n        // on supprime le style de positionnement (top, left...)\n        // car on souhaite une nouvelle position\n        clear(this.caller.element);\n        this.caller.element.style.position = \"unset\"; // div.GPwidget\n\n        // on recherche les panneaux (panel) :\n        // * panel de formulaire\n        // * panel de resultats (?)\n        var panels = Array.from(this.caller.element.getElementsByClassName(\"GPpanel\"));\n        if (panels.length === 0) {\n            return;\n        }\n        var offset = 0;\n        panels.forEach((panel) => {\n            // INFO\n            // on va eviter de modifier les panneaux de resultats\n            // car leurs positions sont souvent relative aux panneaux\n            // des formulaires\n            if (panel.nodeName.toLowerCase() !== \"dialog\") {\n                return;\n            }\n            clear(panel);\n            // on modifie le positionnement du menu (dialog ou div : panel)\n            // en fonction du bouton\n            // ex. bouton : bottom-left, menu : bottom:0px; left:50px\n            switch (pos.toLowerCase()) {\n                case \"top-left\":\n                    if (checkDsfr()) {\n                        panel.style.top = \"0px\";\n                    } else {\n                        panel.style.top = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    }\n                    panel.style.left = sizeW(pos) + offset + \"px\";\n                    break;\n                case \"bottom-left\":\n                    if (checkDsfr()) {\n                        panel.style.top = \"0px\";\n                    } else {\n                        panel.style.bottom = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    }\n                    panel.style.left = sizeW(pos) + offset + \"px\";\n                    break;\n                case \"top-right\":\n                    if (checkDsfr()) {\n                        panel.style.top = \"0px\";\n                    } else {\n                        panel.style.top = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    }\n                    panel.style.right = sizeW(pos) + offset + \"px\";\n                    break;\n                case \"bottom-right\":\n                    if (checkDsfr()) {\n                        panel.style.top = \"0px\";\n                    } else {\n                        panel.style.bottom = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    }\n                    panel.style.right = sizeW(pos) + offset + \"px\";\n                    break;\n                default:\n                    break;\n            }\n            offset += panel.offsetWidth;\n        });\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @public\n     */\n    set (pos) {\n        if (!ANCHORS.includes(pos.toLowerCase())) {\n            return;\n        }\n        // positionnement de l'element\n        this.#setAnchor(pos, false);\n\n        if (pos.includes(\"bottom\")) {\n            this.container.children[\"position-container-\" + pos].prepend(this.caller.element);\n        } else {\n            this.container.children[\"position-container-\" + pos].appendChild(this.caller.element);\n        }\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @public\n     */\n    update (pos) {\n        if (!ANCHORS.includes(pos.toLowerCase())) {\n            return;\n        }\n        // positionnement de l'element\n        // mais, il faut prendre en compte la position !\n        this.#setAnchor(pos, true);\n    }\n\n};\n","const exceptions = [\"GPoverviewMap\", \"GPfullScreen\"];\n\nfunction getSameSideOpenedPanel (position, openedPanelID) {\n    // on ajoute aux exceptions le panel qui vient d'être ouvert\n    var exceptionPanel = [...exceptions, openedPanelID];\n    var controlPanels = [];\n    if (position && position.includes(\"left\")) {\n        var bottomLeft = document.getElementById(\"position-container-bottom-left\");\n        var topLeft = document.getElementById(\"position-container-top-left\");\n        controlPanels = [...bottomLeft.children, ...topLeft.children];\n    }\n    if (position && position.includes(\"right\")) {\n        var bottomRight = document.getElementById(\"position-container-bottom-right\");\n        var topRight = document.getElementById(\"position-container-top-right\");\n        controlPanels = [...bottomRight.children, ...topRight.children];\n    }\n    // on ne ferme que les panles déjà ouverts qui ne sont pas exceptions\n    return controlPanels.filter(p => {\n        var panelID = p.id.match(/(\\w+)-[0-9]+/)[1];\n        var isException = exceptionPanel.includes(panelID);\n        var isOpened = p.getElementsByTagName(\"button\")[0].getAttribute(\"aria-pressed\");\n        if (isOpened === \"true\" && !isException) {\n            return p;\n        }\n    });\n}\n\nvar PanelManager = function (position, openedPanelID) {\n    var openedPanel = getSameSideOpenedPanel(position, openedPanelID);\n    if (openedPanel.length > 0) {\n        openedPanel[0].getElementsByTagName(\"button\")[0].click();\n    }\n};\n\nexport default PanelManager;\n","import PanelManager from \"../Utils/PanelManager\";\n// Mixin pour ajouter des méthodes communes à tous les widgets.\n\n// voir fichiers DOM  et assign\n// modifier snippets.\nvar Widget = {\n    /**\n     * This method is called when a widget opens a panel\n     * It calls the panelManager to automatically close other panels\n     */\n    onPanelOpen : function () {\n        // On récupère l'id du widget à partir de l'id du DOM de la forme GPwidgetName-1876465465\n        PanelManager(this.options.position, this.element.id.match(/(\\w+)-[0-9]+/)[1]);\n    }\n};\n\nexport default Widget;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.proj;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.Map;","/**\n* @module Helper\n* @alias module:~utils/HelperUtils\n* @description\n* ...\n*\n* @example\n* import HelperUtils from \"gpf-ext-ol/utils/HelperUtils\"\n* ou \n* import {HelperUtils} from \"gpf-ext-ol\n* \n* HelperUtils.detectSupport();\n* HelperUtils.assign();\n* HelperUtils.mergeParams();\n*/\nvar Helper = {\n\n    /**\n     * this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     *\n     * @function detectSupport\n     * @returns {Boolean} isDesktop - true for desktop userAgent, false for mobile\n     */\n    detectSupport : function () {\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    /**\n     *  Copies all source object members to dest\n     *\n     * @function assign\n     * @param {Object} dest - destination object where properties and method will be copied\n     * @param {Object} source - source object from which properties and method will be copied\n     * @returns {Object} dest\n     */\n    assign : function (dest, source) {\n        dest = dest || {};\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                dest[prop] = source[prop];\n            }\n        }\n        return dest;\n    },\n\n    /**\n     * Merge two objects parameters (deeper than assign)\n     *\n     * @function mergeParams\n     * @param {Object} dest     - destination object where properties and method will be merge\n     * @param {Object} source   - source object from which properties and method will be merge\n     * @param {Boolean} replace - replace destination value by source if exists or not (true by default)\n     */\n    mergeParams : function (dest, source, replace) {\n        if (typeof dest === \"undefined\" || typeof source === \"undefined\") {\n            return;\n        }\n        if (typeof replace === \"undefined\") {\n            replace = true;\n        }\n        for (var param in source) {\n            if (source.hasOwnProperty(param)) {\n                if (typeof source[param] === \"object\") {\n                    if (dest.hasOwnProperty(param)) {\n                        this.mergeParams(dest[param], source[param], replace);\n                    } else {\n                        dest[param] = source[param];\n                    }\n                } else {\n                    if (dest.hasOwnProperty(param)) {\n                        if (replace) {\n                            dest[param] = source[param];\n                        }\n                    } else {\n                        dest[param] = source[param];\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport default Helper;\n","/**\n * @module SelectorID\n * @alias module:~utils/SelectorID\n * @private\n * @description\n * formalisme d'un tag ID :\n * -> NAME(_ORDER)-1460636385836\n *\n * @example\n * Ex.\n *   GProutePoints-1460636385836\n *   GProutePoint_10-1460636385836\n */\nvar SelectorID = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     * @function generate\n     */\n    generate : (function () {\n        var timestamp = Math.floor(Date.now());\n        return function () {\n            return timestamp++;\n        };\n    })(),\n\n    /**\n     * nom du tag\n     * @function name\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    name : function (id) {\n        var name = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i === -1) {\n            name = id;\n        } else {\n            name = id.substring(0, i);\n        }\n\n        return name;\n    },\n\n    /**\n     * numero d'identifiant du tag\n     *\n     * @function index\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    index : function (id) {\n        var index = null;\n\n        var name = this.name(id);\n        // if (name !== id) {\n        var i = name.lastIndexOf(\"_\");\n        if (i !== -1) {\n            index = name.substring(i + 1);\n        }\n        // }\n\n        return index;\n    },\n\n    /**\n     * uuid du tag\n     *\n     * @function uuid\n     * @param {String} id - the id\n     * @returns {String} uuid\n     */\n    uuid : function (id) {\n        var uuid = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i !== -1) {\n            uuid = parseInt(id.substring(i + 1), 10);\n        }\n\n        return uuid;\n    }\n\n};\n\nexport default SelectorID;\n","import * as Log from \"loglevel\";\n\n/**\n * @module LoggerByDefault\n * @alias module:~utils/Logger\n * @description\n * ...\n *\n * @example\n * import Logger from \"gpf-ext-ol/utils/LoggerByDefault\"\n * ou \n * import {Logger} from \"gpf-ext-ol\n * \n * Logger.getLogger();\n * Logger.disableAll();\n * Logger.enableAll();\n */\nvar LoggerByDefault = {\n    /**\n     * creation d'un logger statique\n     *\n     * @function getLogger\n     * @param {String} [name=\"default\"] - the logger name\n     * @returns {Object} logger\n     */\n    getLogger : function (name) {\n        // on définit process si non défini dans l'environnement\n        if (typeof process === \"undefined\") {\n            var process = {};\n            process.env = {\n                VERBOSE : false\n            };\n        }\n        (process.env.VERBOSE) ? Log.enableAll() : Log.disableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    },\n    /**\n     * desactive tous les loggers\n     * @function disableAll\n     */\n    disableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.disableAll();\n            }\n        }\n    },\n    /**\n     * active tous les loggers\n     * @function enableAll\n     */\n    enableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.enableAll();\n            }\n        }\n    }\n};\n\nexport default LoggerByDefault;\n\n// Expose Export as ol.control.Catalog (for a build bundle)\nif (window.Gp) {\n    window.Gp.Logger = LoggerByDefault;\n}\n","import Logger from \"./LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"draggable\");\n\n/**\n * @module Draggable\n * @alias module:~utils/Draggable\n * @fixme conflit entre la position et le mode draggable\n * @private\n * @description\n * ...\n *\n * @example\n * dragElement();\n */\nvar Draggable = {\n    /**\n    * A draggable HTML element with JavaScript and CSS.\n    *\n    * @function dragElement\n    * @param {HTMLElement} element - element\n    * @param {HTMLElement} header - header (optional)\n    * @param {HTMLElement} container - container (optional)\n    * @see https://gist.github.com/stephanbogner/75de4e84687ae6065fb0a4d81917543e\n    * @see https://stackoverflow.com/questions/48097791/how-to-keep-a-draggable-element-from-being-moved-outside-a-boundary\n    * @example\n    *   // CSS :\n    *       // #element { position: absolute; }\n    *   // HTML :\n    *       // <div id=\"container\">\n    *       //   <div id=\"element\">\n    *       //     <div id=\"header\"/>\n    *       //      <div/> ...\n    *       //     </div>\n    *       //   </div>\n    *       // </div>\n    *   // JS :\n    *       var element = document.getElementById(\"element\");\n    *       Draggable.dragElement(element, header, container);\n    */\n    dragElement : function (element, header, container) {\n        // Adapted from https://www.w3schools.com/howto/howto_js_draggable.asp\n        let dragStartMouseX = 0, dragStartMouseY = 0, diffX = 0, diffY = 0, positionX = 0, positionY = 0;\n        if (header) {\n            header.addEventListener(\"mousedown\", dragMouseDown, true);\n        } else {\n            element.addEventListener(\"mousedown\", dragMouseDown, true);\n        }\n        var rect;\n        var viewport = {\n            bottom : 0,\n            left : 0,\n            right : 0,\n            top : 0,\n        };\n\n        function dragMouseDown (e) {\n            e = e || window.event;\n            e.preventDefault();\n\n            dragStartMouseX = e.clientX;\n            dragStartMouseY = e.clientY;\n\n            rect = element.getBoundingClientRect();\n            const viewPortRect = container.getBoundingClientRect();\n            viewport = {\n                bottom : viewPortRect.bottom,\n                left : viewPortRect.left,\n                right : viewPortRect.right,\n                top : viewPortRect.top,\n            };\n\n            document.addEventListener(\"mouseup\", closeDragElement, true);\n            document.addEventListener(\"mousemove\", elementDrag, true);\n        }\n\n        function closeDragElement () {\n            /* stop moving when mouse button is released: */\n            positionX -= diffX;\n            positionY -= diffY;\n            document.removeEventListener(\"mouseup\", closeDragElement, true);\n            document.removeEventListener(\"mousemove\", elementDrag, true);\n        }\n\n        function elementDrag (e) {\n            e = e || window.event;\n            // e.preventDefault();\n            let currentMouseX = e.clientX;\n            let currentMouseY = e.clientY;\n\n            let oldDiffX = diffX;\n            let oldDiffY = diffY;\n\n            diffX = dragStartMouseX - currentMouseX;\n            diffY = dragStartMouseY - currentMouseY;\n\n            var newLeft = rect.left - diffX;\n            var newTop = rect.top - diffY;\n\n            if (newLeft < viewport.left\n                || newTop < viewport.top\n                || newLeft + rect.width > viewport.right\n                || newTop + rect.height > viewport.bottom\n            ) {\n                // the element will hit the boundary, do nothing...\n                diffX = oldDiffX;\n                diffY = oldDiffY;\n            } else {\n                // set the element's new position:\n                let newX = positionX - diffX;\n                let newY = positionY - diffY;\n                element.style.transform = \"translate(\" + newX + \"px,\" + newY + \"px)\";\n            }\n        }\n    }\n};\n\nexport default Draggable;\n","const stringToHTML = (str) => {\n    var support = function () {\n        if (!window.DOMParser) {\n            return false;\n        }\n        var parser = new DOMParser();\n        try {\n            parser.parseFromString(\"x\", \"text/html\");\n        } catch (err) {\n            return false;\n        }\n        return true;\n    };\n\n    // If DOMParser is supported, use it\n    if (support()) {\n        var parser = new DOMParser();\n        var doc = parser.parseFromString(str, \"text/html\");\n        return doc.body;\n    }\n\n    // Otherwise, fallback to old-school method\n    var dom = document.createElement(\"div\");\n    dom.innerHTML = str;\n    return dom;\n};\n\nvar TerritoriesDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this.uid) ? id + \"-\" + this.uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {HTMLElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPterritories\");\n        container.className = \"GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################### Methods of main container ##################### //\n    // ################################################################### //\n\n    /**\n     * Show Territories\n     *\n     * @returns {HTMLElement} DOM element\n     */\n    _createShowTerritoriesPictoElement : function () {\n        var self = this;\n\n        var button = document.createElement(\"button\");\n        // INFO: Ajout d'une SPAN pour enlever des marges de 6px dans CHROMIUM (?!)\n        var span = document.createElement(\"span\");\n        button.appendChild(span);\n        button.id = this._addUID(\"GPshowTerritoriesPicto\");\n        button.classList.add(\"GPshowOpen\", \"GPshowAdvancedToolPicto\", \"GPshowTerritoriesPicto\");\n        button.classList.add(\"gpf-btn\", \"gpf-btn--tertiary\", \"gpf-btn-icon\", \"gpf-btn-icon-territories\");\n        button.classList.add(\"fr-icon-france-line\");\n        button.classList.add(\"fr-btn\", \"fr-btn--tertiary\");\n        button.setAttribute(\"aria-label\", \"Sélecteur de territoire\");\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n        button.setAttribute(\"type\", \"button\");\n\n        // Close all results and panels when minimizing the widget\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                self.onShowTerritoriesClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                self.onShowTerritoriesClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    // ################################################################### //\n    // ################### Methods of panel container #################### //\n    // ################################################################### //\n\n    /**\n     * Create Container Panel\n     *\n     * @returns {HTMLElement} DOM element\n     */\n    _createTerritoriesPanelElement : function () {\n        var dialog = document.createElement(\"dialog\");\n        dialog.id = this._addUID(\"GPterritoriesPanel\");\n        dialog.className = \"GPpanel gpf-panel fr-modal\";\n\n        return dialog;\n    },\n\n    _createTerritoriesPanelDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__territories\";\n        return div;\n    },\n\n    /**\n     * Create Header Panel\n     *\n     * @returns {HTMLElement} DOM element\n     */\n    _createTerritoriesPanelHeaderElement : function () {\n        var container = document.createElement(\"div\");\n        container.className = \"gpf-panel__header_territories\";\n        return container;\n    },\n    _createTerritoriesPanelIconElement : function () {\n        var label = document.createElement(\"label\");\n        label.className = \"gpf-btn-header-territories gpf-btn-icon-header-territories\";\n        label.title = \"Selecteur de territoires\";\n        return label;\n    },\n    _createTerritoriesPanelTitleElement : function (title) {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__title_territories\";\n        div.innerHTML = title;\n        return div;\n    },\n    _createTerritoriesPanelCloseElement : function () {\n        var self = this;\n\n        var btnClose = document.createElement(\"button\");\n        btnClose.id = \"GPterritoriesPanelClose\";\n        btnClose.className = \"gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        btnClose.title = \"Fermer le panneau\";\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPelementHidden gpf-visible\"; // afficher en dsfr\n        span.innerText = \"Fermer\";\n\n        btnClose.appendChild(span);\n\n        // Link panel close / visibility checkbox\n        if (btnClose.addEventListener) {\n            btnClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPshowTerritoriesPicto\")).click();\n                self.onCloseTerritoriesClick();\n            }, false);\n        } else if (btnClose.attachEvent) {\n            btnClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPshowTerritoriesPicto\")).click();\n                self.onCloseTerritoriesClick();\n            });\n        }\n\n        return btnClose;\n    },\n    _createTerritoriesPanelOptionsElement : function (title, description) {\n        var self = this;\n\n        var content = \"&#x2630\";\n\n        var idButton = \"gpf-territories-button-option-id\";\n        var idInputUpload = \"gpf-territories-upload-id\";\n        var idClose = \"gpf-territories-upload-close-id\";\n        var idToggle = \"gpf-territories-toggle-messages\";\n        var idBtnApply = \"gpf-territories-apply-id\";\n\n        var strContainer = `\n        <div>\n            <button type=\"button\" \n                id=\"${idButton}\"\n                class=\"fr-btn fr-btn--tertiary-no-outline\" \n                role=\"territories-button-options\" \n                aria-expanded=\"false\" \n                aria-controls=\"gpf-territories-upload-container-id\">\n                ${content}\n            </button>\n            <dialog id=\"gpf-territories-upload-container-id\" class=\"fr-modal__body fr-upload-group gpf-hidden\">\n                <div class=\"gpf-territories-header-upload\">\n                    <button \n                        id=\"${idClose}\"\n                        type=\"button\" \n                        class=\"gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\"\n                        aria-expanded=\"false\"\n                        title=\"Fermer le panneau\">\n                        <span>Fermer</span>\n                    </button>\n                </div>\n                <label class=\"fr-label\">\n                    ${title}\n                    <span class=\"fr-hint-text\">${description}</span>\n                </label>\n                <fieldset class=\"fr-fieldset\">\n                    <div class=\"fr-fieldset__element\">\n                        <div class=\"fr-toggle fr-m-2v\">\n                            <input \n                                id=\"${idToggle}\" \n                                class=\"fr-toggle__input\" \n                                type=\"checkbox\" \n                                aria-describedby=\"gpf-territories-toggle-messages\">\n                            <label class=\"fr-toggle__label\" for=\"${idToggle}\">Compléter la liste</label>\n                            <div class=\"fr-messages-group\" id=\"gpf-territories-toggle-messages\" aria-live=\"polite\"></div>\n                        </div>\n                    </div>\n                    <div class=\"fr-fieldset__element\">\n                        <input \n                            id=\"${idInputUpload}\" \n                            class=\"fr-upload\" \n                            aria-describedby=\"gpf-territories-upload-id-messages\" \n                            type=\"file\" \n                            name=\"upload\">\n                        <div class=\"fr-messages-group\" id=\"gpf-territories-upload-id-messages\" aria-live=\"polite\"></div>\n                    </div>\n                </fieldset>\n                <fieldset class=\"fr-fieldset\">\n                    <button \n                        id=\"${idBtnApply}\" \n                        class=\"gpf-button gpf-button fr-btn fr-btn--tertiary\" \n                        aria-describedby=\"gpf-territories-apply-id-messages\">Appliquer</button>\n                    <div class=\"fr-messages-group\" id=\"gpf-territories-apply-id-messages\" aria-live=\"polite\"></div>\n                </fieldset>\n            </dialog>\n        </div>\n        `;\n        var container = stringToHTML(strContainer);\n\n        // ajout du shadow DOM pour creer les listeners\n        const shadow = container.attachShadow({ mode : \"open\" });\n        shadow.innerHTML = strContainer.trim();\n\n        var button = shadow.getElementById(idButton);\n        if (button) {\n            button.addEventListener(\"click\", (e) => {\n                e.target.ariaExpanded = !(e.target.ariaExpanded === \"true\");\n                var collapse = document.getElementById(e.target.getAttribute(\"aria-controls\"));\n                if (!collapse) {\n                    return;\n                }\n                if (e.target.ariaExpanded === \"true\") {\n                    collapse.classList.add(\"gpf-visible\");\n                    collapse.classList.remove(\"gpf-hidden\");\n                } else {\n                    collapse.classList.remove(\"gpf-visible\");\n                    collapse.classList.add(\"gpf-hidden\");\n                }\n            }, false);\n        }\n\n        var close = shadow.getElementById(idClose);\n        if (close) {\n            close.addEventListener(\"click\", (e) => {\n                e.target.ariaExpanded = !(e.target.ariaExpanded === \"true\");\n                var button = document.getElementById(idButton);\n                button.click();\n            });\n        }\n\n        // INFO\n        // https://developer.mozilla.org/en-US/docs/Web/API/File_API/Using_files_from_web_applications\n        var inputUpload = shadow.getElementById(idInputUpload);\n        if (inputUpload) {\n            inputUpload.addEventListener(\"change\", (e) => {\n                self.onUploadFileClick(e);\n            }, false);\n        }\n\n        var toggle = shadow.getElementById(idToggle);\n        if (idToggle) {\n            toggle.addEventListener(\"click\", (e) => {\n                console.log(e.target.checked);\n                self.onUploadToggleClick(e);\n            });\n        }\n\n        var inputApply = shadow.getElementById(idBtnApply);\n        if (inputApply) {\n            inputApply.addEventListener(\"click\", (e) => {\n                self.onApplyTerritoriesClick(e);\n            }, false);\n        }\n        return shadow.firstChild;\n    },\n\n    // ################################################################### //\n    // ####################### Methods for dialog  ####################### //\n    // ################################################################### //\n    _createTerritoriesPanelMenuViewsDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"territories-views gpf-panel__menuviews_territories\";\n        div.appendChild(this._createTerritoriesButtonOpenMenuViewsElement());\n        div.appendChild(this._createTerritoriesPanelMenuViewsElement());\n        return div;\n    },\n\n    _createTerritoriesButtonOpenMenuViewsElement : function () {\n        var self = this;\n\n        var button = document.createElement(\"button\");\n        // INFO: Ajout d'une SPAN pour enlever des marges de 6px dans CHROMIUM (?!)\n        var span = document.createElement(\"span\");\n        button.appendChild(span);\n        button.id = \"gpf-territories-button-open-views-id\";\n        button.classList.add(\"gpf-btn\", \"gpf-btn--tertiary\", \"gpf-btn-icon\");\n        button.classList.add(\"fr-btn\", \"fr-btn--tertiary\");\n        button.setAttribute(\"aria-label\", \"Modifier les territoires\");\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n        button.setAttribute(\"aria-controls\", \"gpf-territories-views-container-id\");\n        button.setAttribute(\"type\", \"button\");\n        button.innerHTML = \"Modifier les territoires\";\n\n        // Close all results and panels when minimizing the widget\n        if (button.addEventListener) {\n            button.addEventListener(\"click\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                var collapse = document.getElementById(e.target.getAttribute(\"aria-controls\"));\n                if (!collapse) {\n                    return;\n                }\n                if (status) {\n                    collapse.classList.remove(\"gpf-visible\");\n                    collapse.classList.add(\"gpf-hidden\");\n                } else {\n                    collapse.classList.add(\"gpf-visible\");\n                    collapse.classList.remove(\"gpf-hidden\");\n                }\n                self.onShowTerritoriesViewsClick(e);\n            });\n        } else if (button.attachEvent) {\n            button.attachEvent(\"onclick\", function (e) {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n                var collapse = document.getElementById(e.target.getAttribute(\"aria-controls\"));\n                if (!collapse) {\n                    return;\n                }\n                if (status) {\n                    collapse.classList.remove(\"gpf-visible\");\n                    collapse.classList.add(\"gpf-hidden\");\n                } else {\n                    collapse.classList.add(\"gpf-visible\");\n                    collapse.classList.remove(\"gpf-hidden\");\n                }\n                self.onShowTerritoriesViewsClick(e);\n            });\n        }\n\n        return button;\n    },\n\n    _createTerritoriesPanelMenuViewsElement : function () {\n        var dialog = document.createElement(\"dialog\");\n        dialog.id = \"gpf-territories-views-container-id\";\n        dialog.className = \"fr-modal__body gpf-panel__views_territories-menu gpf-hidden\";\n        dialog.appendChild(this._createTerritoriesMenuAddViewElement());\n        dialog.appendChild(this._createTerritoriesMenuListViewElement());\n        return dialog;\n    },\n    _createTerritoriesMenuAddViewElement : function () {\n        var self = this;\n\n        var buttonId = \"gpf-territories-views-back-button-id\";\n        var inputId = \"gpf-territories-views-input-id\";\n        var formId = \"gpf-territories-views-form-id\";\n        var submitId = \"gpf-territories-views-submit-id\";\n\n        var strContainer = `\n        <div>\n            <button \n                id=\"${buttonId}\" \n                class=\"fr-btn fr-icon-arrow-left-line fr-btn--icon-left fr-btn--tertiary-no-outline\"\n                aria-pressed=\"false\" \n                aria-controls=\"gpf-territories-views-container-id gpf-territories-button-open-views-id\"\n                title=\"Retour au sélecteur de territoires\" \n                type=\"button\">\n                Modifier les territoires\n            </button>\n            <form id=\"${formId}\">\n                <fieldset \n                    class=\"fr-fieldset\" \n                    id=\"add-view-form-fieldset\" \n                    aria-labelledby=\"add-view-form-fieldset-legend add-view-form-fieldset-messages\">\n                    <legend \n                        class=\"fr-fieldset__legend\" \n                        id=\"add-view-form-fieldset-legend\"> \n                        Ajouter la vue actuelle \n                    </legend>\n                    <div class=\"fr-fieldset__element\">\n                        <div class=\"fr-input-group\" id=\"${inputId}-input-group-view\">\n                            <label class=\"fr-label\" for=\"${inputId}\"> Nom </label>\n                            <input class=\"fr-input\" aria-describedby=\"${inputId}-messages\" id=\"${inputId}\" type=\"text\">\n                            <div class=\"fr-messages-group\" id=\"${inputId}-messages\" aria-live=\"polite\"></div>\n                        </div>\n                    </div>\n                    <div class=\"fr-messages-group\" id=\"add-view-form-fieldset-messages\" aria-live=\"polite\">\n                        <p class=\"fr-message fr-message--error gpf-hidden\" id=\"${inputId}-message-error-id\">Ce nom est déjà utilisé</p>\n                    </div>\n                </fieldset>\n            </form>\n            <input type=\"submit\" id=\"${submitId}\" value=\"Ajouter\" class=\"fr-btn\">\n            <hr class=\"fr-m-1v\"/>\n        </div>\n        `;\n        var container = stringToHTML(strContainer);\n\n        // ajout du shadow DOM pour creer les listeners\n        const shadow = container.attachShadow({ mode : \"open\" });\n        shadow.innerHTML = strContainer.trim();\n\n        var button = shadow.getElementById(buttonId);\n        if (button) {\n            button.addEventListener(\"click\", (e) => {\n                var status = (e.target.ariaPressed === \"true\");\n                e.target.setAttribute(\"aria-pressed\", !status);\n\n                var controls = e.target.getAttribute(\"aria-controls\").split(\" \");\n\n                var collapse = document.getElementById(controls[0]);\n                if (!collapse) {\n                    return;\n                }\n                collapse.classList.remove(\"gpf-visible\");\n                collapse.classList.add(\"gpf-hidden\");\n\n                var button = document.getElementById(controls[1]);\n                if (!button) {\n                    return;\n                }\n                button.setAttribute(\"aria-pressed\", \"false\");\n                self.onCloseTerritoriesViewsClick(e);\n            }, false);\n        }\n        var form = shadow.getElementById(formId);\n        if (form) {\n            form.addEventListener(\"submit\", (e) => {\n                e.preventDefault();\n                var input = document.getElementById(inputId);\n                if (input) {\n                    self.onAddTerritoriesViewClick(e, input.value);\n                }\n            }, false);\n        }\n        var submit = shadow.getElementById(submitId);\n        if (submit) {\n            submit.addEventListener(\"click\", (e) => {\n                e.preventDefault();\n                var input = document.getElementById(inputId);\n                if (input) {\n                    var message = document.getElementById(inputId + \"-message-error-id\");\n                    var territory = self.territories.find(e => e.data.title === input.value);\n                    if (message && input.value === \"\") {\n                        return;\n                    }\n                    // validation du nom de la vue avec ceux de la liste\n                    if (message && territory) {\n                        message.classList.remove(\"gpf-hidden\");\n                        return;\n                    } else {\n                        message.classList.add(\"gpf-hidden\");\n                    }\n                    self.onAddTerritoriesViewClick(e, input.value);\n                }\n            }, false);\n        }\n\n        return shadow.firstChild;\n    },\n\n    _createTerritoriesMenuListViewElement : function () {\n        var self = this;\n        \n        var buttonId = \"gpf-territories-views-reset-button-id\";\n        var countId = \"gpf-territories-views-count-id\";\n\n        var strContainer = `\n        <div class=\"gpf-panel__views_territories-listview\">\n            <!-- Menu de la liste des vues -->\n            <div class=\"gpf-panel__views_territories-listview-header\">\n                <div class=\"gpf-panel__views_territories-listview-count\">\n                    <span class=\"fr-label\" style=\"padding-right: 10px;\"> Territoires </span>\n                    <span \n                        class=\"fr-message\" \n                        id=\"${countId}\"> 0 </span>\n                </div>\n                <button \n                    id=\"${buttonId}\" \n                    class=\"fr-btn fr-btn--sm fr-btn--tertiary-no-outline\"\n                    title=\"Réinitialiser la liste des territoires\" \n                    type=\"button\">\n                    Réinitialiser\n                </button>\n            </div>\n            <!-- Liste des vues -->\n            <div \n                id=\"gpf-territories-views-listview-entries-id\"\n                class=\"gpf-panel__views_territories-listview-entries\">\n            </div>\n        </div>\n        `;\n        var container = stringToHTML(strContainer);\n\n        // ajout du shadow DOM pour creer les listeners\n        const shadow = container.attachShadow({ mode : \"open\" });\n        shadow.innerHTML = strContainer.trim();\n\n        var button = shadow.getElementById(buttonId);\n        if (button) {\n            button.addEventListener(\"click\", (e) => {\n                self.onResetTerritoriesViewClick(e);\n            }, false);\n        }\n\n        return shadow.firstChild;\n    },\n\n    // ################################################################### //\n    // ####################### Methods for entries ####################### //\n    // ################################################################### //\n\n    _createTerritoriesElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"territories-entries gpf-panel__body_territories fr-modal__body\";\n        return div;\n    },\n\n    _createTerritoryEntry : function (o) {\n        var self = this;\n        \n        if (o) {\n            // Test si la vignette est demandée ou non (SVG ou DSFR)\n            // On propose une image par défaut (cf. img/image-not-found.png)\n            var DefaultImage = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFvSURBVHgB7ZfBisIwEIb/aIWKHsXH8OCT+lBevHgRjwp6EBEREdRqTbKZLN3FXT20yRyK80FIqJR8mf4drDqfjUWNaKBmiDA3IsyNCHMjwtyIMDcizI0Ic/O5wsYA7bZCkjxfb7UQlWjCnY7CaJRhNtM/0nSAyUQjTRViEU3Yug+t8Tj3ws2mcpVVWCw0Gm4Hmv9Wvioq1jcdRaLbVX6+XCyUK+p0ql2VgevVYjhM/LVQolSYqni7AVlm/aB4UKXT9LvyFI35PE40goVJ9nSiYb0cPfrVyvh1Aa21BjYb4+KCIIKFiwhQNzgcSFphvTb/ugMdZLnULhbq6TBlCcowSex2v7dTRvd74+PxLq90kMEg8dGpQuUKF1GgR01VpvF4AP1+A3lu/frVOB4ttltT+QWsXGHakN7+V5mkQ9zv7++l33s95efS+4ZEIqRNVc1xUDu3UTp4OeTfGjcizI0IcyPC3IgwNyLMjQhzUzvhL49qosB5TImnAAAAAElFTkSuQmCC\";\n            \n            var thumbnail = o.thumbnail || DefaultImage;\n            var iconDiv = \"\";\n            var icon = o.icon || DefaultImage;\n            if (icon.startsWith(\"fr-icon-\")) {\n                iconDiv = `\n                <button \n                    type=\"button\" \n                    class=\"fr-btn fr-btn--lg ${icon} fr-btn--tertiary-no-outline\">\n                </button>`;\n            } else {\n                iconDiv = `\n                <svg>       \n                    <image id=\"icon-${o.id}\" xlink:href=\"${icon}\" style=\"width:100%;\"/>    \n                </svg>`;\n            }\n            var id = o.id.toLowerCase();\n            // tile dsfr\n            var entry = stringToHTML(`\n            <div class=\"gpf-tile fr-tile fr-tile--sm\">\n                <div class=\"fr-tile__body\">\n                    <div class=\"fr-tile__content\">\n                        <p class=\"fr-tile__title\">\n                            <label class=\"gpf-label fr-label\" title=\"${o.description}\">${o.title}</label>\n                        </p>\n                    </div>\n                </div>\n                <div class=\"gpf-tile__header fr-tile__header\">\n                    <div class=\"fr-tile__pictogram fr-tile__thumbnail\">\n                        <img id=\"thumbnail-${o.id}\" src=\"${thumbnail}\" width=\"100%\" height=\"100%\" title=\"${o.description}\"/>\n                    </div>\n                    <div class=\"fr-tile__pictogram fr-tile__icon fr-tile__icon--${id}\">\n                        ${iconDiv}\n                    </div>\n                </div>\n            </div>\n            `);\n            // add event click on main div\n            var div = entry.firstChild;\n            if (div) {\n                div.addEventListener(\"click\", (e) => {\n                    self.onImageTerritoriesClick(e, o.id);\n                });\n            }\n            return entry.firstChild;\n        }\n    },\n\n    _createTerritoryView : function (o) {\n        var self = this;\n        \n        var buttonId = \"gpf-territories-view-entry-button-id-\" + o.id;\n        if (o) {\n            var entry = stringToHTML(`\n            <div class=\"gpf-panel__views_territories-listview-entry\">\n                <!-- ${o.title} -->\n                <div style=\"display: flex;flex-direction: row;align-items: center;\">    \n                    <span class=\"gpf-btn gpf-btn-icon-territories-draggable gpf-btn--tertiary\"></span>\n                    <label class=\"gpf-label fr-label\" title=\"${o.description}\">${o.title}</label>\n                </div>\n                <button \n                    id=\"${buttonId}\" \n                    type=\"button\" \n                    class=\"fr-btn fr-btn--sm fr-btn--icon-left fr-btn--tertiary-no-outline gpf-btn gpf-btn-icon-territories-remove gpf-btn--tertiary\"></button>\n            </div>\n            `);\n            var div = entry.firstChild;\n            if (div) {\n                div.addEventListener(\"click\", (e) => {\n                    // some stuff to select the view\n                    self.onViewTerritoryClick(e, o.id);\n                });\n                var button = entry.querySelector(\"#\" + buttonId);\n                if (button) {\n                    button.addEventListener(\"click\", (e) => {\n                        e.stopPropagation();\n                        // some stuff to remove the view\n                        self.onViewTerritoryRemoveClick(e, o.id);\n                    });\n                }\n            }\n            return entry.firstChild;\n        }\n    }\n\n};\n\nexport default TerritoriesDOM;\n","// import CSS\nimport \"../../CSS/Controls/Territories/GPFterritories.css\";\n\n// import OpenLayers\nimport Control from \"../Control\";\nimport Widget from \"../Widget\";\nimport Map from \"ol/Map\";\nimport { \n    transformExtent as olTransformExtentProj,\n    transform as olTransformProj\n} from \"ol/proj\";\n\n// import local\nimport Utils from \"../../Utils/Helper\";\nimport SelectorID from \"../../Utils/SelectorID\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Draggable from \"../../Utils/Draggable\";\n\nimport TerritoriesJson from \"./Territories.json\";\n\n// DOM\nimport TerritoriesDOM from \"./TerritoriesDOM\";\n\nlet logger = Logger.getLogger(\"territories\");\n\n/**\n * @typedef {Object} TerritoriesOptions\n * @property {boolean} [collapsed=true] - Définit si le widget est replié au chargement.\n * @property {boolean} [draggable=false] - Permet de déplacer le panneau du widget.\n * @property {boolean} [panel=true] - Affiche un en-tête (header) dans le panneau.\n * @property {boolean} [auto=false] - Charge automatiquement la liste par défaut des territoires.\n * @property {boolean} [thumbnail=false] - Affiche une imagette pour chaque territoire.\n * @property {boolean} [reduce=false] - Affiche les tuiles en mode réduit (nom uniquement).\n * @property {number} [tiles=3] - Nombre de tuiles affichées (0 = toutes).\n * @property {Array<Territory>} [territories=[]] - Liste personnalisée des territoires à afficher.\n * @property {Object} [upload] - Options pour l’import de configuration.\n * @property {boolean} [upload.active=false] - Active le menu d’import de fichier.\n * @property {string} [upload.title=\"Ajouter un fichier de configuration\"] - Titre du menu d’import.\n * @property {string} [upload.description=\"\"] - Description du menu d’import.\n * @property {string} [title=\"Sélectionner un territoire\"] - Titre affiché dans le panneau.\n * @property {string} [position] - Position CSS du widget sur la carte.\n * @property {boolean} [gutter] - Ajoute ou retire l’espace autour du panneau.\n * @property {string|number} [id] - Identifiant unique du widget.\n */\n\n/**\n * @typedef {Object} Territory\n * @property {string} id - IdenObjecttifiant unique du territoire (ex: FRA, MTQ, GLP, ...).\n * @property {string} title - Titre du territoire.\n * @property {string} description - Description du territoire.\n * @property {Array<number>} bbox - Bbox du territoire au format [minx, miny, maxx, maxy] en EPSG:4326.\n * @property {Array<number>} [point] - Point central du territoire au format [lon, lat] en EPSG:4326.\n * @property {number} [zoom] - Niveau de zoom à appliquer lors de la sélection du territoire.\n * @property {string} [thumbnail] - URL ou data URI de la vignette du territoire (format image tel que PNG, JPEG, SVG).\n * @property {string} [icon] - URL, data URI ou classe CSS DSFR de l’icône du territoire (format vectoriel SVG).\n */\n\n/**Object\n * @classdesc\n *\n * Territories map widget\n *\n * @alias ol.control.Territories\n * @module Territories\n*/\nclass Territories extends Control {\n    \n    /**\n     * @constructor\n     * @param {TerritoriesOptions} options - options for function call.\n     *\n     * @fires territories:loaded\n     * @fires territories:change\n     * @fires territories:add\n     * @fires territories:remove\n     * @public\n     * @example\n     * var territories = new ol.control.Territories({\n     *   collapsed: true,\n     *   panel: true,\n     *   auto: true\n     * });\n     * map.addControl(territories);\n     *\n     * or/and\n     *\n     * var territories = new ol.control.Territories({});\n     * territories.setTerritory({id: \"MTQ\", title: \"Martinique\", description: \"\", bbox: [], thumbnail: \"data:image/png;base64,...\"});\n     * territories.setTerritory({id: \"GLP\", title: \"Guadeloupe\", description: \"\", bbox: [], thumbnail: \"http://...\"});\n     * map.addControl(territories);\n     * territories.on(\"territories:loaded\", (e) => { console.log(e.data); });\n     * territories.on(\"territories:add\", (e) => { console.log(e); });\n     * territories.on(\"territories:remove\", (e) => { console.log(e); });\n     */\n    constructor (options) {\n        options = options || {};\n\n        // call ol.control.Control constructor\n        super(options);\n\n        if (!(this instanceof Territories)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n        /**\n         * Nom de la classe (heritage)\n         * @private\n         */\n        this.CLASSNAME = \"Territories\";\n        // initialisation du composant\n        this.initialize(options);\n\n        // Territories main DOM container\n        this.container = this.initContainer();\n\n        // ajout du container\n        (this.element) ? this.element.appendChild(this.container) : this.element = this.container;\n\n        return this;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n\n    /**\n     * Overwrite OpenLayers setMap method\n     *\n     * @param {Map} map - Map.\n     */\n    setMap (map) {\n        if (map) {\n            // mode \"draggable\"\n            if (this.draggable) {\n                Draggable.dragElement(\n                    this.panelTerritoriesContainer,\n                    this.panelTerritoriesHeaderContainer,\n                    map.getTargetElement()\n                );\n            }\n            // mode \"collapsed\"\n            if (!this.collapsed) {\n                this.buttonTerritoriesShow.setAttribute(\"aria-pressed\", true);\n            }\n\n            // Ajout des territoires par defaut ou customisés\n            var territories = (this.auto) ? TerritoriesJson : this.options.territories;\n            for (let index = 0; index < territories.length; index++) {\n                const territory = territories[index];\n                this.setTerritory(territory);\n            }\n        } else {\n            // some stuff when remove widget\n        }\n\n        // on appelle la méthode setMap originale d'OpenLayers\n        super.setMap(map);\n\n        // position\n        if (this.options.position) {\n            this.setPosition(this.options.position);\n        }\n\n        // reunion du bouton avec le précédent\n        if (this.options.gutter === false) {\n            this.getContainer().classList.add(\"gpf-button-no-gutter\");\n        }\n\n        /**\n         * event triggered when a territory is loaded\n         *\n         * @event territories:loaded\n         * @defaultValue \"territories:loaded\"\n         * @group Events\n         * @property {Object} type - event\n         * @property {Object} target - instance Territories\n         * @example\n         * Territories.on(\"territories:loaded\", function (e) {\n         *   console.log(e);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"territories:loaded\"\n        });\n    }\n\n    // ################################################################### //\n    // ################### getters / setters ############################# //\n    // ################################################################### //\n\n    /**\n     * Add a territory\n     *\n     * @param {Territory} territory  - territory\n     * @param {Boolean} [isAdded=false] - specify if territory is added manually with \"Add view\" button\n     * @returns {Boolean} - true|false\n     * @public\n     * @example\n     * territories.setTerritory ({\n     *  id: \"MTQ\",\n     *  title: \"Martinique\",\n     *  description: \"\",\n     *  bbox: [minx, miny, maxx, maxy],\n     *  thumbnail: \"data:image/png;base64,...\"\n     * });\n     */\n    setTerritory (territory, isAdded = false) {\n        // Test if a territory already exist\n        var founded = this.territories.some(e => e.data.id === territory.id);\n        if (territory && !founded) {\n            var entry = this._createTerritoryEntry(territory);\n            var view = this._createTerritoryView(territory);\n            if (entry && view) {\n                this.panelTerritoriesEntriesContainer.appendChild(entry);\n                var panelTerritoriesViewsContainer = this.element.querySelector(\"#gpf-territories-views-listview-entries-id\");\n                if (panelTerritoriesViewsContainer) {\n                    panelTerritoriesViewsContainer.appendChild(view);\n                }\n                var count = this.element.querySelector(\"#gpf-territories-views-count-id\");\n                if (count) {\n                    var nb = this.territories.filter(t => !t.isRemoved).length + 1;\n                    count.innerText = nb;\n                }\n                this.territories.push({\n                    isRemoved : false,\n                    isAdded : isAdded,\n                    data : territory,\n                    domEntry : entry,\n                    domView : view\n                });\n                return true;\n            }\n        }\n        return false;\n    }\n\n    /**\n     * Load a new configuration\n     * \n     * @param {Array<Territory>} territories - file config\n     */\n    setTerritories (territories) {\n        for (let j = 0; j < territories.length; j++) {\n            const territory = territories[j];\n            this.setTerritory(territory);\n        }\n    }\n\n    /**\n     * Remove a territory\n     *\n     * @param {String} territory - territory id (FRA, MTQ, ...)\n     * @param {Boolean} [force=false] - force removal even if territory was added manually\n     * @returns {Boolean} - true|false\n     * @public\n     * @example\n     * territories.removeTerritory(\"MTQ\"); // id du territoire\n     */\n    removeTerritory (territory, force = false) {\n        var found = false;\n        if (territory) {\n            for (let i = 0; i < this.territories.length; i++) {\n                const o = this.territories[i];\n                if (o.data.id === territory.data.id) {\n                    this.territories[i].domEntry.remove();\n                    this.territories[i].domView.remove();\n                    if (!force) {\n                        // on ne le supprime pas de la liste des territoires\n                        // mais on le masque uniquement\n                        this.territories[i].isRemoved = true;\n                    } else {\n                        // on le supprime de la liste des territoires\n                        this.territories.splice(i, 1);\n                    }\n                    found = true;\n                    var count = this.element.querySelector(\"#gpf-territories-views-count-id\");\n                    if (count) {\n                        var nb = this.territories.filter(t => !t.isRemoved).length;\n                        count.innerText = nb;\n                    }\n                    break;\n                }\n            }\n        }\n        return found;\n    }\n\n    /**\n     * Remove all territories\n     */\n    removeTerritories () {\n        for (let i = 0; i < this.territories.length; i++) {\n            const territory = this.territories[i];\n            territory.domEntry.remove();\n            territory.domView.remove();\n        }\n        this.territories = [];\n    }\n\n    /**\n     * Set collapse\n     *\n     * @param {Boolean} collapsed - true|false\n     * @todo ...\n     * @public\n     */\n    setCollapse (collapsed) {\n        if (collapsed === undefined) {\n            logger.log(\"[ERROR] Territory:setCollapsed - missing collapsed parameter\");\n            return;\n        }\n        if ((collapsed && this.collapsed) || (!collapsed && !this.collapsed)) {\n            return;\n        }\n        if (collapsed) {\n            document.getElementById(\"GPterritoriesPanelClose\").click();\n        } else {\n            this.buttonTerritoriesShow.click();\n        }\n        this.collapsed = collapsed;\n    }\n\n    /**\n     * Mode reduit des tuiles (uniquement le nom du territoire)\n     *\n     * @param {*} reduce - true|false\n     * @public\n     */\n    setReduce (reduce) {\n        if (reduce) {\n            this.panelTerritoriesEntriesContainer.classList.add(\"tiles-reduce\");\n        } else {\n            this.panelTerritoriesEntriesContainer.classList.remove(\"tiles-reduce\");\n        }\n    }\n\n    /**\n     * Get container\n     *\n     * @returns {HTMLElement} container\n     */\n    getContainer () {\n        return this.container;\n    }\n\n    // ################################################################### //\n    // #################### privates methods ############################# //\n    // ################################################################### //\n\n    /**\n     * Initialize Territories control (called by Territories constructor)\n     *\n     * @param {Object} options - constructor options\n     * @private\n     */\n    initialize (options) {\n        this.uid = options.id || SelectorID.generate();\n\n        // set default options\n        this.options = {\n            collapsed : true,\n            draggable : false,\n            panel : true, // titre\n            upload : {\n                active : false,\n                title : \"Ajouter un fichier de configuration\",\n                description : \"\"\n            }, // menu du upload\n            title : \"Sélectionner un territoire\",\n            auto : false, // chargement auto des territoires par defaut\n            thumbnail : false, // imagette des territoires\n            reduce : false, // tuiles reduites par defaut\n            tiles : 3, // nombre de tuiles affichables, 0 = toutes !\n            territories : []\n        };\n\n        // merge with user options\n        var uploadOpts = Utils.assign(this.options.upload, options.upload);\n        Utils.assign(this.options, options);\n        Utils.assign(this.options.upload, uploadOpts);\n\n        /** \n         * @type {Boolean} \n         * specify if control is collapsed (true) or not (false) */\n        this.collapsed = this.options.collapsed;\n\n        /** \n         * @type {Boolean} \n         * specify if control is draggable (true) or not (false) \n         * */\n        this.draggable = this.options.draggable;\n\n        /** \n         * specify if we load the list of territories by default\n         * @type {Boolean} */\n        this.auto = this.options.auto;\n        /**\n         * list of object territories\n         * @type {Array} \n         * @example\n         * {\n         *   isRemoved : { Boolean },\n         *   isAdded : { Boolean },\n         *   domView : { HTMLelment },\n         *   domEntry : { HTMLelment },\n         *   data : {\n         *     id: \"MTQ\",\n         *     title: \"Martinique\",\n         *     description: \"\", \n         *     bbox: [minx, miny, maxx, maxy], \n         *     thumbnail: \"data:image/png;base64,...\"\n         *   }\n         * }\n         */\n        this.territories = [];\n        /** \n         * @type {Object} \n         * upload configuration */\n        this.uploadConfig = null;\n\n        /** \n         * @type {Boolean} \n         * specify if a list of object territories must be appended or replaced */\n        this.append = false;\n\n        /** @private */\n        this.buttonTerritoriesShow = null;\n        /** @private */\n        this.panelTerritoriesContainer = null;\n        /** @private */\n        this.panelTerritoriesHeaderContainer = null; // usefull for the dragNdrop\n        /** @private */\n        this.buttonTerritoriesClose = null;\n        /** @private */\n        this.containerTerritoriesOptions = null;\n        /** @private */\n        this.panelTerritoriesEntriesContainer = null;\n    }\n\n    /**\n     * Create control main container (DOM initialize)\n     *\n     * @returns {HTMLElement} DOM element\n     * @private\n     */\n    initContainer () {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var picto = this.buttonTerritoriesShow = this._createShowTerritoriesPictoElement();\n        container.appendChild(picto);\n\n        // panel\n        var territoriesPanel = this.panelTerritoriesContainer = this._createTerritoriesPanelElement();\n        territoriesPanel.classList.add(\"tiles-direction\");\n        territoriesPanel.classList.add(\"tiles-\" + this.options.tiles);\n        \n        var territoriesPanelDiv = this._createTerritoriesPanelDivElement();\n        territoriesPanel.appendChild(territoriesPanelDiv);\n        \n        // menu views button\n        var territoriesPanelMenuViewsDiv = this._createTerritoriesPanelMenuViewsDivElement();\n        territoriesPanel.appendChild(territoriesPanelMenuViewsDiv);\n\n        // INFO\n        // Les territoires seront ajoutés dans ce conteneur\n        // au moment de l'appel de la méthode setTerritory()\n        // ou setTerritories() dans SetMap()\n\n        // container for the custom code\n        var territoriesEntriesDiv = this.panelTerritoriesEntriesContainer = this._createTerritoriesElement();\n        territoriesEntriesDiv.classList.add(\"tiles-direction\");\n        territoriesEntriesDiv.classList.add(\"tiles-\" + this.options.tiles);\n        if (this.options.reduce) {\n            territoriesEntriesDiv.classList.add(\"tiles-reduce\");\n        }\n        if (this.options.thumbnail) {\n            territoriesEntriesDiv.classList.add(\"tiles-thumbnail\");\n        } else {\n            territoriesEntriesDiv.classList.add(\"tiles-icon\");\n        }\n        territoriesPanel.appendChild(territoriesEntriesDiv);\n        \n        // header ?\n        if (this.options.panel) {\n            var territoriesPanelHeader = this.panelTerritoriesHeaderContainer = this._createTerritoriesPanelHeaderElement();\n            // icone\n            var territoriesPanelIcon = this._createTerritoriesPanelIconElement();\n            territoriesPanelHeader.appendChild(territoriesPanelIcon);\n            // title\n            var territoriesPanelTitle = this._createTerritoriesPanelTitleElement(this.options.title);\n            territoriesPanelHeader.appendChild(territoriesPanelTitle);\n            // options\n            if (this.options.upload && this.options.upload.active) {\n                var territoriesPanelOptions = this.containerTerritoriesOptions = this._createTerritoriesPanelOptionsElement(this.options.upload.title, this.options.upload.description);\n                territoriesPanelHeader.appendChild(territoriesPanelOptions);\n            }\n            // close picto\n            var territoriesCloseBtn = this.buttonTerritoriesClose = this._createTerritoriesPanelCloseElement();\n            territoriesPanelHeader.appendChild(territoriesCloseBtn);\n            territoriesPanelDiv.appendChild(territoriesPanelHeader);\n        }\n\n        container.appendChild(territoriesPanel);\n\n        logger.log(container);\n\n        return container;\n    }\n\n    /**\n     * Close panel option\n     * @private\n     */\n    closePanelUpLoad () {\n        // document.getElementById(\"gpf-territories-upload-container-id\")\n        var button = this.containerTerritoriesOptions.children[0];\n        if (button) {\n            button.setAttribute(\"aria-expanded\", \"false\");\n        }\n        var dialog = this.containerTerritoriesOptions.children[1];\n        if (dialog) {\n            dialog.classList.add(\"gpf-hidden\");\n            dialog.classList.remove(\"gpf-visible\");\n        }\n    }\n\n    // ################################################################### //\n    // ######################## event dom ################################ //\n    // ################################################################### //\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onShowTerritoriesClick (e) {\n        if (e.target.ariaPressed === \"true\") {\n            this.onPanelOpen();\n        }\n        logger.trace(e);\n        this.collapsed = !this.collapsed;\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onCloseTerritoriesClick (e) {\n        logger.trace(e);\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @param {*} id - ...\n     * @private\n     */\n    onImageTerritoriesClick (e, id) {\n        logger.trace(e, id);\n        var territory = this.territories.find(e => e.data.id === id);\n        if (territory) {\n            var zoom = territory.data.zoom;\n            var bbox = territory.data.bbox; // [left, bottom, right, top]\n            var point = territory.data.point;\n            if (bbox && !bbox.length) {\n                return;\n            }\n            if (!point && !bbox) {\n                return;\n            }\n\n            var map = this.getMap();\n            var proj = map.getView().getProjection().getCode();\n            if (bbox) {\n                var extent = olTransformExtentProj(bbox, \"EPSG:4326\", proj);\n                map.getView().fit(extent, {\n                    size : map.getSize()\n                });\n            }\n            if (point) {\n                var coord = olTransformProj(point, \"EPSG:4326\", proj);\n                map.getView().setCenter(coord);\n            }\n            if (zoom) {\n                map.getView().setZoom(zoom);\n            }\n            this.setCollapse(true);\n            /**\n             * event triggered when a territory is clicked\n             *\n             * @event territories:change\n             * @defaultValue \"territories:change\"\n             * @group Events\n             * @property {Object} type - event\n             * @property {Object} target - instance Territories\n             * @property {Object} territory - territory\n             * @example\n             * Territories.on(\"territories:change\", function (e) {\n             *   console.log(e.target.getData());\n             * })\n             */\n            this.dispatchEvent({\n                type : \"territories:change\",\n                territory : territory.data\n            });\n        }\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onUploadFileClick (e) {\n        var file = e.target.files[0];\n        var target = e.target;\n        if (!file) {\n            logger.warn(\"Missing file to upload !\");\n            return;\n        }\n        var fReader = new FileReader();\n         \n        // Définition des fonctions de callbacks associées au reader\n        var self = this;\n        /** \n         * on readAsText error \n         * @param {*} e  - ...\n         * @private\n         */\n        fReader.onerror = (e) => {\n            logger.log(\"onerror\");\n        };\n        /** on readAsText progress \n         * @param {*} e  - ...\n         * @private\n         */\n        fReader.onprogress = (e) => {\n            logger.log(\"onprogress\");\n        };\n        /** on load start \n         * @param {*} e  - ...\n         * @private\n         */\n        fReader.onloadstart = (e) => {\n            logger.log(\"onloadstart\");\n        };\n        /** on readAsText abort \n         * @param {*} e  - ...\n         * @private\n         */\n        fReader.onabort = (e) => {\n            logger.log(\"onabort\");\n        };\n        /** on readAsText loadend \n         * @param {*} e  - ...\n         * @private\n         */\n        fReader.onloadend = (e) => {\n            logger.log(\"onloadend : \", e);\n        };\n        /** on readAsText load \n         * @param {*} e  - ...\n         * @private\n         */\n        fReader.onload = (e) => {\n            logger.log(\"file content : \", e.target.result);\n\n            try {\n                // on convertie string -> json\n                self.uploadConfig = JSON.parse(e.target.result);\n                if (!self.uploadConfig) {\n                    console.error(\"Invalid configuration file !\");\n                    return;\n                }\n            } catch (err) {\n                console.error(\"Error parsing configuration file : \", err);\n                return;\n            }\n        };\n\n        // Lecture du fichier chargé à l'aide de fileReader\n        fReader.readAsText(file);\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onUploadToggleClick (e) {\n        // INFO\n        // la configuration des territoires doit elle être ajoutée\n        // à la liste courrante ou remplacée ?\n        this.append = e.target.checked;\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onApplyTerritoriesClick (e) {\n        logger.trace(e);\n        // on ferme le panneau\n        this.closePanelUpLoad();\n        if (!this.uploadConfig) {\n            logger.error(\"No configuration to apply !\");\n            return;\n        }\n        if (!this.append) {\n            // on nettoie l'ancienne configuration\n            this.removeTerritories();\n        }\n        // et, on en ajoute une autre\n        this.setTerritories(this.uploadConfig);\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onShowTerritoriesViewsClick (e) {\n        logger.trace(e);\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onCloseTerritoriesViewsClick (e) {\n        logger.trace(e);\n        // on ferme le panneau des options\n        this.closePanelUpLoad();\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @param {String} viewName - ...\n     * @private\n     */\n    onAddTerritoriesViewClick (e, viewName) {\n        logger.trace(e, viewName);\n        var id = Math.abs(Array.from(viewName).reduce((s, c) => Math.imul(31, s) + c.charCodeAt(0) | 0, 0));\n        var view = this.getMap().getView();\n        var proj = view.getProjection().getCode();\n        var coord = olTransformProj(view.getCenter(), proj, \"EPSG:4326\");\n        var zoom = view.getZoom();\n        var territory = {\n            \"id\" : id.toString(),\n            \"title\" : viewName,\n            \"description\" : \"Vue personnalisée\",\n            \"point\" : coord,\n            \"zoom\" : zoom,\n            \"thumbnail\" : \"\",\n            \"icon\" : \"fr-icon-map-pin-2-line\" // icone DSFR ou svg\n        };\n        this.setTerritory(territory, true);\n        /**\n         * event triggered when a territory is added\n         *\n         * @event territories:add\n         * @defaultValue \"territories:add\"\n         * @group Events\n         * @property {Object} type - event\n         * @property {Object} target - instance Territories\n         * @property {Object} territory - territory\n         * @example\n         * Territories.on(\"territories:add\", function (e) {\n         *   console.log(e.territory);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"territories:add\",\n            territory : territory\n        });\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @private\n     */\n    onResetTerritoriesViewClick (e) {\n        logger.trace(e);\n        // On supprime tous les territoires ajoutées manuellement via le bouton \"Ajouter une vue\"\n        // et on recharge la liste initiale\n        var territories = [...this.territories];\n        for (let index = 0; index < territories.length; index++) {\n            const territory = territories[index];\n            if (territory.isAdded) {\n                this.removeTerritory(territory, true);\n            } else {\n                // on ré-affiche les territoires non supprimés\n                if (territory.isRemoved) {\n                    this.panelTerritoriesEntriesContainer.appendChild(territory.domEntry);\n                    var panelTerritoriesViewsContainer = this.element.querySelector(\"#gpf-territories-views-listview-entries-id\");\n                    if (panelTerritoriesViewsContainer) {\n                        panelTerritoriesViewsContainer.appendChild(territory.domView);\n                    }\n                    territory.isRemoved = false;\n                }\n            }\n        }\n        // mise à jour du compteur des vues\n        var count = this.element.querySelector(\"#gpf-territories-views-count-id\");\n        if (count) {\n            var nb = this.territories.filter(t => !t.isRemoved).length;\n            count.innerText = nb;\n        }\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @param {*} id - ...\n     * @private\n     */\n    onViewTerritoryClick (e, id) {\n        logger.trace(e, id);\n    }\n\n    /**\n     * ...\n     * @param {Event} e - ...\n     * @param {*} id - ...\n     * @private\n     */\n    onViewTerritoryRemoveClick (e, id) {\n        logger.trace(e, id);\n        var territory = this.territories.find(e => e.data.id === id);\n        if (territory) {\n            // on le supprime définitivement pour les vues personnalisées\n            // mais on masque uniquement pour les territoires par défaut\n            this.removeTerritory(territory, territory.isAdded);\n            /**\n             * event triggered when a territory is removed\n             *\n             * @event territories:remove\n             * @defaultValue \"territories:remove\"\n             * @group Events\n             * @property {Object} type - event\n             * @property {Object} target - instance Territories\n             * @property {Object} territory - territory\n             * @example\n             * Territories.on(\"territories:remove\", function (e) {\n             *   console.log(e.territory);\n             * })\n             */\n            this.dispatchEvent({\n                type : \"territories:remove\",\n                territory : territory.data\n            });\n        }\n    }\n\n};\n\n// on récupère les méthodes de la classe DOM\nObject.assign(Territories.prototype, TerritoriesDOM);\nObject.assign(Territories.prototype, Widget);\n\nexport default Territories;\n\n// Expose Export as ol.control.Territories (for a build bundle)\nif (window.ol && window.ol.control) {\n    window.ol.control.Territories = Territories;\n}\n"],"names":["noop","undefinedType","isIE","window","navigator","test","userAgent","logMethods","_loggersByName","defaultLogger","bindMethod","obj","methodName","method","bind","Function","prototype","call","e","apply","arguments","traceForIE","console","log","trace","realMethod","undefined","replaceLoggingMethods","level","this","getLevel","i","length","methodFactory","name","debug","levels","SILENT","enableLoggingWhenConsoleArrives","defaultMethodFactory","_level","_loggerName","Logger","factory","inheritedLevel","defaultLevel","userLevel","self","storageKey","persistLevelIfPossible","levelNum","levelName","toUpperCase","localStorage","ignore","document","cookie","encodeURIComponent","getPersistedLevel","storedLevel","cookieName","location","indexOf","exec","slice","clearPersistedLevel","removeItem","normalizeLevel","input","TypeError","setLevel","persist","setDefaultLevel","resetLevel","enableAll","TRACE","disableAll","rebuild","childName","initialLevel","getLogger","logger","_log","noConflict","getLoggers","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","n","getter","__esModule","d","a","definition","key","o","Object","defineProperty","enumerable","get","prop","hasOwnProperty","ol","control","Control","getComputedStyle","documentElement","getPropertyValue","_Control","ControlExtended","options","_this","_classCallCheck","_callSuper","element","target","render","listable","description","_inherits","_createClass","value","pos","getMap","PositionFactory","set","update","ANCHORS","_PositionFactory_brand","WeakSet","caller","_classPrivateMethodInitSpec","container","_assertClassBrand","_createContainer","includes","toLowerCase","_setAnchor","children","prepend","appendChild","_existContainer","getOverlayContainerStopEvent","div","createElement","id","className","position","sizeW","offsetWidth","sizeH","height","offsetHeight","index","clear","style","top","bottom","left","right","panels","Array","from","getElementsByClassName","offset","forEach","panel","nodeName","checkDsfr","exceptions","openedPanelID","openedPanel","exceptionPanel","concat","controlPanels","bottomLeft","getElementById","topLeft","_toConsumableArray","bottomRight","topRight","filter","p","panelID","match","isException","getElementsByTagName","getAttribute","getSameSideOpenedPanel","click","onPanelOpen","PanelManager","Map","proj","detectSupport","isDesktop","assign","dest","source","mergeParams","replace","param","_typeof","timestamp","generate","Math","floor","Date","now","lastIndexOf","substring","uuid","parseInt","LoggerByDefault","process","VERBOSE","env","Log","logname","loggers","Gp","dragElement","header","rect","dragStartMouseX","dragStartMouseY","diffX","diffY","positionX","positionY","addEventListener","dragMouseDown","viewport","event","preventDefault","clientX","clientY","getBoundingClientRect","viewPortRect","closeDragElement","elementDrag","removeEventListener","currentMouseX","currentMouseY","oldDiffX","oldDiffY","newLeft","newTop","width","newX","newY","transform","stringToHTML","str","DOMParser","parser","parseFromString","err","support","body","dom","innerHTML","_addUID","uid","_createMainContainerElement","_createShowTerritoriesPictoElement","button","span","classList","add","setAttribute","status","ariaPressed","onShowTerritoriesClick","attachEvent","_createTerritoriesPanelElement","dialog","_createTerritoriesPanelDivElement","_createTerritoriesPanelHeaderElement","_createTerritoriesPanelIconElement","label","title","_createTerritoriesPanelTitleElement","_createTerritoriesPanelCloseElement","btnClose","innerText","onCloseTerritoriesClick","_createTerritoriesPanelOptionsElement","idButton","idInputUpload","idClose","idToggle","idBtnApply","strContainer","shadow","attachShadow","mode","trim","ariaExpanded","collapse","remove","close","inputUpload","onUploadFileClick","toggle","checked","onUploadToggleClick","inputApply","onApplyTerritoriesClick","firstChild","_createTerritoriesPanelMenuViewsDivElement","_createTerritoriesButtonOpenMenuViewsElement","_createTerritoriesPanelMenuViewsElement","onShowTerritoriesViewsClick","_createTerritoriesMenuAddViewElement","_createTerritoriesMenuListViewElement","buttonId","inputId","formId","submitId","controls","split","onCloseTerritoriesViewsClick","form","onAddTerritoriesViewClick","submit","message","territory","territories","find","data","onResetTerritoriesViewClick","_createTerritoriesElement","_createTerritoryEntry","DefaultImage","thumbnail","iconDiv","icon","startsWith","entry","onImageTerritoriesClick","_createTerritoryView","onViewTerritoryClick","querySelector","stopPropagation","onViewTerritoryRemoveClick","Territories","CLASSNAME","initialize","initContainer","_possibleConstructorReturn","map","draggable","Draggable","panelTerritoriesContainer","panelTerritoriesHeaderContainer","getTargetElement","collapsed","buttonTerritoriesShow","auto","TerritoriesJson","setTerritory","setPosition","gutter","getContainer","dispatchEvent","type","isAdded","founded","some","view","panelTerritoriesEntriesContainer","panelTerritoriesViewsContainer","count","nb","t","isRemoved","push","domEntry","domView","j","force","found","splice","reduce","SelectorID","upload","active","tiles","uploadOpts","Utils","uploadConfig","append","buttonTerritoriesClose","containerTerritoriesOptions","picto","territoriesPanel","territoriesPanelDiv","territoriesPanelMenuViewsDiv","territoriesEntriesDiv","territoriesPanelHeader","territoriesPanelIcon","territoriesPanelTitle","territoriesPanelOptions","territoriesCloseBtn","zoom","bbox","point","getView","getProjection","getCode","extent","olTransformExtentProj","fit","size","getSize","coord","olTransformProj","setCenter","setZoom","setCollapse","file","files","fReader","FileReader","onerror","onprogress","onloadstart","onabort","onloadend","onload","result","JSON","parse","error","readAsText","warn","closePanelUpLoad","removeTerritories","setTerritories","viewName","abs","s","c","imul","charCodeAt","getCenter","getZoom","toString","removeTerritory","TerritoriesDOM","Widget"],"ignoreList":[],"sourceRoot":""}