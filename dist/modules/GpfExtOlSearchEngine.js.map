{"version":3,"file":"GpfExtOlSearchEngine.js","mappings":"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ACA,GAEJ,MAAS,CACL,IACA,IACA,IACA,GAEJ,OAAU,CACN,IACA,IACA,IACA,GAEJ,MAAS,CACL,EACA,EACA,EACA,GAEJ,eAAkB,CACd,IACA,IACA,IACA,GAEJ,KAAQ,CACJ,EACA,EACA,IACA,GAEJ,WAAc,CACV,IACA,GACA,IACA,GAEJ,MAAS,CACL,IACA,GACA,GACA,GAEJ,UAAa,CACT,IACA,IACA,IACA,GAEJ,UAAa,CACT,GACA,IACA,IACA,GAEJ,WAAc,CACV,IACA,IACA,EACA,GAEJ,UAAa,CACT,IACA,IACA,GACA,GAEJ,MAAS,CACL,IACA,IACA,GACA,GAEJ,eAAkB,CACd,IACA,IACA,IACA,GAEJ,SAAY,CACR,IACA,IACA,IACA,GAEJ,QAAW,CACP,IACA,GACA,GACA,GAEJ,KAAQ,CACJ,EACA,IACA,IACA,GAEJ,SAAY,CACR,EACA,EACA,IACA,GAEJ,SAAY,CACR,EACA,IACA,IACA,GAEJ,cAAiB,CACb,IACA,IACA,GACA,GAEJ,SAAY,CACR,IACA,IACA,IACA,GAEJ,UAAa,CACT,EACA,IACA,EACA,GAEJ,SAAY,CACR,IACA,IACA,IACA,GAEJ,UAAa,CACT,IACA,IACA,IACA,GAEJ,YAAe,CACX,IACA,EACA,IACA,GAEJ,eAAkB,CACd,GACA,IACA,GACA,GAEJ,WAAc,CACV,IACA,IACA,EACA,GAEJ,WAAc,CACV,IACA,GACA,IACA,GAEJ,QAAW,CACP,IACA,EACA,EACA,GAEJ,WAAc,CACV,IACA,IACA,IACA,GAEJ,aAAgB,CACZ,IACA,IACA,IACA,GAEJ,cAAiB,CACb,GACA,GACA,IACA,GAEJ,cAAiB,CACb,GACA,GACA,GACA,GAEJ,cAAiB,CACb,GACA,GACA,GACA,GAEJ,cAAiB,CACb,EACA,IACA,IACA,GAEJ,WAAc,CACV,IACA,EACA,IACA,GAEJ,SAAY,CACR,IACA,GACA,IACA,GAEJ,YAAe,CACX,EACA,IACA,IACA,GAEJ,QAAW,CACP,IACA,IACA,IACA,GAEJ,QAAW,CACP,IACA,IACA,IACA,GAEJ,WAAc,CACV,GA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AQ,iEACR,MAAQ,iEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,kEACR,MAAQ,4HACR,MAAQ,uHACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,wEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAAQ,yEACR,MAA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","sources":["webpack://geopf-extensions-openlayers/external assign \"ol.layer.VectorTile\"","webpack://geopf-extensions-openlayers/external assign \"ol.source.VectorTile\"","webpack://geopf-extensions-openlayers/external assign \"ol.source.TileJSON\"","webpack://geopf-extensions-openlayers/external assign \"ol.format.MVT\"","webpack://geopf-extensions-openlayers/external assign \"ol.Observable\"","webpack://geopf-extensions-openlayers/external assign \"ol.style.Circle\"","webpack://geopf-extensions-openlayers/external assign \"ol.style.Fill\"","webpack://geopf-extensions-openlayers/external assign \"ol.style.Icon\"","webpack://geopf-extensions-openlayers/./node_modules/ol/transform.js","webpack://geopf-extensions-openlayers/./node_modules/ol/extent.js","webpack://geopf-extensions-openlayers/./node_modules/ol/math.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/simplify.js","webpack://geopf-extensions-openlayers/./node_modules/ol/array.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/contains.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/interiorpoint.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj/Units.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj/Projection.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj/epsg3857.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj/epsg4326.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj/projections.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj/transforms.js","webpack://geopf-extensions-openlayers/./node_modules/ol/proj.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/orient.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/interpolate.js","webpack://geopf-extensions-openlayers/./node_modules/ol/render/Feature.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/center.js","webpack://geopf-extensions-openlayers/./node_modules/ol/geom/flat/transform.js","webpack://geopf-extensions-openlayers/./node_modules/ol/functions.js","webpack://geopf-extensions-openlayers/external assign \"ol.style.Stroke\"","webpack://geopf-extensions-openlayers/external assign \"ol.style.Style\"","webpack://geopf-extensions-openlayers/external assign \"ol.style.Text\"","webpack://geopf-extensions-openlayers/external assign \"ol.functions\"","webpack://geopf-extensions-openlayers/external assign \"ol.render.canvas\"","webpack://geopf-extensions-openlayers/external assign \"ol.TileState\"","webpack://geopf-extensions-openlayers/external assign {\"commonjs\":\"ol\",\"commonjs2\":\"ol\",\"amd\":\"ol\",\"root\":\"ol\"}","webpack://geopf-extensions-openlayers/external assign \"ol.tileurlfunction\"","webpack://geopf-extensions-openlayers/external assign \"ol.util\"","webpack://geopf-extensions-openlayers/external assign \"ol.format.GeoJSON\"","webpack://geopf-extensions-openlayers/external assign \"ol.tilegrid.TileGrid\"","webpack://geopf-extensions-openlayers/external assign \"ol.layer.Image\"","webpack://geopf-extensions-openlayers/external assign \"ol.layer.Layer\"","webpack://geopf-extensions-openlayers/external assign \"ol.layer.Group\"","webpack://geopf-extensions-openlayers/external assign \"ol.Map\"","webpack://geopf-extensions-openlayers/external assign \"ol.source.Raster\"","webpack://geopf-extensions-openlayers/external assign \"ol.source.Source\"","webpack://geopf-extensions-openlayers/external assign \"ol.layer.Vector\"","webpack://geopf-extensions-openlayers/external assign \"ol.source.Vector\"","webpack://geopf-extensions-openlayers/external assign \"ol.proj.Units\"","webpack://geopf-extensions-openlayers/external assign \"ol.View\"","webpack://geopf-extensions-openlayers/external assign \"ol.loadingstrategy\"","webpack://geopf-extensions-openlayers/external assign \"ol.tilegrid\"","webpack://geopf-extensions-openlayers/external assign \"ol.events.Event\"","webpack://geopf-extensions-openlayers/./node_modules/ol-mapbox-style/dist/index.js","webpack://geopf-extensions-openlayers/./src/packages/Layers/LayerMapBox.js","webpack://geopf-extensions-openlayers/./src/packages/Layers/LayerWMS.js","webpack://geopf-extensions-openlayers/./src/packages/Layers/LayerWMTS.js","webpack://geopf-extensions-openlayers/external assign \"ol.source.TileWMS\"","webpack://geopf-extensions-openlayers/./src/packages/Layers/SourceWMS.js","webpack://geopf-extensions-openlayers/external assign \"ol.tilegrid.WMTS\"","webpack://geopf-extensions-openlayers/./src/packages/Utils/LayerUtils.js","webpack://geopf-extensions-openlayers/./src/packages/Layers/SourceWMTS.js","webpack://geopf-extensions-openlayers/./src/packages/Services/Search.js","webpack://geopf-extensions-openlayers/external assign \"ol.source.WMTS\"","webpack://geopf-extensions-openlayers/./src/packages/Sources/WMTS.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/Config.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/Helper.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/LoggerByDefault.js","webpack://geopf-extensions-openlayers/./node_modules/es6-promise/dist/es6-promise.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/node_modules/@xmldom/xmldom/lib/conventions.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/node_modules/@xmldom/xmldom/lib/dom-parser.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/node_modules/@xmldom/xmldom/lib/dom.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/node_modules/@xmldom/xmldom/lib/entities.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/node_modules/@xmldom/xmldom/lib/index.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/node_modules/@xmldom/xmldom/lib/sax.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Exceptions/ErrorService.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Formats/WPS.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Formats/XML.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Gp.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Protocols/JSONP.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Protocols/Protocol.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Protocols/XHR.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Alti.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Formats/AltiResponseReader.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestREST.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/AltiRequestWPS.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiElevationRequest.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiProfilRequest.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Request/model/AltiRequest.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/AltiResponseFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/AltiResponse.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/Elevation.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Alti/Response/model/Measure.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/AutoComplete.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/AutoCompleteResponseFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/AutoCompleteResponse.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/AutoComplete/Response/model/SuggestedLocation.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/CommonService.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Config/Config.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Config/ConfigInterface.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/DefaultUrlService.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Formats/GeocodeResponseParser.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Geocode.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Request/GeocodeRequestFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Request/GeocodeRequestREST.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Request/model/GeocodeParamREST.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Response/GeocodeResponseFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodeResponse.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/Response/model/GeocodedLocation.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Geocode/ReverseGeocode.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/ProcessIsoCurve.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/ProcessIsoCurveRequest.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Request/model/ProcessIsoCurveParam.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/ProcessIsoCurveResponseFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Request/RouteRequestREST.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Request/model/RouteParamREST.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Response/RouteResponseFactory.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteInstruction.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Response/model/RouteResponse.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Route/Route.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Services/Services.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Utils/Helper.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Utils/LoggerByDefault.js","webpack://geopf-extensions-openlayers/./node_modules/geoportal-access-lib/src/Utils/MessagesResources.js","webpack://geopf-extensions-openlayers/./node_modules/loglevel/lib/loglevel.js","webpack://geopf-extensions-openlayers/./node_modules/node-fetch/browser.js","webpack://geopf-extensions-openlayers/external assign \"ol.extent\"","webpack://geopf-extensions-openlayers/external assign \"ol.layer.Tile\"","webpack://geopf-extensions-openlayers/external assign \"ol.proj\"","webpack://geopf-extensions-openlayers/webpack/bootstrap","webpack://geopf-extensions-openlayers/webpack/runtime/compat get default export","webpack://geopf-extensions-openlayers/webpack/runtime/define property getters","webpack://geopf-extensions-openlayers/webpack/runtime/global","webpack://geopf-extensions-openlayers/webpack/runtime/hasOwnProperty shorthand","webpack://geopf-extensions-openlayers/external assign \"ol.control.Control\"","webpack://geopf-extensions-openlayers/./src/packages/Controls/Control.js","webpack://geopf-extensions-openlayers/external assign \"ol.Overlay\"","webpack://geopf-extensions-openlayers/./src/packages/Controls/Utils/Markers.js","webpack://geopf-extensions-openlayers/external assign \"ol.interaction\"","webpack://geopf-extensions-openlayers/./src/packages/Controls/Utils/Interactions.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/SelectorID.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/MathUtils.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/SearchEngineUtils.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/GeocodeUtils.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/constants/values.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/constants/PrimeMeridian.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/constants/units.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/match.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projString.js","webpack://geopf-extensions-openlayers/./node_modules/wkt-parser/parser.js","webpack://geopf-extensions-openlayers/./node_modules/wkt-parser/process.js","webpack://geopf-extensions-openlayers/./node_modules/wkt-parser/index.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/defs.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/global.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/parseCode.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/extend.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/msfnz.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/sign.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/adjust_lon.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/tsfnz.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/phi2z.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/longlat.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/merc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/constants/Ellipsoid.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/constants/Datum.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/datum.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/nadgrid.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/Proj.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/deriveConstants.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/datumUtils.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/datum_transform.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/adjust_axis.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/toPoint.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/checkSanity.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/transform.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/core.js","webpack://geopf-extensions-openlayers/./node_modules/mgrs/mgrs.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/Point.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/pj_enfn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/pj_mlfn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/pj_inv_mlfn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/tmerc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/sinh.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/hypot.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/asinhy.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/log1py.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/gatg.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/clens_cmplx.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/cosh.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/etmerc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/clens.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/utm.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/adjust_zone.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/srat.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/gauss.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/sterea.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/stere.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/somerc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/omerc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/lcc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/krovak.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/mlfn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/e0fn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/e1fn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/e2fn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/e3fn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/gN.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/adjust_lat.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/imlfn.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/cass.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/qsfnz.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/laea.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/asinz.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/aea.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/gnom.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/cea.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/common/iqsfnz.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/eqc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/poly.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/nzmg.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/mill.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/sinu.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/moll.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/eqdc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/vandg.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/aeqd.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/ortho.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/qsc.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/robin.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/geocent.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/tpers.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/geos.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/eqearth.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/projections/bonne.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/lib/index.js","webpack://geopf-extensions-openlayers/./node_modules/proj4/projs.js","webpack://geopf-extensions-openlayers/external assign \"ol.proj.transforms\"","webpack://geopf-extensions-openlayers/external assign \"ol.proj.Projection\"","webpack://geopf-extensions-openlayers/./src/packages/CRS/Proj4.js","webpack://geopf-extensions-openlayers/./src/packages/Utils/Register.js","webpack://geopf-extensions-openlayers/./src/packages/CRS/CRS.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/Utils/CheckDsfr.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/SearchEngine/SearchEngineDOM.js","webpack://geopf-extensions-openlayers/./src/packages/Controls/SearchEngine/SearchEngine.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.VectorTile;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.VectorTile;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.TileJSON;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.format.MVT;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.Observable;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.style.Circle;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.style.Fill;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.style.Icon;","/**\n * @module ol/transform\n */\nimport {WORKER_OFFSCREEN_CANVAS} from './has.js';\nimport {assert} from './asserts.js';\n\n/**\n * An array representing an affine 2d transformation for use with\n * {@link module:ol/transform} functions. The array has 6 elements.\n * @typedef {!Array<number>} Transform\n * @api\n */\n\n/**\n * Collection of affine 2d transformation functions. The functions work on an\n * array of 6 elements. The element order is compatible with the [SVGMatrix\n * interface](https://developer.mozilla.org/en-US/docs/Web/API/SVGMatrix) and is\n * a subset (elements a to f) of a 3×3 matrix:\n * ```\n * [ a c e ]\n * [ b d f ]\n * [ 0 0 1 ]\n * ```\n */\n\n/**\n * @private\n * @type {Transform}\n */\nconst tmp_ = new Array(6);\n\n/**\n * Create an identity transform.\n * @return {!Transform} Identity transform.\n */\nexport function create() {\n  return [1, 0, 0, 1, 0, 0];\n}\n\n/**\n * Resets the given transform to an identity transform.\n * @param {!Transform} transform Transform.\n * @return {!Transform} Transform.\n */\nexport function reset(transform) {\n  return set(transform, 1, 0, 0, 1, 0, 0);\n}\n\n/**\n * Multiply the underlying matrices of two transforms and return the result in\n * the first transform.\n * @param {!Transform} transform1 Transform parameters of matrix 1.\n * @param {!Transform} transform2 Transform parameters of matrix 2.\n * @return {!Transform} transform1 multiplied with transform2.\n */\nexport function multiply(transform1, transform2) {\n  const a1 = transform1[0];\n  const b1 = transform1[1];\n  const c1 = transform1[2];\n  const d1 = transform1[3];\n  const e1 = transform1[4];\n  const f1 = transform1[5];\n  const a2 = transform2[0];\n  const b2 = transform2[1];\n  const c2 = transform2[2];\n  const d2 = transform2[3];\n  const e2 = transform2[4];\n  const f2 = transform2[5];\n\n  transform1[0] = a1 * a2 + c1 * b2;\n  transform1[1] = b1 * a2 + d1 * b2;\n  transform1[2] = a1 * c2 + c1 * d2;\n  transform1[3] = b1 * c2 + d1 * d2;\n  transform1[4] = a1 * e2 + c1 * f2 + e1;\n  transform1[5] = b1 * e2 + d1 * f2 + f1;\n\n  return transform1;\n}\n\n/**\n * Set the transform components a-f on a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} a The a component of the transform.\n * @param {number} b The b component of the transform.\n * @param {number} c The c component of the transform.\n * @param {number} d The d component of the transform.\n * @param {number} e The e component of the transform.\n * @param {number} f The f component of the transform.\n * @return {!Transform} Matrix with transform applied.\n */\nexport function set(transform, a, b, c, d, e, f) {\n  transform[0] = a;\n  transform[1] = b;\n  transform[2] = c;\n  transform[3] = d;\n  transform[4] = e;\n  transform[5] = f;\n  return transform;\n}\n\n/**\n * Set transform on one matrix from another matrix.\n * @param {!Transform} transform1 Matrix to set transform to.\n * @param {!Transform} transform2 Matrix to set transform from.\n * @return {!Transform} transform1 with transform from transform2 applied.\n */\nexport function setFromArray(transform1, transform2) {\n  transform1[0] = transform2[0];\n  transform1[1] = transform2[1];\n  transform1[2] = transform2[2];\n  transform1[3] = transform2[3];\n  transform1[4] = transform2[4];\n  transform1[5] = transform2[5];\n  return transform1;\n}\n\n/**\n * Transforms the given coordinate with the given transform returning the\n * resulting, transformed coordinate. The coordinate will be modified in-place.\n *\n * @param {Transform} transform The transformation.\n * @param {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} coordinate The coordinate to transform.\n * @return {import(\"./coordinate.js\").Coordinate|import(\"./pixel.js\").Pixel} return coordinate so that operations can be\n *     chained together.\n */\nexport function apply(transform, coordinate) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  coordinate[0] = transform[0] * x + transform[2] * y + transform[4];\n  coordinate[1] = transform[1] * x + transform[3] * y + transform[5];\n  return coordinate;\n}\n\n/**\n * Applies rotation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} angle Angle in radians.\n * @return {!Transform} The rotated transform.\n */\nexport function rotate(transform, angle) {\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  return multiply(transform, set(tmp_, cos, sin, -sin, cos, 0, 0));\n}\n\n/**\n * Applies scale to a given transform.\n * @param {!Transform} transform Transform.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scaled transform.\n */\nexport function scale(transform, x, y) {\n  return multiply(transform, set(tmp_, x, 0, 0, y, 0, 0));\n}\n\n/**\n * Creates a scale transform.\n * @param {!Transform} target Transform to overwrite.\n * @param {number} x Scale factor x.\n * @param {number} y Scale factor y.\n * @return {!Transform} The scale transform.\n */\nexport function makeScale(target, x, y) {\n  return set(target, x, 0, 0, y, 0, 0);\n}\n\n/**\n * Applies translation to the given transform.\n * @param {!Transform} transform Transform.\n * @param {number} dx Translation x.\n * @param {number} dy Translation y.\n * @return {!Transform} The translated transform.\n */\nexport function translate(transform, dx, dy) {\n  return multiply(transform, set(tmp_, 1, 0, 0, 1, dx, dy));\n}\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative).\n * @param {!Transform} transform The transform (will be modified in place).\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {!Transform} The composite transform.\n */\nexport function compose(transform, dx1, dy1, sx, sy, angle, dx2, dy2) {\n  const sin = Math.sin(angle);\n  const cos = Math.cos(angle);\n  transform[0] = sx * cos;\n  transform[1] = sy * sin;\n  transform[2] = -sx * sin;\n  transform[3] = sy * cos;\n  transform[4] = dx2 * sx * cos - dy2 * sx * sin + dx1;\n  transform[5] = dx2 * sy * sin + dy2 * sy * cos + dy1;\n  return transform;\n}\n\n/**\n * Creates a composite transform given an initial translation, scale, rotation, and\n * final translation (in that order only, not commutative). The resulting transform\n * string can be applied as `transform` property of an HTMLElement's style.\n * @param {number} dx1 Initial translation x.\n * @param {number} dy1 Initial translation y.\n * @param {number} sx Scale factor x.\n * @param {number} sy Scale factor y.\n * @param {number} angle Rotation (in counter-clockwise radians).\n * @param {number} dx2 Final translation x.\n * @param {number} dy2 Final translation y.\n * @return {string} The composite css transform.\n * @api\n */\nexport function composeCssTransform(dx1, dy1, sx, sy, angle, dx2, dy2) {\n  return toString(compose(create(), dx1, dy1, sx, sy, angle, dx2, dy2));\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (source) transform.\n */\nexport function invert(source) {\n  return makeInverse(source, source);\n}\n\n/**\n * Invert the given transform.\n * @param {!Transform} target Transform to be set as the inverse of\n *     the source transform.\n * @param {!Transform} source The source transform to invert.\n * @return {!Transform} The inverted (target) transform.\n */\nexport function makeInverse(target, source) {\n  const det = determinant(source);\n  assert(det !== 0, 'Transformation matrix cannot be inverted');\n\n  const a = source[0];\n  const b = source[1];\n  const c = source[2];\n  const d = source[3];\n  const e = source[4];\n  const f = source[5];\n\n  target[0] = d / det;\n  target[1] = -b / det;\n  target[2] = -c / det;\n  target[3] = a / det;\n  target[4] = (c * f - d * e) / det;\n  target[5] = -(a * f - b * e) / det;\n\n  return target;\n}\n\n/**\n * Returns the determinant of the given matrix.\n * @param {!Transform} mat Matrix.\n * @return {number} Determinant.\n */\nexport function determinant(mat) {\n  return mat[0] * mat[3] - mat[1] * mat[2];\n}\n\n/**\n * @type {HTMLElement}\n * @private\n */\nlet transformStringDiv;\n\n/**\n * A rounded string version of the transform.  This can be used\n * for CSS transforms.\n * @param {!Transform} mat Matrix.\n * @return {string} The transform as a string.\n */\nexport function toString(mat) {\n  const transformString = 'matrix(' + mat.join(', ') + ')';\n  if (WORKER_OFFSCREEN_CANVAS) {\n    return transformString;\n  }\n  const node =\n    transformStringDiv || (transformStringDiv = document.createElement('div'));\n  node.style.transform = transformString;\n  return node.style.transform;\n}\n","/**\n * @module ol/extent\n */\nimport Relationship from './extent/Relationship.js';\n\n/**\n * An array of numbers representing an extent: `[minx, miny, maxx, maxy]`.\n * @typedef {Array<number>} Extent\n * @api\n */\n\n/**\n * Extent corner.\n * @typedef {'bottom-left' | 'bottom-right' | 'top-left' | 'top-right'} Corner\n */\n\n/**\n * Build an extent that includes all given coordinates.\n *\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Bounding extent.\n * @api\n */\nexport function boundingExtent(coordinates) {\n  const extent = createEmpty();\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Array<number>} xs Xs.\n * @param {Array<number>} ys Ys.\n * @param {Extent} [dest] Destination extent.\n * @private\n * @return {Extent} Extent.\n */\nfunction _boundingExtentXYs(xs, ys, dest) {\n  const minX = Math.min.apply(null, xs);\n  const minY = Math.min.apply(null, ys);\n  const maxX = Math.max.apply(null, xs);\n  const maxY = Math.max.apply(null, ys);\n  return createOrUpdate(minX, minY, maxX, maxY, dest);\n}\n\n/**\n * Return extent increased by the provided value.\n * @param {Extent} extent Extent.\n * @param {number} value The amount by which the extent should be buffered.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n * @api\n */\nexport function buffer(extent, value, dest) {\n  if (dest) {\n    dest[0] = extent[0] - value;\n    dest[1] = extent[1] - value;\n    dest[2] = extent[2] + value;\n    dest[3] = extent[3] + value;\n    return dest;\n  }\n  return [\n    extent[0] - value,\n    extent[1] - value,\n    extent[2] + value,\n    extent[3] + value,\n  ];\n}\n\n/**\n * Creates a clone of an extent.\n *\n * @param {Extent} extent Extent to clone.\n * @param {Extent} [dest] Extent.\n * @return {Extent} The clone.\n */\nexport function clone(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  }\n  return extent.slice();\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {number} Closest squared distance.\n */\nexport function closestSquaredDistanceXY(extent, x, y) {\n  let dx, dy;\n  if (x < extent[0]) {\n    dx = extent[0] - x;\n  } else if (extent[2] < x) {\n    dx = x - extent[2];\n  } else {\n    dx = 0;\n  }\n  if (y < extent[1]) {\n    dy = extent[1] - y;\n  } else if (extent[3] < y) {\n    dy = y - extent[3];\n  } else {\n    dy = 0;\n  }\n  return dx * dx + dy * dy;\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @return {boolean} The coordinate is contained in the extent.\n * @api\n */\nexport function containsCoordinate(extent, coordinate) {\n  return containsXY(extent, coordinate[0], coordinate[1]);\n}\n\n/**\n * Check if one extent contains another.\n *\n * An extent is deemed contained if it lies completely within the other extent,\n * including if they share one or more edges.\n *\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The second extent is contained by or on the edge of the\n *     first.\n * @api\n */\nexport function containsExtent(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[0] &&\n    extent2[2] <= extent1[2] &&\n    extent1[1] <= extent2[1] &&\n    extent2[3] <= extent1[3]\n  );\n}\n\n/**\n * Check if the passed coordinate is contained or on the edge of the extent.\n *\n * @param {Extent} extent Extent.\n * @param {number} x X coordinate.\n * @param {number} y Y coordinate.\n * @return {boolean} The x, y values are contained in the extent.\n * @api\n */\nexport function containsXY(extent, x, y) {\n  return extent[0] <= x && x <= extent[2] && extent[1] <= y && y <= extent[3];\n}\n\n/**\n * Get the relationship between a coordinate and extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate The coordinate.\n * @return {import(\"./extent/Relationship.js\").default} The relationship (bitwise compare with\n *     import(\"./extent/Relationship.js\").Relationship).\n */\nexport function coordinateRelationship(extent, coordinate) {\n  const minX = extent[0];\n  const minY = extent[1];\n  const maxX = extent[2];\n  const maxY = extent[3];\n  const x = coordinate[0];\n  const y = coordinate[1];\n  let relationship = Relationship.UNKNOWN;\n  if (x < minX) {\n    relationship = relationship | Relationship.LEFT;\n  } else if (x > maxX) {\n    relationship = relationship | Relationship.RIGHT;\n  }\n  if (y < minY) {\n    relationship = relationship | Relationship.BELOW;\n  } else if (y > maxY) {\n    relationship = relationship | Relationship.ABOVE;\n  }\n  if (relationship === Relationship.UNKNOWN) {\n    relationship = Relationship.INTERSECTING;\n  }\n  return relationship;\n}\n\n/**\n * Create an empty extent.\n * @return {Extent} Empty extent.\n * @api\n */\nexport function createEmpty() {\n  return [Infinity, Infinity, -Infinity, -Infinity];\n}\n\n/**\n * Create a new extent or update the provided extent.\n * @param {number} minX Minimum X.\n * @param {number} minY Minimum Y.\n * @param {number} maxX Maximum X.\n * @param {number} maxY Maximum Y.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdate(minX, minY, maxX, maxY, dest) {\n  if (dest) {\n    dest[0] = minX;\n    dest[1] = minY;\n    dest[2] = maxX;\n    dest[3] = maxY;\n    return dest;\n  }\n  return [minX, minY, maxX, maxY];\n}\n\n/**\n * Create a new empty extent or make the provided one empty.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateEmpty(dest) {\n  return createOrUpdate(Infinity, Infinity, -Infinity, -Infinity, dest);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinate(coordinate, dest) {\n  const x = coordinate[0];\n  const y = coordinate[1];\n  return createOrUpdate(x, y, x, y, dest);\n}\n\n/**\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromCoordinates(coordinates, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendCoordinates(extent, coordinates);\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromFlatCoordinates(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  dest\n) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendFlatCoordinates(extent, flatCoordinates, offset, end, stride);\n}\n\n/**\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function createOrUpdateFromRings(rings, dest) {\n  const extent = createOrUpdateEmpty(dest);\n  return extendRings(extent, rings);\n}\n\n/**\n * Determine if two extents are equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {boolean} The two extents are equivalent.\n * @api\n */\nexport function equals(extent1, extent2) {\n  return (\n    extent1[0] == extent2[0] &&\n    extent1[2] == extent2[2] &&\n    extent1[1] == extent2[1] &&\n    extent1[3] == extent2[3]\n  );\n}\n\n/**\n * Determine if two extents are approximately equivalent.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {number} tolerance Tolerance in extent coordinate units.\n * @return {boolean} The two extents differ by less than the tolerance.\n */\nexport function approximatelyEquals(extent1, extent2, tolerance) {\n  return (\n    Math.abs(extent1[0] - extent2[0]) < tolerance &&\n    Math.abs(extent1[2] - extent2[2]) < tolerance &&\n    Math.abs(extent1[1] - extent2[1]) < tolerance &&\n    Math.abs(extent1[3] - extent2[3]) < tolerance\n  );\n}\n\n/**\n * Modify an extent to include another extent.\n * @param {Extent} extent1 The extent to be modified.\n * @param {Extent} extent2 The extent that will be included in the first.\n * @return {Extent} A reference to the first (extended) extent.\n * @api\n */\nexport function extend(extent1, extent2) {\n  if (extent2[0] < extent1[0]) {\n    extent1[0] = extent2[0];\n  }\n  if (extent2[2] > extent1[2]) {\n    extent1[2] = extent2[2];\n  }\n  if (extent2[1] < extent1[1]) {\n    extent1[1] = extent2[1];\n  }\n  if (extent2[3] > extent1[3]) {\n    extent1[3] = extent2[3];\n  }\n  return extent1;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n */\nexport function extendCoordinate(extent, coordinate) {\n  if (coordinate[0] < extent[0]) {\n    extent[0] = coordinate[0];\n  }\n  if (coordinate[0] > extent[2]) {\n    extent[2] = coordinate[0];\n  }\n  if (coordinate[1] < extent[1]) {\n    extent[1] = coordinate[1];\n  }\n  if (coordinate[1] > extent[3]) {\n    extent[3] = coordinate[1];\n  }\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<import(\"./coordinate.js\").Coordinate>} coordinates Coordinates.\n * @return {Extent} Extent.\n */\nexport function extendCoordinates(extent, coordinates) {\n  for (let i = 0, ii = coordinates.length; i < ii; ++i) {\n    extendCoordinate(extent, coordinates[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {Extent} Extent.\n */\nexport function extendFlatCoordinates(\n  extent,\n  flatCoordinates,\n  offset,\n  end,\n  stride\n) {\n  for (; offset < end; offset += stride) {\n    extendXY(extent, flatCoordinates[offset], flatCoordinates[offset + 1]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Array<Array<import(\"./coordinate.js\").Coordinate>>} rings Rings.\n * @return {Extent} Extent.\n */\nexport function extendRings(extent, rings) {\n  for (let i = 0, ii = rings.length; i < ii; ++i) {\n    extendCoordinates(extent, rings[i]);\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} x X.\n * @param {number} y Y.\n */\nexport function extendXY(extent, x, y) {\n  extent[0] = Math.min(extent[0], x);\n  extent[1] = Math.min(extent[1], y);\n  extent[2] = Math.max(extent[2], x);\n  extent[3] = Math.max(extent[3], y);\n}\n\n/**\n * This function calls `callback` for each corner of the extent. If the\n * callback returns a truthy value the function returns that value\n * immediately. Otherwise the function returns `false`.\n * @param {Extent} extent Extent.\n * @param {function(import(\"./coordinate.js\").Coordinate): S} callback Callback.\n * @return {S|boolean} Value.\n * @template S\n */\nexport function forEachCorner(extent, callback) {\n  let val;\n  val = callback(getBottomLeft(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getBottomRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopRight(extent));\n  if (val) {\n    return val;\n  }\n  val = callback(getTopLeft(extent));\n  if (val) {\n    return val;\n  }\n  return false;\n}\n\n/**\n * Get the size of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Area.\n * @api\n */\nexport function getArea(extent) {\n  let area = 0;\n  if (!isEmpty(extent)) {\n    area = getWidth(extent) * getHeight(extent);\n  }\n  return area;\n}\n\n/**\n * Get the bottom left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom left coordinate.\n * @api\n */\nexport function getBottomLeft(extent) {\n  return [extent[0], extent[1]];\n}\n\n/**\n * Get the bottom right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Bottom right coordinate.\n * @api\n */\nexport function getBottomRight(extent) {\n  return [extent[2], extent[1]];\n}\n\n/**\n * Get the center coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Center.\n * @api\n */\nexport function getCenter(extent) {\n  return [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2];\n}\n\n/**\n * Get a corner coordinate of an extent.\n * @param {Extent} extent Extent.\n * @param {Corner} corner Corner.\n * @return {import(\"./coordinate.js\").Coordinate} Corner coordinate.\n */\nexport function getCorner(extent, corner) {\n  let coordinate;\n  if (corner === 'bottom-left') {\n    coordinate = getBottomLeft(extent);\n  } else if (corner === 'bottom-right') {\n    coordinate = getBottomRight(extent);\n  } else if (corner === 'top-left') {\n    coordinate = getTopLeft(extent);\n  } else if (corner === 'top-right') {\n    coordinate = getTopRight(extent);\n  } else {\n    throw new Error('Invalid corner');\n  }\n  return coordinate;\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Enlarged area.\n */\nexport function getEnlargedArea(extent1, extent2) {\n  const minX = Math.min(extent1[0], extent2[0]);\n  const minY = Math.min(extent1[1], extent2[1]);\n  const maxX = Math.max(extent1[2], extent2[2]);\n  const maxY = Math.max(extent1[3], extent2[3]);\n  return (maxX - minX) * (maxY - minY);\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @param {Extent} [dest] Destination extent.\n * @return {Extent} Extent.\n */\nexport function getForViewAndSize(center, resolution, rotation, size, dest) {\n  const [x0, y0, x1, y1, x2, y2, x3, y3] = getRotatedViewport(\n    center,\n    resolution,\n    rotation,\n    size\n  );\n  return createOrUpdate(\n    Math.min(x0, x1, x2, x3),\n    Math.min(y0, y1, y2, y3),\n    Math.max(x0, x1, x2, x3),\n    Math.max(y0, y1, y2, y3),\n    dest\n  );\n}\n\n/**\n * @param {import(\"./coordinate.js\").Coordinate} center Center.\n * @param {number} resolution Resolution.\n * @param {number} rotation Rotation.\n * @param {import(\"./size.js\").Size} size Size.\n * @return {Array<number>} Linear ring representing the viewport.\n */\nexport function getRotatedViewport(center, resolution, rotation, size) {\n  const dx = (resolution * size[0]) / 2;\n  const dy = (resolution * size[1]) / 2;\n  const cosRotation = Math.cos(rotation);\n  const sinRotation = Math.sin(rotation);\n  const xCos = dx * cosRotation;\n  const xSin = dx * sinRotation;\n  const yCos = dy * cosRotation;\n  const ySin = dy * sinRotation;\n  const x = center[0];\n  const y = center[1];\n  return [\n    x - xCos + ySin,\n    y - xSin - yCos,\n    x - xCos - ySin,\n    y - xSin + yCos,\n    x + xCos - ySin,\n    y + xSin + yCos,\n    x + xCos + ySin,\n    y + xSin - yCos,\n    x - xCos + ySin,\n    y - xSin - yCos,\n  ];\n}\n\n/**\n * Get the height of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Height.\n * @api\n */\nexport function getHeight(extent) {\n  return extent[3] - extent[1];\n}\n\n/**\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @return {number} Intersection area.\n */\nexport function getIntersectionArea(extent1, extent2) {\n  const intersection = getIntersection(extent1, extent2);\n  return getArea(intersection);\n}\n\n/**\n * Get the intersection of two extents.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent 2.\n * @param {Extent} [dest] Optional extent to populate with intersection.\n * @return {Extent} Intersecting extent.\n * @api\n */\nexport function getIntersection(extent1, extent2, dest) {\n  const intersection = dest ? dest : createEmpty();\n  if (intersects(extent1, extent2)) {\n    if (extent1[0] > extent2[0]) {\n      intersection[0] = extent1[0];\n    } else {\n      intersection[0] = extent2[0];\n    }\n    if (extent1[1] > extent2[1]) {\n      intersection[1] = extent1[1];\n    } else {\n      intersection[1] = extent2[1];\n    }\n    if (extent1[2] < extent2[2]) {\n      intersection[2] = extent1[2];\n    } else {\n      intersection[2] = extent2[2];\n    }\n    if (extent1[3] < extent2[3]) {\n      intersection[3] = extent1[3];\n    } else {\n      intersection[3] = extent2[3];\n    }\n  } else {\n    createOrUpdateEmpty(intersection);\n  }\n  return intersection;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @return {number} Margin.\n */\nexport function getMargin(extent) {\n  return getWidth(extent) + getHeight(extent);\n}\n\n/**\n * Get the size (width, height) of an extent.\n * @param {Extent} extent The extent.\n * @return {import(\"./size.js\").Size} The extent size.\n * @api\n */\nexport function getSize(extent) {\n  return [extent[2] - extent[0], extent[3] - extent[1]];\n}\n\n/**\n * Get the top left coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top left coordinate.\n * @api\n */\nexport function getTopLeft(extent) {\n  return [extent[0], extent[3]];\n}\n\n/**\n * Get the top right coordinate of an extent.\n * @param {Extent} extent Extent.\n * @return {import(\"./coordinate.js\").Coordinate} Top right coordinate.\n * @api\n */\nexport function getTopRight(extent) {\n  return [extent[2], extent[3]];\n}\n\n/**\n * Get the width of an extent.\n * @param {Extent} extent Extent.\n * @return {number} Width.\n * @api\n */\nexport function getWidth(extent) {\n  return extent[2] - extent[0];\n}\n\n/**\n * Determine if one extent intersects another.\n * @param {Extent} extent1 Extent 1.\n * @param {Extent} extent2 Extent.\n * @return {boolean} The two extents intersect.\n * @api\n */\nexport function intersects(extent1, extent2) {\n  return (\n    extent1[0] <= extent2[2] &&\n    extent1[2] >= extent2[0] &&\n    extent1[1] <= extent2[3] &&\n    extent1[3] >= extent2[1]\n  );\n}\n\n/**\n * Determine if an extent is empty.\n * @param {Extent} extent Extent.\n * @return {boolean} Is empty.\n * @api\n */\nexport function isEmpty(extent) {\n  return extent[2] < extent[0] || extent[3] < extent[1];\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {Extent} [dest] Extent.\n * @return {Extent} Extent.\n */\nexport function returnOrUpdate(extent, dest) {\n  if (dest) {\n    dest[0] = extent[0];\n    dest[1] = extent[1];\n    dest[2] = extent[2];\n    dest[3] = extent[3];\n    return dest;\n  }\n  return extent;\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number} value Value.\n */\nexport function scaleFromCenter(extent, value) {\n  const deltaX = ((extent[2] - extent[0]) / 2) * (value - 1);\n  const deltaY = ((extent[3] - extent[1]) / 2) * (value - 1);\n  extent[0] -= deltaX;\n  extent[2] += deltaX;\n  extent[1] -= deltaY;\n  extent[3] += deltaY;\n}\n\n/**\n * Determine if the segment between two coordinates intersects (crosses,\n * touches, or is contained by) the provided extent.\n * @param {Extent} extent The extent.\n * @param {import(\"./coordinate.js\").Coordinate} start Segment start coordinate.\n * @param {import(\"./coordinate.js\").Coordinate} end Segment end coordinate.\n * @return {boolean} The segment intersects the extent.\n */\nexport function intersectsSegment(extent, start, end) {\n  let intersects = false;\n  const startRel = coordinateRelationship(extent, start);\n  const endRel = coordinateRelationship(extent, end);\n  if (\n    startRel === Relationship.INTERSECTING ||\n    endRel === Relationship.INTERSECTING\n  ) {\n    intersects = true;\n  } else {\n    const minX = extent[0];\n    const minY = extent[1];\n    const maxX = extent[2];\n    const maxY = extent[3];\n    const startX = start[0];\n    const startY = start[1];\n    const endX = end[0];\n    const endY = end[1];\n    const slope = (endY - startY) / (endX - startX);\n    let x, y;\n    if (!!(endRel & Relationship.ABOVE) && !(startRel & Relationship.ABOVE)) {\n      // potentially intersects top\n      x = endX - (endY - maxY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.RIGHT) &&\n      !(startRel & Relationship.RIGHT)\n    ) {\n      // potentially intersects right\n      y = endY - (endX - maxX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.BELOW) &&\n      !(startRel & Relationship.BELOW)\n    ) {\n      // potentially intersects bottom\n      x = endX - (endY - minY) / slope;\n      intersects = x >= minX && x <= maxX;\n    }\n    if (\n      !intersects &&\n      !!(endRel & Relationship.LEFT) &&\n      !(startRel & Relationship.LEFT)\n    ) {\n      // potentially intersects left\n      y = endY - (endX - minX) * slope;\n      intersects = y >= minY && y <= maxY;\n    }\n  }\n  return intersects;\n}\n\n/**\n * Apply a transform function to the extent.\n * @param {Extent} extent Extent.\n * @param {import(\"./proj.js\").TransformFunction} transformFn Transform function.\n * Called with `[minX, minY, maxX, maxY]` extent coordinates.\n * @param {Extent} [dest] Destination extent.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {Extent} Extent.\n * @api\n */\nexport function applyTransform(extent, transformFn, dest, stops) {\n  if (isEmpty(extent)) {\n    return createOrUpdateEmpty(dest);\n  }\n  let coordinates = [];\n  if (stops > 1) {\n    const width = extent[2] - extent[0];\n    const height = extent[3] - extent[1];\n    for (let i = 0; i < stops; ++i) {\n      coordinates.push(\n        extent[0] + (width * i) / stops,\n        extent[1],\n        extent[2],\n        extent[1] + (height * i) / stops,\n        extent[2] - (width * i) / stops,\n        extent[3],\n        extent[0],\n        extent[3] - (height * i) / stops\n      );\n    }\n  } else {\n    coordinates = [\n      extent[0],\n      extent[1],\n      extent[2],\n      extent[1],\n      extent[2],\n      extent[3],\n      extent[0],\n      extent[3],\n    ];\n  }\n  transformFn(coordinates, coordinates, 2);\n  const xs = [];\n  const ys = [];\n  for (let i = 0, l = coordinates.length; i < l; i += 2) {\n    xs.push(coordinates[i]);\n    ys.push(coordinates[i + 1]);\n  }\n  return _boundingExtentXYs(xs, ys, dest);\n}\n\n/**\n * Modifies the provided extent in-place to be within the real world\n * extent.\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Extent} The extent within the real world extent.\n */\nexport function wrapX(extent, projection) {\n  const projectionExtent = projection.getExtent();\n  const center = getCenter(extent);\n  if (\n    projection.canWrapX() &&\n    (center[0] < projectionExtent[0] || center[0] >= projectionExtent[2])\n  ) {\n    const worldWidth = getWidth(projectionExtent);\n    const worldsAway = Math.floor(\n      (center[0] - projectionExtent[0]) / worldWidth\n    );\n    const offset = worldsAway * worldWidth;\n    extent[0] -= offset;\n    extent[2] -= offset;\n  }\n  return extent;\n}\n\n/**\n * Fits the extent to the real world\n *\n * If the extent does not cross the anti meridian, this will return the extent in an array\n * If the extent crosses the anti meridian, the extent will be sliced, so each part fits within the\n * real world\n *\n *\n * @param {Extent} extent Extent.\n * @param {import(\"./proj/Projection.js\").default} projection Projection\n * @return {Array<Extent>} The extent within the real world extent.\n */\nexport function wrapAndSliceX(extent, projection) {\n  if (projection.canWrapX()) {\n    const projectionExtent = projection.getExtent();\n\n    if (!isFinite(extent[0]) || !isFinite(extent[2])) {\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    }\n\n    wrapX(extent, projection);\n    const worldWidth = getWidth(projectionExtent);\n\n    if (getWidth(extent) > worldWidth) {\n      // the extent wraps around on itself\n      return [[projectionExtent[0], extent[1], projectionExtent[2], extent[3]]];\n    }\n    if (extent[0] < projectionExtent[0]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0] + worldWidth, extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2], extent[3]],\n      ];\n    }\n    if (extent[2] > projectionExtent[2]) {\n      // the extent crosses the anti meridian, so it needs to be sliced\n      return [\n        [extent[0], extent[1], projectionExtent[2], extent[3]],\n        [projectionExtent[0], extent[1], extent[2] - worldWidth, extent[3]],\n      ];\n    }\n  }\n\n  return [extent];\n}\n","/**\n * @module ol/math\n */\n\n/**\n * Takes a number and clamps it to within the provided bounds.\n * @param {number} value The input number.\n * @param {number} min The minimum value to return.\n * @param {number} max The maximum value to return.\n * @return {number} The input number if it is within bounds, or the nearest\n *     number within the bounds.\n */\nexport function clamp(value, min, max) {\n  return Math.min(Math.max(value, min), max);\n}\n\n/**\n * Returns the square of the closest distance between the point (x, y) and the\n * line segment (x1, y1) to (x2, y2).\n * @param {number} x X.\n * @param {number} y Y.\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredSegmentDistance(x, y, x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  if (dx !== 0 || dy !== 0) {\n    const t = ((x - x1) * dx + (y - y1) * dy) / (dx * dx + dy * dy);\n    if (t > 1) {\n      x1 = x2;\n      y1 = y2;\n    } else if (t > 0) {\n      x1 += dx * t;\n      y1 += dy * t;\n    }\n  }\n  return squaredDistance(x, y, x1, y1);\n}\n\n/**\n * Returns the square of the distance between the points (x1, y1) and (x2, y2).\n * @param {number} x1 X1.\n * @param {number} y1 Y1.\n * @param {number} x2 X2.\n * @param {number} y2 Y2.\n * @return {number} Squared distance.\n */\nexport function squaredDistance(x1, y1, x2, y2) {\n  const dx = x2 - x1;\n  const dy = y2 - y1;\n  return dx * dx + dy * dy;\n}\n\n/**\n * Solves system of linear equations using Gaussian elimination method.\n *\n * @param {Array<Array<number>>} mat Augmented matrix (n x n + 1 column)\n *                                     in row-major order.\n * @return {Array<number>|null} The resulting vector.\n */\nexport function solveLinearSystem(mat) {\n  const n = mat.length;\n\n  for (let i = 0; i < n; i++) {\n    // Find max in the i-th column (ignoring i - 1 first rows)\n    let maxRow = i;\n    let maxEl = Math.abs(mat[i][i]);\n    for (let r = i + 1; r < n; r++) {\n      const absValue = Math.abs(mat[r][i]);\n      if (absValue > maxEl) {\n        maxEl = absValue;\n        maxRow = r;\n      }\n    }\n\n    if (maxEl === 0) {\n      return null; // matrix is singular\n    }\n\n    // Swap max row with i-th (current) row\n    const tmp = mat[maxRow];\n    mat[maxRow] = mat[i];\n    mat[i] = tmp;\n\n    // Subtract the i-th row to make all the remaining rows 0 in the i-th column\n    for (let j = i + 1; j < n; j++) {\n      const coef = -mat[j][i] / mat[i][i];\n      for (let k = i; k < n + 1; k++) {\n        if (i == k) {\n          mat[j][k] = 0;\n        } else {\n          mat[j][k] += coef * mat[i][k];\n        }\n      }\n    }\n  }\n\n  // Solve Ax=b for upper triangular matrix A (mat)\n  const x = new Array(n);\n  for (let l = n - 1; l >= 0; l--) {\n    x[l] = mat[l][n] / mat[l][l];\n    for (let m = l - 1; m >= 0; m--) {\n      mat[m][n] -= mat[m][l] * x[l];\n    }\n  }\n  return x;\n}\n\n/**\n * Converts radians to to degrees.\n *\n * @param {number} angleInRadians Angle in radians.\n * @return {number} Angle in degrees.\n */\nexport function toDegrees(angleInRadians) {\n  return (angleInRadians * 180) / Math.PI;\n}\n\n/**\n * Converts degrees to radians.\n *\n * @param {number} angleInDegrees Angle in degrees.\n * @return {number} Angle in radians.\n */\nexport function toRadians(angleInDegrees) {\n  return (angleInDegrees * Math.PI) / 180;\n}\n\n/**\n * Returns the modulo of a / b, depending on the sign of b.\n *\n * @param {number} a Dividend.\n * @param {number} b Divisor.\n * @return {number} Modulo.\n */\nexport function modulo(a, b) {\n  const r = a % b;\n  return r * b < 0 ? r + b : r;\n}\n\n/**\n * Calculates the linearly interpolated value of x between a and b.\n *\n * @param {number} a Number\n * @param {number} b Number\n * @param {number} x Value to be interpolated.\n * @return {number} Interpolated value.\n */\nexport function lerp(a, b, x) {\n  return a + x * (b - a);\n}\n\n/**\n * Returns a number with a limited number of decimal digits.\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The input number with a limited number of decimal digits.\n */\nexport function toFixed(n, decimals) {\n  const factor = Math.pow(10, decimals);\n  return Math.round(n * factor) / factor;\n}\n\n/**\n * Rounds a number to the nearest integer value considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The nearest integer.\n */\nexport function round(n, decimals) {\n  return Math.round(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next smaller integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next smaller integer.\n */\nexport function floor(n, decimals) {\n  return Math.floor(toFixed(n, decimals));\n}\n\n/**\n * Rounds a number to the next bigger integer considering only the given number\n * of decimal digits (with rounding on the final digit).\n * @param {number} n The input number.\n * @param {number} decimals The maximum number of decimal digits.\n * @return {number} The next bigger integer.\n */\nexport function ceil(n, decimals) {\n  return Math.ceil(toFixed(n, decimals));\n}\n","/**\n * @module ol/geom/flat/simplify\n */\n// Based on simplify-js https://github.com/mourner/simplify-js\n// Copyright (c) 2012, Vladimir Agafonkin\n// All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are met:\n//\n//    1. Redistributions of source code must retain the above copyright notice,\n//       this list of conditions and the following disclaimer.\n//\n//    2. Redistributions in binary form must reproduce the above copyright\n//       notice, this list of conditions and the following disclaimer in the\n//       documentation and/or other materials provided with the distribution.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\"\n// AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE\n// ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE\n// LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR\n// CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF\n// SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS\n// INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\n// CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)\n// ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE\n// POSSIBILITY OF SUCH DAMAGE.\n\nimport {squaredDistance, squaredSegmentDistance} from '../../math.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {boolean} highQuality Highest quality.\n * @param {Array<number>} [simplifiedFlatCoordinates] Simplified flat\n *     coordinates.\n * @return {Array<number>} Simplified line string.\n */\nexport function simplifyLineString(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  highQuality,\n  simplifiedFlatCoordinates\n) {\n  simplifiedFlatCoordinates =\n    simplifiedFlatCoordinates !== undefined ? simplifiedFlatCoordinates : [];\n  if (!highQuality) {\n    end = radialDistance(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      0\n    );\n    flatCoordinates = simplifiedFlatCoordinates;\n    offset = 0;\n    stride = 2;\n  }\n  simplifiedFlatCoordinates.length = douglasPeucker(\n    flatCoordinates,\n    offset,\n    end,\n    stride,\n    squaredTolerance,\n    simplifiedFlatCoordinates,\n    0\n  );\n  return simplifiedFlatCoordinates;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function douglasPeucker(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  const n = (end - offset) / stride;\n  if (n < 3) {\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  /** @type {Array<number>} */\n  const markers = new Array(n);\n  markers[0] = 1;\n  markers[n - 1] = 1;\n  /** @type {Array<number>} */\n  const stack = [offset, end - stride];\n  let index = 0;\n  while (stack.length > 0) {\n    const last = stack.pop();\n    const first = stack.pop();\n    let maxSquaredDistance = 0;\n    const x1 = flatCoordinates[first];\n    const y1 = flatCoordinates[first + 1];\n    const x2 = flatCoordinates[last];\n    const y2 = flatCoordinates[last + 1];\n    for (let i = first + stride; i < last; i += stride) {\n      const x = flatCoordinates[i];\n      const y = flatCoordinates[i + 1];\n      const squaredDistance = squaredSegmentDistance(x, y, x1, y1, x2, y2);\n      if (squaredDistance > maxSquaredDistance) {\n        index = i;\n        maxSquaredDistance = squaredDistance;\n      }\n    }\n    if (maxSquaredDistance > squaredTolerance) {\n      markers[(index - offset) / stride] = 1;\n      if (first + stride < index) {\n        stack.push(first, index);\n      }\n      if (index + stride < last) {\n        stack.push(index, last);\n      }\n    }\n  }\n  for (let i = 0; i < n; ++i) {\n    if (markers[i]) {\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + i * stride];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + i * stride + 1];\n    }\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEnds\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = douglasPeucker(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset\n    );\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function douglasPeuckerMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEndss\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    /** @type {Array<number>} */\n    const simplifiedEnds = [];\n    simplifiedOffset = douglasPeuckerArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      squaredTolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset,\n      simplifiedEnds\n    );\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} squaredTolerance Squared tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function radialDistance(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  squaredTolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  if (end <= offset + stride) {\n    // zero or one point, no simplification possible, so copy and return\n    for (; offset < end; offset += stride) {\n      simplifiedFlatCoordinates[simplifiedOffset++] = flatCoordinates[offset];\n      simplifiedFlatCoordinates[simplifiedOffset++] =\n        flatCoordinates[offset + 1];\n    }\n    return simplifiedOffset;\n  }\n  let x1 = flatCoordinates[offset];\n  let y1 = flatCoordinates[offset + 1];\n  // copy first point\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  let x2 = x1;\n  let y2 = y1;\n  for (offset += stride; offset < end; offset += stride) {\n    x2 = flatCoordinates[offset];\n    y2 = flatCoordinates[offset + 1];\n    if (squaredDistance(x1, y1, x2, y2) > squaredTolerance) {\n      // copy point at offset\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  if (x2 != x1 || y2 != y1) {\n    // copy last point\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {number} value Value.\n * @param {number} tolerance Tolerance.\n * @return {number} Rounded value.\n */\nexport function snap(value, tolerance) {\n  return tolerance * Math.round(value / tolerance);\n}\n\n/**\n * Simplifies a line string using an algorithm designed by Tim Schaub.\n * Coordinates are snapped to the nearest value in a virtual grid and\n * consecutive duplicate coordinates are discarded.  This effectively preserves\n * topology as the simplification of any subsection of a line string is\n * independent of the rest of the line string.  This means that, for examples,\n * the common edge between two polygons will be simplified to the same line\n * string independently in both polygons.  This implementation uses a single\n * pass over the coordinates and eliminates intermediate collinear points.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @return {number} Simplified offset.\n */\nexport function quantize(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset\n) {\n  // do nothing if the line is empty\n  if (offset == end) {\n    return simplifiedOffset;\n  }\n  // snap the first coordinate (P1)\n  let x1 = snap(flatCoordinates[offset], tolerance);\n  let y1 = snap(flatCoordinates[offset + 1], tolerance);\n  offset += stride;\n  // add the first coordinate to the output\n  simplifiedFlatCoordinates[simplifiedOffset++] = x1;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y1;\n  // find the next coordinate that does not snap to the same value as the first\n  // coordinate (P2)\n  let x2, y2;\n  do {\n    x2 = snap(flatCoordinates[offset], tolerance);\n    y2 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    if (offset == end) {\n      // all coordinates snap to the same value, the line collapses to a point\n      // push the last snapped value anyway to ensure that the output contains\n      // at least two points\n      // FIXME should we really return at least two points anyway?\n      simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n      simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n      return simplifiedOffset;\n    }\n  } while (x2 == x1 && y2 == y1);\n  while (offset < end) {\n    // snap the next coordinate (P3)\n    const x3 = snap(flatCoordinates[offset], tolerance);\n    const y3 = snap(flatCoordinates[offset + 1], tolerance);\n    offset += stride;\n    // skip P3 if it is equal to P2\n    if (x3 == x2 && y3 == y2) {\n      continue;\n    }\n    // calculate the delta between P1 and P2\n    const dx1 = x2 - x1;\n    const dy1 = y2 - y1;\n    // calculate the delta between P3 and P1\n    const dx2 = x3 - x1;\n    const dy2 = y3 - y1;\n    // if P1, P2, and P3 are colinear and P3 is further from P1 than P2 is from\n    // P1 in the same direction then P2 is on the straight line between P1 and\n    // P3\n    if (\n      dx1 * dy2 == dy1 * dx2 &&\n      ((dx1 < 0 && dx2 < dx1) || dx1 == dx2 || (dx1 > 0 && dx2 > dx1)) &&\n      ((dy1 < 0 && dy2 < dy1) || dy1 == dy2 || (dy1 > 0 && dy2 > dy1))\n    ) {\n      // discard P2 and set P2 = P3\n      x2 = x3;\n      y2 = y3;\n      continue;\n    }\n    // either P1, P2, and P3 are not colinear, or they are colinear but P3 is\n    // between P3 and P1 or on the opposite half of the line to P2.  add P2,\n    // and continue with P1 = P2 and P2 = P3\n    simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n    simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n    x1 = x2;\n    y1 = y2;\n    x2 = x3;\n    y2 = y3;\n  }\n  // add the last point (P2)\n  simplifiedFlatCoordinates[simplifiedOffset++] = x2;\n  simplifiedFlatCoordinates[simplifiedOffset++] = y2;\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<number>} simplifiedEnds Simplified ends.\n * @return {number} Simplified offset.\n */\nexport function quantizeArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEnds\n) {\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    simplifiedOffset = quantize(\n      flatCoordinates,\n      offset,\n      end,\n      stride,\n      tolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset\n    );\n    simplifiedEnds.push(simplifiedOffset);\n    offset = end;\n  }\n  return simplifiedOffset;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} tolerance Tolerance.\n * @param {Array<number>} simplifiedFlatCoordinates Simplified flat\n *     coordinates.\n * @param {number} simplifiedOffset Simplified offset.\n * @param {Array<Array<number>>} simplifiedEndss Simplified endss.\n * @return {number} Simplified offset.\n */\nexport function quantizeMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  tolerance,\n  simplifiedFlatCoordinates,\n  simplifiedOffset,\n  simplifiedEndss\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    /** @type {Array<number>} */\n    const simplifiedEnds = [];\n    simplifiedOffset = quantizeArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      tolerance,\n      simplifiedFlatCoordinates,\n      simplifiedOffset,\n      simplifiedEnds\n    );\n    simplifiedEndss.push(simplifiedEnds);\n    offset = ends[ends.length - 1];\n  }\n  return simplifiedOffset;\n}\n","/**\n * @module ol/array\n */\n\n/**\n * Performs a binary search on the provided sorted list and returns the index of the item if found. If it can't be found it'll return -1.\n * https://github.com/darkskyapp/binary-search\n *\n * @param {Array<*>} haystack Items to search through.\n * @param {*} needle The item to look for.\n * @param {Function} [comparator] Comparator function.\n * @return {number} The index of the item if found, -1 if not.\n */\nexport function binarySearch(haystack, needle, comparator) {\n  let mid, cmp;\n  comparator = comparator || ascending;\n  let low = 0;\n  let high = haystack.length;\n  let found = false;\n\n  while (low < high) {\n    /* Note that \"(low + high) >>> 1\" may overflow, and results in a typecast\n     * to double (which gives the wrong results). */\n    mid = low + ((high - low) >> 1);\n    cmp = +comparator(haystack[mid], needle);\n\n    if (cmp < 0.0) {\n      /* Too low. */\n      low = mid + 1;\n    } else {\n      /* Key found or too high */\n      high = mid;\n      found = !cmp;\n    }\n  }\n\n  /* Key not found. */\n  return found ? low : ~low;\n}\n\n/**\n * Compare function sorting arrays in ascending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is less than, equal to, or greater than the second.\n */\nexport function ascending(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\n/**\n * Compare function sorting arrays in descending order.  Safe to use for numeric values.\n * @param {*} a The first object to be compared.\n * @param {*} b The second object to be compared.\n * @return {number} A negative number, zero, or a positive number as the first\n *     argument is greater than, equal to, or less than the second.\n */\nexport function descending(a, b) {\n  return a < b ? 1 : a > b ? -1 : 0;\n}\n\n/**\n * {@link module:ol/tilegrid/TileGrid~TileGrid#getZForResolution} can use a function\n * of this type to determine which nearest resolution to use.\n *\n * This function takes a `{number}` representing a value between two array entries,\n * a `{number}` representing the value of the nearest higher entry and\n * a `{number}` representing the value of the nearest lower entry\n * as arguments and returns a `{number}`. If a negative number or zero is returned\n * the lower value will be used, if a positive number is returned the higher value\n * will be used.\n * @typedef {function(number, number, number): number} NearestDirectionFunction\n * @api\n */\n\n/**\n * @param {Array<number>} arr Array in descending order.\n * @param {number} target Target.\n * @param {number|NearestDirectionFunction} direction\n *    0 means return the nearest,\n *    > 0 means return the largest nearest,\n *    < 0 means return the smallest nearest.\n * @return {number} Index.\n */\nexport function linearFindNearest(arr, target, direction) {\n  if (arr[0] <= target) {\n    return 0;\n  }\n\n  const n = arr.length;\n  if (target <= arr[n - 1]) {\n    return n - 1;\n  }\n\n  if (typeof direction === 'function') {\n    for (let i = 1; i < n; ++i) {\n      const candidate = arr[i];\n      if (candidate === target) {\n        return i;\n      }\n      if (candidate < target) {\n        if (direction(target, arr[i - 1], candidate) > 0) {\n          return i - 1;\n        }\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction > 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] < target) {\n        return i - 1;\n      }\n    }\n    return n - 1;\n  }\n\n  if (direction < 0) {\n    for (let i = 1; i < n; ++i) {\n      if (arr[i] <= target) {\n        return i;\n      }\n    }\n    return n - 1;\n  }\n\n  for (let i = 1; i < n; ++i) {\n    if (arr[i] == target) {\n      return i;\n    }\n    if (arr[i] < target) {\n      if (arr[i - 1] - target < target - arr[i]) {\n        return i - 1;\n      }\n      return i;\n    }\n  }\n  return n - 1;\n}\n\n/**\n * @param {Array<*>} arr Array.\n * @param {number} begin Begin index.\n * @param {number} end End index.\n */\nexport function reverseSubArray(arr, begin, end) {\n  while (begin < end) {\n    const tmp = arr[begin];\n    arr[begin] = arr[end];\n    arr[end] = tmp;\n    ++begin;\n    --end;\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {!Array<VALUE>|VALUE} data The elements or arrays of elements to add to arr.\n * @template VALUE\n */\nexport function extend(arr, data) {\n  const extension = Array.isArray(data) ? data : [data];\n  const length = extension.length;\n  for (let i = 0; i < length; i++) {\n    arr[arr.length] = extension[i];\n  }\n}\n\n/**\n * @param {Array<VALUE>} arr The array to modify.\n * @param {VALUE} obj The element to remove.\n * @template VALUE\n * @return {boolean} If the element was removed.\n */\nexport function remove(arr, obj) {\n  const i = arr.indexOf(obj);\n  const found = i > -1;\n  if (found) {\n    arr.splice(i, 1);\n  }\n  return found;\n}\n\n/**\n * @param {Array<any>|Uint8ClampedArray} arr1 The first array to compare.\n * @param {Array<any>|Uint8ClampedArray} arr2 The second array to compare.\n * @return {boolean} Whether the two arrays are equal.\n */\nexport function equals(arr1, arr2) {\n  const len1 = arr1.length;\n  if (len1 !== arr2.length) {\n    return false;\n  }\n  for (let i = 0; i < len1; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * Sort the passed array such that the relative order of equal elements is preserved.\n * See https://en.wikipedia.org/wiki/Sorting_algorithm#Stability for details.\n * @param {Array<*>} arr The array to sort (modifies original).\n * @param {!function(*, *): number} compareFnc Comparison function.\n * @api\n */\nexport function stableSort(arr, compareFnc) {\n  const length = arr.length;\n  const tmp = Array(arr.length);\n  let i;\n  for (i = 0; i < length; i++) {\n    tmp[i] = {index: i, value: arr[i]};\n  }\n  tmp.sort(function (a, b) {\n    return compareFnc(a.value, b.value) || a.index - b.index;\n  });\n  for (i = 0; i < arr.length; i++) {\n    arr[i] = tmp[i].value;\n  }\n}\n\n/**\n * @param {Array<*>} arr The array to test.\n * @param {Function} [func] Comparison function.\n * @param {boolean} [strict] Strictly sorted (default false).\n * @return {boolean} Return index.\n */\nexport function isSorted(arr, func, strict) {\n  const compare = func || ascending;\n  return arr.every(function (currentVal, index) {\n    if (index === 0) {\n      return true;\n    }\n    const res = compare(arr[index - 1], currentVal);\n    return !(res > 0 || (strict && res === 0));\n  });\n}\n","/**\n * @module ol/geom/flat/contains\n */\nimport {forEachCorner} from '../../extent.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../extent.js\").Extent} extent Extent.\n * @return {boolean} Contains extent.\n */\nexport function linearRingContainsExtent(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  extent\n) {\n  const outside = forEachCorner(\n    extent,\n    /**\n     * @param {import(\"../../coordinate.js\").Coordinate} coordinate Coordinate.\n     * @return {boolean} Contains (x, y).\n     */\n    function (coordinate) {\n      return !linearRingContainsXY(\n        flatCoordinates,\n        offset,\n        end,\n        stride,\n        coordinate[0],\n        coordinate[1]\n      );\n    }\n  );\n  return !outside;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingContainsXY(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  x,\n  y\n) {\n  // https://geomalgorithms.com/a03-_inclusion.html\n  // Copyright 2000 softSurfer, 2012 Dan Sunday\n  // This code may be freely used and modified for any purpose\n  // providing that this copyright notice is included with it.\n  // SoftSurfer makes no warranty for this code, and cannot be held\n  // liable for any real or imagined damage resulting from its use.\n  // Users of this code must verify correctness for their application.\n  let wn = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    if (y1 <= y) {\n      if (y2 > y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) > 0) {\n        wn++;\n      }\n    } else if (y2 <= y && (x2 - x1) * (y - y1) - (x - x1) * (y2 - y1) < 0) {\n      wn--;\n    }\n    x1 = x2;\n    y1 = y2;\n  }\n  return wn !== 0;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingsContainsXY(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  x,\n  y\n) {\n  if (ends.length === 0) {\n    return false;\n  }\n  if (!linearRingContainsXY(flatCoordinates, offset, ends[0], stride, x, y)) {\n    return false;\n  }\n  for (let i = 1, ii = ends.length; i < ii; ++i) {\n    if (\n      linearRingContainsXY(flatCoordinates, ends[i - 1], ends[i], stride, x, y)\n    ) {\n      return false;\n    }\n  }\n  return true;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {number} x X.\n * @param {number} y Y.\n * @return {boolean} Contains (x, y).\n */\nexport function linearRingssContainsXY(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  x,\n  y\n) {\n  if (endss.length === 0) {\n    return false;\n  }\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n      return true;\n    }\n    offset = ends[ends.length - 1];\n  }\n  return false;\n}\n","/**\n * @module ol/geom/flat/interiorpoint\n */\nimport {ascending} from '../../array.js';\nimport {linearRingsContainsXY} from './contains.js';\n\n/**\n * Calculates a point that is likely to lie in the interior of the linear rings.\n * Inspired by JTS's com.vividsolutions.jts.geom.Geometry#getInteriorPoint.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @param {number} flatCentersOffset Flat center offset.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Destination point as XYM coordinate, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointOfArray(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  flatCenters,\n  flatCentersOffset,\n  dest\n) {\n  let i, ii, x, x1, x2, y1, y2;\n  const y = flatCenters[flatCentersOffset + 1];\n  /** @type {Array<number>} */\n  const intersections = [];\n  // Calculate intersections with the horizontal line\n  for (let r = 0, rr = ends.length; r < rr; ++r) {\n    const end = ends[r];\n    x1 = flatCoordinates[end - stride];\n    y1 = flatCoordinates[end - stride + 1];\n    for (i = offset; i < end; i += stride) {\n      x2 = flatCoordinates[i];\n      y2 = flatCoordinates[i + 1];\n      if ((y <= y1 && y2 <= y) || (y1 <= y && y <= y2)) {\n        x = ((y - y1) / (y2 - y1)) * (x2 - x1) + x1;\n        intersections.push(x);\n      }\n      x1 = x2;\n      y1 = y2;\n    }\n  }\n  // Find the longest segment of the horizontal line that has its center point\n  // inside the linear ring.\n  let pointX = NaN;\n  let maxSegmentLength = -Infinity;\n  intersections.sort(ascending);\n  x1 = intersections[0];\n  for (i = 1, ii = intersections.length; i < ii; ++i) {\n    x2 = intersections[i];\n    const segmentLength = Math.abs(x2 - x1);\n    if (segmentLength > maxSegmentLength) {\n      x = (x1 + x2) / 2;\n      if (linearRingsContainsXY(flatCoordinates, offset, ends, stride, x, y)) {\n        pointX = x;\n        maxSegmentLength = segmentLength;\n      }\n    }\n    x1 = x2;\n  }\n  if (isNaN(pointX)) {\n    // There is no horizontal line that has its center point inside the linear\n    // ring.  Use the center of the the linear ring's extent.\n    pointX = flatCenters[flatCentersOffset];\n  }\n  if (dest) {\n    dest.push(pointX, y, maxSegmentLength);\n    return dest;\n  }\n  return [pointX, y, maxSegmentLength];\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @param {Array<number>} flatCenters Flat centers.\n * @return {Array<number>} Interior points as XYM coordinates, where M is the\n * length of the horizontal intersection that the point belongs to.\n */\nexport function getInteriorPointsOfMultiArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  flatCenters\n) {\n  /** @type {Array<number>} */\n  let interiorPoints = [];\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    interiorPoints = getInteriorPointOfArray(\n      flatCoordinates,\n      offset,\n      ends,\n      stride,\n      flatCenters,\n      2 * i,\n      interiorPoints\n    );\n    offset = ends[ends.length - 1];\n  }\n  return interiorPoints;\n}\n","/**\n * @module ol/proj/Units\n */\n\n/**\n * @typedef {'radians' | 'degrees' | 'ft' | 'm' | 'pixels' | 'tile-pixels' | 'us-ft'} Units\n * Projection units.\n */\n\n/**\n * See http://duff.ess.washington.edu/data/raster/drg/docs/geotiff.txt\n * @type {Object<number, Units>}\n */\nconst unitByCode = {\n  '9001': 'm',\n  '9002': 'ft',\n  '9003': 'us-ft',\n  '9101': 'radians',\n  '9102': 'degrees',\n};\n\n/**\n * @param {number} code Unit code.\n * @return {Units} Units.\n */\nexport function fromCode(code) {\n  return unitByCode[code];\n}\n\n/**\n * @typedef {Object} MetersPerUnitLookup\n * @property {number} radians Radians\n * @property {number} degrees Degrees\n * @property {number} ft  Feet\n * @property {number} m Meters\n * @property {number} us-ft US feet\n */\n\n/**\n * Meters per unit lookup table.\n * @const\n * @type {MetersPerUnitLookup}\n * @api\n */\nexport const METERS_PER_UNIT = {\n  // use the radius of the Normal sphere\n  'radians': 6370997 / (2 * Math.PI),\n  'degrees': (2 * Math.PI * 6370997) / 360,\n  'ft': 0.3048,\n  'm': 1,\n  'us-ft': 1200 / 3937,\n};\n","/**\n * @module ol/proj/Projection\n */\nimport {METERS_PER_UNIT} from './Units.js';\n\n/**\n * @typedef {Object} Options\n * @property {string} code The SRS identifier code, e.g. `EPSG:4326`.\n * @property {import(\"./Units.js\").Units} [units] Units. Required unless a\n * proj4 projection is defined for `code`.\n * @property {import(\"../extent.js\").Extent} [extent] The validity extent for the SRS.\n * @property {string} [axisOrientation='enu'] The axis orientation as specified in Proj4.\n * @property {boolean} [global=false] Whether the projection is valid for the whole globe.\n * @property {number} [metersPerUnit] The meters per unit for the SRS.\n * If not provided, the `units` are used to get the meters per unit from the {@link METERS_PER_UNIT}\n * lookup table.\n * @property {import(\"../extent.js\").Extent} [worldExtent] The world extent for the SRS.\n * @property {function(number, import(\"../coordinate.js\").Coordinate):number} [getPointResolution]\n * Function to determine resolution at a point. The function is called with a\n * `number` view resolution and a {@link module:ol/coordinate~Coordinate} as arguments, and returns\n * the `number` resolution in projection units at the passed coordinate. If this is `undefined`,\n * the default {@link module:ol/proj.getPointResolution} function will be used.\n */\n\n/**\n * @classdesc\n * Projection definition class. One of these is created for each projection\n * supported in the application and stored in the {@link module:ol/proj} namespace.\n * You can use these in applications, but this is not required, as API params\n * and options use {@link module:ol/proj~ProjectionLike} which means the simple string\n * code will suffice.\n *\n * You can use {@link module:ol/proj.get} to retrieve the object for a particular\n * projection.\n *\n * The library includes definitions for `EPSG:4326` and `EPSG:3857`, together\n * with the following aliases:\n * * `EPSG:4326`: CRS:84, urn:ogc:def:crs:EPSG:6.6:4326,\n *     urn:ogc:def:crs:OGC:1.3:CRS84, urn:ogc:def:crs:OGC:2:84,\n *     http://www.opengis.net/gml/srs/epsg.xml#4326,\n *     urn:x-ogc:def:crs:EPSG:4326\n * * `EPSG:3857`: EPSG:102100, EPSG:102113, EPSG:900913,\n *     urn:ogc:def:crs:EPSG:6.18:3:3857,\n *     http://www.opengis.net/gml/srs/epsg.xml#3857\n *\n * If you use [proj4js](https://github.com/proj4js/proj4js), aliases can\n * be added using `proj4.defs()`. After all required projection definitions are\n * added, call the {@link module:ol/proj/proj4.register} function.\n *\n * @api\n */\nclass Projection {\n  /**\n   * @param {Options} options Projection options.\n   */\n  constructor(options) {\n    /**\n     * @private\n     * @type {string}\n     */\n    this.code_ = options.code;\n\n    /**\n     * Units of projected coordinates. When set to `TILE_PIXELS`, a\n     * `this.extent_` and `this.worldExtent_` must be configured properly for each\n     * tile.\n     * @private\n     * @type {import(\"./Units.js\").Units}\n     */\n    this.units_ = /** @type {import(\"./Units.js\").Units} */ (options.units);\n\n    /**\n     * Validity extent of the projection in projected coordinates. For projections\n     * with `TILE_PIXELS` units, this is the extent of the tile in\n     * tile pixel space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.extent_ = options.extent !== undefined ? options.extent : null;\n\n    /**\n     * Extent of the world in EPSG:4326. For projections with\n     * `TILE_PIXELS` units, this is the extent of the tile in\n     * projected coordinate space.\n     * @private\n     * @type {import(\"../extent.js\").Extent}\n     */\n    this.worldExtent_ =\n      options.worldExtent !== undefined ? options.worldExtent : null;\n\n    /**\n     * @private\n     * @type {string}\n     */\n    this.axisOrientation_ =\n      options.axisOrientation !== undefined ? options.axisOrientation : 'enu';\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.global_ = options.global !== undefined ? options.global : false;\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this.canWrapX_ = !!(this.global_ && this.extent_);\n\n    /**\n     * @private\n     * @type {function(number, import(\"../coordinate.js\").Coordinate):number|undefined}\n     */\n    this.getPointResolutionFunc_ = options.getPointResolution;\n\n    /**\n     * @private\n     * @type {import(\"../tilegrid/TileGrid.js\").default}\n     */\n    this.defaultTileGrid_ = null;\n\n    /**\n     * @private\n     * @type {number|undefined}\n     */\n    this.metersPerUnit_ = options.metersPerUnit;\n  }\n\n  /**\n   * @return {boolean} The projection is suitable for wrapping the x-axis\n   */\n  canWrapX() {\n    return this.canWrapX_;\n  }\n\n  /**\n   * Get the code for this projection, e.g. 'EPSG:4326'.\n   * @return {string} Code.\n   * @api\n   */\n  getCode() {\n    return this.code_;\n  }\n\n  /**\n   * Get the validity extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    return this.extent_;\n  }\n\n  /**\n   * Get the units of this projection.\n   * @return {import(\"./Units.js\").Units} Units.\n   * @api\n   */\n  getUnits() {\n    return this.units_;\n  }\n\n  /**\n   * Get the amount of meters per unit of this projection.  If the projection is\n   * not configured with `metersPerUnit` or a units identifier, the return is\n   * `undefined`.\n   * @return {number|undefined} Meters.\n   * @api\n   */\n  getMetersPerUnit() {\n    return this.metersPerUnit_ || METERS_PER_UNIT[this.units_];\n  }\n\n  /**\n   * Get the world extent for this projection.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getWorldExtent() {\n    return this.worldExtent_;\n  }\n\n  /**\n   * Get the axis orientation of this projection.\n   * Example values are:\n   * enu - the default easting, northing, elevation.\n   * neu - northing, easting, up - useful for \"lat/long\" geographic coordinates,\n   *     or south orientated transverse mercator.\n   * wnu - westing, northing, up - some planetary coordinate systems have\n   *     \"west positive\" coordinate systems\n   * @return {string} Axis orientation.\n   * @api\n   */\n  getAxisOrientation() {\n    return this.axisOrientation_;\n  }\n\n  /**\n   * Is this projection a global projection which spans the whole world?\n   * @return {boolean} Whether the projection is global.\n   * @api\n   */\n  isGlobal() {\n    return this.global_;\n  }\n\n  /**\n   * Set if the projection is a global projection which spans the whole world\n   * @param {boolean} global Whether the projection is global.\n   * @api\n   */\n  setGlobal(global) {\n    this.global_ = global;\n    this.canWrapX_ = !!(global && this.extent_);\n  }\n\n  /**\n   * @return {import(\"../tilegrid/TileGrid.js\").default} The default tile grid.\n   */\n  getDefaultTileGrid() {\n    return this.defaultTileGrid_;\n  }\n\n  /**\n   * @param {import(\"../tilegrid/TileGrid.js\").default} tileGrid The default tile grid.\n   */\n  setDefaultTileGrid(tileGrid) {\n    this.defaultTileGrid_ = tileGrid;\n  }\n\n  /**\n   * Set the validity extent for this projection.\n   * @param {import(\"../extent.js\").Extent} extent Extent.\n   * @api\n   */\n  setExtent(extent) {\n    this.extent_ = extent;\n    this.canWrapX_ = !!(this.global_ && extent);\n  }\n\n  /**\n   * Set the world extent for this projection.\n   * @param {import(\"../extent.js\").Extent} worldExtent World extent\n   *     [minlon, minlat, maxlon, maxlat].\n   * @api\n   */\n  setWorldExtent(worldExtent) {\n    this.worldExtent_ = worldExtent;\n  }\n\n  /**\n   * Set the getPointResolution function (see {@link module:ol/proj.getPointResolution}\n   * for this projection.\n   * @param {function(number, import(\"../coordinate.js\").Coordinate):number} func Function\n   * @api\n   */\n  setGetPointResolution(func) {\n    this.getPointResolutionFunc_ = func;\n  }\n\n  /**\n   * Get the custom point resolution function for this projection (if set).\n   * @return {function(number, import(\"../coordinate.js\").Coordinate):number|undefined} The custom point\n   * resolution function (if set).\n   */\n  getPointResolutionFunc() {\n    return this.getPointResolutionFunc_;\n  }\n}\n\nexport default Projection;\n","/**\n * @module ol/proj/epsg3857\n */\nimport Projection from './Projection.js';\n\n/**\n * Radius of WGS84 sphere\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n/**\n * @const\n * @type {number}\n */\nexport const HALF_SIZE = Math.PI * RADIUS;\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-HALF_SIZE, -HALF_SIZE, HALF_SIZE, HALF_SIZE];\n\n/**\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const WORLD_EXTENT = [-180, -85, 180, 85];\n\n/**\n * Maximum safe value in y direction\n * @const\n * @type {number}\n */\nexport const MAX_SAFE_Y = RADIUS * Math.log(Math.tan(Math.PI / 2));\n\n/**\n * @classdesc\n * Projection object for web/spherical Mercator (EPSG:3857).\n */\nclass EPSG3857Projection extends Projection {\n  /**\n   * @param {string} code Code.\n   */\n  constructor(code) {\n    super({\n      code: code,\n      units: 'm',\n      extent: EXTENT,\n      global: true,\n      worldExtent: WORLD_EXTENT,\n      getPointResolution: function (resolution, point) {\n        return resolution / Math.cosh(point[1] / RADIUS);\n      },\n    });\n  }\n}\n\n/**\n * Projections equal to EPSG:3857.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG3857Projection('EPSG:3857'),\n  new EPSG3857Projection('EPSG:102100'),\n  new EPSG3857Projection('EPSG:102113'),\n  new EPSG3857Projection('EPSG:900913'),\n  new EPSG3857Projection('http://www.opengis.net/def/crs/EPSG/0/3857'),\n  new EPSG3857Projection('http://www.opengis.net/gml/srs/epsg.xml#3857'),\n];\n\n/**\n * Transformation from EPSG:4326 to EPSG:3857.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function fromEPSG4326(input, output, dimension) {\n  const length = input.length;\n  dimension = dimension > 1 ? dimension : 2;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = (HALF_SIZE * input[i]) / 180;\n    let y = RADIUS * Math.log(Math.tan((Math.PI * (+input[i + 1] + 90)) / 360));\n    if (y > MAX_SAFE_Y) {\n      y = MAX_SAFE_Y;\n    } else if (y < -MAX_SAFE_Y) {\n      y = -MAX_SAFE_Y;\n    }\n    output[i + 1] = y;\n  }\n  return output;\n}\n\n/**\n * Transformation from EPSG:3857 to EPSG:4326.\n *\n * @param {Array<number>} input Input array of coordinate values.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @param {number} [dimension] Dimension (default is `2`).\n * @return {Array<number>} Output array of coordinate values.\n */\nexport function toEPSG4326(input, output, dimension) {\n  const length = input.length;\n  dimension = dimension > 1 ? dimension : 2;\n  if (output === undefined) {\n    if (dimension > 2) {\n      // preserve values beyond second dimension\n      output = input.slice();\n    } else {\n      output = new Array(length);\n    }\n  }\n  for (let i = 0; i < length; i += dimension) {\n    output[i] = (180 * input[i]) / HALF_SIZE;\n    output[i + 1] =\n      (360 * Math.atan(Math.exp(input[i + 1] / RADIUS))) / Math.PI - 90;\n  }\n  return output;\n}\n","/**\n * @module ol/proj/epsg4326\n */\nimport Projection from './Projection.js';\n\n/**\n * Semi-major radius of the WGS84 ellipsoid.\n *\n * @const\n * @type {number}\n */\nexport const RADIUS = 6378137;\n\n/**\n * Extent of the EPSG:4326 projection which is the whole world.\n *\n * @const\n * @type {import(\"../extent.js\").Extent}\n */\nexport const EXTENT = [-180, -90, 180, 90];\n\n/**\n * @const\n * @type {number}\n */\nexport const METERS_PER_UNIT = (Math.PI * RADIUS) / 180;\n\n/**\n * @classdesc\n * Projection object for WGS84 geographic coordinates (EPSG:4326).\n *\n * Note that OpenLayers does not strictly comply with the EPSG definition.\n * The EPSG registry defines 4326 as a CRS for Latitude,Longitude (y,x).\n * OpenLayers treats EPSG:4326 as a pseudo-projection, with x,y coordinates.\n */\nclass EPSG4326Projection extends Projection {\n  /**\n   * @param {string} code Code.\n   * @param {string} [axisOrientation] Axis orientation.\n   */\n  constructor(code, axisOrientation) {\n    super({\n      code: code,\n      units: 'degrees',\n      extent: EXTENT,\n      axisOrientation: axisOrientation,\n      global: true,\n      metersPerUnit: METERS_PER_UNIT,\n      worldExtent: EXTENT,\n    });\n  }\n}\n\n/**\n * Projections equal to EPSG:4326.\n *\n * @const\n * @type {Array<import(\"./Projection.js\").default>}\n */\nexport const PROJECTIONS = [\n  new EPSG4326Projection('CRS:84'),\n  new EPSG4326Projection('EPSG:4326', 'neu'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:1.3:CRS84'),\n  new EPSG4326Projection('urn:ogc:def:crs:OGC:2:84'),\n  new EPSG4326Projection('http://www.opengis.net/def/crs/OGC/1.3/CRS84'),\n  new EPSG4326Projection('http://www.opengis.net/gml/srs/epsg.xml#4326', 'neu'),\n  new EPSG4326Projection('http://www.opengis.net/def/crs/EPSG/0/4326', 'neu'),\n];\n","/**\n * @module ol/proj/projections\n */\n\n/**\n * @type {Object<string, import(\"./Projection.js\").default>}\n */\nlet cache = {};\n\n/**\n * Clear the projections cache.\n */\nexport function clear() {\n  cache = {};\n}\n\n/**\n * Get a cached projection by code.\n * @param {string} code The code for the projection.\n * @return {import(\"./Projection.js\").default} The projection (if cached).\n */\nexport function get(code) {\n  return (\n    cache[code] ||\n    cache[code.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\\w+)$/, 'EPSG:$3')] ||\n    null\n  );\n}\n\n/**\n * Add a projection to the cache.\n * @param {string} code The projection code.\n * @param {import(\"./Projection.js\").default} projection The projection to cache.\n */\nexport function add(code, projection) {\n  cache[code] = projection;\n}\n","/**\n * @module ol/proj/transforms\n */\nimport {isEmpty} from '../obj.js';\n\n/**\n * @private\n * @type {!Object<string, Object<string, import(\"../proj.js\").TransformFunction>>}\n */\nlet transforms = {};\n\n/**\n * Clear the transform cache.\n */\nexport function clear() {\n  transforms = {};\n}\n\n/**\n * Registers a conversion function to convert coordinates from the source\n * projection to the destination projection.\n *\n * @param {import(\"./Projection.js\").default} source Source.\n * @param {import(\"./Projection.js\").default} destination Destination.\n * @param {import(\"../proj.js\").TransformFunction} transformFn Transform.\n */\nexport function add(source, destination, transformFn) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  if (!(sourceCode in transforms)) {\n    transforms[sourceCode] = {};\n  }\n  transforms[sourceCode][destinationCode] = transformFn;\n}\n\n/**\n * Unregisters the conversion function to convert coordinates from the source\n * projection to the destination projection.  This method is used to clean up\n * cached transforms during testing.\n *\n * @param {import(\"./Projection.js\").default} source Source projection.\n * @param {import(\"./Projection.js\").default} destination Destination projection.\n * @return {import(\"../proj.js\").TransformFunction} transformFn The unregistered transform.\n */\nexport function remove(source, destination) {\n  const sourceCode = source.getCode();\n  const destinationCode = destination.getCode();\n  const transform = transforms[sourceCode][destinationCode];\n  delete transforms[sourceCode][destinationCode];\n  if (isEmpty(transforms[sourceCode])) {\n    delete transforms[sourceCode];\n  }\n  return transform;\n}\n\n/**\n * Get a transform given a source code and a destination code.\n * @param {string} sourceCode The code for the source projection.\n * @param {string} destinationCode The code for the destination projection.\n * @return {import(\"../proj.js\").TransformFunction|undefined} The transform function (if found).\n */\nexport function get(sourceCode, destinationCode) {\n  let transform;\n  if (sourceCode in transforms && destinationCode in transforms[sourceCode]) {\n    transform = transforms[sourceCode][destinationCode];\n  }\n  return transform;\n}\n","/**\n * @module ol/proj\n */\n\n/**\n * The ol/proj module stores:\n * * a list of {@link module:ol/proj/Projection~Projection}\n * objects, one for each projection supported by the application\n * * a list of transform functions needed to convert coordinates in one projection\n * into another.\n *\n * The static functions are the methods used to maintain these.\n * Each transform function can handle not only simple coordinate pairs, but also\n * large arrays of coordinates such as vector geometries.\n *\n * When loaded, the library adds projection objects for EPSG:4326 (WGS84\n * geographic coordinates) and EPSG:3857 (Web or Spherical Mercator, as used\n * for example by Bing Maps or OpenStreetMap), together with the relevant\n * transform functions.\n *\n * Additional transforms may be added by using the http://proj4js.org/\n * library (version 2.2 or later). You can use the full build supplied by\n * Proj4js, or create a custom build to support those projections you need; see\n * the Proj4js website for how to do this. You also need the Proj4js definitions\n * for the required projections. These definitions can be obtained from\n * https://epsg.io/, and are a JS function, so can be loaded in a script\n * tag (as in the examples) or pasted into your application.\n *\n * After all required projection definitions are added to proj4's registry (by\n * using `proj4.defs()`), simply call `register(proj4)` from the `ol/proj/proj4`\n * package. Existing transforms are not changed by this function. See\n * examples/wms-image-custom-proj for an example of this.\n *\n * Additional projection definitions can be registered with `proj4.defs()` any\n * time. Just make sure to call `register(proj4)` again; for example, with user-supplied data where you don't\n * know in advance what projections are needed, you can initially load minimal\n * support and then load whichever are requested.\n *\n * Note that Proj4js does not support projection extents. If you want to add\n * one for creating default tile grids, you can add it after the Projection\n * object has been created with `setExtent`, for example,\n * `get('EPSG:1234').setExtent(extent)`.\n *\n * In addition to Proj4js support, any transform functions can be added with\n * {@link module:ol/proj.addCoordinateTransforms}. To use this, you must first create\n * a {@link module:ol/proj/Projection~Projection} object for the new projection and add it with\n * {@link module:ol/proj.addProjection}. You can then add the forward and inverse\n * functions with {@link module:ol/proj.addCoordinateTransforms}. See\n * examples/wms-custom-proj for an example of this.\n *\n * Note that if no transforms are needed and you only need to define the\n * projection, just add a {@link module:ol/proj/Projection~Projection} with\n * {@link module:ol/proj.addProjection}. See examples/wms-no-proj for an example of\n * this.\n */\nimport Projection from './proj/Projection.js';\nimport {\n  PROJECTIONS as EPSG3857_PROJECTIONS,\n  fromEPSG4326,\n  toEPSG4326,\n} from './proj/epsg3857.js';\nimport {PROJECTIONS as EPSG4326_PROJECTIONS} from './proj/epsg4326.js';\nimport {METERS_PER_UNIT} from './proj/Units.js';\nimport {\n  add as addProj,\n  clear as clearProj,\n  get as getProj,\n} from './proj/projections.js';\nimport {\n  add as addTransformFunc,\n  clear as clearTransformFuncs,\n  get as getTransformFunc,\n} from './proj/transforms.js';\nimport {applyTransform, getWidth} from './extent.js';\nimport {clamp, modulo} from './math.js';\nimport {equals, getWorldsAway} from './coordinate.js';\nimport {getDistance} from './sphere.js';\nimport {warn} from './console.js';\n\n/**\n * A projection as {@link module:ol/proj/Projection~Projection}, SRS identifier\n * string or undefined.\n * @typedef {Projection|string|undefined} ProjectionLike\n * @api\n */\n\n/**\n * A transform function accepts an array of input coordinate values, an optional\n * output array, and an optional dimension (default should be 2).  The function\n * transforms the input coordinate values, populates the output array, and\n * returns the output array.\n *\n * @typedef {function(Array<number>, Array<number>=, number=): Array<number>} TransformFunction\n * @api\n */\n\nexport {METERS_PER_UNIT};\n\nexport {Projection};\n\nlet showCoordinateWarning = true;\n\n/**\n * @param {boolean} [disable = true] Disable console info about `useGeographic()`\n */\nexport function disableCoordinateWarning(disable) {\n  const hide = disable === undefined ? true : disable;\n  showCoordinateWarning = !hide;\n}\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @return {Array<number>} Output coordinate array (new array, same coordinate\n *     values).\n */\nexport function cloneTransform(input, output) {\n  if (output !== undefined) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      output[i] = input[i];\n    }\n    output = output;\n  } else {\n    output = input.slice();\n  }\n  return output;\n}\n\n/**\n * @param {Array<number>} input Input coordinate array.\n * @param {Array<number>} [output] Output array of coordinate values.\n * @return {Array<number>} Input coordinate array (same array as input).\n */\nexport function identityTransform(input, output) {\n  if (output !== undefined && input !== output) {\n    for (let i = 0, ii = input.length; i < ii; ++i) {\n      output[i] = input[i];\n    }\n    input = output;\n  }\n  return input;\n}\n\n/**\n * Add a Projection object to the list of supported projections that can be\n * looked up by their code.\n *\n * @param {Projection} projection Projection instance.\n * @api\n */\nexport function addProjection(projection) {\n  addProj(projection.getCode(), projection);\n  addTransformFunc(projection, projection, cloneTransform);\n}\n\n/**\n * @param {Array<Projection>} projections Projections.\n */\nexport function addProjections(projections) {\n  projections.forEach(addProjection);\n}\n\n/**\n * Fetches a Projection object for the code specified.\n *\n * @param {ProjectionLike} projectionLike Either a code string which is\n *     a combination of authority and identifier such as \"EPSG:4326\", or an\n *     existing projection object, or undefined.\n * @return {Projection|null} Projection object, or null if not in list.\n * @api\n */\nexport function get(projectionLike) {\n  return typeof projectionLike === 'string'\n    ? getProj(/** @type {string} */ (projectionLike))\n    : /** @type {Projection} */ (projectionLike) || null;\n}\n\n/**\n * Get the resolution of the point in degrees or distance units.\n * For projections with degrees as the unit this will simply return the\n * provided resolution. For other projections the point resolution is\n * by default estimated by transforming the `point` pixel to EPSG:4326,\n * measuring its width and height on the normal sphere,\n * and taking the average of the width and height.\n * A custom function can be provided for a specific projection, either\n * by setting the `getPointResolution` option in the\n * {@link module:ol/proj/Projection~Projection} constructor or by using\n * {@link module:ol/proj/Projection~Projection#setGetPointResolution} to change an existing\n * projection object.\n * @param {ProjectionLike} projection The projection.\n * @param {number} resolution Nominal resolution in projection units.\n * @param {import(\"./coordinate.js\").Coordinate} point Point to find adjusted resolution at.\n * @param {import(\"./proj/Units.js\").Units} [units] Units to get the point resolution in.\n * Default is the projection's units.\n * @return {number} Point resolution.\n * @api\n */\nexport function getPointResolution(projection, resolution, point, units) {\n  projection = get(projection);\n  let pointResolution;\n  const getter = projection.getPointResolutionFunc();\n  if (getter) {\n    pointResolution = getter(resolution, point);\n    if (units && units !== projection.getUnits()) {\n      const metersPerUnit = projection.getMetersPerUnit();\n      if (metersPerUnit) {\n        pointResolution =\n          (pointResolution * metersPerUnit) / METERS_PER_UNIT[units];\n      }\n    }\n  } else {\n    const projUnits = projection.getUnits();\n    if ((projUnits == 'degrees' && !units) || units == 'degrees') {\n      pointResolution = resolution;\n    } else {\n      // Estimate point resolution by transforming the center pixel to EPSG:4326,\n      // measuring its width and height on the normal sphere, and taking the\n      // average of the width and height.\n      const toEPSG4326 = getTransformFromProjections(\n        projection,\n        get('EPSG:4326')\n      );\n      if (toEPSG4326 === identityTransform && projUnits !== 'degrees') {\n        // no transform is available\n        pointResolution = resolution * projection.getMetersPerUnit();\n      } else {\n        let vertices = [\n          point[0] - resolution / 2,\n          point[1],\n          point[0] + resolution / 2,\n          point[1],\n          point[0],\n          point[1] - resolution / 2,\n          point[0],\n          point[1] + resolution / 2,\n        ];\n        vertices = toEPSG4326(vertices, vertices, 2);\n        const width = getDistance(vertices.slice(0, 2), vertices.slice(2, 4));\n        const height = getDistance(vertices.slice(4, 6), vertices.slice(6, 8));\n        pointResolution = (width + height) / 2;\n      }\n      const metersPerUnit = units\n        ? METERS_PER_UNIT[units]\n        : projection.getMetersPerUnit();\n      if (metersPerUnit !== undefined) {\n        pointResolution /= metersPerUnit;\n      }\n    }\n  }\n  return pointResolution;\n}\n\n/**\n * Registers transformation functions that don't alter coordinates. Those allow\n * to transform between projections with equal meaning.\n *\n * @param {Array<Projection>} projections Projections.\n * @api\n */\nexport function addEquivalentProjections(projections) {\n  addProjections(projections);\n  projections.forEach(function (source) {\n    projections.forEach(function (destination) {\n      if (source !== destination) {\n        addTransformFunc(source, destination, cloneTransform);\n      }\n    });\n  });\n}\n\n/**\n * Registers transformation functions to convert coordinates in any projection\n * in projection1 to any projection in projection2.\n *\n * @param {Array<Projection>} projections1 Projections with equal\n *     meaning.\n * @param {Array<Projection>} projections2 Projections with equal\n *     meaning.\n * @param {TransformFunction} forwardTransform Transformation from any\n *   projection in projection1 to any projection in projection2.\n * @param {TransformFunction} inverseTransform Transform from any projection\n *   in projection2 to any projection in projection1..\n */\nexport function addEquivalentTransforms(\n  projections1,\n  projections2,\n  forwardTransform,\n  inverseTransform\n) {\n  projections1.forEach(function (projection1) {\n    projections2.forEach(function (projection2) {\n      addTransformFunc(projection1, projection2, forwardTransform);\n      addTransformFunc(projection2, projection1, inverseTransform);\n    });\n  });\n}\n\n/**\n * Clear all cached projections and transforms.\n */\nexport function clearAllProjections() {\n  clearProj();\n  clearTransformFuncs();\n}\n\n/**\n * @param {Projection|string|undefined} projection Projection.\n * @param {string} defaultCode Default code.\n * @return {Projection} Projection.\n */\nexport function createProjection(projection, defaultCode) {\n  if (!projection) {\n    return get(defaultCode);\n  }\n  if (typeof projection === 'string') {\n    return get(projection);\n  }\n  return /** @type {Projection} */ (projection);\n}\n\n/**\n * Creates a {@link module:ol/proj~TransformFunction} from a simple 2D coordinate transform\n * function.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} coordTransform Coordinate\n *     transform.\n * @return {TransformFunction} Transform function.\n */\nexport function createTransformFromCoordinateTransform(coordTransform) {\n  return (\n    /**\n     * @param {Array<number>} input Input.\n     * @param {Array<number>} [output] Output.\n     * @param {number} [dimension] Dimension.\n     * @return {Array<number>} Output.\n     */\n    function (input, output, dimension) {\n      const length = input.length;\n      dimension = dimension !== undefined ? dimension : 2;\n      output = output !== undefined ? output : new Array(length);\n      for (let i = 0; i < length; i += dimension) {\n        const point = coordTransform(input.slice(i, i + dimension));\n        const pointLength = point.length;\n        for (let j = 0, jj = dimension; j < jj; ++j) {\n          output[i + j] = j >= pointLength ? input[i + j] : point[j];\n        }\n      }\n      return output;\n    }\n  );\n}\n\n/**\n * Registers coordinate transform functions to convert coordinates between the\n * source projection and the destination projection.\n * The forward and inverse functions convert coordinate pairs; this function\n * converts these into the functions used internally which also handle\n * extents and coordinate arrays.\n *\n * @param {ProjectionLike} source Source projection.\n * @param {ProjectionLike} destination Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} forward The forward transform\n *     function (that is, from the source projection to the destination\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} inverse The inverse transform\n *     function (that is, from the destination projection to the source\n *     projection) that takes a {@link module:ol/coordinate~Coordinate} as argument and returns\n *     the transformed {@link module:ol/coordinate~Coordinate}. If the transform function can only\n *     transform less dimensions than the input coordinate, it is supposeed to return a coordinate\n *     with only the length it can transform. The other dimensions will be taken unchanged from the\n *     source.\n * @api\n */\nexport function addCoordinateTransforms(source, destination, forward, inverse) {\n  const sourceProj = get(source);\n  const destProj = get(destination);\n  addTransformFunc(\n    sourceProj,\n    destProj,\n    createTransformFromCoordinateTransform(forward)\n  );\n  addTransformFunc(\n    destProj,\n    sourceProj,\n    createTransformFromCoordinateTransform(inverse)\n  );\n}\n\n/**\n * Transforms a coordinate from longitude/latitude to a different projection.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate as longitude and latitude, i.e.\n *     an array with longitude as 1st and latitude as 2nd element.\n * @param {ProjectionLike} [projection] Target projection. The\n *     default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate projected to the target projection.\n * @api\n */\nexport function fromLonLat(coordinate, projection) {\n  disableCoordinateWarning();\n  return transform(\n    coordinate,\n    'EPSG:4326',\n    projection !== undefined ? projection : 'EPSG:3857'\n  );\n}\n\n/**\n * Transforms a coordinate to longitude/latitude.\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Projected coordinate.\n * @param {ProjectionLike} [projection] Projection of the coordinate.\n *     The default is Web Mercator, i.e. 'EPSG:3857'.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate as longitude and latitude, i.e. an array\n *     with longitude as 1st and latitude as 2nd element.\n * @api\n */\nexport function toLonLat(coordinate, projection) {\n  const lonLat = transform(\n    coordinate,\n    projection !== undefined ? projection : 'EPSG:3857',\n    'EPSG:4326'\n  );\n  const lon = lonLat[0];\n  if (lon < -180 || lon > 180) {\n    lonLat[0] = modulo(lon + 180, 360) - 180;\n  }\n  return lonLat;\n}\n\n/**\n * Checks if two projections are the same, that is every coordinate in one\n * projection does represent the same geographic point as the same coordinate in\n * the other projection.\n *\n * @param {Projection} projection1 Projection 1.\n * @param {Projection} projection2 Projection 2.\n * @return {boolean} Equivalent.\n * @api\n */\nexport function equivalent(projection1, projection2) {\n  if (projection1 === projection2) {\n    return true;\n  }\n  const equalUnits = projection1.getUnits() === projection2.getUnits();\n  if (projection1.getCode() === projection2.getCode()) {\n    return equalUnits;\n  }\n  const transformFunc = getTransformFromProjections(projection1, projection2);\n  return transformFunc === cloneTransform && equalUnits;\n}\n\n/**\n * Searches in the list of transform functions for the function for converting\n * coordinates from the source projection to the destination projection.\n *\n * @param {Projection} sourceProjection Source Projection object.\n * @param {Projection} destinationProjection Destination Projection\n *     object.\n * @return {TransformFunction} Transform function.\n */\nexport function getTransformFromProjections(\n  sourceProjection,\n  destinationProjection\n) {\n  const sourceCode = sourceProjection.getCode();\n  const destinationCode = destinationProjection.getCode();\n  let transformFunc = getTransformFunc(sourceCode, destinationCode);\n  if (!transformFunc) {\n    transformFunc = identityTransform;\n  }\n  return transformFunc;\n}\n\n/**\n * Given the projection-like objects, searches for a transformation\n * function to convert a coordinates array from the source projection to the\n * destination projection.\n *\n * @param {ProjectionLike} source Source.\n * @param {ProjectionLike} destination Destination.\n * @return {TransformFunction} Transform function.\n * @api\n */\nexport function getTransform(source, destination) {\n  const sourceProjection = get(source);\n  const destinationProjection = get(destination);\n  return getTransformFromProjections(sourceProjection, destinationProjection);\n}\n\n/**\n * Transforms a coordinate from source projection to destination projection.\n * This returns a new coordinate (and does not modify the original).\n *\n * See {@link module:ol/proj.transformExtent} for extent transformation.\n * See the transform method of {@link module:ol/geom/Geometry~Geometry} and its\n * subclasses for geometry transforms.\n *\n * @param {import(\"./coordinate.js\").Coordinate} coordinate Coordinate.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @return {import(\"./coordinate.js\").Coordinate} Coordinate.\n * @api\n */\nexport function transform(coordinate, source, destination) {\n  const transformFunc = getTransform(source, destination);\n  return transformFunc(coordinate, undefined, coordinate.length);\n}\n\n/**\n * Transforms an extent from source projection to destination projection.  This\n * returns a new extent (and does not modify the original).\n *\n * @param {import(\"./extent.js\").Extent} extent The extent to transform.\n * @param {ProjectionLike} source Source projection-like.\n * @param {ProjectionLike} destination Destination projection-like.\n * @param {number} [stops] Number of stops per side used for the transform.\n * By default only the corners are used.\n * @return {import(\"./extent.js\").Extent} The transformed extent.\n * @api\n */\nexport function transformExtent(extent, source, destination, stops) {\n  const transformFunc = getTransform(source, destination);\n  return applyTransform(extent, transformFunc, undefined, stops);\n}\n\n/**\n * Transforms the given point to the destination projection.\n *\n * @param {import(\"./coordinate.js\").Coordinate} point Point.\n * @param {Projection} sourceProjection Source projection.\n * @param {Projection} destinationProjection Destination projection.\n * @return {import(\"./coordinate.js\").Coordinate} Point.\n */\nexport function transformWithProjections(\n  point,\n  sourceProjection,\n  destinationProjection\n) {\n  const transformFunc = getTransformFromProjections(\n    sourceProjection,\n    destinationProjection\n  );\n  return transformFunc(point);\n}\n\n/**\n * @type {Projection|null}\n */\nlet userProjection = null;\n\n/**\n * Set the projection for coordinates supplied from and returned by API methods.\n * This includes all API methods except for those interacting with tile grids,\n * plus {@link import(\"./Map.js\").FrameState} and {@link import(\"./View.js\").State}.\n * @param {ProjectionLike} projection The user projection.\n * @api\n */\nexport function setUserProjection(projection) {\n  userProjection = get(projection);\n}\n\n/**\n * Clear the user projection if set.\n * @api\n */\nexport function clearUserProjection() {\n  userProjection = null;\n}\n\n/**\n * Get the projection for coordinates supplied from and returned by API methods.\n * @return {Projection|null} The user projection (or null if not set).\n * @api\n */\nexport function getUserProjection() {\n  return userProjection;\n}\n\n/**\n * Use geographic coordinates (WGS-84 datum) in API methods.\n * This includes all API methods except for those interacting with tile grids,\n * plus {@link import(\"./Map.js\").FrameState} and {@link import(\"./View.js\").State}.\n * @api\n */\nexport function useGeographic() {\n  setUserProjection('EPSG:4326');\n}\n\n/**\n * Return a coordinate transformed into the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} sourceProjection The input coordinate projection.\n * @return {Array<number>} The input coordinate in the user projection.\n */\nexport function toUserCoordinate(coordinate, sourceProjection) {\n  if (!userProjection) {\n    return coordinate;\n  }\n  return transform(coordinate, sourceProjection, userProjection);\n}\n\n/**\n * Return a coordinate transformed from the user projection.  If no user projection\n * is set, the original coordinate is returned.\n * @param {Array<number>} coordinate Input coordinate.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {Array<number>} The input coordinate transformed.\n */\nexport function fromUserCoordinate(coordinate, destProjection) {\n  if (!userProjection) {\n    if (\n      showCoordinateWarning &&\n      !equals(coordinate, [0, 0]) &&\n      coordinate[0] >= -180 &&\n      coordinate[0] <= 180 &&\n      coordinate[1] >= -90 &&\n      coordinate[1] <= 90\n    ) {\n      showCoordinateWarning = false;\n      warn(\n        'Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.'\n      );\n    }\n    return coordinate;\n  }\n  return transform(coordinate, userProjection, destProjection);\n}\n\n/**\n * Return an extent transformed into the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} sourceProjection The input extent projection.\n * @return {import(\"./extent.js\").Extent} The input extent in the user projection.\n */\nexport function toUserExtent(extent, sourceProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, sourceProjection, userProjection);\n}\n\n/**\n * Return an extent transformed from the user projection.  If no user projection\n * is set, the original extent is returned.\n * @param {import(\"./extent.js\").Extent} extent Input extent.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {import(\"./extent.js\").Extent} The input extent transformed.\n */\nexport function fromUserExtent(extent, destProjection) {\n  if (!userProjection) {\n    return extent;\n  }\n  return transformExtent(extent, userProjection, destProjection);\n}\n\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in input projection units per pixel.\n * @param {ProjectionLike} sourceProjection The input projection.\n * @return {number} Resolution in user projection units per pixel.\n */\nexport function toUserResolution(resolution, sourceProjection) {\n  if (!userProjection) {\n    return resolution;\n  }\n  const sourceMetersPerUnit = get(sourceProjection).getMetersPerUnit();\n  const userMetersPerUnit = userProjection.getMetersPerUnit();\n  return sourceMetersPerUnit && userMetersPerUnit\n    ? (resolution * sourceMetersPerUnit) / userMetersPerUnit\n    : resolution;\n}\n\n/**\n * Return the resolution in user projection units per pixel. If no user projection\n * is set, or source or user projection are missing units, the original resolution\n * is returned.\n * @param {number} resolution Resolution in user projection units per pixel.\n * @param {ProjectionLike} destProjection The destination projection.\n * @return {number} Resolution in destination projection units per pixel.\n */\nexport function fromUserResolution(resolution, destProjection) {\n  if (!userProjection) {\n    return resolution;\n  }\n  const destMetersPerUnit = get(destProjection).getMetersPerUnit();\n  const userMetersPerUnit = userProjection.getMetersPerUnit();\n  return destMetersPerUnit && userMetersPerUnit\n    ? (resolution * userMetersPerUnit) / destMetersPerUnit\n    : resolution;\n}\n\n/**\n * Creates a safe coordinate transform function from a coordinate transform function.\n * \"Safe\" means that it can handle wrapping of x-coordinates for global projections,\n * and that coordinates exceeding the source projection validity extent's range will be\n * clamped to the validity range.\n * @param {Projection} sourceProj Source projection.\n * @param {Projection} destProj Destination projection.\n * @param {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} transform Transform function (source to destination).\n * @return {function(import(\"./coordinate.js\").Coordinate): import(\"./coordinate.js\").Coordinate} Safe transform function (source to destination).\n */\nexport function createSafeCoordinateTransform(sourceProj, destProj, transform) {\n  return function (coord) {\n    let transformed, worldsAway;\n    if (sourceProj.canWrapX()) {\n      const sourceExtent = sourceProj.getExtent();\n      const sourceExtentWidth = getWidth(sourceExtent);\n      coord = coord.slice(0);\n      worldsAway = getWorldsAway(coord, sourceProj, sourceExtentWidth);\n      if (worldsAway) {\n        // Move x to the real world\n        coord[0] = coord[0] - worldsAway * sourceExtentWidth;\n      }\n      coord[0] = clamp(coord[0], sourceExtent[0], sourceExtent[2]);\n      coord[1] = clamp(coord[1], sourceExtent[1], sourceExtent[3]);\n      transformed = transform(coord);\n    } else {\n      transformed = transform(coord);\n    }\n    if (worldsAway && destProj.canWrapX()) {\n      // Move transformed coordinate back to the offset world\n      transformed[0] += worldsAway * getWidth(destProj.getExtent());\n    }\n    return transformed;\n  };\n}\n\n/**\n * Add transforms to and from EPSG:4326 and EPSG:3857.  This function is called\n * by when this module is executed and should only need to be called again after\n * `clearAllProjections()` is called (e.g. in tests).\n */\nexport function addCommon() {\n  // Add transformations that don't alter coordinates to convert within set of\n  // projections with equal meaning.\n  addEquivalentProjections(EPSG3857_PROJECTIONS);\n  addEquivalentProjections(EPSG4326_PROJECTIONS);\n  // Add transformations to convert EPSG:4326 like coordinates to EPSG:3857 like\n  // coordinates and back.\n  addEquivalentTransforms(\n    EPSG4326_PROJECTIONS,\n    EPSG3857_PROJECTIONS,\n    fromEPSG4326,\n    toEPSG4326\n  );\n}\n\naddCommon();\n","/**\n * @module ol/geom/flat/orient\n */\nimport {coordinates as reverseCoordinates} from './reverse.js';\n\n/**\n * Is the linear ring oriented clockwise in a coordinate system with a bottom-left\n * coordinate origin? For a coordinate system with a top-left coordinate origin,\n * the ring's orientation is clockwise when this function returns false.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @return {boolean|undefined} Is clockwise.\n */\nexport function linearRingIsClockwise(flatCoordinates, offset, end, stride) {\n  // https://stackoverflow.com/q/1165647/clockwise-method#1165943\n  // https://github.com/OSGeo/gdal/blob/master/gdal/ogr/ogrlinearring.cpp\n  let edge = 0;\n  let x1 = flatCoordinates[end - stride];\n  let y1 = flatCoordinates[end - stride + 1];\n  for (; offset < end; offset += stride) {\n    const x2 = flatCoordinates[offset];\n    const y2 = flatCoordinates[offset + 1];\n    edge += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  return edge === 0 ? undefined : edge > 0;\n}\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingsAreOriented(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  right\n) {\n  right = right !== undefined ? right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates,\n      offset,\n      end,\n      stride\n    );\n    if (i === 0) {\n      if ((right && isClockwise) || (!right && !isClockwise)) {\n        return false;\n      }\n    } else {\n      if ((right && !isClockwise) || (!right && isClockwise)) {\n        return false;\n      }\n    }\n    offset = end;\n  }\n  return true;\n}\n\n/**\n * Determines if linear rings are oriented.  By default, left-hand orientation\n * is tested (first ring must be clockwise, remaining rings counter-clockwise).\n * To test for right-hand orientation, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Test for right-hand orientation\n *     (counter-clockwise exterior ring and clockwise interior rings).\n * @return {boolean} Rings are correctly oriented.\n */\nexport function linearRingssAreOriented(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  right\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    if (!linearRingsAreOriented(flatCoordinates, offset, ends, stride, right)) {\n      return false;\n    }\n    if (ends.length) {\n      offset = ends[ends.length - 1];\n    }\n  }\n  return true;\n}\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {boolean} [right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRings(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  right\n) {\n  right = right !== undefined ? right : false;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    const isClockwise = linearRingIsClockwise(\n      flatCoordinates,\n      offset,\n      end,\n      stride\n    );\n    const reverse =\n      i === 0\n        ? (right && isClockwise) || (!right && !isClockwise)\n        : (right && !isClockwise) || (!right && isClockwise);\n    if (reverse) {\n      reverseCoordinates(flatCoordinates, offset, end, stride);\n    }\n    offset = end;\n  }\n  return offset;\n}\n\n/**\n * Orient coordinates in a flat array of linear rings.  By default, rings\n * are oriented following the left-hand rule (clockwise for exterior and\n * counter-clockwise for interior rings).  To orient according to the\n * right-hand rule, use the `right` argument.\n *\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Array of array of end indexes.\n * @param {number} stride Stride.\n * @param {boolean} [right] Follow the right-hand rule for orientation.\n * @return {number} End.\n */\nexport function orientLinearRingsArray(\n  flatCoordinates,\n  offset,\n  endss,\n  stride,\n  right\n) {\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    offset = orientLinearRings(\n      flatCoordinates,\n      offset,\n      endss[i],\n      stride,\n      right\n    );\n  }\n  return offset;\n}\n\n/**\n * Return a two-dimensional endss\n * @param {Array<number>} flatCoordinates Flat coordinates\n * @param {Array<number>} ends Linear ring end indexes\n * @return {Array<Array<number>>} Two dimensional endss array that can\n * be used to construct a MultiPolygon\n */\nexport function inflateEnds(flatCoordinates, ends) {\n  const endss = [];\n  let offset = 0;\n  let prevEndIndex = 0;\n  let startOrientation;\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    // classifies an array of rings into polygons with outer rings and holes\n    const orientation = linearRingIsClockwise(flatCoordinates, offset, end, 2);\n    if (startOrientation === undefined) {\n      startOrientation = orientation;\n    }\n    if (orientation === startOrientation) {\n      endss.push(ends.slice(prevEndIndex, i + 1));\n    } else {\n      if (endss.length === 0) {\n        continue;\n      }\n      endss[endss.length - 1].push(ends[prevEndIndex]);\n    }\n    prevEndIndex = i + 1;\n    offset = end;\n  }\n  return endss;\n}\n","/**\n * @module ol/geom/flat/interpolate\n */\nimport {binarySearch} from '../../array.js';\nimport {lerp} from '../../math.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} fraction Fraction.\n * @param {Array<number>} [dest] Destination.\n * @param {number} [dimension] Destination dimension (default is `2`)\n * @return {Array<number>} Destination.\n */\nexport function interpolatePoint(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  fraction,\n  dest,\n  dimension\n) {\n  let o, t;\n  const n = (end - offset) / stride;\n  if (n === 1) {\n    o = offset;\n  } else if (n === 2) {\n    o = offset;\n    t = fraction;\n  } else if (n !== 0) {\n    let x1 = flatCoordinates[offset];\n    let y1 = flatCoordinates[offset + 1];\n    let length = 0;\n    const cumulativeLengths = [0];\n    for (let i = offset + stride; i < end; i += stride) {\n      const x2 = flatCoordinates[i];\n      const y2 = flatCoordinates[i + 1];\n      length += Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n      cumulativeLengths.push(length);\n      x1 = x2;\n      y1 = y2;\n    }\n    const target = fraction * length;\n    const index = binarySearch(cumulativeLengths, target);\n    if (index < 0) {\n      t =\n        (target - cumulativeLengths[-index - 2]) /\n        (cumulativeLengths[-index - 1] - cumulativeLengths[-index - 2]);\n      o = offset + (-index - 2) * stride;\n    } else {\n      o = offset + index * stride;\n    }\n  }\n  dimension = dimension > 1 ? dimension : 2;\n  dest = dest ? dest : new Array(dimension);\n  for (let i = 0; i < dimension; ++i) {\n    dest[i] =\n      o === undefined\n        ? NaN\n        : t === undefined\n        ? flatCoordinates[o + i]\n        : lerp(flatCoordinates[o + i], flatCoordinates[o + stride + i], t);\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @return {import(\"../../coordinate.js\").Coordinate|null} Coordinate.\n */\nexport function lineStringCoordinateAtM(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  m,\n  extrapolate\n) {\n  if (end == offset) {\n    return null;\n  }\n  let coordinate;\n  if (m < flatCoordinates[offset + stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(offset, offset + stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    }\n    return null;\n  }\n  if (flatCoordinates[end - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(end - stride, end);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    }\n    return null;\n  }\n  // FIXME use O(1) search\n  if (m == flatCoordinates[offset + stride - 1]) {\n    return flatCoordinates.slice(offset, offset + stride);\n  }\n  let lo = offset / stride;\n  let hi = end / stride;\n  while (lo < hi) {\n    const mid = (lo + hi) >> 1;\n    if (m < flatCoordinates[(mid + 1) * stride - 1]) {\n      hi = mid;\n    } else {\n      lo = mid + 1;\n    }\n  }\n  const m0 = flatCoordinates[lo * stride - 1];\n  if (m == m0) {\n    return flatCoordinates.slice((lo - 1) * stride, (lo - 1) * stride + stride);\n  }\n  const m1 = flatCoordinates[(lo + 1) * stride - 1];\n  const t = (m - m0) / (m1 - m0);\n  coordinate = [];\n  for (let i = 0; i < stride - 1; ++i) {\n    coordinate.push(\n      lerp(\n        flatCoordinates[(lo - 1) * stride + i],\n        flatCoordinates[lo * stride + i],\n        t\n      )\n    );\n  }\n  coordinate.push(m);\n  return coordinate;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<number>} ends Ends.\n * @param {number} stride Stride.\n * @param {number} m M.\n * @param {boolean} extrapolate Extrapolate.\n * @param {boolean} interpolate Interpolate.\n * @return {import(\"../../coordinate.js\").Coordinate|null} Coordinate.\n */\nexport function lineStringsCoordinateAtM(\n  flatCoordinates,\n  offset,\n  ends,\n  stride,\n  m,\n  extrapolate,\n  interpolate\n) {\n  if (interpolate) {\n    return lineStringCoordinateAtM(\n      flatCoordinates,\n      offset,\n      ends[ends.length - 1],\n      stride,\n      m,\n      extrapolate\n    );\n  }\n  let coordinate;\n  if (m < flatCoordinates[stride - 1]) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(0, stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    }\n    return null;\n  }\n  if (flatCoordinates[flatCoordinates.length - 1] < m) {\n    if (extrapolate) {\n      coordinate = flatCoordinates.slice(flatCoordinates.length - stride);\n      coordinate[stride - 1] = m;\n      return coordinate;\n    }\n    return null;\n  }\n  for (let i = 0, ii = ends.length; i < ii; ++i) {\n    const end = ends[i];\n    if (offset == end) {\n      continue;\n    }\n    if (m < flatCoordinates[offset + stride - 1]) {\n      return null;\n    }\n    if (m <= flatCoordinates[end - 1]) {\n      return lineStringCoordinateAtM(\n        flatCoordinates,\n        offset,\n        end,\n        stride,\n        m,\n        false\n      );\n    }\n    offset = end;\n  }\n  return null;\n}\n","/**\n * @module ol/render/Feature\n */\nimport Feature from '../Feature.js';\nimport {\n  LineString,\n  MultiLineString,\n  MultiPoint,\n  MultiPolygon,\n  Point,\n  Polygon,\n} from '../geom.js';\nimport {\n  compose as composeTransform,\n  create as createTransform,\n} from '../transform.js';\nimport {\n  createOrUpdateFromCoordinate,\n  createOrUpdateFromFlatCoordinates,\n  getCenter,\n  getHeight,\n} from '../extent.js';\nimport {\n  douglasPeucker,\n  douglasPeuckerArray,\n  quantizeArray,\n} from '../geom/flat/simplify.js';\nimport {extend} from '../array.js';\nimport {\n  getInteriorPointOfArray,\n  getInteriorPointsOfMultiArray,\n} from '../geom/flat/interiorpoint.js';\nimport {get as getProjection} from '../proj.js';\nimport {inflateEnds} from '../geom/flat/orient.js';\nimport {interpolatePoint} from '../geom/flat/interpolate.js';\nimport {linearRingss as linearRingssCenter} from '../geom/flat/center.js';\nimport {memoizeOne} from '../functions.js';\nimport {transform2D} from '../geom/flat/transform.js';\n\n/**\n * @typedef {'Point' | 'LineString' | 'LinearRing' | 'Polygon' | 'MultiPoint' | 'MultiLineString'} Type\n * The geometry type.  One of `'Point'`, `'LineString'`, `'LinearRing'`,\n * `'Polygon'`, `'MultiPoint'` or 'MultiLineString'`.\n */\n\n/**\n * @type {import(\"../transform.js\").Transform}\n */\nconst tmpTransform = createTransform();\n\n/**\n * Lightweight, read-only, {@link module:ol/Feature~Feature} and {@link module:ol/geom/Geometry~Geometry} like\n * structure, optimized for vector tile rendering and styling. Geometry access\n * through the API is limited to getting the type and extent of the geometry.\n */\nclass RenderFeature {\n  /**\n   * @param {Type} type Geometry type.\n   * @param {Array<number>} flatCoordinates Flat coordinates. These always need\n   *     to be right-handed for polygons.\n   * @param {Array<number>} ends Ends.\n   * @param {number} stride Stride.\n   * @param {Object<string, *>} properties Properties.\n   * @param {number|string|undefined} id Feature id.\n   */\n  constructor(type, flatCoordinates, ends, stride, properties, id) {\n    /**\n     * @type {import(\"../style/Style.js\").StyleFunction|undefined}\n     */\n    this.styleFunction;\n\n    /**\n     * @private\n     * @type {import(\"../extent.js\").Extent|undefined}\n     */\n    this.extent_;\n\n    /**\n     * @private\n     * @type {number|string|undefined}\n     */\n    this.id_ = id;\n\n    /**\n     * @private\n     * @type {Type}\n     */\n    this.type_ = type;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatCoordinates_ = flatCoordinates;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatInteriorPoints_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.flatMidpoints_ = null;\n\n    /**\n     * @private\n     * @type {Array<number>}\n     */\n    this.ends_ = ends;\n\n    /**\n     * @private\n     * @type {Object<string, *>}\n     */\n    this.properties_ = properties;\n\n    /**\n     * @type {number}\n     */\n    this.squaredTolerance_;\n\n    /**\n     * @type {number}\n     */\n    this.stride_ = stride;\n\n    /**\n     * @private\n     * @type {RenderFeature}\n     */\n    this.simplifiedGeometry_;\n  }\n\n  /**\n   * Get a feature property by its key.\n   * @param {string} key Key\n   * @return {*} Value for the requested key.\n   * @api\n   */\n  get(key) {\n    return this.properties_[key];\n  }\n\n  /**\n   * Get the extent of this feature's geometry.\n   * @return {import(\"../extent.js\").Extent} Extent.\n   * @api\n   */\n  getExtent() {\n    if (!this.extent_) {\n      this.extent_ =\n        this.type_ === 'Point'\n          ? createOrUpdateFromCoordinate(this.flatCoordinates_)\n          : createOrUpdateFromFlatCoordinates(\n              this.flatCoordinates_,\n              0,\n              this.flatCoordinates_.length,\n              2\n            );\n    }\n    return this.extent_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoint() {\n    if (!this.flatInteriorPoints_) {\n      const flatCenter = getCenter(this.getExtent());\n      this.flatInteriorPoints_ = getInteriorPointOfArray(\n        this.flatCoordinates_,\n        0,\n        /** @type {Array<number>} */ (this.ends_),\n        2,\n        flatCenter,\n        0\n      );\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * @return {Array<number>} Flat interior points.\n   */\n  getFlatInteriorPoints() {\n    if (!this.flatInteriorPoints_) {\n      const ends = inflateEnds(this.flatCoordinates_, this.ends_);\n      const flatCenters = linearRingssCenter(this.flatCoordinates_, 0, ends, 2);\n      this.flatInteriorPoints_ = getInteriorPointsOfMultiArray(\n        this.flatCoordinates_,\n        0,\n        ends,\n        2,\n        flatCenters\n      );\n    }\n    return this.flatInteriorPoints_;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoint.\n   */\n  getFlatMidpoint() {\n    if (!this.flatMidpoints_) {\n      this.flatMidpoints_ = interpolatePoint(\n        this.flatCoordinates_,\n        0,\n        this.flatCoordinates_.length,\n        2,\n        0.5\n      );\n    }\n    return this.flatMidpoints_;\n  }\n\n  /**\n   * @return {Array<number>} Flat midpoints.\n   */\n  getFlatMidpoints() {\n    if (!this.flatMidpoints_) {\n      this.flatMidpoints_ = [];\n      const flatCoordinates = this.flatCoordinates_;\n      let offset = 0;\n      const ends = /** @type {Array<number>} */ (this.ends_);\n      for (let i = 0, ii = ends.length; i < ii; ++i) {\n        const end = ends[i];\n        const midpoint = interpolatePoint(flatCoordinates, offset, end, 2, 0.5);\n        extend(this.flatMidpoints_, midpoint);\n        offset = end;\n      }\n    }\n    return this.flatMidpoints_;\n  }\n\n  /**\n   * Get the feature identifier.  This is a stable identifier for the feature and\n   * is set when reading data from a remote source.\n   * @return {number|string|undefined} Id.\n   * @api\n   */\n  getId() {\n    return this.id_;\n  }\n\n  /**\n   * @return {Array<number>} Flat coordinates.\n   */\n  getOrientedFlatCoordinates() {\n    return this.flatCoordinates_;\n  }\n\n  /**\n   * For API compatibility with {@link module:ol/Feature~Feature}, this method is useful when\n   * determining the geometry type in style function (see {@link #getType}).\n   * @return {RenderFeature} Feature.\n   * @api\n   */\n  getGeometry() {\n    return this;\n  }\n\n  /**\n   * @param {number} squaredTolerance Squared tolerance.\n   * @return {RenderFeature} Simplified geometry.\n   */\n  getSimplifiedGeometry(squaredTolerance) {\n    return this;\n  }\n\n  /**\n   * Get a transformed and simplified version of the geometry.\n   * @param {number} squaredTolerance Squared tolerance.\n   * @param {import(\"../proj.js\").TransformFunction} [transform] Optional transform function.\n   * @return {RenderFeature} Simplified geometry.\n   */\n  simplifyTransformed(squaredTolerance, transform) {\n    return this;\n  }\n\n  /**\n   * Get the feature properties.\n   * @return {Object<string, *>} Feature properties.\n   * @api\n   */\n  getProperties() {\n    return this.properties_;\n  }\n\n  /**\n   * Get an object of all property names and values.  This has the same behavior as getProperties,\n   * but is here to conform with the {@link module:ol/Feature~Feature} interface.\n   * @return {Object<string, *>?} Object.\n   */\n  getPropertiesInternal() {\n    return this.properties_;\n  }\n\n  /**\n   * @return {number} Stride.\n   */\n  getStride() {\n    return this.stride_;\n  }\n\n  /**\n   * @return {import('../style/Style.js').StyleFunction|undefined} Style\n   */\n  getStyleFunction() {\n    return this.styleFunction;\n  }\n\n  /**\n   * Get the type of this feature's geometry.\n   * @return {Type} Geometry type.\n   * @api\n   */\n  getType() {\n    return this.type_;\n  }\n\n  /**\n   * Transform geometry coordinates from tile pixel space to projected.\n   *\n   * @param {import(\"../proj.js\").ProjectionLike} projection The data projection\n   */\n  transform(projection) {\n    projection = getProjection(projection);\n    const pixelExtent = projection.getExtent();\n    const projectedExtent = projection.getWorldExtent();\n    if (pixelExtent && projectedExtent) {\n      const scale = getHeight(projectedExtent) / getHeight(pixelExtent);\n      composeTransform(\n        tmpTransform,\n        projectedExtent[0],\n        projectedExtent[3],\n        scale,\n        -scale,\n        0,\n        0,\n        0\n      );\n      transform2D(\n        this.flatCoordinates_,\n        0,\n        this.flatCoordinates_.length,\n        2,\n        tmpTransform,\n        this.flatCoordinates_\n      );\n    }\n  }\n\n  /**\n   * Apply a transform function to the coordinates of the geometry.\n   * The geometry is modified in place.\n   * If you do not want the geometry modified in place, first `clone()` it and\n   * then use this function on the clone.\n   * @param {import(\"../proj.js\").TransformFunction} transformFn Transform function.\n   */\n  applyTransform(transformFn) {\n    transformFn(this.flatCoordinates_, this.flatCoordinates_, this.stride_);\n  }\n\n  /**\n   * @return {RenderFeature} A cloned render feature.\n   */\n  clone() {\n    return new RenderFeature(\n      this.type_,\n      this.flatCoordinates_.slice(),\n      this.ends_.slice(),\n      this.stride_,\n      Object.assign({}, this.properties_),\n      this.id_\n    );\n  }\n\n  /**\n   * @return {Array<number>} Ends.\n   */\n  getEnds() {\n    return this.ends_;\n  }\n\n  /**\n   * Add transform and resolution based geometry simplification to this instance.\n   * @return {RenderFeature} This render feature.\n   */\n  enableSimplifyTransformed() {\n    this.simplifyTransformed = memoizeOne((squaredTolerance, transform) => {\n      if (squaredTolerance === this.squaredTolerance_) {\n        return this.simplifiedGeometry_;\n      }\n      this.simplifiedGeometry_ = this.clone();\n      if (transform) {\n        this.simplifiedGeometry_.applyTransform(transform);\n      }\n      const simplifiedFlatCoordinates =\n        this.simplifiedGeometry_.getFlatCoordinates();\n      let simplifiedEnds;\n      switch (this.type_) {\n        case 'LineString':\n          simplifiedFlatCoordinates.length = douglasPeucker(\n            simplifiedFlatCoordinates,\n            0,\n            this.simplifiedGeometry_.flatCoordinates_.length,\n            this.simplifiedGeometry_.stride_,\n            squaredTolerance,\n            simplifiedFlatCoordinates,\n            0\n          );\n          simplifiedEnds = [simplifiedFlatCoordinates.length];\n          break;\n        case 'MultiLineString':\n          simplifiedEnds = [];\n          simplifiedFlatCoordinates.length = douglasPeuckerArray(\n            simplifiedFlatCoordinates,\n            0,\n            this.simplifiedGeometry_.ends_,\n            this.simplifiedGeometry_.stride_,\n            squaredTolerance,\n            simplifiedFlatCoordinates,\n            0,\n            simplifiedEnds\n          );\n          break;\n        case 'Polygon':\n          simplifiedEnds = [];\n          simplifiedFlatCoordinates.length = quantizeArray(\n            simplifiedFlatCoordinates,\n            0,\n            this.simplifiedGeometry_.ends_,\n            this.simplifiedGeometry_.stride_,\n            Math.sqrt(squaredTolerance),\n            simplifiedFlatCoordinates,\n            0,\n            simplifiedEnds\n          );\n          break;\n        default:\n      }\n      if (simplifiedEnds) {\n        this.simplifiedGeometry_ = new RenderFeature(\n          this.type_,\n          simplifiedFlatCoordinates,\n          simplifiedEnds,\n          2,\n          this.properties_,\n          this.id_\n        );\n      }\n      this.squaredTolerance_ = squaredTolerance;\n      return this.simplifiedGeometry_;\n    });\n    return this;\n  }\n}\n\n/**\n * @return {Array<number>} Flat coordinates.\n */\nRenderFeature.prototype.getFlatCoordinates =\n  RenderFeature.prototype.getOrientedFlatCoordinates;\n\n/**\n * Create a geometry from an `ol/render/Feature`\n * @param {RenderFeature} renderFeature\n * Render Feature\n * @return {Point|MultiPoint|LineString|MultiLineString|Polygon|MultiPolygon}\n * New geometry instance.\n * @api\n */\nexport function toGeometry(renderFeature) {\n  const geometryType = renderFeature.getType();\n  switch (geometryType) {\n    case 'Point':\n      return new Point(renderFeature.getFlatCoordinates());\n    case 'MultiPoint':\n      return new MultiPoint(renderFeature.getFlatCoordinates(), 'XY');\n    case 'LineString':\n      return new LineString(renderFeature.getFlatCoordinates(), 'XY');\n    case 'MultiLineString':\n      return new MultiLineString(\n        renderFeature.getFlatCoordinates(),\n        'XY',\n        /** @type {Array<number>} */ (renderFeature.getEnds())\n      );\n    case 'Polygon':\n      const flatCoordinates = renderFeature.getFlatCoordinates();\n      const ends = /** @type {Array<number>} */ (renderFeature.getEnds());\n      const endss = inflateEnds(flatCoordinates, ends);\n      return endss.length > 1\n        ? new MultiPolygon(flatCoordinates, 'XY', endss)\n        : new Polygon(flatCoordinates, 'XY', ends);\n    default:\n      throw new Error('Invalid geometry type:' + geometryType);\n  }\n}\n\n/**\n * Create an `ol/Feature` from an `ol/render/Feature`\n * @param {RenderFeature} renderFeature RenderFeature\n * @param {string} [geometryName='geometry'] Geometry name to use\n * when creating the Feature.\n * @return {Feature} Newly constructed `ol/Feature` with properties,\n * geometry, and id copied over.\n * @api\n */\nexport function toFeature(renderFeature, geometryName) {\n  const id = renderFeature.getId();\n  const geometry = toGeometry(renderFeature);\n  const properties = renderFeature.getProperties();\n  const feature = new Feature();\n  if (geometryName !== undefined) {\n    feature.setGeometryName(geometryName);\n  }\n  feature.setGeometry(geometry);\n  if (id !== undefined) {\n    feature.setId(id);\n  }\n  feature.setProperties(properties, true);\n  return feature;\n}\n\nexport default RenderFeature;\n","/**\n * @module ol/geom/flat/center\n */\nimport {createEmpty, createOrUpdateFromFlatCoordinates} from '../../extent.js';\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {Array<Array<number>>} endss Endss.\n * @param {number} stride Stride.\n * @return {Array<number>} Flat centers.\n */\nexport function linearRingss(flatCoordinates, offset, endss, stride) {\n  const flatCenters = [];\n  let extent = createEmpty();\n  for (let i = 0, ii = endss.length; i < ii; ++i) {\n    const ends = endss[i];\n    extent = createOrUpdateFromFlatCoordinates(\n      flatCoordinates,\n      offset,\n      ends[0],\n      stride\n    );\n    flatCenters.push((extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2);\n    offset = ends[ends.length - 1];\n  }\n  return flatCenters;\n}\n","/**\n * @module ol/geom/flat/transform\n */\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {import(\"../../transform.js\").Transform} transform Transform.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function transform2D(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  transform,\n  dest\n) {\n  dest = dest ? dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const x = flatCoordinates[j];\n    const y = flatCoordinates[j + 1];\n    dest[i++] = transform[0] * x + transform[2] * y + transform[4];\n    dest[i++] = transform[1] * x + transform[3] * y + transform[5];\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} angle Angle.\n * @param {Array<number>} anchor Rotation anchor point.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function rotate(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  angle,\n  anchor,\n  dest\n) {\n  dest = dest ? dest : [];\n  const cos = Math.cos(angle);\n  const sin = Math.sin(angle);\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + deltaX * cos - deltaY * sin;\n    dest[i++] = anchorY + deltaX * sin + deltaY * cos;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * Scale the coordinates.\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} sx Scale factor in the x-direction.\n * @param {number} sy Scale factor in the y-direction.\n * @param {Array<number>} anchor Scale anchor point.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function scale(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  sx,\n  sy,\n  anchor,\n  dest\n) {\n  dest = dest ? dest : [];\n  const anchorX = anchor[0];\n  const anchorY = anchor[1];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    const deltaX = flatCoordinates[j] - anchorX;\n    const deltaY = flatCoordinates[j + 1] - anchorY;\n    dest[i++] = anchorX + sx * deltaX;\n    dest[i++] = anchorY + sy * deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n\n/**\n * @param {Array<number>} flatCoordinates Flat coordinates.\n * @param {number} offset Offset.\n * @param {number} end End.\n * @param {number} stride Stride.\n * @param {number} deltaX Delta X.\n * @param {number} deltaY Delta Y.\n * @param {Array<number>} [dest] Destination.\n * @return {Array<number>} Transformed coordinates.\n */\nexport function translate(\n  flatCoordinates,\n  offset,\n  end,\n  stride,\n  deltaX,\n  deltaY,\n  dest\n) {\n  dest = dest ? dest : [];\n  let i = 0;\n  for (let j = offset; j < end; j += stride) {\n    dest[i++] = flatCoordinates[j] + deltaX;\n    dest[i++] = flatCoordinates[j + 1] + deltaY;\n    for (let k = j + 2; k < j + stride; ++k) {\n      dest[i++] = flatCoordinates[k];\n    }\n  }\n  if (dest && dest.length != i) {\n    dest.length = i;\n  }\n  return dest;\n}\n","/**\n * @module ol/functions\n */\n\nimport {equals as arrayEquals} from './array.js';\n\n/**\n * Always returns true.\n * @return {boolean} true.\n */\nexport function TRUE() {\n  return true;\n}\n\n/**\n * Always returns false.\n * @return {boolean} false.\n */\nexport function FALSE() {\n  return false;\n}\n\n/**\n * A reusable function, used e.g. as a default for callbacks.\n *\n * @return {void} Nothing.\n */\nexport function VOID() {}\n\n/**\n * Wrap a function in another function that remembers the last return.  If the\n * returned function is called twice in a row with the same arguments and the same\n * this object, it will return the value from the first call in the second call.\n *\n * @param {function(...any): ReturnType} fn The function to memoize.\n * @return {function(...any): ReturnType} The memoized function.\n * @template ReturnType\n */\nexport function memoizeOne(fn) {\n  let called = false;\n\n  /** @type {ReturnType} */\n  let lastResult;\n\n  /** @type {Array<any>} */\n  let lastArgs;\n\n  let lastThis;\n\n  return function () {\n    const nextArgs = Array.prototype.slice.call(arguments);\n    if (!called || this !== lastThis || !arrayEquals(nextArgs, lastArgs)) {\n      called = true;\n      lastThis = this;\n      lastArgs = nextArgs;\n      lastResult = fn.apply(this, arguments);\n    }\n    return lastResult;\n  };\n}\n\n/**\n * @template T\n * @param {function(): (T | Promise<T>)} getter A function that returns a value or a promise for a value.\n * @return {Promise<T>} A promise for the value.\n */\nexport function toPromise(getter) {\n  function promiseGetter() {\n    let value;\n    try {\n      value = getter();\n    } catch (err) {\n      return Promise.reject(err);\n    }\n    if (value instanceof Promise) {\n      return value;\n    }\n    return Promise.resolve(value);\n  }\n  return promiseGetter();\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.style.Stroke;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.style.Style;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.style.Text;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.functions;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.render.canvas;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.TileState;","const __WEBPACK_NAMESPACE_OBJECT__ = undefined;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.tileurlfunction;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.util;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.format.GeoJSON;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.tilegrid.TileGrid;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Image;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Layer;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Group;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.Map;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.Raster;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.Source;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.layer.Vector;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.Vector;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.proj.Units;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.View;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.loadingstrategy;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.tilegrid;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.events.Event;","import Circle from 'ol/style/Circle.js';\nimport Fill from 'ol/style/Fill.js';\nimport Icon from 'ol/style/Icon.js';\nimport RenderFeature from 'ol/render/Feature.js';\nimport Stroke from 'ol/style/Stroke.js';\nimport Style from 'ol/style/Style.js';\nimport Text from 'ol/style/Text.js';\nimport { toPromise } from 'ol/functions.js';\nimport { registerFont, checkedFonts } from 'ol/render/canvas.js';\nimport TileState from 'ol/TileState.js';\nimport { VectorTile } from 'ol';\nimport { expandUrl } from 'ol/tileurlfunction.js';\nimport { getUid } from 'ol/util.js';\nimport GeoJSON from 'ol/format/GeoJSON.js';\nimport ImageLayer from 'ol/layer/Image.js';\nimport Layer from 'ol/layer/Layer.js';\nimport LayerGroup from 'ol/layer/Group.js';\nimport MVT from 'ol/format/MVT.js';\nimport Map from 'ol/Map.js';\nimport Raster from 'ol/source/Raster.js';\nimport Source from 'ol/source/Source.js';\nimport TileGrid from 'ol/tilegrid/TileGrid.js';\nimport TileJSON from 'ol/source/TileJSON.js';\nimport TileLayer from 'ol/layer/Tile.js';\nimport VectorLayer from 'ol/layer/Vector.js';\nimport VectorSource from 'ol/source/Vector.js';\nimport VectorTileLayer from 'ol/layer/VectorTile.js';\nimport VectorTileSource, { defaultLoadFunction } from 'ol/source/VectorTile.js';\nimport View from 'ol/View.js';\nimport { METERS_PER_UNIT } from 'ol/proj/Units.js';\nimport { bbox } from 'ol/loadingstrategy.js';\nimport { createXYZ } from 'ol/tilegrid.js';\nimport { get as get$1, getUserProjection, getPointResolution, fromLonLat, equivalent } from 'ol/proj.js';\nimport { getCenter, getTopLeft } from 'ol/extent.js';\nimport BaseEvent from 'ol/events/Event.js';\nimport EventType from 'ol/events/EventType.js';\n\nfunction getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar csscolorparser = {};\n\nvar parseCSSColor_1;\n// (c) Dean McNamee <dean@gmail.com>, 2012.\n//\n// https://github.com/deanm/css-color-parser-js\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to\n// deal in the Software without restriction, including without limitation the\n// rights to use, copy, modify, merge, publish, distribute, sublicense, and/or\n// sell copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n// FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS\n// IN THE SOFTWARE.\n// http://www.w3.org/TR/css3-color/\nvar kCSSColorTable = {\n    'transparent': [\n        0,\n        0,\n        0,\n        0\n    ],\n    'aliceblue': [\n        240,\n        248,\n        255,\n        1\n    ],\n    'antiquewhite': [\n        250,\n        235,\n        215,\n        1\n    ],\n    'aqua': [\n        0,\n        255,\n        255,\n        1\n    ],\n    'aquamarine': [\n        127,\n        255,\n        212,\n        1\n    ],\n    'azure': [\n        240,\n        255,\n        255,\n        1\n    ],\n    'beige': [\n        245,\n        245,\n        220,\n        1\n    ],\n    'bisque': [\n        255,\n        228,\n        196,\n        1\n    ],\n    'black': [\n        0,\n        0,\n        0,\n        1\n    ],\n    'blanchedalmond': [\n        255,\n        235,\n        205,\n        1\n    ],\n    'blue': [\n        0,\n        0,\n        255,\n        1\n    ],\n    'blueviolet': [\n        138,\n        43,\n        226,\n        1\n    ],\n    'brown': [\n        165,\n        42,\n        42,\n        1\n    ],\n    'burlywood': [\n        222,\n        184,\n        135,\n        1\n    ],\n    'cadetblue': [\n        95,\n        158,\n        160,\n        1\n    ],\n    'chartreuse': [\n        127,\n        255,\n        0,\n        1\n    ],\n    'chocolate': [\n        210,\n        105,\n        30,\n        1\n    ],\n    'coral': [\n        255,\n        127,\n        80,\n        1\n    ],\n    'cornflowerblue': [\n        100,\n        149,\n        237,\n        1\n    ],\n    'cornsilk': [\n        255,\n        248,\n        220,\n        1\n    ],\n    'crimson': [\n        220,\n        20,\n        60,\n        1\n    ],\n    'cyan': [\n        0,\n        255,\n        255,\n        1\n    ],\n    'darkblue': [\n        0,\n        0,\n        139,\n        1\n    ],\n    'darkcyan': [\n        0,\n        139,\n        139,\n        1\n    ],\n    'darkgoldenrod': [\n        184,\n        134,\n        11,\n        1\n    ],\n    'darkgray': [\n        169,\n        169,\n        169,\n        1\n    ],\n    'darkgreen': [\n        0,\n        100,\n        0,\n        1\n    ],\n    'darkgrey': [\n        169,\n        169,\n        169,\n        1\n    ],\n    'darkkhaki': [\n        189,\n        183,\n        107,\n        1\n    ],\n    'darkmagenta': [\n        139,\n        0,\n        139,\n        1\n    ],\n    'darkolivegreen': [\n        85,\n        107,\n        47,\n        1\n    ],\n    'darkorange': [\n        255,\n        140,\n        0,\n        1\n    ],\n    'darkorchid': [\n        153,\n        50,\n        204,\n        1\n    ],\n    'darkred': [\n        139,\n        0,\n        0,\n        1\n    ],\n    'darksalmon': [\n        233,\n        150,\n        122,\n        1\n    ],\n    'darkseagreen': [\n        143,\n        188,\n        143,\n        1\n    ],\n    'darkslateblue': [\n        72,\n        61,\n        139,\n        1\n    ],\n    'darkslategray': [\n        47,\n        79,\n        79,\n        1\n    ],\n    'darkslategrey': [\n        47,\n        79,\n        79,\n        1\n    ],\n    'darkturquoise': [\n        0,\n        206,\n        209,\n        1\n    ],\n    'darkviolet': [\n        148,\n        0,\n        211,\n        1\n    ],\n    'deeppink': [\n        255,\n        20,\n        147,\n        1\n    ],\n    'deepskyblue': [\n        0,\n        191,\n        255,\n        1\n    ],\n    'dimgray': [\n        105,\n        105,\n        105,\n        1\n    ],\n    'dimgrey': [\n        105,\n        105,\n        105,\n        1\n    ],\n    'dodgerblue': [\n        30,\n        144,\n        255,\n        1\n    ],\n    'firebrick': [\n        178,\n        34,\n        34,\n        1\n    ],\n    'floralwhite': [\n        255,\n        250,\n        240,\n        1\n    ],\n    'forestgreen': [\n        34,\n        139,\n        34,\n        1\n    ],\n    'fuchsia': [\n        255,\n        0,\n        255,\n        1\n    ],\n    'gainsboro': [\n        220,\n        220,\n        220,\n        1\n    ],\n    'ghostwhite': [\n        248,\n        248,\n        255,\n        1\n    ],\n    'gold': [\n        255,\n        215,\n        0,\n        1\n    ],\n    'goldenrod': [\n        218,\n        165,\n        32,\n        1\n    ],\n    'gray': [\n        128,\n        128,\n        128,\n        1\n    ],\n    'green': [\n        0,\n        128,\n        0,\n        1\n    ],\n    'greenyellow': [\n        173,\n        255,\n        47,\n        1\n    ],\n    'grey': [\n        128,\n        128,\n        128,\n        1\n    ],\n    'honeydew': [\n        240,\n        255,\n        240,\n        1\n    ],\n    'hotpink': [\n        255,\n        105,\n        180,\n        1\n    ],\n    'indianred': [\n        205,\n        92,\n        92,\n        1\n    ],\n    'indigo': [\n        75,\n        0,\n        130,\n        1\n    ],\n    'ivory': [\n        255,\n        255,\n        240,\n        1\n    ],\n    'khaki': [\n        240,\n        230,\n        140,\n        1\n    ],\n    'lavender': [\n        230,\n        230,\n        250,\n        1\n    ],\n    'lavenderblush': [\n        255,\n        240,\n        245,\n        1\n    ],\n    'lawngreen': [\n        124,\n        252,\n        0,\n        1\n    ],\n    'lemonchiffon': [\n        255,\n        250,\n        205,\n        1\n    ],\n    'lightblue': [\n        173,\n        216,\n        230,\n        1\n    ],\n    'lightcoral': [\n        240,\n        128,\n        128,\n        1\n    ],\n    'lightcyan': [\n        224,\n        255,\n        255,\n        1\n    ],\n    'lightgoldenrodyellow': [\n        250,\n        250,\n        210,\n        1\n    ],\n    'lightgray': [\n        211,\n        211,\n        211,\n        1\n    ],\n    'lightgreen': [\n        144,\n        238,\n        144,\n        1\n    ],\n    'lightgrey': [\n        211,\n        211,\n        211,\n        1\n    ],\n    'lightpink': [\n        255,\n        182,\n        193,\n        1\n    ],\n    'lightsalmon': [\n        255,\n        160,\n        122,\n        1\n    ],\n    'lightseagreen': [\n        32,\n        178,\n        170,\n        1\n    ],\n    'lightskyblue': [\n        135,\n        206,\n        250,\n        1\n    ],\n    'lightslategray': [\n        119,\n        136,\n        153,\n        1\n    ],\n    'lightslategrey': [\n        119,\n        136,\n        153,\n        1\n    ],\n    'lightsteelblue': [\n        176,\n        196,\n        222,\n        1\n    ],\n    'lightyellow': [\n        255,\n        255,\n        224,\n        1\n    ],\n    'lime': [\n        0,\n        255,\n        0,\n        1\n    ],\n    'limegreen': [\n        50,\n        205,\n        50,\n        1\n    ],\n    'linen': [\n        250,\n        240,\n        230,\n        1\n    ],\n    'magenta': [\n        255,\n        0,\n        255,\n        1\n    ],\n    'maroon': [\n        128,\n        0,\n        0,\n        1\n    ],\n    'mediumaquamarine': [\n        102,\n        205,\n        170,\n        1\n    ],\n    'mediumblue': [\n        0,\n        0,\n        205,\n        1\n    ],\n    'mediumorchid': [\n        186,\n        85,\n        211,\n        1\n    ],\n    'mediumpurple': [\n        147,\n        112,\n        219,\n        1\n    ],\n    'mediumseagreen': [\n        60,\n        179,\n        113,\n        1\n    ],\n    'mediumslateblue': [\n        123,\n        104,\n        238,\n        1\n    ],\n    'mediumspringgreen': [\n        0,\n        250,\n        154,\n        1\n    ],\n    'mediumturquoise': [\n        72,\n        209,\n        204,\n        1\n    ],\n    'mediumvioletred': [\n        199,\n        21,\n        133,\n        1\n    ],\n    'midnightblue': [\n        25,\n        25,\n        112,\n        1\n    ],\n    'mintcream': [\n        245,\n        255,\n        250,\n        1\n    ],\n    'mistyrose': [\n        255,\n        228,\n        225,\n        1\n    ],\n    'moccasin': [\n        255,\n        228,\n        181,\n        1\n    ],\n    'navajowhite': [\n        255,\n        222,\n        173,\n        1\n    ],\n    'navy': [\n        0,\n        0,\n        128,\n        1\n    ],\n    'oldlace': [\n        253,\n        245,\n        230,\n        1\n    ],\n    'olive': [\n        128,\n        128,\n        0,\n        1\n    ],\n    'olivedrab': [\n        107,\n        142,\n        35,\n        1\n    ],\n    'orange': [\n        255,\n        165,\n        0,\n        1\n    ],\n    'orangered': [\n        255,\n        69,\n        0,\n        1\n    ],\n    'orchid': [\n        218,\n        112,\n        214,\n        1\n    ],\n    'palegoldenrod': [\n        238,\n        232,\n        170,\n        1\n    ],\n    'palegreen': [\n        152,\n        251,\n        152,\n        1\n    ],\n    'paleturquoise': [\n        175,\n        238,\n        238,\n        1\n    ],\n    'palevioletred': [\n        219,\n        112,\n        147,\n        1\n    ],\n    'papayawhip': [\n        255,\n        239,\n        213,\n        1\n    ],\n    'peachpuff': [\n        255,\n        218,\n        185,\n        1\n    ],\n    'peru': [\n        205,\n        133,\n        63,\n        1\n    ],\n    'pink': [\n        255,\n        192,\n        203,\n        1\n    ],\n    'plum': [\n        221,\n        160,\n        221,\n        1\n    ],\n    'powderblue': [\n        176,\n        224,\n        230,\n        1\n    ],\n    'purple': [\n        128,\n        0,\n        128,\n        1\n    ],\n    'rebeccapurple': [\n        102,\n        51,\n        153,\n        1\n    ],\n    'red': [\n        255,\n        0,\n        0,\n        1\n    ],\n    'rosybrown': [\n        188,\n        143,\n        143,\n        1\n    ],\n    'royalblue': [\n        65,\n        105,\n        225,\n        1\n    ],\n    'saddlebrown': [\n        139,\n        69,\n        19,\n        1\n    ],\n    'salmon': [\n        250,\n        128,\n        114,\n        1\n    ],\n    'sandybrown': [\n        244,\n        164,\n        96,\n        1\n    ],\n    'seagreen': [\n        46,\n        139,\n        87,\n        1\n    ],\n    'seashell': [\n        255,\n        245,\n        238,\n        1\n    ],\n    'sienna': [\n        160,\n        82,\n        45,\n        1\n    ],\n    'silver': [\n        192,\n        192,\n        192,\n        1\n    ],\n    'skyblue': [\n        135,\n        206,\n        235,\n        1\n    ],\n    'slateblue': [\n        106,\n        90,\n        205,\n        1\n    ],\n    'slategray': [\n        112,\n        128,\n        144,\n        1\n    ],\n    'slategrey': [\n        112,\n        128,\n        144,\n        1\n    ],\n    'snow': [\n        255,\n        250,\n        250,\n        1\n    ],\n    'springgreen': [\n        0,\n        255,\n        127,\n        1\n    ],\n    'steelblue': [\n        70,\n        130,\n        180,\n        1\n    ],\n    'tan': [\n        210,\n        180,\n        140,\n        1\n    ],\n    'teal': [\n        0,\n        128,\n        128,\n        1\n    ],\n    'thistle': [\n        216,\n        191,\n        216,\n        1\n    ],\n    'tomato': [\n        255,\n        99,\n        71,\n        1\n    ],\n    'turquoise': [\n        64,\n        224,\n        208,\n        1\n    ],\n    'violet': [\n        238,\n        130,\n        238,\n        1\n    ],\n    'wheat': [\n        245,\n        222,\n        179,\n        1\n    ],\n    'white': [\n        255,\n        255,\n        255,\n        1\n    ],\n    'whitesmoke': [\n        245,\n        245,\n        245,\n        1\n    ],\n    'yellow': [\n        255,\n        255,\n        0,\n        1\n    ],\n    'yellowgreen': [\n        154,\n        205,\n        50,\n        1\n    ]\n};\nfunction clamp_css_byte(i) {\n    // Clamp to integer 0 .. 255.\n    i = Math.round(i);\n    // Seems to be what Chrome does (vs truncation).\n    return i < 0 ? 0 : i > 255 ? 255 : i;\n}\nfunction clamp_css_float(f) {\n    // Clamp to float 0.0 .. 1.0.\n    return f < 0 ? 0 : f > 1 ? 1 : f;\n}\nfunction parse_css_int(str) {\n    // int or percentage.\n    if (str[str.length - 1] === '%')\n        return clamp_css_byte(parseFloat(str) / 100 * 255);\n    return clamp_css_byte(parseInt(str));\n}\nfunction parse_css_float(str) {\n    // float or percentage.\n    if (str[str.length - 1] === '%')\n        return clamp_css_float(parseFloat(str) / 100);\n    return clamp_css_float(parseFloat(str));\n}\nfunction css_hue_to_rgb(m1, m2, h) {\n    if (h < 0)\n        h += 1;\n    else if (h > 1)\n        h -= 1;\n    if (h * 6 < 1)\n        return m1 + (m2 - m1) * h * 6;\n    if (h * 2 < 1)\n        return m2;\n    if (h * 3 < 2)\n        return m1 + (m2 - m1) * (2 / 3 - h) * 6;\n    return m1;\n}\nfunction parseCSSColor(css_str) {\n    // Remove all whitespace, not compliant, but should just be more accepting.\n    var str = css_str.replace(/ /g, '').toLowerCase();\n    // Color keywords (and transparent) lookup.\n    if (str in kCSSColorTable)\n        return kCSSColorTable[str].slice();\n    // dup.\n    // #abc and #abc123 syntax.\n    if (str[0] === '#') {\n        if (str.length === 4) {\n            var iv = parseInt(str.substr(1), 16);\n            // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 4095))\n                return null;\n            // Covers NaN.\n            return [\n                (iv & 3840) >> 4 | (iv & 3840) >> 8,\n                iv & 240 | (iv & 240) >> 4,\n                iv & 15 | (iv & 15) << 4,\n                1\n            ];\n        } else if (str.length === 7) {\n            var iv = parseInt(str.substr(1), 16);\n            // TODO(deanm): Stricter parsing.\n            if (!(iv >= 0 && iv <= 16777215))\n                return null;\n            // Covers NaN.\n            return [\n                (iv & 16711680) >> 16,\n                (iv & 65280) >> 8,\n                iv & 255,\n                1\n            ];\n        }\n        return null;\n    }\n    var op = str.indexOf('('), ep = str.indexOf(')');\n    if (op !== -1 && ep + 1 === str.length) {\n        var fname = str.substr(0, op);\n        var params = str.substr(op + 1, ep - (op + 1)).split(',');\n        var alpha = 1;\n        // To allow case fallthrough.\n        switch (fname) {\n        case 'rgba':\n            if (params.length !== 4)\n                return null;\n            alpha = parse_css_float(params.pop());\n        // Fall through.\n        case 'rgb':\n            if (params.length !== 3)\n                return null;\n            return [\n                parse_css_int(params[0]),\n                parse_css_int(params[1]),\n                parse_css_int(params[2]),\n                alpha\n            ];\n        case 'hsla':\n            if (params.length !== 4)\n                return null;\n            alpha = parse_css_float(params.pop());\n        // Fall through.\n        case 'hsl':\n            if (params.length !== 3)\n                return null;\n            var h = (parseFloat(params[0]) % 360 + 360) % 360 / 360;\n            // 0 .. 1\n            // NOTE(deanm): According to the CSS spec s/l should only be\n            // percentages, but we don't bother and let float or percentage.\n            var s = parse_css_float(params[1]);\n            var l = parse_css_float(params[2]);\n            var m2 = l <= 0.5 ? l * (s + 1) : l + s - l * s;\n            var m1 = l * 2 - m2;\n            return [\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h + 1 / 3) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h) * 255),\n                clamp_css_byte(css_hue_to_rgb(m1, m2, h - 1 / 3) * 255),\n                alpha\n            ];\n        default:\n            return null;\n        }\n    }\n    return null;\n}\ntry {\n    parseCSSColor_1 = csscolorparser.parseCSSColor = parseCSSColor;\n} catch (e) {\n}\n\n//      \n/**\n * An RGBA color value. Create instances from color strings using the static\n * method `Color.parse`. The constructor accepts RGB channel values in the range\n * `[0, 1]`, premultiplied by A.\n *\n * @param {number} r The red channel.\n * @param {number} g The green channel.\n * @param {number} b The blue channel.\n * @param {number} a The alpha channel.\n * @private\n */\nclass Color {\n    constructor(r, g, b, a = 1) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n        this.a = a;\n    }\n    /**\n     * Parses valid CSS color strings and returns a `Color` instance.\n     * @returns A `Color` instance, or `undefined` if the input is not a valid color string.\n     */\n    static parse(input) {\n        if (!input) {\n            return undefined;\n        }\n        if (input instanceof Color) {\n            return input;\n        }\n        if (typeof input !== 'string') {\n            return undefined;\n        }\n        const rgba = parseCSSColor_1(input);\n        if (!rgba) {\n            return undefined;\n        }\n        return new Color(rgba[0] / 255 * rgba[3], rgba[1] / 255 * rgba[3], rgba[2] / 255 * rgba[3], rgba[3]);\n    }\n    /**\n     * Returns an RGBA string representing the color value.\n     *\n     * @returns An RGBA string.\n     * @example\n     * var purple = new Color.parse('purple');\n     * purple.toString; // = \"rgba(128,0,128,1)\"\n     * var translucentGreen = new Color.parse('rgba(26, 207, 26, .73)');\n     * translucentGreen.toString(); // = \"rgba(26,207,26,0.73)\"\n     */\n    toString() {\n        const [r, g, b, a] = this.toArray();\n        return `rgba(${ Math.round(r) },${ Math.round(g) },${ Math.round(b) },${ a })`;\n    }\n    /**\n     * Returns an RGBA array of values representing the color, unpremultiplied by A.\n     *\n     * @returns An array of RGBA color values in the range [0, 255].\n     */\n    toArray() {\n        const {r, g, b, a} = this;\n        return a === 0 ? [\n            0,\n            0,\n            0,\n            0\n        ] : [\n            r * 255 / a,\n            g * 255 / a,\n            b * 255 / a,\n            a\n        ];\n    }\n    /**\n     * Returns a RGBA array of float values representing the color, unpremultiplied by A.\n     *\n     * @returns An array of RGBA color values in the range [0, 1].\n     */\n    toArray01() {\n        const {r, g, b, a} = this;\n        return a === 0 ? [\n            0,\n            0,\n            0,\n            0\n        ] : [\n            r / a,\n            g / a,\n            b / a,\n            a\n        ];\n    }\n    /**\n     * Returns an RGBA array of values representing the color, premultiplied by A.\n     *\n     * @returns An array of RGBA color values in the range [0, 1].\n     */\n    toArray01PremultipliedAlpha() {\n        const {r, g, b, a} = this;\n        return [\n            r,\n            g,\n            b,\n            a\n        ];\n    }\n}\nColor.black = new Color(0, 0, 0, 1);\nColor.white = new Color(1, 1, 1, 1);\nColor.transparent = new Color(0, 0, 0, 0);\nColor.red = new Color(1, 0, 0, 1);\nColor.blue = new Color(0, 0, 1, 1);\nvar Color$1 = Color;\n\nfunction convertLiteral(value) {\n    return typeof value === 'object' ? [\n        'literal',\n        value\n    ] : value;\n}\nfunction convertFunction(parameters, propertySpec) {\n    let stops = parameters.stops;\n    if (!stops) {\n        // identity function\n        return convertIdentityFunction(parameters, propertySpec);\n    }\n    const zoomAndFeatureDependent = stops && typeof stops[0][0] === 'object';\n    const featureDependent = zoomAndFeatureDependent || parameters.property !== undefined;\n    const zoomDependent = zoomAndFeatureDependent || !featureDependent;\n    stops = stops.map(stop => {\n        if (!featureDependent && propertySpec.tokens && typeof stop[1] === 'string') {\n            return [\n                stop[0],\n                convertTokenString(stop[1])\n            ];\n        }\n        return [\n            stop[0],\n            convertLiteral(stop[1])\n        ];\n    });\n    if (zoomAndFeatureDependent) {\n        return convertZoomAndPropertyFunction(parameters, propertySpec, stops);\n    } else if (zoomDependent) {\n        return convertZoomFunction(parameters, propertySpec, stops);\n    } else {\n        return convertPropertyFunction(parameters, propertySpec, stops);\n    }\n}\nfunction convertIdentityFunction(parameters, propertySpec) {\n    const get = [\n        'get',\n        parameters.property\n    ];\n    if (parameters.default === undefined) {\n        // By default, expressions for string-valued properties get coerced. To preserve\n        // legacy function semantics, insert an explicit assertion instead.\n        return propertySpec.type === 'string' ? [\n            'string',\n            get\n        ] : get;\n    } else if (propertySpec.type === 'enum') {\n        return [\n            'match',\n            get,\n            Object.keys(propertySpec.values),\n            get,\n            parameters.default\n        ];\n    } else {\n        const expression = [\n            propertySpec.type === 'color' ? 'to-color' : propertySpec.type,\n            get,\n            convertLiteral(parameters.default)\n        ];\n        if (propertySpec.type === 'array') {\n            expression.splice(1, 0, propertySpec.value, propertySpec.length || null);\n        }\n        return expression;\n    }\n}\nfunction getInterpolateOperator(parameters) {\n    switch (parameters.colorSpace) {\n    case 'hcl':\n        return 'interpolate-hcl';\n    case 'lab':\n        return 'interpolate-lab';\n    default:\n        return 'interpolate';\n    }\n}\nfunction convertZoomAndPropertyFunction(parameters, propertySpec, stops) {\n    const featureFunctionParameters = {};\n    const featureFunctionStops = {};\n    const zoomStops = [];\n    for (let s = 0; s < stops.length; s++) {\n        const stop = stops[s];\n        const zoom = stop[0].zoom;\n        if (featureFunctionParameters[zoom] === undefined) {\n            featureFunctionParameters[zoom] = {\n                zoom,\n                type: parameters.type,\n                property: parameters.property,\n                default: parameters.default\n            };\n            featureFunctionStops[zoom] = [];\n            zoomStops.push(zoom);\n        }\n        featureFunctionStops[zoom].push([\n            stop[0].value,\n            stop[1]\n        ]);\n    }\n    // the interpolation type for the zoom dimension of a zoom-and-property\n    // function is determined directly from the style property specification\n    // for which it's being used: linear for interpolatable properties, step\n    // otherwise.\n    const functionType = getFunctionType({}, propertySpec);\n    if (functionType === 'exponential') {\n        const expression = [\n            getInterpolateOperator(parameters),\n            ['linear'],\n            ['zoom']\n        ];\n        for (const z of zoomStops) {\n            const output = convertPropertyFunction(featureFunctionParameters[z], propertySpec, featureFunctionStops[z]);\n            appendStopPair(expression, z, output, false);\n        }\n        return expression;\n    } else {\n        const expression = [\n            'step',\n            ['zoom']\n        ];\n        for (const z of zoomStops) {\n            const output = convertPropertyFunction(featureFunctionParameters[z], propertySpec, featureFunctionStops[z]);\n            appendStopPair(expression, z, output, true);\n        }\n        fixupDegenerateStepCurve(expression);\n        return expression;\n    }\n}\nfunction coalesce(a, b) {\n    if (a !== undefined)\n        return a;\n    if (b !== undefined)\n        return b;\n}\nfunction getFallback(parameters, propertySpec) {\n    const defaultValue = convertLiteral(coalesce(parameters.default, propertySpec.default));\n    /*\n     * Some fields with type: resolvedImage have an undefined default.\n     * Because undefined is an invalid value for resolvedImage, set fallback to\n     * an empty string instead of undefined to ensure output\n     * passes validation.\n     */\n    if (defaultValue === undefined && propertySpec.type === 'resolvedImage') {\n        return '';\n    }\n    return defaultValue;\n}\nfunction convertPropertyFunction(parameters, propertySpec, stops) {\n    const type = getFunctionType(parameters, propertySpec);\n    const get = [\n        'get',\n        parameters.property\n    ];\n    if (type === 'categorical' && typeof stops[0][0] === 'boolean') {\n        const expression = ['case'];\n        for (const stop of stops) {\n            expression.push([\n                '==',\n                get,\n                stop[0]\n            ], stop[1]);\n        }\n        expression.push(getFallback(parameters, propertySpec));\n        return expression;\n    } else if (type === 'categorical') {\n        const expression = [\n            'match',\n            get\n        ];\n        for (const stop of stops) {\n            appendStopPair(expression, stop[0], stop[1], false);\n        }\n        expression.push(getFallback(parameters, propertySpec));\n        return expression;\n    } else if (type === 'interval') {\n        const expression = [\n            'step',\n            [\n                'number',\n                get\n            ]\n        ];\n        for (const stop of stops) {\n            appendStopPair(expression, stop[0], stop[1], true);\n        }\n        fixupDegenerateStepCurve(expression);\n        return parameters.default === undefined ? expression : [\n            'case',\n            [\n                '==',\n                [\n                    'typeof',\n                    get\n                ],\n                'number'\n            ],\n            expression,\n            convertLiteral(parameters.default)\n        ];\n    } else if (type === 'exponential') {\n        const base = parameters.base !== undefined ? parameters.base : 1;\n        const expression = [\n            getInterpolateOperator(parameters),\n            base === 1 ? ['linear'] : [\n                'exponential',\n                base\n            ],\n            [\n                'number',\n                get\n            ]\n        ];\n        for (const stop of stops) {\n            appendStopPair(expression, stop[0], stop[1], false);\n        }\n        return parameters.default === undefined ? expression : [\n            'case',\n            [\n                '==',\n                [\n                    'typeof',\n                    get\n                ],\n                'number'\n            ],\n            expression,\n            convertLiteral(parameters.default)\n        ];\n    } else {\n        throw new Error(`Unknown property function type ${ type }`);\n    }\n}\nfunction convertZoomFunction(parameters, propertySpec, stops, input = ['zoom']) {\n    const type = getFunctionType(parameters, propertySpec);\n    let expression;\n    let isStep = false;\n    if (type === 'interval') {\n        expression = [\n            'step',\n            input\n        ];\n        isStep = true;\n    } else if (type === 'exponential') {\n        const base = parameters.base !== undefined ? parameters.base : 1;\n        expression = [\n            getInterpolateOperator(parameters),\n            base === 1 ? ['linear'] : [\n                'exponential',\n                base\n            ],\n            input\n        ];\n    } else {\n        throw new Error(`Unknown zoom function type \"${ type }\"`);\n    }\n    for (const stop of stops) {\n        appendStopPair(expression, stop[0], stop[1], isStep);\n    }\n    fixupDegenerateStepCurve(expression);\n    return expression;\n}\nfunction fixupDegenerateStepCurve(expression) {\n    // degenerate step curve (i.e. a constant function): add a noop stop\n    if (expression[0] === 'step' && expression.length === 3) {\n        expression.push(0);\n        expression.push(expression[3]);\n    }\n}\nfunction appendStopPair(curve, input, output, isStep) {\n    // Skip duplicate stop values. They were not validated for functions, but they are for expressions.\n    // https://github.com/mapbox/mapbox-gl-js/issues/4107\n    if (curve.length > 3 && input === curve[curve.length - 2]) {\n        return;\n    }\n    // step curves don't get the first input value, as it is redundant.\n    if (!(isStep && curve.length === 2)) {\n        curve.push(input);\n    }\n    curve.push(output);\n}\nfunction getFunctionType(parameters, propertySpec) {\n    if (parameters.type) {\n        return parameters.type;\n    } else {\n        return propertySpec.expression.interpolated ? 'exponential' : 'interval';\n    }\n}\n// \"String with {name} token\" => [\"concat\", \"String with \", [\"get\", \"name\"], \" token\"]\nfunction convertTokenString(s) {\n    const result = ['concat'];\n    const re = /{([^{}]+)}/g;\n    let pos = 0;\n    for (let match = re.exec(s); match !== null; match = re.exec(s)) {\n        const literal = s.slice(pos, re.lastIndex - match[0].length);\n        pos = re.lastIndex;\n        if (literal.length > 0)\n            result.push(literal);\n        result.push([\n            'get',\n            match[1]\n        ]);\n    }\n    if (result.length === 1) {\n        return s;\n    }\n    if (pos < s.length) {\n        result.push(s.slice(pos));\n    } else if (result.length === 2) {\n        return [\n            'to-string',\n            result[1]\n        ];\n    }\n    return result;\n}\n\n//      \nclass ParsingError extends Error {\n    constructor(key, message) {\n        super(message);\n        this.message = message;\n        this.key = key;\n    }\n}\nvar ParsingError$1 = ParsingError;\n\n//      \n/**\n * Tracks `let` bindings during expression parsing.\n * @private\n */\nclass Scope {\n    constructor(parent, bindings = []) {\n        this.parent = parent;\n        this.bindings = {};\n        for (const [name, expression] of bindings) {\n            this.bindings[name] = expression;\n        }\n    }\n    concat(bindings) {\n        return new Scope(this, bindings);\n    }\n    get(name) {\n        if (this.bindings[name]) {\n            return this.bindings[name];\n        }\n        if (this.parent) {\n            return this.parent.get(name);\n        }\n        throw new Error(`${ name } not found in scope.`);\n    }\n    has(name) {\n        if (this.bindings[name])\n            return true;\n        return this.parent ? this.parent.has(name) : false;\n    }\n}\nvar Scope$1 = Scope;\n\n//      \nconst NullType = { kind: 'null' };\nconst NumberType = { kind: 'number' };\nconst StringType = { kind: 'string' };\nconst BooleanType = { kind: 'boolean' };\nconst ColorType = { kind: 'color' };\nconst ObjectType = { kind: 'object' };\nconst ValueType = { kind: 'value' };\nconst ErrorType = { kind: 'error' };\nconst CollatorType = { kind: 'collator' };\nconst FormattedType = { kind: 'formatted' };\nconst ResolvedImageType = { kind: 'resolvedImage' };\nfunction array$1(itemType, N) {\n    return {\n        kind: 'array',\n        itemType,\n        N\n    };\n}\nfunction toString$1(type) {\n    if (type.kind === 'array') {\n        const itemType = toString$1(type.itemType);\n        return typeof type.N === 'number' ? `array<${ itemType }, ${ type.N }>` : type.itemType.kind === 'value' ? 'array' : `array<${ itemType }>`;\n    } else {\n        return type.kind;\n    }\n}\nconst valueMemberTypes = [\n    NullType,\n    NumberType,\n    StringType,\n    BooleanType,\n    ColorType,\n    FormattedType,\n    ObjectType,\n    array$1(ValueType),\n    ResolvedImageType\n];\n/**\n * Returns null if `t` is a subtype of `expected`; otherwise returns an\n * error message.\n * @private\n */\nfunction checkSubtype(expected, t) {\n    if (t.kind === 'error') {\n        // Error is a subtype of every type\n        return null;\n    } else if (expected.kind === 'array') {\n        if (t.kind === 'array' && (t.N === 0 && t.itemType.kind === 'value' || !checkSubtype(expected.itemType, t.itemType)) && (typeof expected.N !== 'number' || expected.N === t.N)) {\n            return null;\n        }\n    } else if (expected.kind === t.kind) {\n        return null;\n    } else if (expected.kind === 'value') {\n        for (const memberType of valueMemberTypes) {\n            if (!checkSubtype(memberType, t)) {\n                return null;\n            }\n        }\n    }\n    return `Expected ${ toString$1(expected) } but found ${ toString$1(t) } instead.`;\n}\nfunction isValidType(provided, allowedTypes) {\n    return allowedTypes.some(t => t.kind === provided.kind);\n}\nfunction isValidNativeType(provided, allowedTypes) {\n    return allowedTypes.some(t => {\n        if (t === 'null') {\n            return provided === null;\n        } else if (t === 'array') {\n            return Array.isArray(provided);\n        } else if (t === 'object') {\n            return provided && !Array.isArray(provided) && typeof provided === 'object';\n        } else {\n            return t === typeof provided;\n        }\n    });\n}\n\n//      \n// Flow type declarations for Intl cribbed from\n// https://github.com/facebook/flow/issues/1270\nclass Collator {\n    constructor(caseSensitive, diacriticSensitive, locale) {\n        if (caseSensitive)\n            this.sensitivity = diacriticSensitive ? 'variant' : 'case';\n        else\n            this.sensitivity = diacriticSensitive ? 'accent' : 'base';\n        this.locale = locale;\n        this.collator = new Intl.Collator(this.locale ? this.locale : [], {\n            sensitivity: this.sensitivity,\n            usage: 'search'\n        });\n    }\n    compare(lhs, rhs) {\n        return this.collator.compare(lhs, rhs);\n    }\n    resolvedLocale() {\n        // We create a Collator without \"usage: search\" because we don't want\n        // the search options encoded in our result (e.g. \"en-u-co-search\")\n        return new Intl.Collator(this.locale ? this.locale : []).resolvedOptions().locale;\n    }\n}\n\n//      \nclass FormattedSection {\n    constructor(text, image, scale, fontStack, textColor) {\n        // combine characters so that diacritic marks are not separate code points\n        this.text = text.normalize ? text.normalize() : text;\n        this.image = image;\n        this.scale = scale;\n        this.fontStack = fontStack;\n        this.textColor = textColor;\n    }\n}\nclass Formatted {\n    constructor(sections) {\n        this.sections = sections;\n    }\n    static fromString(unformatted) {\n        return new Formatted([new FormattedSection(unformatted, null, null, null, null)]);\n    }\n    isEmpty() {\n        if (this.sections.length === 0)\n            return true;\n        return !this.sections.some(section => section.text.length !== 0 || section.image && section.image.name.length !== 0);\n    }\n    static factory(text) {\n        if (text instanceof Formatted) {\n            return text;\n        } else {\n            return Formatted.fromString(text);\n        }\n    }\n    toString() {\n        if (this.sections.length === 0)\n            return '';\n        return this.sections.map(section => section.text).join('');\n    }\n    serialize() {\n        const serialized = ['format'];\n        for (const section of this.sections) {\n            if (section.image) {\n                serialized.push([\n                    'image',\n                    section.image.name\n                ]);\n                continue;\n            }\n            serialized.push(section.text);\n            const options = {};\n            if (section.fontStack) {\n                options['text-font'] = [\n                    'literal',\n                    section.fontStack.split(',')\n                ];\n            }\n            if (section.scale) {\n                options['font-scale'] = section.scale;\n            }\n            if (section.textColor) {\n                options['text-color'] = ['rgba'].concat(section.textColor.toArray());\n            }\n            serialized.push(options);\n        }\n        return serialized;\n    }\n}\n\n//      \nclass ResolvedImage {\n    constructor(options) {\n        this.name = options.name;\n        this.available = options.available;\n    }\n    toString() {\n        return this.name;\n    }\n    static fromString(name) {\n        if (!name)\n            return null;\n        // treat empty values as no image\n        return new ResolvedImage({\n            name,\n            available: false\n        });\n    }\n    serialize() {\n        return [\n            'image',\n            this.name\n        ];\n    }\n}\n\nfunction validateRGBA(r, g, b, a) {\n    if (!(typeof r === 'number' && r >= 0 && r <= 255 && typeof g === 'number' && g >= 0 && g <= 255 && typeof b === 'number' && b >= 0 && b <= 255)) {\n        const value = typeof a === 'number' ? [\n            r,\n            g,\n            b,\n            a\n        ] : [\n            r,\n            g,\n            b\n        ];\n        return `Invalid rgba value [${ value.join(', ') }]: 'r', 'g', and 'b' must be between 0 and 255.`;\n    }\n    if (!(typeof a === 'undefined' || typeof a === 'number' && a >= 0 && a <= 1)) {\n        return `Invalid rgba value [${ [\n            r,\n            g,\n            b,\n            a\n        ].join(', ') }]: 'a' must be between 0 and 1.`;\n    }\n    return null;\n}\nfunction isValue(mixed) {\n    if (mixed === null) {\n        return true;\n    } else if (typeof mixed === 'string') {\n        return true;\n    } else if (typeof mixed === 'boolean') {\n        return true;\n    } else if (typeof mixed === 'number') {\n        return true;\n    } else if (mixed instanceof Color$1) {\n        return true;\n    } else if (mixed instanceof Collator) {\n        return true;\n    } else if (mixed instanceof Formatted) {\n        return true;\n    } else if (mixed instanceof ResolvedImage) {\n        return true;\n    } else if (Array.isArray(mixed)) {\n        for (const item of mixed) {\n            if (!isValue(item)) {\n                return false;\n            }\n        }\n        return true;\n    } else if (typeof mixed === 'object') {\n        for (const key in mixed) {\n            if (!isValue(mixed[key])) {\n                return false;\n            }\n        }\n        return true;\n    } else {\n        return false;\n    }\n}\nfunction typeOf(value) {\n    if (value === null) {\n        return NullType;\n    } else if (typeof value === 'string') {\n        return StringType;\n    } else if (typeof value === 'boolean') {\n        return BooleanType;\n    } else if (typeof value === 'number') {\n        return NumberType;\n    } else if (value instanceof Color$1) {\n        return ColorType;\n    } else if (value instanceof Collator) {\n        return CollatorType;\n    } else if (value instanceof Formatted) {\n        return FormattedType;\n    } else if (value instanceof ResolvedImage) {\n        return ResolvedImageType;\n    } else if (Array.isArray(value)) {\n        const length = value.length;\n        let itemType;\n        for (const item of value) {\n            const t = typeOf(item);\n            if (!itemType) {\n                itemType = t;\n            } else if (itemType === t) {\n                continue;\n            } else {\n                itemType = ValueType;\n                break;\n            }\n        }\n        return array$1(itemType || ValueType, length);\n    } else {\n        return ObjectType;\n    }\n}\nfunction toString(value) {\n    const type = typeof value;\n    if (value === null) {\n        return '';\n    } else if (type === 'string' || type === 'number' || type === 'boolean') {\n        return String(value);\n    } else if (value instanceof Color$1 || value instanceof Formatted || value instanceof ResolvedImage) {\n        return value.toString();\n    } else {\n        return JSON.stringify(value);\n    }\n}\n\nclass Literal {\n    constructor(type, value) {\n        this.type = type;\n        this.value = value;\n    }\n    static parse(args, context) {\n        if (args.length !== 2)\n            return context.error(`'literal' expression requires exactly one argument, but found ${ args.length - 1 } instead.`);\n        if (!isValue(args[1]))\n            return context.error(`invalid value`);\n        const value = args[1];\n        let type = typeOf(value);\n        // special case: infer the item type if possible for zero-length arrays\n        const expected = context.expectedType;\n        if (type.kind === 'array' && type.N === 0 && expected && expected.kind === 'array' && (typeof expected.N !== 'number' || expected.N === 0)) {\n            type = expected;\n        }\n        return new Literal(type, value);\n    }\n    evaluate() {\n        return this.value;\n    }\n    eachChild() {\n    }\n    outputDefined() {\n        return true;\n    }\n    serialize() {\n        if (this.type.kind === 'array' || this.type.kind === 'object') {\n            return [\n                'literal',\n                this.value\n            ];\n        } else if (this.value instanceof Color$1) {\n            // Constant-folding can generate Literal expressions that you\n            // couldn't actually generate with a \"literal\" expression,\n            // so we have to implement an equivalent serialization here\n            return ['rgba'].concat(this.value.toArray());\n        } else if (this.value instanceof Formatted) {\n            // Same as Color\n            return this.value.serialize();\n        } else {\n            return this.value;\n        }\n    }\n}\nvar Literal$1 = Literal;\n\n//      \nclass RuntimeError {\n    constructor(message) {\n        this.name = 'ExpressionEvaluationError';\n        this.message = message;\n    }\n    toJSON() {\n        return this.message;\n    }\n}\nvar RuntimeError$1 = RuntimeError;\n\nconst types$2 = {\n    string: StringType,\n    number: NumberType,\n    boolean: BooleanType,\n    object: ObjectType\n};\nclass Assertion {\n    constructor(type, args) {\n        this.type = type;\n        this.args = args;\n    }\n    static parse(args, context) {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n        let i = 1;\n        let type;\n        const name = args[0];\n        if (name === 'array') {\n            let itemType;\n            if (args.length > 2) {\n                const type = args[1];\n                if (typeof type !== 'string' || !(type in types$2) || type === 'object')\n                    return context.error('The item type argument of \"array\" must be one of string, number, boolean', 1);\n                itemType = types$2[type];\n                i++;\n            } else {\n                itemType = ValueType;\n            }\n            let N;\n            if (args.length > 3) {\n                if (args[2] !== null && (typeof args[2] !== 'number' || args[2] < 0 || args[2] !== Math.floor(args[2]))) {\n                    return context.error('The length argument to \"array\" must be a positive integer literal', 2);\n                }\n                N = args[2];\n                i++;\n            }\n            type = array$1(itemType, N);\n        } else {\n            type = types$2[name];\n        }\n        const parsed = [];\n        for (; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input)\n                return null;\n            parsed.push(input);\n        }\n        return new Assertion(type, parsed);\n    }\n    evaluate(ctx) {\n        for (let i = 0; i < this.args.length; i++) {\n            const value = this.args[i].evaluate(ctx);\n            const error = checkSubtype(this.type, typeOf(value));\n            if (!error) {\n                return value;\n            } else if (i === this.args.length - 1) {\n                throw new RuntimeError$1(`Expected value to be of type ${ toString$1(this.type) }, but found ${ toString$1(typeOf(value)) } instead.`);\n            }\n        }\n        return null;\n    }\n    eachChild(fn) {\n        this.args.forEach(fn);\n    }\n    outputDefined() {\n        return this.args.every(arg => arg.outputDefined());\n    }\n    serialize() {\n        const type = this.type;\n        const serialized = [type.kind];\n        if (type.kind === 'array') {\n            const itemType = type.itemType;\n            if (itemType.kind === 'string' || itemType.kind === 'number' || itemType.kind === 'boolean') {\n                serialized.push(itemType.kind);\n                const N = type.N;\n                if (typeof N === 'number' || this.args.length > 1) {\n                    serialized.push(N);\n                }\n            }\n        }\n        return serialized.concat(this.args.map(arg => arg.serialize()));\n    }\n}\nvar Assertion$1 = Assertion;\n\n//      \nclass FormatExpression {\n    constructor(sections) {\n        this.type = FormattedType;\n        this.sections = sections;\n    }\n    static parse(args, context) {\n        if (args.length < 2) {\n            return context.error(`Expected at least one argument.`);\n        }\n        const firstArg = args[1];\n        if (!Array.isArray(firstArg) && typeof firstArg === 'object') {\n            return context.error(`First argument must be an image or text section.`);\n        }\n        const sections = [];\n        let nextTokenMayBeObject = false;\n        for (let i = 1; i <= args.length - 1; ++i) {\n            const arg = args[i];\n            if (nextTokenMayBeObject && typeof arg === 'object' && !Array.isArray(arg)) {\n                nextTokenMayBeObject = false;\n                let scale = null;\n                if (arg['font-scale']) {\n                    scale = context.parse(arg['font-scale'], 1, NumberType);\n                    if (!scale)\n                        return null;\n                }\n                let font = null;\n                if (arg['text-font']) {\n                    font = context.parse(arg['text-font'], 1, array$1(StringType));\n                    if (!font)\n                        return null;\n                }\n                let textColor = null;\n                if (arg['text-color']) {\n                    textColor = context.parse(arg['text-color'], 1, ColorType);\n                    if (!textColor)\n                        return null;\n                }\n                const lastExpression = sections[sections.length - 1];\n                lastExpression.scale = scale;\n                lastExpression.font = font;\n                lastExpression.textColor = textColor;\n            } else {\n                const content = context.parse(args[i], 1, ValueType);\n                if (!content)\n                    return null;\n                const kind = content.type.kind;\n                if (kind !== 'string' && kind !== 'value' && kind !== 'null' && kind !== 'resolvedImage')\n                    return context.error(`Formatted text type must be 'string', 'value', 'image' or 'null'.`);\n                nextTokenMayBeObject = true;\n                sections.push({\n                    content,\n                    scale: null,\n                    font: null,\n                    textColor: null\n                });\n            }\n        }\n        return new FormatExpression(sections);\n    }\n    evaluate(ctx) {\n        const evaluateSection = section => {\n            const evaluatedContent = section.content.evaluate(ctx);\n            if (typeOf(evaluatedContent) === ResolvedImageType) {\n                return new FormattedSection('', evaluatedContent, null, null, null);\n            }\n            return new FormattedSection(toString(evaluatedContent), null, section.scale ? section.scale.evaluate(ctx) : null, section.font ? section.font.evaluate(ctx).join(',') : null, section.textColor ? section.textColor.evaluate(ctx) : null);\n        };\n        return new Formatted(this.sections.map(evaluateSection));\n    }\n    eachChild(fn) {\n        for (const section of this.sections) {\n            fn(section.content);\n            if (section.scale) {\n                fn(section.scale);\n            }\n            if (section.font) {\n                fn(section.font);\n            }\n            if (section.textColor) {\n                fn(section.textColor);\n            }\n        }\n    }\n    outputDefined() {\n        // Technically the combinatoric set of all children\n        // Usually, this.text will be undefined anyway\n        return false;\n    }\n    serialize() {\n        const serialized = ['format'];\n        for (const section of this.sections) {\n            serialized.push(section.content.serialize());\n            const options = {};\n            if (section.scale) {\n                options['font-scale'] = section.scale.serialize();\n            }\n            if (section.font) {\n                options['text-font'] = section.font.serialize();\n            }\n            if (section.textColor) {\n                options['text-color'] = section.textColor.serialize();\n            }\n            serialized.push(options);\n        }\n        return serialized;\n    }\n}\n\n//      \nclass ImageExpression {\n    constructor(input) {\n        this.type = ResolvedImageType;\n        this.input = input;\n    }\n    static parse(args, context) {\n        if (args.length !== 2) {\n            return context.error(`Expected two arguments.`);\n        }\n        const name = context.parse(args[1], 1, StringType);\n        if (!name)\n            return context.error(`No image name provided.`);\n        return new ImageExpression(name);\n    }\n    evaluate(ctx) {\n        const evaluatedImageName = this.input.evaluate(ctx);\n        const value = ResolvedImage.fromString(evaluatedImageName);\n        if (value && ctx.availableImages)\n            value.available = ctx.availableImages.indexOf(evaluatedImageName) > -1;\n        return value;\n    }\n    eachChild(fn) {\n        fn(this.input);\n    }\n    outputDefined() {\n        // The output of image is determined by the list of available images in the evaluation context\n        return false;\n    }\n    serialize() {\n        return [\n            'image',\n            this.input.serialize()\n        ];\n    }\n}\n\nconst types$1 = {\n    'to-boolean': BooleanType,\n    'to-color': ColorType,\n    'to-number': NumberType,\n    'to-string': StringType\n};\n/**\n * Special form for error-coalescing coercion expressions \"to-number\",\n * \"to-color\".  Since these coercions can fail at runtime, they accept multiple\n * arguments, only evaluating one at a time until one succeeds.\n *\n * @private\n */\nclass Coercion {\n    constructor(type, args) {\n        this.type = type;\n        this.args = args;\n    }\n    static parse(args, context) {\n        if (args.length < 2)\n            return context.error(`Expected at least one argument.`);\n        const name = args[0];\n        if ((name === 'to-boolean' || name === 'to-string') && args.length !== 2)\n            return context.error(`Expected one argument.`);\n        const type = types$1[name];\n        const parsed = [];\n        for (let i = 1; i < args.length; i++) {\n            const input = context.parse(args[i], i, ValueType);\n            if (!input)\n                return null;\n            parsed.push(input);\n        }\n        return new Coercion(type, parsed);\n    }\n    evaluate(ctx) {\n        if (this.type.kind === 'boolean') {\n            return Boolean(this.args[0].evaluate(ctx));\n        } else if (this.type.kind === 'color') {\n            let input;\n            let error;\n            for (const arg of this.args) {\n                input = arg.evaluate(ctx);\n                error = null;\n                if (input instanceof Color$1) {\n                    return input;\n                } else if (typeof input === 'string') {\n                    const c = ctx.parseColor(input);\n                    if (c)\n                        return c;\n                } else if (Array.isArray(input)) {\n                    if (input.length < 3 || input.length > 4) {\n                        error = `Invalid rbga value ${ JSON.stringify(input) }: expected an array containing either three or four numeric values.`;\n                    } else {\n                        error = validateRGBA(input[0], input[1], input[2], input[3]);\n                    }\n                    if (!error) {\n                        return new Color$1(input[0] / 255, input[1] / 255, input[2] / 255, input[3]);\n                    }\n                }\n            }\n            throw new RuntimeError$1(error || `Could not parse color from value '${ typeof input === 'string' ? input : String(JSON.stringify(input)) }'`);\n        } else if (this.type.kind === 'number') {\n            let value = null;\n            for (const arg of this.args) {\n                value = arg.evaluate(ctx);\n                if (value === null)\n                    return 0;\n                const num = Number(value);\n                if (isNaN(num))\n                    continue;\n                return num;\n            }\n            throw new RuntimeError$1(`Could not convert ${ JSON.stringify(value) } to number.`);\n        } else if (this.type.kind === 'formatted') {\n            // There is no explicit 'to-formatted' but this coercion can be implicitly\n            // created by properties that expect the 'formatted' type.\n            return Formatted.fromString(toString(this.args[0].evaluate(ctx)));\n        } else if (this.type.kind === 'resolvedImage') {\n            return ResolvedImage.fromString(toString(this.args[0].evaluate(ctx)));\n        } else {\n            return toString(this.args[0].evaluate(ctx));\n        }\n    }\n    eachChild(fn) {\n        this.args.forEach(fn);\n    }\n    outputDefined() {\n        return this.args.every(arg => arg.outputDefined());\n    }\n    serialize() {\n        if (this.type.kind === 'formatted') {\n            return new FormatExpression([{\n                    content: this.args[0],\n                    scale: null,\n                    font: null,\n                    textColor: null\n                }]).serialize();\n        }\n        if (this.type.kind === 'resolvedImage') {\n            return new ImageExpression(this.args[0]).serialize();\n        }\n        const serialized = [`to-${ this.type.kind }`];\n        this.eachChild(child => {\n            serialized.push(child.serialize());\n        });\n        return serialized;\n    }\n}\nvar Coercion$1 = Coercion;\n\n//      \nconst geometryTypes = [\n    'Unknown',\n    'Point',\n    'LineString',\n    'Polygon'\n];\nclass EvaluationContext {\n    constructor() {\n        this.globals = null;\n        this.feature = null;\n        this.featureState = null;\n        this.formattedSection = null;\n        this._parseColorCache = {};\n        this.availableImages = null;\n        this.canonical = null;\n        this.featureTileCoord = null;\n        this.featureDistanceData = null;\n    }\n    id() {\n        return this.feature && this.feature.id !== undefined ? this.feature.id : null;\n    }\n    geometryType() {\n        return this.feature ? typeof this.feature.type === 'number' ? geometryTypes[this.feature.type] : this.feature.type : null;\n    }\n    geometry() {\n        return this.feature && 'geometry' in this.feature ? this.feature.geometry : null;\n    }\n    canonicalID() {\n        return this.canonical;\n    }\n    properties() {\n        return this.feature && this.feature.properties || {};\n    }\n    distanceFromCenter() {\n        if (this.featureTileCoord && this.featureDistanceData) {\n            const c = this.featureDistanceData.center;\n            const scale = this.featureDistanceData.scale;\n            const {x, y} = this.featureTileCoord;\n            // Calculate the distance vector `d` (left handed)\n            const dX = x * scale - c[0];\n            const dY = y * scale - c[1];\n            // The bearing vector `b` (left handed)\n            const bX = this.featureDistanceData.bearing[0];\n            const bY = this.featureDistanceData.bearing[1];\n            // Distance is calculated as `dot(d, v)`\n            const dist = bX * dX + bY * dY;\n            return dist;\n        }\n        return 0;\n    }\n    parseColor(input) {\n        let cached = this._parseColorCache[input];\n        if (!cached) {\n            cached = this._parseColorCache[input] = Color$1.parse(input);\n        }\n        return cached;\n    }\n}\nvar EvaluationContext$1 = EvaluationContext;\n\n//      \nclass CompoundExpression {\n    constructor(name, type, evaluate, args) {\n        this.name = name;\n        this.type = type;\n        this._evaluate = evaluate;\n        this.args = args;\n    }\n    evaluate(ctx) {\n        return this._evaluate(ctx, this.args);\n    }\n    eachChild(fn) {\n        this.args.forEach(fn);\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        return [this.name].concat(this.args.map(arg => arg.serialize()));\n    }\n    static parse(args, context) {\n        const op = args[0];\n        const definition = CompoundExpression.definitions[op];\n        if (!definition) {\n            return context.error(`Unknown expression \"${ op }\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        }\n        // Now check argument types against each signature\n        const type = Array.isArray(definition) ? definition[0] : definition.type;\n        const availableOverloads = Array.isArray(definition) ? [[\n                definition[1],\n                definition[2]\n            ]] : definition.overloads;\n        const overloads = availableOverloads.filter(([signature]) => !Array.isArray(signature) || // varags\n        signature.length === args.length - 1    // correct param count\n);\n        let signatureContext = null;\n        for (const [params, evaluate] of overloads) {\n            // Use a fresh context for each attempted signature so that, if\n            // we eventually succeed, we haven't polluted `context.errors`.\n            signatureContext = new ParsingContext$1(context.registry, context.path, null, context.scope);\n            // First parse all the args, potentially coercing to the\n            // types expected by this overload.\n            const parsedArgs = [];\n            let argParseFailed = false;\n            for (let i = 1; i < args.length; i++) {\n                const arg = args[i];\n                const expectedType = Array.isArray(params) ? params[i - 1] : params.type;\n                const parsed = signatureContext.parse(arg, 1 + parsedArgs.length, expectedType);\n                if (!parsed) {\n                    argParseFailed = true;\n                    break;\n                }\n                parsedArgs.push(parsed);\n            }\n            if (argParseFailed) {\n                // Couldn't coerce args of this overload to expected type, move\n                // on to next one.\n                continue;\n            }\n            if (Array.isArray(params)) {\n                if (params.length !== parsedArgs.length) {\n                    signatureContext.error(`Expected ${ params.length } arguments, but found ${ parsedArgs.length } instead.`);\n                    continue;\n                }\n            }\n            for (let i = 0; i < parsedArgs.length; i++) {\n                const expected = Array.isArray(params) ? params[i] : params.type;\n                const arg = parsedArgs[i];\n                signatureContext.concat(i + 1).checkSubtype(expected, arg.type);\n            }\n            if (signatureContext.errors.length === 0) {\n                return new CompoundExpression(op, type, evaluate, parsedArgs);\n            }\n        }\n        if (overloads.length === 1) {\n            context.errors.push(...signatureContext.errors);\n        } else {\n            const expected = overloads.length ? overloads : availableOverloads;\n            const signatures = expected.map(([params]) => stringifySignature(params)).join(' | ');\n            const actualTypes = [];\n            // For error message, re-parse arguments without trying to\n            // apply any coercions\n            for (let i = 1; i < args.length; i++) {\n                const parsed = context.parse(args[i], 1 + actualTypes.length);\n                if (!parsed)\n                    return null;\n                actualTypes.push(toString$1(parsed.type));\n            }\n            context.error(`Expected arguments of type ${ signatures }, but found (${ actualTypes.join(', ') }) instead.`);\n        }\n        return null;\n    }\n    static register(registry, definitions) {\n        CompoundExpression.definitions = definitions;\n        for (const name in definitions) {\n            registry[name] = CompoundExpression;\n        }\n    }\n}\nfunction stringifySignature(signature) {\n    if (Array.isArray(signature)) {\n        return `(${ signature.map(toString$1).join(', ') })`;\n    } else {\n        return `(${ toString$1(signature.type) }...)`;\n    }\n}\nvar CompoundExpression$1 = CompoundExpression;\n\n//      \nclass CollatorExpression {\n    constructor(caseSensitive, diacriticSensitive, locale) {\n        this.type = CollatorType;\n        this.locale = locale;\n        this.caseSensitive = caseSensitive;\n        this.diacriticSensitive = diacriticSensitive;\n    }\n    static parse(args, context) {\n        if (args.length !== 2)\n            return context.error(`Expected one argument.`);\n        const options = args[1];\n        if (typeof options !== 'object' || Array.isArray(options))\n            return context.error(`Collator options argument must be an object.`);\n        const caseSensitive = context.parse(options['case-sensitive'] === undefined ? false : options['case-sensitive'], 1, BooleanType);\n        if (!caseSensitive)\n            return null;\n        const diacriticSensitive = context.parse(options['diacritic-sensitive'] === undefined ? false : options['diacritic-sensitive'], 1, BooleanType);\n        if (!diacriticSensitive)\n            return null;\n        let locale = null;\n        if (options['locale']) {\n            locale = context.parse(options['locale'], 1, StringType);\n            if (!locale)\n                return null;\n        }\n        return new CollatorExpression(caseSensitive, diacriticSensitive, locale);\n    }\n    evaluate(ctx) {\n        return new Collator(this.caseSensitive.evaluate(ctx), this.diacriticSensitive.evaluate(ctx), this.locale ? this.locale.evaluate(ctx) : null);\n    }\n    eachChild(fn) {\n        fn(this.caseSensitive);\n        fn(this.diacriticSensitive);\n        if (this.locale) {\n            fn(this.locale);\n        }\n    }\n    outputDefined() {\n        // Technically the set of possible outputs is the combinatoric set of Collators produced\n        // by all possible outputs of locale/caseSensitive/diacriticSensitive\n        // But for the primary use of Collators in comparison operators, we ignore the Collator's\n        // possible outputs anyway, so we can get away with leaving this false for now.\n        return false;\n    }\n    serialize() {\n        const options = {};\n        options['case-sensitive'] = this.caseSensitive.serialize();\n        options['diacritic-sensitive'] = this.diacriticSensitive.serialize();\n        if (this.locale) {\n            options['locale'] = this.locale.serialize();\n        }\n        return [\n            'collator',\n            options\n        ];\n    }\n}\n\n//      \n// minX, minY, maxX, maxY\nconst EXTENT = 8192;\nfunction updateBBox(bbox, coord) {\n    bbox[0] = Math.min(bbox[0], coord[0]);\n    bbox[1] = Math.min(bbox[1], coord[1]);\n    bbox[2] = Math.max(bbox[2], coord[0]);\n    bbox[3] = Math.max(bbox[3], coord[1]);\n}\nfunction mercatorXfromLng(lng) {\n    return (180 + lng) / 360;\n}\nfunction mercatorYfromLat(lat) {\n    return (180 - 180 / Math.PI * Math.log(Math.tan(Math.PI / 4 + lat * Math.PI / 360))) / 360;\n}\nfunction boxWithinBox(bbox1, bbox2) {\n    if (bbox1[0] <= bbox2[0])\n        return false;\n    if (bbox1[2] >= bbox2[2])\n        return false;\n    if (bbox1[1] <= bbox2[1])\n        return false;\n    if (bbox1[3] >= bbox2[3])\n        return false;\n    return true;\n}\nfunction getTileCoordinates(p, canonical) {\n    const x = mercatorXfromLng(p[0]);\n    const y = mercatorYfromLat(p[1]);\n    const tilesAtZoom = Math.pow(2, canonical.z);\n    return [\n        Math.round(x * tilesAtZoom * EXTENT),\n        Math.round(y * tilesAtZoom * EXTENT)\n    ];\n}\nfunction onBoundary(p, p1, p2) {\n    const x1 = p[0] - p1[0];\n    const y1 = p[1] - p1[1];\n    const x2 = p[0] - p2[0];\n    const y2 = p[1] - p2[1];\n    return x1 * y2 - x2 * y1 === 0 && x1 * x2 <= 0 && y1 * y2 <= 0;\n}\nfunction rayIntersect(p, p1, p2) {\n    return p1[1] > p[1] !== p2[1] > p[1] && p[0] < (p2[0] - p1[0]) * (p[1] - p1[1]) / (p2[1] - p1[1]) + p1[0];\n}\n// ray casting algorithm for detecting if point is in polygon\nfunction pointWithinPolygon(point, rings) {\n    let inside = false;\n    for (let i = 0, len = rings.length; i < len; i++) {\n        const ring = rings[i];\n        for (let j = 0, len2 = ring.length; j < len2 - 1; j++) {\n            if (onBoundary(point, ring[j], ring[j + 1]))\n                return false;\n            if (rayIntersect(point, ring[j], ring[j + 1]))\n                inside = !inside;\n        }\n    }\n    return inside;\n}\nfunction pointWithinPolygons(point, polygons) {\n    for (let i = 0; i < polygons.length; i++) {\n        if (pointWithinPolygon(point, polygons[i]))\n            return true;\n    }\n    return false;\n}\nfunction perp(v1, v2) {\n    return v1[0] * v2[1] - v1[1] * v2[0];\n}\n// check if p1 and p2 are in different sides of line segment q1->q2\nfunction twoSided(p1, p2, q1, q2) {\n    // q1->p1 (x1, y1), q1->p2 (x2, y2), q1->q2 (x3, y3)\n    const x1 = p1[0] - q1[0];\n    const y1 = p1[1] - q1[1];\n    const x2 = p2[0] - q1[0];\n    const y2 = p2[1] - q1[1];\n    const x3 = q2[0] - q1[0];\n    const y3 = q2[1] - q1[1];\n    const det1 = x1 * y3 - x3 * y1;\n    const det2 = x2 * y3 - x3 * y2;\n    if (det1 > 0 && det2 < 0 || det1 < 0 && det2 > 0)\n        return true;\n    return false;\n}\n// a, b are end points for line segment1, c and d are end points for line segment2\nfunction lineIntersectLine(a, b, c, d) {\n    // check if two segments are parallel or not\n    // precondition is end point a, b is inside polygon, if line a->b is\n    // parallel to polygon edge c->d, then a->b won't intersect with c->d\n    const vectorP = [\n        b[0] - a[0],\n        b[1] - a[1]\n    ];\n    const vectorQ = [\n        d[0] - c[0],\n        d[1] - c[1]\n    ];\n    if (perp(vectorQ, vectorP) === 0)\n        return false;\n    // If lines are intersecting with each other, the relative location should be:\n    // a and b lie in different sides of segment c->d\n    // c and d lie in different sides of segment a->b\n    if (twoSided(a, b, c, d) && twoSided(c, d, a, b))\n        return true;\n    return false;\n}\nfunction lineIntersectPolygon(p1, p2, polygon) {\n    for (const ring of polygon) {\n        // loop through every edge of the ring\n        for (let j = 0; j < ring.length - 1; ++j) {\n            if (lineIntersectLine(p1, p2, ring[j], ring[j + 1])) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction lineStringWithinPolygon(line, polygon) {\n    // First, check if geometry points of line segments are all inside polygon\n    for (let i = 0; i < line.length; ++i) {\n        if (!pointWithinPolygon(line[i], polygon)) {\n            return false;\n        }\n    }\n    // Second, check if there is line segment intersecting polygon edge\n    for (let i = 0; i < line.length - 1; ++i) {\n        if (lineIntersectPolygon(line[i], line[i + 1], polygon)) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction lineStringWithinPolygons(line, polygons) {\n    for (let i = 0; i < polygons.length; i++) {\n        if (lineStringWithinPolygon(line, polygons[i]))\n            return true;\n    }\n    return false;\n}\nfunction getTilePolygon(coordinates, bbox, canonical) {\n    const polygon = [];\n    for (let i = 0; i < coordinates.length; i++) {\n        const ring = [];\n        for (let j = 0; j < coordinates[i].length; j++) {\n            const coord = getTileCoordinates(coordinates[i][j], canonical);\n            updateBBox(bbox, coord);\n            ring.push(coord);\n        }\n        polygon.push(ring);\n    }\n    return polygon;\n}\nfunction getTilePolygons(coordinates, bbox, canonical) {\n    const polygons = [];\n    for (let i = 0; i < coordinates.length; i++) {\n        const polygon = getTilePolygon(coordinates[i], bbox, canonical);\n        polygons.push(polygon);\n    }\n    return polygons;\n}\nfunction updatePoint(p, bbox, polyBBox, worldSize) {\n    if (p[0] < polyBBox[0] || p[0] > polyBBox[2]) {\n        const halfWorldSize = worldSize * 0.5;\n        let shift = p[0] - polyBBox[0] > halfWorldSize ? -worldSize : polyBBox[0] - p[0] > halfWorldSize ? worldSize : 0;\n        if (shift === 0) {\n            shift = p[0] - polyBBox[2] > halfWorldSize ? -worldSize : polyBBox[2] - p[0] > halfWorldSize ? worldSize : 0;\n        }\n        p[0] += shift;\n    }\n    updateBBox(bbox, p);\n}\nfunction resetBBox(bbox) {\n    bbox[0] = bbox[1] = Infinity;\n    bbox[2] = bbox[3] = -Infinity;\n}\nfunction getTilePoints(geometry, pointBBox, polyBBox, canonical) {\n    const worldSize = Math.pow(2, canonical.z) * EXTENT;\n    const shifts = [\n        canonical.x * EXTENT,\n        canonical.y * EXTENT\n    ];\n    const tilePoints = [];\n    if (!geometry)\n        return tilePoints;\n    for (const points of geometry) {\n        for (const point of points) {\n            const p = [\n                point.x + shifts[0],\n                point.y + shifts[1]\n            ];\n            updatePoint(p, pointBBox, polyBBox, worldSize);\n            tilePoints.push(p);\n        }\n    }\n    return tilePoints;\n}\nfunction getTileLines(geometry, lineBBox, polyBBox, canonical) {\n    const worldSize = Math.pow(2, canonical.z) * EXTENT;\n    const shifts = [\n        canonical.x * EXTENT,\n        canonical.y * EXTENT\n    ];\n    const tileLines = [];\n    if (!geometry)\n        return tileLines;\n    for (const line of geometry) {\n        const tileLine = [];\n        for (const point of line) {\n            const p = [\n                point.x + shifts[0],\n                point.y + shifts[1]\n            ];\n            updateBBox(lineBBox, p);\n            tileLine.push(p);\n        }\n        tileLines.push(tileLine);\n    }\n    if (lineBBox[2] - lineBBox[0] <= worldSize / 2) {\n        resetBBox(lineBBox);\n        for (const line of tileLines) {\n            for (const p of line) {\n                updatePoint(p, lineBBox, polyBBox, worldSize);\n            }\n        }\n    }\n    return tileLines;\n}\nfunction pointsWithinPolygons(ctx, polygonGeometry) {\n    const pointBBox = [\n        Infinity,\n        Infinity,\n        -Infinity,\n        -Infinity\n    ];\n    const polyBBox = [\n        Infinity,\n        Infinity,\n        -Infinity,\n        -Infinity\n    ];\n    const canonical = ctx.canonicalID();\n    if (!canonical) {\n        return false;\n    }\n    if (polygonGeometry.type === 'Polygon') {\n        const tilePolygon = getTilePolygon(polygonGeometry.coordinates, polyBBox, canonical);\n        const tilePoints = getTilePoints(ctx.geometry(), pointBBox, polyBBox, canonical);\n        if (!boxWithinBox(pointBBox, polyBBox))\n            return false;\n        for (const point of tilePoints) {\n            if (!pointWithinPolygon(point, tilePolygon))\n                return false;\n        }\n    }\n    if (polygonGeometry.type === 'MultiPolygon') {\n        const tilePolygons = getTilePolygons(polygonGeometry.coordinates, polyBBox, canonical);\n        const tilePoints = getTilePoints(ctx.geometry(), pointBBox, polyBBox, canonical);\n        if (!boxWithinBox(pointBBox, polyBBox))\n            return false;\n        for (const point of tilePoints) {\n            if (!pointWithinPolygons(point, tilePolygons))\n                return false;\n        }\n    }\n    return true;\n}\nfunction linesWithinPolygons(ctx, polygonGeometry) {\n    const lineBBox = [\n        Infinity,\n        Infinity,\n        -Infinity,\n        -Infinity\n    ];\n    const polyBBox = [\n        Infinity,\n        Infinity,\n        -Infinity,\n        -Infinity\n    ];\n    const canonical = ctx.canonicalID();\n    if (!canonical) {\n        return false;\n    }\n    if (polygonGeometry.type === 'Polygon') {\n        const tilePolygon = getTilePolygon(polygonGeometry.coordinates, polyBBox, canonical);\n        const tileLines = getTileLines(ctx.geometry(), lineBBox, polyBBox, canonical);\n        if (!boxWithinBox(lineBBox, polyBBox))\n            return false;\n        for (const line of tileLines) {\n            if (!lineStringWithinPolygon(line, tilePolygon))\n                return false;\n        }\n    }\n    if (polygonGeometry.type === 'MultiPolygon') {\n        const tilePolygons = getTilePolygons(polygonGeometry.coordinates, polyBBox, canonical);\n        const tileLines = getTileLines(ctx.geometry(), lineBBox, polyBBox, canonical);\n        if (!boxWithinBox(lineBBox, polyBBox))\n            return false;\n        for (const line of tileLines) {\n            if (!lineStringWithinPolygons(line, tilePolygons))\n                return false;\n        }\n    }\n    return true;\n}\nclass Within {\n    constructor(geojson, geometries) {\n        this.type = BooleanType;\n        this.geojson = geojson;\n        this.geometries = geometries;\n    }\n    static parse(args, context) {\n        if (args.length !== 2)\n            return context.error(`'within' expression requires exactly one argument, but found ${ args.length - 1 } instead.`);\n        if (isValue(args[1])) {\n            const geojson = args[1];\n            if (geojson.type === 'FeatureCollection') {\n                for (let i = 0; i < geojson.features.length; ++i) {\n                    const type = geojson.features[i].geometry.type;\n                    if (type === 'Polygon' || type === 'MultiPolygon') {\n                        return new Within(geojson, geojson.features[i].geometry);\n                    }\n                }\n            } else if (geojson.type === 'Feature') {\n                const type = geojson.geometry.type;\n                if (type === 'Polygon' || type === 'MultiPolygon') {\n                    return new Within(geojson, geojson.geometry);\n                }\n            } else if (geojson.type === 'Polygon' || geojson.type === 'MultiPolygon') {\n                return new Within(geojson, geojson);\n            }\n        }\n        return context.error(`'within' expression requires valid geojson object that contains polygon geometry type.`);\n    }\n    evaluate(ctx) {\n        if (ctx.geometry() != null && ctx.canonicalID() != null) {\n            if (ctx.geometryType() === 'Point') {\n                return pointsWithinPolygons(ctx, this.geometries);\n            } else if (ctx.geometryType() === 'LineString') {\n                return linesWithinPolygons(ctx, this.geometries);\n            }\n        }\n        return false;\n    }\n    eachChild() {\n    }\n    outputDefined() {\n        return true;\n    }\n    serialize() {\n        return [\n            'within',\n            this.geojson\n        ];\n    }\n}\nvar Within$1 = Within;\n\n//      \nfunction isFeatureConstant(e) {\n    if (e instanceof CompoundExpression$1) {\n        if (e.name === 'get' && e.args.length === 1) {\n            return false;\n        } else if (e.name === 'feature-state') {\n            return false;\n        } else if (e.name === 'has' && e.args.length === 1) {\n            return false;\n        } else if (e.name === 'properties' || e.name === 'geometry-type' || e.name === 'id') {\n            return false;\n        } else if (/^filter-/.test(e.name)) {\n            return false;\n        }\n    }\n    if (e instanceof Within$1) {\n        return false;\n    }\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isFeatureConstant(arg)) {\n            result = false;\n        }\n    });\n    return result;\n}\nfunction isStateConstant(e) {\n    if (e instanceof CompoundExpression$1) {\n        if (e.name === 'feature-state') {\n            return false;\n        }\n    }\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isStateConstant(arg)) {\n            result = false;\n        }\n    });\n    return result;\n}\nfunction isGlobalPropertyConstant(e, properties) {\n    if (e instanceof CompoundExpression$1 && properties.indexOf(e.name) >= 0) {\n        return false;\n    }\n    let result = true;\n    e.eachChild(arg => {\n        if (result && !isGlobalPropertyConstant(arg, properties)) {\n            result = false;\n        }\n    });\n    return result;\n}\n\n//      \nclass Var {\n    constructor(name, boundExpression) {\n        this.type = boundExpression.type;\n        this.name = name;\n        this.boundExpression = boundExpression;\n    }\n    static parse(args, context) {\n        if (args.length !== 2 || typeof args[1] !== 'string')\n            return context.error(`'var' expression requires exactly one string literal argument.`);\n        const name = args[1];\n        if (!context.scope.has(name)) {\n            return context.error(`Unknown variable \"${ name }\". Make sure \"${ name }\" has been bound in an enclosing \"let\" expression before using it.`, 1);\n        }\n        return new Var(name, context.scope.get(name));\n    }\n    evaluate(ctx) {\n        return this.boundExpression.evaluate(ctx);\n    }\n    eachChild() {\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        return [\n            'var',\n            this.name\n        ];\n    }\n}\nvar Var$1 = Var;\n\n//      \n/**\n * State associated parsing at a given point in an expression tree.\n * @private\n */\nclass ParsingContext {\n    // The expected type of this expression. Provided only to allow Expression\n    // implementations to infer argument types: Expression#parse() need not\n    // check that the output type of the parsed expression matches\n    // `expectedType`.\n    constructor(registry, path = [], expectedType, scope = new Scope$1(), errors = []) {\n        this.registry = registry;\n        this.path = path;\n        this.key = path.map(part => `[${ part }]`).join('');\n        this.scope = scope;\n        this.errors = errors;\n        this.expectedType = expectedType;\n    }\n    /**\n     * @param expr the JSON expression to parse\n     * @param index the optional argument index if this expression is an argument of a parent expression that's being parsed\n     * @param options\n     * @param options.omitTypeAnnotations set true to omit inferred type annotations.  Caller beware: with this option set, the parsed expression's type will NOT satisfy `expectedType` if it would normally be wrapped in an inferred annotation.\n     * @private\n     */\n    parse(expr, index, expectedType, bindings, options = {}) {\n        if (index) {\n            return this.concat(index, expectedType, bindings)._parse(expr, options);\n        }\n        return this._parse(expr, options);\n    }\n    _parse(expr, options) {\n        if (expr === null || typeof expr === 'string' || typeof expr === 'boolean' || typeof expr === 'number') {\n            expr = [\n                'literal',\n                expr\n            ];\n        }\n        function annotate(parsed, type, typeAnnotation) {\n            if (typeAnnotation === 'assert') {\n                return new Assertion$1(type, [parsed]);\n            } else if (typeAnnotation === 'coerce') {\n                return new Coercion$1(type, [parsed]);\n            } else {\n                return parsed;\n            }\n        }\n        if (Array.isArray(expr)) {\n            if (expr.length === 0) {\n                return this.error(`Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].`);\n            }\n            const op = expr[0];\n            if (typeof op !== 'string') {\n                this.error(`Expression name must be a string, but found ${ typeof op } instead. If you wanted a literal array, use [\"literal\", [...]].`, 0);\n                return null;\n            }\n            const Expr = this.registry[op];\n            if (Expr) {\n                let parsed = Expr.parse(expr, this);\n                if (!parsed)\n                    return null;\n                if (this.expectedType) {\n                    const expected = this.expectedType;\n                    const actual = parsed.type;\n                    // When we expect a number, string, boolean, or array but have a value, wrap it in an assertion.\n                    // When we expect a color or formatted string, but have a string or value, wrap it in a coercion.\n                    // Otherwise, we do static type-checking.\n                    //\n                    // These behaviors are overridable for:\n                    //   * The \"coalesce\" operator, which needs to omit type annotations.\n                    //   * String-valued properties (e.g. `text-field`), where coercion is more convenient than assertion.\n                    //\n                    if ((expected.kind === 'string' || expected.kind === 'number' || expected.kind === 'boolean' || expected.kind === 'object' || expected.kind === 'array') && actual.kind === 'value') {\n                        parsed = annotate(parsed, expected, options.typeAnnotation || 'assert');\n                    } else if ((expected.kind === 'color' || expected.kind === 'formatted' || expected.kind === 'resolvedImage') && (actual.kind === 'value' || actual.kind === 'string')) {\n                        parsed = annotate(parsed, expected, options.typeAnnotation || 'coerce');\n                    } else if (this.checkSubtype(expected, actual)) {\n                        return null;\n                    }\n                }\n                // If an expression's arguments are all literals, we can evaluate\n                // it immediately and replace it with a literal value in the\n                // parsed/compiled result. Expressions that expect an image should\n                // not be resolved here so we can later get the available images.\n                if (!(parsed instanceof Literal$1) && parsed.type.kind !== 'resolvedImage' && isConstant(parsed)) {\n                    const ec = new EvaluationContext$1();\n                    try {\n                        parsed = new Literal$1(parsed.type, parsed.evaluate(ec));\n                    } catch (e) {\n                        this.error(e.message);\n                        return null;\n                    }\n                }\n                return parsed;\n            }\n            return this.error(`Unknown expression \"${ op }\". If you wanted a literal array, use [\"literal\", [...]].`, 0);\n        } else if (typeof expr === 'undefined') {\n            return this.error(`'undefined' value invalid. Use null instead.`);\n        } else if (typeof expr === 'object') {\n            return this.error(`Bare objects invalid. Use [\"literal\", {...}] instead.`);\n        } else {\n            return this.error(`Expected an array, but found ${ typeof expr } instead.`);\n        }\n    }\n    /**\n     * Returns a copy of this context suitable for parsing the subexpression at\n     * index `index`, optionally appending to 'let' binding map.\n     *\n     * Note that `errors` property, intended for collecting errors while\n     * parsing, is copied by reference rather than cloned.\n     * @private\n     */\n    concat(index, expectedType, bindings) {\n        const path = typeof index === 'number' ? this.path.concat(index) : this.path;\n        const scope = bindings ? this.scope.concat(bindings) : this.scope;\n        return new ParsingContext(this.registry, path, expectedType || null, scope, this.errors);\n    }\n    /**\n     * Push a parsing (or type checking) error into the `this.errors`\n     * @param error The message\n     * @param keys Optionally specify the source of the error at a child\n     * of the current expression at `this.key`.\n     * @private\n     */\n    error(error, ...keys) {\n        const key = `${ this.key }${ keys.map(k => `[${ k }]`).join('') }`;\n        this.errors.push(new ParsingError$1(key, error));\n    }\n    /**\n     * Returns null if `t` is a subtype of `expected`; otherwise returns an\n     * error message and also pushes it to `this.errors`.\n     */\n    checkSubtype(expected, t) {\n        const error = checkSubtype(expected, t);\n        if (error)\n            this.error(error);\n        return error;\n    }\n}\nvar ParsingContext$1 = ParsingContext;\nfunction isConstant(expression) {\n    if (expression instanceof Var$1) {\n        return isConstant(expression.boundExpression);\n    } else if (expression instanceof CompoundExpression$1 && expression.name === 'error') {\n        return false;\n    } else if (expression instanceof CollatorExpression) {\n        // Although the results of a Collator expression with fixed arguments\n        // generally shouldn't change between executions, we can't serialize them\n        // as constant expressions because results change based on environment.\n        return false;\n    } else if (expression instanceof Within$1) {\n        return false;\n    }\n    const isTypeAnnotation = expression instanceof Coercion$1 || expression instanceof Assertion$1;\n    let childrenConstant = true;\n    expression.eachChild(child => {\n        // We can _almost_ assume that if `expressions` children are constant,\n        // they would already have been evaluated to Literal values when they\n        // were parsed.  Type annotations are the exception, because they might\n        // have been inferred and added after a child was parsed.\n        // So we recurse into isConstant() for the children of type annotations,\n        // but otherwise simply check whether they are Literals.\n        if (isTypeAnnotation) {\n            childrenConstant = childrenConstant && isConstant(child);\n        } else {\n            childrenConstant = childrenConstant && child instanceof Literal$1;\n        }\n    });\n    if (!childrenConstant) {\n        return false;\n    }\n    return isFeatureConstant(expression) && isGlobalPropertyConstant(expression, [\n        'zoom',\n        'heatmap-density',\n        'line-progress',\n        'sky-radial-progress',\n        'accumulated',\n        'is-supported-script',\n        'pitch',\n        'distance-from-center'\n    ]);\n}\n\n//      \n/**\n * Returns the index of the last stop <= input, or 0 if it doesn't exist.\n * @private\n */\nfunction findStopLessThanOrEqualTo(stops, input) {\n    const lastIndex = stops.length - 1;\n    let lowerIndex = 0;\n    let upperIndex = lastIndex;\n    let currentIndex = 0;\n    let currentValue, nextValue;\n    while (lowerIndex <= upperIndex) {\n        currentIndex = Math.floor((lowerIndex + upperIndex) / 2);\n        currentValue = stops[currentIndex];\n        nextValue = stops[currentIndex + 1];\n        if (currentValue <= input) {\n            if (currentIndex === lastIndex || input < nextValue) {\n                // Search complete\n                return currentIndex;\n            }\n            lowerIndex = currentIndex + 1;\n        } else if (currentValue > input) {\n            upperIndex = currentIndex - 1;\n        } else {\n            throw new RuntimeError$1('Input is not a number.');\n        }\n    }\n    return 0;\n}\n\n//      \nclass Step {\n    constructor(type, input, stops) {\n        this.type = type;\n        this.input = input;\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n    static parse(args, context) {\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${ args.length - 1 }.`);\n        }\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n        const input = context.parse(args[1], 1, NumberType);\n        if (!input)\n            return null;\n        const stops = [];\n        let outputType = null;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n        for (let i = 1; i < args.length; i += 2) {\n            const label = i === 1 ? -Infinity : args[i];\n            const value = args[i + 1];\n            const labelKey = i;\n            const valueKey = i + 1;\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed)\n                return null;\n            outputType = outputType || parsed.type;\n            stops.push([\n                label,\n                parsed\n            ]);\n        }\n        return new Step(outputType, input, stops);\n    }\n    evaluate(ctx) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n        const value = this.input.evaluate(ctx);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n        const index = findStopLessThanOrEqualTo(labels, value);\n        return outputs[index].evaluate(ctx);\n    }\n    eachChild(fn) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n    outputDefined() {\n        return this.outputs.every(out => out.outputDefined());\n    }\n    serialize() {\n        const serialized = [\n            'step',\n            this.input.serialize()\n        ];\n        for (let i = 0; i < this.labels.length; i++) {\n            if (i > 0) {\n                serialized.push(this.labels[i]);\n            }\n            serialized.push(this.outputs[i].serialize());\n        }\n        return serialized;\n    }\n}\nvar Step$1 = Step;\n\n/*\n * Copyright (C) 2008 Apple Inc. All Rights Reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n * 1. Redistributions of source code must retain the above copyright\n *    notice, this list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright\n *    notice, this list of conditions and the following disclaimer in the\n *    documentation and/or other materials provided with the distribution.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE INC. ``AS IS'' AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n * PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL APPLE INC. OR\n * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n * PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * Ported from Webkit\n * http://svn.webkit.org/repository/webkit/trunk/Source/WebCore/platform/graphics/UnitBezier.h\n */\n\nvar unitbezier = UnitBezier;\nfunction UnitBezier(p1x, p1y, p2x, p2y) {\n    // Calculate the polynomial coefficients, implicit first and last control points are (0,0) and (1,1).\n    this.cx = 3 * p1x;\n    this.bx = 3 * (p2x - p1x) - this.cx;\n    this.ax = 1 - this.cx - this.bx;\n    this.cy = 3 * p1y;\n    this.by = 3 * (p2y - p1y) - this.cy;\n    this.ay = 1 - this.cy - this.by;\n    this.p1x = p1x;\n    this.p1y = p2y;\n    this.p2x = p2x;\n    this.p2y = p2y;\n}\nUnitBezier.prototype.sampleCurveX = function (t) {\n    // `ax t^3 + bx t^2 + cx t' expanded using Horner's rule.\n    return ((this.ax * t + this.bx) * t + this.cx) * t;\n};\nUnitBezier.prototype.sampleCurveY = function (t) {\n    return ((this.ay * t + this.by) * t + this.cy) * t;\n};\nUnitBezier.prototype.sampleCurveDerivativeX = function (t) {\n    return (3 * this.ax * t + 2 * this.bx) * t + this.cx;\n};\nUnitBezier.prototype.solveCurveX = function (x, epsilon) {\n    if (typeof epsilon === 'undefined')\n        epsilon = 0.000001;\n    var t0, t1, t2, x2, i;\n    // First try a few iterations of Newton's method -- normally very fast.\n    for (t2 = x, i = 0; i < 8; i++) {\n        x2 = this.sampleCurveX(t2) - x;\n        if (Math.abs(x2) < epsilon)\n            return t2;\n        var d2 = this.sampleCurveDerivativeX(t2);\n        if (Math.abs(d2) < 0.000001)\n            break;\n        t2 = t2 - x2 / d2;\n    }\n    // Fall back to the bisection method for reliability.\n    t0 = 0;\n    t1 = 1;\n    t2 = x;\n    if (t2 < t0)\n        return t0;\n    if (t2 > t1)\n        return t1;\n    while (t0 < t1) {\n        x2 = this.sampleCurveX(t2);\n        if (Math.abs(x2 - x) < epsilon)\n            return t2;\n        if (x > x2) {\n            t0 = t2;\n        } else {\n            t1 = t2;\n        }\n        t2 = (t1 - t0) * 0.5 + t0;\n    }\n    // Failure.\n    return t2;\n};\nUnitBezier.prototype.solve = function (x, epsilon) {\n    return this.sampleCurveY(this.solveCurveX(x, epsilon));\n};\n\nvar UnitBezier$1 = /*@__PURE__*/getDefaultExportFromCjs(unitbezier);\n\n//      \nfunction number(a, b, t) {\n    return a * (1 - t) + b * t;\n}\nfunction color(from, to, t) {\n    return new Color$1(number(from.r, to.r, t), number(from.g, to.g, t), number(from.b, to.b, t), number(from.a, to.a, t));\n}\nfunction array(from, to, t) {\n    return from.map((d, i) => {\n        return number(d, to[i], t);\n    });\n}\n\nvar interpolate = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tnumber: number,\n\tcolor: color,\n\tarray: array\n});\n\n//      \n// Constants\nconst Xn = 0.95047,\n    // D65 standard referent\n    Yn = 1, Zn = 1.08883, t0 = 4 / 29, t1 = 6 / 29, t2 = 3 * t1 * t1, t3 = t1 * t1 * t1, deg2rad$1 = Math.PI / 180, rad2deg = 180 / Math.PI;\n// Utilities\nfunction xyz2lab(t) {\n    return t > t3 ? Math.pow(t, 1 / 3) : t / t2 + t0;\n}\nfunction lab2xyz(t) {\n    return t > t1 ? t * t * t : t2 * (t - t0);\n}\nfunction xyz2rgb(x) {\n    return 255 * (x <= 0.0031308 ? 12.92 * x : 1.055 * Math.pow(x, 1 / 2.4) - 0.055);\n}\nfunction rgb2xyz(x) {\n    x /= 255;\n    return x <= 0.04045 ? x / 12.92 : Math.pow((x + 0.055) / 1.055, 2.4);\n}\n// LAB\nfunction rgbToLab(rgbColor) {\n    const b = rgb2xyz(rgbColor.r), a = rgb2xyz(rgbColor.g), l = rgb2xyz(rgbColor.b), x = xyz2lab((0.4124564 * b + 0.3575761 * a + 0.1804375 * l) / Xn), y = xyz2lab((0.2126729 * b + 0.7151522 * a + 0.072175 * l) / Yn), z = xyz2lab((0.0193339 * b + 0.119192 * a + 0.9503041 * l) / Zn);\n    return {\n        l: 116 * y - 16,\n        a: 500 * (x - y),\n        b: 200 * (y - z),\n        alpha: rgbColor.a\n    };\n}\nfunction labToRgb(labColor) {\n    let y = (labColor.l + 16) / 116, x = isNaN(labColor.a) ? y : y + labColor.a / 500, z = isNaN(labColor.b) ? y : y - labColor.b / 200;\n    y = Yn * lab2xyz(y);\n    x = Xn * lab2xyz(x);\n    z = Zn * lab2xyz(z);\n    return new Color$1(xyz2rgb(3.2404542 * x - 1.5371385 * y - 0.4985314 * z), // D65 -> sRGB\n    xyz2rgb(-0.969266 * x + 1.8760108 * y + 0.041556 * z), xyz2rgb(0.0556434 * x - 0.2040259 * y + 1.0572252 * z), labColor.alpha);\n}\nfunction interpolateLab(from, to, t) {\n    return {\n        l: number(from.l, to.l, t),\n        a: number(from.a, to.a, t),\n        b: number(from.b, to.b, t),\n        alpha: number(from.alpha, to.alpha, t)\n    };\n}\n// HCL\nfunction rgbToHcl(rgbColor) {\n    const {l, a, b} = rgbToLab(rgbColor);\n    const h = Math.atan2(b, a) * rad2deg;\n    return {\n        h: h < 0 ? h + 360 : h,\n        c: Math.sqrt(a * a + b * b),\n        l,\n        alpha: rgbColor.a\n    };\n}\nfunction hclToRgb(hclColor) {\n    const h = hclColor.h * deg2rad$1, c = hclColor.c, l = hclColor.l;\n    return labToRgb({\n        l,\n        a: Math.cos(h) * c,\n        b: Math.sin(h) * c,\n        alpha: hclColor.alpha\n    });\n}\nfunction interpolateHue(a, b, t) {\n    const d = b - a;\n    return a + t * (d > 180 || d < -180 ? d - 360 * Math.round(d / 360) : d);\n}\nfunction interpolateHcl(from, to, t) {\n    return {\n        h: interpolateHue(from.h, to.h, t),\n        c: number(from.c, to.c, t),\n        l: number(from.l, to.l, t),\n        alpha: number(from.alpha, to.alpha, t)\n    };\n}\nconst lab = {\n    forward: rgbToLab,\n    reverse: labToRgb,\n    interpolate: interpolateLab\n};\nconst hcl = {\n    forward: rgbToHcl,\n    reverse: hclToRgb,\n    interpolate: interpolateHcl\n};\n\n//      \nclass Interpolate {\n    constructor(type, operator, interpolation, input, stops) {\n        this.type = type;\n        this.operator = operator;\n        this.interpolation = interpolation;\n        this.input = input;\n        this.labels = [];\n        this.outputs = [];\n        for (const [label, expression] of stops) {\n            this.labels.push(label);\n            this.outputs.push(expression);\n        }\n    }\n    static interpolationFactor(interpolation, input, lower, upper) {\n        let t = 0;\n        if (interpolation.name === 'exponential') {\n            t = exponentialInterpolation(input, interpolation.base, lower, upper);\n        } else if (interpolation.name === 'linear') {\n            t = exponentialInterpolation(input, 1, lower, upper);\n        } else if (interpolation.name === 'cubic-bezier') {\n            const c = interpolation.controlPoints;\n            const ub = new UnitBezier$1(c[0], c[1], c[2], c[3]);\n            t = ub.solve(exponentialInterpolation(input, 1, lower, upper));\n        }\n        return t;\n    }\n    static parse(args, context) {\n        let [operator, interpolation, input, ...rest] = args;\n        if (!Array.isArray(interpolation) || interpolation.length === 0) {\n            return context.error(`Expected an interpolation type expression.`, 1);\n        }\n        if (interpolation[0] === 'linear') {\n            interpolation = { name: 'linear' };\n        } else if (interpolation[0] === 'exponential') {\n            const base = interpolation[1];\n            if (typeof base !== 'number')\n                return context.error(`Exponential interpolation requires a numeric base.`, 1, 1);\n            interpolation = {\n                name: 'exponential',\n                base\n            };\n        } else if (interpolation[0] === 'cubic-bezier') {\n            const controlPoints = interpolation.slice(1);\n            if (controlPoints.length !== 4 || controlPoints.some(t => typeof t !== 'number' || t < 0 || t > 1)) {\n                return context.error('Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.', 1);\n            }\n            interpolation = {\n                name: 'cubic-bezier',\n                controlPoints: controlPoints\n            };\n        } else {\n            return context.error(`Unknown interpolation type ${ String(interpolation[0]) }`, 1, 0);\n        }\n        if (args.length - 1 < 4) {\n            return context.error(`Expected at least 4 arguments, but found only ${ args.length - 1 }.`);\n        }\n        if ((args.length - 1) % 2 !== 0) {\n            return context.error(`Expected an even number of arguments.`);\n        }\n        input = context.parse(input, 2, NumberType);\n        if (!input)\n            return null;\n        const stops = [];\n        let outputType = null;\n        if (operator === 'interpolate-hcl' || operator === 'interpolate-lab') {\n            outputType = ColorType;\n        } else if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n        for (let i = 0; i < rest.length; i += 2) {\n            const label = rest[i];\n            const value = rest[i + 1];\n            const labelKey = i + 3;\n            const valueKey = i + 4;\n            if (typeof label !== 'number') {\n                return context.error('Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.', labelKey);\n            }\n            if (stops.length && stops[stops.length - 1][0] >= label) {\n                return context.error('Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.', labelKey);\n            }\n            const parsed = context.parse(value, valueKey, outputType);\n            if (!parsed)\n                return null;\n            outputType = outputType || parsed.type;\n            stops.push([\n                label,\n                parsed\n            ]);\n        }\n        if (outputType.kind !== 'number' && outputType.kind !== 'color' && !(outputType.kind === 'array' && outputType.itemType.kind === 'number' && typeof outputType.N === 'number')) {\n            return context.error(`Type ${ toString$1(outputType) } is not interpolatable.`);\n        }\n        return new Interpolate(outputType, operator, interpolation, input, stops);\n    }\n    evaluate(ctx) {\n        const labels = this.labels;\n        const outputs = this.outputs;\n        if (labels.length === 1) {\n            return outputs[0].evaluate(ctx);\n        }\n        const value = this.input.evaluate(ctx);\n        if (value <= labels[0]) {\n            return outputs[0].evaluate(ctx);\n        }\n        const stopCount = labels.length;\n        if (value >= labels[stopCount - 1]) {\n            return outputs[stopCount - 1].evaluate(ctx);\n        }\n        const index = findStopLessThanOrEqualTo(labels, value);\n        const lower = labels[index];\n        const upper = labels[index + 1];\n        const t = Interpolate.interpolationFactor(this.interpolation, value, lower, upper);\n        const outputLower = outputs[index].evaluate(ctx);\n        const outputUpper = outputs[index + 1].evaluate(ctx);\n        if (this.operator === 'interpolate') {\n            return interpolate[this.type.kind.toLowerCase()](outputLower, outputUpper, t);    // eslint-disable-line import/namespace\n        } else if (this.operator === 'interpolate-hcl') {\n            return hcl.reverse(hcl.interpolate(hcl.forward(outputLower), hcl.forward(outputUpper), t));\n        } else {\n            return lab.reverse(lab.interpolate(lab.forward(outputLower), lab.forward(outputUpper), t));\n        }\n    }\n    eachChild(fn) {\n        fn(this.input);\n        for (const expression of this.outputs) {\n            fn(expression);\n        }\n    }\n    outputDefined() {\n        return this.outputs.every(out => out.outputDefined());\n    }\n    serialize() {\n        let interpolation;\n        if (this.interpolation.name === 'linear') {\n            interpolation = ['linear'];\n        } else if (this.interpolation.name === 'exponential') {\n            if (this.interpolation.base === 1) {\n                interpolation = ['linear'];\n            } else {\n                interpolation = [\n                    'exponential',\n                    this.interpolation.base\n                ];\n            }\n        } else {\n            interpolation = ['cubic-bezier'].concat(this.interpolation.controlPoints);\n        }\n        const serialized = [\n            this.operator,\n            interpolation,\n            this.input.serialize()\n        ];\n        for (let i = 0; i < this.labels.length; i++) {\n            serialized.push(this.labels[i], this.outputs[i].serialize());\n        }\n        return serialized;\n    }\n}\n/**\n * Returns a ratio that can be used to interpolate between exponential function\n * stops.\n * How it works: Two consecutive stop values define a (scaled and shifted) exponential function `f(x) = a * base^x + b`, where `base` is the user-specified base,\n * and `a` and `b` are constants affording sufficient degrees of freedom to fit\n * the function to the given stops.\n *\n * Here's a bit of algebra that lets us compute `f(x)` directly from the stop\n * values without explicitly solving for `a` and `b`:\n *\n * First stop value: `f(x0) = y0 = a * base^x0 + b`\n * Second stop value: `f(x1) = y1 = a * base^x1 + b`\n * => `y1 - y0 = a(base^x1 - base^x0)`\n * => `a = (y1 - y0)/(base^x1 - base^x0)`\n *\n * Desired value: `f(x) = y = a * base^x + b`\n * => `f(x) = y0 + a * (base^x - base^x0)`\n *\n * From the above, we can replace the `a` in `a * (base^x - base^x0)` and do a\n * little algebra:\n * ```\n * a * (base^x - base^x0) = (y1 - y0)/(base^x1 - base^x0) * (base^x - base^x0)\n *                     = (y1 - y0) * (base^x - base^x0) / (base^x1 - base^x0)\n * ```\n *\n * If we let `(base^x - base^x0) / (base^x1 base^x0)`, then we have\n * `f(x) = y0 + (y1 - y0) * ratio`.  In other words, `ratio` may be treated as\n * an interpolation factor between the two stops' output values.\n *\n * (Note: a slightly different form for `ratio`,\n * `(base^(x-x0) - 1) / (base^(x1-x0) - 1) `, is equivalent, but requires fewer\n * expensive `Math.pow()` operations.)\n *\n * @private\n*/\nfunction exponentialInterpolation(input, base, lowerValue, upperValue) {\n    const difference = upperValue - lowerValue;\n    const progress = input - lowerValue;\n    if (difference === 0) {\n        return 0;\n    } else if (base === 1) {\n        return progress / difference;\n    } else {\n        return (Math.pow(base, progress) - 1) / (Math.pow(base, difference) - 1);\n    }\n}\nvar Interpolate$1 = Interpolate;\n\nclass Coalesce {\n    constructor(type, args) {\n        this.type = type;\n        this.args = args;\n    }\n    static parse(args, context) {\n        if (args.length < 2) {\n            return context.error('Expectected at least one argument.');\n        }\n        let outputType = null;\n        const expectedType = context.expectedType;\n        if (expectedType && expectedType.kind !== 'value') {\n            outputType = expectedType;\n        }\n        const parsedArgs = [];\n        for (const arg of args.slice(1)) {\n            const parsed = context.parse(arg, 1 + parsedArgs.length, outputType, undefined, { typeAnnotation: 'omit' });\n            if (!parsed)\n                return null;\n            outputType = outputType || parsed.type;\n            parsedArgs.push(parsed);\n        }\n        // Above, we parse arguments without inferred type annotation so that\n        // they don't produce a runtime error for `null` input, which would\n        // preempt the desired null-coalescing behavior.\n        // Thus, if any of our arguments would have needed an annotation, we\n        // need to wrap the enclosing coalesce expression with it instead.\n        const needsAnnotation = expectedType && parsedArgs.some(arg => checkSubtype(expectedType, arg.type));\n        return needsAnnotation ? new Coalesce(ValueType, parsedArgs) : new Coalesce(outputType, parsedArgs);\n    }\n    evaluate(ctx) {\n        let result = null;\n        let argCount = 0;\n        let firstImage;\n        for (const arg of this.args) {\n            argCount++;\n            result = arg.evaluate(ctx);\n            // we need to keep track of the first requested image in a coalesce statement\n            // if coalesce can't find a valid image, we return the first image so styleimagemissing can fire\n            if (result && result instanceof ResolvedImage && !result.available) {\n                // set to first image\n                if (!firstImage) {\n                    firstImage = result;\n                }\n                result = null;\n                // if we reach the end, return the first image\n                if (argCount === this.args.length) {\n                    return firstImage;\n                }\n            }\n            if (result !== null)\n                break;\n        }\n        return result;\n    }\n    eachChild(fn) {\n        this.args.forEach(fn);\n    }\n    outputDefined() {\n        return this.args.every(arg => arg.outputDefined());\n    }\n    serialize() {\n        const serialized = ['coalesce'];\n        this.eachChild(child => {\n            serialized.push(child.serialize());\n        });\n        return serialized;\n    }\n}\nvar Coalesce$1 = Coalesce;\n\n//      \nclass Let {\n    constructor(bindings, result) {\n        this.type = result.type;\n        this.bindings = [].concat(bindings);\n        this.result = result;\n    }\n    evaluate(ctx) {\n        return this.result.evaluate(ctx);\n    }\n    eachChild(fn) {\n        for (const binding of this.bindings) {\n            fn(binding[1]);\n        }\n        fn(this.result);\n    }\n    static parse(args, context) {\n        if (args.length < 4)\n            return context.error(`Expected at least 3 arguments, but found ${ args.length - 1 } instead.`);\n        const bindings = [];\n        for (let i = 1; i < args.length - 1; i += 2) {\n            const name = args[i];\n            if (typeof name !== 'string') {\n                return context.error(`Expected string, but found ${ typeof name } instead.`, i);\n            }\n            if (/[^a-zA-Z0-9_]/.test(name)) {\n                return context.error(`Variable names must contain only alphanumeric characters or '_'.`, i);\n            }\n            const value = context.parse(args[i + 1], i + 1);\n            if (!value)\n                return null;\n            bindings.push([\n                name,\n                value\n            ]);\n        }\n        const result = context.parse(args[args.length - 1], args.length - 1, context.expectedType, bindings);\n        if (!result)\n            return null;\n        return new Let(bindings, result);\n    }\n    outputDefined() {\n        return this.result.outputDefined();\n    }\n    serialize() {\n        const serialized = ['let'];\n        for (const [name, expr] of this.bindings) {\n            serialized.push(name, expr.serialize());\n        }\n        serialized.push(this.result.serialize());\n        return serialized;\n    }\n}\nvar Let$1 = Let;\n\n//      \nclass At {\n    constructor(type, index, input) {\n        this.type = type;\n        this.index = index;\n        this.input = input;\n    }\n    static parse(args, context) {\n        if (args.length !== 3)\n            return context.error(`Expected 2 arguments, but found ${ args.length - 1 } instead.`);\n        const index = context.parse(args[1], 1, NumberType);\n        const input = context.parse(args[2], 2, array$1(context.expectedType || ValueType));\n        if (!index || !input)\n            return null;\n        const t = input.type;\n        return new At(t.itemType, index, input);\n    }\n    evaluate(ctx) {\n        const index = this.index.evaluate(ctx);\n        const array = this.input.evaluate(ctx);\n        if (index < 0) {\n            throw new RuntimeError$1(`Array index out of bounds: ${ index } < 0.`);\n        }\n        if (index >= array.length) {\n            throw new RuntimeError$1(`Array index out of bounds: ${ index } > ${ array.length - 1 }.`);\n        }\n        if (index !== Math.floor(index)) {\n            throw new RuntimeError$1(`Array index must be an integer, but found ${ index } instead.`);\n        }\n        return array[index];\n    }\n    eachChild(fn) {\n        fn(this.index);\n        fn(this.input);\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        return [\n            'at',\n            this.index.serialize(),\n            this.input.serialize()\n        ];\n    }\n}\nvar At$1 = At;\n\n//      \nclass In {\n    constructor(needle, haystack) {\n        this.type = BooleanType;\n        this.needle = needle;\n        this.haystack = haystack;\n    }\n    static parse(args, context) {\n        if (args.length !== 3) {\n            return context.error(`Expected 2 arguments, but found ${ args.length - 1 } instead.`);\n        }\n        const needle = context.parse(args[1], 1, ValueType);\n        const haystack = context.parse(args[2], 2, ValueType);\n        if (!needle || !haystack)\n            return null;\n        if (!isValidType(needle.type, [\n                BooleanType,\n                StringType,\n                NumberType,\n                NullType,\n                ValueType\n            ])) {\n            return context.error(`Expected first argument to be of type boolean, string, number or null, but found ${ toString$1(needle.type) } instead`);\n        }\n        return new In(needle, haystack);\n    }\n    evaluate(ctx) {\n        const needle = this.needle.evaluate(ctx);\n        const haystack = this.haystack.evaluate(ctx);\n        if (haystack == null)\n            return false;\n        if (!isValidNativeType(needle, [\n                'boolean',\n                'string',\n                'number',\n                'null'\n            ])) {\n            throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${ toString$1(typeOf(needle)) } instead.`);\n        }\n        if (!isValidNativeType(haystack, [\n                'string',\n                'array'\n            ])) {\n            throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${ toString$1(typeOf(haystack)) } instead.`);\n        }\n        return haystack.indexOf(needle) >= 0;\n    }\n    eachChild(fn) {\n        fn(this.needle);\n        fn(this.haystack);\n    }\n    outputDefined() {\n        return true;\n    }\n    serialize() {\n        return [\n            'in',\n            this.needle.serialize(),\n            this.haystack.serialize()\n        ];\n    }\n}\nvar In$1 = In;\n\n//      \nclass IndexOf {\n    constructor(needle, haystack, fromIndex) {\n        this.type = NumberType;\n        this.needle = needle;\n        this.haystack = haystack;\n        this.fromIndex = fromIndex;\n    }\n    static parse(args, context) {\n        if (args.length <= 2 || args.length >= 5) {\n            return context.error(`Expected 3 or 4 arguments, but found ${ args.length - 1 } instead.`);\n        }\n        const needle = context.parse(args[1], 1, ValueType);\n        const haystack = context.parse(args[2], 2, ValueType);\n        if (!needle || !haystack)\n            return null;\n        if (!isValidType(needle.type, [\n                BooleanType,\n                StringType,\n                NumberType,\n                NullType,\n                ValueType\n            ])) {\n            return context.error(`Expected first argument to be of type boolean, string, number or null, but found ${ toString$1(needle.type) } instead`);\n        }\n        if (args.length === 4) {\n            const fromIndex = context.parse(args[3], 3, NumberType);\n            if (!fromIndex)\n                return null;\n            return new IndexOf(needle, haystack, fromIndex);\n        } else {\n            return new IndexOf(needle, haystack);\n        }\n    }\n    evaluate(ctx) {\n        const needle = this.needle.evaluate(ctx);\n        const haystack = this.haystack.evaluate(ctx);\n        if (!isValidNativeType(needle, [\n                'boolean',\n                'string',\n                'number',\n                'null'\n            ])) {\n            throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${ toString$1(typeOf(needle)) } instead.`);\n        }\n        if (!isValidNativeType(haystack, [\n                'string',\n                'array'\n            ])) {\n            throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${ toString$1(typeOf(haystack)) } instead.`);\n        }\n        if (this.fromIndex) {\n            const fromIndex = this.fromIndex.evaluate(ctx);\n            return haystack.indexOf(needle, fromIndex);\n        }\n        return haystack.indexOf(needle);\n    }\n    eachChild(fn) {\n        fn(this.needle);\n        fn(this.haystack);\n        if (this.fromIndex) {\n            fn(this.fromIndex);\n        }\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        if (this.fromIndex != null && this.fromIndex !== undefined) {\n            const fromIndex = this.fromIndex.serialize();\n            return [\n                'index-of',\n                this.needle.serialize(),\n                this.haystack.serialize(),\n                fromIndex\n            ];\n        }\n        return [\n            'index-of',\n            this.needle.serialize(),\n            this.haystack.serialize()\n        ];\n    }\n}\nvar IndexOf$1 = IndexOf;\n\n// Map input label values to output expression index\nclass Match {\n    constructor(inputType, outputType, input, cases, outputs, otherwise) {\n        this.inputType = inputType;\n        this.type = outputType;\n        this.input = input;\n        this.cases = cases;\n        this.outputs = outputs;\n        this.otherwise = otherwise;\n    }\n    static parse(args, context) {\n        if (args.length < 5)\n            return context.error(`Expected at least 4 arguments, but found only ${ args.length - 1 }.`);\n        if (args.length % 2 !== 1)\n            return context.error(`Expected an even number of arguments.`);\n        let inputType;\n        let outputType;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n        const cases = {};\n        const outputs = [];\n        for (let i = 2; i < args.length - 1; i += 2) {\n            let labels = args[i];\n            const value = args[i + 1];\n            if (!Array.isArray(labels)) {\n                labels = [labels];\n            }\n            const labelContext = context.concat(i);\n            if (labels.length === 0) {\n                return labelContext.error('Expected at least one branch label.');\n            }\n            for (const label of labels) {\n                if (typeof label !== 'number' && typeof label !== 'string') {\n                    return labelContext.error(`Branch labels must be numbers or strings.`);\n                } else if (typeof label === 'number' && Math.abs(label) > Number.MAX_SAFE_INTEGER) {\n                    return labelContext.error(`Branch labels must be integers no larger than ${ Number.MAX_SAFE_INTEGER }.`);\n                } else if (typeof label === 'number' && Math.floor(label) !== label) {\n                    return labelContext.error(`Numeric branch labels must be integer values.`);\n                } else if (!inputType) {\n                    inputType = typeOf(label);\n                } else if (labelContext.checkSubtype(inputType, typeOf(label))) {\n                    return null;\n                }\n                if (typeof cases[String(label)] !== 'undefined') {\n                    return labelContext.error('Branch labels must be unique.');\n                }\n                cases[String(label)] = outputs.length;\n            }\n            const result = context.parse(value, i, outputType);\n            if (!result)\n                return null;\n            outputType = outputType || result.type;\n            outputs.push(result);\n        }\n        const input = context.parse(args[1], 1, ValueType);\n        if (!input)\n            return null;\n        const otherwise = context.parse(args[args.length - 1], args.length - 1, outputType);\n        if (!otherwise)\n            return null;\n        if (input.type.kind !== 'value' && context.concat(1).checkSubtype(inputType, input.type)) {\n            return null;\n        }\n        return new Match(inputType, outputType, input, cases, outputs, otherwise);\n    }\n    evaluate(ctx) {\n        const input = this.input.evaluate(ctx);\n        const output = typeOf(input) === this.inputType && this.outputs[this.cases[input]] || this.otherwise;\n        return output.evaluate(ctx);\n    }\n    eachChild(fn) {\n        fn(this.input);\n        this.outputs.forEach(fn);\n        fn(this.otherwise);\n    }\n    outputDefined() {\n        return this.outputs.every(out => out.outputDefined()) && this.otherwise.outputDefined();\n    }\n    serialize() {\n        const serialized = [\n            'match',\n            this.input.serialize()\n        ];\n        // Sort so serialization has an arbitrary defined order, even though\n        // branch order doesn't affect evaluation\n        const sortedLabels = Object.keys(this.cases).sort();\n        // Group branches by unique match expression to support condensed\n        // serializations of the form [case1, case2, ...] -> matchExpression\n        const groupedByOutput = [];\n        const outputLookup = {};\n        // lookup index into groupedByOutput for a given output expression\n        for (const label of sortedLabels) {\n            const outputIndex = outputLookup[this.cases[label]];\n            if (outputIndex === undefined) {\n                // First time seeing this output, add it to the end of the grouped list\n                outputLookup[this.cases[label]] = groupedByOutput.length;\n                groupedByOutput.push([\n                    this.cases[label],\n                    [label]\n                ]);\n            } else {\n                // We've seen this expression before, add the label to that output's group\n                groupedByOutput[outputIndex][1].push(label);\n            }\n        }\n        const coerceLabel = label => this.inputType.kind === 'number' ? Number(label) : label;\n        for (const [outputIndex, labels] of groupedByOutput) {\n            if (labels.length === 1) {\n                // Only a single label matches this output expression\n                serialized.push(coerceLabel(labels[0]));\n            } else {\n                // Array of literal labels pointing to this output expression\n                serialized.push(labels.map(coerceLabel));\n            }\n            serialized.push(this.outputs[outputIndex].serialize());\n        }\n        serialized.push(this.otherwise.serialize());\n        return serialized;\n    }\n}\nvar Match$1 = Match;\n\nclass Case {\n    constructor(type, branches, otherwise) {\n        this.type = type;\n        this.branches = branches;\n        this.otherwise = otherwise;\n    }\n    static parse(args, context) {\n        if (args.length < 4)\n            return context.error(`Expected at least 3 arguments, but found only ${ args.length - 1 }.`);\n        if (args.length % 2 !== 0)\n            return context.error(`Expected an odd number of arguments.`);\n        let outputType;\n        if (context.expectedType && context.expectedType.kind !== 'value') {\n            outputType = context.expectedType;\n        }\n        const branches = [];\n        for (let i = 1; i < args.length - 1; i += 2) {\n            const test = context.parse(args[i], i, BooleanType);\n            if (!test)\n                return null;\n            const result = context.parse(args[i + 1], i + 1, outputType);\n            if (!result)\n                return null;\n            branches.push([\n                test,\n                result\n            ]);\n            outputType = outputType || result.type;\n        }\n        const otherwise = context.parse(args[args.length - 1], args.length - 1, outputType);\n        if (!otherwise)\n            return null;\n        return new Case(outputType, branches, otherwise);\n    }\n    evaluate(ctx) {\n        for (const [test, expression] of this.branches) {\n            if (test.evaluate(ctx)) {\n                return expression.evaluate(ctx);\n            }\n        }\n        return this.otherwise.evaluate(ctx);\n    }\n    eachChild(fn) {\n        for (const [test, expression] of this.branches) {\n            fn(test);\n            fn(expression);\n        }\n        fn(this.otherwise);\n    }\n    outputDefined() {\n        return this.branches.every(([_, out]) => out.outputDefined()) && this.otherwise.outputDefined();\n    }\n    serialize() {\n        const serialized = ['case'];\n        this.eachChild(child => {\n            serialized.push(child.serialize());\n        });\n        return serialized;\n    }\n}\nvar Case$1 = Case;\n\n//      \nclass Slice {\n    constructor(type, input, beginIndex, endIndex) {\n        this.type = type;\n        this.input = input;\n        this.beginIndex = beginIndex;\n        this.endIndex = endIndex;\n    }\n    static parse(args, context) {\n        if (args.length <= 2 || args.length >= 5) {\n            return context.error(`Expected 3 or 4 arguments, but found ${ args.length - 1 } instead.`);\n        }\n        const input = context.parse(args[1], 1, ValueType);\n        const beginIndex = context.parse(args[2], 2, NumberType);\n        if (!input || !beginIndex)\n            return null;\n        if (!isValidType(input.type, [\n                array$1(ValueType),\n                StringType,\n                ValueType\n            ])) {\n            return context.error(`Expected first argument to be of type array or string, but found ${ toString$1(input.type) } instead`);\n        }\n        if (args.length === 4) {\n            const endIndex = context.parse(args[3], 3, NumberType);\n            if (!endIndex)\n                return null;\n            return new Slice(input.type, input, beginIndex, endIndex);\n        } else {\n            return new Slice(input.type, input, beginIndex);\n        }\n    }\n    evaluate(ctx) {\n        const input = this.input.evaluate(ctx);\n        const beginIndex = this.beginIndex.evaluate(ctx);\n        if (!isValidNativeType(input, [\n                'string',\n                'array'\n            ])) {\n            throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${ toString$1(typeOf(input)) } instead.`);\n        }\n        if (this.endIndex) {\n            const endIndex = this.endIndex.evaluate(ctx);\n            return input.slice(beginIndex, endIndex);\n        }\n        return input.slice(beginIndex);\n    }\n    eachChild(fn) {\n        fn(this.input);\n        fn(this.beginIndex);\n        if (this.endIndex) {\n            fn(this.endIndex);\n        }\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        if (this.endIndex != null && this.endIndex !== undefined) {\n            const endIndex = this.endIndex.serialize();\n            return [\n                'slice',\n                this.input.serialize(),\n                this.beginIndex.serialize(),\n                endIndex\n            ];\n        }\n        return [\n            'slice',\n            this.input.serialize(),\n            this.beginIndex.serialize()\n        ];\n    }\n}\nvar Slice$1 = Slice;\n\n//      \nfunction isComparableType(op, type) {\n    if (op === '==' || op === '!=') {\n        // equality operator\n        return type.kind === 'boolean' || type.kind === 'string' || type.kind === 'number' || type.kind === 'null' || type.kind === 'value';\n    } else {\n        // ordering operator\n        return type.kind === 'string' || type.kind === 'number' || type.kind === 'value';\n    }\n}\nfunction eq(ctx, a, b) {\n    return a === b;\n}\nfunction neq(ctx, a, b) {\n    return a !== b;\n}\nfunction lt(ctx, a, b) {\n    return a < b;\n}\nfunction gt(ctx, a, b) {\n    return a > b;\n}\nfunction lteq(ctx, a, b) {\n    return a <= b;\n}\nfunction gteq(ctx, a, b) {\n    return a >= b;\n}\nfunction eqCollate(ctx, a, b, c) {\n    return c.compare(a, b) === 0;\n}\nfunction neqCollate(ctx, a, b, c) {\n    return !eqCollate(ctx, a, b, c);\n}\nfunction ltCollate(ctx, a, b, c) {\n    return c.compare(a, b) < 0;\n}\nfunction gtCollate(ctx, a, b, c) {\n    return c.compare(a, b) > 0;\n}\nfunction lteqCollate(ctx, a, b, c) {\n    return c.compare(a, b) <= 0;\n}\nfunction gteqCollate(ctx, a, b, c) {\n    return c.compare(a, b) >= 0;\n}\n/**\n * Special form for comparison operators, implementing the signatures:\n * - (T, T, ?Collator) => boolean\n * - (T, value, ?Collator) => boolean\n * - (value, T, ?Collator) => boolean\n *\n * For inequalities, T must be either value, string, or number. For ==/!=, it\n * can also be boolean or null.\n *\n * Equality semantics are equivalent to Javascript's strict equality (===/!==)\n * -- i.e., when the arguments' types don't match, == evaluates to false, != to\n * true.\n *\n * When types don't match in an ordering comparison, a runtime error is thrown.\n *\n * @private\n */\nfunction makeComparison(op, compareBasic, compareWithCollator) {\n    const isOrderComparison = op !== '==' && op !== '!=';\n    return class Comparison {\n        constructor(lhs, rhs, collator) {\n            this.type = BooleanType;\n            this.lhs = lhs;\n            this.rhs = rhs;\n            this.collator = collator;\n            this.hasUntypedArgument = lhs.type.kind === 'value' || rhs.type.kind === 'value';\n        }\n        static parse(args, context) {\n            if (args.length !== 3 && args.length !== 4)\n                return context.error(`Expected two or three arguments.`);\n            const op = args[0];\n            let lhs = context.parse(args[1], 1, ValueType);\n            if (!lhs)\n                return null;\n            if (!isComparableType(op, lhs.type)) {\n                return context.concat(1).error(`\"${ op }\" comparisons are not supported for type '${ toString$1(lhs.type) }'.`);\n            }\n            let rhs = context.parse(args[2], 2, ValueType);\n            if (!rhs)\n                return null;\n            if (!isComparableType(op, rhs.type)) {\n                return context.concat(2).error(`\"${ op }\" comparisons are not supported for type '${ toString$1(rhs.type) }'.`);\n            }\n            if (lhs.type.kind !== rhs.type.kind && lhs.type.kind !== 'value' && rhs.type.kind !== 'value') {\n                return context.error(`Cannot compare types '${ toString$1(lhs.type) }' and '${ toString$1(rhs.type) }'.`);\n            }\n            if (isOrderComparison) {\n                // typing rules specific to less/greater than operators\n                if (lhs.type.kind === 'value' && rhs.type.kind !== 'value') {\n                    // (value, T)\n                    lhs = new Assertion$1(rhs.type, [lhs]);\n                } else if (lhs.type.kind !== 'value' && rhs.type.kind === 'value') {\n                    // (T, value)\n                    rhs = new Assertion$1(lhs.type, [rhs]);\n                }\n            }\n            let collator = null;\n            if (args.length === 4) {\n                if (lhs.type.kind !== 'string' && rhs.type.kind !== 'string' && lhs.type.kind !== 'value' && rhs.type.kind !== 'value') {\n                    return context.error(`Cannot use collator to compare non-string types.`);\n                }\n                collator = context.parse(args[3], 3, CollatorType);\n                if (!collator)\n                    return null;\n            }\n            return new Comparison(lhs, rhs, collator);\n        }\n        evaluate(ctx) {\n            const lhs = this.lhs.evaluate(ctx);\n            const rhs = this.rhs.evaluate(ctx);\n            if (isOrderComparison && this.hasUntypedArgument) {\n                const lt = typeOf(lhs);\n                const rt = typeOf(rhs);\n                // check that type is string or number, and equal\n                if (lt.kind !== rt.kind || !(lt.kind === 'string' || lt.kind === 'number')) {\n                    throw new RuntimeError$1(`Expected arguments for \"${ op }\" to be (string, string) or (number, number), but found (${ lt.kind }, ${ rt.kind }) instead.`);\n                }\n            }\n            if (this.collator && !isOrderComparison && this.hasUntypedArgument) {\n                const lt = typeOf(lhs);\n                const rt = typeOf(rhs);\n                if (lt.kind !== 'string' || rt.kind !== 'string') {\n                    return compareBasic(ctx, lhs, rhs);\n                }\n            }\n            return this.collator ? compareWithCollator(ctx, lhs, rhs, this.collator.evaluate(ctx)) : compareBasic(ctx, lhs, rhs);\n        }\n        eachChild(fn) {\n            fn(this.lhs);\n            fn(this.rhs);\n            if (this.collator) {\n                fn(this.collator);\n            }\n        }\n        outputDefined() {\n            return true;\n        }\n        serialize() {\n            const serialized = [op];\n            this.eachChild(child => {\n                serialized.push(child.serialize());\n            });\n            return serialized;\n        }\n    };\n}\nconst Equals = makeComparison('==', eq, eqCollate);\nconst NotEquals = makeComparison('!=', neq, neqCollate);\nconst LessThan = makeComparison('<', lt, ltCollate);\nconst GreaterThan = makeComparison('>', gt, gtCollate);\nconst LessThanOrEqual = makeComparison('<=', lteq, lteqCollate);\nconst GreaterThanOrEqual = makeComparison('>=', gteq, gteqCollate);\n\n//      \nclass NumberFormat {\n    // BCP 47 language tag\n    // ISO 4217 currency code, required if style=currency\n    // Simple units sanctioned for use in ECMAScript, required if style=unit. https://tc39.es/proposal-unified-intl-numberformat/section6/locales-currencies-tz_proposed_out.html#sec-issanctionedsimpleunitidentifier\n    // Default 0\n    // Default 3\n    constructor(number, locale, currency, unit, minFractionDigits, maxFractionDigits) {\n        this.type = StringType;\n        this.number = number;\n        this.locale = locale;\n        this.currency = currency;\n        this.unit = unit;\n        this.minFractionDigits = minFractionDigits;\n        this.maxFractionDigits = maxFractionDigits;\n    }\n    static parse(args, context) {\n        if (args.length !== 3)\n            return context.error(`Expected two arguments.`);\n        const number = context.parse(args[1], 1, NumberType);\n        if (!number)\n            return null;\n        const options = args[2];\n        if (typeof options !== 'object' || Array.isArray(options))\n            return context.error(`NumberFormat options argument must be an object.`);\n        let locale = null;\n        if (options['locale']) {\n            locale = context.parse(options['locale'], 1, StringType);\n            if (!locale)\n                return null;\n        }\n        let currency = null;\n        if (options['currency']) {\n            currency = context.parse(options['currency'], 1, StringType);\n            if (!currency)\n                return null;\n        }\n        let unit = null;\n        if (options['unit']) {\n            unit = context.parse(options['unit'], 1, StringType);\n            if (!unit)\n                return null;\n        }\n        let minFractionDigits = null;\n        if (options['min-fraction-digits']) {\n            minFractionDigits = context.parse(options['min-fraction-digits'], 1, NumberType);\n            if (!minFractionDigits)\n                return null;\n        }\n        let maxFractionDigits = null;\n        if (options['max-fraction-digits']) {\n            maxFractionDigits = context.parse(options['max-fraction-digits'], 1, NumberType);\n            if (!maxFractionDigits)\n                return null;\n        }\n        return new NumberFormat(number, locale, currency, unit, minFractionDigits, maxFractionDigits);\n    }\n    evaluate(ctx) {\n        return new Intl.NumberFormat(this.locale ? this.locale.evaluate(ctx) : [], {\n            style: this.currency && 'currency' || this.unit && 'unit' || 'decimal',\n            currency: this.currency ? this.currency.evaluate(ctx) : undefined,\n            unit: this.unit ? this.unit.evaluate(ctx) : undefined,\n            minimumFractionDigits: this.minFractionDigits ? this.minFractionDigits.evaluate(ctx) : undefined,\n            maximumFractionDigits: this.maxFractionDigits ? this.maxFractionDigits.evaluate(ctx) : undefined\n        }).format(this.number.evaluate(ctx));\n    }\n    eachChild(fn) {\n        fn(this.number);\n        if (this.locale) {\n            fn(this.locale);\n        }\n        if (this.currency) {\n            fn(this.currency);\n        }\n        if (this.unit) {\n            fn(this.unit);\n        }\n        if (this.minFractionDigits) {\n            fn(this.minFractionDigits);\n        }\n        if (this.maxFractionDigits) {\n            fn(this.maxFractionDigits);\n        }\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        const options = {};\n        if (this.locale) {\n            options['locale'] = this.locale.serialize();\n        }\n        if (this.currency) {\n            options['currency'] = this.currency.serialize();\n        }\n        if (this.unit) {\n            options['unit'] = this.unit.serialize();\n        }\n        if (this.minFractionDigits) {\n            options['min-fraction-digits'] = this.minFractionDigits.serialize();\n        }\n        if (this.maxFractionDigits) {\n            options['max-fraction-digits'] = this.maxFractionDigits.serialize();\n        }\n        return [\n            'number-format',\n            this.number.serialize(),\n            options\n        ];\n    }\n}\n\n//      \nclass Length {\n    constructor(input) {\n        this.type = NumberType;\n        this.input = input;\n    }\n    static parse(args, context) {\n        if (args.length !== 2)\n            return context.error(`Expected 1 argument, but found ${ args.length - 1 } instead.`);\n        const input = context.parse(args[1], 1);\n        if (!input)\n            return null;\n        if (input.type.kind !== 'array' && input.type.kind !== 'string' && input.type.kind !== 'value')\n            return context.error(`Expected argument of type string or array, but found ${ toString$1(input.type) } instead.`);\n        return new Length(input);\n    }\n    evaluate(ctx) {\n        const input = this.input.evaluate(ctx);\n        if (typeof input === 'string') {\n            return input.length;\n        } else if (Array.isArray(input)) {\n            return input.length;\n        } else {\n            throw new RuntimeError$1(`Expected value to be of type string or array, but found ${ toString$1(typeOf(input)) } instead.`);\n        }\n    }\n    eachChild(fn) {\n        fn(this.input);\n    }\n    outputDefined() {\n        return false;\n    }\n    serialize() {\n        const serialized = ['length'];\n        this.eachChild(child => {\n            serialized.push(child.serialize());\n        });\n        return serialized;\n    }\n}\nvar Length$1 = Length;\n\n//      \nconst expressions = {\n    // special forms\n    '==': Equals,\n    '!=': NotEquals,\n    '>': GreaterThan,\n    '<': LessThan,\n    '>=': GreaterThanOrEqual,\n    '<=': LessThanOrEqual,\n    'array': Assertion$1,\n    'at': At$1,\n    'boolean': Assertion$1,\n    'case': Case$1,\n    'coalesce': Coalesce$1,\n    'collator': CollatorExpression,\n    'format': FormatExpression,\n    'image': ImageExpression,\n    'in': In$1,\n    'index-of': IndexOf$1,\n    'interpolate': Interpolate$1,\n    'interpolate-hcl': Interpolate$1,\n    'interpolate-lab': Interpolate$1,\n    'length': Length$1,\n    'let': Let$1,\n    'literal': Literal$1,\n    'match': Match$1,\n    'number': Assertion$1,\n    'number-format': NumberFormat,\n    'object': Assertion$1,\n    'slice': Slice$1,\n    'step': Step$1,\n    'string': Assertion$1,\n    'to-boolean': Coercion$1,\n    'to-color': Coercion$1,\n    'to-number': Coercion$1,\n    'to-string': Coercion$1,\n    'var': Var$1,\n    'within': Within$1\n};\nfunction rgba(ctx, [r, g, b, a]) {\n    r = r.evaluate(ctx);\n    g = g.evaluate(ctx);\n    b = b.evaluate(ctx);\n    const alpha = a ? a.evaluate(ctx) : 1;\n    const error = validateRGBA(r, g, b, alpha);\n    if (error)\n        throw new RuntimeError$1(error);\n    return new Color$1(r / 255 * alpha, g / 255 * alpha, b / 255 * alpha, alpha);\n}\nfunction has(key, obj) {\n    return key in obj;\n}\nfunction get(key, obj) {\n    const v = obj[key];\n    return typeof v === 'undefined' ? null : v;\n}\nfunction binarySearch(v, a, i, j) {\n    while (i <= j) {\n        const m = i + j >> 1;\n        if (a[m] === v)\n            return true;\n        if (a[m] > v)\n            j = m - 1;\n        else\n            i = m + 1;\n    }\n    return false;\n}\nfunction varargs(type) {\n    return { type };\n}\nCompoundExpression$1.register(expressions, {\n    'error': [\n        ErrorType,\n        [StringType],\n        (ctx, [v]) => {\n            throw new RuntimeError$1(v.evaluate(ctx));\n        }\n    ],\n    'typeof': [\n        StringType,\n        [ValueType],\n        (ctx, [v]) => toString$1(typeOf(v.evaluate(ctx)))\n    ],\n    'to-rgba': [\n        array$1(NumberType, 4),\n        [ColorType],\n        (ctx, [v]) => {\n            return v.evaluate(ctx).toArray();\n        }\n    ],\n    'rgb': [\n        ColorType,\n        [\n            NumberType,\n            NumberType,\n            NumberType\n        ],\n        rgba\n    ],\n    'rgba': [\n        ColorType,\n        [\n            NumberType,\n            NumberType,\n            NumberType,\n            NumberType\n        ],\n        rgba\n    ],\n    'has': {\n        type: BooleanType,\n        overloads: [\n            [\n                [StringType],\n                (ctx, [key]) => has(key.evaluate(ctx), ctx.properties())\n            ],\n            [\n                [\n                    StringType,\n                    ObjectType\n                ],\n                (ctx, [key, obj]) => has(key.evaluate(ctx), obj.evaluate(ctx))\n            ]\n        ]\n    },\n    'get': {\n        type: ValueType,\n        overloads: [\n            [\n                [StringType],\n                (ctx, [key]) => get(key.evaluate(ctx), ctx.properties())\n            ],\n            [\n                [\n                    StringType,\n                    ObjectType\n                ],\n                (ctx, [key, obj]) => get(key.evaluate(ctx), obj.evaluate(ctx))\n            ]\n        ]\n    },\n    'feature-state': [\n        ValueType,\n        [StringType],\n        (ctx, [key]) => get(key.evaluate(ctx), ctx.featureState || {})\n    ],\n    'properties': [\n        ObjectType,\n        [],\n        ctx => ctx.properties()\n    ],\n    'geometry-type': [\n        StringType,\n        [],\n        ctx => ctx.geometryType()\n    ],\n    'id': [\n        ValueType,\n        [],\n        ctx => ctx.id()\n    ],\n    'zoom': [\n        NumberType,\n        [],\n        ctx => ctx.globals.zoom\n    ],\n    'pitch': [\n        NumberType,\n        [],\n        ctx => ctx.globals.pitch || 0\n    ],\n    'distance-from-center': [\n        NumberType,\n        [],\n        ctx => ctx.distanceFromCenter()\n    ],\n    'heatmap-density': [\n        NumberType,\n        [],\n        ctx => ctx.globals.heatmapDensity || 0\n    ],\n    'line-progress': [\n        NumberType,\n        [],\n        ctx => ctx.globals.lineProgress || 0\n    ],\n    'sky-radial-progress': [\n        NumberType,\n        [],\n        ctx => ctx.globals.skyRadialProgress || 0\n    ],\n    'accumulated': [\n        ValueType,\n        [],\n        ctx => ctx.globals.accumulated === undefined ? null : ctx.globals.accumulated\n    ],\n    '+': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => {\n            let result = 0;\n            for (const arg of args) {\n                result += arg.evaluate(ctx);\n            }\n            return result;\n        }\n    ],\n    '*': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => {\n            let result = 1;\n            for (const arg of args) {\n                result *= arg.evaluate(ctx);\n            }\n            return result;\n        }\n    ],\n    '-': {\n        type: NumberType,\n        overloads: [\n            [\n                [\n                    NumberType,\n                    NumberType\n                ],\n                (ctx, [a, b]) => a.evaluate(ctx) - b.evaluate(ctx)\n            ],\n            [\n                [NumberType],\n                (ctx, [a]) => -a.evaluate(ctx)\n            ]\n        ]\n    },\n    '/': [\n        NumberType,\n        [\n            NumberType,\n            NumberType\n        ],\n        (ctx, [a, b]) => a.evaluate(ctx) / b.evaluate(ctx)\n    ],\n    '%': [\n        NumberType,\n        [\n            NumberType,\n            NumberType\n        ],\n        (ctx, [a, b]) => a.evaluate(ctx) % b.evaluate(ctx)\n    ],\n    'ln2': [\n        NumberType,\n        [],\n        () => Math.LN2\n    ],\n    'pi': [\n        NumberType,\n        [],\n        () => Math.PI\n    ],\n    'e': [\n        NumberType,\n        [],\n        () => Math.E\n    ],\n    '^': [\n        NumberType,\n        [\n            NumberType,\n            NumberType\n        ],\n        (ctx, [b, e]) => Math.pow(b.evaluate(ctx), e.evaluate(ctx))\n    ],\n    'sqrt': [\n        NumberType,\n        [NumberType],\n        (ctx, [x]) => Math.sqrt(x.evaluate(ctx))\n    ],\n    'log10': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log(n.evaluate(ctx)) / Math.LN10\n    ],\n    'ln': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log(n.evaluate(ctx))\n    ],\n    'log2': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.log(n.evaluate(ctx)) / Math.LN2\n    ],\n    'sin': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.sin(n.evaluate(ctx))\n    ],\n    'cos': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.cos(n.evaluate(ctx))\n    ],\n    'tan': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.tan(n.evaluate(ctx))\n    ],\n    'asin': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.asin(n.evaluate(ctx))\n    ],\n    'acos': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.acos(n.evaluate(ctx))\n    ],\n    'atan': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.atan(n.evaluate(ctx))\n    ],\n    'min': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => Math.min(...args.map(arg => arg.evaluate(ctx)))\n    ],\n    'max': [\n        NumberType,\n        varargs(NumberType),\n        (ctx, args) => Math.max(...args.map(arg => arg.evaluate(ctx)))\n    ],\n    'abs': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.abs(n.evaluate(ctx))\n    ],\n    'round': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => {\n            const v = n.evaluate(ctx);\n            // Javascript's Math.round() rounds towards +Infinity for halfway\n            // values, even when they're negative. It's more common to round\n            // away from 0 (e.g., this is what python and C++ do)\n            return v < 0 ? -Math.round(-v) : Math.round(v);\n        }\n    ],\n    'floor': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.floor(n.evaluate(ctx))\n    ],\n    'ceil': [\n        NumberType,\n        [NumberType],\n        (ctx, [n]) => Math.ceil(n.evaluate(ctx))\n    ],\n    'filter-==': [\n        BooleanType,\n        [\n            StringType,\n            ValueType\n        ],\n        (ctx, [k, v]) => ctx.properties()[k.value] === v.value\n    ],\n    'filter-id-==': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => ctx.id() === v.value\n    ],\n    'filter-type-==': [\n        BooleanType,\n        [StringType],\n        (ctx, [v]) => ctx.geometryType() === v.value\n    ],\n    'filter-<': [\n        BooleanType,\n        [\n            StringType,\n            ValueType\n        ],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[k.value];\n            const b = v.value;\n            return typeof a === typeof b && a < b;\n        }\n    ],\n    'filter-id-<': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = v.value;\n            return typeof a === typeof b && a < b;\n        }\n    ],\n    'filter->': [\n        BooleanType,\n        [\n            StringType,\n            ValueType\n        ],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[k.value];\n            const b = v.value;\n            return typeof a === typeof b && a > b;\n        }\n    ],\n    'filter-id->': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = v.value;\n            return typeof a === typeof b && a > b;\n        }\n    ],\n    'filter-<=': [\n        BooleanType,\n        [\n            StringType,\n            ValueType\n        ],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[k.value];\n            const b = v.value;\n            return typeof a === typeof b && a <= b;\n        }\n    ],\n    'filter-id-<=': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = v.value;\n            return typeof a === typeof b && a <= b;\n        }\n    ],\n    'filter->=': [\n        BooleanType,\n        [\n            StringType,\n            ValueType\n        ],\n        (ctx, [k, v]) => {\n            const a = ctx.properties()[k.value];\n            const b = v.value;\n            return typeof a === typeof b && a >= b;\n        }\n    ],\n    'filter-id->=': [\n        BooleanType,\n        [ValueType],\n        (ctx, [v]) => {\n            const a = ctx.id();\n            const b = v.value;\n            return typeof a === typeof b && a >= b;\n        }\n    ],\n    'filter-has': [\n        BooleanType,\n        [ValueType],\n        (ctx, [k]) => k.value in ctx.properties()\n    ],\n    'filter-has-id': [\n        BooleanType,\n        [],\n        ctx => ctx.id() !== null && ctx.id() !== undefined\n    ],\n    'filter-type-in': [\n        BooleanType,\n        [array$1(StringType)],\n        (ctx, [v]) => v.value.indexOf(ctx.geometryType()) >= 0\n    ],\n    'filter-id-in': [\n        BooleanType,\n        [array$1(ValueType)],\n        (ctx, [v]) => v.value.indexOf(ctx.id()) >= 0\n    ],\n    'filter-in-small': [\n        BooleanType,\n        [\n            StringType,\n            array$1(ValueType)\n        ],\n        // assumes v is an array literal\n        (ctx, [k, v]) => v.value.indexOf(ctx.properties()[k.value]) >= 0\n    ],\n    'filter-in-large': [\n        BooleanType,\n        [\n            StringType,\n            array$1(ValueType)\n        ],\n        // assumes v is a array literal with values sorted in ascending order and of a single type\n        (ctx, [k, v]) => binarySearch(ctx.properties()[k.value], v.value, 0, v.value.length - 1)\n    ],\n    'all': {\n        type: BooleanType,\n        overloads: [\n            [\n                [\n                    BooleanType,\n                    BooleanType\n                ],\n                (ctx, [a, b]) => a.evaluate(ctx) && b.evaluate(ctx)\n            ],\n            [\n                varargs(BooleanType),\n                (ctx, args) => {\n                    for (const arg of args) {\n                        if (!arg.evaluate(ctx))\n                            return false;\n                    }\n                    return true;\n                }\n            ]\n        ]\n    },\n    'any': {\n        type: BooleanType,\n        overloads: [\n            [\n                [\n                    BooleanType,\n                    BooleanType\n                ],\n                (ctx, [a, b]) => a.evaluate(ctx) || b.evaluate(ctx)\n            ],\n            [\n                varargs(BooleanType),\n                (ctx, args) => {\n                    for (const arg of args) {\n                        if (arg.evaluate(ctx))\n                            return true;\n                    }\n                    return false;\n                }\n            ]\n        ]\n    },\n    '!': [\n        BooleanType,\n        [BooleanType],\n        (ctx, [b]) => !b.evaluate(ctx)\n    ],\n    'is-supported-script': [\n        BooleanType,\n        [StringType],\n        // At parse time this will always return true, so we need to exclude this expression with isGlobalPropertyConstant\n        (ctx, [s]) => {\n            const isSupportedScript = ctx.globals && ctx.globals.isSupportedScript;\n            if (isSupportedScript) {\n                return isSupportedScript(s.evaluate(ctx));\n            }\n            return true;\n        }\n    ],\n    'upcase': [\n        StringType,\n        [StringType],\n        (ctx, [s]) => s.evaluate(ctx).toUpperCase()\n    ],\n    'downcase': [\n        StringType,\n        [StringType],\n        (ctx, [s]) => s.evaluate(ctx).toLowerCase()\n    ],\n    'concat': [\n        StringType,\n        varargs(ValueType),\n        (ctx, args) => args.map(arg => toString(arg.evaluate(ctx))).join('')\n    ],\n    'resolved-locale': [\n        StringType,\n        [CollatorType],\n        (ctx, [collator]) => collator.evaluate(ctx).resolvedLocale()\n    ]\n});\nvar definitions = expressions;\n\n//      \n/**\n * A type used for returning and propagating errors. The first element of the union\n * represents success and contains a value, and the second represents an error and\n * contains an error value.\n * @private\n */\nfunction success(value) {\n    return {\n        result: 'success',\n        value\n    };\n}\nfunction error(value) {\n    return {\n        result: 'error',\n        value\n    };\n}\n\n//      \nfunction supportsPropertyExpression(spec) {\n    return spec['property-type'] === 'data-driven';\n}\nfunction supportsZoomExpression(spec) {\n    return !!spec.expression && spec.expression.parameters.indexOf('zoom') > -1;\n}\nfunction supportsInterpolation(spec) {\n    return !!spec.expression && spec.expression.interpolated;\n}\n\nfunction isFunction(value) {\n    return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n\nclass StyleExpression {\n    constructor(expression, propertySpec) {\n        this.expression = expression;\n        this._warningHistory = {};\n        this._evaluator = new EvaluationContext$1();\n        this._defaultValue = propertySpec ? getDefaultValue(propertySpec) : null;\n        this._enumValues = propertySpec && propertySpec.type === 'enum' ? propertySpec.values : null;\n    }\n    evaluateWithoutErrorHandling(globals, feature, featureState, canonical, availableImages, formattedSection, featureTileCoord, featureDistanceData) {\n        this._evaluator.globals = globals;\n        this._evaluator.feature = feature;\n        this._evaluator.featureState = featureState;\n        this._evaluator.canonical = canonical || null;\n        this._evaluator.availableImages = availableImages || null;\n        this._evaluator.formattedSection = formattedSection;\n        this._evaluator.featureTileCoord = featureTileCoord || null;\n        this._evaluator.featureDistanceData = featureDistanceData || null;\n        return this.expression.evaluate(this._evaluator);\n    }\n    evaluate(globals, feature, featureState, canonical, availableImages, formattedSection, featureTileCoord, featureDistanceData) {\n        this._evaluator.globals = globals;\n        this._evaluator.feature = feature || null;\n        this._evaluator.featureState = featureState || null;\n        this._evaluator.canonical = canonical || null;\n        this._evaluator.availableImages = availableImages || null;\n        this._evaluator.formattedSection = formattedSection || null;\n        this._evaluator.featureTileCoord = featureTileCoord || null;\n        this._evaluator.featureDistanceData = featureDistanceData || null;\n        try {\n            const val = this.expression.evaluate(this._evaluator);\n            // eslint-disable-next-line no-self-compare\n            if (val === null || val === undefined || typeof val === 'number' && val !== val) {\n                return this._defaultValue;\n            }\n            if (this._enumValues && !(val in this._enumValues)) {\n                throw new RuntimeError$1(`Expected value to be one of ${ Object.keys(this._enumValues).map(v => JSON.stringify(v)).join(', ') }, but found ${ JSON.stringify(val) } instead.`);\n            }\n            return val;\n        } catch (e) {\n            if (!this._warningHistory[e.message]) {\n                this._warningHistory[e.message] = true;\n                if (typeof console !== 'undefined') {\n                    console.warn(e.message);\n                }\n            }\n            return this._defaultValue;\n        }\n    }\n}\nfunction isExpression(expression) {\n    return Array.isArray(expression) && expression.length > 0 && typeof expression[0] === 'string' && expression[0] in definitions;\n}\n/**\n * Parse and typecheck the given style spec JSON expression.  If\n * options.defaultValue is provided, then the resulting StyleExpression's\n * `evaluate()` method will handle errors by logging a warning (once per\n * message) and returning the default value.  Otherwise, it will throw\n * evaluation errors.\n *\n * @private\n */\nfunction createExpression(expression, propertySpec) {\n    const parser = new ParsingContext$1(definitions, [], propertySpec ? getExpectedType(propertySpec) : undefined);\n    // For string-valued properties, coerce to string at the top level rather than asserting.\n    const parsed = parser.parse(expression, undefined, undefined, undefined, propertySpec && propertySpec.type === 'string' ? { typeAnnotation: 'coerce' } : undefined);\n    if (!parsed) {\n        return error(parser.errors);\n    }\n    return success(new StyleExpression(parsed, propertySpec));\n}\nclass ZoomConstantExpression {\n    constructor(kind, expression) {\n        this.kind = kind;\n        this._styleExpression = expression;\n        this.isStateDependent = kind !== 'constant' && !isStateConstant(expression.expression);\n    }\n    evaluateWithoutErrorHandling(globals, feature, featureState, canonical, availableImages, formattedSection) {\n        return this._styleExpression.evaluateWithoutErrorHandling(globals, feature, featureState, canonical, availableImages, formattedSection);\n    }\n    evaluate(globals, feature, featureState, canonical, availableImages, formattedSection) {\n        return this._styleExpression.evaluate(globals, feature, featureState, canonical, availableImages, formattedSection);\n    }\n}\nclass ZoomDependentExpression {\n    constructor(kind, expression, zoomStops, interpolationType) {\n        this.kind = kind;\n        this.zoomStops = zoomStops;\n        this._styleExpression = expression;\n        this.isStateDependent = kind !== 'camera' && !isStateConstant(expression.expression);\n        this.interpolationType = interpolationType;\n    }\n    evaluateWithoutErrorHandling(globals, feature, featureState, canonical, availableImages, formattedSection) {\n        return this._styleExpression.evaluateWithoutErrorHandling(globals, feature, featureState, canonical, availableImages, formattedSection);\n    }\n    evaluate(globals, feature, featureState, canonical, availableImages, formattedSection) {\n        return this._styleExpression.evaluate(globals, feature, featureState, canonical, availableImages, formattedSection);\n    }\n    interpolationFactor(input, lower, upper) {\n        if (this.interpolationType) {\n            return Interpolate$1.interpolationFactor(this.interpolationType, input, lower, upper);\n        } else {\n            return 0;\n        }\n    }\n}\nfunction createPropertyExpression(expression, propertySpec) {\n    expression = createExpression(expression, propertySpec);\n    if (expression.result === 'error') {\n        return expression;\n    }\n    const parsed = expression.value.expression;\n    const isFeatureConstant$1 = isFeatureConstant(parsed);\n    if (!isFeatureConstant$1 && !supportsPropertyExpression(propertySpec)) {\n        return error([new ParsingError$1('', 'data expressions not supported')]);\n    }\n    const isZoomConstant = isGlobalPropertyConstant(parsed, [\n        'zoom',\n        'pitch',\n        'distance-from-center'\n    ]);\n    if (!isZoomConstant && !supportsZoomExpression(propertySpec)) {\n        return error([new ParsingError$1('', 'zoom expressions not supported')]);\n    }\n    const zoomCurve = findZoomCurve(parsed);\n    if (!zoomCurve && !isZoomConstant) {\n        return error([new ParsingError$1('', '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.')]);\n    } else if (zoomCurve instanceof ParsingError$1) {\n        return error([zoomCurve]);\n    } else if (zoomCurve instanceof Interpolate$1 && !supportsInterpolation(propertySpec)) {\n        return error([new ParsingError$1('', '\"interpolate\" expressions cannot be used with this property')]);\n    }\n    if (!zoomCurve) {\n        return success(isFeatureConstant$1 ? new ZoomConstantExpression('constant', expression.value) : new ZoomConstantExpression('source', expression.value));\n    }\n    const interpolationType = zoomCurve instanceof Interpolate$1 ? zoomCurve.interpolation : undefined;\n    return success(isFeatureConstant$1 ? new ZoomDependentExpression('camera', expression.value, zoomCurve.labels, interpolationType) : new ZoomDependentExpression('composite', expression.value, zoomCurve.labels, interpolationType));\n}\n// Zoom-dependent expressions may only use [\"zoom\"] as the input to a top-level \"step\" or \"interpolate\"\n// expression (collectively referred to as a \"curve\"). The curve may be wrapped in one or more \"let\" or\n// \"coalesce\" expressions.\nfunction findZoomCurve(expression) {\n    let result = null;\n    if (expression instanceof Let$1) {\n        result = findZoomCurve(expression.result);\n    } else if (expression instanceof Coalesce$1) {\n        for (const arg of expression.args) {\n            result = findZoomCurve(arg);\n            if (result) {\n                break;\n            }\n        }\n    } else if ((expression instanceof Step$1 || expression instanceof Interpolate$1) && expression.input instanceof CompoundExpression$1 && expression.input.name === 'zoom') {\n        result = expression;\n    }\n    if (result instanceof ParsingError$1) {\n        return result;\n    }\n    expression.eachChild(child => {\n        const childResult = findZoomCurve(child);\n        if (childResult instanceof ParsingError$1) {\n            result = childResult;\n        } else if (!result && childResult) {\n            result = new ParsingError$1('', '\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.');\n        } else if (result && childResult && result !== childResult) {\n            result = new ParsingError$1('', 'Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression.');\n        }\n    });\n    return result;\n}\nfunction getExpectedType(spec) {\n    const types = {\n        color: ColorType,\n        string: StringType,\n        number: NumberType,\n        enum: StringType,\n        boolean: BooleanType,\n        formatted: FormattedType,\n        resolvedImage: ResolvedImageType\n    };\n    if (spec.type === 'array') {\n        return array$1(types[spec.value] || ValueType, spec.length);\n    }\n    return types[spec.type];\n}\nfunction getDefaultValue(spec) {\n    if (spec.type === 'color' && (isFunction(spec.default) || Array.isArray(spec.default))) {\n        // Special case for heatmap-color: it uses the 'default:' to define a\n        // default color ramp, but createExpression expects a simple value to fall\n        // back to in case of runtime errors\n        return new Color$1(0, 0, 0, 0);\n    } else if (spec.type === 'color') {\n        return Color$1.parse(spec.default) || null;\n    } else if (spec.default === undefined) {\n        return null;\n    } else {\n        return spec.default;\n    }\n}\n\n//      \n// Turn jsonlint-lines-primitives objects into primitive objects\nfunction unbundle(value) {\n    if (value instanceof Number || value instanceof String || value instanceof Boolean) {\n        return value.valueOf();\n    } else {\n        return value;\n    }\n}\nfunction deepUnbundle(value) {\n    if (Array.isArray(value)) {\n        return value.map(deepUnbundle);\n    } else if (value instanceof Object && !(value instanceof Number || value instanceof String || value instanceof Boolean)) {\n        const unbundledValue = {};\n        for (const key in value) {\n            unbundledValue[key] = deepUnbundle(value[key]);\n        }\n        return unbundledValue;\n    }\n    return unbundle(value);\n}\n\nvar spec = {\"$version\":8,\"$root\":{\"version\":{\"required\":true,\"type\":\"enum\",\"values\":[8]},\"name\":{\"type\":\"string\"},\"metadata\":{\"type\":\"*\"},\"center\":{\"type\":\"array\",\"value\":\"number\"},\"zoom\":{\"type\":\"number\"},\"bearing\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\"},\"pitch\":{\"type\":\"number\",\"default\":0,\"units\":\"degrees\"},\"light\":{\"type\":\"light\"},\"terrain\":{\"type\":\"terrain\"},\"fog\":{\"type\":\"fog\"},\"sources\":{\"required\":true,\"type\":\"sources\"},\"sprite\":{\"type\":\"string\"},\"glyphs\":{\"type\":\"string\"},\"transition\":{\"type\":\"transition\"},\"projection\":{\"type\":\"projection\"},\"layers\":{\"required\":true,\"type\":\"array\",\"value\":\"layer\"}},\"sources\":{\"*\":{\"type\":\"source\"}},\"source\":[\"source_vector\",\"source_raster\",\"source_raster_dem\",\"source_geojson\",\"source_video\",\"source_image\"],\"source_vector\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"vector\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"scheme\":{\"type\":\"enum\",\"values\":{\"xyz\":{},\"tms\":{}},\"default\":\"xyz\"},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"attribution\":{\"type\":\"string\"},\"promoteId\":{\"type\":\"promoteId\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_raster\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"raster\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"tileSize\":{\"type\":\"number\",\"default\":512,\"units\":\"pixels\"},\"scheme\":{\"type\":\"enum\",\"values\":{\"xyz\":{},\"tms\":{}},\"default\":\"xyz\"},\"attribution\":{\"type\":\"string\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_raster_dem\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"raster-dem\":{}}},\"url\":{\"type\":\"string\"},\"tiles\":{\"type\":\"array\",\"value\":\"string\"},\"bounds\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[-180,-85.051129,180,85.051129]},\"minzoom\":{\"type\":\"number\",\"default\":0},\"maxzoom\":{\"type\":\"number\",\"default\":22},\"tileSize\":{\"type\":\"number\",\"default\":512,\"units\":\"pixels\"},\"attribution\":{\"type\":\"string\"},\"encoding\":{\"type\":\"enum\",\"values\":{\"terrarium\":{},\"mapbox\":{}},\"default\":\"mapbox\"},\"volatile\":{\"type\":\"boolean\",\"default\":false},\"*\":{\"type\":\"*\"}},\"source_geojson\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"geojson\":{}}},\"data\":{\"type\":\"*\"},\"maxzoom\":{\"type\":\"number\",\"default\":18},\"attribution\":{\"type\":\"string\"},\"buffer\":{\"type\":\"number\",\"default\":128,\"maximum\":512,\"minimum\":0},\"filter\":{\"type\":\"*\"},\"tolerance\":{\"type\":\"number\",\"default\":0.375},\"cluster\":{\"type\":\"boolean\",\"default\":false},\"clusterRadius\":{\"type\":\"number\",\"default\":50,\"minimum\":0},\"clusterMaxZoom\":{\"type\":\"number\"},\"clusterMinPoints\":{\"type\":\"number\"},\"clusterProperties\":{\"type\":\"*\"},\"lineMetrics\":{\"type\":\"boolean\",\"default\":false},\"generateId\":{\"type\":\"boolean\",\"default\":false},\"promoteId\":{\"type\":\"promoteId\"}},\"source_video\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"video\":{}}},\"urls\":{\"required\":true,\"type\":\"array\",\"value\":\"string\"},\"coordinates\":{\"required\":true,\"type\":\"array\",\"length\":4,\"value\":{\"type\":\"array\",\"length\":2,\"value\":\"number\"}}},\"source_image\":{\"type\":{\"required\":true,\"type\":\"enum\",\"values\":{\"image\":{}}},\"url\":{\"required\":true,\"type\":\"string\"},\"coordinates\":{\"required\":true,\"type\":\"array\",\"length\":4,\"value\":{\"type\":\"array\",\"length\":2,\"value\":\"number\"}}},\"layer\":{\"id\":{\"type\":\"string\",\"required\":true},\"type\":{\"type\":\"enum\",\"values\":{\"fill\":{},\"line\":{},\"symbol\":{},\"circle\":{},\"heatmap\":{},\"fill-extrusion\":{},\"raster\":{},\"hillshade\":{},\"background\":{},\"sky\":{}},\"required\":true},\"metadata\":{\"type\":\"*\"},\"source\":{\"type\":\"string\"},\"source-layer\":{\"type\":\"string\"},\"minzoom\":{\"type\":\"number\",\"minimum\":0,\"maximum\":24},\"maxzoom\":{\"type\":\"number\",\"minimum\":0,\"maximum\":24},\"filter\":{\"type\":\"filter\"},\"layout\":{\"type\":\"layout\"},\"paint\":{\"type\":\"paint\"}},\"layout\":[\"layout_fill\",\"layout_line\",\"layout_circle\",\"layout_heatmap\",\"layout_fill-extrusion\",\"layout_symbol\",\"layout_raster\",\"layout_hillshade\",\"layout_background\",\"layout_sky\"],\"layout_background\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_sky\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_fill\":{\"fill-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_circle\":{\"circle-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_heatmap\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_fill-extrusion\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"},\"fill-extrusion-edge-radius\":{\"type\":\"number\",\"private\":true,\"default\":0,\"minimum\":0,\"maximum\":1,\"property-type\":\"constant\"}},\"layout_line\":{\"line-cap\":{\"type\":\"enum\",\"values\":{\"butt\":{},\"round\":{},\"square\":{}},\"default\":\"butt\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-join\":{\"type\":\"enum\",\"values\":{\"bevel\":{},\"round\":{},\"miter\":{}},\"default\":\"miter\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-miter-limit\":{\"type\":\"number\",\"default\":2,\"requires\":[{\"line-join\":\"miter\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-round-limit\":{\"type\":\"number\",\"default\":1.05,\"requires\":[{\"line-join\":\"round\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_symbol\":{\"symbol-placement\":{\"type\":\"enum\",\"values\":{\"point\":{},\"line\":{},\"line-center\":{}},\"default\":\"point\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-spacing\":{\"type\":\"number\",\"default\":250,\"minimum\":1,\"units\":\"pixels\",\"requires\":[{\"symbol-placement\":\"line\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-avoid-edges\":{\"type\":\"boolean\",\"default\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"symbol-sort-key\":{\"type\":\"number\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"symbol-z-order\":{\"type\":\"enum\",\"values\":{\"auto\":{},\"viewport-y\":{},\"source\":{}},\"default\":\"auto\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-allow-overlap\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-ignore-placement\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-optional\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\",\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-rotation-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-size\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"units\":\"factor of the original icon size\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-text-fit\":{\"type\":\"enum\",\"values\":{\"none\":{},\"width\":{},\"height\":{},\"both\":{}},\"default\":\"none\",\"requires\":[\"icon-image\",\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-text-fit-padding\":{\"type\":\"array\",\"value\":\"number\",\"length\":4,\"default\":[0,0,0,0],\"units\":\"pixels\",\"requires\":[\"icon-image\",\"text-field\",{\"icon-text-fit\":[\"both\",\"width\",\"height\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-image\":{\"type\":\"resolvedImage\",\"tokens\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-padding\":{\"type\":\"number\",\"default\":2,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-keep-upright\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"icon-image\",{\"icon-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-offset\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-anchor\":{\"type\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"default\":\"center\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"icon-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotation-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{},\"auto\":{}},\"default\":\"auto\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-field\":{\"type\":\"formatted\",\"default\":\"\",\"tokens\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-font\":{\"type\":\"array\",\"value\":\"string\",\"default\":[\"Open Sans Regular\",\"Arial Unicode MS Regular\"],\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-size\":{\"type\":\"number\",\"default\":16,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-width\":{\"type\":\"number\",\"default\":10,\"minimum\":0,\"units\":\"ems\",\"requires\":[\"text-field\",{\"symbol-placement\":[\"point\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-line-height\":{\"type\":\"number\",\"default\":1.2,\"units\":\"ems\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-letter-spacing\":{\"type\":\"number\",\"default\":0,\"units\":\"ems\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-justify\":{\"type\":\"enum\",\"values\":{\"auto\":{},\"left\":{},\"center\":{},\"right\":{}},\"default\":\"center\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-radial-offset\":{\"type\":\"number\",\"units\":\"ems\",\"default\":0,\"requires\":[\"text-field\"],\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]}},\"text-variable-anchor\":{\"type\":\"array\",\"value\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"requires\":[\"text-field\",{\"symbol-placement\":[\"point\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-anchor\":{\"type\":\"enum\",\"values\":{\"center\":{},\"left\":{},\"right\":{},\"top\":{},\"bottom\":{},\"top-left\":{},\"top-right\":{},\"bottom-left\":{},\"bottom-right\":{}},\"default\":\"center\",\"requires\":[\"text-field\",{\"!\":\"text-variable-anchor\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-max-angle\":{\"type\":\"number\",\"default\":45,\"units\":\"degrees\",\"requires\":[\"text-field\",{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-writing-mode\":{\"type\":\"array\",\"value\":\"enum\",\"values\":{\"horizontal\":{},\"vertical\":{}},\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"units\":\"degrees\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-padding\":{\"type\":\"number\",\"default\":2,\"minimum\":0,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-keep-upright\":{\"type\":\"boolean\",\"default\":true,\"requires\":[\"text-field\",{\"text-rotation-alignment\":\"map\"},{\"symbol-placement\":[\"line\",\"line-center\"]}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-transform\":{\"type\":\"enum\",\"values\":{\"none\":{},\"uppercase\":{},\"lowercase\":{}},\"default\":\"none\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-offset\":{\"type\":\"array\",\"value\":\"number\",\"units\":\"ems\",\"length\":2,\"default\":[0,0],\"requires\":[\"text-field\",{\"!\":\"text-radial-offset\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"text-allow-overlap\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-ignore-placement\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-optional\":{\"type\":\"boolean\",\"default\":false,\"requires\":[\"text-field\",\"icon-image\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_raster\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"layout_hillshade\":{\"visibility\":{\"type\":\"enum\",\"values\":{\"visible\":{},\"none\":{}},\"default\":\"visible\",\"property-type\":\"constant\"}},\"filter\":{\"type\":\"array\",\"value\":\"*\"},\"filter_symbol\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\",\"pitch\",\"distance-from-center\"]}},\"filter_fill\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_line\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_circle\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_fill-extrusion\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_heatmap\":{\"type\":\"boolean\",\"default\":false,\"transition\":false,\"property-type\":\"data-driven\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]}},\"filter_operator\":{\"type\":\"enum\",\"values\":{\"==\":{},\"!=\":{},\">\":{},\">=\":{},\"<\":{},\"<=\":{},\"in\":{},\"!in\":{},\"all\":{},\"any\":{},\"none\":{},\"has\":{},\"!has\":{},\"within\":{}}},\"geometry_type\":{\"type\":\"enum\",\"values\":{\"Point\":{},\"LineString\":{},\"Polygon\":{}}},\"function\":{\"expression\":{\"type\":\"expression\"},\"stops\":{\"type\":\"array\",\"value\":\"function_stop\"},\"base\":{\"type\":\"number\",\"default\":1,\"minimum\":0},\"property\":{\"type\":\"string\",\"default\":\"$zoom\"},\"type\":{\"type\":\"enum\",\"values\":{\"identity\":{},\"exponential\":{},\"interval\":{},\"categorical\":{}},\"default\":\"exponential\"},\"colorSpace\":{\"type\":\"enum\",\"values\":{\"rgb\":{},\"lab\":{},\"hcl\":{}},\"default\":\"rgb\"},\"default\":{\"type\":\"*\",\"required\":false}},\"function_stop\":{\"type\":\"array\",\"minimum\":0,\"maximum\":24,\"value\":[\"number\",\"color\"],\"length\":2},\"expression\":{\"type\":\"array\",\"value\":\"*\",\"minimum\":1},\"expression_name\":{\"type\":\"enum\",\"values\":{\"let\":{\"group\":\"Variable binding\"},\"var\":{\"group\":\"Variable binding\"},\"literal\":{\"group\":\"Types\"},\"array\":{\"group\":\"Types\"},\"at\":{\"group\":\"Lookup\"},\"in\":{\"group\":\"Lookup\"},\"index-of\":{\"group\":\"Lookup\"},\"slice\":{\"group\":\"Lookup\"},\"case\":{\"group\":\"Decision\"},\"match\":{\"group\":\"Decision\"},\"coalesce\":{\"group\":\"Decision\"},\"step\":{\"group\":\"Ramps, scales, curves\"},\"interpolate\":{\"group\":\"Ramps, scales, curves\"},\"interpolate-hcl\":{\"group\":\"Ramps, scales, curves\"},\"interpolate-lab\":{\"group\":\"Ramps, scales, curves\"},\"ln2\":{\"group\":\"Math\"},\"pi\":{\"group\":\"Math\"},\"e\":{\"group\":\"Math\"},\"typeof\":{\"group\":\"Types\"},\"string\":{\"group\":\"Types\"},\"number\":{\"group\":\"Types\"},\"boolean\":{\"group\":\"Types\"},\"object\":{\"group\":\"Types\"},\"collator\":{\"group\":\"Types\"},\"format\":{\"group\":\"Types\"},\"image\":{\"group\":\"Types\"},\"number-format\":{\"group\":\"Types\"},\"to-string\":{\"group\":\"Types\"},\"to-number\":{\"group\":\"Types\"},\"to-boolean\":{\"group\":\"Types\"},\"to-rgba\":{\"group\":\"Color\"},\"to-color\":{\"group\":\"Types\"},\"rgb\":{\"group\":\"Color\"},\"rgba\":{\"group\":\"Color\"},\"get\":{\"group\":\"Lookup\"},\"has\":{\"group\":\"Lookup\"},\"length\":{\"group\":\"Lookup\"},\"properties\":{\"group\":\"Feature data\"},\"feature-state\":{\"group\":\"Feature data\"},\"geometry-type\":{\"group\":\"Feature data\"},\"id\":{\"group\":\"Feature data\"},\"zoom\":{\"group\":\"Camera\"},\"pitch\":{\"group\":\"Camera\"},\"distance-from-center\":{\"group\":\"Camera\"},\"heatmap-density\":{\"group\":\"Heatmap\"},\"line-progress\":{\"group\":\"Feature data\"},\"sky-radial-progress\":{\"group\":\"sky\"},\"accumulated\":{\"group\":\"Feature data\"},\"+\":{\"group\":\"Math\"},\"*\":{\"group\":\"Math\"},\"-\":{\"group\":\"Math\"},\"/\":{\"group\":\"Math\"},\"%\":{\"group\":\"Math\"},\"^\":{\"group\":\"Math\"},\"sqrt\":{\"group\":\"Math\"},\"log10\":{\"group\":\"Math\"},\"ln\":{\"group\":\"Math\"},\"log2\":{\"group\":\"Math\"},\"sin\":{\"group\":\"Math\"},\"cos\":{\"group\":\"Math\"},\"tan\":{\"group\":\"Math\"},\"asin\":{\"group\":\"Math\"},\"acos\":{\"group\":\"Math\"},\"atan\":{\"group\":\"Math\"},\"min\":{\"group\":\"Math\"},\"max\":{\"group\":\"Math\"},\"round\":{\"group\":\"Math\"},\"abs\":{\"group\":\"Math\"},\"ceil\":{\"group\":\"Math\"},\"floor\":{\"group\":\"Math\"},\"distance\":{\"group\":\"Math\"},\"==\":{\"group\":\"Decision\"},\"!=\":{\"group\":\"Decision\"},\">\":{\"group\":\"Decision\"},\"<\":{\"group\":\"Decision\"},\">=\":{\"group\":\"Decision\"},\"<=\":{\"group\":\"Decision\"},\"all\":{\"group\":\"Decision\"},\"any\":{\"group\":\"Decision\"},\"!\":{\"group\":\"Decision\"},\"within\":{\"group\":\"Decision\"},\"is-supported-script\":{\"group\":\"String\"},\"upcase\":{\"group\":\"String\"},\"downcase\":{\"group\":\"String\"},\"concat\":{\"group\":\"String\"},\"resolved-locale\":{\"group\":\"String\"}}},\"fog\":{\"range\":{\"type\":\"array\",\"default\":[0.5,10],\"minimum\":-20,\"maximum\":20,\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]}},\"color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#ffffff\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"high-color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#245cdf\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"space-color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],4,\"#010b19\",7,\"#367ab9\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"horizon-blend\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],4,0.2,7,0.1],\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"star-intensity\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":[\"interpolate\",[\"linear\"],[\"zoom\"],5,0.35,6,0],\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true}},\"light\":{\"anchor\":{\"type\":\"enum\",\"default\":\"viewport\",\"values\":{\"map\":{},\"viewport\":{}},\"property-type\":\"data-constant\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]}},\"position\":{\"type\":\"array\",\"default\":[1.15,210,30],\"length\":3,\"value\":\"number\",\"property-type\":\"data-constant\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]}},\"color\":{\"type\":\"color\",\"property-type\":\"data-constant\",\"default\":\"#ffffff\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"intensity\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":0.5,\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true}},\"projection\":{\"name\":{\"type\":\"enum\",\"values\":{\"albers\":{},\"equalEarth\":{},\"equirectangular\":{},\"lambertConformalConic\":{},\"mercator\":{},\"naturalEarth\":{},\"winkelTripel\":{},\"globe\":{}},\"default\":\"mercator\",\"required\":true},\"center\":{\"type\":\"array\",\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"minimum\":[-180,-90],\"maximum\":[180,90],\"transition\":false,\"requires\":[{\"name\":[\"albers\",\"lambertConformalConic\"]}]},\"parallels\":{\"type\":\"array\",\"length\":2,\"value\":\"number\",\"property-type\":\"data-constant\",\"minimum\":[-90,-90],\"maximum\":[90,90],\"transition\":false,\"requires\":[{\"name\":[\"albers\",\"lambertConformalConic\"]}]}},\"terrain\":{\"source\":{\"type\":\"string\",\"required\":true},\"exaggeration\":{\"type\":\"number\",\"property-type\":\"data-constant\",\"default\":1,\"minimum\":0,\"maximum\":1000,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true,\"requires\":[\"source\"]}},\"paint\":[\"paint_fill\",\"paint_line\",\"paint_circle\",\"paint_heatmap\",\"paint_fill-extrusion\",\"paint_symbol\",\"paint_raster\",\"paint_hillshade\",\"paint_background\",\"paint_sky\"],\"paint_fill\":{\"fill-antialias\":{\"type\":\"boolean\",\"default\":true,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"fill-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-outline-color\":{\"type\":\"color\",\"transition\":true,\"requires\":[{\"!\":\"fill-pattern\"},{\"fill-antialias\":true}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"fill-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"}},\"paint_fill-extrusion\":{\"fill-extrusion-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"fill-extrusion-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"fill-extrusion-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-height\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"meters\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-base\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"meters\",\"transition\":true,\"requires\":[\"fill-extrusion-height\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"fill-extrusion-vertical-gradient\":{\"type\":\"boolean\",\"default\":true,\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"fill-extrusion-ambient-occlusion-intensity\":{\"property-type\":\"data-constant\",\"type\":\"number\",\"private\":true,\"default\":0,\"minimum\":0,\"maximum\":1,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true},\"fill-extrusion-ambient-occlusion-radius\":{\"property-type\":\"data-constant\",\"type\":\"number\",\"private\":true,\"default\":3,\"minimum\":0,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"transition\":true,\"requires\":[\"fill-extrusion-edge-radius\"]}},\"paint_line\":{\"line-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"line-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"line-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"line-width\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-gap-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-offset\":{\"type\":\"number\",\"default\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"line-dasharray\":{\"type\":\"array\",\"value\":\"number\",\"minimum\":0,\"transition\":false,\"units\":\"line widths\",\"requires\":[{\"!\":\"line-pattern\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\",\"feature\"]},\"property-type\":\"data-driven\"},\"line-gradient\":{\"type\":\"color\",\"transition\":false,\"requires\":[{\"!\":\"line-pattern\"},{\"source\":\"geojson\",\"has\":{\"lineMetrics\":true}}],\"expression\":{\"interpolated\":true,\"parameters\":[\"line-progress\"]},\"property-type\":\"color-ramp\"},\"line-trim-offset\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"minimum\":[0,0],\"maximum\":[1,1],\"transition\":false,\"requires\":[{\"source\":\"geojson\",\"has\":{\"lineMetrics\":true}}],\"property-type\":\"constant\"}},\"paint_circle\":{\"circle-radius\":{\"type\":\"number\",\"default\":5,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-blur\":{\"type\":\"number\",\"default\":0,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"circle-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-scale\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-pitch-alignment\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"viewport\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"circle-stroke-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"circle-stroke-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"}},\"paint_heatmap\":{\"heatmap-radius\":{\"type\":\"number\",\"default\":30,\"minimum\":1,\"transition\":true,\"units\":\"pixels\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-weight\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"heatmap-intensity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"heatmap-color\":{\"type\":\"color\",\"default\":[\"interpolate\",[\"linear\"],[\"heatmap-density\"],0,\"rgba(0, 0, 255, 0)\",0.1,\"royalblue\",0.3,\"cyan\",0.5,\"lime\",0.7,\"yellow\",1,\"red\"],\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"heatmap-density\"]},\"property-type\":\"color-ramp\"},\"heatmap-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_symbol\":{\"icon-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-color\":{\"type\":\"color\",\"default\":\"rgba(0, 0, 0, 0)\",\"transition\":true,\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-halo-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"icon-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"requires\":[\"icon-image\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"icon-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"icon-image\",\"icon-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"overridable\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-color\":{\"type\":\"color\",\"default\":\"rgba(0, 0, 0, 0)\",\"transition\":true,\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-width\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-halo-blur\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\",\"feature\",\"feature-state\"]},\"property-type\":\"data-driven\"},\"text-translate\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"default\":[0,0],\"transition\":true,\"units\":\"pixels\",\"requires\":[\"text-field\"],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"text-translate-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"map\",\"requires\":[\"text-field\",\"text-translate\"],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_raster\":{\"raster-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-hue-rotate\":{\"type\":\"number\",\"default\":0,\"period\":360,\"transition\":true,\"units\":\"degrees\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-min\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-brightness-max\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-saturation\":{\"type\":\"number\",\"default\":0,\"minimum\":-1,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-contrast\":{\"type\":\"number\",\"default\":0,\"minimum\":-1,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-resampling\":{\"type\":\"enum\",\"values\":{\"linear\":{},\"nearest\":{}},\"default\":\"linear\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"raster-fade-duration\":{\"type\":\"number\",\"default\":300,\"minimum\":0,\"transition\":false,\"units\":\"milliseconds\",\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_hillshade\":{\"hillshade-illumination-direction\":{\"type\":\"number\",\"default\":335,\"minimum\":0,\"maximum\":359,\"transition\":false,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-illumination-anchor\":{\"type\":\"enum\",\"values\":{\"map\":{},\"viewport\":{}},\"default\":\"viewport\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-exaggeration\":{\"type\":\"number\",\"default\":0.5,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-shadow-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-highlight-color\":{\"type\":\"color\",\"default\":\"#FFFFFF\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"hillshade-accent-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_background\":{\"background-color\":{\"type\":\"color\",\"default\":\"#000000\",\"transition\":true,\"requires\":[{\"!\":\"background-pattern\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-pattern\":{\"type\":\"resolvedImage\",\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"background-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"paint_sky\":{\"sky-type\":{\"type\":\"enum\",\"values\":{\"gradient\":{},\"atmosphere\":{}},\"default\":\"atmosphere\",\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-atmosphere-sun\":{\"type\":\"array\",\"value\":\"number\",\"length\":2,\"units\":\"degrees\",\"minimum\":[0,0],\"maximum\":[360,180],\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-atmosphere-sun-intensity\":{\"type\":\"number\",\"requires\":[{\"sky-type\":\"atmosphere\"}],\"default\":10,\"minimum\":0,\"maximum\":100,\"transition\":false,\"property-type\":\"data-constant\"},\"sky-gradient-center\":{\"type\":\"array\",\"requires\":[{\"sky-type\":\"gradient\"}],\"value\":\"number\",\"default\":[0,0],\"length\":2,\"units\":\"degrees\",\"minimum\":[0,0],\"maximum\":[360,180],\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-gradient-radius\":{\"type\":\"number\",\"requires\":[{\"sky-type\":\"gradient\"}],\"default\":90,\"minimum\":0,\"maximum\":180,\"transition\":false,\"expression\":{\"interpolated\":false,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"},\"sky-gradient\":{\"type\":\"color\",\"default\":[\"interpolate\",[\"linear\"],[\"sky-radial-progress\"],0.8,\"#87ceeb\",1,\"white\"],\"transition\":false,\"requires\":[{\"sky-type\":\"gradient\"}],\"expression\":{\"interpolated\":true,\"parameters\":[\"sky-radial-progress\"]},\"property-type\":\"color-ramp\"},\"sky-atmosphere-halo-color\":{\"type\":\"color\",\"default\":\"white\",\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"property-type\":\"data-constant\"},\"sky-atmosphere-color\":{\"type\":\"color\",\"default\":\"white\",\"transition\":false,\"requires\":[{\"sky-type\":\"atmosphere\"}],\"property-type\":\"data-constant\"},\"sky-opacity\":{\"type\":\"number\",\"default\":1,\"minimum\":0,\"maximum\":1,\"transition\":true,\"expression\":{\"interpolated\":true,\"parameters\":[\"zoom\"]},\"property-type\":\"data-constant\"}},\"transition\":{\"duration\":{\"type\":\"number\",\"default\":300,\"minimum\":0,\"units\":\"milliseconds\"},\"delay\":{\"type\":\"number\",\"default\":0,\"minimum\":0,\"units\":\"milliseconds\"}},\"property-type\":{\"data-driven\":{\"type\":\"property-type\"},\"color-ramp\":{\"type\":\"property-type\"},\"data-constant\":{\"type\":\"property-type\"},\"constant\":{\"type\":\"property-type\"}},\"promoteId\":{\"*\":{\"type\":\"string\"}}};\n\n//      \nfunction isExpressionFilter(filter) {\n    if (filter === true || filter === false) {\n        return true;\n    }\n    if (!Array.isArray(filter) || filter.length === 0) {\n        return false;\n    }\n    switch (filter[0]) {\n    case 'has':\n        return filter.length >= 2 && filter[1] !== '$id' && filter[1] !== '$type';\n    case 'in':\n        return filter.length >= 3 && (typeof filter[1] !== 'string' || Array.isArray(filter[2]));\n    case '!in':\n    case '!has':\n    case 'none':\n        return false;\n    case '==':\n    case '!=':\n    case '>':\n    case '>=':\n    case '<':\n    case '<=':\n        return filter.length !== 3 || (Array.isArray(filter[1]) || Array.isArray(filter[2]));\n    case 'any':\n    case 'all':\n        for (const f of filter.slice(1)) {\n            if (!isExpressionFilter(f) && typeof f !== 'boolean') {\n                return false;\n            }\n        }\n        return true;\n    default:\n        return true;\n    }\n}\n/**\n * Given a filter expressed as nested arrays, return a new function\n * that evaluates whether a given feature (with a .properties or .tags property)\n * passes its test.\n *\n * @private\n * @param {Array} filter mapbox gl filter\n * @param {string} layerType the type of the layer this filter will be applied to.\n * @returns {Function} filter-evaluating function\n */\nfunction createFilter(filter, layerType = 'fill') {\n    if (filter === null || filter === undefined) {\n        return {\n            filter: () => true,\n            needGeometry: false,\n            needFeature: false\n        };\n    }\n    if (!isExpressionFilter(filter)) {\n        filter = convertFilter(filter);\n    }\n    const filterExp = filter;\n    let staticFilter = true;\n    try {\n        staticFilter = extractStaticFilter(filterExp);\n    } catch (e) {\n        console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n${ JSON.stringify(filterExp, null, 2) }\n        `);\n    }\n    // Compile the static component of the filter\n    const filterSpec = spec[`filter_${ layerType }`];\n    const compiledStaticFilter = createExpression(staticFilter, filterSpec);\n    let filterFunc = null;\n    if (compiledStaticFilter.result === 'error') {\n        throw new Error(compiledStaticFilter.value.map(err => `${ err.key }: ${ err.message }`).join(', '));\n    } else {\n        filterFunc = (globalProperties, feature, canonical) => compiledStaticFilter.value.evaluate(globalProperties, feature, {}, canonical);\n    }\n    // If the static component is not equal to the entire filter then we have a dynamic component\n    // Compile the dynamic component separately\n    let dynamicFilterFunc = null;\n    let needFeature = null;\n    if (staticFilter !== filterExp) {\n        const compiledDynamicFilter = createExpression(filterExp, filterSpec);\n        if (compiledDynamicFilter.result === 'error') {\n            throw new Error(compiledDynamicFilter.value.map(err => `${ err.key }: ${ err.message }`).join(', '));\n        } else {\n            dynamicFilterFunc = (globalProperties, feature, canonical, featureTileCoord, featureDistanceData) => compiledDynamicFilter.value.evaluate(globalProperties, feature, {}, canonical, undefined, undefined, featureTileCoord, featureDistanceData);\n            needFeature = !isFeatureConstant(compiledDynamicFilter.value.expression);\n        }\n    }\n    filterFunc = filterFunc;\n    const needGeometry = geometryNeeded(staticFilter);\n    return {\n        filter: filterFunc,\n        dynamicFilter: dynamicFilterFunc ? dynamicFilterFunc : undefined,\n        needGeometry,\n        needFeature: !!needFeature\n    };\n}\nfunction extractStaticFilter(filter) {\n    if (!isDynamicFilter(filter)) {\n        return filter;\n    }\n    // Shallow copy so we can replace expressions in-place\n    let result = deepUnbundle(filter);\n    // 1. Union branches\n    unionDynamicBranches(result);\n    // 2. Collapse dynamic conditions to  `true`\n    result = collapseDynamicBooleanExpressions(result);\n    return result;\n}\nfunction collapseDynamicBooleanExpressions(expression) {\n    if (!Array.isArray(expression)) {\n        return expression;\n    }\n    const collapsed = collapsedExpression(expression);\n    if (collapsed === true) {\n        return collapsed;\n    } else {\n        return collapsed.map(subExpression => collapseDynamicBooleanExpressions(subExpression));\n    }\n}\n/**\n * Traverses the expression and replaces all instances of branching on a\n * `dynamic` conditional (such as `['pitch']` or `['distance-from-center']`)\n * into an `any` expression.\n * This ensures that all possible outcomes of a `dynamic` branch are considered\n * when evaluating the expression upfront during filtering.\n *\n * @param {Array<any>} filter the filter expression mutated in-place.\n */\nfunction unionDynamicBranches(filter) {\n    let isBranchingDynamically = false;\n    const branches = [];\n    if (filter[0] === 'case') {\n        for (let i = 1; i < filter.length - 1; i += 2) {\n            isBranchingDynamically = isBranchingDynamically || isDynamicFilter(filter[i]);\n            branches.push(filter[i + 1]);\n        }\n        branches.push(filter[filter.length - 1]);\n    } else if (filter[0] === 'match') {\n        isBranchingDynamically = isBranchingDynamically || isDynamicFilter(filter[1]);\n        for (let i = 2; i < filter.length - 1; i += 2) {\n            branches.push(filter[i + 1]);\n        }\n        branches.push(filter[filter.length - 1]);\n    } else if (filter[0] === 'step') {\n        isBranchingDynamically = isBranchingDynamically || isDynamicFilter(filter[1]);\n        for (let i = 1; i < filter.length - 1; i += 2) {\n            branches.push(filter[i + 1]);\n        }\n    }\n    if (isBranchingDynamically) {\n        filter.length = 0;\n        filter.push('any', ...branches);\n    }\n    // traverse and recurse into children\n    for (let i = 1; i < filter.length; i++) {\n        unionDynamicBranches(filter[i]);\n    }\n}\nfunction isDynamicFilter(filter) {\n    // Base Cases\n    if (!Array.isArray(filter)) {\n        return false;\n    }\n    if (isRootExpressionDynamic(filter[0])) {\n        return true;\n    }\n    for (let i = 1; i < filter.length; i++) {\n        const child = filter[i];\n        if (isDynamicFilter(child)) {\n            return true;\n        }\n    }\n    return false;\n}\nfunction isRootExpressionDynamic(expression) {\n    return expression === 'pitch' || expression === 'distance-from-center';\n}\nconst dynamicConditionExpressions = new Set([\n    'in',\n    '==',\n    '!=',\n    '>',\n    '>=',\n    '<',\n    '<=',\n    'to-boolean'\n]);\nfunction collapsedExpression(expression) {\n    if (dynamicConditionExpressions.has(expression[0])) {\n        for (let i = 1; i < expression.length; i++) {\n            const param = expression[i];\n            if (isDynamicFilter(param)) {\n                return true;\n            }\n        }\n    }\n    return expression;\n}\n// Comparison function to sort numbers and strings\nfunction compare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\nfunction geometryNeeded(filter) {\n    if (!Array.isArray(filter))\n        return false;\n    if (filter[0] === 'within')\n        return true;\n    for (let index = 1; index < filter.length; index++) {\n        if (geometryNeeded(filter[index]))\n            return true;\n    }\n    return false;\n}\nfunction convertFilter(filter) {\n    if (!filter)\n        return true;\n    const op = filter[0];\n    if (filter.length <= 1)\n        return op !== 'any';\n    const converted = op === '==' ? convertComparisonOp(filter[1], filter[2], '==') : op === '!=' ? convertNegation(convertComparisonOp(filter[1], filter[2], '==')) : op === '<' || op === '>' || op === '<=' || op === '>=' ? convertComparisonOp(filter[1], filter[2], op) : op === 'any' ? convertDisjunctionOp(filter.slice(1)) : op === 'all' ? ['all'].concat(filter.slice(1).map(convertFilter)) : op === 'none' ? ['all'].concat(filter.slice(1).map(convertFilter).map(convertNegation)) : op === 'in' ? convertInOp(filter[1], filter.slice(2)) : op === '!in' ? convertNegation(convertInOp(filter[1], filter.slice(2))) : op === 'has' ? convertHasOp(filter[1]) : op === '!has' ? convertNegation(convertHasOp(filter[1])) : op === 'within' ? filter : true;\n    return converted;\n}\nfunction convertComparisonOp(property, value, op) {\n    switch (property) {\n    case '$type':\n        return [\n            `filter-type-${ op }`,\n            value\n        ];\n    case '$id':\n        return [\n            `filter-id-${ op }`,\n            value\n        ];\n    default:\n        return [\n            `filter-${ op }`,\n            property,\n            value\n        ];\n    }\n}\nfunction convertDisjunctionOp(filters) {\n    return ['any'].concat(filters.map(convertFilter));\n}\nfunction convertInOp(property, values) {\n    if (values.length === 0) {\n        return false;\n    }\n    switch (property) {\n    case '$type':\n        return [\n            `filter-type-in`,\n            [\n                'literal',\n                values\n            ]\n        ];\n    case '$id':\n        return [\n            `filter-id-in`,\n            [\n                'literal',\n                values\n            ]\n        ];\n    default:\n        if (values.length > 200 && !values.some(v => typeof v !== typeof values[0])) {\n            return [\n                'filter-in-large',\n                property,\n                [\n                    'literal',\n                    values.sort(compare)\n                ]\n            ];\n        } else {\n            return [\n                'filter-in-small',\n                property,\n                [\n                    'literal',\n                    values\n                ]\n            ];\n        }\n    }\n}\nfunction convertHasOp(property) {\n    switch (property) {\n    case '$type':\n        return true;\n    case '$id':\n        return [`filter-has-id`];\n    default:\n        return [\n            `filter-has`,\n            property\n        ];\n    }\n}\nfunction convertNegation(filter) {\n    return [\n        '!',\n        filter\n    ];\n}\n\n//      \nvar refProperties = [\n    'type',\n    'source',\n    'source-layer',\n    'minzoom',\n    'maxzoom',\n    'filter',\n    'layout'\n];\n\n//      \nfunction deref(layer, parent) {\n    const result = {};\n    for (const k in layer) {\n        if (k !== 'ref') {\n            result[k] = layer[k];\n        }\n    }\n    refProperties.forEach(k => {\n        if (k in parent) {\n            result[k] = parent[k];\n        }\n    });\n    return result;\n}\n/**\n * Given an array of layers, some of which may contain `ref` properties\n * whose value is the `id` of another property, return a new array where\n * such layers have been augmented with the 'type', 'source', etc. properties\n * from the parent layer, and the `ref` property has been removed.\n *\n * The input is not modified. The output may contain references to portions\n * of the input.\n *\n * @private\n * @param {Array<Layer>} layers\n * @returns {Array<Layer>}\n */\nfunction derefLayers(layers) {\n    layers = layers.slice();\n    const map = Object.create(null);\n    for (let i = 0; i < layers.length; i++) {\n        map[layers[i].id] = layers[i];\n    }\n    for (let i = 0; i < layers.length; i++) {\n        if ('ref' in layers[i]) {\n            layers[i] = deref(layers[i], map[layers[i].ref]);\n        }\n    }\n    return layers;\n}\n\nvar fontWeights = {\n    thin: 100,\n    hairline: 100,\n    'ultra-light': 200,\n    'extra-light': 200,\n    light: 300,\n    book: 300,\n    regular: 400,\n    normal: 400,\n    plain: 400,\n    roman: 400,\n    standard: 400,\n    medium: 500,\n    'semi-bold': 600,\n    'demi-bold': 600,\n    bold: 700,\n    'extra-bold': 800,\n    'ultra-bold': 800,\n    heavy: 900,\n    black: 900,\n    'heavy-black': 900,\n    fat: 900,\n    poster: 900,\n    'ultra-black': 950,\n    'extra-black': 950\n};\nvar sp = ' ';\nvar italicRE = /(italic|oblique)$/i;\nvar fontCache = {};\nvar mapboxToCssFont = function (fonts, size, lineHeight) {\n    var cssData = fontCache[fonts];\n    if (!cssData) {\n        if (!Array.isArray(fonts)) {\n            fonts = [fonts];\n        }\n        var weight = 400;\n        var style = 'normal';\n        var fontFamilies = [];\n        var haveWeight, haveStyle;\n        for (var i = 0, ii = fonts.length; i < ii; ++i) {\n            var font = fonts[i];\n            var parts = font.split(' ');\n            var maybeWeight = parts[parts.length - 1].toLowerCase();\n            if (maybeWeight == 'normal' || maybeWeight == 'italic' || maybeWeight == 'oblique') {\n                style = haveStyle ? style : maybeWeight;\n                haveStyle = true;\n                parts.pop();\n                maybeWeight = parts[parts.length - 1].toLowerCase();\n            } else if (italicRE.test(maybeWeight)) {\n                maybeWeight = maybeWeight.replace(italicRE, '');\n                style = haveStyle ? style : parts[parts.length - 1].replace(maybeWeight, '');\n                haveStyle = true;\n            }\n            for (var w in fontWeights) {\n                var previousPart = parts.length > 1 ? parts[parts.length - 2].toLowerCase() : '';\n                if (maybeWeight == w || maybeWeight == w.replace('-', '') || previousPart + '-' + maybeWeight == w) {\n                    weight = haveWeight ? weight : fontWeights[w];\n                    parts.pop();\n                    if (previousPart && w.startsWith(previousPart)) {\n                        parts.pop();\n                    }\n                    break;\n                }\n            }\n            if (!haveWeight && typeof maybeWeight == 'number') {\n                weight = maybeWeight;\n                haveWeight = true;\n            }\n            var fontFamily = parts.join(sp).replace('Klokantech Noto Sans', 'Noto Sans');\n            if (fontFamily.indexOf(sp) !== -1) {\n                fontFamily = '\"' + fontFamily + '\"';\n            }\n            fontFamilies.push(fontFamily);\n        }\n        // CSS font property: font-style font-weight font-size/line-height font-family\n        cssData = fontCache[fonts] = [\n            style,\n            weight,\n            fontFamilies\n        ];\n    }\n    return cssData[0] + sp + cssData[1] + sp + size + 'px' + (lineHeight ? '/' + lineHeight : '') + sp + cssData[2];\n};\n\nvar mb2css = /*@__PURE__*/getDefaultExportFromCjs(mapboxToCssFont);\n\nconst mapboxBaseUrl = 'https://api.mapbox.com';\n/**\n * Gets the path from a mapbox:// URL.\n * @param {string} url The Mapbox URL.\n * @return {string} The path.\n * @private\n */\nfunction getMapboxPath(url) {\n    const startsWith = 'mapbox://';\n    if (url.indexOf(startsWith) !== 0) {\n        return '';\n    }\n    return url.slice(startsWith.length);\n}\n/**\n * Turns mapbox:// sprite URLs into resolvable URLs.\n * @param {string} url The sprite URL.\n * @param {string} token The access token.\n * @param {string} styleUrl The style URL.\n * @return {string} A resolvable URL.\n * @private\n */\nfunction normalizeSpriteUrl(url, token, styleUrl) {\n    const mapboxPath = getMapboxPath(url);\n    if (!mapboxPath) {\n        return decodeURI(new URL(url, styleUrl).href);\n    }\n    const startsWith = 'sprites/';\n    if (mapboxPath.indexOf(startsWith) !== 0) {\n        throw new Error(`unexpected sprites url: ${ url }`);\n    }\n    const sprite = mapboxPath.slice(startsWith.length);\n    return `${ mapboxBaseUrl }/styles/v1/${ sprite }/sprite?access_token=${ token }`;\n}\n/**\n * Turns mapbox:// style URLs into resolvable URLs.\n * @param {string} url The style URL.\n * @param {string} token The access token.\n * @return {string} A resolvable URL.\n * @private\n */\nfunction normalizeStyleUrl(url, token) {\n    const mapboxPath = getMapboxPath(url);\n    if (!mapboxPath) {\n        return decodeURI(new URL(url, location.href).href);\n    }\n    const startsWith = 'styles/';\n    if (mapboxPath.indexOf(startsWith) !== 0) {\n        throw new Error(`unexpected style url: ${ url }`);\n    }\n    const style = mapboxPath.slice(startsWith.length);\n    return `${ mapboxBaseUrl }/styles/v1/${ style }?&access_token=${ token }`;\n}\n/**\n * Turns mapbox:// source URLs into vector tile URL templates.\n * @param {string} url The source URL.\n * @param {string} token The access token.\n * @param {string} tokenParam The access token key.\n * @param {string} styleUrl The style URL.\n * @return {string} A vector tile template.\n * @private\n */\nfunction normalizeSourceUrl(url, token, tokenParam, styleUrl) {\n    const urlObject = new URL(url, styleUrl);\n    const mapboxPath = getMapboxPath(url);\n    if (!mapboxPath) {\n        if (!token) {\n            return decodeURI(urlObject.href);\n        }\n        if (!urlObject.searchParams.has(tokenParam)) {\n            urlObject.searchParams.set(tokenParam, token);\n        }\n        return decodeURI(urlObject.href);\n    }\n    if (mapboxPath === 'mapbox.satellite') {\n        const sizeFactor = window.devicePixelRatio >= 1.5 ? '@2x' : '';\n        return `https://api.mapbox.com/v4/${ mapboxPath }/{z}/{x}/{y}${ sizeFactor }.webp?access_token=${ token }`;\n    }\n    return `https://{a-d}.tiles.mapbox.com/v4/${ mapboxPath }/{z}/{x}/{y}.vector.pbf?access_token=${ token }`;\n}\n\n/** @typedef {'Style'|'Source'|'Sprite'|'SpriteImage'|'Tiles'|'GeoJSON'} ResourceType */\n/** @typedef {import(\"ol\").Map} Map */\n/** @typedef {import(\"ol/layer\").Layer} Layer */\n/** @typedef {import(\"ol/layer\").Group} LayerGroup */\n/** @typedef {import(\"ol/layer\").Vector} VectorLayer */\n/** @typedef {import(\"ol/layer\").VectorTile} VectorTileLayer */\n/** @typedef {import(\"ol/source\").Source} Source */\nconst functionCacheByStyleId = {};\nconst filterCacheByStyleId = {};\nlet styleId = 0;\nfunction getStyleId(glStyle) {\n    if (!glStyle.id) {\n        glStyle.id = styleId++;\n    }\n    return glStyle.id;\n}\nfunction getStyleFunctionKey(glStyle, olLayer) {\n    return getStyleId(glStyle) + '.' + getUid(olLayer);\n}\n/**\n * @param {Object} glStyle Mapboox style object.\n * @return {Object} Function cache.\n */\nfunction getFunctionCache(glStyle) {\n    let functionCache = functionCacheByStyleId[glStyle.id];\n    if (!functionCache) {\n        functionCache = {};\n        functionCacheByStyleId[getStyleId(glStyle)] = functionCache;\n    }\n    return functionCache;\n}\nfunction clearFunctionCache() {\n    for (const key in functionCacheByStyleId) {\n        delete functionCacheByStyleId[key];\n    }\n}\n/**\n * @param {Object} glStyle Mapboox style object.\n * @return {Object} Filter cache.\n */\nfunction getFilterCache(glStyle) {\n    let filterCache = filterCacheByStyleId[glStyle.id];\n    if (!filterCache) {\n        filterCache = {};\n        filterCacheByStyleId[getStyleId(glStyle)] = filterCache;\n    }\n    return filterCache;\n}\nfunction deg2rad(degrees) {\n    return degrees * Math.PI / 180;\n}\nconst defaultResolutions = (function () {\n    const resolutions = [];\n    for (let res = 78271.51696402048; resolutions.length <= 24; res /= 2) {\n        resolutions.push(res);\n    }\n    return resolutions;\n}());\n/**\n * @param {number} width Width of the canvas.\n * @param {number} height Height of the canvas.\n * @return {HTMLCanvasElement} Canvas.\n */\nfunction createCanvas(width, height) {\n    if (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope && typeof OffscreenCanvas !== 'undefined') {\n        // eslint-disable-line\n        return new OffscreenCanvas(width, height);\n    }\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n}\nfunction getZoomForResolution(resolution, resolutions) {\n    let i = 0;\n    const ii = resolutions.length;\n    for (; i < ii; ++i) {\n        const candidate = resolutions[i];\n        if (candidate < resolution && i + 1 < ii) {\n            const zoomFactor = resolutions[i] / resolutions[i + 1];\n            return i + Math.log(resolutions[i] / resolution) / Math.log(zoomFactor);\n        }\n    }\n    return ii - 1;\n}\nfunction getResolutionForZoom(zoom, resolutions) {\n    const base = Math.floor(zoom);\n    const factor = Math.pow(2, zoom - base);\n    return resolutions[base] / factor;\n}\nconst pendingRequests = {};\n/**\n * @param {ResourceType} resourceType Type of resource to load.\n * @param {string} url Url of the resource.\n * @param {Options} [options={}] Options.\n * @param {{request?: Request}} [metadata] Object to be filled with the request.\n * @return {Promise<Object|Response>} Promise that resolves with the loaded resource\n * or rejects with the Response object.\n * @private\n */\nfunction fetchResource(resourceType, url, options = {}, metadata) {\n    if (url in pendingRequests) {\n        if (metadata) {\n            metadata.request = pendingRequests[url][0];\n        }\n        return pendingRequests[url][1];\n    }\n    const transformedRequest = options.transformRequest ? options.transformRequest(url, resourceType) || url : url;\n    const pendingRequest = toPromise(() => transformedRequest).then(transformedRequest => {\n        if (!(transformedRequest instanceof Request)) {\n            transformedRequest = new Request(transformedRequest);\n        }\n        if (!transformedRequest.headers.get('Accept')) {\n            transformedRequest.headers.set('Accept', 'application/json');\n        }\n        if (metadata) {\n            metadata.request = transformedRequest;\n        }\n        return fetch(transformedRequest).then(function (response) {\n            delete pendingRequests[url];\n            return response.ok ? response.json() : Promise.reject(new Error('Error fetching source ' + url));\n        }).catch(function (error) {\n            delete pendingRequests[url];\n            return Promise.reject(new Error('Error fetching source ' + url));\n        });\n    });\n    pendingRequests[url] = [\n        transformedRequest,\n        pendingRequest\n    ];\n    return pendingRequest;\n}\nfunction getGlStyle(glStyleOrUrl, options) {\n    if (typeof glStyleOrUrl === 'string') {\n        if (glStyleOrUrl.trim().startsWith('{')) {\n            try {\n                const glStyle = JSON.parse(glStyleOrUrl);\n                return Promise.resolve(glStyle);\n            } catch (error) {\n                return Promise.reject(error);\n            }\n        } else {\n            glStyleOrUrl = normalizeStyleUrl(glStyleOrUrl, options.accessToken);\n            return fetchResource('Style', glStyleOrUrl, options);\n        }\n    } else {\n        return Promise.resolve(glStyleOrUrl);\n    }\n}\nconst tilejsonCache = {};\n/**\n * @param {Object} glSource glStyle source object.\n * @param {string} styleUrl Style URL.\n * @param {Options} options Options.\n * @return {Promise<{tileJson: Object, tileLoadFunction: import('ol/Tile.js').LoadFunction}?>} TileJson and load function\n */\nfunction getTileJson(glSource, styleUrl, options = {}) {\n    const cacheKey = [\n        styleUrl,\n        JSON.stringify(glSource)\n    ].toString();\n    let promise = tilejsonCache[cacheKey];\n    if (!promise || options.transformRequest) {\n        let tileLoadFunction;\n        if (options.transformRequest) {\n            tileLoadFunction = (tile, src) => {\n                const transformedRequest = options.transformRequest ? options.transformRequest(src, 'Tiles') || src : src;\n                if (tile instanceof VectorTile) {\n                    tile.setLoader((extent, resolution, projection) => {\n                        toPromise(() => transformedRequest).then(transformedRequest => {\n                            fetch(transformedRequest).then(response => response.arrayBuffer()).then(data => {\n                                const format = tile.getFormat();\n                                const features = format.readFeatures(data, {\n                                    extent: extent,\n                                    featureProjection: projection\n                                });\n                                // @ts-ignore\n                                tile.setFeatures(features);\n                            }).catch(e => tile.setState(TileState.ERROR));\n                        });\n                    });\n                } else {\n                    const img = tile.getImage();\n                    toPromise(() => transformedRequest).then(transformedRequest => {\n                        if (transformedRequest instanceof Request) {\n                            fetch(transformedRequest).then(response => response.blob()).then(blob => {\n                                const url = URL.createObjectURL(blob);\n                                img.addEventListener('load', () => URL.revokeObjectURL(url));\n                                img.addEventListener('error', () => URL.revokeObjectURL(url));\n                                img.src = url;\n                            }).catch(e => tile.setState(TileState.ERROR));\n                        } else {\n                            img.src = transformedRequest;\n                        }\n                    });\n                }\n            };\n        }\n        const url = glSource.url;\n        if (url && !glSource.tiles) {\n            const normalizedSourceUrl = normalizeSourceUrl(url, options.accessToken, options.accessTokenParam || 'access_token', styleUrl || location.href);\n            if (url.startsWith('mapbox://')) {\n                promise = Promise.resolve({\n                    tileJson: Object.assign({}, glSource, {\n                        url: undefined,\n                        tiles: expandUrl(normalizedSourceUrl)\n                    }),\n                    tileLoadFunction\n                });\n            } else {\n                const metadata = {};\n                promise = fetchResource('Source', normalizedSourceUrl, options, metadata).then(function (tileJson) {\n                    tileJson.tiles = tileJson.tiles.map(function (tileUrl) {\n                        if (tileJson.scheme === 'tms') {\n                            tileUrl = tileUrl.replace('{y}', '{-y}');\n                        }\n                        return normalizeSourceUrl(tileUrl, options.accessToken, options.accessTokenParam || 'access_token', metadata.request.url);\n                    });\n                    return Promise.resolve({\n                        tileJson,\n                        tileLoadFunction\n                    });\n                });\n            }\n        } else {\n            glSource = Object.assign({}, glSource, {\n                tiles: glSource.tiles.map(function (tileUrl) {\n                    if (glSource.scheme === 'tms') {\n                        tileUrl = tileUrl.replace('{y}', '{-y}');\n                    }\n                    return normalizeSourceUrl(tileUrl, options.accessToken, options.accessTokenParam || 'access_token', styleUrl || location.href);\n                })\n            });\n            promise = Promise.resolve({\n                tileJson: Object.assign({}, glSource),\n                tileLoadFunction\n            });\n        }\n        tilejsonCache[cacheKey] = promise;\n    }\n    return promise;\n}\n/**\n * @param {HTMLImageElement|HTMLCanvasElement} spriteImage Sprite image id.\n * @param {{x: number, y: number, width: number, height: number, pixelRatio: number}} spriteImageData Sprite image data.\n * @param {number} haloWidth Halo width.\n * @param {{r: number, g: number, b: number, a: number}} haloColor Halo color.\n * @return {HTMLCanvasElement} Canvas element with the halo.\n */\nfunction drawIconHalo(spriteImage, spriteImageData, haloWidth, haloColor) {\n    const imgSize = [\n        2 * haloWidth * spriteImageData.pixelRatio + spriteImageData.width,\n        2 * haloWidth * spriteImageData.pixelRatio + spriteImageData.height\n    ];\n    const imageCanvas = createCanvas(imgSize[0], imgSize[1]);\n    const imageContext = imageCanvas.getContext('2d');\n    imageContext.drawImage(spriteImage, spriteImageData.x, spriteImageData.y, spriteImageData.width, spriteImageData.height, haloWidth * spriteImageData.pixelRatio, haloWidth * spriteImageData.pixelRatio, spriteImageData.width, spriteImageData.height);\n    const imageData = imageContext.getImageData(0, 0, imgSize[0], imgSize[1]);\n    imageContext.globalCompositeOperation = 'destination-over';\n    imageContext.fillStyle = `rgba(${ haloColor.r * 255 },${ haloColor.g * 255 },${ haloColor.b * 255 },${ haloColor.a })`;\n    const data = imageData.data;\n    for (let i = 0, ii = imageData.width; i < ii; ++i) {\n        for (let j = 0, jj = imageData.height; j < jj; ++j) {\n            const index = (j * ii + i) * 4;\n            const alpha = data[index + 3];\n            if (alpha > 0) {\n                imageContext.arc(i, j, haloWidth * spriteImageData.pixelRatio, 0, 2 * Math.PI);\n            }\n        }\n    }\n    imageContext.fill();\n    return imageCanvas;\n}\nfunction smoothstep(min, max, value) {\n    const x = Math.max(0, Math.min(1, (value - min) / (max - min)));\n    return x * x * (3 - 2 * x);\n}\n/**\n * @param {HTMLImageElement} image SDF image\n * @param {{x: number, y: number, width: number, height: number}} area Area to unSDF\n * @param {{r: number, g: number, b: number, a: number}} color Color to use\n * @return {HTMLCanvasElement} Regular image\n */\nfunction drawSDF(image, area, color) {\n    const imageCanvas = createCanvas(area.width, area.height);\n    const imageContext = imageCanvas.getContext('2d');\n    imageContext.drawImage(image, area.x, area.y, area.width, area.height, 0, 0, area.width, area.height);\n    const imageData = imageContext.getImageData(0, 0, area.width, area.height);\n    const data = imageData.data;\n    for (let i = 0, ii = imageData.width; i < ii; ++i) {\n        for (let j = 0, jj = imageData.height; j < jj; ++j) {\n            const index = (j * ii + i) * 4;\n            const dist = data[index + 3] / 255;\n            const buffer = 0.75;\n            const gamma = 0.1;\n            const alpha = smoothstep(buffer - gamma, buffer + gamma, dist);\n            if (alpha > 0) {\n                data[index + 0] = Math.round(255 * color.r * alpha);\n                data[index + 1] = Math.round(255 * color.g * alpha);\n                data[index + 2] = Math.round(255 * color.b * alpha);\n                data[index + 3] = Math.round(255 * alpha);\n            } else {\n                data[index + 3] = 0;\n            }\n        }\n    }\n    imageContext.putImageData(imageData, 0, 0);\n    return imageCanvas;\n}    /**\n * @typedef {import(\"./apply.js\").Options} Options\n * @private\n */\n\nconst hairSpacePool = Array(256).join('\\u200A');\nfunction applyLetterSpacing(text, letterSpacing) {\n    if (letterSpacing >= 0.05) {\n        let textWithLetterSpacing = '';\n        const lines = text.split('\\n');\n        const joinSpaceString = hairSpacePool.slice(0, Math.round(letterSpacing / 0.1));\n        for (let l = 0, ll = lines.length; l < ll; ++l) {\n            if (l > 0) {\n                textWithLetterSpacing += '\\n';\n            }\n            textWithLetterSpacing += lines[l].split('').join(joinSpaceString);\n        }\n        return textWithLetterSpacing;\n    }\n    return text;\n}\nlet measureContext;\nfunction getMeasureContext() {\n    if (!measureContext) {\n        measureContext = createCanvas(1, 1).getContext('2d');\n    }\n    return measureContext;\n}\nfunction measureText(text, letterSpacing) {\n    return getMeasureContext().measureText(text).width + (text.length - 1) * letterSpacing;\n}\nconst measureCache = {};\nfunction wrapText(text, font, em, letterSpacing) {\n    if (text.indexOf('\\n') !== -1) {\n        const hardLines = text.split('\\n');\n        const lines = [];\n        for (let i = 0, ii = hardLines.length; i < ii; ++i) {\n            lines.push(wrapText(hardLines[i], font, em, letterSpacing));\n        }\n        return lines.join('\\n');\n    }\n    const key = em + ',' + font + ',' + text + ',' + letterSpacing;\n    let wrappedText = measureCache[key];\n    if (!wrappedText) {\n        const words = text.split(' ');\n        if (words.length > 1) {\n            const ctx = getMeasureContext();\n            ctx.font = font;\n            const oneEm = ctx.measureText('M').width;\n            const maxWidth = oneEm * em;\n            let line = '';\n            const lines = [];\n            // Pass 1 - wrap lines to not exceed maxWidth\n            for (let i = 0, ii = words.length; i < ii; ++i) {\n                const word = words[i];\n                const testLine = line + (line ? ' ' : '') + word;\n                if (measureText(testLine, letterSpacing) <= maxWidth) {\n                    line = testLine;\n                } else {\n                    if (line) {\n                        lines.push(line);\n                    }\n                    line = word;\n                }\n            }\n            if (line) {\n                lines.push(line);\n            }\n            // Pass 2 - add lines with a width of less than 30% of maxWidth to the previous or next line\n            for (let i = 0, ii = lines.length; i < ii && ii > 1; ++i) {\n                const line = lines[i];\n                if (measureText(line, letterSpacing) < maxWidth * 0.35) {\n                    const prevWidth = i > 0 ? measureText(lines[i - 1], letterSpacing) : Infinity;\n                    const nextWidth = i < ii - 1 ? measureText(lines[i + 1], letterSpacing) : Infinity;\n                    lines.splice(i, 1);\n                    ii -= 1;\n                    if (prevWidth < nextWidth) {\n                        lines[i - 1] += ' ' + line;\n                        i -= 1;\n                    } else {\n                        lines[i] = line + ' ' + lines[i];\n                    }\n                }\n            }\n            // Pass 3 - try to fill 80% of maxWidth for each line\n            for (let i = 0, ii = lines.length - 1; i < ii; ++i) {\n                const line = lines[i];\n                const next = lines[i + 1];\n                if (measureText(line, letterSpacing) > maxWidth * 0.7 && measureText(next, letterSpacing) < maxWidth * 0.6) {\n                    const lineWords = line.split(' ');\n                    const lastWord = lineWords.pop();\n                    if (measureText(lastWord, letterSpacing) < maxWidth * 0.2) {\n                        lines[i] = lineWords.join(' ');\n                        lines[i + 1] = lastWord + ' ' + next;\n                    }\n                    ii -= 1;\n                }\n            }\n            wrappedText = lines.join('\\n');\n        } else {\n            wrappedText = text;\n        }\n        wrappedText = applyLetterSpacing(wrappedText, letterSpacing);\n        measureCache[key] = wrappedText;\n    }\n    return wrappedText;\n}\nconst fontFamilyRegEx = /font-family: ?([^;]*);/;\nconst stripQuotesRegEx = /(\"|')/g;\nlet loadedFontFamilies;\nfunction hasFontFamily(family) {\n    if (!loadedFontFamilies) {\n        loadedFontFamilies = {};\n        const styleSheets = document.styleSheets;\n        for (let i = 0, ii = styleSheets.length; i < ii; ++i) {\n            const styleSheet = styleSheets[i];\n            try {\n                const cssRules = styleSheet.rules || styleSheet.cssRules;\n                if (cssRules) {\n                    for (let j = 0, jj = cssRules.length; j < jj; ++j) {\n                        const cssRule = cssRules[j];\n                        if (cssRule.type == 5) {\n                            const match = cssRule.cssText.match(fontFamilyRegEx);\n                            loadedFontFamilies[match[1].replace(stripQuotesRegEx, '')] = true;\n                        }\n                    }\n                }\n            } catch (e) {\n            }\n        }\n    }\n    return family in loadedFontFamilies;\n}\nconst processedFontFamilies = {};\n/**\n * @param {Array} fonts Fonts.\n * @param {string} [templateUrl] Template URL.\n * @return {Array} Processed fonts.\n * @private\n */\nfunction getFonts(fonts, templateUrl = 'https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css') {\n    const fontsKey = fonts.toString();\n    if (fontsKey in processedFontFamilies) {\n        return processedFontFamilies[fontsKey];\n    }\n    const fontDescriptions = [];\n    for (let i = 0, ii = fonts.length; i < ii; ++i) {\n        fonts[i] = fonts[i].replace('Arial Unicode MS', 'Arial');\n        const font = fonts[i];\n        const cssFont = mb2css(font, 1);\n        registerFont(cssFont);\n        const parts = cssFont.split(' ');\n        fontDescriptions.push([\n            parts.slice(3).join(' ').replace(/\"/g, ''),\n            parts[1],\n            parts[0]\n        ]);\n    }\n    for (let i = 0, ii = fontDescriptions.length; i < ii; ++i) {\n        const fontDescription = fontDescriptions[i];\n        const family = fontDescription[0];\n        if (!hasFontFamily(family)) {\n            if (checkedFonts.get(`${ fontDescription[2] }\\n${ fontDescription[1] } \\n${ family }`) !== 100) {\n                const fontUrl = templateUrl.replace('{font-family}', family.replace(/ /g, '-').toLowerCase()).replace('{Font+Family}', family.replace(/ /g, '+')).replace('{fontweight}', fontDescription[1]).replace('{-fontstyle}', fontDescription[2].replace('normal', '').replace(/(.+)/, '-$1')).replace('{fontstyle}', fontDescription[2]);\n                if (!document.querySelector('link[href=\"' + fontUrl + '\"]')) {\n                    const markup = document.createElement('link');\n                    markup.href = fontUrl;\n                    markup.rel = 'stylesheet';\n                    document.head.appendChild(markup);\n                }\n            }\n        }\n    }\n    processedFontFamilies[fontsKey] = fonts;\n    return fonts;\n}\n\n/*\nol-mapbox-style - Use Mapbox Style objects with OpenLayers\nCopyright 2016-present ol-mapbox-style contributors\nLicense: https://raw.githubusercontent.com/openlayers/ol-mapbox-style/master/LICENSE\n*/\n/**\n * @typedef {import(\"ol/layer/Vector\").default} VectorLayer\n * @typedef {import(\"ol/layer/VectorTile\").default} VectorTileLayer\n * @typedef {import(\"ol/style/Style\").StyleFunction} StyleFunction\n * @typedef {import('./util.js').ResourceType} ResourceType\n */\nconst types = {\n    'Point': 1,\n    'MultiPoint': 1,\n    'LineString': 2,\n    'MultiLineString': 2,\n    'Polygon': 3,\n    'MultiPolygon': 3\n};\nconst anchor = {\n    'center': [\n        0.5,\n        0.5\n    ],\n    'left': [\n        0,\n        0.5\n    ],\n    'right': [\n        1,\n        0.5\n    ],\n    'top': [\n        0.5,\n        0\n    ],\n    'bottom': [\n        0.5,\n        1\n    ],\n    'top-left': [\n        0,\n        0\n    ],\n    'top-right': [\n        1,\n        0\n    ],\n    'bottom-left': [\n        0,\n        1\n    ],\n    'bottom-right': [\n        1,\n        1\n    ]\n};\nconst expressionData = function (rawExpression, propertySpec) {\n    const compiledExpression = createPropertyExpression(rawExpression, propertySpec);\n    if (compiledExpression.result === 'error') {\n        throw new Error(compiledExpression.value.map(err => `${ err.key }: ${ err.message }`).join(', '));\n    }\n    return compiledExpression.value;\n};\nconst emptyObj$1 = {};\nconst zoomObj = { zoom: 0 };\nlet renderFeatureCoordinates, renderFeature;\n/**\n * @private\n * @param {Object} layer Gl object layer.\n * @param {string} layoutOrPaint 'layout' or 'paint'.\n * @param {string} property Feature property.\n * @param {number} zoom Zoom.\n * @param {Object} feature Gl feature.\n * @param {Object} [functionCache] Function cache.\n * @param {Object} [featureState] Feature state.\n * @return {?} Value.\n */\nfunction getValue(layer, layoutOrPaint, property, zoom, feature, functionCache, featureState) {\n    const layerId = layer.id;\n    if (!functionCache) {\n        functionCache = {};\n        console.warn('No functionCache provided to getValue()');    //eslint-disable-line no-console\n    }\n    if (!functionCache[layerId]) {\n        functionCache[layerId] = {};\n    }\n    const functions = functionCache[layerId];\n    if (!functions[property]) {\n        let value = (layer[layoutOrPaint] || emptyObj$1)[property];\n        const propertySpec = spec[`${ layoutOrPaint }_${ layer.type }`][property];\n        if (value === undefined) {\n            value = propertySpec.default;\n        }\n        let isExpr = isExpression(value);\n        if (!isExpr && isFunction(value)) {\n            value = convertFunction(value, propertySpec);\n            isExpr = true;\n        }\n        if (isExpr) {\n            const compiledExpression = expressionData(value, propertySpec);\n            functions[property] = compiledExpression.evaluate.bind(compiledExpression);\n        } else {\n            if (propertySpec.type == 'color') {\n                value = Color$1.parse(value);\n            }\n            functions[property] = function () {\n                return value;\n            };\n        }\n    }\n    zoomObj.zoom = zoom;\n    return functions[property](zoomObj, feature, featureState);\n}\n/**\n * @private\n * @param {Object} layer Gl object layer.\n * @param {number} zoom Zoom.\n * @param {Object} feature Gl feature.\n * @param {\"icon\"|\"text\"} prefix Style property prefix.\n * @param {Object} [functionCache] Function cache.\n * @return {\"declutter\"|\"obstacle\"|\"none\"} Value.\n */\nfunction getDeclutterMode(layer, zoom, feature, prefix, functionCache) {\n    const allowOverlap = getValue(layer, 'layout', `${ prefix }-allow-overlap`, zoom, feature, functionCache);\n    if (!allowOverlap) {\n        return 'declutter';\n    }\n    const ignorePlacement = getValue(layer, 'layout', `${ prefix }-ignore-placement`, zoom, feature, functionCache);\n    if (!ignorePlacement) {\n        return 'obstacle';\n    }\n    return 'none';\n}\n/**\n * @private\n * @param {string} layerId Layer id.\n * @param {?} filter Filter.\n * @param {Object} feature Feature.\n * @param {number} zoom Zoom.\n * @param {Object} [filterCache] Filter cache.\n * @return {boolean} Filter result.\n */\nfunction evaluateFilter(layerId, filter, feature, zoom, filterCache) {\n    if (!filterCache) {\n        console.warn('No filterCache provided to evaluateFilter()');    //eslint-disable-line no-console\n    }\n    if (!(layerId in filterCache)) {\n        filterCache[layerId] = createFilter(filter).filter;\n    }\n    zoomObj.zoom = zoom;\n    return filterCache[layerId](zoomObj, feature);\n}\nlet renderTransparentEnabled = false;\n/**\n * Configure whether features with a transparent style should be rendered. When\n * set to `true`, it will be possible to hit detect content that is not visible,\n * like transparent fills of polygons, using `ol/layer/Layer#getFeatures()` or\n * `ol/Map#getFeaturesAtPixel()`\n * @param {boolean} enabled Rendering of transparent elements is enabled.\n * Default is `false`.\n */\nfunction renderTransparent(enabled) {\n    if (enabled !== renderTransparentEnabled) {\n        clearFunctionCache();\n        renderTransparentEnabled = enabled;\n    }\n}\n/**\n * @private\n * @param {?} color Color.\n * @param {number} [opacity] Opacity.\n * @return {string} Color.\n */\nfunction colorWithOpacity(color, opacity) {\n    if (color) {\n        if (!renderTransparentEnabled && (color.a === 0 || opacity === 0)) {\n            return undefined;\n        }\n        const a = color.a;\n        opacity = opacity === undefined ? 1 : opacity;\n        return a === 0 ? 'transparent' : 'rgba(' + Math.round(color.r * 255 / a) + ',' + Math.round(color.g * 255 / a) + ',' + Math.round(color.b * 255 / a) + ',' + a * opacity + ')';\n    }\n    return color;\n}\nconst templateRegEx = /\\{[^{}}]*\\}/g;\n/**\n * @private\n * @param {string} text Text.\n * @param {Object} properties Properties.\n * @return {string} Text.\n */\nfunction fromTemplate(text, properties) {\n    return text.replace(templateRegEx, function (match) {\n        return properties[match.slice(1, -1)] || '';\n    });\n}\nlet recordLayer = false;\n/**\n * Turns recording of the Mapbox Style's `layer` on and off. When turned on,\n * the layer that a rendered feature belongs to will be set as the feature's\n * `mapbox-layer` property.\n * @param {boolean} record Recording of the style layer is on.\n */\nfunction recordStyleLayer(record = false) {\n    recordLayer = record;\n}\nconst styleFunctionArgs = {};\n/**\n * Creates a style function from the `glStyle` object for all layers that use\n * the specified `source`, which needs to be a `\"type\": \"vector\"` or\n * `\"type\": \"geojson\"` source and applies it to the specified OpenLayers layer.\n *\n * Two additional properties will be set on the provided layer:\n *\n *  * `mapbox-source`: The `id` of the Mapbox Style document's source that the\n *    OpenLayers layer was created from. Usually `apply()` creates one\n *    OpenLayers layer per Mapbox Style source, unless the layer stack has\n *    layers from different sources in between.\n *  * `mapbox-layers`: The `id`s of the Mapbox Style document's layers that are\n *    included in the OpenLayers layer.\n *\n * This function also works in a web worker. In worker mode, the main thread needs\n * to listen to messages from the worker and respond with another message to make\n * sure that sprite image loading works:\n *\n * ```js\n *  worker.addEventListener('message', event => {\n *   if (event.data.action === 'loadImage') {\n *     const image = new Image();\n *     image.crossOrigin = 'anonymous';\n *     image.addEventListener('load', function() {\n *       createImageBitmap(image, 0, 0, image.width, image.height).then(imageBitmap => {\n *         worker.postMessage({\n *           action: 'imageLoaded',\n *           image: imageBitmap,\n *           src: event.data.src\n *         }, [imageBitmap]);\n *       });\n *     });\n *     image.src = event.data.src;\n *   }\n * });\n * ```\n *\n * @param {VectorLayer|VectorTileLayer} olLayer OpenLayers layer to\n * apply the style to. In addition to the style, the layer will get two\n * properties: `mapbox-source` will be the `id` of the `glStyle`'s source used\n * for the layer, and `mapbox-layers` will be an array of the `id`s of the\n * `glStyle`'s layers.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string|Array<string>} sourceOrLayers `source` key or an array of layer `id`s\n * from the Mapbox Style object. When a `source` key is provided, all layers for\n * the specified source will be included in the style function. When layer `id`s\n * are provided, they must be from layers that use the same source.\n * @param {Array<number>} resolutions\n * Resolutions for mapping resolution to zoom level.\n * @param {Object} spriteData Sprite data from the url specified in\n * the Mapbox Style object's `sprite` property. Only required if a `sprite`\n * property is specified in the Mapbox Style object.\n * @param {string|Request|Promise<string|Request>} spriteImageUrl Sprite image url for the sprite\n * specified in the Mapbox Style object's `sprite` property. Only required if a\n * `sprite` property is specified in the Mapbox Style object.\n * @param {function(Array<string>, string=):Array<string>} getFonts Function that\n * receives a font stack and the url template from the GL style's `metadata['ol:webfonts']`\n * property (if set) as arguments, and returns a (modified) font stack that\n * is available. Font names are the names used in the Mapbox Style object. If\n * not provided, the font stack will be used as-is. This function can also be\n * used for loading web fonts.\n * @param {function(VectorLayer|VectorTileLayer, string):HTMLImageElement|HTMLCanvasElement|string|undefined} [getImage=undefined]\n * Function that returns an image or a URL for an image name. If the result is an HTMLImageElement, it must already be\n * loaded. The layer can be used to call layer.changed() when the loading and processing of the image has finished.\n * This function can be used for icons not in the sprite or to override sprite icons.\n * @return {StyleFunction} Style function for use in\n * `ol.layer.Vector` or `ol.layer.VectorTile`.\n */\nfunction stylefunction(olLayer, glStyle, sourceOrLayers, resolutions = defaultResolutions, spriteData = undefined, spriteImageUrl = undefined, getFonts = undefined, getImage = undefined) {\n    if (typeof glStyle == 'string') {\n        glStyle = JSON.parse(glStyle);\n    }\n    if (glStyle.version != 8) {\n        throw new Error('glStyle version 8 required.');\n    }\n    styleFunctionArgs[getStyleFunctionKey(glStyle, olLayer)] = Array.from(arguments);\n    let spriteImage, spriteImageSize;\n    let spriteImageUnSDFed;\n    if (spriteImageUrl) {\n        if (typeof Image !== 'undefined') {\n            const img = new Image();\n            let blobUrl;\n            toPromise(() => spriteImageUrl).then(spriteImageUrl => {\n                if (spriteImageUrl instanceof Request) {\n                    fetch(spriteImageUrl).then(response => response.blob()).then(blob => {\n                        blobUrl = URL.createObjectURL(blob);\n                        img.src = blobUrl;\n                    }).catch(() => {\n                    });\n                } else {\n                    img.crossOrigin = 'anonymous';\n                    img.src = spriteImageUrl;\n                    if (blobUrl) {\n                        URL.revokeObjectURL(blobUrl);\n                    }\n                }\n            });\n            img.onload = function () {\n                spriteImage = img;\n                spriteImageSize = [\n                    img.width,\n                    img.height\n                ];\n                olLayer.changed();\n                img.onload = null;\n            };\n        } else if (typeof WorkerGlobalScope !== 'undefined' && self instanceof WorkerGlobalScope) {\n            //eslint-disable-line\n            const worker = self;\n            // Main thread needs to handle 'loadImage' and dispatch 'imageLoaded'\n            worker.postMessage({\n                action: 'loadImage',\n                src: spriteImageUrl\n            });\n            worker.addEventListener('message', function handler(event) {\n                if (event.data.action === 'imageLoaded' && event.data.src === spriteImageUrl) {\n                    spriteImage = event.data.image;\n                    spriteImageSize = [\n                        spriteImage.width,\n                        spriteImage.height\n                    ];\n                }\n            });\n        }\n    }\n    const allLayers = derefLayers(glStyle.layers);\n    const layersBySourceLayer = {};\n    const mapboxLayers = [];\n    const iconImageCache = {};\n    const patternCache = {};\n    const functionCache = getFunctionCache(glStyle);\n    const filterCache = getFilterCache(glStyle);\n    let mapboxSource;\n    for (let i = 0, ii = allLayers.length; i < ii; ++i) {\n        const layer = allLayers[i];\n        const layerId = layer.id;\n        if (typeof sourceOrLayers == 'string' && layer.source == sourceOrLayers || Array.isArray(sourceOrLayers) && sourceOrLayers.indexOf(layerId) !== -1) {\n            const sourceLayer = layer['source-layer'];\n            if (!mapboxSource) {\n                mapboxSource = layer.source;\n                const source = glStyle.sources[mapboxSource];\n                if (!source) {\n                    throw new Error(`Source \"${ mapboxSource }\" is not defined`);\n                }\n                const type = source.type;\n                if (type !== 'vector' && type !== 'geojson') {\n                    throw new Error(`Source \"${ mapboxSource }\" is not of type \"vector\" or \"geojson\", but \"${ type }\"`);\n                }\n            } else if (layer.source !== mapboxSource) {\n                throw new Error(`Layer \"${ layerId }\" does not use source \"${ mapboxSource }`);\n            }\n            let layers = layersBySourceLayer[sourceLayer];\n            if (!layers) {\n                layers = [];\n                layersBySourceLayer[sourceLayer] = layers;\n            }\n            layers.push({\n                layer: layer,\n                index: i\n            });\n            mapboxLayers.push(layerId);\n        }\n    }\n    const textHalo = new Stroke();\n    const textColor = new Fill();\n    const styles = [];\n    /**\n   * @param {import(\"ol/Feature\").default|import(\"ol/render/Feature\").default} feature Feature.\n   * @param {number} resolution Resolution.\n   * @param {string} [onlyLayer] Calculate style for this layer only.\n   * @return {Array<import(\"ol/style/Style\").default>} Style.\n   */\n    const styleFunction = function (feature, resolution, onlyLayer) {\n        const properties = feature.getProperties();\n        const layers = layersBySourceLayer[properties.layer];\n        if (!layers) {\n            return undefined;\n        }\n        let zoom = resolutions.indexOf(resolution);\n        if (zoom == -1) {\n            zoom = getZoomForResolution(resolution, resolutions);\n        }\n        const type = types[feature.getGeometry().getType()];\n        const f = {\n            id: feature.getId(),\n            properties: properties,\n            type: type\n        };\n        const featureState = olLayer.get('mapbox-featurestate')[feature.getId()];\n        let stylesLength = -1;\n        let featureBelongsToLayer;\n        for (let i = 0, ii = layers.length; i < ii; ++i) {\n            const layerData = layers[i];\n            const layer = layerData.layer;\n            const layerId = layer.id;\n            if (onlyLayer !== undefined && onlyLayer !== layerId) {\n                continue;\n            }\n            const layout = layer.layout || emptyObj$1;\n            const paint = layer.paint || emptyObj$1;\n            if (layout.visibility === 'none' || 'minzoom' in layer && zoom < layer.minzoom || 'maxzoom' in layer && zoom >= layer.maxzoom) {\n                continue;\n            }\n            const filter = layer.filter;\n            if (!filter || evaluateFilter(layerId, filter, f, zoom, filterCache)) {\n                featureBelongsToLayer = layer;\n                let color, opacity, fill, stroke, strokeColor, style;\n                const index = layerData.index;\n                if (type == 3 && (layer.type == 'fill' || layer.type == 'fill-extrusion')) {\n                    opacity = getValue(layer, 'paint', layer.type + '-opacity', zoom, f, functionCache, featureState);\n                    if (layer.type + '-pattern' in paint) {\n                        const fillIcon = getValue(layer, 'paint', layer.type + '-pattern', zoom, f, functionCache, featureState);\n                        if (fillIcon) {\n                            const icon = typeof fillIcon === 'string' ? fromTemplate(fillIcon, properties) : fillIcon.toString();\n                            if (spriteImage && spriteData && spriteData[icon]) {\n                                ++stylesLength;\n                                style = styles[stylesLength];\n                                if (!style || !style.getFill() || style.getStroke() || style.getText()) {\n                                    style = new Style({ fill: new Fill() });\n                                    styles[stylesLength] = style;\n                                }\n                                fill = style.getFill();\n                                style.setZIndex(index);\n                                const icon_cache_key = icon + '.' + opacity;\n                                let pattern = patternCache[icon_cache_key];\n                                if (!pattern) {\n                                    const spriteImageData = spriteData[icon];\n                                    const canvas = createCanvas(spriteImageData.width, spriteImageData.height);\n                                    const ctx = canvas.getContext('2d');\n                                    ctx.globalAlpha = opacity;\n                                    ctx.drawImage(spriteImage, spriteImageData.x, spriteImageData.y, spriteImageData.width, spriteImageData.height, 0, 0, spriteImageData.width, spriteImageData.height);\n                                    pattern = ctx.createPattern(canvas, 'repeat');\n                                    patternCache[icon_cache_key] = pattern;\n                                }\n                                fill.setColor(pattern);\n                            }\n                        }\n                    } else {\n                        color = colorWithOpacity(getValue(layer, 'paint', layer.type + '-color', zoom, f, functionCache, featureState), opacity);\n                        if (layer.type + '-outline-color' in paint) {\n                            strokeColor = colorWithOpacity(getValue(layer, 'paint', layer.type + '-outline-color', zoom, f, functionCache, featureState), opacity);\n                        }\n                        if (!strokeColor) {\n                            strokeColor = color;\n                        }\n                        if (color || strokeColor) {\n                            ++stylesLength;\n                            style = styles[stylesLength];\n                            if (!style || color && !style.getFill() || !color && style.getFill() || strokeColor && !style.getStroke() || !strokeColor && style.getStroke() || style.getText()) {\n                                style = new Style({\n                                    fill: color ? new Fill() : undefined,\n                                    stroke: strokeColor ? new Stroke() : undefined\n                                });\n                                styles[stylesLength] = style;\n                            }\n                            if (color) {\n                                fill = style.getFill();\n                                fill.setColor(color);\n                            }\n                            if (strokeColor) {\n                                stroke = style.getStroke();\n                                stroke.setColor(strokeColor);\n                                stroke.setWidth(0.5);\n                            }\n                            style.setZIndex(index);\n                        }\n                    }\n                }\n                if (type != 1 && layer.type == 'line') {\n                    if (!('line-pattern' in paint)) {\n                        color = colorWithOpacity(getValue(layer, 'paint', 'line-color', zoom, f, functionCache, featureState), getValue(layer, 'paint', 'line-opacity', zoom, f, functionCache, featureState));\n                    } else {\n                        color = undefined;\n                    }\n                    const width = getValue(layer, 'paint', 'line-width', zoom, f, functionCache, featureState);\n                    if (color && width > 0) {\n                        ++stylesLength;\n                        style = styles[stylesLength];\n                        if (!style || !style.getStroke() || style.getFill() || style.getText()) {\n                            style = new Style({ stroke: new Stroke() });\n                            styles[stylesLength] = style;\n                        }\n                        stroke = style.getStroke();\n                        stroke.setLineCap(getValue(layer, 'layout', 'line-cap', zoom, f, functionCache, featureState));\n                        stroke.setLineJoin(getValue(layer, 'layout', 'line-join', zoom, f, functionCache, featureState));\n                        stroke.setMiterLimit(getValue(layer, 'layout', 'line-miter-limit', zoom, f, functionCache, featureState));\n                        stroke.setColor(color);\n                        stroke.setWidth(width);\n                        stroke.setLineDash(paint['line-dasharray'] ? getValue(layer, 'paint', 'line-dasharray', zoom, f, functionCache, featureState).map(function (x) {\n                            return x * width;\n                        }) : null);\n                        style.setZIndex(index);\n                    }\n                }\n                let hasImage = false;\n                let text = null;\n                let placementAngle = 0;\n                let icon, iconImg, skipLabel;\n                if ((type == 1 || type == 2) && 'icon-image' in layout) {\n                    const iconImage = getValue(layer, 'layout', 'icon-image', zoom, f, functionCache, featureState);\n                    if (iconImage) {\n                        icon = typeof iconImage === 'string' ? fromTemplate(iconImage, properties) : iconImage.toString();\n                        let styleGeom = undefined;\n                        const imageElement = getImage ? getImage(olLayer, icon) : undefined;\n                        if (spriteImage && spriteData && spriteData[icon] || imageElement) {\n                            const iconRotationAlignment = getValue(layer, 'layout', 'icon-rotation-alignment', zoom, f, functionCache, featureState);\n                            if (type == 2) {\n                                const geom = feature.getGeometry();\n                                // ol package and ol-debug.js only\n                                if (geom.getFlatMidpoint || geom.getFlatMidpoints) {\n                                    const extent = geom.getExtent();\n                                    const size = Math.sqrt(Math.max(Math.pow((extent[2] - extent[0]) / resolution, 2), Math.pow((extent[3] - extent[1]) / resolution, 2)));\n                                    if (size > 150) {\n                                        //FIXME Do not hard-code a size of 150\n                                        const midpoint = geom.getType() === 'MultiLineString' ? geom.getFlatMidpoints() : geom.getFlatMidpoint();\n                                        if (!renderFeature) {\n                                            renderFeatureCoordinates = [\n                                                NaN,\n                                                NaN\n                                            ];\n                                            renderFeature = new RenderFeature('Point', renderFeatureCoordinates, [], 2, {}, undefined);\n                                        }\n                                        styleGeom = renderFeature;\n                                        renderFeatureCoordinates[0] = midpoint[0];\n                                        renderFeatureCoordinates[1] = midpoint[1];\n                                        const placement = getValue(layer, 'layout', 'symbol-placement', zoom, f, functionCache, featureState);\n                                        if (placement === 'line' && iconRotationAlignment === 'map') {\n                                            const stride = geom.getStride();\n                                            const coordinates = geom.getFlatCoordinates();\n                                            for (let i = 0, ii = coordinates.length - stride; i < ii; i += stride) {\n                                                const x1 = coordinates[i];\n                                                const y1 = coordinates[i + 1];\n                                                const x2 = coordinates[i + stride];\n                                                const y2 = coordinates[i + stride + 1];\n                                                const minX = Math.min(x1, x2);\n                                                const minY = Math.min(y1, y2);\n                                                const maxX = Math.max(x1, x2);\n                                                const maxY = Math.max(y1, y2);\n                                                if (midpoint[0] >= minX && midpoint[0] <= maxX && midpoint[1] >= minY && midpoint[1] <= maxY) {\n                                                    placementAngle = Math.atan2(y1 - y2, x2 - x1);\n                                                    break;\n                                                }\n                                            }\n                                        }\n                                    }\n                                }\n                            }\n                            if (type !== 2 || styleGeom) {\n                                const iconSize = getValue(layer, 'layout', 'icon-size', zoom, f, functionCache, featureState);\n                                const iconColor = paint['icon-color'] !== undefined ? getValue(layer, 'paint', 'icon-color', zoom, f, functionCache, featureState) : null;\n                                if (!iconColor || iconColor.a !== 0) {\n                                    const haloColor = getValue(layer, 'paint', 'icon-halo-color', zoom, f, functionCache, featureState);\n                                    const haloWidth = getValue(layer, 'paint', 'icon-halo-width', zoom, f, functionCache, featureState);\n                                    let iconCacheKey = `${ icon }.${ iconSize }.${ haloWidth }.${ haloColor }`;\n                                    if (iconColor !== null) {\n                                        iconCacheKey += `.${ iconColor }`;\n                                    }\n                                    iconImg = iconImageCache[iconCacheKey];\n                                    if (!iconImg) {\n                                        const declutterMode = getDeclutterMode(layer, zoom, f, 'icon', functionCache);\n                                        let displacement;\n                                        if ('icon-offset' in layout) {\n                                            displacement = getValue(layer, 'layout', 'icon-offset', zoom, f, functionCache, featureState).slice(0);\n                                            displacement[0] *= iconSize;\n                                            displacement[1] *= -iconSize;\n                                        }\n                                        let color = iconColor ? [\n                                            iconColor.r * 255,\n                                            iconColor.g * 255,\n                                            iconColor.b * 255,\n                                            iconColor.a\n                                        ] : undefined;\n                                        if (imageElement) {\n                                            const iconOptions = {\n                                                color: color,\n                                                rotateWithView: iconRotationAlignment === 'map',\n                                                displacement: displacement,\n                                                declutterMode: declutterMode,\n                                                scale: iconSize\n                                            };\n                                            if (typeof imageElement === 'string') {\n                                                // it is a src URL\n                                                iconOptions.src = imageElement;\n                                            } else {\n                                                iconOptions.img = imageElement;\n                                                iconOptions.imgSize = [\n                                                    imageElement.width,\n                                                    imageElement.height\n                                                ];\n                                            }\n                                            iconImg = new Icon(iconOptions);\n                                        } else {\n                                            const spriteImageData = spriteData[icon];\n                                            let img, size, offset;\n                                            if (haloWidth) {\n                                                if (spriteImageData.sdf) {\n                                                    img = drawIconHalo(drawSDF(spriteImage, spriteImageData, iconColor || [\n                                                        0,\n                                                        0,\n                                                        0,\n                                                        1\n                                                    ]), {\n                                                        x: 0,\n                                                        y: 0,\n                                                        width: spriteImageData.width,\n                                                        height: spriteImageData.height,\n                                                        pixelRatio: spriteImageData.pixelRatio\n                                                    }, haloWidth, haloColor);\n                                                    color = undefined;    // do not tint haloed icons\n                                                } else {\n                                                    img = drawIconHalo(spriteImage, spriteImageData, haloWidth, haloColor);\n                                                }\n                                            } else {\n                                                if (spriteImageData.sdf) {\n                                                    if (!spriteImageUnSDFed) {\n                                                        spriteImageUnSDFed = drawSDF(spriteImage, {\n                                                            x: 0,\n                                                            y: 0,\n                                                            width: spriteImageSize[0],\n                                                            height: spriteImageSize[1]\n                                                        }, {\n                                                            r: 1,\n                                                            g: 1,\n                                                            b: 1,\n                                                            a: 1\n                                                        });\n                                                    }\n                                                    img = spriteImageUnSDFed;\n                                                } else {\n                                                    img = spriteImage;\n                                                }\n                                                size = [\n                                                    spriteImageData.width,\n                                                    spriteImageData.height\n                                                ];\n                                                offset = [\n                                                    spriteImageData.x,\n                                                    spriteImageData.y\n                                                ];\n                                            }\n                                            iconImg = new Icon({\n                                                color: color,\n                                                img: img,\n                                                // @ts-ignore\n                                                imgSize: spriteImageSize,\n                                                size: size,\n                                                offset: offset,\n                                                rotateWithView: iconRotationAlignment === 'map',\n                                                scale: iconSize / spriteImageData.pixelRatio,\n                                                displacement: displacement,\n                                                declutterMode: declutterMode\n                                            });\n                                        }\n                                        iconImageCache[iconCacheKey] = iconImg;\n                                    }\n                                }\n                                if (iconImg) {\n                                    ++stylesLength;\n                                    style = styles[stylesLength];\n                                    if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n                                        style = new Style();\n                                        styles[stylesLength] = style;\n                                    }\n                                    style.setGeometry(styleGeom);\n                                    iconImg.setRotation(placementAngle + deg2rad(getValue(layer, 'layout', 'icon-rotate', zoom, f, functionCache, featureState)));\n                                    iconImg.setOpacity(getValue(layer, 'paint', 'icon-opacity', zoom, f, functionCache, featureState));\n                                    iconImg.setAnchor(anchor[getValue(layer, 'layout', 'icon-anchor', zoom, f, functionCache, featureState)]);\n                                    style.setImage(iconImg);\n                                    text = style.getText();\n                                    style.setText(undefined);\n                                    style.setZIndex(index);\n                                    hasImage = true;\n                                    skipLabel = false;\n                                }\n                            } else {\n                                skipLabel = true;\n                            }\n                        }\n                    }\n                }\n                if (type == 1 && layer.type === 'circle') {\n                    ++stylesLength;\n                    style = styles[stylesLength];\n                    if (!style || !style.getImage() || style.getFill() || style.getStroke()) {\n                        style = new Style();\n                        styles[stylesLength] = style;\n                    }\n                    const circleRadius = 'circle-radius' in paint ? getValue(layer, 'paint', 'circle-radius', zoom, f, functionCache, featureState) : 5;\n                    const circleStrokeColor = colorWithOpacity(getValue(layer, 'paint', 'circle-stroke-color', zoom, f, functionCache, featureState), getValue(layer, 'paint', 'circle-stroke-opacity', zoom, f, functionCache, featureState));\n                    const circleTranslate = getValue(layer, 'paint', 'circle-translate', zoom, f, functionCache, featureState);\n                    const circleColor = colorWithOpacity(getValue(layer, 'paint', 'circle-color', zoom, f, functionCache, featureState), getValue(layer, 'paint', 'circle-opacity', zoom, f, functionCache, featureState));\n                    const circleStrokeWidth = getValue(layer, 'paint', 'circle-stroke-width', zoom, f, functionCache, featureState);\n                    const cache_key = circleRadius + '.' + circleStrokeColor + '.' + circleColor + '.' + circleStrokeWidth + '.' + circleTranslate[0] + '.' + circleTranslate[1];\n                    iconImg = iconImageCache[cache_key];\n                    if (!iconImg) {\n                        iconImg = new Circle({\n                            radius: circleRadius,\n                            displacement: [\n                                circleTranslate[0],\n                                -circleTranslate[1]\n                            ],\n                            stroke: circleStrokeColor && circleStrokeWidth > 0 ? new Stroke({\n                                width: circleStrokeWidth,\n                                color: circleStrokeColor\n                            }) : undefined,\n                            fill: circleColor ? new Fill({ color: circleColor }) : undefined,\n                            declutterMode: 'none'\n                        });\n                        iconImageCache[cache_key] = iconImg;\n                    }\n                    style.setImage(iconImg);\n                    text = style.getText();\n                    style.setText(undefined);\n                    style.setGeometry(undefined);\n                    style.setZIndex(index);\n                    hasImage = true;\n                }\n                let label, font, textLineHeight, textSize, letterSpacing, maxTextWidth;\n                if ('text-field' in layout) {\n                    textSize = Math.round(getValue(layer, 'layout', 'text-size', zoom, f, functionCache, featureState));\n                    const fontArray = getValue(layer, 'layout', 'text-font', zoom, f, functionCache, featureState);\n                    textLineHeight = getValue(layer, 'layout', 'text-line-height', zoom, f, functionCache, featureState);\n                    font = mb2css(getFonts ? getFonts(fontArray, glStyle.metadata ? glStyle.metadata['ol:webfonts'] : undefined) : fontArray, textSize, textLineHeight);\n                    if (!font.includes('sans-serif')) {\n                        font += ',sans-serif';\n                    }\n                    letterSpacing = getValue(layer, 'layout', 'text-letter-spacing', zoom, f, functionCache, featureState);\n                    maxTextWidth = getValue(layer, 'layout', 'text-max-width', zoom, f, functionCache, featureState);\n                    const textField = getValue(layer, 'layout', 'text-field', zoom, f, functionCache, featureState);\n                    if (typeof textField === 'object' && textField.sections) {\n                        if (textField.sections.length === 1) {\n                            label = textField.toString();\n                        } else {\n                            label = textField.sections.reduce((acc, chunk, i) => {\n                                const fonts = chunk.fontStack ? chunk.fontStack.split(',') : fontArray;\n                                const chunkFont = mb2css(getFonts ? getFonts(fonts) : fonts, textSize * (chunk.scale || 1), textLineHeight);\n                                let text = chunk.text;\n                                if (text === '\\n') {\n                                    acc.push('\\n', '');\n                                    return acc;\n                                }\n                                if (type == 2) {\n                                    acc.push(applyLetterSpacing(text, letterSpacing), chunkFont);\n                                    return;\n                                }\n                                text = wrapText(text, chunkFont, maxTextWidth, letterSpacing).split('\\n');\n                                for (let i = 0, ii = text.length; i < ii; ++i) {\n                                    if (i > 0) {\n                                        acc.push('\\n', '');\n                                    }\n                                    acc.push(text[i], chunkFont);\n                                }\n                                return acc;\n                            }, []);\n                        }\n                    } else {\n                        label = fromTemplate(textField, properties).trim();\n                    }\n                    opacity = getValue(layer, 'paint', 'text-opacity', zoom, f, functionCache, featureState);\n                }\n                if (label && opacity && !skipLabel) {\n                    if (!hasImage) {\n                        ++stylesLength;\n                        style = styles[stylesLength];\n                        if (!style || !style.getText() || style.getFill() || style.getStroke()) {\n                            style = new Style();\n                            styles[stylesLength] = style;\n                        }\n                        style.setImage(undefined);\n                        style.setGeometry(undefined);\n                    }\n                    const declutterMode = getDeclutterMode(layer, zoom, f, 'text', functionCache);\n                    if (!style.getText()) {\n                        style.setText(text);\n                    }\n                    text = style.getText();\n                    if (!text || 'getDeclutterMode' in text && text.getDeclutterMode() !== declutterMode) {\n                        text = new Text({\n                            padding: [\n                                2,\n                                2,\n                                2,\n                                2\n                            ],\n                            // @ts-ignore\n                            declutterMode: declutterMode\n                        });\n                        style.setText(text);\n                    }\n                    const textTransform = getValue(layer, 'layout', 'text-transform', zoom, f, functionCache, featureState);\n                    if (textTransform == 'uppercase') {\n                        label = Array.isArray(label) ? label.map((t, i) => i % 2 ? t : t.toUpperCase()) : label.toUpperCase();\n                    } else if (textTransform == 'lowercase') {\n                        label = Array.isArray(label) ? label.map((t, i) => i % 2 ? t : t.toLowerCase()) : label.toLowerCase();\n                    }\n                    const wrappedLabel = Array.isArray(label) ? label : type == 2 ? applyLetterSpacing(label, letterSpacing) : wrapText(label, font, maxTextWidth, letterSpacing);\n                    text.setText(wrappedLabel);\n                    text.setFont(font);\n                    text.setRotation(deg2rad(getValue(layer, 'layout', 'text-rotate', zoom, f, functionCache, featureState)));\n                    const textAnchor = getValue(layer, 'layout', 'text-anchor', zoom, f, functionCache, featureState);\n                    const placement = hasImage || type == 1 ? 'point' : getValue(layer, 'layout', 'symbol-placement', zoom, f, functionCache, featureState);\n                    let textAlign;\n                    if (placement === 'line-center') {\n                        text.setPlacement('line');\n                        textAlign = 'center';\n                    } else {\n                        text.setPlacement(placement);\n                    }\n                    if (placement === 'line' && typeof text.setRepeat === 'function') {\n                        const symbolSpacing = getValue(layer, 'layout', 'symbol-spacing', zoom, f, functionCache, featureState);\n                        text.setRepeat(symbolSpacing * 2);\n                    }\n                    text.setOverflow(placement === 'point');\n                    let textHaloWidth = getValue(layer, 'paint', 'text-halo-width', zoom, f, functionCache, featureState);\n                    const textOffset = getValue(layer, 'layout', 'text-offset', zoom, f, functionCache, featureState);\n                    const textTranslate = getValue(layer, 'paint', 'text-translate', zoom, f, functionCache, featureState);\n                    // Text offset has to take halo width and line height into account\n                    let vOffset = 0;\n                    let hOffset = 0;\n                    if (placement == 'point') {\n                        textAlign = 'center';\n                        if (textAnchor.indexOf('left') !== -1) {\n                            textAlign = 'left';\n                            hOffset = textHaloWidth;\n                        } else if (textAnchor.indexOf('right') !== -1) {\n                            textAlign = 'right';\n                            hOffset = -textHaloWidth;\n                        }\n                        const textRotationAlignment = getValue(layer, 'layout', 'text-rotation-alignment', zoom, f, functionCache, featureState);\n                        text.setRotateWithView(textRotationAlignment == 'map');\n                    } else {\n                        text.setMaxAngle(deg2rad(getValue(layer, 'layout', 'text-max-angle', zoom, f, functionCache, featureState)) * label.length / wrappedLabel.length);\n                        text.setRotateWithView(false);\n                    }\n                    text.setTextAlign(textAlign);\n                    let textBaseline = 'middle';\n                    if (textAnchor.indexOf('bottom') == 0) {\n                        textBaseline = 'bottom';\n                        vOffset = -textHaloWidth - 0.5 * (textLineHeight - 1) * textSize;\n                    } else if (textAnchor.indexOf('top') == 0) {\n                        textBaseline = 'top';\n                        vOffset = textHaloWidth + 0.5 * (textLineHeight - 1) * textSize;\n                    }\n                    text.setTextBaseline(textBaseline);\n                    const textJustify = getValue(layer, 'layout', 'text-justify', zoom, f, functionCache, featureState);\n                    text.setJustify(textJustify === 'auto' ? undefined : textJustify);\n                    text.setOffsetX(textOffset[0] * textSize + hOffset + textTranslate[0]);\n                    text.setOffsetY(textOffset[1] * textSize + vOffset + textTranslate[1]);\n                    textColor.setColor(colorWithOpacity(getValue(layer, 'paint', 'text-color', zoom, f, functionCache, featureState), opacity));\n                    text.setFill(textColor);\n                    const haloColor = colorWithOpacity(getValue(layer, 'paint', 'text-halo-color', zoom, f, functionCache, featureState), opacity);\n                    if (haloColor && textHaloWidth > 0) {\n                        textHalo.setColor(haloColor);\n                        // spec here : https://docs.mapbox.com/mapbox-gl-js/style-spec/#paint-symbol-text-halo-width\n                        // Halo width must be doubled because it is applied around the center of the text outline\n                        textHaloWidth *= 2;\n                        // 1/4 of text size (spec) x 2\n                        const halfTextSize = 0.5 * textSize;\n                        textHalo.setWidth(textHaloWidth <= halfTextSize ? textHaloWidth : halfTextSize);\n                        text.setStroke(textHalo);\n                    } else {\n                        text.setStroke(undefined);\n                    }\n                    const textPadding = getValue(layer, 'layout', 'text-padding', zoom, f, functionCache, featureState);\n                    const padding = text.getPadding();\n                    if (textPadding !== padding[0]) {\n                        padding[0] = textPadding;\n                        padding[1] = textPadding;\n                        padding[2] = textPadding;\n                        padding[3] = textPadding;\n                    }\n                    style.setZIndex(index);\n                }\n            }\n        }\n        if (stylesLength > -1) {\n            styles.length = stylesLength + 1;\n            if (recordLayer) {\n                if ('set' in feature) {\n                    // ol/Feature\n                    feature.set('mapbox-layer', featureBelongsToLayer);\n                } else {\n                    // ol/render/Feature\n                    feature.getProperties()['mapbox-layer'] = featureBelongsToLayer;\n                }\n            }\n            return styles;\n        }\n        return undefined;\n    };\n    olLayer.setStyle(styleFunction);\n    olLayer.set('mapbox-source', mapboxSource);\n    olLayer.set('mapbox-layers', mapboxLayers);\n    olLayer.set('mapbox-featurestate', olLayer.get('mapbox-featurestate') || {});\n    return styleFunction;\n}\n/**\n * Get the the style for a specific Mapbox layer only. This can be useful for creating a legend.\n * @param {import(\"ol/Feature\").default|import(\"ol/render/Feature\").default} feature OpenLayers feature.\n * @param {number} resolution View resolution.\n * @param {import(\"ol/layer\").Vector|import(\"ol/layer\").VectorTile} olLayer OpenLayers layer.\n * @param {string} layerId Id of the Mapbox layer to get the style for\n * @return {Array<import(\"ol/style\").Style>} Styles for the provided Mapbox layer.\n */\nfunction getStyleForLayer(feature, resolution, olLayer, layerId) {\n    const evaluateStyle = olLayer.getStyleFunction();\n    if (evaluateStyle.length === 3) {\n        // @ts-ignore\n        return evaluateStyle(feature, resolution, layerId);\n    }\n    return undefined;\n}\n\n/**\n * Generates a shaded relief image given elevation data.  Uses a 3x3\n * neighborhood for determining slope and aspect.\n * @param {Array<ImageData>} inputs Array of input images.\n * @param {Object} data Data added in the \"beforeoperations\" event.\n * @return {ImageData} Output image.\n */\nfunction hillshade(inputs, data) {\n    const elevationImage = inputs[0];\n    const width = elevationImage.width;\n    const height = elevationImage.height;\n    const elevationData = elevationImage.data;\n    const shadeData = new Uint8ClampedArray(elevationData.length);\n    const dp = data.resolution * 2;\n    const maxX = width - 1;\n    const maxY = height - 1;\n    const pixel = [\n        0,\n        0,\n        0,\n        0\n    ];\n    const twoPi = 2 * Math.PI;\n    const halfPi = Math.PI / 2;\n    const sunEl = Math.PI * data.sunEl / 180;\n    const sunAz = Math.PI * data.sunAz / 180;\n    const cosSunEl = Math.cos(sunEl);\n    const sinSunEl = Math.sin(sunEl);\n    const highlightColor = data.highlightColor;\n    const shadowColor = data.shadowColor;\n    const accentColor = data.accentColor;\n    const encoding = data.encoding;\n    let pixelX, pixelY, x0, x1, y0, y1, offset, z0, z1, dzdx, dzdy, slope, aspect, accent, scaled, shade, scaledAccentColor, compositeShadeColor, clamp, slopeScaleBase, scaledSlope, cosIncidence;\n    function calculateElevation(pixel, encoding = 'mapbox') {\n        // The method used to extract elevations from the DEM.\n        //\n        // The supported methods are the Mapbox format\n        // (red * 256 * 256 + green * 256 + blue) * 0.1 - 10000\n        // and the Terrarium format\n        // (red * 256 + green + blue / 256) - 32768\n        //\n        if (encoding === 'mapbox') {\n            return (pixel[0] * 256 * 256 + pixel[1] * 256 + pixel[2]) * 0.1 - 10000;\n        }\n        if (encoding === 'terrarium') {\n            return pixel[0] * 256 + pixel[1] + pixel[2] / 256 - 32768;\n        }\n    }\n    for (pixelY = 0; pixelY <= maxY; ++pixelY) {\n        y0 = pixelY === 0 ? 0 : pixelY - 1;\n        y1 = pixelY === maxY ? maxY : pixelY + 1;\n        for (pixelX = 0; pixelX <= maxX; ++pixelX) {\n            x0 = pixelX === 0 ? 0 : pixelX - 1;\n            x1 = pixelX === maxX ? maxX : pixelX + 1;\n            // determine elevation for (x0, pixelY)\n            offset = (pixelY * width + x0) * 4;\n            pixel[0] = elevationData[offset];\n            pixel[1] = elevationData[offset + 1];\n            pixel[2] = elevationData[offset + 2];\n            pixel[3] = elevationData[offset + 3];\n            z0 = data.vert * calculateElevation(pixel, encoding);\n            // determine elevation for (x1, pixelY)\n            offset = (pixelY * width + x1) * 4;\n            pixel[0] = elevationData[offset];\n            pixel[1] = elevationData[offset + 1];\n            pixel[2] = elevationData[offset + 2];\n            pixel[3] = elevationData[offset + 3];\n            z1 = data.vert * calculateElevation(pixel, encoding);\n            dzdx = (z1 - z0) / dp;\n            // determine elevation for (pixelX, y0)\n            offset = (y0 * width + pixelX) * 4;\n            pixel[0] = elevationData[offset];\n            pixel[1] = elevationData[offset + 1];\n            pixel[2] = elevationData[offset + 2];\n            pixel[3] = elevationData[offset + 3];\n            z0 = data.vert * calculateElevation(pixel, encoding);\n            // determine elevation for (pixelX, y1)\n            offset = (y1 * width + pixelX) * 4;\n            pixel[0] = elevationData[offset];\n            pixel[1] = elevationData[offset + 1];\n            pixel[2] = elevationData[offset + 2];\n            pixel[3] = elevationData[offset + 3];\n            z1 = data.vert * calculateElevation(pixel, encoding);\n            dzdy = (z1 - z0) / dp;\n            aspect = Math.atan2(dzdy, -dzdx);\n            if (aspect < 0) {\n                aspect = halfPi - aspect;\n            } else if (aspect > halfPi) {\n                aspect = twoPi - aspect + halfPi;\n            } else {\n                aspect = halfPi - aspect;\n            }\n            // Bootstrap slope and corresponding incident values\n            slope = Math.atan(Math.sqrt(dzdx * dzdx + dzdy * dzdy));\n            cosIncidence = sinSunEl * Math.cos(slope) + cosSunEl * Math.sin(slope) * Math.cos(sunAz - aspect);\n            accent = Math.cos(slope);\n            // 255 for Hex colors\n            scaled = 255 * cosIncidence;\n            /*\n       * The following is heavily inspired\n       * by [Maplibre's equivalent WebGL shader](https://github.com/maplibre/maplibre-gl-js/blob/main/src/shaders/hillshade.fragment.glsl)\n       */\n            // Forces given value to stay between two given extremes\n            clamp = Math.min(Math.max(2 * data.sunEl, 0), 1);\n            // Intensity basis for hillshade opacity\n            slopeScaleBase = 1.875 - data.opacity * 1.75;\n            // Intensity interpolation so that higher intensity values create more opaque hillshading\n            scaledSlope = data.opacity !== 0.5 ? halfPi * ((Math.pow(slopeScaleBase, slope) - 1) / (Math.pow(slopeScaleBase, halfPi) - 1)) : slope;\n            // Accent hillshade color with given accentColor to emphasize rougher terrain\n            scaledAccentColor = {\n                r: (1 - accent) * accentColor.r * clamp * 255,\n                g: (1 - accent) * accentColor.g * clamp * 255,\n                b: (1 - accent) * accentColor.b * clamp * 255,\n                a: (1 - accent) * accentColor.a * clamp * 255\n            };\n            // Allows highlight vs shadow discrimination\n            shade = Math.abs(((aspect + sunAz) / Math.PI + 0.5) % 2 - 1);\n            // Creates a composite color mix between highlight & shadow colors to emphasize slopes\n            compositeShadeColor = {\n                r: (highlightColor.r * (1 - shade) + shadowColor.r * shade) * scaled,\n                g: (highlightColor.g * (1 - shade) + shadowColor.g * shade) * scaled,\n                b: (highlightColor.b * (1 - shade) + shadowColor.b * shade) * scaled,\n                a: (highlightColor.a * (1 - shade) + shadowColor.a * shade) * scaled\n            };\n            // Fill in result color value\n            offset = (pixelY * width + pixelX) * 4;\n            shadeData[offset] = scaledAccentColor.r * (1 - shade) + compositeShadeColor.r;\n            shadeData[offset + 1] = scaledAccentColor.g * (1 - shade) + compositeShadeColor.g;\n            shadeData[offset + 2] = scaledAccentColor.b * (1 - shade) + compositeShadeColor.b;\n            // Key opacity on the scaledSlope to improve legibility by increasing higher elevation rates' contrast\n            shadeData[offset + 3] = elevationData[offset + 3] * data.opacity * clamp * Math.sin(scaledSlope);\n        }\n    }\n    return new ImageData(shadeData, width, height);\n}\n\n/*\nol-mapbox-style - Use Mapbox Style objects with OpenLayers\nCopyright 2016-present ol-mapbox-style contributors\nLicense: https://raw.githubusercontent.com/openlayers/ol-mapbox-style/master/LICENSE\n*/\n/**\n * @typedef {Object} FeatureIdentifier\n * @property {string|number} id The feature id.\n * @property {string} source The source id.\n */\n/**\n * @typedef {Object} Options\n * @property {string} [accessToken] Access token for 'mapbox://' urls.\n * @property {function(string, import(\"./util.js\").ResourceType): (Request|string|Promise<Request|string>|void)} [transformRequest]\n * Function for controlling how `ol-mapbox-style` fetches resources. Can be used for modifying\n * the url, adding headers or setting credentials options. Called with the url and the resource\n * type as arguments, this function is supposed to return a `Request` or a url `string`, or a promise tehereof.\n * Without a return value the original request will not be modified.\n * @property {string} [projection='EPSG:3857'] Only useful when working with non-standard projections.\n * Code of a projection registered with OpenLayers. All sources of the style must be provided in this\n * projection. The projection must also have a valid extent defined, which will be used to determine the\n * origin and resolutions of the tile grid for all tiled sources of the style. When provided, the bbox\n * placeholder in tile and geojson urls changes: the default is `{bbox-epsg-3857}`, when projection is e.g.\n * set to `EPSG:4326`, the bbox placeholder will be `{bbox-epsg-4326}`.\n * @property {Array<number>} [resolutions] Only useful when working with non-standard projections.\n * Resolutions for mapping resolution to the `zoom` used in the Mapbox style.\n * @property {string} [styleUrl] URL of the Mapbox GL style. Required for styles that were provided\n * as object, when they contain a relative sprite url, or sources referencing data by relative url.\n * @property {string} [webfonts] Template for resolving webfonts. Can be used to specify where to fetch\n * web fonts when no `ol:webfonts` metadata is set in the style object. See `getFonts()` and the\n * \"Font handling\" section in `README.md` for details.\n * @property {function(VectorLayer|VectorTileLayer, string):HTMLImageElement|HTMLCanvasElement|string|undefined} [getImage=undefined]\n * Function that returns an image for an icon name. If the result is an HTMLImageElement, it must already be\n * loaded. The layer can be used to call layer.changed() when the loading and processing of the image has finished.\n * This function be used for icons not in the sprite or to override sprite icons.\n * @property {string} [accessTokenParam='access_token'] Access token param. For internal use.\n */\n/**\n * @typedef {Object} ApplyStyleOptions\n * @property {string} [source=''] Source. Default is `''`, which causes the first source in the\n * style to be used.\n * @property {Array<string>} [layers] Layers. If no source is provided, the layers with the\n * provided ids will be used from the style's `layers` array. All layers need to use the same source.\n * @property {boolean} [updateSource=true] Update or create vector (tile) layer source with parameters\n * specified for the source in the mapbox style definition.\n */\n/**\n * @param {import(\"ol/proj/Projection.js\").default} projection Projection.\n * @param {number} [tileSize=512] Tile size.\n * @return {Array<number>} Resolutions.\n */\nfunction getTileResolutions(projection, tileSize = 512) {\n    return projection.getExtent() ? createXYZ({\n        extent: projection.getExtent(),\n        tileSize: tileSize,\n        maxZoom: 22\n    }).getResolutions() : defaultResolutions;\n}\n/**\n * @param {string} styleUrl Style URL.\n * @param {Options} options Options.\n * @return {Options} Completed options with accessToken and accessTokenParam.\n */\nfunction completeOptions(styleUrl, options) {\n    if (!options.accessToken) {\n        options = Object.assign({}, options);\n        const searchParams = new URL(styleUrl).searchParams;\n        // The last search parameter is the access token\n        searchParams.forEach((value, key) => {\n            options.accessToken = value;\n            options.accessTokenParam = key;\n        });\n    }\n    return options;\n}\n/**\n * Applies a style function to an `ol/layer/VectorTile` or `ol/layer/Vector`\n * with an `ol/source/VectorTile` or an `ol/source/Vector`. If the layer does not have a source\n * yet, it will be created and populated from the information in the `glStyle` (unless `updateSource` is\n * set to `false`).\n *\n * **Example:**\n * ```js\n * import {applyStyle} from 'ol-mapbox-style';\n * import {VectorTile} from 'ol/layer.js';\n *\n * const layer = new VectorTile({declutter: true});\n * applyStyle(layer, 'https://api.maptiler.com/maps/basic/style.json?key=YOUR_OPENMAPTILES_TOKEN');\n * ```\n *\n * The style function will render all layers from the `glStyle` object that use the source\n * of the first layer, the specified `source`, or a subset of layers from the same source. The\n * source needs to be a `\"type\": \"vector\"` or `\"type\": \"geojson\"` source.\n *\n * Two additional properties will be set on the provided layer:\n *\n *  * `mapbox-source`: The `id` of the Mapbox Style document's source that the\n *    OpenLayers layer was created from. Usually `apply()` creates one\n *    OpenLayers layer per Mapbox Style source, unless the layer stack has\n *    layers from different sources in between.\n *  * `mapbox-layers`: The `id`s of the Mapbox Style document's layers that are\n *    included in the OpenLayers layer.\n *\n * @param {VectorTileLayer|VectorLayer} layer OpenLayers layer. When the layer has a source configured,\n * it will be modified to use the configuration from the glStyle's `source`. Options specified on the\n * layer's source will override those from the glStyle's `source`, except for `url` and\n * `tileUrlFunction`. When the source projection is the default (`EPSG:3857`), the `tileGrid` will\n * also be overridden. If you'd rather not have ol-mapbox-style modify the source, configure `applyStyle()`\n * with the `updateSource: false` option.\n * @param {string|Object} glStyle Mapbox Style object.\n * @param {string|Array<string>|Options&ApplyStyleOptions} [sourceOrLayersOrOptions] Options or\n * `source` key or an array of layer `id`s from the Mapbox Style object. When a `source` key is\n * provided, all layers for the specified source will be included in the style function. When layer\n * `id`s are provided, they must be from layers that use the same source. When not provided or a falsey\n * value, all layers using the first source specified in the glStyle will be rendered.\n * @param {Options&ApplyStyleOptions|string} [optionsOrPath] **Deprecated**. Options. Alternatively the path of the style file\n * (only required when a relative path is used for the `\"sprite\"` property of the style).\n * @param {Array<number>} [resolutions] **Deprecated**. Resolutions for mapping resolution to zoom level.\n * Only needed when working with non-standard tile grids or projections, can also be supplied with\n * options.\n * @return {Promise} Promise which will be resolved when the style can be used\n * for rendering.\n */\nfunction applyStyle(layer, glStyle, sourceOrLayersOrOptions = '', optionsOrPath = {}, resolutions = undefined) {\n    let styleUrl, sourceId;\n    /** @type {Options&ApplyStyleOptions} */\n    let options;\n    let sourceOrLayers;\n    let updateSource = true;\n    if (typeof sourceOrLayersOrOptions !== 'string' && !Array.isArray(sourceOrLayersOrOptions)) {\n        options = sourceOrLayersOrOptions;\n        sourceOrLayers = options.source || options.layers;\n        optionsOrPath = options;\n    } else {\n        sourceOrLayers = sourceOrLayersOrOptions;\n    }\n    if (typeof optionsOrPath === 'string') {\n        styleUrl = optionsOrPath;\n        options = {};\n    } else {\n        styleUrl = optionsOrPath.styleUrl;\n        options = optionsOrPath;\n    }\n    if (options.updateSource === false) {\n        updateSource = false;\n    }\n    if (!resolutions) {\n        resolutions = options.resolutions;\n    }\n    if (!styleUrl && typeof glStyle === 'string' && !glStyle.trim().startsWith('{')) {\n        styleUrl = glStyle;\n    }\n    if (styleUrl) {\n        styleUrl = styleUrl.startsWith('data:') ? location.href : normalizeStyleUrl(styleUrl, options.accessToken);\n        options = completeOptions(styleUrl, options);\n    }\n    return new Promise(function (resolve, reject) {\n        // TODO: figure out where best place to check source type is\n        // Note that the source arg is an array of gl layer ids and each must be\n        // dereferenced to get source type to validate\n        getGlStyle(glStyle, options).then(function (glStyle) {\n            if (glStyle.version != 8) {\n                return reject(new Error('glStyle version 8 required.'));\n            }\n            if (!(layer instanceof VectorLayer || layer instanceof VectorTileLayer)) {\n                return reject(new Error('Can only apply to VectorLayer or VectorTileLayer'));\n            }\n            const type = layer instanceof VectorTileLayer ? 'vector' : 'geojson';\n            if (!sourceOrLayers) {\n                sourceId = Object.keys(glStyle.sources).find(function (key) {\n                    return glStyle.sources[key].type === type;\n                });\n                sourceOrLayers = sourceId;\n            } else if (Array.isArray(sourceOrLayers)) {\n                sourceId = glStyle.layers.find(function (layer) {\n                    return layer.id === sourceOrLayers[0];\n                }).source;\n            } else {\n                sourceId = sourceOrLayers;\n            }\n            if (!sourceId) {\n                return reject(new Error(`No ${ type } source found in the glStyle.`));\n            }\n            function assignSource() {\n                if (!updateSource) {\n                    return Promise.resolve();\n                }\n                if (layer instanceof VectorTileLayer) {\n                    return setupVectorSource(glStyle.sources[sourceId], styleUrl, options).then(function (source) {\n                        const targetSource = layer.getSource();\n                        if (!targetSource) {\n                            layer.setSource(source);\n                        } else if (source !== targetSource) {\n                            targetSource.setTileUrlFunction(source.getTileUrlFunction());\n                            if (typeof targetSource.setUrls === 'function' && typeof source.getUrls === 'function') {\n                                // to get correct keys for tile cache and queue\n                                targetSource.setUrls(source.getUrls());\n                            }\n                            //@ts-ignore\n                            if (!targetSource.format_) {\n                                //@ts-ignore\n                                targetSource.format_ = source.format_;\n                            }\n                            if (!targetSource.getAttributions()) {\n                                targetSource.setAttributions(source.getAttributions());\n                            }\n                            if (targetSource.getTileLoadFunction() === defaultLoadFunction) {\n                                targetSource.setTileLoadFunction(source.getTileLoadFunction());\n                            }\n                            if (equivalent(targetSource.getProjection(), source.getProjection())) {\n                                targetSource.tileGrid = source.getTileGrid();\n                            }\n                        }\n                        const tileGrid = layer.getSource().getTileGrid();\n                        if (!isFinite(layer.getMaxResolution()) && !isFinite(layer.getMinZoom()) && tileGrid.getMinZoom() > 0) {\n                            layer.setMaxResolution(getResolutionForZoom(Math.max(0, tileGrid.getMinZoom() - 1e-12), tileGrid.getResolutions()));\n                        }\n                    });\n                }\n                const glSource = glStyle.sources[sourceId];\n                let source = layer.getSource();\n                if (!source || source.get('mapbox-source') !== glSource) {\n                    source = setupGeoJSONSource(glSource, styleUrl, options);\n                }\n                const targetSource = layer.getSource();\n                if (!targetSource) {\n                    layer.setSource(source);\n                } else if (source !== targetSource) {\n                    if (!targetSource.getAttributions()) {\n                        targetSource.setAttributions(source.getAttributions());\n                    }\n                    //@ts-ignore\n                    if (!targetSource.format_) {\n                        //@ts-ignore\n                        targetSource.format_ = source.getFormat();\n                    }\n                    //@ts-ignore\n                    targetSource.url_ = source.getUrl();\n                }\n                return Promise.resolve();\n            }\n            let spriteScale, spriteData, spriteImageUrl, style;\n            function onChange() {\n                if (!style && (!glStyle.sprite || spriteData)) {\n                    if (options.projection && !resolutions) {\n                        const projection = get$1(options.projection);\n                        const units = projection.getUnits();\n                        if (units !== 'm') {\n                            resolutions = defaultResolutions.map(resolution => resolution / METERS_PER_UNIT[units]);\n                        }\n                    }\n                    style = stylefunction(layer, glStyle, sourceOrLayers, resolutions, spriteData, spriteImageUrl, (fonts, templateUrl = options.webfonts) => getFonts(fonts, templateUrl), options.getImage);\n                    if (!layer.getStyle()) {\n                        reject(new Error(`Nothing to show for source [${ sourceId }]`));\n                    } else {\n                        assignSource().then(resolve).catch(reject);\n                    }\n                } else if (style) {\n                    layer.setStyle(style);\n                    assignSource().then(resolve).catch(reject);\n                } else {\n                    reject(new Error('Something went wrong trying to apply style.'));\n                }\n            }\n            if (glStyle.sprite) {\n                const sprite = new URL(normalizeSpriteUrl(glStyle.sprite, options.accessToken, styleUrl || location.href));\n                spriteScale = window.devicePixelRatio >= 1.5 ? 0.5 : 1;\n                const sizeFactor = spriteScale == 0.5 ? '@2x' : '';\n                let spriteUrl = sprite.origin + sprite.pathname + sizeFactor + '.json' + sprite.search;\n                new Promise(function (resolve, reject) {\n                    fetchResource('Sprite', spriteUrl, options).then(resolve).catch(function (error) {\n                        spriteUrl = sprite.origin + sprite.pathname + '.json' + sprite.search;\n                        fetchResource('Sprite', spriteUrl, options).then(resolve).catch(reject);\n                    });\n                }).then(function (spritesJson) {\n                    if (spritesJson === undefined) {\n                        reject(new Error('No sprites found.'));\n                    }\n                    spriteData = spritesJson;\n                    spriteImageUrl = sprite.origin + sprite.pathname + sizeFactor + '.png' + sprite.search;\n                    if (options.transformRequest) {\n                        const transformed = options.transformRequest(spriteImageUrl, 'SpriteImage') || spriteImageUrl;\n                        if (transformed instanceof Request || transformed instanceof Promise) {\n                            spriteImageUrl = transformed;\n                        }\n                    }\n                    onChange();\n                }).catch(function (err) {\n                    reject(new Error(`Sprites cannot be loaded: ${ spriteUrl }: ${ err.message }`));\n                });\n            } else {\n                onChange();\n            }\n        }).catch(reject);\n    });\n}\nconst emptyObj = {};\nfunction setFirstBackground(mapOrLayer, glStyle, options) {\n    glStyle.layers.some(function (layer) {\n        if (layer.type === 'background') {\n            if (mapOrLayer instanceof Layer) {\n                mapOrLayer.setBackground(function (resolution) {\n                    return getBackgroundColor(layer, resolution, options, {});\n                });\n                return true;\n            }\n            if (mapOrLayer instanceof Map || mapOrLayer instanceof LayerGroup) {\n                mapOrLayer.getLayers().insertAt(0, setupBackgroundLayer(layer, options, {}));\n                return true;\n            }\n        }\n    });\n}\n/**\n * Applies properties of the Mapbox Style's first `background` layer to the\n * provided map or layer (group).\n *\n * **Example:**\n * ```js\n * import {applyBackground} from 'ol-mapbox-style';\n * import {Map} from 'ol';\n *\n * const map = new Map({target: 'map'});\n * applyBackground(map, 'https://api.maptiler.com/maps/basic/style.json?key=YOUR_OPENMAPTILES_TOKEN');\n * ```\n * @param {Map|import(\"ol/layer/Base.js\").default} mapOrLayer OpenLayers Map or layer (group).\n * @param {Object|string} glStyle Mapbox Style object or url.\n * @param {Options} options Options.\n * @return {Promise} Promise that resolves when the background is applied.\n */\nfunction applyBackground(mapOrLayer, glStyle, options = {}) {\n    return getGlStyle(glStyle, options).then(function (glStyle) {\n        setFirstBackground(mapOrLayer, glStyle, options);\n    });\n}\nfunction getSourceIdByRef(layers, ref) {\n    let sourceId;\n    layers.some(function (layer) {\n        if (layer.id == ref) {\n            sourceId = layer.source;\n            return true;\n        }\n    });\n    return sourceId;\n}\nfunction extentFromTileJSON(tileJSON, projection) {\n    const bounds = tileJSON.bounds;\n    if (bounds) {\n        const ll = fromLonLat([\n            bounds[0],\n            bounds[1]\n        ], projection);\n        const tr = fromLonLat([\n            bounds[2],\n            bounds[3]\n        ], projection);\n        return [\n            ll[0],\n            ll[1],\n            tr[0],\n            tr[1]\n        ];\n    }\n    return get$1(projection).getExtent();\n}\nfunction sourceOptionsFromTileJSON(glSource, tileJSON, options) {\n    const tileJSONSource = new TileJSON({\n        tileJSON: tileJSON,\n        tileSize: glSource.tileSize || tileJSON.tileSize || 512\n    });\n    const tileJSONDoc = tileJSONSource.getTileJSON();\n    const tileGrid = tileJSONSource.getTileGrid();\n    const projection = get$1(options.projection || 'EPSG:3857');\n    const extent = extentFromTileJSON(tileJSONDoc, projection);\n    const projectionExtent = projection.getExtent();\n    const minZoom = tileJSONDoc.minzoom || 0;\n    const maxZoom = tileJSONDoc.maxzoom || 22;\n    /** @type {import(\"ol/source/VectorTile.js\").Options<import(\"ol/render/Feature.js\").default>} */\n    const sourceOptions = {\n        attributions: tileJSONSource.getAttributions(),\n        projection: projection,\n        tileGrid: new TileGrid({\n            origin: projectionExtent ? getTopLeft(projectionExtent) : tileGrid.getOrigin(0),\n            extent: extent || tileGrid.getExtent(),\n            minZoom: minZoom,\n            resolutions: getTileResolutions(projection, tileJSON.tileSize).slice(0, maxZoom + 1),\n            tileSize: tileGrid.getTileSize(0)\n        })\n    };\n    if (Array.isArray(tileJSONDoc.tiles)) {\n        sourceOptions.urls = tileJSONDoc.tiles;\n    } else {\n        sourceOptions.url = tileJSONDoc.tiles;\n    }\n    return sourceOptions;\n}\nfunction getBackgroundColor(glLayer, resolution, options, functionCache) {\n    const background = {\n        id: glLayer.id,\n        type: glLayer.type\n    };\n    const layout = glLayer.layout || {};\n    const paint = glLayer.paint || {};\n    background['paint'] = paint;\n    const zoom = getZoomForResolution(resolution, options.resolutions || defaultResolutions);\n    let opacity;\n    const bg = getValue(background, 'paint', 'background-color', zoom, emptyObj, functionCache);\n    if (paint['background-opacity'] !== undefined) {\n        opacity = getValue(background, 'paint', 'background-opacity', zoom, emptyObj, functionCache);\n    }\n    return layout.visibility == 'none' ? undefined : colorWithOpacity(bg, opacity);\n}\n/**\n * @param {Object} glLayer Mapbox Style layer object.\n * @param {Options} options Options.\n * @param {Object} functionCache Cache for functions.\n * @return {Layer} OpenLayers layer.\n */\nfunction setupBackgroundLayer(glLayer, options, functionCache) {\n    const div = document.createElement('div');\n    div.className = 'ol-mapbox-style-background';\n    div.style.position = 'absolute';\n    div.style.width = '100%';\n    div.style.height = '100%';\n    return new Layer({\n        source: new Source({}),\n        render(frameState) {\n            const color = getBackgroundColor(glLayer, frameState.viewState.resolution, options, functionCache);\n            div.style.backgroundColor = color;\n            return div;\n        }\n    });\n}\n/**\n * Creates an OpenLayers VectorTile source for a gl source entry.\n * @param {Object} glSource \"source\" entry from a Mapbox Style object.\n * @param {string|undefined} styleUrl URL to use for the source. This is expected to be the complete http(s) url,\n * with access key applied.\n * @param {Options} options Options.\n * @return {Promise<import(\"ol/source/VectorTile\").default>} Promise resolving to a VectorTile source.\n * @private\n */\nfunction setupVectorSource(glSource, styleUrl, options) {\n    return new Promise(function (resolve, reject) {\n        getTileJson(glSource, styleUrl, options).then(function ({tileJson, tileLoadFunction}) {\n            const sourceOptions = sourceOptionsFromTileJSON(glSource, tileJson, options);\n            sourceOptions.tileLoadFunction = tileLoadFunction;\n            sourceOptions.format = new MVT();\n            resolve(new VectorTileSource(sourceOptions));\n        }).catch(reject);\n    });\n}\nfunction setupVectorLayer(glSource, styleUrl, options) {\n    const layer = new VectorTileLayer({\n        declutter: true,\n        visible: false\n    });\n    setupVectorSource(glSource, styleUrl, options).then(function (source) {\n        source.set('mapbox-source', glSource);\n        layer.setSource(source);\n    }).catch(function (error) {\n        layer.setSource(undefined);\n    });\n    return layer;\n}\nfunction getBboxTemplate(projection) {\n    const projCode = projection ? projection.getCode() : 'EPSG:3857';\n    return `{bbox-${ projCode.toLowerCase().replace(/[^a-z0-9]/g, '-') }}`;\n}\nfunction setupRasterSource(glSource, styleUrl, options) {\n    return new Promise(function (resolve, reject) {\n        getTileJson(glSource, styleUrl, options).then(function ({tileJson, tileLoadFunction}) {\n            const source = new TileJSON({\n                interpolate: options.interpolate === undefined ? true : options.interpolate,\n                transition: 0,\n                crossOrigin: 'anonymous',\n                tileJSON: tileJson\n            });\n            source.tileGrid = sourceOptionsFromTileJSON(glSource, tileJson, options).tileGrid;\n            if (options.projection) {\n                //@ts-ignore\n                source.projection = get$1(options.projection);\n            }\n            const getTileUrl = source.getTileUrlFunction();\n            if (tileLoadFunction) {\n                source.setTileLoadFunction(tileLoadFunction);\n            }\n            source.setTileUrlFunction(function (tileCoord, pixelRatio, projection) {\n                const bboxTemplate = getBboxTemplate(projection);\n                let src = getTileUrl(tileCoord, pixelRatio, projection);\n                if (src.indexOf(bboxTemplate) != -1) {\n                    const bbox = source.getTileGrid().getTileCoordExtent(tileCoord);\n                    src = src.replace(bboxTemplate, bbox.toString());\n                }\n                return src;\n            });\n            source.set('mapbox-source', glSource);\n            resolve(source);\n        }).catch(function (error) {\n            reject(error);\n        });\n    });\n}\nfunction setupRasterLayer(glSource, styleUrl, options) {\n    const layer = new TileLayer();\n    setupRasterSource(glSource, styleUrl, options).then(function (source) {\n        layer.setSource(source);\n    }).catch(function () {\n        layer.setSource(undefined);\n    });\n    return layer;\n}\n/**\n *\n * @param {Object} glSource \"source\" entry from a Mapbox Style object.\n * @param {string} styleUrl Style url\n * @param {Options} options ol-mapbox-style options.\n * @return {ImageLayer<Raster>} The raster layer\n */\nfunction setupHillshadeLayer(glSource, styleUrl, options) {\n    const tileLayer = setupRasterLayer(glSource, styleUrl, options);\n    /** @type {ImageLayer<Raster>} */\n    const layer = new ImageLayer({\n        source: new Raster({\n            operationType: 'image',\n            operation: hillshade,\n            sources: [tileLayer]\n        })\n    });\n    return layer;\n}\n/**\n * @param {Object} glSource glStyle source.\n * @param {string} styleUrl Style URL.\n * @param {Options} options Options.\n * @return {VectorSource} Configured vector source.\n */\nfunction setupGeoJSONSource(glSource, styleUrl, options) {\n    const geoJsonFormat = options.projection ? new GeoJSON({ dataProjection: options.projection }) : new GeoJSON();\n    const data = glSource.data;\n    const sourceOptions = {};\n    if (typeof data == 'string') {\n        const geoJsonUrl = normalizeSourceUrl(data, options.accessToken, options.accessTokenParam || 'access_token', styleUrl || location.href);\n        if (/\\{bbox-[0-9a-z-]+\\}/.test(geoJsonUrl)) {\n            const extentUrl = (extent, resolution, projection) => {\n                const bboxTemplate = getBboxTemplate(projection);\n                return geoJsonUrl.replace(bboxTemplate, `${ extent.join(',') }`);\n            };\n            const source = new VectorSource({\n                attributions: glSource.attribution,\n                format: geoJsonFormat,\n                loader: (extent, resolution, projection, success, failure) => {\n                    const url = typeof extentUrl === 'function' ? extentUrl(extent, resolution, projection) : extentUrl;\n                    fetchResource('GeoJSON', url, options).then(json => {\n                        const features = source.getFormat().readFeatures(json, { featureProjection: projection });\n                        source.addFeatures(features);\n                        success(features);\n                    }).catch(response => {\n                        source.removeLoadedExtent(extent);\n                        failure();\n                    });\n                },\n                strategy: bbox\n            });\n            source.set('mapbox-source', glSource);\n            return source;\n        }\n        const source = new VectorSource({\n            attributions: glSource.attribution,\n            format: geoJsonFormat,\n            url: geoJsonUrl,\n            loader: (extent, resolution, projection, success, failure) => {\n                fetchResource('GeoJSON', geoJsonUrl, options).then(json => {\n                    const features = source.getFormat().readFeatures(json, { featureProjection: projection });\n                    source.addFeatures(features);\n                    success(features);\n                }).catch(response => {\n                    source.removeLoadedExtent(extent);\n                    failure();\n                });\n            }\n        });\n        return source;\n    }\n    sourceOptions.features = geoJsonFormat.readFeatures(data, { featureProjection: getUserProjection() || 'EPSG:3857' });\n    const source = new VectorSource(Object.assign({\n        attributions: glSource.attribution,\n        format: geoJsonFormat\n    }, sourceOptions));\n    source.set('mapbox-source', glSource);\n    return source;\n}\nfunction setupGeoJSONLayer(glSource, styleUrl, options) {\n    return new VectorLayer({\n        declutter: true,\n        source: setupGeoJSONSource(glSource, styleUrl, options),\n        visible: false\n    });\n}\nfunction prerenderRasterLayer(glLayer, layer, functionCache) {\n    let zoom = null;\n    return function (event) {\n        if (glLayer.paint && 'raster-opacity' in glLayer.paint && event.frameState.viewState.zoom !== zoom) {\n            zoom = event.frameState.viewState.zoom;\n            delete functionCache[glLayer.id];\n            updateRasterLayerProperties(glLayer, layer, zoom, functionCache);\n        }\n    };\n}\nfunction updateRasterLayerProperties(glLayer, layer, zoom, functionCache) {\n    const opacity = getValue(glLayer, 'paint', 'raster-opacity', zoom, emptyObj, functionCache);\n    layer.setOpacity(opacity);\n}\nfunction manageVisibility(layer, mapOrGroup) {\n    function onChange() {\n        const glStyle = mapOrGroup.get('mapbox-style');\n        if (!glStyle) {\n            return;\n        }\n        const mapboxLayers = derefLayers(glStyle.layers);\n        const layerMapboxLayerids = layer.get('mapbox-layers');\n        const visible = mapboxLayers.filter(function (mapboxLayer) {\n            return layerMapboxLayerids.includes(mapboxLayer.id);\n        }).some(function (mapboxLayer) {\n            return !mapboxLayer.layout || !mapboxLayer.layout.visibility || mapboxLayer.layout.visibility === 'visible';\n        });\n        if (layer.get('visible') !== visible) {\n            layer.setVisible(visible);\n        }\n    }\n    layer.on('change', onChange);\n    onChange();\n}\nfunction setupLayer(glStyle, styleUrl, glLayer, options) {\n    const functionCache = getFunctionCache(glStyle);\n    const glLayers = glStyle.layers;\n    const type = glLayer.type;\n    const id = glLayer.source || getSourceIdByRef(glLayers, glLayer.ref);\n    const glSource = glStyle.sources[id];\n    let layer;\n    if (type == 'background') {\n        layer = setupBackgroundLayer(glLayer, options, functionCache);\n    } else if (glSource.type == 'vector') {\n        layer = setupVectorLayer(glSource, styleUrl, options);\n    } else if (glSource.type == 'raster') {\n        layer = setupRasterLayer(glSource, styleUrl, options);\n        layer.setVisible(glLayer.layout ? glLayer.layout.visibility !== 'none' : true);\n        layer.on('prerender', prerenderRasterLayer(glLayer, layer, functionCache));\n    } else if (glSource.type == 'geojson') {\n        layer = setupGeoJSONLayer(glSource, styleUrl, options);\n    } else if (glSource.type == 'raster-dem' && glLayer.type == 'hillshade') {\n        const hillshadeLayer = setupHillshadeLayer(glSource, styleUrl, options);\n        layer = hillshadeLayer;\n        hillshadeLayer.getSource().on('beforeoperations', function (event) {\n            const data = event.data;\n            data.resolution = getPointResolution(options.projection || 'EPSG:3857', event.resolution, getCenter(event.extent), 'm');\n            const zoom = getZoomForResolution(event.resolution, options.resolutions || defaultResolutions);\n            data.encoding = glSource.encoding;\n            data.vert = 5 * getValue(glLayer, 'paint', 'hillshade-exaggeration', zoom, emptyObj, functionCache);\n            data.sunAz = getValue(glLayer, 'paint', 'hillshade-illumination-direction', zoom, emptyObj, functionCache);\n            data.sunEl = 35;\n            data.opacity = 0.3;\n            data.highlightColor = getValue(glLayer, 'paint', 'hillshade-highlight-color', zoom, emptyObj, functionCache);\n            data.shadowColor = getValue(glLayer, 'paint', 'hillshade-shadow-color', zoom, emptyObj, functionCache);\n            data.accentColor = getValue(glLayer, 'paint', 'hillshade-accent-color', zoom, emptyObj, functionCache);\n        });\n        layer.setVisible(glLayer.layout ? glLayer.layout.visibility !== 'none' : true);\n    }\n    const glSourceId = id;\n    if (layer) {\n        layer.set('mapbox-source', glSourceId);\n    }\n    return layer;\n}\n/**\n * @param {*} glStyle Mapbox Style.\n * @param {Map|LayerGroup} mapOrGroup Map or layer group.\n * @param {string} styleUrl Style URL.\n * @param {Options} options Options.\n * @return {Promise} Promise that resolves when the style is loaded.\n */\nfunction processStyle(glStyle, mapOrGroup, styleUrl, options) {\n    const promises = [];\n    let view = null;\n    if (mapOrGroup instanceof Map) {\n        view = mapOrGroup.getView();\n        if (!view.isDef() && !view.getRotation() && !view.getResolutions()) {\n            const projection = options.projection ? get$1(options.projection) : view.getProjection();\n            view = new View(Object.assign(view.getProperties(), {\n                maxResolution: defaultResolutions[0] / METERS_PER_UNIT[projection.getUnits()],\n                projection: options.projection || view.getProjection()\n            }));\n            mapOrGroup.setView(view);\n        }\n        if ('center' in glStyle && !view.getCenter()) {\n            view.setCenter(fromLonLat(glStyle.center, view.getProjection()));\n        }\n        if ('zoom' in glStyle && view.getZoom() === undefined) {\n            view.setResolution(defaultResolutions[0] / METERS_PER_UNIT[view.getProjection().getUnits()] / Math.pow(2, glStyle.zoom));\n        }\n        if (!view.getCenter() || view.getZoom() === undefined) {\n            view.fit(view.getProjection().getExtent(), {\n                nearest: true,\n                size: mapOrGroup.getSize()\n            });\n        }\n    }\n    mapOrGroup.set('mapbox-style', glStyle);\n    mapOrGroup.set('mapbox-metadata', {\n        styleUrl,\n        options\n    });\n    const glLayers = glStyle.layers;\n    let layerIds = [];\n    let layer, glSourceId, id;\n    for (let i = 0, ii = glLayers.length; i < ii; ++i) {\n        const glLayer = glLayers[i];\n        const type = glLayer.type;\n        if (type == 'heatmap') {\n            //FIXME Unsupported layer type\n            // eslint-disable-next-line no-console\n            console.debug(`layers[${ i }].type \"${ type }\" not supported`);\n            continue;\n        } else {\n            id = glLayer.source || getSourceIdByRef(glLayers, glLayer.ref);\n            // this technique assumes gl layers will be in a particular order\n            if (!id || id != glSourceId) {\n                if (layerIds.length) {\n                    promises.push(finalizeLayer(layer, layerIds, glStyle, styleUrl, mapOrGroup, options));\n                    layerIds = [];\n                }\n                layer = setupLayer(glStyle, styleUrl, glLayer, options);\n                if (!(layer instanceof VectorLayer || layer instanceof VectorTileLayer)) {\n                    layerIds = [];\n                }\n                glSourceId = layer.get('mapbox-source');\n            }\n            layerIds.push(glLayer.id);\n        }\n    }\n    promises.push(finalizeLayer(layer, layerIds, glStyle, styleUrl, mapOrGroup, options));\n    return Promise.all(promises);\n}\n/**\n * Loads and applies a Mapbox Style object into an OpenLayers Map or LayerGroup.\n * This includes the map background, the layers, and for Map instances that did not\n * have a View defined yet also the center and the zoom.\n *\n * **Example:**\n * ```js\n * import apply from 'ol-mapbox-style';\n *\n * apply('map', 'mapbox://styles/mapbox/bright-v9', {accessToken: 'YOUR_MAPBOX_TOKEN'});\n * ```\n *\n * The center and zoom will only be set if present in the Mapbox Style document,\n * and if not already set on the OpenLayers map.\n *\n * Layers will be added to the OpenLayers map, without affecting any layers that\n * might already be set on the map.\n *\n * Layers added by `apply()` will have two additional properties:\n *\n *  * `mapbox-source`: The `id` of the Mapbox Style document's source that the\n *    OpenLayers layer was created from. Usually `apply()` creates one\n *    OpenLayers layer per Mapbox Style source, unless the layer stack has\n *    layers from different sources in between.\n *  * `mapbox-layers`: The `id`s of the Mapbox Style document's layers that are\n *    included in the OpenLayers layer.\n *\n * This function sets an additional `mapbox-style` property on the OpenLayers\n * Map or LayerGroup instance, which holds the Mapbox Style object.\n *\n * @param {Map|HTMLElement|string|LayerGroup} mapOrGroupOrElement Either an existing\n * OpenLayers Map instance, or a HTML element, or the id of a HTML element that will be\n * the target of a new OpenLayers Map, or a layer group. If layer group, styles\n * releated to the map and view will be ignored.\n * @param {string|Object} style JSON style object or style url pointing to a\n * Mapbox Style object. When using Mapbox APIs, the url is the `styleUrl`\n * shown in Mapbox Studio's \"share\" panel. In addition, the `accessToken` option\n * (see below) must be set.\n * When passed as JSON style object, all OpenLayers layers created by `apply()`\n * will be immediately available, but they may not have a source yet (i.e. when\n * they are defined by a TileJSON url in the Mapbox Style document). When passed\n * as style url, layers will be added to the map when the Mapbox Style document\n * is loaded and parsed.\n * @param {Options} options Options.\n * @return {Promise<Map|LayerGroup>} A promise that resolves after all layers have been added to\n * the OpenLayers Map instance or LayerGroup, their sources set, and their styles applied. The\n * `resolve` callback will be called with the OpenLayers Map instance or LayerGroup as\n * argument.\n */\nfunction apply(mapOrGroupOrElement, style, options = {}) {\n    let promise;\n    /** @type {Map|LayerGroup} */\n    let mapOrGroup;\n    if (typeof mapOrGroupOrElement === 'string' || mapOrGroupOrElement instanceof HTMLElement) {\n        mapOrGroup = new Map({ target: mapOrGroupOrElement });\n    } else {\n        mapOrGroup = mapOrGroupOrElement;\n    }\n    if (typeof style === 'string') {\n        const styleUrl = style.startsWith('data:') ? location.href : normalizeStyleUrl(style, options.accessToken);\n        options = completeOptions(styleUrl, options);\n        promise = new Promise(function (resolve, reject) {\n            getGlStyle(style, options).then(function (glStyle) {\n                processStyle(glStyle, mapOrGroup, styleUrl, options).then(function () {\n                    resolve(mapOrGroup);\n                }).catch(reject);\n            }).catch(function (err) {\n                reject(new Error(`Could not load ${ style }: ${ err.message }`));\n            });\n        });\n    } else {\n        promise = new Promise(function (resolve, reject) {\n            processStyle(style, mapOrGroup, !options.styleUrl || options.styleUrl.startsWith('data:') ? location.href : normalizeStyleUrl(options.styleUrl, options.accessToken), options).then(function () {\n                resolve(mapOrGroup);\n            }).catch(reject);\n        });\n    }\n    return promise;\n}\n/**\n * If layerIds is not empty, applies the style specified in glStyle to the layer,\n * and adds the layer to the map.\n *\n * The layer may not yet have a source when the function is called.  If so, the style\n * is applied to the layer via a once listener on the 'change:source' event.\n *\n * @param {Layer} layer An OpenLayers layer instance.\n * @param {Array<string>} layerIds Array containing layer ids of already-processed layers.\n * @param {Object} glStyle Style as a JSON object.\n * @param {string|undefined} styleUrl The original style URL. Only required\n * when a relative path is used with the `\"sprite\"` property of the style.\n * @param {Map|LayerGroup} mapOrGroup OpenLayers Map.\n * @param {Options} options Options.\n * @return {Promise} Returns a promise that resolves after the source has\n * been set on the specified layer, and the style has been applied.\n */\nfunction finalizeLayer(layer, layerIds, glStyle, styleUrl, mapOrGroup, options = {}) {\n    let minZoom = 24;\n    let maxZoom = 0;\n    const glLayers = glStyle.layers;\n    for (let i = 0, ii = glLayers.length; i < ii; ++i) {\n        const glLayer = glLayers[i];\n        if (layerIds.indexOf(glLayer.id) !== -1) {\n            minZoom = Math.min('minzoom' in glLayer ? glLayer.minzoom : 0, minZoom);\n            maxZoom = Math.max('maxzoom' in glLayer ? glLayer.maxzoom : 24, maxZoom);\n        }\n    }\n    return new Promise(function (resolve, reject) {\n        const setStyle = function () {\n            const source = layer.getSource();\n            if (!source || source.getState() === 'error') {\n                reject(new Error('Error accessing data for source ' + layer.get('mapbox-source')));\n                return;\n            }\n            if ('getTileGrid' in source) {\n                const tileGrid = /** @type {import(\"ol/source/Tile.js\").default|import(\"ol/source/VectorTile.js\").default} */\n                source.getTileGrid();\n                if (tileGrid) {\n                    const sourceMinZoom = tileGrid.getMinZoom();\n                    if (minZoom > 0 || sourceMinZoom > 0) {\n                        layer.setMaxResolution(Math.min(getResolutionForZoom(Math.max(0, minZoom - 1e-12), defaultResolutions), getResolutionForZoom(Math.max(0, sourceMinZoom - 1e-12), tileGrid.getResolutions())));\n                    }\n                    if (maxZoom < 24) {\n                        layer.setMinResolution(getResolutionForZoom(maxZoom, defaultResolutions));\n                    }\n                }\n            } else {\n                if (minZoom > 0) {\n                    layer.setMaxResolution(getResolutionForZoom(Math.max(0, minZoom - 1e-12), defaultResolutions));\n                }\n            }\n            if (source instanceof VectorSource || source instanceof VectorTileSource) {\n                applyStyle(layer, glStyle, layerIds, Object.assign({ styleUrl: styleUrl }, options)).then(function () {\n                    manageVisibility(layer, mapOrGroup);\n                    resolve();\n                }).catch(reject);\n            } else {\n                resolve();\n            }\n        };\n        layer.set('mapbox-layers', layerIds);\n        const layers = mapOrGroup.getLayers();\n        if (layers.getArray().indexOf(layer) === -1) {\n            layers.push(layer);\n        }\n        if (layer.getSource()) {\n            setStyle();\n        } else {\n            layer.once('change:source', setStyle);\n        }\n    });\n}\n/**\n * Get the Mapbox Layer object for the provided `layerId`.\n * @param {Map|LayerGroup} mapOrGroup Map or LayerGroup.\n * @param {string} layerId Mapbox Layer id.\n * @return {Object} Mapbox Layer object.\n */\nfunction getMapboxLayer(mapOrGroup, layerId) {\n    const style = mapOrGroup.get('mapbox-style');\n    const layerStyle = style.layers.find(function (layer) {\n        return layer.id === layerId;\n    });\n    return layerStyle;\n}\n/**\n * Add a new Mapbox Layer object to the style. The map will be re-rendered.\n * @param {Map|LayerGroup} mapOrGroup The Map or LayerGroup `apply` was called on.\n * @param {Object} mapboxLayer Mapbox Layer object.\n * @param {string} [beforeLayerId] Optional id of the Mapbox Layer before the new layer that will be added.\n * @return {Promise<void>} Resolves when the added layer is available.\n */\nfunction addMapboxLayer(mapOrGroup, mapboxLayer, beforeLayerId) {\n    const glStyle = mapOrGroup.get('mapbox-style');\n    const mapboxLayers = glStyle.layers;\n    let spliceIndex;\n    let sourceIndex = -1;\n    if (beforeLayerId !== undefined) {\n        const beforeMapboxLayer = getMapboxLayer(mapOrGroup, beforeLayerId);\n        if (beforeMapboxLayer === undefined) {\n            throw new Error(`Layer with id \"${ beforeLayerId }\" not found.`);\n        }\n        spliceIndex = mapboxLayers.indexOf(beforeMapboxLayer);\n    } else {\n        spliceIndex = mapboxLayers.length;\n    }\n    let sourceOffset;\n    if (spliceIndex > 0 && mapboxLayers[spliceIndex - 1].source === mapboxLayer.source) {\n        sourceIndex = spliceIndex - 1;\n        sourceOffset = -1;\n    } else if (spliceIndex < mapboxLayers.length && mapboxLayers[spliceIndex].source === mapboxLayer.source) {\n        sourceIndex = spliceIndex;\n        sourceOffset = 0;\n    }\n    if (sourceIndex === -1) {\n        const {options, styleUrl} = mapOrGroup.get('mapbox-metadata');\n        const layer = setupLayer(glStyle, styleUrl, mapboxLayer, options);\n        if (beforeLayerId) {\n            const beforeLayer = getLayer(mapOrGroup, beforeLayerId);\n            const beforeLayerIndex = mapOrGroup.getLayers().getArray().indexOf(beforeLayer);\n            mapOrGroup.getLayers().insertAt(beforeLayerIndex, layer);\n        }\n        mapboxLayers.splice(spliceIndex, 0, mapboxLayer);\n        return finalizeLayer(layer, [mapboxLayer.id], glStyle, styleUrl, mapOrGroup, options);\n    }\n    if (mapboxLayers.some(layer => layer.id === mapboxLayer.id)) {\n        throw new Error(`Layer with id \"${ mapboxLayer.id }\" already exists.`);\n    }\n    const sourceLayerId = mapboxLayers[sourceIndex].id;\n    const args = styleFunctionArgs[getStyleFunctionKey(mapOrGroup.get('mapbox-style'), getLayer(mapOrGroup, sourceLayerId))];\n    mapboxLayers.splice(spliceIndex, 0, mapboxLayer);\n    if (args) {\n        const [olLayer, glStyle, sourceOrLayers, resolutions, spriteData, spriteImageUrl, getFonts, getImage] = args;\n        if (Array.isArray(sourceOrLayers)) {\n            const layerIndex = sourceOrLayers.indexOf(sourceLayerId) + sourceOffset;\n            sourceOrLayers.splice(layerIndex, 0, mapboxLayer.id);\n        }\n        stylefunction(olLayer, glStyle, sourceOrLayers, resolutions, spriteData, spriteImageUrl, getFonts, getImage);\n    } else {\n        getLayer(mapOrGroup, mapboxLayers[sourceIndex].id).changed();\n    }\n    return Promise.resolve();\n}\n/**\n * Update a Mapbox Layer object in the style. The map will be re-rendered with the new style.\n * @param {Map|LayerGroup} mapOrGroup The Map or LayerGroup `apply` was called on.\n * @param {Object} mapboxLayer Updated Mapbox Layer object.\n */\nfunction updateMapboxLayer(mapOrGroup, mapboxLayer) {\n    const glStyle = mapOrGroup.get('mapbox-style');\n    const mapboxLayers = glStyle.layers;\n    const index = mapboxLayers.findIndex(function (layer) {\n        return layer.id === mapboxLayer.id;\n    });\n    if (index === -1) {\n        throw new Error(`Layer with id \"${ mapboxLayer.id }\" not found.`);\n    }\n    const oldLayer = mapboxLayers[index];\n    if (oldLayer.source !== mapboxLayer.source) {\n        throw new Error('Updated layer and previous version must use the same source.');\n    }\n    delete getFunctionCache(glStyle)[mapboxLayer.id];\n    delete getFilterCache(glStyle)[mapboxLayer.id];\n    mapboxLayers[index] = mapboxLayer;\n    const args = styleFunctionArgs[getStyleFunctionKey(mapOrGroup.get('mapbox-style'), getLayer(mapOrGroup, mapboxLayer.id))];\n    if (args) {\n        stylefunction.apply(undefined, args);\n    } else {\n        getLayer(mapOrGroup, mapboxLayer.id).changed();\n    }\n}\n/**\n * Updates a Mapbox source object in the style. The according OpenLayers source will be replaced\n * and the map will be re-rendered.\n * @param {Map|LayerGroup} mapOrGroup The Map or LayerGroup `apply` was called on.\n * @param {string} id Key of the source in the `sources` object literal.\n * @param {Object} mapboxSource Mapbox source object.\n * @return {Promise<Source>} Promise that resolves when the source has been updated.\n */\nfunction updateMapboxSource(mapOrGroup, id, mapboxSource) {\n    const currentSource = getSource(mapOrGroup, id);\n    const layers = mapOrGroup.getLayers().getArray().filter(function (layer) {\n        return (layer instanceof VectorLayer || layer instanceof TileLayer || layer instanceof VectorTileLayer) && layer.getSource() === currentSource;\n    });\n    const metadata = mapOrGroup.get('mapbox-metadata');\n    let newSourcePromise;\n    switch (mapboxSource.type) {\n    case 'vector':\n        newSourcePromise = setupVectorSource(mapboxSource, metadata.styleUrl, metadata.options);\n        break;\n    case 'geojson':\n        newSourcePromise = Promise.resolve(setupGeoJSONSource(mapboxSource, metadata.styleUrl, metadata.options));\n        break;\n    case 'raster':\n    case 'raster-dem':\n        newSourcePromise = setupRasterSource(mapboxSource, metadata.styleUrl, metadata.options);\n        break;\n    default:\n        return Promise.reject(new Error('Unsupported source type ' + mapboxSource.type));\n    }\n    newSourcePromise.then(function (newSource) {\n        layers.forEach(function (layer) {\n            layer.setSource(newSource);\n        });\n    });\n    return newSourcePromise;\n}\n/**\n * Remove a Mapbox Layer object from the style. The map will be re-rendered.\n * @param {Map|LayerGroup} mapOrGroup The Map or LayerGroup `apply` was called on.\n * @param {string|Object} mapboxLayerIdOrLayer Mapbox Layer id or Mapbox Layer object.\n */\nfunction removeMapboxLayer(mapOrGroup, mapboxLayerIdOrLayer) {\n    const mapboxLayerId = typeof mapboxLayerIdOrLayer === 'string' ? mapboxLayerIdOrLayer : mapboxLayerIdOrLayer.id;\n    const layer = getLayer(mapOrGroup, mapboxLayerId);\n    /** @type {Array<Object>} */\n    const layerMapboxLayers = layer.get('mapbox-layers');\n    if (layerMapboxLayers.length === 1) {\n        throw new Error('Cannot remove last Mapbox layer from an OpenLayers layer.');\n    }\n    layerMapboxLayers.splice(layerMapboxLayers.indexOf(mapboxLayerId), 1);\n    const glStyle = mapOrGroup.get('mapbox-style');\n    const layers = glStyle.layers;\n    layers.splice(layers.findIndex(layer => layer.id === mapboxLayerId), 1);\n    const args = styleFunctionArgs[getStyleFunctionKey(glStyle, layer)];\n    if (args) {\n        const [olLayer, glStyle, sourceOrLayers, resolutions, spriteData, spriteImageUrl, getFonts, getImage] = args;\n        if (Array.isArray(sourceOrLayers)) {\n            sourceOrLayers.splice(sourceOrLayers.findIndex(layer => layer === mapboxLayerId), 1);\n        }\n        stylefunction(olLayer, glStyle, sourceOrLayers, resolutions, spriteData, spriteImageUrl, getFonts, getImage);\n    } else {\n        getLayer(mapOrGroup, mapboxLayerId).changed();\n    }\n}\n/**\n * Get the OpenLayers layer instance that contains the provided Mapbox Style\n * `layer`. Note that multiple Mapbox Style layers are combined in a single\n * OpenLayers layer instance when they use the same Mapbox Style `source`.\n * @param {Map|LayerGroup} map OpenLayers Map or LayerGroup.\n * @param {string} layerId Mapbox Style layer id.\n * @return {Layer} OpenLayers layer instance.\n */\nfunction getLayer(map, layerId) {\n    const layers = map.getLayers().getArray();\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n        const mapboxLayers = layers[i].get('mapbox-layers');\n        if (mapboxLayers && mapboxLayers.indexOf(layerId) !== -1) {\n            return layers[i];\n        }\n    }\n    return undefined;\n}\n/**\n * Get the OpenLayers layer instances for the provided Mapbox Style `source`.\n * @param {Map|LayerGroup} map OpenLayers Map or LayerGroup.\n * @param {string} sourceId Mapbox Style source id.\n * @return {Array<Layer>} OpenLayers layer instances.\n */\nfunction getLayers(map, sourceId) {\n    const result = [];\n    const layers = map.getLayers().getArray();\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n        if (layers[i].get('mapbox-source') === sourceId) {\n            result.push(layers[i]);\n        }\n    }\n    return result;\n}\n/**\n * Get the OpenLayers source instance for the provided Mapbox Style `source`.\n * @param {Map|LayerGroup} map OpenLayers Map or LayerGroup.\n * @param {string} sourceId Mapbox Style source id.\n * @return {Source} OpenLayers source instance.\n */\nfunction getSource(map, sourceId) {\n    const layers = map.getLayers().getArray();\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n        const source = /** @type {Layer} */\n        layers[i].getSource();\n        if (layers[i].get('mapbox-source') === sourceId) {\n            return source;\n        }\n    }\n    return undefined;\n}\n/**\n * Sets or removes a feature state. The feature state is taken into account for styling,\n * just like the feature's properties, and can be used e.g. to conditionally render selected\n * features differently.\n *\n * The feature state will be stored on the OpenLayers layer matching the feature identifier, in the\n * `mapbox-featurestate` property.\n * @param {Map|VectorLayer|VectorTileLayer} mapOrLayer OpenLayers Map or layer to set the feature\n * state on.\n * @param {FeatureIdentifier} feature Feature identifier.\n * @param {Object|null} state Feature state. Set to `null` to remove the feature state.\n */\nfunction setFeatureState(mapOrLayer, feature, state) {\n    const layers = 'getLayers' in mapOrLayer ? getLayers(mapOrLayer, feature.source) : [mapOrLayer];\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n        const featureState = layers[i].get('mapbox-featurestate');\n        if (featureState) {\n            if (state) {\n                featureState[feature.id] = state;\n            } else {\n                delete featureState[feature.id];\n            }\n            layers[i].changed();\n        } else {\n            throw new Error(`Map or layer for source \"${ feature.source }\" not found.`);\n        }\n    }\n}\n/**\n * Sets or removes a feature state. The feature state is taken into account for styling,\n * just like the feature's properties, and can be used e.g. to conditionally render selected\n * features differently.\n * @param {Map|VectorLayer|VectorTileLayer} mapOrLayer Map or layer to set the feature state on.\n * @param {FeatureIdentifier} feature Feature identifier.\n * @return {Object|null} Feature state or `null` when no feature state is set for the given\n * feature identifier.\n */\nfunction getFeatureState(mapOrLayer, feature) {\n    const layers = 'getLayers' in mapOrLayer ? getLayers(mapOrLayer, feature.source) : [mapOrLayer];\n    for (let i = 0, ii = layers.length; i < ii; ++i) {\n        const featureState = layers[i].get('mapbox-featurestate');\n        if (featureState && featureState[feature.id]) {\n            return featureState[feature.id];\n        }\n    }\n    return undefined;\n}\n\n/** @typedef {import(\"ol/Map.js\").default} Map */\n/**\n * @classdesc\n * Event emitted on configuration or loading error.\n */\nclass ErrorEvent extends BaseEvent {\n    /**\n   * @param {Error} error error object.\n   */\n    constructor(error) {\n        super(EventType.ERROR);\n        /**\n     * @type {Error}\n     */\n        this.error = error;\n    }\n}\n/**\n * @typedef {Object} Options\n * @property {string} styleUrl The URL of the Mapbox style object to use for this layer.  For a\n * style created with Mapbox Studio and hosted on Mapbox, this will look like\n * 'mapbox://styles/you/your-style'.\n * @property {string} [accessToken] The access token for your Mapbox style. This has to be provided\n * for `mapbox://` style urls. For `https://` and other urls, any access key must be the last query\n * parameter of the style url.\n * @property {string} [source] If your style uses more than one source, you need to use either the\n * `source` property or the `layers` property to limit rendering to a single vector source.  The\n * `source` property corresponds to the id of a vector source in your Mapbox style.\n * @property {Array<string>} [layers] Limit rendering to the list of included layers.  All layers\n * must share the same vector source.  If your style uses more than one source, you need to use\n * either the `source` property or the `layers` property to limit rendering to a single vector\n * source.\n * @property {boolean} [declutter=true] Declutter images and text. Decluttering is applied to all\n * image and text styles of all Vector and VectorTile layers that have set this to `true`. The priority\n * is defined by the z-index of the layer, the `zIndex` of the style and the render order of features.\n * Higher z-index means higher priority. Within the same z-index, a feature rendered before another has\n * higher priority.\n *\n * As an optimization decluttered features from layers with the same `className` are rendered above\n * the fill and stroke styles of all of those layers regardless of z-index.  To opt out of this\n * behavior and place declutterd features with their own layer configure the layer with a `className`\n * other than `ol-layer`.\n * @property {import(\"ol/layer/Base.js\").BackgroundColor|false} [background] Background color for the layer.\n * If not specified, the background from the Mapbox style object will be used. Set to `false` to prevent\n * the Mapbox style's background from being used.\n * @property {string} [className='ol-layer'] A CSS class name to set to the layer element.\n * @property {number} [opacity=1] Opacity (0, 1).\n * @property {boolean} [visible=true] Visibility.\n * @property {import(\"ol/extent.js\").Extent} [extent] The bounding extent for layer rendering.  The layer will not be\n * rendered outside of this extent.\n * @property {number} [zIndex] The z-index for layer rendering.  At rendering time, the layers\n * will be ordered, first by Z-index and then by position. When `undefined`, a `zIndex` of 0 is assumed\n * for layers that are added to the map's `layers` collection, or `Infinity` when the layer's `setMap()`\n * method was used.\n * @property {number} [minResolution] The minimum resolution (inclusive) at which this layer will be\n * visible.\n * @property {number} [maxResolution] The maximum resolution (exclusive) below which this layer will\n * be visible. If neither `maxResolution` nor `minZoom` are defined, the layer's `maxResolution` will\n * match the style source's `minzoom`.\n * @property {number} [minZoom] The minimum view zoom level (exclusive) above which this layer will\n * be visible. If neither `maxResolution` nor `minZoom` are defined, the layer's `minZoom` will match\n * the style source's `minzoom`.\n * @property {number} [maxZoom] The maximum view zoom level (inclusive) at which this layer will\n * be visible.\n * @property {import(\"ol/render.js\").OrderFunction} [renderOrder] Render order. Function to be used when sorting\n * features before rendering. By default features are drawn in the order that they are created. Use\n * `null` to avoid the sort, but get an undefined draw order.\n * @property {number} [renderBuffer=100] The buffer in pixels around the tile extent used by the\n * renderer when getting features from the vector tile for the rendering or hit-detection.\n * Recommended value: Vector tiles are usually generated with a buffer, so this value should match\n * the largest possible buffer of the used tiles. It should be at least the size of the largest\n * point symbol or line width.\n * @property {import(\"ol/layer/VectorTile.js\").VectorTileRenderType} [renderMode='hybrid'] Render mode for vector tiles:\n *  * `'hybrid'`: Polygon and line elements are rendered as images, so pixels are scaled during zoom\n *    animations. Point symbols and texts are accurately rendered as vectors and can stay upright on\n *    rotated views.\n *  * `'vector'`: Everything is rendered as vectors. Use this mode for improved performance on vector\n *    tile layers with only a few rendered features (e.g. for highlighting a subset of features of\n *    another layer with the same source).\n * @property {import(\"ol/Map.js\").default} [map] Sets the layer as overlay on a map. The map will not manage\n * this layer in its layers collection, and the layer will be rendered on top. This is useful for\n * temporary layers. The standard way to add a layer to a map and have it managed by the map is to\n * use `map.addLayer()`.\n * @property {boolean} [updateWhileAnimating=false] When set to `true`, feature batches will be\n * recreated during animations. This means that no vectors will be shown clipped, but the setting\n * will have a performance impact for large amounts of vector data. When set to `false`, batches\n * will be recreated when no animation is active.\n * @property {boolean} [updateWhileInteracting=false] When set to `true`, feature batches will be\n * recreated during interactions. See also `updateWhileAnimating`.\n * @property {number} [preload=0] Preload. Load low-resolution tiles up to `preload` levels. `0`\n * means no preloading.\n * @property {boolean} [useInterimTilesOnError=true] Use interim tiles on error.\n * @property {Object<string, *>} [properties] Arbitrary observable properties. Can be accessed with `#get()` and `#set()`.\n */\n/**\n * @classdesc\n * ```js\n * import {MapboxVectorLayer} from 'ol-mapbox-style';\n * ```\n * A vector tile layer based on a Mapbox style that uses a single vector source.  Configure\n * the layer with the `styleUrl` and `accessToken` shown in Mapbox Studio's share panel.\n * If the style uses more than one source, use the `source` property to choose a single\n * vector source.  If you want to render a subset of the layers in the style, use the `layers`\n * property (all layers must share the same vector source).  See the constructor options for\n * more detail.\n *\n *     const map = new Map({\n *       view: new View({\n *         center: [0, 0],\n *         zoom: 1,\n *       }),\n *       layers: [\n *         new MapboxVectorLayer({\n *           styleUrl: 'mapbox://styles/mapbox/bright-v9',\n *           accessToken: 'your-mapbox-access-token-here',\n *         }),\n *       ],\n *       target: 'map',\n *     });\n *\n * On configuration or loading error, the layer will trigger an `'error'` event.  Listeners\n * will receive an object with an `error` property that can be used to diagnose the problem.\n *\n * **Note for users of the full build**: The `MapboxVectorLayer` requires the\n * [ol-mapbox-style](https://github.com/openlayers/ol-mapbox-style) library to be loaded as well.\n *\n * @param {Options} options Options.\n * @extends {VectorTileLayer<import(\"ol/source/VectorTile.js\").default>}\n * @fires module:ol/events/Event~BaseEvent#event:error\n * @api\n */\nclass MapboxVectorLayer extends VectorTileLayer {\n    /**\n   * @param {Options} options Layer options.  At a minimum, `styleUrl` and `accessToken`\n   * must be provided.\n   */\n    constructor(options) {\n        const declutter = 'declutter' in options ? options.declutter : true;\n        const source = new VectorTileSource({\n            state: 'loading',\n            format: new MVT()\n        });\n        super({\n            source: source,\n            background: options.background === false ? null : options.background,\n            declutter: declutter,\n            className: options.className,\n            opacity: options.opacity,\n            visible: options.visible,\n            zIndex: options.zIndex,\n            minResolution: options.minResolution,\n            maxResolution: options.maxResolution,\n            minZoom: options.minZoom,\n            maxZoom: options.maxZoom,\n            renderOrder: options.renderOrder,\n            renderBuffer: options.renderBuffer,\n            renderMode: options.renderMode,\n            map: options.map,\n            updateWhileAnimating: options.updateWhileAnimating,\n            updateWhileInteracting: options.updateWhileInteracting,\n            preload: options.preload,\n            useInterimTilesOnError: options.useInterimTilesOnError,\n            properties: options.properties\n        });\n        if (options.accessToken) {\n            this.accessToken = options.accessToken;\n        }\n        const url = options.styleUrl;\n        const promises = [applyStyle(this, url, options.layers || options.source, { accessToken: this.accessToken })];\n        if (this.getBackground() === undefined) {\n            promises.push(applyBackground(this, options.styleUrl, { accessToken: this.accessToken }));\n        }\n        Promise.all(promises).then(() => {\n            source.setState('ready');\n        }).catch(error => {\n            this.dispatchEvent(new ErrorEvent(error));\n            const source = this.getSource();\n            source.setState('error');\n        });\n    }\n}\n\nexport { MapboxVectorLayer, addMapboxLayer, apply, applyBackground, applyStyle, apply as default, getFeatureState, getLayer, getLayers, getMapboxLayer, getSource, getStyleForLayer, recordStyleLayer, removeMapboxLayer, renderTransparent, setFeatureState, stylefunction, updateMapboxLayer, updateMapboxSource };\n//# sourceMappingURL=index.js.map\n","// import openlayers\nimport VectorTileLayer from \"ol/layer/VectorTile\";\nimport VectorTileSource from \"ol/source/VectorTile\";\nimport TileJSONSource from \"ol/source/TileJSON\";\nimport MVT from \"ol/format/MVT\";\nimport { unByKey as observableUnByKey } from \"ol/Observable\";\n// import olms : module ES6\nimport { applyStyle } from \"ol-mapbox-style\";\n// import local\nimport Utils from \"../Utils/Helper\";\nimport Config from \"../Utils/Config\";\n\n/**\n* @classdesc\n* Geoportal Layer Mapbox creation\n*\n* @constructor\n* @extends {ol.layer.VectorTile}\n* @alias ol.layer.GeoportalMapBox\n* @type {ol.layer.GeoportalMapBox}\n* @param {Object} options            - options for function call.\n* @param {String} options.layer      - Layer name (e.g. \"PLAN.IGN\")\n* @param {Object} [options.configuration] - configuration (cf. example) \n* @param {String} [options.style]    - Style name (e.g. \"classique\")\n* @param {String} [options.source]   - Source name (e.g. \"plan_ign\")\n* @param {Boolean} [options.ssl]     - if set true, enforce protocol https (only for nodejs)\n* @param {Object} [settings] - other options for ol.layer.VectorTile function (see {@link https://openlayers.org/en/latest/apidoc/module-ol_layer_VectorTile-VectorTileLayer.html ol.layer.VectorTile})\n* @example\n* var LayerMapBox = new ol.layer.GeoportalMapBox({\n*      layer  : \"PLAN.IGN\",\n*      [style  : \"classique\",]\n*      [source : \"plan_ign\",]\n*      [ssl: true]\n* }, {\n*      opacity\n*      visible\n*      extent\n*      declutter\n*      ...\n* });\n* \n* // Ex. configuration object for TMS Layer\n* \"PLAN.IGN$GEOPORTAIL:GPP:TMS\": {\n*   \"hidden\": true,\n*   \"queryable\": false,\n*   \"serviceParams\": {\n*     \"id\": \"GPP:TMS\",\n*     \"version\": \"1.0.0\",\n*     \"serverUrl\": {\n*       \"cartes\": \"https://wxs.ign.fr/cartes/geoportail/tms/1.0.0/\"\n*     }\n*   },\n*   \"name\": \"PLAN.IGN\",\n*   \"title\": \"Plan IGN\",\n*   \"description\": \"BDUni tuilée\",\n*   \"formats\": [\n*     {\n*       \"current\": true,\n*       \"name\": \"application/x-protobuf\"\n*     }\n*   ],\n*   \"styles\": [\n*     {\n*       \"name\": \"standard\",\n*       \"title\": \"Style standard\",\n*       \"current\": true,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/standard.json\"\n*     },\n*     {\n*       \"name\": \"classique\",\n*       \"title\": \"Style classique\",\n*       \"current\": true,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/classique.json\"\n*     },\n*     {\n*       \"name\": \"transparent\",\n*       \"title\": \"Style transparent\",\n*       \"current\": true,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/transparent.json\"\n*     },\n*     {\n*       \"name\": \"accentue\",\n*       \"title\": \"Style accentue\",\n*       \"current\": true,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/accentue.json\"\n*     },\n*     {\n*       \"name\": \"attenue\",\n*       \"title\": \"Style attenue\",\n*       \"current\": true,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/attenue.json\"\n*     },\n*     {\n*       \"name\": \"gris\",\n*       \"title\": \"Style en noir et blanc\",\n*       \"current\": false,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/gris.json\"\n*     },\n*     {\n*       \"name\": \"epure\",\n*       \"title\": \"Style epure\",\n*       \"current\": true,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/epure.json\"\n*     },\n*     {\n*       \"name\": \"sans_toponymes\",\n*       \"title\": \"Style sans toponymes\",\n*       \"current\": false,\n*       \"url\": \"https://wxs.ign.fr/static/vectorTiles/styles/PLAN.IGN/essentiels/sans_toponymes.json\"\n*     }\n*   ],\n*   \"globalConstraint\": {\n*     \"crs\": null,\n*     \"bbox\": {\n*       \"left\": -724011.531917197,\n*       \"right\": 1095801.237496279,\n*       \"top\": 6672646.821182753,\n*       \"bottom\": 5009377.0856973175\n*     },\n*     \"minScaleDenominator\": null,\n*     \"maxScaleDenominator\": null\n*   },\n*   \"quicklookUrl\": \"https://wxs.ign.fr/static/pictures/ign_carte2.jpg\",\n*   \"layerId\": \"PLAN.IGN$GEOPORTAIL:GPP:TMS\",\n*   \"defaultProjection\": \"EPSG:3857\"\n* }\n*\n*/\nvar LayerMapBox = class LayerMapBox extends VectorTileLayer {\n    \n    /**\n     * See {@link ol.layer.GeoportalMapBox}\n     * @module LayerMapBox\n     * @alias module:~layers/GeoportalMapBox\n     * @param {*} options - options\n     * @param {*} [settings] - other settings\n     * @example\n     * import LayerMapBox from \"gpf-ext-ol/layers/LayerMapBox\"\n     * ou \n     * import { LayerMapBox } from \"gpf-ext-ol\"\n    */\n    constructor (options, settings) {\n        // if (!(this instanceof LayerMapBox)) {\n        //     throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        // }\n        \n        if (!options.layer) {\n            throw new Error(\"ERROR PARAM_MISSING : layer\");\n        }\n        \n        if (typeof options.layer !== \"string\") {\n            throw new Error(\"ERROR WRONG TYPE : layer\");\n        }\n        \n        // par defaut\n        if (typeof options.ssl === \"undefined\") {\n            options.ssl = true;\n        }\n        \n        // si ssl = false on fait du http\n        // par défaut, ssl = true, on fait du https\n        var protocol = options.ssl === false ? \"http://\" : \"https://\";\n        \n        // WARNING :\n        // on fait le choix de ne pas utiliser la clef apiKey pour checker \n        // les droits sur la ressource\n        // car le service n'est pas securisé...\n        \n        // configuration de la ressource\n        var layerCfg = options.configuration;\n\n        // 2 solutions pour la récupération des ressources utiles \n        // * soit depuis la configuration en option\n        // * soit via la variable globale Gp.Config chargée\n        if (!layerCfg) {\n            // Check if configuration is loaded\n            if (!Config.isConfigLoaded()) {\n                throw new Error(\"ERROR : contract key configuration has to be loaded to load Geoportal layers.\");\n            }\n\n            // id de la ressource\n            var layerId = options.layer + \"$GEOPORTAIL:GPP:TMS\";\n            \n            // récupération des ressources utiles depuis la configuration\n            layerCfg = Config.configuration.getLayerConf(layerId);\n            if (!layerCfg) {\n                throw new Error(\"ERROR : Layer ID not found into the catalogue !?\");\n            }\n        }\n\n        var styleUrl = null;\n        var styleTitle = \"\";\n        var styleName = options.style;\n        for (var i = 0; i < layerCfg.styles.length; i++) {\n            var style = layerCfg.styles[i];\n            // si le nom du style est en option, on le recherche...\n            // sinon, on recherche le style par defaut !\n            if (styleName && style.name === styleName) {\n                styleUrl = style.url;\n                styleTitle = style.title;\n                break;\n            } else {\n                if (!styleName && style.current) {\n                    styleName = style.name;\n                    styleUrl = style.url;\n                    styleTitle = style.title;\n                    break;\n                }\n            }\n        }\n        \n        if (!styleUrl) {\n            throw new Error(\"ERROR : Style URL not found !?\");\n        }\n        \n        styleUrl.replace(/(http|https):\\/\\//, protocol);\n        \n        // création de la source\n        var source = new VectorTileSource({\n            state : \"loading\", // statut\n            format : new MVT()\n        });\n        \n        source._originators = layerCfg.originators;\n        source._legends = layerCfg.legends;\n        source._metadata = layerCfg.metadata;\n        source._description = layerCfg.description;\n        source._title = layerCfg.title + \" (\" + styleTitle + \")\";\n        source._quicklookUrl = layerCfg.quicklookUrl;\n        \n        // options definies sur ol.layer.VectorTile\n        var layerVectorTileOptions = {\n            source : source\n        };\n        \n        // récupération des autres paramètres passés par l'utilisateur\n        Utils.mergeParams(layerVectorTileOptions, settings);\n        \n        // on surcharge les originators (non récupérés depuis configuration de la couche)\n        if (options.olParams && !layerCfg.originators) {\n            source._originators = options.olParams.attributions;\n        }\n        \n        // création d'une ol.layer.VectorTile avec les options récupérées ci-dessus.\n        super(layerVectorTileOptions);\n        \n        this.name = options.layer;\n        this.service = \"TMS\";\n        this.protocol = protocol;\n        this.sourceId = options.source;\n        this.styleUrl = styleUrl;\n        \n        // récuperation du style\n        this.setStyleMapBox();\n        \n        return this;\n    }\n    \n    /**\n     * Get Style MapBox\n     * @private\n     */\n    setStyleMapBox () {\n        var self = this;\n        fetch(this.styleUrl, {\n            credentials : \"same-origin\"\n        }).then(function (response) {\n            if (response.ok) {\n                response.json().then(function (style) {\n                    self.onStyleMapBoxLoad(style);\n                });\n            }\n        }).catch(function (e) {\n            self.onStyleMapBoxError(e);\n        });\n    };\n    \n    /**\n     * Add Style\n     * @param {*} style - json style\n     */\n    onStyleMapBoxLoad (style) {\n        // si on a plusieurs sources, on ne peut en prendre qu'une seule...\n        if (!this.sourceId) {\n            this.sourceId = Object.keys(style.sources)[0];\n        }\n        \n        var styleSource = style.sources[this.sourceId];\n        if (!styleSource) {\n            this.onStyleMapBoxError({\n                message : \"ERROR : Source ID not found !? !\"\n            });\n            return;\n        }\n        \n        if (styleSource.type !== \"vector\") {\n            this.onStyleMapBoxError({\n                message : \"ERROR : Source TYPE not permitted !\"\n            });\n            return;\n        }\n        \n        var source = this.getSource();\n        \n        // WARNING :\n        // la clef renseignée dans les urls n'est pas forcement la bonne\n        // car la substitution avec la clef utilisateur n'est pas faite par le service...\n        if (styleSource.url) {\n            // protocole : http ou https\n            styleSource.url.replace(/(http|https):\\/\\//, this.protocol);\n            \n            var vectorTileJson = new TileJSONSource({\n                url : styleSource.url\n            });\n            var self = this;\n            var key = vectorTileJson.on(\"change\", function () {\n                if (vectorTileJson.getState() === \"ready\") {\n                    var doc = vectorTileJson.getTileJSON();\n                    if (!doc) {\n                        return;\n                    }\n                    self.set(\"mapbox-extensions\", doc);\n                    var tiles = Array.isArray(doc.tiles) ? doc.tiles : [doc.tiles];\n                    // protocole : http ou https\n                    for (var i = 0; i < styleSource.tiles.length; i++) {\n                        tiles[i].replace(/(http|https):\\/\\//, this.protocol);\n                    }\n                    source.setUrls(tiles);\n                    observableUnByKey(key);\n                }\n            });\n        }\n        \n        if (styleSource.tiles) {\n            // protocole : http ou https\n            for (var j = 0; j < styleSource.tiles.length; j++) {\n                styleSource.tiles[j].replace(/(http|https):\\/\\//, this.protocol);\n            }\n            source.setUrls(styleSource.tiles);\n        }\n        \n        applyStyle(this, style, this.sourceId).then(() => {\n            source.setState(\"ready\");\n            this.set(\"mapbox-styles\", style);\n        }).catch((error) => {\n            this.onStyleMapBoxError(error);\n        });\n    };\n    \n    /**\n     * Error\n     * @param {*} error - message\n     */\n    onStyleMapBoxError (error) {\n        var source = this.getSource();\n        source.setState(\"error\");\n        // eslint-disable-next-line no-console\n        console.error(error.message);\n    };\n\n    /**\n     * Get legends\n     * @returns  {Array} - legends\n     */\n    getLegends () {\n        return this.getSource()._legends;\n    }\n\n    /**\n     * Get metadata\n     * @returns  {Array} - metadata\n     */\n    getMetadata () {\n        return this.getSource()._metadata;\n    }\n\n    /**\n     * Get description\n     * @returns {String} - description\n     */\n    getDescription () {\n        return this.getSource()._description;\n    }\n\n    /**\n     * Get title\n     * @returns {String} - title\n     */\n    getTitle () {\n        return this.getSource()._title;\n    }\n\n    /**\n     * Get quicklook url\n     * @returns {String} - quicklook\n     */\n    getQuicklookUrl () {\n        return this.getSource()._quicklookUrl;\n    }\n\n    /**\n     * Get originators\n     * @returns {Array} - originators\n     */\n    getOriginators () {\n        return this.getSource()._originators;\n    }\n    \n};\n\nexport default LayerMapBox;\n\n// Expose LayerMapBox as ol.layer.GeoportalMapBox. (for a build bundle)\nif (window.ol && window.ol.layer) {\n    window.ol.layer.GeoportalMapBox = LayerMapBox;\n}\n","// import openlayers\nimport {\n    get as olGetProj,\n    transformExtent as olTransformExtentProj\n} from \"ol/proj\";\nimport TileLayer from \"ol/layer/Tile\";\n// import local\nimport Utils from \"../Utils/Helper\";\nimport Config from \"../Utils/Config\";\n// import local with ol dependencies\nimport SourceWMS from \"./SourceWMS\";\n\n/**\n * @classdesc\n * Geoportal LayerWMS source creation (inherit from ol.layer.Tile)\n *\n * @constructor\n * @extends {ol.layer.Tile}\n * @alias ol.layer.GeoportalWMS\n * @type {ol.layer.GeoportalWMS}\n * @param {Object} options            - options for function call.\n * @param {String} options.layer      - Layer name (e.g. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n * @param {Object} [options.configuration] - configuration (cf. example) \n * @param {Boolean} [options.ssl]     - if set true, enforce protocol https (only for nodejs)\n * @param {String} [options.apiKey]   - Access key to Geoportal platform\n * @param {Object} [options.olParams] - other options for ol.layer.Tile function (see {@link http://openlayers.org/en/latest/apidoc/ol.layer.Tile.html ol.layer.Tile})\n * @param {Object} [options.olParams.sourceParams] - other options for ol.source.TileWMS function (see {@link http://openlayers.org/en/latest/apidoc/ol.source.TileWMS.html ol.source.TileWMS})\n * @example\n * var layerWMS = new ol.layer.GeoportalWMS({\n *      layer  : \"ORTHOIMAGERY.ORTHOPHOTOS\"\n * });\n * \n * layerWMS.getLegends();\n * layerWMS.getMetadata();\n * layerWMS.getTitle();\n * layerWMS.getDescription();\n * layerWMS.getQuicklookUrl();\n * layerWMS.getOriginators();\n */\nvar LayerWMS = class LayerWMS extends TileLayer {\n\n    /**\n     * See {@link ol.layer.GeoportalWMS}\n     * @module LayerWMS\n     * @alias module:~layers/GeoportalWMS\n     * @param {*} options - options\n     * @example\n     * import LayerWMS from \"gpf-ext-ol/layers/LayerWMS\"\n     * ou \n     * import { LayerWMS } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        // if (!(this instanceof LayerWMS)) {\n        //     throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        // }\n\n        if (!options.layer) {\n            throw new Error(\"ERROR PARAM_MISSING : layer\");\n        }\n\n        if (typeof options.layer !== \"string\") {\n            throw new Error(\"ERROR WRONG TYPE : layer\");\n        }\n\n        // par defaut\n        if (typeof options.ssl === \"undefined\") {\n            options.ssl = true;\n        }\n\n        // configuration de la ressource\n        var layerCfg = options.configuration;\n\n        // 2 solutions pour la récupération des ressources utiles \n        // * soit depuis la configuration en option\n        // * soit via la variable globale Gp.Config chargée\n        if (!layerCfg) {\n            // Check if configuration is loaded\n            if (!Config.isConfigLoaded()) {\n                throw new Error(\"ERROR : contract key configuration has to be loaded to load Geoportal layers.\");\n            }\n            // récupération des autres paramètres nécessaires à la création de la layer\n            var layerId = Config.configuration.getLayerId(options.layer, \"WMS\");\n            layerCfg = Config.configuration.getLayerConf(layerId);\n            if (!layerCfg) {\n                throw new Error(\"ERROR : Layer ID not found into the catalogue !?\");\n            }\n        }\n\n        // création de la source WMS\n        var olSourceParams;\n        if (options.olParams && options.olParams.sourceParams) {\n            olSourceParams = options.olParams.sourceParams;\n        }\n        var wmsSource = new SourceWMS({\n            layer : options.layer,\n            configuration : options.configuration,\n            ssl : options.ssl,\n            apiKey : options.apiKey,\n            olParams : olSourceParams\n        });\n\n        var layerTileOptions = {\n            source : wmsSource\n        };\n\n        // si le param LAYERS n'a pas été renseigné lors de la création de la source,\n        // c'est que l'identifiant de la couche n'a pas été trouvé. on passe donc la recherche des paramètres.\n        if (wmsSource.getParams().LAYERS !== undefined) {\n            /* INFO : on ne récupère l'emprise de la couche que lorsque que l'utilisateur spécifie la projection.\n               Si aucune projection n'est spécifiée, il faudrait spécifier l'emprise dans la projection de la carte (car OpenLayers reprojette),\n               mais on ne peut pas la récupérer à ce niveau. On ne spécifie donc aucune emprise.\n               Idem pour les résolutions : il faut connaitre l'unité de la projection (metres ou degrés) pour pouvoir calculer la résolution.\n            */\n            if (olSourceParams && olSourceParams.projection) {\n                // récupération de l'étendue (en EPSG:4326), et reprojection dans la proj spécifiée\n                var geobbox = [\n                    layerCfg.globalConstraints.extent.left,\n                    layerCfg.globalConstraints.extent.bottom,\n                    layerCfg.globalConstraints.extent.right,\n                    layerCfg.globalConstraints.extent.top\n                ];\n                layerTileOptions.extent = olTransformExtentProj(geobbox, \"EPSG:4326\", olSourceParams.projection);\n\n                // récupération des résolutions min et max\n                var p;\n                // on récupère tout d'abord la projection\n                if (typeof olSourceParams.projection === \"string\") {\n                    p = olGetProj(olSourceParams.projection);\n                } else if (typeof olSourceParams.projection === \"object\" && olSourceParams.projection.getCode()) {\n                    p = olGetProj(olSourceParams.projection.getCode());\n                }\n                // puis, selon l'unité de la projection, on calcule la résolution correspondante\n                if (p && p.getUnits()) {\n                    if (p.getUnits() === \"m\") {\n                        /* fixme : fix temporaire pour gérer les min/max scaledenominator qui sont arrondis dans la configuration !\n                         * on les arrondit respectivement à l'unité inférieure et supérieure\n                         * pour que les couches soient bien disponibles aux niveaux de zoom correspondants */\n                        // info : 1 pixel = 0.00028 m\n                        layerTileOptions.minResolution = (layerCfg.globalConstraints.minScale - 1) * 0.00028;\n                        layerTileOptions.maxResolution = (layerCfg.globalConstraints.maxScale + 1) * 0.00028;\n                    } else if (p.getUnits() === \"degrees\") {\n                        /* fixme : fix temporaire pour gérer les min/max scaledenominator qui sont arrondis dans la configuration !\n                         * on les arrondit respectivement à l'unité inférieure et supérieure\n                         * pour que les couches soient bien disponibles aux niveaux de zoom correspondants */\n                        // info : 6378137 * 2 * pi / 360 = rayon de la terre (ellipsoide WGS84)\n                        layerTileOptions.minResolution = (layerCfg.globalConstraints.minScale - 1) * 0.00028 * 180 / (Math.PI * 6378137);\n                        layerTileOptions.maxResolution = (layerCfg.globalConstraints.maxScale + 1) * 0.00028 * 180 / (Math.PI * 6378137);\n                    }\n                }\n            }\n        }\n        // récupération des autres paramètres passés par l'utilisateur\n        Utils.mergeParams(layerTileOptions, options.olParams);\n\n        // création d'une ol.layer.Tile avec les options récupérées ci-dessus.\n        super(layerTileOptions);\n\n        this.name = options.layer;\n        this.service = \"WMS\";\n        \n        return this;\n    }\n\n    /**\n     * Get legends\n     * @returns  {Array} - legends\n     */\n    getLegends () {\n        return this.getSource()._legends;\n    }\n\n    /**\n     * Get metadata\n     * @returns  {Array} - metadata\n     */\n    getMetadata () {\n        return this.getSource()._metadata;\n    }\n\n    /**\n     * Get description\n     * @returns {String} - description\n     */\n    getDescription () {\n        return this.getSource()._description;\n    }\n\n    /**\n     * Get title\n     * @returns {String} - title\n     */\n    getTitle () {\n        return this.getSource()._title;\n    }\n\n    /**\n     * Get quicklook url\n     * @returns {String} - quicklook\n     */\n    getQuicklookUrl () {\n        return this.getSource()._quicklookUrl;\n    }\n\n    /**\n     * Get originators\n     * @returns {Array} - originators\n     */\n    getOriginators () {\n        return this.getSource()._originators;\n    }\n\n};\n\nexport default LayerWMS;\n\n// Expose LayerWMS as ol.layerGeoportalWMS. (for a build bundle)\nif (window.ol && window.ol.layer) {\n    window.ol.layer.GeoportalWMS = LayerWMS;\n}\n","// import openlayers\nimport { get as olGetProj } from \"ol/proj\";\nimport TileLayer from \"ol/layer/Tile\";\n// import local\nimport Utils from \"../Utils/Helper\";\nimport Config from \"../Utils/Config\";\n// import local with ol dependencies\nimport SourceWMTS from \"./SourceWMTS\";\n\n/**\n* @classdesc\n* Geoportal LayerWMTS source creation (inherit from ol.layer.Tile)\n*\n* @constructor\n* @extends {ol.layer.Tile}\n* @alias ol.layer.GeoportalWMTS\n* @type {ol.layer.GeoportalWMTS}\n* @param {Object} options            - options for function call.\n* @param {String} options.layer      - Layer name (e.g. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n* @param {Object} [options.configuration] - configuration (cf. example) \n* @param {Boolean} [options.ssl]     - if set true, enforce protocol https (only for nodejs)\n* @param {String} [options.apiKey]   - Access key to Geoportal platform\n* @param {Object} [options.olParams] - other options for ol.layer.Tile function (see {@link http://openlayers.org/en/latest/apidoc/ol.layer.Tile.html ol.layer.Tile})\n* @param {Object} [options.olParams.sourceParams] - other options for ol.source.WMTS function (see {@link http://openlayers.org/en/latest/apidoc/ol.source.WMTS.html ol.source.WMTS})\n* @example\n* var layerWMTS = new ol.layer.GeoportalWMTS({\n*      layer  : \"ORTHOIMAGERY.ORTHOPHOTOS\"\n* });\n* layerWMTS.getLegends();\n* layerWMTS.getMetadata();\n* layerWMTS.getTitle();\n* layerWMTS.getDescription();\n* layerWMTS.getQuicklookUrl();\n* layerWMTS.getOriginators();\n* \n* // Ex. configuration object for WMTS Layer\n* {\n* \"name\" : \"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW\",\n* \"globalConstraint\" : {\n*     \"maxScaleDenominator\" : 279541132.01435894,\n*     \"minScaleDenominator\" : 2183915.0938621787,\n*     \"bbox\" : {\n*         \"left\" : -179.5,\n*         \"right\" : 179.5,\n*         \"top\" : 75,\n*         \"bottom\" : -75\n*     }\n* },\n* \"params\" : {\n*     \"url\" : \"https:*data.geopf.fr/wmts\",\n*     \"styles\" : \"normal\",\n*     \"version\" : \"1.0.0\",\n*     \"format\" : \"image/jpeg\",\n*     \"projection\" : \"EPSG:3857\",\n*     \"minScale\" : 2183915.0938621787,\n*     \"maxScale\" : 279541132.01435894,\n*     \"extent\" : {\n*         \"left\" : -179.5,\n*         \"right\" : 179.5,\n*         \"top\" : 75,\n*         \"bottom\" : -75\n*     },\n*     \"legends\" : [\n*         {\n*             \"format\" : \"image/jpeg\",\n*             \"url\" : \"https:*data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg\",\n*             \"minScaleDenominator\" : \"200\"\n*         }\n*     ],\n*     \"title\" : \"Carte Mondiale pour la mini-vue\",\n*     \"description\" : \"Carte Mondiale pour la mini-vue\",\n*     \"tileMatrixSetLimits\" : {\n*         \"1\" : {\n*             \"minTileRow\" : \"0\",\n*             \"maxTileRow\" : \"1\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"1\"\n*         },\n*         \"2\" : {\n*             \"minTileRow\" : \"0\",\n*             \"maxTileRow\" : \"3\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"3\"\n*         },\n*         \"3\" : {\n*             \"minTileRow\" : \"1\",\n*             \"maxTileRow\" : \"6\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"7\"\n*         },\n*         \"4\" : {\n*             \"minTileRow\" : \"2\",\n*             \"maxTileRow\" : \"13\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"15\"\n*         },\n*         \"5\" : {\n*             \"minTileRow\" : \"5\",\n*             \"maxTileRow\" : \"26\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"31\"\n*         },\n*         \"6\" : {\n*             \"minTileRow\" : \"11\",\n*             \"maxTileRow\" : \"52\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"63\"\n*         },\n*         \"7\" : {\n*             \"minTileRow\" : \"22\",\n*             \"maxTileRow\" : \"105\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"127\"\n*         },\n*         \"8\" : {\n*             \"minTileRow\" : \"45\",\n*             \"maxTileRow\" : \"210\",\n*             \"minTileCol\" : \"0\",\n*             \"maxTileCol\" : \"255\"\n*         }\n*     },\n*     \"TMSLink\" : \"PM_1_8\",\n*     \"matrixIds\" : [\n*         \"1\",\n*         \"2\",\n*         \"3\",\n*         \"4\",\n*         \"5\",\n*         \"6\",\n*         \"7\",\n*         \"8\"\n*     ],\n*     \"tileMatrices\" : {\n*         \"1\" : {\n*             \"matrixId\" : \"1\",\n*             \"matrixHeight\" : 2,\n*             \"matrixWidth\" : 2,\n*             \"scaleDenominator\" : 279541132.01435894,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"2\" : {\n*             \"matrixId\" : \"2\",\n*             \"matrixHeight\" : 4,\n*             \"matrixWidth\" : 4,\n*             \"scaleDenominator\" : 139770566.0071793,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"3\" : {\n*             \"matrixId\" : \"3\",\n*             \"matrixHeight\" : 8,\n*             \"matrixWidth\" : 8,\n*             \"scaleDenominator\" : 69885283.00358965,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"4\" : {\n*             \"matrixId\" : \"4\",\n*             \"matrixHeight\" : 16,\n*             \"matrixWidth\" : 16,\n*             \"scaleDenominator\" : 34942641.50179486,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"5\" : {\n*             \"matrixId\" : \"5\",\n*             \"matrixHeight\" : 32,\n*             \"matrixWidth\" : 32,\n*             \"scaleDenominator\" : 17471320.75089743,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"6\" : {\n*             \"matrixId\" : \"6\",\n*             \"matrixHeight\" : 64,\n*             \"matrixWidth\" : 64,\n*             \"scaleDenominator\" : 8735660.375448715,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"7\" : {\n*             \"matrixId\" : \"7\",\n*             \"matrixHeight\" : 128,\n*             \"matrixWidth\" : 128,\n*             \"scaleDenominator\" : 4367830.1877243575,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         },\n*         \"8\" : {\n*             \"matrixId\" : \"8\",\n*             \"matrixHeight\" : 256,\n*             \"matrixWidth\" : 256,\n*             \"scaleDenominator\" : 2183915.0938621787,\n*             \"tileHeight\" : 256,\n*             \"tileWidth\" : 256,\n*             \"topLeftCorner\" : {\n*                 \"x\" : -20037508.3427892,\n*                 \"y\" : 20037508.3427892\n*             }\n*         }\n*     },\n*     \"nativeResolutions\" : [\n*         \"78271.51696402048\",\n*         \"39135.75848201023\",\n*         \"19567.87924100512\",\n*         \"9783.939620502561\",\n*         \"4891.969810251280\",\n*         \"2445.984905125640\",\n*         \"1222.992452562820\",\n*         \"611.4962262814100\"\n*     ]\n* }\n*/\nvar LayerWMTS = class LayerWMTS extends TileLayer {\n    \n    /**\n    * See {@link ol.layer.GeoportalWMTS}\n    * @module LayerWMTS\n    * @alias module:~layers/GeoportalWMTS\n    * @param {*} options - options\n    * @example\n    * import LayerWMTS from \"gpf-ext-ol/layers/LayerWMTS\n    * ou \n    * import { LayerWMTS } from \"gpf-ext-ol\"\n    */\n    constructor (options) {\n        // if (!(this instanceof LayerWMTS)) {\n        //     throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        // }\n        \n        if (!options.layer) {\n            throw new Error(\"ERROR PARAM_MISSING : layer\");\n        }\n        \n        if (typeof options.layer !== \"string\") {\n            throw new Error(\"ERROR WRONG TYPE : layer\");\n        }\n        \n        // par defaut\n        if (typeof options.ssl === \"undefined\") {\n            options.ssl = true;\n        }\n        \n        // configuration de la ressource\n        var layerCfg = options.configuration;\n        \n        // 2 solutions pour la récupération des ressources utiles \n        // * soit depuis la configuration en option\n        // * soit via la variable globale Gp.Config chargée\n        if (!layerCfg) {\n            // Check if configuration is loaded\n            if (!Config.isConfigLoaded()) {\n                throw new Error(\"ERROR : contract key configuration has to be loaded to load Geoportal layers.\");\n            }\n            // récupération des autres paramètres nécessaires à la création de la layer\n            var layerId = Config.configuration.getLayerId(options.layer, \"WMTS\");\n            layerCfg = Config.configuration.getLayerConf(layerId);\n            if (!layerCfg) {\n                throw new Error(\"ERROR : Layer ID not found into the catalogue !?\");\n            }\n        }\n        \n        // création de la source WMTS\n        var olSourceParams;\n        if (options.olParams && options.olParams.sourceParams) {\n            olSourceParams = options.olParams.sourceParams;\n        }\n        var wmtsSource = new SourceWMTS({\n            layer : options.layer,\n            configuration : options.configuration,\n            ssl : options.ssl,\n            apiKey : options.apiKey,\n            olParams : olSourceParams\n        });\n        \n        var layerTileOptions = {\n            source : wmtsSource\n        };\n        \n        // si le param layer n'a pas été renseigné lors de la création de la source,\n        // c'est que l'identifiant de la couche n'a pas été trouvé. on passe donc la recherche des paramètres.\n        if (wmtsSource.getLayer() !== undefined) {\n            if (layerCfg.globalConstraints && layerCfg.globalConstraints.projection) {\n                /* INFO : désactivation temporaire de l'étendue, car certaines étendues (trop grandes ?)\n                provoquent quelques bugs d'affichage (zoom > 16 par exemple) */\n                // récupération de l'étendue (en EPSG:4326), et reprojection dans la proj de la couche\n                // var geobbox = [\n                //     layerCfg.globalConstraints.extent.left,\n                //     layerCfg.globalConstraints.extent.bottom,\n                //     layerCfg.globalConstraints.extent.right,\n                //     layerCfg.globalConstraints.extent.top\n                // ];\n                // layerTileOptions.extent = ol.proj.transformExtent(geobbox, \"EPSG:4326\", layerCfg.globalConstraints.projection);\n                \n                // récupération des résolutions min et max\n                var p;\n                // on récupère tout d'abord la projection\n                if (typeof layerCfg.globalConstraints.projection === \"string\") {\n                    p = olGetProj(layerCfg.globalConstraints.projection);\n                }\n                // puis, selon l'unité de la projection, on calcule la résolution correspondante\n                if (p && p.getUnits()) {\n                    if (p.getUnits() === \"m\") {\n                        /* fixme : fix temporaire pour gérer les min/max scaledenominator qui sont arrondis dans la configuration !\n                        * on les arrondit respectivement à l'unité inférieure et supérieure\n                        * pour que les couches soient bien disponibles aux niveaux de zoom correspondants */\n                        // info : 1 pixel = 0.00028 m\n                        layerTileOptions.minResolution = (layerCfg.globalConstraints.minScale - 1) * 0.00028;\n                        layerTileOptions.maxResolution = (layerCfg.globalConstraints.maxScale + 1) * 0.00028;\n                    } else if (p.getUnits() === \"degrees\") {\n                        /* fixme : fix temporaire pour gérer les min/max scaledenominator qui sont arrondis dans la configuration !\n                        * on les arrondit respectivement à l'unité inférieure et supérieure\n                        * pour que les couches soient bien disponibles aux niveaux de zoom correspondants */\n                        // info : 6378137 * 2 * pi / 360 = rayon de la terre (ellipsoide WGS84)\n                        layerTileOptions.minResolution = (layerCfg.globalConstraints.minScale - 1) * 0.00028 * 180 / (Math.PI * 6378137);\n                        layerTileOptions.maxResolution = (layerCfg.globalConstraints.maxScale + 1) * 0.00028 * 180 / (Math.PI * 6378137);\n                    }\n                }\n            }\n        }\n        \n        // récupération des autres paramètres passés par l'utilisateur\n        Utils.mergeParams(layerTileOptions, options.olParams);\n        \n        // création d'une ol.layer.Tile avec les options récupérées ci-dessus.\n        super(layerTileOptions);\n        \n        this.name = options.layer;\n        this.service = \"WMTS\";\n        \n        return this;\n    }\n    \n    /**\n     * Get legends\n     * @returns  {Array} - legends\n     */\n    getLegends () {\n        return this.getSource()._legends;\n    }\n\n    /**\n     * Get metadata\n     * @returns  {Array} - metadata\n     */\n    getMetadata () {\n        return this.getSource()._metadata;\n    }\n\n    /**\n     * Get description\n     * @returns {String} - description\n     */\n    getDescription () {\n        return this.getSource()._description;\n    }\n\n    /**\n     * Get title\n     * @returns {String} - title\n     */\n    getTitle () {\n        return this.getSource()._title;\n    }\n\n    /**\n     * Get quicklook url\n     * @returns {String} - quicklook\n     */\n    getQuicklookUrl () {\n        return this.getSource()._quicklookUrl;\n    }\n\n    /**\n     * Get originators\n     * @returns {Array} - originators\n     */\n    getOriginators () {\n        return this.getSource()._originators;\n    }\n    \n};\n\nexport default LayerWMTS;\n\n// Expose LayerWMTS as ol.layerGeoportalWMTS. (for a build bundle)\nif (window.ol && window.ol.layer) {\n    window.ol.layer.GeoportalWMTS = LayerWMTS;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.TileWMS;","import Gp from \"geoportal-access-lib\";\n// import OpenLayers\nimport TileWMSSource from \"ol/source/TileWMS\";\n// import local\nimport Utils from \"../Utils/Helper\";\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Config from \"../Utils/Config\";\n// package.json (extract version)\nimport Pkg from \"../../../package.json\";\n\nvar logger = Logger.getLogger(\"sourcewms\");\n\n/**\n * @classdesc\n * Geoportal tile WMS source creation (inherit from ol.source.TileWMS)\n *\n * @constructor\n * @alias ol.source.GeoportalWMS\n * @type {ol.source.GeoportalWMS}\n * @extends {ol.source.TileWMS}\n * @param {Object} options            - options for function call.\n * @param {String} options.layer      - Layer name (e.g. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n * @param {Object} [options.configuration] - configuration (cf. example) \n * @param {Boolean} [options.ssl]     - if set true, enforce protocol https (only for nodejs)\n * @param {String} [options.apiKey]   - Access key to Geoportal platform\n * @param {Array} [options.legends]   - Legends objects associated to the layer\n * @param {Array} [options.metadata]   - Metadata objects associated to the layer\n * @param {String} [options.title]   - title of the layer\n * @param {String} [options.description]   - description of the layer\n * @param {String} [options.quicklookUrl]   - quicklookUrl of the layer\n * @param {Object} [options.olParams] - other options for ol.source.TileWMS function (see {@link http://openlayers.org/en/latest/apidoc/ol.source.TileWMS.html ol.source.TileWMS})\n * @example\n * var sourceWMS = new ol.source.GeoportalWMS({\n *      layer  : \"ORTHOIMAGERY.ORTHOPHOTOS\"\n * });\n */\nvar SourceWMS = class SourceWMS extends TileWMSSource {\n\n    constructor (options) {\n        // if (!(this instanceof SourceWMS)) {\n        //     throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        // }\n\n        // check layer params\n        if (!options.layer) {\n            throw new Error(\"ERROR PARAM_MISSING : layer\");\n        }\n        if (typeof options.layer !== \"string\") {\n            throw new Error(\"ERROR WRONG TYPE : layer\");\n        }\n\n        // par defaut\n        if (typeof options.ssl === \"undefined\") {\n            options.ssl = true;\n        }\n\n        // configuration de la ressource\n        var layerCfg = options.configuration;\n        var wmsParams = (layerCfg) ? layerCfg.params : null;\n        var apiKey = options.apiKey;\n\n        // 2 solutions pour la récupération des ressources utiles \n        // * soit depuis la configuration en option\n        // * soit via la variable globale Gp.Config\n        if (!layerCfg) {\n            // Check if configuration is loaded\n            if (!Config.isConfigLoaded()) {\n                throw new Error(\"ERROR : contract key configuration has to be loaded to load Geoportal layers.\");\n            }\n\n            var layerId = Config.configuration.getLayerId(options.layer, \"WMS\");\n            if (!layerId) {\n                throw new Error(`ERROR : WMS Layer ID ${options.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);\n            }\n\n            layerCfg = Config.configuration.getLayerConf(layerId);\n            if (!layerCfg) {\n                throw new Error(\"ERROR : WMS Layer configuration cannot be found in Geoportal.\");\n            }\n\n            apiKey = Config.configuration.getLayerKey(layerId)[0];\n            wmsParams = Config.configuration.getLayerParams(options.layer, \"WMS\");\n        }\n\n        // si ssl = false on fait du http\n        // par défaut, ssl = true, on fait du https\n        var protocol = options.ssl === false ? \"http://\" : \"https://\";\n\n        var urlParams = {\n            \"gp-ol-ext\" : Pkg.olExtVersion || Pkg.version\n        };\n        if (wmsParams.url.includes(\"/private/\")) {\n            // si l'url est privée\n            // Ajout de la clef d'API fournie par l'utilisateur en prioritée\n            // ou récupérée depuis la configuration\n            var key = options.apiKey || apiKey;\n            if (!key) {\n                throw new Error(\"ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.\");\n            }\n            urlParams[\"apikey\"] = key;\n        }\n\n        var wmsSourceOptions = {\n            // tracker extension openlayers\n            // FIXME : gp-ext version en mode AMD\n            url : Gp.Helper.normalyzeUrl(wmsParams.url.replace(/(http|https):\\/\\//, protocol), urlParams, false),\n            params : {\n                SERVICE : \"WMS\",\n                LAYERS : options.layer,\n                VERSION : wmsParams.version,\n                STYLES : wmsParams.styles,\n                FORMAT : wmsParams.format\n            }\n            // ,\n            // attributions : [\n            //     new ol.Attribution({\n            //         html : \"<a class='gp-control-attribution-link' target='_blank' href='http://www.ign.fr'><img class='gp-control-attribution-image' src='http://wxs.ign.fr/static/logos/IGN/IGN.gif' title='Institut national de l\\'information géographique et forestière' style='height: 30px; width: 30px;'></a>\"\n            //     })\n            // ]\n        };\n\n        // récupération des autres paramètres passés par l'utilisateur\n        Utils.mergeParams(wmsSourceOptions, options.olParams);\n\n        // on surcharge les originators (non récupérés depuis configuration de la couche)\n        if (options.olParams && !wmsParams.originators) {\n            wmsParams.originators = options.olParams.attributions;\n        }\n\n        // returns a WMS object, that inherits from ol.source.TileWMS.\n        super(wmsSourceOptions);\n\n        // save originators (to be updated by Originators control)\n        this._originators = wmsParams.originators;\n\n        // save legends and metadata (to be added to LayerSwitcher control)\n        this._legends = options.legends || wmsParams.legends;\n        this._metadata = options.metadata || wmsParams.metadata;\n        this._title = options.title || wmsParams.title;\n        this._description = options.description || wmsParams.description;\n        this._quicklookUrl = options.quicklookUrl || wmsParams.quicklookUrl;\n\n        this.name = options.layer;\n        this.service = \"WMS\";\n\n        return this;\n    }\n\n};\n\nexport default SourceWMS;\n\n// Expose SourceWMS as ol.source.GeoportalWMTS. (for a build bundle)\nif (window.ol && window.ol.source) {\n    window.ol.source.GeoportalWMS = SourceWMS;\n}\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.tilegrid.WMTS;","/**\n* @module LayerUtils\n* @alias module:~utils/LayerUtils\n* @description\n* ...\n*\n* @example\n* import LayerUtils from \"gpf-ext-ol/utils/LayerUtils\"\n* ou \n* import {LayerUtils} from \"gpf-ext-ol\n\n* LayerUtils.getZoomLevelFromScaleDenominator();\n* LayerUtils.getAttributions();\n* LayerUtils.intersects();\n*/\nvar LayerUtils = {\n\n    /**\n     * Obtenir le ZoomLevel à partir du ScaleDenominator\n     * @function getZoomLevelFromScaleDenominator\n     * @param {Number} scaleDenominator - the scale denominator\n     * @param {String} crs - the crs\n     *\n     * @returns {Integer} zoom level\n     */\n    getZoomLevelFromScaleDenominator : function (scaleDenominator, crs) {\n        // ------------------------------------------------- //\n        // Code issu de l'API Geoportal/Catalogue/Config.js  //\n        // ------------------------------------------------- //\n        //     var configuration = Gp.Config;\n        //     var general = configuration.generalOptions;\n        //     var layers  = configuration.layersContext;\n        //\n        //     for (var tms in general.tileMatrixSets) {\n        //         var tileMatrixSet = general.tileMatrixSets[tms];\n        //         // IGN's WMTS bug : epsg:nnnn instead of EPSG:nnnn\n        //         var crs = tileMatrixSet.supportedCRS = tileMatrixSet.supportedCRS.replace(/epsg/,\"EPSG\");\n        //\n        //         if (!Geoportal.Catalogue.CRSRESOLUTIONS.hasOwnProperty(crs)) {\n        //             var p= new OpenLayers.Projection(crs);\n        //             Geoportal.Catalogue.CRSRESOLUTIONS[crs]= [];\n        //             var matrixIds= tileMatrixSet.matrixIds;\n        //             for (var i= 0, li= matrixIds.length; i<li; ++i) {\n        //                 var mid= matrixIds[i];\n        //                 Geoportal.Catalogue.CRSRESOLUTIONS[crs].push(\n        //                     0.00028*mid.scaleDenominator\n        //                     /(OpenLayers.METERS_PER_INCH*OpenLayers.INCHES_PER_UNIT[p.getUnits()]));\n        //                     mid.supportedCRS= mid.supportedCRS.replace(/epsg/,\"EPSG\");\n        //                 }\n        //                 Geoportal.Catalogue.CRSRESOLUTIONS[crs].sort(function (a,b){ return b-a; });\n        //             }\n        //         }\n        //         var llR= Geoportal.Catalogue.CRSRESOLUTIONS['CRS:84'];\n        //         if (!llR) {\n        //             llR= Geoportal.Catalogue.CRSRESOLUTIONS['CRS:84']= general.resolutions.slice();\n        //         }\n        //         var wmR= Geoportal.Catalogue.CRSRESOLUTIONS['EPSG:3857'];\n        //         if (!wmR) {//FIXME : should never happened !!\n        //             // reproject resolutions from CRS84 to WebMercator (transform resolutions from degree/px to meter/px)\n        //             wmR= Geoportal.Catalogue.CRSRESOLUTIONS['EPSG:3857']= new Array(llR.length);\n        //             for (var i= 0, len= llR.length; i<len; i++) {\n        //                 var pt= new OpenLayers.LonLat(llR[i], 0);\n        //                 pt.transform(OpenLayers.Projection.CRS84, OpenLayers.Projection.WebMercator);\n        //                 wmR[i]= pt.lon;\n        //             }\n        //         }\n        //         Geoportal.Catalogue.RESOLUTIONS= wmR;\n        //\n        //         var getResolutionsFromCRS= function(crs) {\n        //             if (OpenLayers.Projection.WebMercator.isAliasOf(crs)) {\n        //                 return wmR;\n        //             }\n        //             if (OpenLayers.Projection.CRS84.isAliasOf(crs)) {\n        //                 return llR;\n        //             }\n        //             return Geoportal.Catalogue.CRSRESOLUTIONS[crs]?Geoportal.Catalogue.CRSRESOLUTIONS[crs]:null ;\n        //         };\n        //\n        //         var retrieveZoomFromResolution= function(resolutions, resolution) {\n        //             for (var i= 0, li= resolutions.length; i<li; i++) {\n        //                 if (resolutions[i]-resolution <= resolutions[li-1]) {\n        //                     return i;\n        //                 }\n        //             }\n        //             return -1;\n        //         };\n        //\n        //         var getZoomLevelFromScaleDenominator= function(scaleDenominator,crs) {\n        //             var resolution= scaleDenominator * 0.00028;\n        //             var R= getResolutionsFromCRS(crs);\n        //             if (R) {\n        //                 return retrieveZoomFromResolution(R,resolution);\n        //             }\n        //             resolution= resolution/(OpenLayers.METERS_PER_INCH * OpenLayers.INCHES_PER_UNIT[\"degrees\"]);\n        //             return retrieveZoomFromResolution(llR,resolution);\n        //         };\n        //\n        //         var getZoomLevelFromResolution= function(resolution,crs){\n        //             var R= getResolutionsFromCRS(crs);\n        //             if (R) {\n        //                 return retrieveZoomFromResolution(R,resolution);\n        //             }\n        //             var pt0= new OpenLayers.LonLat(0, 0);\n        //             var pt1= new OpenLayers.LonLat(1, 0);\n        //             pt0.transform(new OpenLayers.Projection(crs),OpenLayers.Projection.CRS84);\n        //             pt1.transform(new OpenLayers.Projection(crs),OpenLayers.Projection.CRS84);\n        //             resolution= resolution*(Math.abs(pt1.lon-pt0.lon));\n        //             return retrieveZoomFromResolution(llR,resolution);\n        //         };\n\n        // par defaut, on utilise la projection WebMercator (EPSG:3857 = PM)\n        // soit la liste des resolutions natives\n        var resolutionsNatives = {};\n        switch (crs) {\n            case \"EPSG:2154\":\n                resolutionsNatives = {\n                    0 : 104579.224549894,\n                    1 : 52277.5323537905,\n                    2 : 26135.4870785954,\n                    3 : 13066.8913818,\n                    4 : 6533.2286041135,\n                    5 : 3266.5595244627,\n                    6 : 1633.2660045974,\n                    7 : 816.629554986,\n                    8 : 408.3139146768,\n                    9 : 204.1567415109,\n                    10 : 102.0783167832,\n                    11 : 51.0391448966,\n                    12 : 25.5195690743,\n                    13 : 12.7597836936,\n                    14 : 6.379891636,\n                    15 : 3.1899457653,\n                    16 : 1.5949728695,\n                    17 : 0.7974864315,\n                    18 : 0.3987432149,\n                    19 : 0.1993716073,\n                    20 : 0.0996858037,\n                    21 : 0.0498429018\n                };\n                break;\n            default:\n                resolutionsNatives = {\n                    0 : 156543.033928041,\n                    1 : 78271.51696402048,\n                    2 : 39135.758482010235,\n                    3 : 19567.87924100512,\n                    4 : 9783.93962050256,\n                    5 : 4891.96981025128,\n                    6 : 2445.98490512564,\n                    7 : 1222.99245256282,\n                    8 : 611.49622628141,\n                    9 : 305.7481131407048,\n                    10 : 152.8740565703525,\n                    11 : 76.43702828517624,\n                    12 : 38.21851414258813,\n                    13 : 19.10925707129406,\n                    14 : 9.554628535647032,\n                    15 : 4.777314267823516,\n                    16 : 2.388657133911758,\n                    17 : 1.194328566955879,\n                    18 : 0.5971642834779395,\n                    19 : 0.2985821417389697,\n                    20 : 0.1492910708694849,\n                    21 : 0.0746455354347424\n                };\n                break;\n        }\n\n        // gestion des autres SRS\n        // TODO\n        // if (crs) {\n        // }\n\n        var resolution = scaleDenominator * 0.00028;\n\n        for (var index in resolutionsNatives) {\n            if (resolutionsNatives.hasOwnProperty(index)) {\n                if (resolutionsNatives[index] <= resolution) {\n                    index = parseInt(index, 10);\n                    return index;\n                }\n            }\n        }\n\n        return 0; // -1 ?\n    },\n\n    /**\n     * Get attributions list for a layer, based on current zoom and extent\n     *\n     * @function getAttributions\n     * @param {Object} params - function params\n     * @param {Array.<Float>} params.extent - map current geographical extent (EPSG:4326) : [top, left, bottom, right] = [maxy, minx, miny, maxx]\n     * @param {Number} params.zoom - map current zoom\n     * @param {String} params.crs - map current projection code (ex \"EPSG:2154\")\n     * @param {Boolean} params.visibility - layer visibility\n     * @param {Gp.Services.Config.Originator} params.originators - resource originators (from Gp.Config.layers[].originators)\n     * @returns {Object} attributions - associative array, mapping originators url (keys) with their properties : html attributions elements\n     */\n    getAttributions : function (params) {\n        var zoom = params.zoom;\n\n        var attributions = [];\n\n        if (params.originators != null && params.visibility) {\n            // drawLogo = boolean, true if attribution should be displayed (zoom, extent), false otherwise\n            var drawLogo;\n            for (var j = 0, jl = params.originators.length; j < jl; j++) {\n                drawLogo = true;\n                var originator = params.originators[j];\n\n                var constraints = params.originators[j].constraints || [];\n                for (var k = 0, kl = constraints.length; k < kl; k++) {\n                    var constraint = constraints[k];\n                    drawLogo = true;\n\n                    var minZoomLevel = this.getZoomLevelFromScaleDenominator(constraint.maxScaleDenominator, params.crs);\n                    var maxZoomLevel = this.getZoomLevelFromScaleDenominator(constraint.minScaleDenominator, params.crs) || 21;\n\n                    // min zoom constraints\n                    if (minZoomLevel && (minZoomLevel > zoom)) {\n                        drawLogo = false;\n                    }\n\n                    // max zoom constraints\n                    if (drawLogo && maxZoomLevel && (maxZoomLevel < zoom)) {\n                        drawLogo = false;\n                    }\n\n                    // bbox constraints\n                    var bbox = constraint.bbox;\n                    if (drawLogo && bbox) {\n                        drawLogo = false;\n                        var viewExtent = params.extent;\n                        if (viewExtent) {\n                            var bounds = [bbox.top, bbox.left, bbox.bottom, bbox.right];\n                            if (this.intersects(viewExtent, bounds)) {\n                                // at least one constraint matches the map ones\n                                drawLogo = true;\n                                break;\n                            }\n                        }\n                    }\n                }\n\n                if (drawLogo) {\n                    // on a un originator qui correspond au zoom et à l'étendue.\n\n                    var logo = originator.logo;\n                    var url = originator.url;\n                    var name = originator.name ? originator.name : \"\";\n                    var text = originator.attribution;\n\n                    var container = document.createElement(\"div\");\n                    container.className = \"gp-control-attribution\";\n\n                    // on crée un lien dans tous les cas (même s'il ne pointe pas vers une référence), pour avoir accès à la class CSS (pour surcharge)\n                    var link = null;\n                    link = document.createElement(\"a\");\n                    link.className = \"gp-control-attribution-link\";\n                    link.target = \"_blank\";\n                    container.appendChild(link);\n                    if (url) {\n                        link.href = url;\n                    }\n\n                    var bImage = !!(logo);\n                    var image = null;\n                    // si on a un logo, on l'affiche à l'interieur du lien\n                    if (bImage) {\n                        image = document.createElement(\"img\");\n                        if (link) {\n                            image.className = \"gp-control-attribution-image\";\n                            link.appendChild(image);\n                        } else {\n                            image.className = \"\";\n                            container.appendChild(image);\n                        }\n                        image.src = logo;\n                        image.title = text || name;\n                        image.style.height = \"30px\";\n                        image.style.width = \"30px\";\n                    } else {\n                        // sinon, on affiche le nom de l'originator, ou sa description ou l'url.\n                        if (name) {\n                            link.textContent = name;\n                        } else if (text) {\n                            link.textContent = text;\n                        } else if (url) {\n                            link.textContent = url;\n                        } else {\n                            link.textContent = \"\";\n                        }\n                    }\n\n                    attributions.push(container.innerHTML + \" \");\n                }\n            }\n        }\n\n        return attributions;\n    },\n\n    /**\n     * Determines if one extent (extent1) intersects another (extent2)\n     *\n     * @function intersects\n     * @param {Array.<Float>} extent1 - First extent : [top, left, bottom, right] = [maxy, minx, miny, maxx]\n     * @param {Array.<Float>} extent2 - Second extent : [top, left, bottom, right] = [maxy, minx, miny, maxx]\n     * @return {Boolean} intersects - True if the two extents intersect, false otherwise.\n     */\n    intersects : function (extent1, extent2) {\n        var intersectsX = (extent1[1] <= extent2[3]) && (extent2[1] <= extent1[3]);\n        var intersectsY = (extent1[2] <= extent2[0]) && (extent2[2] <= extent1[0]);\n        return intersectsX && intersectsY;\n    }\n};\n\nexport default LayerUtils;\n","import Gp from \"geoportal-access-lib\";\n// import OpenLayers\nimport WMTSTileGrid from \"ol/tilegrid/WMTS\";\n// import local with ol dependencies\nimport WMTSExtended from \"../Sources/WMTS\";\n// import local\nimport Utils from \"../Utils/Helper\";\nimport LayerUtils from \"../Utils/LayerUtils\";\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Config from \"../Utils/Config\";\n// package.json (extract version)\nimport Pkg from \"../../../package.json\";\n\nvar logger = Logger.getLogger(\"sourcewmts\");\n\n/**\n * @classdesc\n * Geoportal WMTS source creation (inherit from ol.source.WMTS)\n *\n * @constructor\n * @alias ol.source.GeoportalWMTS\n * @type {ol.source.GeoportalWMTS}\n * @extends {WMTSExtended}\n * @param {Object} options            - options for function call.\n * @param {String} options.layer      - Layer name (e.g. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n * @param {Object} [options.configuration] - configuration (cf. example) \n * @param {Boolean} [options.ssl]     - if set true, enforce protocol https (only for nodejs)\n * @param {String} [options.apiKey]   - Access key to Geoportal platform\n * @param {Array} [options.legends]   - Legends objects associated to the layer\n * @param {Array} [options.metadata]   - Metadata objects associated to the layer\n * @param {String} [options.title]   - title of the layer\n * @param {String} [options.description]   - description of the layer\n * @param {String} [options.quicklookUrl]   - quicklookUrl of the layer\n * @param {Object} [options.olParams] - other options for ol.source.WMTS function (see {@link http://openlayers.org/en/latest/apidoc/ol.source.WMTS.html ol.source.WMTS})\n * @example\n * var sourceWMTS = new ol.source.GeoportalWMTS({\n *      layer  : \"ORTHOIMAGERY.ORTHOPHOTOS\"\n * });\n */\nvar SourceWMTS = class SourceWMTS extends WMTSExtended {\n\n    constructor (options) {\n        // if (!(this instanceof SourceWMTS)) {\n        //     throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        // }\n\n        // check layer params\n        if (!options.layer) {\n            throw new Error(\"ERROR PARAM_MISSING : layer\");\n        }\n        if (typeof options.layer !== \"string\") {\n            throw new Error(\"ERROR WRONG TYPE : layer\");\n        }\n\n        // par defaut\n        if (typeof options.ssl === \"undefined\") {\n            options.ssl = true;\n        }\n\n        // configuration de la ressource\n        var layerCfg = options.configuration;\n        var wmtsParams = (layerCfg) ? layerCfg.params : null;\n        var apiKey = options.apiKey;\n        \n        // 2 solutions pour la récupération des ressources utiles \n        // * soit depuis la configuration en option\n        // * soit via la variable globale Gp.Config\n        if (!layerCfg) {\n            // Check if configuration is loaded\n            if (!Config.isConfigLoaded()) {\n                throw new Error(\"ERROR : contract key configuration has to be loaded to load Geoportal layers.\");\n            }\n\n            var layerId = Config.configuration.getLayerId(options.layer, \"WMTS\");\n            if (!layerId) {\n                throw new Error(`ERROR : WMTS Layer ID ${options.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);\n            }\n\n            layerCfg = Config.configuration.getLayerConf(layerId);\n            if (!layerCfg) {\n                throw new Error(\"ERROR : WMTS Layer configuration cannot be found in Geoportal.\");\n            }\n\n            apiKey = Config.configuration.getLayerKey(layerId)[0];\n            wmtsParams = Config.configuration.getLayerParams(options.layer, \"WMTS\");\n        }\n\n        // si ssl = false on fait du http\n        // par défaut, ssl = true, on fait du https\n        var protocol = options.ssl === false ? \"http://\" : \"https://\";\n\n        var urlParams = {\n            \"gp-ol-ext\" : Pkg.olExtVersion || Pkg.version\n        };\n        if (wmtsParams.url.includes(\"/private/\")) {\n            // si l'url est privée\n            // Ajout de la clef d'API fournie par l'utilisateur en prioritée\n            // ou récupérée depuis la configuration\n            var key = options.apiKey || apiKey;\n            if (!key) {\n                throw new Error(\"ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.\");\n            }\n            urlParams[\"apikey\"] = key;\n        }\n\n        var wmtsSourceOptions = {\n            // tracker extension openlayers\n            // FIXME : gp-ext version en mode AMD\n            url : Gp.Helper.normalyzeUrl(wmtsParams.url.replace(/(http|https):\\/\\//, protocol), urlParams, false),\n            version : wmtsParams.version,\n            style : wmtsParams.styles,\n            format : wmtsParams.format,\n            projection : wmtsParams.projection,\n            maxZoom : LayerUtils.getZoomLevelFromScaleDenominator(wmtsParams.minScale),\n            layer : options.layer,\n            matrixSet : wmtsParams.TMSLink,\n            tileGrid : new WMTSTileGrid({\n                resolutions : wmtsParams.nativeResolutions,\n                matrixIds : wmtsParams.matrixIds,\n                origin : [Object.values(wmtsParams.tileMatrices)[0].topLeftCorner.x, Object.values(wmtsParams.tileMatrices)[0].topLeftCorner.y]\n            })\n        };\n\n        // récupération des autres paramètres passés par l'utilisateur\n        Utils.mergeParams(wmtsSourceOptions, options.olParams);\n\n        // on surcharge les originators (non récupérés depuis configuration de la couche)\n        if (options.olParams && !wmtsParams.originators) {\n            wmtsParams.originators = options.olParams.attributions;\n        }\n        \n        // returns a WMTS object, that inherits from WMTSExtended.\n        super(wmtsSourceOptions);\n\n        // add originators to layer source (to be updated by Originators control)\n        this._originators = wmtsParams.originators;\n\n        // add legends and metadata (to be added to LayerSwitcher control)\n        this._legends = options.legends || wmtsParams.legends;\n        this._metadata = options.metadata || wmtsParams.metadata;\n        this._description = options.description || wmtsParams.description;\n        this._title = options.title || wmtsParams.title;\n        this._quicklookUrl = options.quicklookUrl || wmtsParams.quicklookUrl;\n\n        this.name = options.layer;\n        this.service = \"WMTS\";\n        \n        return this;\n    }\n\n};\n\nexport default SourceWMTS;\n\n// Expose SourceWMTS as ol.source.GeoportalWMTS. (for a build bundle)\nif (window.ol && window.ol.source) {\n    window.ol.source.GeoportalWMTS = SourceWMTS;\n}\n","/**\n * Gestion du service de recherche de couches\n * @see https://geoservices.ign.fr/documentation/services/services-geoplateforme/service-geoplateforme-de-recherche\n */\n\n\n/** resultats du service */\nlet m_suggestions = [];\n\n/** gestion annulation du fetch */\nlet controller = new AbortController();\n\n/** index de recherche */\nlet m_index = \"geoplateforme\";\n\n/** liste des champs de recherche */\nlet m_fields = \"title,layer_name\";\n\n/** nombre de suggestions du service */\nlet m_size = \"1000\";\n\n/** nombre maximum de réponses */\nlet m_maximumResponses = 5;\n\n/** liste des filtres sur les services */\nlet m_filterByService = [\"WMTS\", \"TMS\"];\n\n/** liste des couches à exclure avec ces projections */\nlet m_filterByProjection = [];\n\n/** filtres les services uniquement en TMS */\nlet m_filterByTMS = [\n    \"ADMIN_EXPRESS\",\n    \"ISOHYPSE\",\n    \"PLAN.IGN\",\n    \"OCSGE_2016\",\n    \"OCSGE_2019\",\n    \"PCI\",\n    \"BDTOPO\"\n];\n\n/** url du service (template avec ${m_index}) */\nlet m_url = `https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;\n\n/**\n * Interface pour les evenements\n * @example\n * target.dispatchEvent(new CustomEvent(\"myEvent\", { detail : {} }));\n * target.addEventListener(\"myEvent\", handler);\n */\nconst target = new EventTarget();\n\n/**\n * Appel du service de recherche\n * @param {*} text - recherche\n * @returns {Object} json\n * @fire suggest\n */\nconst suggest = async (text) => {\n    // ex. request\n    // https://data.geopf.fr/recherche/api/indexes/geoplateforme/suggest?text=ORTHO&fields=title\n    clear();\n\n    controller = new AbortController();\n\n    let url = new URL(m_url);\n    let params = {\n        text : text,\n        fields : m_fields,\n        size : m_size\n    };\n\n    Object.keys(params).forEach(key => url.searchParams.append(key, params[key]));\n\n    var response = await fetch(url, {\n        // FIXME\n        // signal : controller.signal\n    });\n\n    var results = await response.json();\n\n    if (response.status !== 200) {\n        throw new Error(response.message);\n    }\n\n    // ex. response\n    // [\n    //   {\n    //     \"index\": \"geoplateforme\",\n    //     \"score\": 3.4832718,\n    //     \"source\": {\n    //       \"id\": \"fc2af911-d9c2-4fc8-aee7-46034eebf821\",\n    //       \"offering_id\": \"faa4c69c-d03b-4502-af87-7f3667411321\",\n    //       \"index_name\": \"geoplateforme\",\n    //       \"layer_name\": \"nl_bdtopo_allauch\",\n    //       \"title\": \"NL - BD Topo : Allauch\",\n    //       \"description\": \"Extrait de BD TOPo sur Allauch\",\n    //       \"type\": \"WMS\",\n    //       \"url\": \"https://data.geopf.fr/wms-v?service=WMS&version=1.3.0&request=GetMap&layers=nl_bdtopo_allauch&bbox={xmin},{ymin},{xmax},{ymax}&styles={styles}&width={width}&height={height}&srs={srs}&format={format}\",\n    //       \"open\": true,\n    //       \"publication_date\": \"2023-11-27\",\n    //       \"keywords\": [\n    //         \"BDTOPO\",\n    //         \"Recette\"\n    //       ],\n    //       \"extent\": {},\n    //       \"metadata_urls\": [],\n    //       \"srs\": [\n    //         \"EPSG:2154\"\n    //       ]\n    //     }\n    //   }\n    // ]\n    if (!results || results.length === 0) {\n        return;\n    }\n\n    for (let i = 0; i < results.length; i++) {\n        const result = results[i];\n        var services = (m_filterByService.length === 0 || m_filterByService.includes(result.source.type));\n        if (services) {\n            if (unique().length >= m_maximumResponses) {\n                break;\n            }\n            // FIXME champs possibles mais pas toujours remplis : \n            // srs[], attributions{}, extent{}, metada_url[]\n            var o = {\n                originators : result.source.attributions,\n                srs : result.source.srs,\n                metadata : result.source.metadata_url,\n                name : result.source.layer_name,\n                title : result.source.title,\n                description : result.source.description,\n                service : result.source.type,\n                url : result.source.url\n            };\n            if (m_filterByTMS.length) {\n                if ((o.service === \"WMTS\" && m_filterByTMS.includes(o.name)) ||\n                    (o.service === \"TMS\" && !m_filterByTMS.includes(o.name))) {\n                    continue;\n                }\n            }\n            if (m_filterByProjection.length) {\n                // FIXME Array !?\n                if (m_filterByProjection.includes(o.srs[0])) {\n                    continue;\n                }\n            }\n            m_suggestions.push(o);\n        }\n    }\n\n    target.dispatchEvent(\n        new CustomEvent(\"suggest\", {\n            bubbles : true,\n            detail : getSuggestions()\n        })\n    );\n\n    return getSuggestions();\n};\n\nconst unique = () => {\n    return m_suggestions.filter((value, index, self) =>\n        index === self.findIndex((t) => (\n            t.service === value.service &&\n            t.name === value.name &&\n            t.title === value.title &&\n            t.description === value.description\n        ))\n    );\n};\n\nconst clear = () => {\n    controller.abort();\n    m_suggestions = [];\n};\n\n// getter (reponse)\nconst getSuggestions = () => {\n    return unique();\n};\nconst getNames = () => {\n    return unique().map((o) => { return o.name; });\n};\nconst getTitles = () => {\n    return unique().map((o) => { return o.title; });\n};\n\n// setter (conf)\nconst setIndex = (value) => {\n    m_index = value;\n};\nconst setFields = (value) => {\n    m_fields = value;\n};\nconst setSize = (value) => {\n    m_size = parseInt(value);\n};\nconst setUrl = (value) => {\n    m_url = eval(\"`\" + value + \"`\"); // insecure !\n};\nconst setMaximumResponses = (value) => {\n    m_maximumResponses = parseInt(value);\n};\n/**\n * Filtre sur la liste des services à selectionner\n * @param {Array} value - liste de service\n */\nconst setFiltersByService = (value) => {\n    m_filterByService = value === \"\" ? [] : value.split(\",\");\n};\n/**\n * Filtre sur les couches à exclure\n * @param {Array} value - liste des projections \n */\nconst setFiltersByProjection = (value) => {\n    m_filterByProjection = value === \"\" ? [] : value.split(\",\");\n};\n/**\n * Filtre sur les \"purs\" couches vecteurs tuilés\n * @param {Array} value - liste des couches\n */\nconst setFiltersByTMS = (value) => {\n    m_filterByTMS = value === \"\" ? [] : value.split(\",\");\n};\n/**\n * Mise à jour de la liste des \"purs\" couches vecteurs tuilés\n * @param {String} value - url\n */\nconst updateFilterByTMS = async (value) => {\n    var url = value;\n    if (!url) {\n        url = \"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json\";\n    }\n    const response = await fetch(url);\n    const results = await response.json();\n\n    if (response.status !== 200) {\n        throw new Error(response.message);\n    }\n\n    if (!results) {\n        throw new Error(\"Liste vide !\");\n    }\n\n    var lstName = Object.keys(results.layers).map((k) => { return k.split(\"$\")[0]; });\n    if (lstName) {\n        setFiltersByTMS(lstName.toString());\n    }\n\n    return m_filterByTMS;\n};\n\nexport default {\n    target,\n    suggest,\n    clear,\n    getSuggestions,\n    getNames,\n    getTitles,\n    setIndex,\n    setFields,\n    setSize,\n    setUrl,\n    setMaximumResponses,\n    setFiltersByService,\n    setFiltersByTMS,\n    updateFilterByTMS,\n    setFiltersByProjection\n};\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.source.WMTS;","// import OpenLayers\nimport WMTSSource from \"ol/source/WMTS\";\nimport {\n    extend,\n    createEmpty as olCreateEmpty,\n    getWidth as olGetWidth,\n    intersects as olIntersects\n} from \"ol/extent\";\n// import geoportal library access\nimport Gp from \"geoportal-access-lib\";\n// import local\nimport Utils from \"../Utils/Helper\";\n\n/**\n * @classdesc\n *\n * Extended ol.source.WMTS.\n *\n * @constructor\n * @alias ol.source.WMTSExtended\n * @type {ol.source.WMTS}\n * @extends {ol.source.WMTS}\n * @param {Object} options - Options\n */\nvar WMTS = class WMTS extends WMTSSource {\n\n    constructor (options) {\n        // if (!(this instanceof WMTS)) {\n        //     throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        // }\n\n        // call constructor\n        super(options);\n    }\n\n    /**\n     * Return the GetFeatureInfo URL for the passed coordinate, resolution, and\n     * projection. Return `undefined` if the GetFeatureInfo URL cannot be\n     * constructed.\n     * @param {ol.Coordinate} coordinate - Coordinate.\n     * @param {Number} resolution - Resolution.\n     * @param {ol.proj.Projection} projection - Projection.\n     * @param {!Object} params - GetFeatureInfo params. `INFOFORMAT` at least should\n     *     be provided.\n     * @return {String|undefined} GetFeatureInfo URL.\n     */\n    getFeatureInfoUrl (coordinate, resolution, projection, params) {\n        // INFO\n        // en fonction de la version d'openlayers, la méthode est differente :\n        // - getGetFeatureInfoUrl en v5\n        // - getFeatureInfoUrl en v6\n        var pixelRatio = (this.options && this.options.tilePixelRatio) ? this.options.tilePixelRatio : 1;\n\n        var tileGrid = this.tileGrid;\n        var tileCoord = this.tileGrid.getTileCoordForCoordAndResolution(coordinate, resolution);\n\n        // this code is duplicated from createFromWMTSTemplate function\n        var getTransformedTileCoord = function (tileCoord, tileGrid, projection) {\n            var tmpTileCoord = [0, 0, 0]; /* Note : [z(zoomLevel),x,y] */\n            var tmpExtent = olCreateEmpty();\n            var x = tileCoord[1];\n            var y = tileCoord[2];\n            var tileExtent = tileGrid.getTileCoordExtent(tileCoord);\n            var extent = projection.getExtent();\n\n            if (extent != null && projection.isGlobal()) {\n                var numCols = Math.ceil(olGetWidth(extent) / olGetWidth(tileExtent));\n                x = x % numCols;\n                tmpTileCoord[0] = tileCoord[0];\n                tmpTileCoord[1] = x;\n                tmpTileCoord[2] = tileCoord[2];\n                tileExtent = tileGrid.getTileCoordExtent(tmpTileCoord, tmpExtent);\n            }\n            if (!olIntersects(tileExtent, extent) /* || ol.extent.touches(tileExtent, extent) */) {\n                return null;\n            }\n            return [tileCoord[0], x, y];\n        };\n\n        var tileExtent = tileGrid.getTileCoordExtent(tileCoord);\n        var transformedTileCoord = getTransformedTileCoord(tileCoord, tileGrid, projection);\n\n        if (tileGrid.getResolutions().length <= tileCoord[0]) {\n            return undefined;\n        }\n\n        var tileResolution = tileGrid.getResolution(tileCoord[0]);\n        var tileMatrix = tileGrid.getMatrixIds()[tileCoord[0]];\n\n        var baseParams = {\n            SERVICE : \"WMTS\",\n            VERSION : \"1.0.0\",\n            REQUEST : \"GetFeatureInfo\",\n            LAYER : this.getLayer(),\n            TILECOL : transformedTileCoord[1],\n            TILEROW : transformedTileCoord[2],\n            TILEMATRIX : tileMatrix,\n            TILEMATRIXSET : this.getMatrixSet(),\n            FORMAT : this.getFormat() || \"image/png\",\n            STYLE : this.getStyle() || \"normal\"\n        };\n\n        Utils.assign(baseParams, params);\n\n        /* var tileSize = tileGrid.getTileSize();\n        var x = Math.floor(tileSize*((coordinate[0]-tileExtent[0])/(tileExtent[2]-tileExtent[0])));\n        var y = Math.floor(tileSize*((tileExtent[3]-coordinate[1])/(tileExtent[3]-tileExtent[1]))); */\n\n        var x = Math.floor((coordinate[0] - tileExtent[0]) / (tileResolution / pixelRatio));\n        var y = Math.floor((tileExtent[3] - coordinate[1]) / (tileResolution / pixelRatio));\n\n        /* patch parce que la fonction getTileCoordForCoordAndResolution(coords,res) d'Openlayers peut renvoyer\n        une tuile dont l'étendue (getTileCoordExtent) ne contient pas le point passé en paramètre (coords) */\n        var tileSize = tileGrid.getTileSize(tileCoord[0]);\n        x = Math.min(x, (tileSize[0] | tileSize) - 1);\n        y = Math.max(y, 0);\n\n        baseParams[\"I\"] = x;\n        baseParams[\"J\"] = y;\n\n        var url = this.urls[0];\n\n        var featureInfoUrl = Gp.Helper.normalyzeUrl(url, baseParams);\n\n        return featureInfoUrl;\n    };\n\n};\n\nexport default WMTS;\n\n// Expose WMTS as ol.source.WMTSExtended. (for a build bundle)\nif (window.ol && window.ol.source) {\n    window.ol.source.WMTSExtended = WMTS;\n}\n","/**\n * @module Config\n * @alias module:~utils/Config\n * @private\n * @description\n * ...\n *\n * @example\n * isConfigLoaded();\n */\nvar Config = {\n\n    /**\n     * Config\n     *\n     * @public\n     * @type {Object}\n     */\n    configuration : {},\n\n    /**\n     * Check if the configuration is loaded\n     *\n     * @returns {Boolean} True if Config is loaded, false otherwise\n     */\n    isConfigLoaded : function () {\n        // config already loaded !\n        if (this.configuration && Object.keys(this.configuration).length !== 0) {\n            return true;\n        }\n        var scope = typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : typeof global !== \"undefined\" ? global : {};\n        if (scope.Gp && scope.Gp.Config && scope.Gp.Config.layers && Object.keys(scope.Gp.Config.layers).length !== 0) {\n            /** ts-syntax */ (this.configuration) = scope.Gp.Config;\n            return true;\n        }\n        return false;\n    }\n\n};\n\nexport default Config;\n","/**\n* @module Helper\n* @alias module:~utils/HelperUtils\n* @description\n* ...\n*\n* @example\n* import HelperUtils from \"gpf-ext-ol/utils/HelperUtils\"\n* ou \n* import {HelperUtils} from \"gpf-ext-ol\n* \n* HelperUtils.detectSupport();\n* HelperUtils.assign();\n* HelperUtils.mergeParams();\n*/\nvar Helper = {\n\n    /**\n     * this method is called by the constructor.\n     * this information is useful to switch to touch mode.\n     * Detection : test for desktop or tactile\n     *\n     * @function detectSupport\n     * @returns {Boolean} isDesktop - true for desktop userAgent, false for mobile\n     */\n    detectSupport : function () {\n        var isDesktop = true;\n        var userAgent = window.navigator.userAgent.toLowerCase();\n\n        if (userAgent.indexOf(\"iphone\") !== -1 ||\n            userAgent.indexOf(\"ipod\") !== -1 ||\n            userAgent.indexOf(\"ipad\") !== -1 ||\n            userAgent.indexOf(\"android\") !== -1 ||\n            userAgent.indexOf(\"mobile\") !== -1 ||\n            userAgent.indexOf(\"blackberry\") !== -1 ||\n            userAgent.indexOf(\"tablet\") !== -1 ||\n            userAgent.indexOf(\"phone\") !== -1 ||\n            userAgent.indexOf(\"touch\") !== -1) {\n            isDesktop = false;\n        }\n\n        if (userAgent.indexOf(\"msie\") !== -1 ||\n            userAgent.indexOf(\"trident\") !== -1) {\n            isDesktop = true;\n        }\n\n        return isDesktop;\n    },\n\n    /**\n     *  Copies all source object members to dest\n     *\n     * @function assign\n     * @param {Object} dest - destination object where properties and method will be copied\n     * @param {Object} source - source object from which properties and method will be copied\n     * @returns {Object} dest\n     */\n    assign : function (dest, source) {\n        dest = dest || {};\n        for (var prop in source) {\n            if (source.hasOwnProperty(prop)) {\n                dest[prop] = source[prop];\n            }\n        }\n        return dest;\n    },\n\n    /**\n     * Merge two objects parameters (deeper than assign)\n     *\n     * @function mergeParams\n     * @param {Object} dest     - destination object where properties and method will be merge\n     * @param {Object} source   - source object from which properties and method will be merge\n     * @param {Boolean} replace - replace destination value by source if exists or not (true by default)\n     */\n    mergeParams : function (dest, source, replace) {\n        if (typeof dest === \"undefined\" || typeof source === \"undefined\") {\n            return;\n        }\n        if (typeof replace === \"undefined\") {\n            replace = true;\n        }\n        for (var param in source) {\n            if (source.hasOwnProperty(param)) {\n                if (typeof source[param] === \"object\") {\n                    if (dest.hasOwnProperty(param)) {\n                        this.mergeParams(dest[param], source[param], replace);\n                    } else {\n                        dest[param] = source[param];\n                    }\n                } else {\n                    if (dest.hasOwnProperty(param)) {\n                        if (replace) {\n                            dest[param] = source[param];\n                        }\n                    } else {\n                        dest[param] = source[param];\n                    }\n                }\n            }\n        }\n    }\n};\n\nexport default Helper;\n","import * as Log from \"loglevel\";\n\n/**\n * @module LoggerByDefault\n * @alias module:~utils/Logger\n * @description\n * ...\n *\n * @example\n * import Logger from \"gpf-ext-ol/utils/LoggerByDefault\"\n * ou \n * import {Logger} from \"gpf-ext-ol\n * \n * Logger.getLogger();\n * Logger.disableAll();\n * Logger.enableAll();\n */\nvar LoggerByDefault = {\n    /**\n     * creation d'un logger statique\n     *\n     * @function getLogger\n     * @param {String} [name=\"default\"] - the logger name\n     * @returns {Object} logger\n     */\n    getLogger : function (name) {\n        // on définit process si non défini dans l'environnement\n        if (typeof process === \"undefined\") {\n            var process = {};\n            process.env = {\n                VERBOSE : false\n            };\n        }\n        (process.env.VERBOSE) ? Log.enableAll() : Log.disableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    },\n    /**\n     * desactive tous les loggers\n     * @function disableAll\n     */\n    disableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.disableAll();\n            }\n        }\n    },\n    /**\n     * active tous les loggers\n     * @function enableAll\n     */\n    enableAll : function () {\n        var loggers = Log.getLoggers();\n        for (const key in loggers) {\n            if (Object.hasOwnProperty.call(loggers, key)) {\n                const logger = loggers[key];\n                logger.enableAll();\n            }\n        }\n    }\n};\n\nexport default LoggerByDefault;\n\n// Expose Export as ol.control.Catalog (for a build bundle)\nif (window.Gp) {\n    window.Gp.Logger = LoggerByDefault;\n}\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n\n(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.ES6Promise = factory());\n}(this, (function () { 'use strict';\n\nfunction objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n\n\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nvar isArray = _isArray;\n\nvar len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nvar asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nfunction setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nfunction setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}\n\nfunction then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nfunction resolve$1(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  resolve(promise, object);\n  return promise;\n}\n\nvar PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then$$1, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then$$1.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then$$1) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then$$1, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then$$1) {\n  if (maybeThenable.constructor === promise.constructor && then$$1 === then && maybeThenable.constructor.resolve === resolve$1) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then$$1 === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then$$1)) {\n      handleForeignThenable(promise, maybeThenable, then$$1);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then$$1 = void 0;\n    try {\n      then$$1 = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then$$1);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n}\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve$$1 = c.resolve;\n\n\n    if (resolve$$1 === resolve$1) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === then && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise$1) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve$$1) {\n          return resolve$$1(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve$$1(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nfunction all(entries) {\n  return new Enumerator(this, entries).promise;\n}\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nfunction race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nfunction reject$1(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  reject(promise, reason);\n  return promise;\n}\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise$1 = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise$1.prototype.then = then;\nPromise$1.all = all;\nPromise$1.race = race;\nPromise$1.resolve = resolve$1;\nPromise$1.reject = reject$1;\nPromise$1._setScheduler = setScheduler;\nPromise$1._setAsap = setAsap;\nPromise$1._asap = asap;\n\n/*global self*/\nfunction polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise$1;\n}\n\n// Strange compat..\nPromise$1.polyfill = polyfill;\nPromise$1.Promise = Promise$1;\n\nreturn Promise$1;\n\n})));\n\n\n\n//# sourceMappingURL=es6-promise.map\n","'use strict'\n\n/**\n * Ponyfill for `Array.prototype.find` which is only available in ES6 runtimes.\n *\n * Works with anything that has a `length` property and index access properties, including NodeList.\n *\n * @template {unknown} T\n * @param {Array<T> | ({length:number, [number]: T})} list\n * @param {function (item: T, index: number, list:Array<T> | ({length:number, [number]: T})):boolean} predicate\n * @param {Partial<Pick<ArrayConstructor['prototype'], 'find'>>?} ac `Array.prototype` by default,\n * \t\t\t\tallows injecting a custom implementation in tests\n * @returns {T | undefined}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find\n * @see https://tc39.es/ecma262/multipage/indexed-collections.html#sec-array.prototype.find\n */\nfunction find(list, predicate, ac) {\n\tif (ac === undefined) {\n\t\tac = Array.prototype;\n\t}\n\tif (list && typeof ac.find === 'function') {\n\t\treturn ac.find.call(list, predicate);\n\t}\n\tfor (var i = 0; i < list.length; i++) {\n\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\tvar item = list[i];\n\t\t\tif (predicate.call(undefined, item, i, list)) {\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * \"Shallow freezes\" an object to render it immutable.\n * Uses `Object.freeze` if available,\n * otherwise the immutability is only in the type.\n *\n * Is used to create \"enum like\" objects.\n *\n * @template T\n * @param {T} object the object to freeze\n * @param {Pick<ObjectConstructor, 'freeze'> = Object} oc `Object` by default,\n * \t\t\t\tallows to inject custom object constructor for tests\n * @returns {Readonly<T>}\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n */\nfunction freeze(object, oc) {\n\tif (oc === undefined) {\n\t\toc = Object\n\t}\n\treturn oc && typeof oc.freeze === 'function' ? oc.freeze(object) : object\n}\n\n/**\n * Since we can not rely on `Object.assign` we provide a simplified version\n * that is sufficient for our needs.\n *\n * @param {Object} target\n * @param {Object | null | undefined} source\n *\n * @returns {Object} target\n * @throws TypeError if target is not an object\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n * @see https://tc39.es/ecma262/multipage/fundamental-objects.html#sec-object.assign\n */\nfunction assign(target, source) {\n\tif (target === null || typeof target !== 'object') {\n\t\tthrow new TypeError('target is not an object')\n\t}\n\tfor (var key in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, key)) {\n\t\t\ttarget[key] = source[key]\n\t\t}\n\t}\n\treturn target\n}\n\n/**\n * All mime types that are allowed as input to `DOMParser.parseFromString`\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString#Argument02 MDN\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#domparsersupportedtype WHATWG HTML Spec\n * @see DOMParser.prototype.parseFromString\n */\nvar MIME_TYPE = freeze({\n\t/**\n\t * `text/html`, the only mime type that triggers treating an XML document as HTML.\n\t *\n\t * @see DOMParser.SupportedType.isHTML\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring WHATWG HTML Spec\n\t */\n\tHTML: 'text/html',\n\n\t/**\n\t * Helper method to check a mime type if it indicates an HTML document\n\t *\n\t * @param {string} [value]\n\t * @returns {boolean}\n\t *\n\t * @see https://www.iana.org/assignments/media-types/text/html IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/HTML Wikipedia\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser/parseFromString MDN\n\t * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-domparser-parsefromstring \t */\n\tisHTML: function (value) {\n\t\treturn value === MIME_TYPE.HTML\n\t},\n\n\t/**\n\t * `application/xml`, the standard mime type for XML documents.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xml IANA MimeType registration\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.1 RFC 7303\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_APPLICATION: 'application/xml',\n\n\t/**\n\t * `text/html`, an alias for `application/xml`.\n\t *\n\t * @see https://tools.ietf.org/html/rfc7303#section-9.2 RFC 7303\n\t * @see https://www.iana.org/assignments/media-types/text/xml IANA MimeType registration\n\t * @see https://en.wikipedia.org/wiki/XML_and_MIME Wikipedia\n\t */\n\tXML_TEXT: 'text/xml',\n\n\t/**\n\t * `application/xhtml+xml`, indicates an XML document that has the default HTML namespace,\n\t * but is parsed as an XML document.\n\t *\n\t * @see https://www.iana.org/assignments/media-types/application/xhtml+xml IANA MimeType registration\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument WHATWG DOM Spec\n\t * @see https://en.wikipedia.org/wiki/XHTML Wikipedia\n\t */\n\tXML_XHTML_APPLICATION: 'application/xhtml+xml',\n\n\t/**\n\t * `image/svg+xml`,\n\t *\n\t * @see https://www.iana.org/assignments/media-types/image/svg+xml IANA MimeType registration\n\t * @see https://www.w3.org/TR/SVG11/ W3C SVG 1.1\n\t * @see https://en.wikipedia.org/wiki/Scalable_Vector_Graphics Wikipedia\n\t */\n\tXML_SVG_IMAGE: 'image/svg+xml',\n})\n\n/**\n * Namespaces that are used in this code base.\n *\n * @see http://www.w3.org/TR/REC-xml-names\n */\nvar NAMESPACE = freeze({\n\t/**\n\t * The XHTML namespace.\n\t *\n\t * @see http://www.w3.org/1999/xhtml\n\t */\n\tHTML: 'http://www.w3.org/1999/xhtml',\n\n\t/**\n\t * Checks if `uri` equals `NAMESPACE.HTML`.\n\t *\n\t * @param {string} [uri]\n\t *\n\t * @see NAMESPACE.HTML\n\t */\n\tisHTML: function (uri) {\n\t\treturn uri === NAMESPACE.HTML\n\t},\n\n\t/**\n\t * The SVG namespace.\n\t *\n\t * @see http://www.w3.org/2000/svg\n\t */\n\tSVG: 'http://www.w3.org/2000/svg',\n\n\t/**\n\t * The `xml:` namespace.\n\t *\n\t * @see http://www.w3.org/XML/1998/namespace\n\t */\n\tXML: 'http://www.w3.org/XML/1998/namespace',\n\n\t/**\n\t * The `xmlns:` namespace\n\t *\n\t * @see https://www.w3.org/2000/xmlns/\n\t */\n\tXMLNS: 'http://www.w3.org/2000/xmlns/',\n})\n\nexports.assign = assign;\nexports.find = find;\nexports.freeze = freeze;\nexports.MIME_TYPE = MIME_TYPE;\nexports.NAMESPACE = NAMESPACE;\n","var conventions = require(\"./conventions\");\nvar dom = require('./dom')\nvar entities = require('./entities');\nvar sax = require('./sax');\n\nvar DOMImplementation = dom.DOMImplementation;\n\nvar NAMESPACE = conventions.NAMESPACE;\n\nvar ParseError = sax.ParseError;\nvar XMLReader = sax.XMLReader;\n\n/**\n * Normalizes line ending according to https://www.w3.org/TR/xml11/#sec-line-ends:\n *\n * > XML parsed entities are often stored in computer files which,\n * > for editing convenience, are organized into lines.\n * > These lines are typically separated by some combination\n * > of the characters CARRIAGE RETURN (#xD) and LINE FEED (#xA).\n * >\n * > To simplify the tasks of applications, the XML processor must behave\n * > as if it normalized all line breaks in external parsed entities (including the document entity)\n * > on input, before parsing, by translating all of the following to a single #xA character:\n * >\n * > 1. the two-character sequence #xD #xA\n * > 2. the two-character sequence #xD #x85\n * > 3. the single character #x85\n * > 4. the single character #x2028\n * > 5. any #xD character that is not immediately followed by #xA or #x85.\n *\n * @param {string} input\n * @returns {string}\n */\nfunction normalizeLineEndings(input) {\n\treturn input\n\t\t.replace(/\\r[\\n\\u0085]/g, '\\n')\n\t\t.replace(/[\\r\\u0085\\u2028]/g, '\\n')\n}\n\n/**\n * @typedef Locator\n * @property {number} [columnNumber]\n * @property {number} [lineNumber]\n */\n\n/**\n * @typedef DOMParserOptions\n * @property {DOMHandler} [domBuilder]\n * @property {Function} [errorHandler]\n * @property {(string) => string} [normalizeLineEndings] used to replace line endings before parsing\n * \t\t\t\t\t\tdefaults to `normalizeLineEndings`\n * @property {Locator} [locator]\n * @property {Record<string, string>} [xmlns]\n *\n * @see normalizeLineEndings\n */\n\n/**\n * The DOMParser interface provides the ability to parse XML or HTML source code\n * from a string into a DOM `Document`.\n *\n * _xmldom is different from the spec in that it allows an `options` parameter,\n * to override the default behavior._\n *\n * @param {DOMParserOptions} [options]\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMParser\n * @see https://html.spec.whatwg.org/multipage/dynamic-markup-insertion.html#dom-parsing-and-serialization\n */\nfunction DOMParser(options){\n\tthis.options = options ||{locator:{}};\n}\n\nDOMParser.prototype.parseFromString = function(source,mimeType){\n\tvar options = this.options;\n\tvar sax =  new XMLReader();\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\n\tvar errorHandler = options.errorHandler;\n\tvar locator = options.locator;\n\tvar defaultNSMap = options.xmlns||{};\n\tvar isHTML = /\\/x?html?$/.test(mimeType);//mimeType.toLowerCase().indexOf('html') > -1;\n  \tvar entityMap = isHTML ? entities.HTML_ENTITIES : entities.XML_ENTITIES;\n\tif(locator){\n\t\tdomBuilder.setDocumentLocator(locator)\n\t}\n\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\n\tsax.domBuilder = options.domBuilder || domBuilder;\n\tif(isHTML){\n\t\tdefaultNSMap[''] = NAMESPACE.HTML;\n\t}\n\tdefaultNSMap.xml = defaultNSMap.xml || NAMESPACE.XML;\n\tvar normalize = options.normalizeLineEndings || normalizeLineEndings;\n\tif (source && typeof source === 'string') {\n\t\tsax.parse(\n\t\t\tnormalize(source),\n\t\t\tdefaultNSMap,\n\t\t\tentityMap\n\t\t)\n\t} else {\n\t\tsax.errorHandler.error('invalid doc source')\n\t}\n\treturn domBuilder.doc;\n}\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\n\tif(!errorImpl){\n\t\tif(domBuilder instanceof DOMHandler){\n\t\t\treturn domBuilder;\n\t\t}\n\t\terrorImpl = domBuilder ;\n\t}\n\tvar errorHandler = {}\n\tvar isCallback = errorImpl instanceof Function;\n\tlocator = locator||{}\n\tfunction build(key){\n\t\tvar fn = errorImpl[key];\n\t\tif(!fn && isCallback){\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\n\t\t}\n\t\terrorHandler[key] = fn && function(msg){\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\n\t\t}||function(){};\n\t}\n\tbuild('warning');\n\tbuild('error');\n\tbuild('fatalError');\n\treturn errorHandler;\n}\n\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\n/**\n * +ContentHandler+ErrorHandler\n * +LexicalHandler+EntityResolver2\n * -DeclHandler-DTDHandler\n *\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\n */\nfunction DOMHandler() {\n    this.cdata = false;\n}\nfunction position(locator,node){\n\tnode.lineNumber = locator.lineNumber;\n\tnode.columnNumber = locator.columnNumber;\n}\n/**\n * @see org.xml.sax.ContentHandler#startDocument\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\n */\nDOMHandler.prototype = {\n\tstartDocument : function() {\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\n    \tif (this.locator) {\n        \tthis.doc.documentURI = this.locator.systemId;\n    \t}\n\t},\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\n\t\tvar doc = this.doc;\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\n\t    var len = attrs.length;\n\t    appendElement(this, el);\n\t    this.currentElement = el;\n\n\t\tthis.locator && position(this.locator,el)\n\t    for (var i = 0 ; i < len; i++) {\n\t        var namespaceURI = attrs.getURI(i);\n\t        var value = attrs.getValue(i);\n\t        var qName = attrs.getQName(i);\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\n\t\t\tattr.value = attr.nodeValue = value;\n\t\t\tel.setAttributeNode(attr)\n\t    }\n\t},\n\tendElement:function(namespaceURI, localName, qName) {\n\t\tvar current = this.currentElement\n\t\tvar tagName = current.tagName;\n\t\tthis.currentElement = current.parentNode;\n\t},\n\tstartPrefixMapping:function(prefix, uri) {\n\t},\n\tendPrefixMapping:function(prefix) {\n\t},\n\tprocessingInstruction:function(target, data) {\n\t    var ins = this.doc.createProcessingInstruction(target, data);\n\t    this.locator && position(this.locator,ins)\n\t    appendElement(this, ins);\n\t},\n\tignorableWhitespace:function(ch, start, length) {\n\t},\n\tcharacters:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t\t//console.log(chars)\n\t\tif(chars){\n\t\t\tif (this.cdata) {\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\n\t\t\t} else {\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\n\t\t\t}\n\t\t\tif(this.currentElement){\n\t\t\t\tthis.currentElement.appendChild(charNode);\n\t\t\t}else if(/^\\s*$/.test(chars)){\n\t\t\t\tthis.doc.appendChild(charNode);\n\t\t\t\t//process xml\n\t\t\t}\n\t\t\tthis.locator && position(this.locator,charNode)\n\t\t}\n\t},\n\tskippedEntity:function(name) {\n\t},\n\tendDocument:function() {\n\t\tthis.doc.normalize();\n\t},\n\tsetDocumentLocator:function (locator) {\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\n\t    \tlocator.lineNumber = 0;\n\t    }\n\t},\n\t//LexicalHandler\n\tcomment:function(chars, start, length) {\n\t\tchars = _toString.apply(this,arguments)\n\t    var comm = this.doc.createComment(chars);\n\t    this.locator && position(this.locator,comm)\n\t    appendElement(this, comm);\n\t},\n\n\tstartCDATA:function() {\n\t    //used in characters() methods\n\t    this.cdata = true;\n\t},\n\tendCDATA:function() {\n\t    this.cdata = false;\n\t},\n\n\tstartDTD:function(name, publicId, systemId) {\n\t\tvar impl = this.doc.implementation;\n\t    if (impl && impl.createDocumentType) {\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\n\t        this.locator && position(this.locator,dt)\n\t        appendElement(this, dt);\n\t\t\t\t\tthis.doc.doctype = dt;\n\t    }\n\t},\n\t/**\n\t * @see org.xml.sax.ErrorHandler\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\n\t */\n\twarning:function(error) {\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\n\t},\n\terror:function(error) {\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\n\t},\n\tfatalError:function(error) {\n\t\tthrow new ParseError(error, this.locator);\n\t}\n}\nfunction _locator(l){\n\tif(l){\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\n\t}\n}\nfunction _toString(chars,start,length){\n\tif(typeof chars == 'string'){\n\t\treturn chars.substr(start,length)\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\n\t\tif(chars.length >= start+length || start){\n\t\t\treturn new java.lang.String(chars,start,length)+'';\n\t\t}\n\t\treturn chars;\n\t}\n}\n\n/*\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\n * used method of org.xml.sax.ext.LexicalHandler:\n *  #comment(chars, start, length)\n *  #startCDATA()\n *  #endCDATA()\n *  #startDTD(name, publicId, systemId)\n *\n *\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\n *  #endDTD()\n *  #startEntity(name)\n *  #endEntity(name)\n *\n *\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\n * IGNORED method of org.xml.sax.ext.DeclHandler\n * \t#attributeDecl(eName, aName, type, mode, value)\n *  #elementDecl(name, model)\n *  #externalEntityDecl(name, publicId, systemId)\n *  #internalEntityDecl(name, value)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\n * IGNORED method of org.xml.sax.EntityResolver2\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\n *  #resolveEntity(publicId, systemId)\n *  #getExternalSubset(name, baseURI)\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\n * IGNORED method of org.xml.sax.DTDHandler\n *  #notationDecl(name, publicId, systemId) {};\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\n */\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\n\tDOMHandler.prototype[key] = function(){return null}\n})\n\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\nfunction appendElement (hander,node) {\n    if (!hander.currentElement) {\n        hander.doc.appendChild(node);\n    } else {\n        hander.currentElement.appendChild(node);\n    }\n}//appendChild and setAttributeNS are preformance key\n\nexports.__DOMHandler = DOMHandler;\nexports.normalizeLineEndings = normalizeLineEndings;\nexports.DOMParser = DOMParser;\n","var conventions = require(\"./conventions\");\n\nvar find = conventions.find;\nvar NAMESPACE = conventions.NAMESPACE;\n\n/**\n * A prerequisite for `[].filter`, to drop elements that are empty\n * @param {string} input\n * @returns {boolean}\n */\nfunction notEmptyString (input) {\n\treturn input !== ''\n}\n/**\n * @see https://infra.spec.whatwg.org/#split-on-ascii-whitespace\n * @see https://infra.spec.whatwg.org/#ascii-whitespace\n *\n * @param {string} input\n * @returns {string[]} (can be empty)\n */\nfunction splitOnASCIIWhitespace(input) {\n\t// U+0009 TAB, U+000A LF, U+000C FF, U+000D CR, U+0020 SPACE\n\treturn input ? input.split(/[\\t\\n\\f\\r ]+/).filter(notEmptyString) : []\n}\n\n/**\n * Adds element as a key to current if it is not already present.\n *\n * @param {Record<string, boolean | undefined>} current\n * @param {string} element\n * @returns {Record<string, boolean | undefined>}\n */\nfunction orderedSetReducer (current, element) {\n\tif (!current.hasOwnProperty(element)) {\n\t\tcurrent[element] = true;\n\t}\n\treturn current;\n}\n\n/**\n * @see https://infra.spec.whatwg.org/#ordered-set\n * @param {string} input\n * @returns {string[]}\n */\nfunction toOrderedSet(input) {\n\tif (!input) return [];\n\tvar list = splitOnASCIIWhitespace(input);\n\treturn Object.keys(list.reduce(orderedSetReducer, {}))\n}\n\n/**\n * Uses `list.indexOf` to implement something like `Array.prototype.includes`,\n * which we can not rely on being available.\n *\n * @param {any[]} list\n * @returns {function(any): boolean}\n */\nfunction arrayIncludes (list) {\n\treturn function(element) {\n\t\treturn list && list.indexOf(element) !== -1;\n\t}\n}\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tif (Object.prototype.hasOwnProperty.call(src, p)) {\n\t\t\tdest[p] = src[p];\n\t\t}\n\t}\n}\n\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknown Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\n\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n/**\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n */\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0,\n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long\n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index.\n\t */\n\titem: function(index) {\n\t\treturn index >= 0 && index < this.length ? this[index] : null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t},\n\t/**\n\t * @private\n\t * @param {function (Node):boolean} predicate\n\t * @returns {Node[]}\n\t */\n\tfilter: function (predicate) {\n\t\treturn Array.prototype.filter.call(this, predicate);\n\t},\n\t/**\n\t * @private\n\t * @param {Node} item\n\t * @returns {number}\n\t */\n\tindexOf: function (item) {\n\t\treturn Array.prototype.indexOf.call(this, item);\n\t},\n};\n\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif (list._inc !== inc) {\n\t\tvar ls = list._refresh(list._node);\n\t\t__set__(list,'length',ls.length);\n\t\tif (!list.$$length || ls.length < list.$$length) {\n\t\t\tfor (var i = ls.length; i in list; i++) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(list, i)) {\n\t\t\t\t\tdelete list[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i] || null;\n}\n\n_extends(LiveNodeList,NodeList);\n\n/**\n * Objects implementing the NamedNodeMap interface are used\n * to represent collections of nodes that can be accessed by name.\n * Note that NamedNodeMap does not inherit from NodeList;\n * NamedNodeMaps are not maintained in any particular order.\n * Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index,\n * but this is simply to allow convenient enumeration of the contents of a NamedNodeMap,\n * and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities\n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow new DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\n\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n\n/**\n * The DOMImplementation interface represents an object providing methods\n * which are not dependent on any particular document.\n * Such an object is returned by the `Document.implementation` property.\n *\n * __The individual methods describe the differences compared to the specs.__\n *\n * @constructor\n *\n * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation MDN\n * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490 DOM Level 1 Core (Initial)\n * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-102161490 DOM Level 2 Core\n * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#ID-102161490 DOM Level 3 Core\n * @see https://dom.spec.whatwg.org/#domimplementation DOM Living Standard\n */\nfunction DOMImplementation() {\n}\n\nDOMImplementation.prototype = {\n\t/**\n\t * The DOMImplementation.hasFeature() method returns a Boolean flag indicating if a given feature is supported.\n\t * The different implementations fairly diverged in what kind of features were reported.\n\t * The latest version of the spec settled to force this method to always return true, where the functionality was accurate and in use.\n\t *\n\t * @deprecated It is deprecated and modern browsers return true in all cases.\n\t *\n\t * @param {string} feature\n\t * @param {string} [version]\n\t * @returns {boolean} always true\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/hasFeature MDN\n\t * @see https://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-5CED94D7 DOM Level 1 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-hasfeature DOM Living Standard\n\t */\n\thasFeature: function(feature, version) {\n\t\t\treturn true;\n\t},\n\t/**\n\t * Creates an XML Document object of the specified type with its document element.\n\t *\n\t * __It behaves slightly different from the description in the living standard__:\n\t * - There is no interface/class `XMLDocument`, it returns a `Document` instance.\n\t * - `contentType`, `encoding`, `mode`, `origin`, `url` fields are currently not declared.\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string|null} namespaceURI\n\t * @param {string} qualifiedName\n\t * @param {DocumentType=null} doctype\n\t * @returns {Document}\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocument MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocument DOM Level 2 Core (initial)\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocument  DOM Level 2 Core\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocument: function(namespaceURI,  qualifiedName, doctype){\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype || null;\n\t\tif (doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif (qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI, qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t/**\n\t * Returns a doctype, with the given `qualifiedName`, `publicId`, and `systemId`.\n\t *\n\t * __This behavior is slightly different from the in the specs__:\n\t * - this implementation is not validating names or qualified names\n\t *   (when parsing XML strings, the SAX parser takes care of that)\n\t *\n\t * @param {string} qualifiedName\n\t * @param {string} [publicId]\n\t * @param {string} [systemId]\n\t * @returns {DocumentType} which can either be used with `DOMImplementation.createDocument` upon document creation\n\t * \t\t\t\t  or can be put into the document via methods like `Node.insertBefore()` or `Node.replaceChild()`\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/DOMImplementation/createDocumentType MDN\n\t * @see https://www.w3.org/TR/DOM-Level-2-Core/core.html#Level-2-Core-DOM-createDocType DOM Level 2 Core\n\t * @see https://dom.spec.whatwg.org/#dom-domimplementation-createdocumenttype DOM Living Standard\n\t *\n\t * @see https://dom.spec.whatwg.org/#validate-and-extract DOM: Validate and extract\n\t * @see https://www.w3.org/TR/xml/#NT-NameStartChar XML Spec: Names\n\t * @see https://www.w3.org/TR/xml-names/#ns-qualnames XML Namespaces: Qualified names\n\t */\n\tcreateDocumentType: function(qualifiedName, publicId, systemId){\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId || '';\n\t\tnode.systemId = systemId || '';\n\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises\n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises\n\t\t_insertBefore(this, newChild,oldChild, assertPreReplacementValidityInDocument);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n\t/**\n\t * Look up the prefix associated to the given namespace URI, starting from this node.\n\t * **The default namespace declarations are ignored by this method.**\n\t * See Namespace Prefix Lookup for details on the algorithm used by this method.\n\t *\n\t * _Note: The implementation seems to be incomplete when compared to the algorithm described in the specs._\n\t *\n\t * @param {string | null} namespaceURI\n\t * @returns {string | null}\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-lookupNamespacePrefix\n\t * @see https://www.w3.org/TR/DOM-Level-3-Core/namespaces-algorithms.html#lookupNamespacePrefixAlgo\n\t * @see https://dom.spec.whatwg.org/#dom-node-lookupprefix\n\t * @see https://github.com/xmldom/xmldom/issues/322\n\t */\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(map, n) && map[n] === namespaceURI) {\n\t\t\t\t\t\t\treturn n;\n\t\t\t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(Object.prototype.hasOwnProperty.call(map, prefix)){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n\tthis.ownerDocument = this;\n}\n\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\n\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns === NAMESPACE.XMLNS){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\n\n/**\n * Updates `el.childNodes`, updating the indexed items and it's `length`.\n * Passing `newChild` means it will be appended.\n * Otherwise it's assumed that an item has been removed,\n * and `el.firstNode` and it's `.nextSibling` are used\n * to walk the current list of child nodes.\n *\n * @param {Document} doc\n * @param {Node} el\n * @param {Node} [newChild]\n * @private\n */\nfunction _onUpdateChild (doc, el, newChild) {\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif (newChild) {\n\t\t\tcs[cs.length++] = newChild;\n\t\t} else {\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile (child) {\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild = child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t\tdelete cs[cs.length];\n\t\t}\n\t}\n}\n\n/**\n * Removes the connections between `parentNode` and `child`\n * and any existing `child.previousSibling` or `child.nextSibling`.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n *\n * @param {Node} parentNode\n * @param {Node} child\n * @returns {Node} the child that was removed.\n * @private\n */\nfunction _removeChild (parentNode, child) {\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif (previous) {\n\t\tprevious.nextSibling = next;\n\t} else {\n\t\tparentNode.firstChild = next;\n\t}\n\tif (next) {\n\t\tnext.previousSibling = previous;\n\t} else {\n\t\tparentNode.lastChild = previous;\n\t}\n\tchild.parentNode = null;\n\tchild.previousSibling = null;\n\tchild.nextSibling = null;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode);\n\treturn child;\n}\n\n/**\n * Returns `true` if `node` can be a parent for insertion.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasValidParentNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(node.nodeType === Node.DOCUMENT_NODE || node.nodeType === Node.DOCUMENT_FRAGMENT_NODE || node.nodeType === Node.ELEMENT_NODE)\n\t);\n}\n\n/**\n * Returns `true` if `node` can be inserted according to it's `nodeType`.\n * @param {Node} node\n * @returns {boolean}\n */\nfunction hasInsertableNodeType(node) {\n\treturn (\n\t\tnode &&\n\t\t(isElementNode(node) ||\n\t\t\tisTextNode(node) ||\n\t\t\tisDocTypeNode(node) ||\n\t\t\tnode.nodeType === Node.DOCUMENT_FRAGMENT_NODE ||\n\t\t\tnode.nodeType === Node.COMMENT_NODE ||\n\t\t\tnode.nodeType === Node.PROCESSING_INSTRUCTION_NODE)\n\t);\n}\n\n/**\n * Returns true if `node` is a DOCTYPE node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isDocTypeNode(node) {\n\treturn node && node.nodeType === Node.DOCUMENT_TYPE_NODE;\n}\n\n/**\n * Returns true if the node is an element\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isElementNode(node) {\n\treturn node && node.nodeType === Node.ELEMENT_NODE;\n}\n/**\n * Returns true if `node` is a text node\n * @param {Node} node\n * @returns {boolean}\n */\nfunction isTextNode(node) {\n\treturn node && node.nodeType === Node.TEXT_NODE;\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Document} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementInsertionPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\tif (find(parentChildNodes, isElementNode) || isDocTypeNode(child)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * Check if en element node can be inserted before `child`, or at the end if child is falsy,\n * according to the presence and position of a doctype node on the same level.\n *\n * @param {Node} doc The document node\n * @param {Node} child the node that would become the nextSibling if the element would be inserted\n * @returns {boolean} `true` if an element can be inserted before child\n * @private\n * https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction isElementReplacementPossible(doc, child) {\n\tvar parentChildNodes = doc.childNodes || [];\n\n\tfunction hasElementChildThatIsNotChild(node) {\n\t\treturn isElementNode(node) && node !== child;\n\t}\n\n\tif (find(parentChildNodes, hasElementChildThatIsNotChild)) {\n\t\treturn false;\n\t}\n\tvar docTypeNode = find(parentChildNodes, isDocTypeNode);\n\treturn !(child && docTypeNode && parentChildNodes.indexOf(docTypeNode) > parentChildNodes.indexOf(child));\n}\n\n/**\n * @private\n * Steps 1-5 of the checks before inserting and before replacing a child are the same.\n *\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidity1to5(parent, node, child) {\n\t// 1. If `parent` is not a Document, DocumentFragment, or Element node, then throw a \"HierarchyRequestError\" DOMException.\n\tif (!hasValidParentNodeType(parent)) {\n\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Unexpected parent node type ' + parent.nodeType);\n\t}\n\t// 2. If `node` is a host-including inclusive ancestor of `parent`, then throw a \"HierarchyRequestError\" DOMException.\n\t// not implemented!\n\t// 3. If `child` is non-null and its parent is not `parent`, then throw a \"NotFoundError\" DOMException.\n\tif (child && child.parentNode !== parent) {\n\t\tthrow new DOMException(NOT_FOUND_ERR, 'child not in parent');\n\t}\n\tif (\n\t\t// 4. If `node` is not a DocumentFragment, DocumentType, Element, or CharacterData node, then throw a \"HierarchyRequestError\" DOMException.\n\t\t!hasInsertableNodeType(node) ||\n\t\t// 5. If either `node` is a Text node and `parent` is a document,\n\t\t// the sax parser currently adds top level text nodes, this will be fixed in 0.9.0\n\t\t// || (node.nodeType === Node.TEXT_NODE && parent.nodeType === Node.DOCUMENT_NODE)\n\t\t// or `node` is a doctype and `parent` is not a document, then throw a \"HierarchyRequestError\" DOMException.\n\t\t(isDocTypeNode(node) && parent.nodeType !== Node.DOCUMENT_NODE)\n\t) {\n\t\tthrow new DOMException(\n\t\t\tHIERARCHY_REQUEST_ERR,\n\t\t\t'Unexpected node type ' + node.nodeType + ' for parent node type ' + parent.nodeType\n\t\t);\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreInsertionValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If node has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child,\n\t\t// `child` is a doctype, or `child` is non-null and a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child, `child` is a doctype,\n\t\t// or `child` is non-null and a doctype is following `child`.\n\t\tif (!isElementInsertionPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\t// `parent` has a doctype child,\n\t\tif (find(parentChildNodes, isDocTypeNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// `child` is non-null and an element is preceding `child`,\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t\t// or `child` is null and `parent` has an element child.\n\t\tif (!child && parentElementChild) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can not be appended since element is present');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * Step 6 of the checks before inserting and before replacing a child are different.\n *\n * @param {Document} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node | undefined} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n * @see https://dom.spec.whatwg.org/#concept-node-replace\n */\nfunction assertPreReplacementValidityInDocument(parent, node, child) {\n\tvar parentChildNodes = parent.childNodes || [];\n\tvar nodeChildNodes = node.childNodes || [];\n\n\t// DocumentFragment\n\tif (node.nodeType === Node.DOCUMENT_FRAGMENT_NODE) {\n\t\tvar nodeChildElements = nodeChildNodes.filter(isElementNode);\n\t\t// If `node` has more than one element child or has a Text node child.\n\t\tif (nodeChildElements.length > 1 || find(nodeChildNodes, isTextNode)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'More than one element or text in fragment');\n\t\t}\n\t\t// Otherwise, if `node` has one element child and either `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (nodeChildElements.length === 1 && !isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Element in fragment can not be inserted before doctype');\n\t\t}\n\t}\n\t// Element\n\tif (isElementNode(node)) {\n\t\t// `parent` has an element child that is not `child` or a doctype is following `child`.\n\t\tif (!isElementReplacementPossible(parent, child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one element can be added and only after doctype');\n\t\t}\n\t}\n\t// DocumentType\n\tif (isDocTypeNode(node)) {\n\t\tfunction hasDoctypeChildThatIsNotChild(node) {\n\t\t\treturn isDocTypeNode(node) && node !== child;\n\t\t}\n\n\t\t// `parent` has a doctype child that is not `child`,\n\t\tif (find(parentChildNodes, hasDoctypeChildThatIsNotChild)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Only one doctype is allowed');\n\t\t}\n\t\tvar parentElementChild = find(parentChildNodes, isElementNode);\n\t\t// or an element is preceding `child`.\n\t\tif (child && parentChildNodes.indexOf(parentElementChild) < parentChildNodes.indexOf(child)) {\n\t\t\tthrow new DOMException(HIERARCHY_REQUEST_ERR, 'Doctype can only be inserted before an element');\n\t\t}\n\t}\n}\n\n/**\n * @private\n * @param {Node} parent the parent node to insert `node` into\n * @param {Node} node the node to insert\n * @param {Node=} child the node that should become the `nextSibling` of `node`\n * @returns {Node}\n * @throws DOMException for several node combinations that would create a DOM that is not well-formed.\n * @throws DOMException if `child` is provided but is not a child of `parent`.\n * @see https://dom.spec.whatwg.org/#concept-node-ensure-pre-insertion-validity\n */\nfunction _insertBefore(parent, node, child, _inDocumentAssertion) {\n\t// To ensure pre-insertion validity of a node into a parent before a child, run these steps:\n\tassertPreInsertionValidity1to5(parent, node, child);\n\n\t// If parent is a document, and any of the statements below, switched on the interface node implements,\n\t// are true, then throw a \"HierarchyRequestError\" DOMException.\n\tif (parent.nodeType === Node.DOCUMENT_NODE) {\n\t\t(_inDocumentAssertion || assertPreInsertionValidityInDocument)(parent, node, child);\n\t}\n\n\tvar cp = node.parentNode;\n\tif(cp){\n\t\tcp.removeChild(node);//remove and update\n\t}\n\tif(node.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = node.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn node;\n\t\t}\n\t\tvar newLast = node.lastChild;\n\t}else{\n\t\tnewFirst = newLast = node;\n\t}\n\tvar pre = child ? child.previousSibling : parent.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = child;\n\n\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparent.firstChild = newFirst;\n\t}\n\tif(child == null){\n\t\tparent.lastChild = newLast;\n\t}else{\n\t\tchild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parent;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parent.ownerDocument||parent, parent);\n\t//console.log(parent.lastChild.nextSibling == null)\n\tif (node.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnode.firstChild = node.lastChild = null;\n\t}\n\treturn node;\n}\n\n/**\n * Appends `newChild` to `parentNode`.\n * If `newChild` is already connected to a `parentNode` it is first removed from it.\n *\n * @see https://github.com/xmldom/xmldom/issues/135\n * @see https://github.com/xmldom/xmldom/issues/145\n * @param {Node} parentNode\n * @param {Node} newChild\n * @returns {Node}\n * @private\n */\nfunction _appendSingleChild (parentNode, newChild) {\n\tif (newChild.parentNode) {\n\t\tnewChild.parentNode.removeChild(newChild);\n\t}\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = parentNode.lastChild;\n\tnewChild.nextSibling = null;\n\tif (newChild.previousSibling) {\n\t\tnewChild.previousSibling.nextSibling = newChild;\n\t} else {\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument, parentNode, newChild);\n\treturn newChild;\n}\n\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\t/**\n\t * The DocumentType node of the document.\n\t *\n\t * @readonly\n\t * @type DocumentType\n\t */\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\n\tinsertBefore :  function(newChild, refChild){//raises\n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\t_insertBefore(this, newChild, refChild);\n\t\tnewChild.ownerDocument = this;\n\t\tif (this.documentElement === null && newChild.nodeType === ELEMENT_NODE) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\n\t\treturn newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\treplaceChild: function (newChild, oldChild) {\n\t\t//raises\n\t\t_insertBefore(this, newChild, oldChild, assertPreReplacementValidityInDocument);\n\t\tnewChild.ownerDocument = this;\n\t\tif (oldChild) {\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t\tif (isElementNode(newChild)) {\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\n\t/**\n\t * The `getElementsByClassName` method of `Document` interface returns an array-like object\n\t * of all child elements which have **all** of the given class name(s).\n\t *\n\t * Returns an empty list if `classeNames` is an empty string or only contains HTML white space characters.\n\t *\n\t *\n\t * Warning: This is a live LiveNodeList.\n\t * Changes in the DOM will reflect in the array as the changes occur.\n\t * If an element selected by this array no longer qualifies for the selector,\n\t * it will automatically be removed. Be aware of this for iteration purposes.\n\t *\n\t * @param {string} classNames is a string representing the class name(s) to match; multiple class names are separated by (ASCII-)whitespace\n\t *\n\t * @see https://developer.mozilla.org/en-US/docs/Web/API/Document/getElementsByClassName\n\t * @see https://dom.spec.whatwg.org/#concept-getelementsbyclassname\n\t */\n\tgetElementsByClassName: function(classNames) {\n\t\tvar classNamesSet = toOrderedSet(classNames)\n\t\treturn new LiveNodeList(this, function(base) {\n\t\t\tvar ls = [];\n\t\t\tif (classNamesSet.length > 0) {\n\t\t\t\t_visitNode(base.documentElement, function(node) {\n\t\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE) {\n\t\t\t\t\t\tvar nodeClassNames = node.getAttribute('class')\n\t\t\t\t\t\t// can be null if the attribute does not exist\n\t\t\t\t\t\tif (nodeClassNames) {\n\t\t\t\t\t\t\t// before splitting and iterating just compare them for the most common case\n\t\t\t\t\t\t\tvar matches = classNames === nodeClassNames;\n\t\t\t\t\t\t\tif (!matches) {\n\t\t\t\t\t\t\t\tvar nodeClassNamesSet = toOrderedSet(nodeClassNames)\n\t\t\t\t\t\t\t\tmatches = classNamesSet.every(arrayIncludes(nodeClassNamesSet))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif(matches) {\n\t\t\t\t\t\t\t\tls.push(node);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn ls;\n\t\t});\n\t},\n\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.localName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.nodeName = node.target = target;\n\t\tnode.nodeValue = node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9 && this.documentElement || this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\n\nfunction needNamespaceDefine(node, isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix || '';\n\tvar uri = node.namespaceURI;\n\t// According to [Namespaces in XML 1.0](https://www.w3.org/TR/REC-xml-names/#ns-using) ,\n\t// and more specifically https://www.w3.org/TR/REC-xml-names/#nsc-NoPrefixUndecl :\n\t// > In a namespace declaration for a prefix [...], the attribute value MUST NOT be empty.\n\t// in a similar manner [Namespaces in XML 1.1](https://www.w3.org/TR/xml-names11/#ns-using)\n\t// and more specifically https://www.w3.org/TR/xml-names11/#nsc-NSDeclared :\n\t// > [...] Furthermore, the attribute value [...] must not be an empty string.\n\t// so serializing empty namespace value like xmlns:ds=\"\" would produce an invalid XML document.\n\tif (!uri) {\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === NAMESPACE.XML || uri === NAMESPACE.XMLNS) {\n\t\treturn false;\n\t}\n\n\tvar i = visibleNamespaces.length\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\tif (ns.prefix === prefix) {\n\t\t\treturn ns.namespace !== uri;\n\t\t}\n\t}\n\treturn true;\n}\n/**\n * Well-formed constraint: No < in Attribute Values\n * > The replacement text of any entity referred to directly or indirectly\n * > in an attribute value must not contain a <.\n * @see https://www.w3.org/TR/xml11/#CleanAttrVals\n * @see https://www.w3.org/TR/xml11/#NT-AttValue\n *\n * Literal whitespace other than space that appear in attribute values\n * are serialized as their entity references, so they will be preserved.\n * (In contrast to whitespace literals in the input which are normalized to spaces)\n * @see https://www.w3.org/TR/xml11/#AVNormalize\n * @see https://w3c.github.io/DOM-Parsing/#serializing-an-element-s-attributes\n */\nfunction addSerializedAttribute(buf, qualifiedName, value) {\n\tbuf.push(' ', qualifiedName, '=\"', value.replace(/[<>&\"\\t\\n\\r]/g, _xmlEncoder), '\"')\n}\n\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif (!visibleNamespaces) {\n\t\tvisibleNamespaces = [];\n\t}\n\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\n\t\tisHTML = NAMESPACE.isHTML(node.namespaceURI) || isHTML\n\n\t\tvar prefixedNodeName = nodeName\n\t\tif (!isHTML && !node.prefix && node.namespaceURI) {\n\t\t\tvar defaultNS\n\t\t\t// lookup current default ns from `xmlns` attribute\n\t\t\tfor (var ai = 0; ai < attrs.length; ai++) {\n\t\t\t\tif (attrs.item(ai).name === 'xmlns') {\n\t\t\t\t\tdefaultNS = attrs.item(ai).value\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!defaultNS) {\n\t\t\t\t// lookup current default ns in visibleNamespaces\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.prefix === '' && namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tdefaultNS = namespace.namespace\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (defaultNS !== node.namespaceURI) {\n\t\t\t\tfor (var nsi = visibleNamespaces.length - 1; nsi >= 0; nsi--) {\n\t\t\t\t\tvar namespace = visibleNamespaces[nsi]\n\t\t\t\t\tif (namespace.namespace === node.namespaceURI) {\n\t\t\t\t\t\tif (namespace.prefix) {\n\t\t\t\t\t\t\tprefixedNodeName = namespace.prefix + ':' + nodeName\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tbuf.push('<', prefixedNodeName);\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\n\t\t// add namespace for current node\n\t\tif (nodeName === prefixedNodeName && needNamespaceDefine(node, isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\taddSerializedAttribute(buf, prefix ? 'xmlns:' + prefix : \"xmlns\", uri);\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',prefixedNodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child, buf, isHTML, nodeFilter, visibleNamespaces.slice());\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn addSerializedAttribute(buf, node.name, node.value);\n\tcase TEXT_NODE:\n\t\t/**\n\t\t * The ampersand character (&) and the left angle bracket (<) must not appear in their literal form,\n\t\t * except when used as markup delimiters, or within a comment, a processing instruction, or a CDATA section.\n\t\t * If they are needed elsewhere, they must be escaped using either numeric character references or the strings\n\t\t * `&amp;` and `&lt;` respectively.\n\t\t * The right angle bracket (>) may be represented using the string \" &gt; \", and must, for compatibility,\n\t\t * be escaped using either `&gt;` or a character reference when it appears in the string `]]>` in content,\n\t\t * when that string is not marking the end of a CDATA section.\n\t\t *\n\t\t * In the content of elements, character data is any string of characters\n\t\t * which does not contain the start-delimiter of any markup\n\t\t * and does not include the CDATA-section-close delimiter, `]]>`.\n\t\t *\n\t\t * @see https://www.w3.org/TR/xml/#NT-CharData\n\t\t * @see https://w3c.github.io/DOM-Parsing/#xml-serializing-a-text-node\n\t\t */\n\t\treturn buf.push(node.data\n\t\t\t.replace(/[<&>]/g,_xmlEncoder)\n\t\t);\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC ', pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push(' ', sysid);\n\t\t\t}\n\t\t\tbuf.push('>');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM ', sysid, '>');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE：\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor (var n in node) {\n\t\tif (Object.prototype.hasOwnProperty.call(node, n)) {\n\t\t\tvar v = node[n];\n\t\t\tif (typeof v != \"object\") {\n\t\t\t\tif (v != node2[n]) {\n\t\t\t\t\tnode2[n] = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DocumentType = DocumentType;\n\texports.DOMException = DOMException;\n\texports.DOMImplementation = DOMImplementation;\n\texports.Element = Element;\n\texports.Node = Node;\n\texports.NodeList = NodeList;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","'use strict';\n\nvar freeze = require('./conventions').freeze;\n\n/**\n * The entities that are predefined in every XML document.\n *\n * @see https://www.w3.org/TR/2006/REC-xml11-20060816/#sec-predefined-ent W3C XML 1.1\n * @see https://www.w3.org/TR/2008/REC-xml-20081126/#sec-predefined-ent W3C XML 1.0\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined_entities_in_XML Wikipedia\n */\nexports.XML_ENTITIES = freeze({\n\tamp: '&',\n\tapos: \"'\",\n\tgt: '>',\n\tlt: '<',\n\tquot: '\"',\n});\n\n/**\n * A map of all entities that are detected in an HTML document.\n * They contain all entries from `XML_ENTITIES`.\n *\n * @see XML_ENTITIES\n * @see DOMParser.parseFromString\n * @see DOMImplementation.prototype.createHTMLDocument\n * @see https://html.spec.whatwg.org/#named-character-references WHATWG HTML(5) Spec\n * @see https://html.spec.whatwg.org/entities.json JSON\n * @see https://www.w3.org/TR/xml-entity-names/ W3C XML Entity Names\n * @see https://www.w3.org/TR/html4/sgml/entities.html W3C HTML4/SGML\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Character_entity_references_in_HTML Wikipedia (HTML)\n * @see https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Entities_representing_special_characters_in_XHTML Wikpedia (XHTML)\n */\nexports.HTML_ENTITIES = freeze({\n\tAacute: '\\u00C1',\n\taacute: '\\u00E1',\n\tAbreve: '\\u0102',\n\tabreve: '\\u0103',\n\tac: '\\u223E',\n\tacd: '\\u223F',\n\tacE: '\\u223E\\u0333',\n\tAcirc: '\\u00C2',\n\tacirc: '\\u00E2',\n\tacute: '\\u00B4',\n\tAcy: '\\u0410',\n\tacy: '\\u0430',\n\tAElig: '\\u00C6',\n\taelig: '\\u00E6',\n\taf: '\\u2061',\n\tAfr: '\\uD835\\uDD04',\n\tafr: '\\uD835\\uDD1E',\n\tAgrave: '\\u00C0',\n\tagrave: '\\u00E0',\n\talefsym: '\\u2135',\n\taleph: '\\u2135',\n\tAlpha: '\\u0391',\n\talpha: '\\u03B1',\n\tAmacr: '\\u0100',\n\tamacr: '\\u0101',\n\tamalg: '\\u2A3F',\n\tAMP: '\\u0026',\n\tamp: '\\u0026',\n\tAnd: '\\u2A53',\n\tand: '\\u2227',\n\tandand: '\\u2A55',\n\tandd: '\\u2A5C',\n\tandslope: '\\u2A58',\n\tandv: '\\u2A5A',\n\tang: '\\u2220',\n\tange: '\\u29A4',\n\tangle: '\\u2220',\n\tangmsd: '\\u2221',\n\tangmsdaa: '\\u29A8',\n\tangmsdab: '\\u29A9',\n\tangmsdac: '\\u29AA',\n\tangmsdad: '\\u29AB',\n\tangmsdae: '\\u29AC',\n\tangmsdaf: '\\u29AD',\n\tangmsdag: '\\u29AE',\n\tangmsdah: '\\u29AF',\n\tangrt: '\\u221F',\n\tangrtvb: '\\u22BE',\n\tangrtvbd: '\\u299D',\n\tangsph: '\\u2222',\n\tangst: '\\u00C5',\n\tangzarr: '\\u237C',\n\tAogon: '\\u0104',\n\taogon: '\\u0105',\n\tAopf: '\\uD835\\uDD38',\n\taopf: '\\uD835\\uDD52',\n\tap: '\\u2248',\n\tapacir: '\\u2A6F',\n\tapE: '\\u2A70',\n\tape: '\\u224A',\n\tapid: '\\u224B',\n\tapos: '\\u0027',\n\tApplyFunction: '\\u2061',\n\tapprox: '\\u2248',\n\tapproxeq: '\\u224A',\n\tAring: '\\u00C5',\n\taring: '\\u00E5',\n\tAscr: '\\uD835\\uDC9C',\n\tascr: '\\uD835\\uDCB6',\n\tAssign: '\\u2254',\n\tast: '\\u002A',\n\tasymp: '\\u2248',\n\tasympeq: '\\u224D',\n\tAtilde: '\\u00C3',\n\tatilde: '\\u00E3',\n\tAuml: '\\u00C4',\n\tauml: '\\u00E4',\n\tawconint: '\\u2233',\n\tawint: '\\u2A11',\n\tbackcong: '\\u224C',\n\tbackepsilon: '\\u03F6',\n\tbackprime: '\\u2035',\n\tbacksim: '\\u223D',\n\tbacksimeq: '\\u22CD',\n\tBackslash: '\\u2216',\n\tBarv: '\\u2AE7',\n\tbarvee: '\\u22BD',\n\tBarwed: '\\u2306',\n\tbarwed: '\\u2305',\n\tbarwedge: '\\u2305',\n\tbbrk: '\\u23B5',\n\tbbrktbrk: '\\u23B6',\n\tbcong: '\\u224C',\n\tBcy: '\\u0411',\n\tbcy: '\\u0431',\n\tbdquo: '\\u201E',\n\tbecaus: '\\u2235',\n\tBecause: '\\u2235',\n\tbecause: '\\u2235',\n\tbemptyv: '\\u29B0',\n\tbepsi: '\\u03F6',\n\tbernou: '\\u212C',\n\tBernoullis: '\\u212C',\n\tBeta: '\\u0392',\n\tbeta: '\\u03B2',\n\tbeth: '\\u2136',\n\tbetween: '\\u226C',\n\tBfr: '\\uD835\\uDD05',\n\tbfr: '\\uD835\\uDD1F',\n\tbigcap: '\\u22C2',\n\tbigcirc: '\\u25EF',\n\tbigcup: '\\u22C3',\n\tbigodot: '\\u2A00',\n\tbigoplus: '\\u2A01',\n\tbigotimes: '\\u2A02',\n\tbigsqcup: '\\u2A06',\n\tbigstar: '\\u2605',\n\tbigtriangledown: '\\u25BD',\n\tbigtriangleup: '\\u25B3',\n\tbiguplus: '\\u2A04',\n\tbigvee: '\\u22C1',\n\tbigwedge: '\\u22C0',\n\tbkarow: '\\u290D',\n\tblacklozenge: '\\u29EB',\n\tblacksquare: '\\u25AA',\n\tblacktriangle: '\\u25B4',\n\tblacktriangledown: '\\u25BE',\n\tblacktriangleleft: '\\u25C2',\n\tblacktriangleright: '\\u25B8',\n\tblank: '\\u2423',\n\tblk12: '\\u2592',\n\tblk14: '\\u2591',\n\tblk34: '\\u2593',\n\tblock: '\\u2588',\n\tbne: '\\u003D\\u20E5',\n\tbnequiv: '\\u2261\\u20E5',\n\tbNot: '\\u2AED',\n\tbnot: '\\u2310',\n\tBopf: '\\uD835\\uDD39',\n\tbopf: '\\uD835\\uDD53',\n\tbot: '\\u22A5',\n\tbottom: '\\u22A5',\n\tbowtie: '\\u22C8',\n\tboxbox: '\\u29C9',\n\tboxDL: '\\u2557',\n\tboxDl: '\\u2556',\n\tboxdL: '\\u2555',\n\tboxdl: '\\u2510',\n\tboxDR: '\\u2554',\n\tboxDr: '\\u2553',\n\tboxdR: '\\u2552',\n\tboxdr: '\\u250C',\n\tboxH: '\\u2550',\n\tboxh: '\\u2500',\n\tboxHD: '\\u2566',\n\tboxHd: '\\u2564',\n\tboxhD: '\\u2565',\n\tboxhd: '\\u252C',\n\tboxHU: '\\u2569',\n\tboxHu: '\\u2567',\n\tboxhU: '\\u2568',\n\tboxhu: '\\u2534',\n\tboxminus: '\\u229F',\n\tboxplus: '\\u229E',\n\tboxtimes: '\\u22A0',\n\tboxUL: '\\u255D',\n\tboxUl: '\\u255C',\n\tboxuL: '\\u255B',\n\tboxul: '\\u2518',\n\tboxUR: '\\u255A',\n\tboxUr: '\\u2559',\n\tboxuR: '\\u2558',\n\tboxur: '\\u2514',\n\tboxV: '\\u2551',\n\tboxv: '\\u2502',\n\tboxVH: '\\u256C',\n\tboxVh: '\\u256B',\n\tboxvH: '\\u256A',\n\tboxvh: '\\u253C',\n\tboxVL: '\\u2563',\n\tboxVl: '\\u2562',\n\tboxvL: '\\u2561',\n\tboxvl: '\\u2524',\n\tboxVR: '\\u2560',\n\tboxVr: '\\u255F',\n\tboxvR: '\\u255E',\n\tboxvr: '\\u251C',\n\tbprime: '\\u2035',\n\tBreve: '\\u02D8',\n\tbreve: '\\u02D8',\n\tbrvbar: '\\u00A6',\n\tBscr: '\\u212C',\n\tbscr: '\\uD835\\uDCB7',\n\tbsemi: '\\u204F',\n\tbsim: '\\u223D',\n\tbsime: '\\u22CD',\n\tbsol: '\\u005C',\n\tbsolb: '\\u29C5',\n\tbsolhsub: '\\u27C8',\n\tbull: '\\u2022',\n\tbullet: '\\u2022',\n\tbump: '\\u224E',\n\tbumpE: '\\u2AAE',\n\tbumpe: '\\u224F',\n\tBumpeq: '\\u224E',\n\tbumpeq: '\\u224F',\n\tCacute: '\\u0106',\n\tcacute: '\\u0107',\n\tCap: '\\u22D2',\n\tcap: '\\u2229',\n\tcapand: '\\u2A44',\n\tcapbrcup: '\\u2A49',\n\tcapcap: '\\u2A4B',\n\tcapcup: '\\u2A47',\n\tcapdot: '\\u2A40',\n\tCapitalDifferentialD: '\\u2145',\n\tcaps: '\\u2229\\uFE00',\n\tcaret: '\\u2041',\n\tcaron: '\\u02C7',\n\tCayleys: '\\u212D',\n\tccaps: '\\u2A4D',\n\tCcaron: '\\u010C',\n\tccaron: '\\u010D',\n\tCcedil: '\\u00C7',\n\tccedil: '\\u00E7',\n\tCcirc: '\\u0108',\n\tccirc: '\\u0109',\n\tCconint: '\\u2230',\n\tccups: '\\u2A4C',\n\tccupssm: '\\u2A50',\n\tCdot: '\\u010A',\n\tcdot: '\\u010B',\n\tcedil: '\\u00B8',\n\tCedilla: '\\u00B8',\n\tcemptyv: '\\u29B2',\n\tcent: '\\u00A2',\n\tCenterDot: '\\u00B7',\n\tcenterdot: '\\u00B7',\n\tCfr: '\\u212D',\n\tcfr: '\\uD835\\uDD20',\n\tCHcy: '\\u0427',\n\tchcy: '\\u0447',\n\tcheck: '\\u2713',\n\tcheckmark: '\\u2713',\n\tChi: '\\u03A7',\n\tchi: '\\u03C7',\n\tcir: '\\u25CB',\n\tcirc: '\\u02C6',\n\tcirceq: '\\u2257',\n\tcirclearrowleft: '\\u21BA',\n\tcirclearrowright: '\\u21BB',\n\tcircledast: '\\u229B',\n\tcircledcirc: '\\u229A',\n\tcircleddash: '\\u229D',\n\tCircleDot: '\\u2299',\n\tcircledR: '\\u00AE',\n\tcircledS: '\\u24C8',\n\tCircleMinus: '\\u2296',\n\tCirclePlus: '\\u2295',\n\tCircleTimes: '\\u2297',\n\tcirE: '\\u29C3',\n\tcire: '\\u2257',\n\tcirfnint: '\\u2A10',\n\tcirmid: '\\u2AEF',\n\tcirscir: '\\u29C2',\n\tClockwiseContourIntegral: '\\u2232',\n\tCloseCurlyDoubleQuote: '\\u201D',\n\tCloseCurlyQuote: '\\u2019',\n\tclubs: '\\u2663',\n\tclubsuit: '\\u2663',\n\tColon: '\\u2237',\n\tcolon: '\\u003A',\n\tColone: '\\u2A74',\n\tcolone: '\\u2254',\n\tcoloneq: '\\u2254',\n\tcomma: '\\u002C',\n\tcommat: '\\u0040',\n\tcomp: '\\u2201',\n\tcompfn: '\\u2218',\n\tcomplement: '\\u2201',\n\tcomplexes: '\\u2102',\n\tcong: '\\u2245',\n\tcongdot: '\\u2A6D',\n\tCongruent: '\\u2261',\n\tConint: '\\u222F',\n\tconint: '\\u222E',\n\tContourIntegral: '\\u222E',\n\tCopf: '\\u2102',\n\tcopf: '\\uD835\\uDD54',\n\tcoprod: '\\u2210',\n\tCoproduct: '\\u2210',\n\tCOPY: '\\u00A9',\n\tcopy: '\\u00A9',\n\tcopysr: '\\u2117',\n\tCounterClockwiseContourIntegral: '\\u2233',\n\tcrarr: '\\u21B5',\n\tCross: '\\u2A2F',\n\tcross: '\\u2717',\n\tCscr: '\\uD835\\uDC9E',\n\tcscr: '\\uD835\\uDCB8',\n\tcsub: '\\u2ACF',\n\tcsube: '\\u2AD1',\n\tcsup: '\\u2AD0',\n\tcsupe: '\\u2AD2',\n\tctdot: '\\u22EF',\n\tcudarrl: '\\u2938',\n\tcudarrr: '\\u2935',\n\tcuepr: '\\u22DE',\n\tcuesc: '\\u22DF',\n\tcularr: '\\u21B6',\n\tcularrp: '\\u293D',\n\tCup: '\\u22D3',\n\tcup: '\\u222A',\n\tcupbrcap: '\\u2A48',\n\tCupCap: '\\u224D',\n\tcupcap: '\\u2A46',\n\tcupcup: '\\u2A4A',\n\tcupdot: '\\u228D',\n\tcupor: '\\u2A45',\n\tcups: '\\u222A\\uFE00',\n\tcurarr: '\\u21B7',\n\tcurarrm: '\\u293C',\n\tcurlyeqprec: '\\u22DE',\n\tcurlyeqsucc: '\\u22DF',\n\tcurlyvee: '\\u22CE',\n\tcurlywedge: '\\u22CF',\n\tcurren: '\\u00A4',\n\tcurvearrowleft: '\\u21B6',\n\tcurvearrowright: '\\u21B7',\n\tcuvee: '\\u22CE',\n\tcuwed: '\\u22CF',\n\tcwconint: '\\u2232',\n\tcwint: '\\u2231',\n\tcylcty: '\\u232D',\n\tDagger: '\\u2021',\n\tdagger: '\\u2020',\n\tdaleth: '\\u2138',\n\tDarr: '\\u21A1',\n\tdArr: '\\u21D3',\n\tdarr: '\\u2193',\n\tdash: '\\u2010',\n\tDashv: '\\u2AE4',\n\tdashv: '\\u22A3',\n\tdbkarow: '\\u290F',\n\tdblac: '\\u02DD',\n\tDcaron: '\\u010E',\n\tdcaron: '\\u010F',\n\tDcy: '\\u0414',\n\tdcy: '\\u0434',\n\tDD: '\\u2145',\n\tdd: '\\u2146',\n\tddagger: '\\u2021',\n\tddarr: '\\u21CA',\n\tDDotrahd: '\\u2911',\n\tddotseq: '\\u2A77',\n\tdeg: '\\u00B0',\n\tDel: '\\u2207',\n\tDelta: '\\u0394',\n\tdelta: '\\u03B4',\n\tdemptyv: '\\u29B1',\n\tdfisht: '\\u297F',\n\tDfr: '\\uD835\\uDD07',\n\tdfr: '\\uD835\\uDD21',\n\tdHar: '\\u2965',\n\tdharl: '\\u21C3',\n\tdharr: '\\u21C2',\n\tDiacriticalAcute: '\\u00B4',\n\tDiacriticalDot: '\\u02D9',\n\tDiacriticalDoubleAcute: '\\u02DD',\n\tDiacriticalGrave: '\\u0060',\n\tDiacriticalTilde: '\\u02DC',\n\tdiam: '\\u22C4',\n\tDiamond: '\\u22C4',\n\tdiamond: '\\u22C4',\n\tdiamondsuit: '\\u2666',\n\tdiams: '\\u2666',\n\tdie: '\\u00A8',\n\tDifferentialD: '\\u2146',\n\tdigamma: '\\u03DD',\n\tdisin: '\\u22F2',\n\tdiv: '\\u00F7',\n\tdivide: '\\u00F7',\n\tdivideontimes: '\\u22C7',\n\tdivonx: '\\u22C7',\n\tDJcy: '\\u0402',\n\tdjcy: '\\u0452',\n\tdlcorn: '\\u231E',\n\tdlcrop: '\\u230D',\n\tdollar: '\\u0024',\n\tDopf: '\\uD835\\uDD3B',\n\tdopf: '\\uD835\\uDD55',\n\tDot: '\\u00A8',\n\tdot: '\\u02D9',\n\tDotDot: '\\u20DC',\n\tdoteq: '\\u2250',\n\tdoteqdot: '\\u2251',\n\tDotEqual: '\\u2250',\n\tdotminus: '\\u2238',\n\tdotplus: '\\u2214',\n\tdotsquare: '\\u22A1',\n\tdoublebarwedge: '\\u2306',\n\tDoubleContourIntegral: '\\u222F',\n\tDoubleDot: '\\u00A8',\n\tDoubleDownArrow: '\\u21D3',\n\tDoubleLeftArrow: '\\u21D0',\n\tDoubleLeftRightArrow: '\\u21D4',\n\tDoubleLeftTee: '\\u2AE4',\n\tDoubleLongLeftArrow: '\\u27F8',\n\tDoubleLongLeftRightArrow: '\\u27FA',\n\tDoubleLongRightArrow: '\\u27F9',\n\tDoubleRightArrow: '\\u21D2',\n\tDoubleRightTee: '\\u22A8',\n\tDoubleUpArrow: '\\u21D1',\n\tDoubleUpDownArrow: '\\u21D5',\n\tDoubleVerticalBar: '\\u2225',\n\tDownArrow: '\\u2193',\n\tDownarrow: '\\u21D3',\n\tdownarrow: '\\u2193',\n\tDownArrowBar: '\\u2913',\n\tDownArrowUpArrow: '\\u21F5',\n\tDownBreve: '\\u0311',\n\tdowndownarrows: '\\u21CA',\n\tdownharpoonleft: '\\u21C3',\n\tdownharpoonright: '\\u21C2',\n\tDownLeftRightVector: '\\u2950',\n\tDownLeftTeeVector: '\\u295E',\n\tDownLeftVector: '\\u21BD',\n\tDownLeftVectorBar: '\\u2956',\n\tDownRightTeeVector: '\\u295F',\n\tDownRightVector: '\\u21C1',\n\tDownRightVectorBar: '\\u2957',\n\tDownTee: '\\u22A4',\n\tDownTeeArrow: '\\u21A7',\n\tdrbkarow: '\\u2910',\n\tdrcorn: '\\u231F',\n\tdrcrop: '\\u230C',\n\tDscr: '\\uD835\\uDC9F',\n\tdscr: '\\uD835\\uDCB9',\n\tDScy: '\\u0405',\n\tdscy: '\\u0455',\n\tdsol: '\\u29F6',\n\tDstrok: '\\u0110',\n\tdstrok: '\\u0111',\n\tdtdot: '\\u22F1',\n\tdtri: '\\u25BF',\n\tdtrif: '\\u25BE',\n\tduarr: '\\u21F5',\n\tduhar: '\\u296F',\n\tdwangle: '\\u29A6',\n\tDZcy: '\\u040F',\n\tdzcy: '\\u045F',\n\tdzigrarr: '\\u27FF',\n\tEacute: '\\u00C9',\n\teacute: '\\u00E9',\n\teaster: '\\u2A6E',\n\tEcaron: '\\u011A',\n\tecaron: '\\u011B',\n\tecir: '\\u2256',\n\tEcirc: '\\u00CA',\n\tecirc: '\\u00EA',\n\tecolon: '\\u2255',\n\tEcy: '\\u042D',\n\tecy: '\\u044D',\n\teDDot: '\\u2A77',\n\tEdot: '\\u0116',\n\teDot: '\\u2251',\n\tedot: '\\u0117',\n\tee: '\\u2147',\n\tefDot: '\\u2252',\n\tEfr: '\\uD835\\uDD08',\n\tefr: '\\uD835\\uDD22',\n\teg: '\\u2A9A',\n\tEgrave: '\\u00C8',\n\tegrave: '\\u00E8',\n\tegs: '\\u2A96',\n\tegsdot: '\\u2A98',\n\tel: '\\u2A99',\n\tElement: '\\u2208',\n\telinters: '\\u23E7',\n\tell: '\\u2113',\n\tels: '\\u2A95',\n\telsdot: '\\u2A97',\n\tEmacr: '\\u0112',\n\temacr: '\\u0113',\n\tempty: '\\u2205',\n\temptyset: '\\u2205',\n\tEmptySmallSquare: '\\u25FB',\n\temptyv: '\\u2205',\n\tEmptyVerySmallSquare: '\\u25AB',\n\temsp: '\\u2003',\n\temsp13: '\\u2004',\n\temsp14: '\\u2005',\n\tENG: '\\u014A',\n\teng: '\\u014B',\n\tensp: '\\u2002',\n\tEogon: '\\u0118',\n\teogon: '\\u0119',\n\tEopf: '\\uD835\\uDD3C',\n\teopf: '\\uD835\\uDD56',\n\tepar: '\\u22D5',\n\teparsl: '\\u29E3',\n\teplus: '\\u2A71',\n\tepsi: '\\u03B5',\n\tEpsilon: '\\u0395',\n\tepsilon: '\\u03B5',\n\tepsiv: '\\u03F5',\n\teqcirc: '\\u2256',\n\teqcolon: '\\u2255',\n\teqsim: '\\u2242',\n\teqslantgtr: '\\u2A96',\n\teqslantless: '\\u2A95',\n\tEqual: '\\u2A75',\n\tequals: '\\u003D',\n\tEqualTilde: '\\u2242',\n\tequest: '\\u225F',\n\tEquilibrium: '\\u21CC',\n\tequiv: '\\u2261',\n\tequivDD: '\\u2A78',\n\teqvparsl: '\\u29E5',\n\terarr: '\\u2971',\n\terDot: '\\u2253',\n\tEscr: '\\u2130',\n\tescr: '\\u212F',\n\tesdot: '\\u2250',\n\tEsim: '\\u2A73',\n\tesim: '\\u2242',\n\tEta: '\\u0397',\n\teta: '\\u03B7',\n\tETH: '\\u00D0',\n\teth: '\\u00F0',\n\tEuml: '\\u00CB',\n\teuml: '\\u00EB',\n\teuro: '\\u20AC',\n\texcl: '\\u0021',\n\texist: '\\u2203',\n\tExists: '\\u2203',\n\texpectation: '\\u2130',\n\tExponentialE: '\\u2147',\n\texponentiale: '\\u2147',\n\tfallingdotseq: '\\u2252',\n\tFcy: '\\u0424',\n\tfcy: '\\u0444',\n\tfemale: '\\u2640',\n\tffilig: '\\uFB03',\n\tfflig: '\\uFB00',\n\tffllig: '\\uFB04',\n\tFfr: '\\uD835\\uDD09',\n\tffr: '\\uD835\\uDD23',\n\tfilig: '\\uFB01',\n\tFilledSmallSquare: '\\u25FC',\n\tFilledVerySmallSquare: '\\u25AA',\n\tfjlig: '\\u0066\\u006A',\n\tflat: '\\u266D',\n\tfllig: '\\uFB02',\n\tfltns: '\\u25B1',\n\tfnof: '\\u0192',\n\tFopf: '\\uD835\\uDD3D',\n\tfopf: '\\uD835\\uDD57',\n\tForAll: '\\u2200',\n\tforall: '\\u2200',\n\tfork: '\\u22D4',\n\tforkv: '\\u2AD9',\n\tFouriertrf: '\\u2131',\n\tfpartint: '\\u2A0D',\n\tfrac12: '\\u00BD',\n\tfrac13: '\\u2153',\n\tfrac14: '\\u00BC',\n\tfrac15: '\\u2155',\n\tfrac16: '\\u2159',\n\tfrac18: '\\u215B',\n\tfrac23: '\\u2154',\n\tfrac25: '\\u2156',\n\tfrac34: '\\u00BE',\n\tfrac35: '\\u2157',\n\tfrac38: '\\u215C',\n\tfrac45: '\\u2158',\n\tfrac56: '\\u215A',\n\tfrac58: '\\u215D',\n\tfrac78: '\\u215E',\n\tfrasl: '\\u2044',\n\tfrown: '\\u2322',\n\tFscr: '\\u2131',\n\tfscr: '\\uD835\\uDCBB',\n\tgacute: '\\u01F5',\n\tGamma: '\\u0393',\n\tgamma: '\\u03B3',\n\tGammad: '\\u03DC',\n\tgammad: '\\u03DD',\n\tgap: '\\u2A86',\n\tGbreve: '\\u011E',\n\tgbreve: '\\u011F',\n\tGcedil: '\\u0122',\n\tGcirc: '\\u011C',\n\tgcirc: '\\u011D',\n\tGcy: '\\u0413',\n\tgcy: '\\u0433',\n\tGdot: '\\u0120',\n\tgdot: '\\u0121',\n\tgE: '\\u2267',\n\tge: '\\u2265',\n\tgEl: '\\u2A8C',\n\tgel: '\\u22DB',\n\tgeq: '\\u2265',\n\tgeqq: '\\u2267',\n\tgeqslant: '\\u2A7E',\n\tges: '\\u2A7E',\n\tgescc: '\\u2AA9',\n\tgesdot: '\\u2A80',\n\tgesdoto: '\\u2A82',\n\tgesdotol: '\\u2A84',\n\tgesl: '\\u22DB\\uFE00',\n\tgesles: '\\u2A94',\n\tGfr: '\\uD835\\uDD0A',\n\tgfr: '\\uD835\\uDD24',\n\tGg: '\\u22D9',\n\tgg: '\\u226B',\n\tggg: '\\u22D9',\n\tgimel: '\\u2137',\n\tGJcy: '\\u0403',\n\tgjcy: '\\u0453',\n\tgl: '\\u2277',\n\tgla: '\\u2AA5',\n\tglE: '\\u2A92',\n\tglj: '\\u2AA4',\n\tgnap: '\\u2A8A',\n\tgnapprox: '\\u2A8A',\n\tgnE: '\\u2269',\n\tgne: '\\u2A88',\n\tgneq: '\\u2A88',\n\tgneqq: '\\u2269',\n\tgnsim: '\\u22E7',\n\tGopf: '\\uD835\\uDD3E',\n\tgopf: '\\uD835\\uDD58',\n\tgrave: '\\u0060',\n\tGreaterEqual: '\\u2265',\n\tGreaterEqualLess: '\\u22DB',\n\tGreaterFullEqual: '\\u2267',\n\tGreaterGreater: '\\u2AA2',\n\tGreaterLess: '\\u2277',\n\tGreaterSlantEqual: '\\u2A7E',\n\tGreaterTilde: '\\u2273',\n\tGscr: '\\uD835\\uDCA2',\n\tgscr: '\\u210A',\n\tgsim: '\\u2273',\n\tgsime: '\\u2A8E',\n\tgsiml: '\\u2A90',\n\tGt: '\\u226B',\n\tGT: '\\u003E',\n\tgt: '\\u003E',\n\tgtcc: '\\u2AA7',\n\tgtcir: '\\u2A7A',\n\tgtdot: '\\u22D7',\n\tgtlPar: '\\u2995',\n\tgtquest: '\\u2A7C',\n\tgtrapprox: '\\u2A86',\n\tgtrarr: '\\u2978',\n\tgtrdot: '\\u22D7',\n\tgtreqless: '\\u22DB',\n\tgtreqqless: '\\u2A8C',\n\tgtrless: '\\u2277',\n\tgtrsim: '\\u2273',\n\tgvertneqq: '\\u2269\\uFE00',\n\tgvnE: '\\u2269\\uFE00',\n\tHacek: '\\u02C7',\n\thairsp: '\\u200A',\n\thalf: '\\u00BD',\n\thamilt: '\\u210B',\n\tHARDcy: '\\u042A',\n\thardcy: '\\u044A',\n\thArr: '\\u21D4',\n\tharr: '\\u2194',\n\tharrcir: '\\u2948',\n\tharrw: '\\u21AD',\n\tHat: '\\u005E',\n\thbar: '\\u210F',\n\tHcirc: '\\u0124',\n\thcirc: '\\u0125',\n\thearts: '\\u2665',\n\theartsuit: '\\u2665',\n\thellip: '\\u2026',\n\thercon: '\\u22B9',\n\tHfr: '\\u210C',\n\thfr: '\\uD835\\uDD25',\n\tHilbertSpace: '\\u210B',\n\thksearow: '\\u2925',\n\thkswarow: '\\u2926',\n\thoarr: '\\u21FF',\n\thomtht: '\\u223B',\n\thookleftarrow: '\\u21A9',\n\thookrightarrow: '\\u21AA',\n\tHopf: '\\u210D',\n\thopf: '\\uD835\\uDD59',\n\thorbar: '\\u2015',\n\tHorizontalLine: '\\u2500',\n\tHscr: '\\u210B',\n\thscr: '\\uD835\\uDCBD',\n\thslash: '\\u210F',\n\tHstrok: '\\u0126',\n\thstrok: '\\u0127',\n\tHumpDownHump: '\\u224E',\n\tHumpEqual: '\\u224F',\n\thybull: '\\u2043',\n\thyphen: '\\u2010',\n\tIacute: '\\u00CD',\n\tiacute: '\\u00ED',\n\tic: '\\u2063',\n\tIcirc: '\\u00CE',\n\ticirc: '\\u00EE',\n\tIcy: '\\u0418',\n\ticy: '\\u0438',\n\tIdot: '\\u0130',\n\tIEcy: '\\u0415',\n\tiecy: '\\u0435',\n\tiexcl: '\\u00A1',\n\tiff: '\\u21D4',\n\tIfr: '\\u2111',\n\tifr: '\\uD835\\uDD26',\n\tIgrave: '\\u00CC',\n\tigrave: '\\u00EC',\n\tii: '\\u2148',\n\tiiiint: '\\u2A0C',\n\tiiint: '\\u222D',\n\tiinfin: '\\u29DC',\n\tiiota: '\\u2129',\n\tIJlig: '\\u0132',\n\tijlig: '\\u0133',\n\tIm: '\\u2111',\n\tImacr: '\\u012A',\n\timacr: '\\u012B',\n\timage: '\\u2111',\n\tImaginaryI: '\\u2148',\n\timagline: '\\u2110',\n\timagpart: '\\u2111',\n\timath: '\\u0131',\n\timof: '\\u22B7',\n\timped: '\\u01B5',\n\tImplies: '\\u21D2',\n\tin: '\\u2208',\n\tincare: '\\u2105',\n\tinfin: '\\u221E',\n\tinfintie: '\\u29DD',\n\tinodot: '\\u0131',\n\tInt: '\\u222C',\n\tint: '\\u222B',\n\tintcal: '\\u22BA',\n\tintegers: '\\u2124',\n\tIntegral: '\\u222B',\n\tintercal: '\\u22BA',\n\tIntersection: '\\u22C2',\n\tintlarhk: '\\u2A17',\n\tintprod: '\\u2A3C',\n\tInvisibleComma: '\\u2063',\n\tInvisibleTimes: '\\u2062',\n\tIOcy: '\\u0401',\n\tiocy: '\\u0451',\n\tIogon: '\\u012E',\n\tiogon: '\\u012F',\n\tIopf: '\\uD835\\uDD40',\n\tiopf: '\\uD835\\uDD5A',\n\tIota: '\\u0399',\n\tiota: '\\u03B9',\n\tiprod: '\\u2A3C',\n\tiquest: '\\u00BF',\n\tIscr: '\\u2110',\n\tiscr: '\\uD835\\uDCBE',\n\tisin: '\\u2208',\n\tisindot: '\\u22F5',\n\tisinE: '\\u22F9',\n\tisins: '\\u22F4',\n\tisinsv: '\\u22F3',\n\tisinv: '\\u2208',\n\tit: '\\u2062',\n\tItilde: '\\u0128',\n\titilde: '\\u0129',\n\tIukcy: '\\u0406',\n\tiukcy: '\\u0456',\n\tIuml: '\\u00CF',\n\tiuml: '\\u00EF',\n\tJcirc: '\\u0134',\n\tjcirc: '\\u0135',\n\tJcy: '\\u0419',\n\tjcy: '\\u0439',\n\tJfr: '\\uD835\\uDD0D',\n\tjfr: '\\uD835\\uDD27',\n\tjmath: '\\u0237',\n\tJopf: '\\uD835\\uDD41',\n\tjopf: '\\uD835\\uDD5B',\n\tJscr: '\\uD835\\uDCA5',\n\tjscr: '\\uD835\\uDCBF',\n\tJsercy: '\\u0408',\n\tjsercy: '\\u0458',\n\tJukcy: '\\u0404',\n\tjukcy: '\\u0454',\n\tKappa: '\\u039A',\n\tkappa: '\\u03BA',\n\tkappav: '\\u03F0',\n\tKcedil: '\\u0136',\n\tkcedil: '\\u0137',\n\tKcy: '\\u041A',\n\tkcy: '\\u043A',\n\tKfr: '\\uD835\\uDD0E',\n\tkfr: '\\uD835\\uDD28',\n\tkgreen: '\\u0138',\n\tKHcy: '\\u0425',\n\tkhcy: '\\u0445',\n\tKJcy: '\\u040C',\n\tkjcy: '\\u045C',\n\tKopf: '\\uD835\\uDD42',\n\tkopf: '\\uD835\\uDD5C',\n\tKscr: '\\uD835\\uDCA6',\n\tkscr: '\\uD835\\uDCC0',\n\tlAarr: '\\u21DA',\n\tLacute: '\\u0139',\n\tlacute: '\\u013A',\n\tlaemptyv: '\\u29B4',\n\tlagran: '\\u2112',\n\tLambda: '\\u039B',\n\tlambda: '\\u03BB',\n\tLang: '\\u27EA',\n\tlang: '\\u27E8',\n\tlangd: '\\u2991',\n\tlangle: '\\u27E8',\n\tlap: '\\u2A85',\n\tLaplacetrf: '\\u2112',\n\tlaquo: '\\u00AB',\n\tLarr: '\\u219E',\n\tlArr: '\\u21D0',\n\tlarr: '\\u2190',\n\tlarrb: '\\u21E4',\n\tlarrbfs: '\\u291F',\n\tlarrfs: '\\u291D',\n\tlarrhk: '\\u21A9',\n\tlarrlp: '\\u21AB',\n\tlarrpl: '\\u2939',\n\tlarrsim: '\\u2973',\n\tlarrtl: '\\u21A2',\n\tlat: '\\u2AAB',\n\tlAtail: '\\u291B',\n\tlatail: '\\u2919',\n\tlate: '\\u2AAD',\n\tlates: '\\u2AAD\\uFE00',\n\tlBarr: '\\u290E',\n\tlbarr: '\\u290C',\n\tlbbrk: '\\u2772',\n\tlbrace: '\\u007B',\n\tlbrack: '\\u005B',\n\tlbrke: '\\u298B',\n\tlbrksld: '\\u298F',\n\tlbrkslu: '\\u298D',\n\tLcaron: '\\u013D',\n\tlcaron: '\\u013E',\n\tLcedil: '\\u013B',\n\tlcedil: '\\u013C',\n\tlceil: '\\u2308',\n\tlcub: '\\u007B',\n\tLcy: '\\u041B',\n\tlcy: '\\u043B',\n\tldca: '\\u2936',\n\tldquo: '\\u201C',\n\tldquor: '\\u201E',\n\tldrdhar: '\\u2967',\n\tldrushar: '\\u294B',\n\tldsh: '\\u21B2',\n\tlE: '\\u2266',\n\tle: '\\u2264',\n\tLeftAngleBracket: '\\u27E8',\n\tLeftArrow: '\\u2190',\n\tLeftarrow: '\\u21D0',\n\tleftarrow: '\\u2190',\n\tLeftArrowBar: '\\u21E4',\n\tLeftArrowRightArrow: '\\u21C6',\n\tleftarrowtail: '\\u21A2',\n\tLeftCeiling: '\\u2308',\n\tLeftDoubleBracket: '\\u27E6',\n\tLeftDownTeeVector: '\\u2961',\n\tLeftDownVector: '\\u21C3',\n\tLeftDownVectorBar: '\\u2959',\n\tLeftFloor: '\\u230A',\n\tleftharpoondown: '\\u21BD',\n\tleftharpoonup: '\\u21BC',\n\tleftleftarrows: '\\u21C7',\n\tLeftRightArrow: '\\u2194',\n\tLeftrightarrow: '\\u21D4',\n\tleftrightarrow: '\\u2194',\n\tleftrightarrows: '\\u21C6',\n\tleftrightharpoons: '\\u21CB',\n\tleftrightsquigarrow: '\\u21AD',\n\tLeftRightVector: '\\u294E',\n\tLeftTee: '\\u22A3',\n\tLeftTeeArrow: '\\u21A4',\n\tLeftTeeVector: '\\u295A',\n\tleftthreetimes: '\\u22CB',\n\tLeftTriangle: '\\u22B2',\n\tLeftTriangleBar: '\\u29CF',\n\tLeftTriangleEqual: '\\u22B4',\n\tLeftUpDownVector: '\\u2951',\n\tLeftUpTeeVector: '\\u2960',\n\tLeftUpVector: '\\u21BF',\n\tLeftUpVectorBar: '\\u2958',\n\tLeftVector: '\\u21BC',\n\tLeftVectorBar: '\\u2952',\n\tlEg: '\\u2A8B',\n\tleg: '\\u22DA',\n\tleq: '\\u2264',\n\tleqq: '\\u2266',\n\tleqslant: '\\u2A7D',\n\tles: '\\u2A7D',\n\tlescc: '\\u2AA8',\n\tlesdot: '\\u2A7F',\n\tlesdoto: '\\u2A81',\n\tlesdotor: '\\u2A83',\n\tlesg: '\\u22DA\\uFE00',\n\tlesges: '\\u2A93',\n\tlessapprox: '\\u2A85',\n\tlessdot: '\\u22D6',\n\tlesseqgtr: '\\u22DA',\n\tlesseqqgtr: '\\u2A8B',\n\tLessEqualGreater: '\\u22DA',\n\tLessFullEqual: '\\u2266',\n\tLessGreater: '\\u2276',\n\tlessgtr: '\\u2276',\n\tLessLess: '\\u2AA1',\n\tlesssim: '\\u2272',\n\tLessSlantEqual: '\\u2A7D',\n\tLessTilde: '\\u2272',\n\tlfisht: '\\u297C',\n\tlfloor: '\\u230A',\n\tLfr: '\\uD835\\uDD0F',\n\tlfr: '\\uD835\\uDD29',\n\tlg: '\\u2276',\n\tlgE: '\\u2A91',\n\tlHar: '\\u2962',\n\tlhard: '\\u21BD',\n\tlharu: '\\u21BC',\n\tlharul: '\\u296A',\n\tlhblk: '\\u2584',\n\tLJcy: '\\u0409',\n\tljcy: '\\u0459',\n\tLl: '\\u22D8',\n\tll: '\\u226A',\n\tllarr: '\\u21C7',\n\tllcorner: '\\u231E',\n\tLleftarrow: '\\u21DA',\n\tllhard: '\\u296B',\n\tlltri: '\\u25FA',\n\tLmidot: '\\u013F',\n\tlmidot: '\\u0140',\n\tlmoust: '\\u23B0',\n\tlmoustache: '\\u23B0',\n\tlnap: '\\u2A89',\n\tlnapprox: '\\u2A89',\n\tlnE: '\\u2268',\n\tlne: '\\u2A87',\n\tlneq: '\\u2A87',\n\tlneqq: '\\u2268',\n\tlnsim: '\\u22E6',\n\tloang: '\\u27EC',\n\tloarr: '\\u21FD',\n\tlobrk: '\\u27E6',\n\tLongLeftArrow: '\\u27F5',\n\tLongleftarrow: '\\u27F8',\n\tlongleftarrow: '\\u27F5',\n\tLongLeftRightArrow: '\\u27F7',\n\tLongleftrightarrow: '\\u27FA',\n\tlongleftrightarrow: '\\u27F7',\n\tlongmapsto: '\\u27FC',\n\tLongRightArrow: '\\u27F6',\n\tLongrightarrow: '\\u27F9',\n\tlongrightarrow: '\\u27F6',\n\tlooparrowleft: '\\u21AB',\n\tlooparrowright: '\\u21AC',\n\tlopar: '\\u2985',\n\tLopf: '\\uD835\\uDD43',\n\tlopf: '\\uD835\\uDD5D',\n\tloplus: '\\u2A2D',\n\tlotimes: '\\u2A34',\n\tlowast: '\\u2217',\n\tlowbar: '\\u005F',\n\tLowerLeftArrow: '\\u2199',\n\tLowerRightArrow: '\\u2198',\n\tloz: '\\u25CA',\n\tlozenge: '\\u25CA',\n\tlozf: '\\u29EB',\n\tlpar: '\\u0028',\n\tlparlt: '\\u2993',\n\tlrarr: '\\u21C6',\n\tlrcorner: '\\u231F',\n\tlrhar: '\\u21CB',\n\tlrhard: '\\u296D',\n\tlrm: '\\u200E',\n\tlrtri: '\\u22BF',\n\tlsaquo: '\\u2039',\n\tLscr: '\\u2112',\n\tlscr: '\\uD835\\uDCC1',\n\tLsh: '\\u21B0',\n\tlsh: '\\u21B0',\n\tlsim: '\\u2272',\n\tlsime: '\\u2A8D',\n\tlsimg: '\\u2A8F',\n\tlsqb: '\\u005B',\n\tlsquo: '\\u2018',\n\tlsquor: '\\u201A',\n\tLstrok: '\\u0141',\n\tlstrok: '\\u0142',\n\tLt: '\\u226A',\n\tLT: '\\u003C',\n\tlt: '\\u003C',\n\tltcc: '\\u2AA6',\n\tltcir: '\\u2A79',\n\tltdot: '\\u22D6',\n\tlthree: '\\u22CB',\n\tltimes: '\\u22C9',\n\tltlarr: '\\u2976',\n\tltquest: '\\u2A7B',\n\tltri: '\\u25C3',\n\tltrie: '\\u22B4',\n\tltrif: '\\u25C2',\n\tltrPar: '\\u2996',\n\tlurdshar: '\\u294A',\n\tluruhar: '\\u2966',\n\tlvertneqq: '\\u2268\\uFE00',\n\tlvnE: '\\u2268\\uFE00',\n\tmacr: '\\u00AF',\n\tmale: '\\u2642',\n\tmalt: '\\u2720',\n\tmaltese: '\\u2720',\n\tMap: '\\u2905',\n\tmap: '\\u21A6',\n\tmapsto: '\\u21A6',\n\tmapstodown: '\\u21A7',\n\tmapstoleft: '\\u21A4',\n\tmapstoup: '\\u21A5',\n\tmarker: '\\u25AE',\n\tmcomma: '\\u2A29',\n\tMcy: '\\u041C',\n\tmcy: '\\u043C',\n\tmdash: '\\u2014',\n\tmDDot: '\\u223A',\n\tmeasuredangle: '\\u2221',\n\tMediumSpace: '\\u205F',\n\tMellintrf: '\\u2133',\n\tMfr: '\\uD835\\uDD10',\n\tmfr: '\\uD835\\uDD2A',\n\tmho: '\\u2127',\n\tmicro: '\\u00B5',\n\tmid: '\\u2223',\n\tmidast: '\\u002A',\n\tmidcir: '\\u2AF0',\n\tmiddot: '\\u00B7',\n\tminus: '\\u2212',\n\tminusb: '\\u229F',\n\tminusd: '\\u2238',\n\tminusdu: '\\u2A2A',\n\tMinusPlus: '\\u2213',\n\tmlcp: '\\u2ADB',\n\tmldr: '\\u2026',\n\tmnplus: '\\u2213',\n\tmodels: '\\u22A7',\n\tMopf: '\\uD835\\uDD44',\n\tmopf: '\\uD835\\uDD5E',\n\tmp: '\\u2213',\n\tMscr: '\\u2133',\n\tmscr: '\\uD835\\uDCC2',\n\tmstpos: '\\u223E',\n\tMu: '\\u039C',\n\tmu: '\\u03BC',\n\tmultimap: '\\u22B8',\n\tmumap: '\\u22B8',\n\tnabla: '\\u2207',\n\tNacute: '\\u0143',\n\tnacute: '\\u0144',\n\tnang: '\\u2220\\u20D2',\n\tnap: '\\u2249',\n\tnapE: '\\u2A70\\u0338',\n\tnapid: '\\u224B\\u0338',\n\tnapos: '\\u0149',\n\tnapprox: '\\u2249',\n\tnatur: '\\u266E',\n\tnatural: '\\u266E',\n\tnaturals: '\\u2115',\n\tnbsp: '\\u00A0',\n\tnbump: '\\u224E\\u0338',\n\tnbumpe: '\\u224F\\u0338',\n\tncap: '\\u2A43',\n\tNcaron: '\\u0147',\n\tncaron: '\\u0148',\n\tNcedil: '\\u0145',\n\tncedil: '\\u0146',\n\tncong: '\\u2247',\n\tncongdot: '\\u2A6D\\u0338',\n\tncup: '\\u2A42',\n\tNcy: '\\u041D',\n\tncy: '\\u043D',\n\tndash: '\\u2013',\n\tne: '\\u2260',\n\tnearhk: '\\u2924',\n\tneArr: '\\u21D7',\n\tnearr: '\\u2197',\n\tnearrow: '\\u2197',\n\tnedot: '\\u2250\\u0338',\n\tNegativeMediumSpace: '\\u200B',\n\tNegativeThickSpace: '\\u200B',\n\tNegativeThinSpace: '\\u200B',\n\tNegativeVeryThinSpace: '\\u200B',\n\tnequiv: '\\u2262',\n\tnesear: '\\u2928',\n\tnesim: '\\u2242\\u0338',\n\tNestedGreaterGreater: '\\u226B',\n\tNestedLessLess: '\\u226A',\n\tNewLine: '\\u000A',\n\tnexist: '\\u2204',\n\tnexists: '\\u2204',\n\tNfr: '\\uD835\\uDD11',\n\tnfr: '\\uD835\\uDD2B',\n\tngE: '\\u2267\\u0338',\n\tnge: '\\u2271',\n\tngeq: '\\u2271',\n\tngeqq: '\\u2267\\u0338',\n\tngeqslant: '\\u2A7E\\u0338',\n\tnges: '\\u2A7E\\u0338',\n\tnGg: '\\u22D9\\u0338',\n\tngsim: '\\u2275',\n\tnGt: '\\u226B\\u20D2',\n\tngt: '\\u226F',\n\tngtr: '\\u226F',\n\tnGtv: '\\u226B\\u0338',\n\tnhArr: '\\u21CE',\n\tnharr: '\\u21AE',\n\tnhpar: '\\u2AF2',\n\tni: '\\u220B',\n\tnis: '\\u22FC',\n\tnisd: '\\u22FA',\n\tniv: '\\u220B',\n\tNJcy: '\\u040A',\n\tnjcy: '\\u045A',\n\tnlArr: '\\u21CD',\n\tnlarr: '\\u219A',\n\tnldr: '\\u2025',\n\tnlE: '\\u2266\\u0338',\n\tnle: '\\u2270',\n\tnLeftarrow: '\\u21CD',\n\tnleftarrow: '\\u219A',\n\tnLeftrightarrow: '\\u21CE',\n\tnleftrightarrow: '\\u21AE',\n\tnleq: '\\u2270',\n\tnleqq: '\\u2266\\u0338',\n\tnleqslant: '\\u2A7D\\u0338',\n\tnles: '\\u2A7D\\u0338',\n\tnless: '\\u226E',\n\tnLl: '\\u22D8\\u0338',\n\tnlsim: '\\u2274',\n\tnLt: '\\u226A\\u20D2',\n\tnlt: '\\u226E',\n\tnltri: '\\u22EA',\n\tnltrie: '\\u22EC',\n\tnLtv: '\\u226A\\u0338',\n\tnmid: '\\u2224',\n\tNoBreak: '\\u2060',\n\tNonBreakingSpace: '\\u00A0',\n\tNopf: '\\u2115',\n\tnopf: '\\uD835\\uDD5F',\n\tNot: '\\u2AEC',\n\tnot: '\\u00AC',\n\tNotCongruent: '\\u2262',\n\tNotCupCap: '\\u226D',\n\tNotDoubleVerticalBar: '\\u2226',\n\tNotElement: '\\u2209',\n\tNotEqual: '\\u2260',\n\tNotEqualTilde: '\\u2242\\u0338',\n\tNotExists: '\\u2204',\n\tNotGreater: '\\u226F',\n\tNotGreaterEqual: '\\u2271',\n\tNotGreaterFullEqual: '\\u2267\\u0338',\n\tNotGreaterGreater: '\\u226B\\u0338',\n\tNotGreaterLess: '\\u2279',\n\tNotGreaterSlantEqual: '\\u2A7E\\u0338',\n\tNotGreaterTilde: '\\u2275',\n\tNotHumpDownHump: '\\u224E\\u0338',\n\tNotHumpEqual: '\\u224F\\u0338',\n\tnotin: '\\u2209',\n\tnotindot: '\\u22F5\\u0338',\n\tnotinE: '\\u22F9\\u0338',\n\tnotinva: '\\u2209',\n\tnotinvb: '\\u22F7',\n\tnotinvc: '\\u22F6',\n\tNotLeftTriangle: '\\u22EA',\n\tNotLeftTriangleBar: '\\u29CF\\u0338',\n\tNotLeftTriangleEqual: '\\u22EC',\n\tNotLess: '\\u226E',\n\tNotLessEqual: '\\u2270',\n\tNotLessGreater: '\\u2278',\n\tNotLessLess: '\\u226A\\u0338',\n\tNotLessSlantEqual: '\\u2A7D\\u0338',\n\tNotLessTilde: '\\u2274',\n\tNotNestedGreaterGreater: '\\u2AA2\\u0338',\n\tNotNestedLessLess: '\\u2AA1\\u0338',\n\tnotni: '\\u220C',\n\tnotniva: '\\u220C',\n\tnotnivb: '\\u22FE',\n\tnotnivc: '\\u22FD',\n\tNotPrecedes: '\\u2280',\n\tNotPrecedesEqual: '\\u2AAF\\u0338',\n\tNotPrecedesSlantEqual: '\\u22E0',\n\tNotReverseElement: '\\u220C',\n\tNotRightTriangle: '\\u22EB',\n\tNotRightTriangleBar: '\\u29D0\\u0338',\n\tNotRightTriangleEqual: '\\u22ED',\n\tNotSquareSubset: '\\u228F\\u0338',\n\tNotSquareSubsetEqual: '\\u22E2',\n\tNotSquareSuperset: '\\u2290\\u0338',\n\tNotSquareSupersetEqual: '\\u22E3',\n\tNotSubset: '\\u2282\\u20D2',\n\tNotSubsetEqual: '\\u2288',\n\tNotSucceeds: '\\u2281',\n\tNotSucceedsEqual: '\\u2AB0\\u0338',\n\tNotSucceedsSlantEqual: '\\u22E1',\n\tNotSucceedsTilde: '\\u227F\\u0338',\n\tNotSuperset: '\\u2283\\u20D2',\n\tNotSupersetEqual: '\\u2289',\n\tNotTilde: '\\u2241',\n\tNotTildeEqual: '\\u2244',\n\tNotTildeFullEqual: '\\u2247',\n\tNotTildeTilde: '\\u2249',\n\tNotVerticalBar: '\\u2224',\n\tnpar: '\\u2226',\n\tnparallel: '\\u2226',\n\tnparsl: '\\u2AFD\\u20E5',\n\tnpart: '\\u2202\\u0338',\n\tnpolint: '\\u2A14',\n\tnpr: '\\u2280',\n\tnprcue: '\\u22E0',\n\tnpre: '\\u2AAF\\u0338',\n\tnprec: '\\u2280',\n\tnpreceq: '\\u2AAF\\u0338',\n\tnrArr: '\\u21CF',\n\tnrarr: '\\u219B',\n\tnrarrc: '\\u2933\\u0338',\n\tnrarrw: '\\u219D\\u0338',\n\tnRightarrow: '\\u21CF',\n\tnrightarrow: '\\u219B',\n\tnrtri: '\\u22EB',\n\tnrtrie: '\\u22ED',\n\tnsc: '\\u2281',\n\tnsccue: '\\u22E1',\n\tnsce: '\\u2AB0\\u0338',\n\tNscr: '\\uD835\\uDCA9',\n\tnscr: '\\uD835\\uDCC3',\n\tnshortmid: '\\u2224',\n\tnshortparallel: '\\u2226',\n\tnsim: '\\u2241',\n\tnsime: '\\u2244',\n\tnsimeq: '\\u2244',\n\tnsmid: '\\u2224',\n\tnspar: '\\u2226',\n\tnsqsube: '\\u22E2',\n\tnsqsupe: '\\u22E3',\n\tnsub: '\\u2284',\n\tnsubE: '\\u2AC5\\u0338',\n\tnsube: '\\u2288',\n\tnsubset: '\\u2282\\u20D2',\n\tnsubseteq: '\\u2288',\n\tnsubseteqq: '\\u2AC5\\u0338',\n\tnsucc: '\\u2281',\n\tnsucceq: '\\u2AB0\\u0338',\n\tnsup: '\\u2285',\n\tnsupE: '\\u2AC6\\u0338',\n\tnsupe: '\\u2289',\n\tnsupset: '\\u2283\\u20D2',\n\tnsupseteq: '\\u2289',\n\tnsupseteqq: '\\u2AC6\\u0338',\n\tntgl: '\\u2279',\n\tNtilde: '\\u00D1',\n\tntilde: '\\u00F1',\n\tntlg: '\\u2278',\n\tntriangleleft: '\\u22EA',\n\tntrianglelefteq: '\\u22EC',\n\tntriangleright: '\\u22EB',\n\tntrianglerighteq: '\\u22ED',\n\tNu: '\\u039D',\n\tnu: '\\u03BD',\n\tnum: '\\u0023',\n\tnumero: '\\u2116',\n\tnumsp: '\\u2007',\n\tnvap: '\\u224D\\u20D2',\n\tnVDash: '\\u22AF',\n\tnVdash: '\\u22AE',\n\tnvDash: '\\u22AD',\n\tnvdash: '\\u22AC',\n\tnvge: '\\u2265\\u20D2',\n\tnvgt: '\\u003E\\u20D2',\n\tnvHarr: '\\u2904',\n\tnvinfin: '\\u29DE',\n\tnvlArr: '\\u2902',\n\tnvle: '\\u2264\\u20D2',\n\tnvlt: '\\u003C\\u20D2',\n\tnvltrie: '\\u22B4\\u20D2',\n\tnvrArr: '\\u2903',\n\tnvrtrie: '\\u22B5\\u20D2',\n\tnvsim: '\\u223C\\u20D2',\n\tnwarhk: '\\u2923',\n\tnwArr: '\\u21D6',\n\tnwarr: '\\u2196',\n\tnwarrow: '\\u2196',\n\tnwnear: '\\u2927',\n\tOacute: '\\u00D3',\n\toacute: '\\u00F3',\n\toast: '\\u229B',\n\tocir: '\\u229A',\n\tOcirc: '\\u00D4',\n\tocirc: '\\u00F4',\n\tOcy: '\\u041E',\n\tocy: '\\u043E',\n\todash: '\\u229D',\n\tOdblac: '\\u0150',\n\todblac: '\\u0151',\n\todiv: '\\u2A38',\n\todot: '\\u2299',\n\todsold: '\\u29BC',\n\tOElig: '\\u0152',\n\toelig: '\\u0153',\n\tofcir: '\\u29BF',\n\tOfr: '\\uD835\\uDD12',\n\tofr: '\\uD835\\uDD2C',\n\togon: '\\u02DB',\n\tOgrave: '\\u00D2',\n\tograve: '\\u00F2',\n\togt: '\\u29C1',\n\tohbar: '\\u29B5',\n\tohm: '\\u03A9',\n\toint: '\\u222E',\n\tolarr: '\\u21BA',\n\tolcir: '\\u29BE',\n\tolcross: '\\u29BB',\n\toline: '\\u203E',\n\tolt: '\\u29C0',\n\tOmacr: '\\u014C',\n\tomacr: '\\u014D',\n\tOmega: '\\u03A9',\n\tomega: '\\u03C9',\n\tOmicron: '\\u039F',\n\tomicron: '\\u03BF',\n\tomid: '\\u29B6',\n\tominus: '\\u2296',\n\tOopf: '\\uD835\\uDD46',\n\toopf: '\\uD835\\uDD60',\n\topar: '\\u29B7',\n\tOpenCurlyDoubleQuote: '\\u201C',\n\tOpenCurlyQuote: '\\u2018',\n\toperp: '\\u29B9',\n\toplus: '\\u2295',\n\tOr: '\\u2A54',\n\tor: '\\u2228',\n\torarr: '\\u21BB',\n\tord: '\\u2A5D',\n\torder: '\\u2134',\n\torderof: '\\u2134',\n\tordf: '\\u00AA',\n\tordm: '\\u00BA',\n\torigof: '\\u22B6',\n\toror: '\\u2A56',\n\torslope: '\\u2A57',\n\torv: '\\u2A5B',\n\toS: '\\u24C8',\n\tOscr: '\\uD835\\uDCAA',\n\toscr: '\\u2134',\n\tOslash: '\\u00D8',\n\toslash: '\\u00F8',\n\tosol: '\\u2298',\n\tOtilde: '\\u00D5',\n\totilde: '\\u00F5',\n\tOtimes: '\\u2A37',\n\totimes: '\\u2297',\n\totimesas: '\\u2A36',\n\tOuml: '\\u00D6',\n\touml: '\\u00F6',\n\tovbar: '\\u233D',\n\tOverBar: '\\u203E',\n\tOverBrace: '\\u23DE',\n\tOverBracket: '\\u23B4',\n\tOverParenthesis: '\\u23DC',\n\tpar: '\\u2225',\n\tpara: '\\u00B6',\n\tparallel: '\\u2225',\n\tparsim: '\\u2AF3',\n\tparsl: '\\u2AFD',\n\tpart: '\\u2202',\n\tPartialD: '\\u2202',\n\tPcy: '\\u041F',\n\tpcy: '\\u043F',\n\tpercnt: '\\u0025',\n\tperiod: '\\u002E',\n\tpermil: '\\u2030',\n\tperp: '\\u22A5',\n\tpertenk: '\\u2031',\n\tPfr: '\\uD835\\uDD13',\n\tpfr: '\\uD835\\uDD2D',\n\tPhi: '\\u03A6',\n\tphi: '\\u03C6',\n\tphiv: '\\u03D5',\n\tphmmat: '\\u2133',\n\tphone: '\\u260E',\n\tPi: '\\u03A0',\n\tpi: '\\u03C0',\n\tpitchfork: '\\u22D4',\n\tpiv: '\\u03D6',\n\tplanck: '\\u210F',\n\tplanckh: '\\u210E',\n\tplankv: '\\u210F',\n\tplus: '\\u002B',\n\tplusacir: '\\u2A23',\n\tplusb: '\\u229E',\n\tpluscir: '\\u2A22',\n\tplusdo: '\\u2214',\n\tplusdu: '\\u2A25',\n\tpluse: '\\u2A72',\n\tPlusMinus: '\\u00B1',\n\tplusmn: '\\u00B1',\n\tplussim: '\\u2A26',\n\tplustwo: '\\u2A27',\n\tpm: '\\u00B1',\n\tPoincareplane: '\\u210C',\n\tpointint: '\\u2A15',\n\tPopf: '\\u2119',\n\tpopf: '\\uD835\\uDD61',\n\tpound: '\\u00A3',\n\tPr: '\\u2ABB',\n\tpr: '\\u227A',\n\tprap: '\\u2AB7',\n\tprcue: '\\u227C',\n\tprE: '\\u2AB3',\n\tpre: '\\u2AAF',\n\tprec: '\\u227A',\n\tprecapprox: '\\u2AB7',\n\tpreccurlyeq: '\\u227C',\n\tPrecedes: '\\u227A',\n\tPrecedesEqual: '\\u2AAF',\n\tPrecedesSlantEqual: '\\u227C',\n\tPrecedesTilde: '\\u227E',\n\tpreceq: '\\u2AAF',\n\tprecnapprox: '\\u2AB9',\n\tprecneqq: '\\u2AB5',\n\tprecnsim: '\\u22E8',\n\tprecsim: '\\u227E',\n\tPrime: '\\u2033',\n\tprime: '\\u2032',\n\tprimes: '\\u2119',\n\tprnap: '\\u2AB9',\n\tprnE: '\\u2AB5',\n\tprnsim: '\\u22E8',\n\tprod: '\\u220F',\n\tProduct: '\\u220F',\n\tprofalar: '\\u232E',\n\tprofline: '\\u2312',\n\tprofsurf: '\\u2313',\n\tprop: '\\u221D',\n\tProportion: '\\u2237',\n\tProportional: '\\u221D',\n\tpropto: '\\u221D',\n\tprsim: '\\u227E',\n\tprurel: '\\u22B0',\n\tPscr: '\\uD835\\uDCAB',\n\tpscr: '\\uD835\\uDCC5',\n\tPsi: '\\u03A8',\n\tpsi: '\\u03C8',\n\tpuncsp: '\\u2008',\n\tQfr: '\\uD835\\uDD14',\n\tqfr: '\\uD835\\uDD2E',\n\tqint: '\\u2A0C',\n\tQopf: '\\u211A',\n\tqopf: '\\uD835\\uDD62',\n\tqprime: '\\u2057',\n\tQscr: '\\uD835\\uDCAC',\n\tqscr: '\\uD835\\uDCC6',\n\tquaternions: '\\u210D',\n\tquatint: '\\u2A16',\n\tquest: '\\u003F',\n\tquesteq: '\\u225F',\n\tQUOT: '\\u0022',\n\tquot: '\\u0022',\n\trAarr: '\\u21DB',\n\trace: '\\u223D\\u0331',\n\tRacute: '\\u0154',\n\tracute: '\\u0155',\n\tradic: '\\u221A',\n\traemptyv: '\\u29B3',\n\tRang: '\\u27EB',\n\trang: '\\u27E9',\n\trangd: '\\u2992',\n\trange: '\\u29A5',\n\trangle: '\\u27E9',\n\traquo: '\\u00BB',\n\tRarr: '\\u21A0',\n\trArr: '\\u21D2',\n\trarr: '\\u2192',\n\trarrap: '\\u2975',\n\trarrb: '\\u21E5',\n\trarrbfs: '\\u2920',\n\trarrc: '\\u2933',\n\trarrfs: '\\u291E',\n\trarrhk: '\\u21AA',\n\trarrlp: '\\u21AC',\n\trarrpl: '\\u2945',\n\trarrsim: '\\u2974',\n\tRarrtl: '\\u2916',\n\trarrtl: '\\u21A3',\n\trarrw: '\\u219D',\n\trAtail: '\\u291C',\n\tratail: '\\u291A',\n\tratio: '\\u2236',\n\trationals: '\\u211A',\n\tRBarr: '\\u2910',\n\trBarr: '\\u290F',\n\trbarr: '\\u290D',\n\trbbrk: '\\u2773',\n\trbrace: '\\u007D',\n\trbrack: '\\u005D',\n\trbrke: '\\u298C',\n\trbrksld: '\\u298E',\n\trbrkslu: '\\u2990',\n\tRcaron: '\\u0158',\n\trcaron: '\\u0159',\n\tRcedil: '\\u0156',\n\trcedil: '\\u0157',\n\trceil: '\\u2309',\n\trcub: '\\u007D',\n\tRcy: '\\u0420',\n\trcy: '\\u0440',\n\trdca: '\\u2937',\n\trdldhar: '\\u2969',\n\trdquo: '\\u201D',\n\trdquor: '\\u201D',\n\trdsh: '\\u21B3',\n\tRe: '\\u211C',\n\treal: '\\u211C',\n\trealine: '\\u211B',\n\trealpart: '\\u211C',\n\treals: '\\u211D',\n\trect: '\\u25AD',\n\tREG: '\\u00AE',\n\treg: '\\u00AE',\n\tReverseElement: '\\u220B',\n\tReverseEquilibrium: '\\u21CB',\n\tReverseUpEquilibrium: '\\u296F',\n\trfisht: '\\u297D',\n\trfloor: '\\u230B',\n\tRfr: '\\u211C',\n\trfr: '\\uD835\\uDD2F',\n\trHar: '\\u2964',\n\trhard: '\\u21C1',\n\trharu: '\\u21C0',\n\trharul: '\\u296C',\n\tRho: '\\u03A1',\n\trho: '\\u03C1',\n\trhov: '\\u03F1',\n\tRightAngleBracket: '\\u27E9',\n\tRightArrow: '\\u2192',\n\tRightarrow: '\\u21D2',\n\trightarrow: '\\u2192',\n\tRightArrowBar: '\\u21E5',\n\tRightArrowLeftArrow: '\\u21C4',\n\trightarrowtail: '\\u21A3',\n\tRightCeiling: '\\u2309',\n\tRightDoubleBracket: '\\u27E7',\n\tRightDownTeeVector: '\\u295D',\n\tRightDownVector: '\\u21C2',\n\tRightDownVectorBar: '\\u2955',\n\tRightFloor: '\\u230B',\n\trightharpoondown: '\\u21C1',\n\trightharpoonup: '\\u21C0',\n\trightleftarrows: '\\u21C4',\n\trightleftharpoons: '\\u21CC',\n\trightrightarrows: '\\u21C9',\n\trightsquigarrow: '\\u219D',\n\tRightTee: '\\u22A2',\n\tRightTeeArrow: '\\u21A6',\n\tRightTeeVector: '\\u295B',\n\trightthreetimes: '\\u22CC',\n\tRightTriangle: '\\u22B3',\n\tRightTriangleBar: '\\u29D0',\n\tRightTriangleEqual: '\\u22B5',\n\tRightUpDownVector: '\\u294F',\n\tRightUpTeeVector: '\\u295C',\n\tRightUpVector: '\\u21BE',\n\tRightUpVectorBar: '\\u2954',\n\tRightVector: '\\u21C0',\n\tRightVectorBar: '\\u2953',\n\tring: '\\u02DA',\n\trisingdotseq: '\\u2253',\n\trlarr: '\\u21C4',\n\trlhar: '\\u21CC',\n\trlm: '\\u200F',\n\trmoust: '\\u23B1',\n\trmoustache: '\\u23B1',\n\trnmid: '\\u2AEE',\n\troang: '\\u27ED',\n\troarr: '\\u21FE',\n\trobrk: '\\u27E7',\n\tropar: '\\u2986',\n\tRopf: '\\u211D',\n\tropf: '\\uD835\\uDD63',\n\troplus: '\\u2A2E',\n\trotimes: '\\u2A35',\n\tRoundImplies: '\\u2970',\n\trpar: '\\u0029',\n\trpargt: '\\u2994',\n\trppolint: '\\u2A12',\n\trrarr: '\\u21C9',\n\tRrightarrow: '\\u21DB',\n\trsaquo: '\\u203A',\n\tRscr: '\\u211B',\n\trscr: '\\uD835\\uDCC7',\n\tRsh: '\\u21B1',\n\trsh: '\\u21B1',\n\trsqb: '\\u005D',\n\trsquo: '\\u2019',\n\trsquor: '\\u2019',\n\trthree: '\\u22CC',\n\trtimes: '\\u22CA',\n\trtri: '\\u25B9',\n\trtrie: '\\u22B5',\n\trtrif: '\\u25B8',\n\trtriltri: '\\u29CE',\n\tRuleDelayed: '\\u29F4',\n\truluhar: '\\u2968',\n\trx: '\\u211E',\n\tSacute: '\\u015A',\n\tsacute: '\\u015B',\n\tsbquo: '\\u201A',\n\tSc: '\\u2ABC',\n\tsc: '\\u227B',\n\tscap: '\\u2AB8',\n\tScaron: '\\u0160',\n\tscaron: '\\u0161',\n\tsccue: '\\u227D',\n\tscE: '\\u2AB4',\n\tsce: '\\u2AB0',\n\tScedil: '\\u015E',\n\tscedil: '\\u015F',\n\tScirc: '\\u015C',\n\tscirc: '\\u015D',\n\tscnap: '\\u2ABA',\n\tscnE: '\\u2AB6',\n\tscnsim: '\\u22E9',\n\tscpolint: '\\u2A13',\n\tscsim: '\\u227F',\n\tScy: '\\u0421',\n\tscy: '\\u0441',\n\tsdot: '\\u22C5',\n\tsdotb: '\\u22A1',\n\tsdote: '\\u2A66',\n\tsearhk: '\\u2925',\n\tseArr: '\\u21D8',\n\tsearr: '\\u2198',\n\tsearrow: '\\u2198',\n\tsect: '\\u00A7',\n\tsemi: '\\u003B',\n\tseswar: '\\u2929',\n\tsetminus: '\\u2216',\n\tsetmn: '\\u2216',\n\tsext: '\\u2736',\n\tSfr: '\\uD835\\uDD16',\n\tsfr: '\\uD835\\uDD30',\n\tsfrown: '\\u2322',\n\tsharp: '\\u266F',\n\tSHCHcy: '\\u0429',\n\tshchcy: '\\u0449',\n\tSHcy: '\\u0428',\n\tshcy: '\\u0448',\n\tShortDownArrow: '\\u2193',\n\tShortLeftArrow: '\\u2190',\n\tshortmid: '\\u2223',\n\tshortparallel: '\\u2225',\n\tShortRightArrow: '\\u2192',\n\tShortUpArrow: '\\u2191',\n\tshy: '\\u00AD',\n\tSigma: '\\u03A3',\n\tsigma: '\\u03C3',\n\tsigmaf: '\\u03C2',\n\tsigmav: '\\u03C2',\n\tsim: '\\u223C',\n\tsimdot: '\\u2A6A',\n\tsime: '\\u2243',\n\tsimeq: '\\u2243',\n\tsimg: '\\u2A9E',\n\tsimgE: '\\u2AA0',\n\tsiml: '\\u2A9D',\n\tsimlE: '\\u2A9F',\n\tsimne: '\\u2246',\n\tsimplus: '\\u2A24',\n\tsimrarr: '\\u2972',\n\tslarr: '\\u2190',\n\tSmallCircle: '\\u2218',\n\tsmallsetminus: '\\u2216',\n\tsmashp: '\\u2A33',\n\tsmeparsl: '\\u29E4',\n\tsmid: '\\u2223',\n\tsmile: '\\u2323',\n\tsmt: '\\u2AAA',\n\tsmte: '\\u2AAC',\n\tsmtes: '\\u2AAC\\uFE00',\n\tSOFTcy: '\\u042C',\n\tsoftcy: '\\u044C',\n\tsol: '\\u002F',\n\tsolb: '\\u29C4',\n\tsolbar: '\\u233F',\n\tSopf: '\\uD835\\uDD4A',\n\tsopf: '\\uD835\\uDD64',\n\tspades: '\\u2660',\n\tspadesuit: '\\u2660',\n\tspar: '\\u2225',\n\tsqcap: '\\u2293',\n\tsqcaps: '\\u2293\\uFE00',\n\tsqcup: '\\u2294',\n\tsqcups: '\\u2294\\uFE00',\n\tSqrt: '\\u221A',\n\tsqsub: '\\u228F',\n\tsqsube: '\\u2291',\n\tsqsubset: '\\u228F',\n\tsqsubseteq: '\\u2291',\n\tsqsup: '\\u2290',\n\tsqsupe: '\\u2292',\n\tsqsupset: '\\u2290',\n\tsqsupseteq: '\\u2292',\n\tsqu: '\\u25A1',\n\tSquare: '\\u25A1',\n\tsquare: '\\u25A1',\n\tSquareIntersection: '\\u2293',\n\tSquareSubset: '\\u228F',\n\tSquareSubsetEqual: '\\u2291',\n\tSquareSuperset: '\\u2290',\n\tSquareSupersetEqual: '\\u2292',\n\tSquareUnion: '\\u2294',\n\tsquarf: '\\u25AA',\n\tsquf: '\\u25AA',\n\tsrarr: '\\u2192',\n\tSscr: '\\uD835\\uDCAE',\n\tsscr: '\\uD835\\uDCC8',\n\tssetmn: '\\u2216',\n\tssmile: '\\u2323',\n\tsstarf: '\\u22C6',\n\tStar: '\\u22C6',\n\tstar: '\\u2606',\n\tstarf: '\\u2605',\n\tstraightepsilon: '\\u03F5',\n\tstraightphi: '\\u03D5',\n\tstrns: '\\u00AF',\n\tSub: '\\u22D0',\n\tsub: '\\u2282',\n\tsubdot: '\\u2ABD',\n\tsubE: '\\u2AC5',\n\tsube: '\\u2286',\n\tsubedot: '\\u2AC3',\n\tsubmult: '\\u2AC1',\n\tsubnE: '\\u2ACB',\n\tsubne: '\\u228A',\n\tsubplus: '\\u2ABF',\n\tsubrarr: '\\u2979',\n\tSubset: '\\u22D0',\n\tsubset: '\\u2282',\n\tsubseteq: '\\u2286',\n\tsubseteqq: '\\u2AC5',\n\tSubsetEqual: '\\u2286',\n\tsubsetneq: '\\u228A',\n\tsubsetneqq: '\\u2ACB',\n\tsubsim: '\\u2AC7',\n\tsubsub: '\\u2AD5',\n\tsubsup: '\\u2AD3',\n\tsucc: '\\u227B',\n\tsuccapprox: '\\u2AB8',\n\tsucccurlyeq: '\\u227D',\n\tSucceeds: '\\u227B',\n\tSucceedsEqual: '\\u2AB0',\n\tSucceedsSlantEqual: '\\u227D',\n\tSucceedsTilde: '\\u227F',\n\tsucceq: '\\u2AB0',\n\tsuccnapprox: '\\u2ABA',\n\tsuccneqq: '\\u2AB6',\n\tsuccnsim: '\\u22E9',\n\tsuccsim: '\\u227F',\n\tSuchThat: '\\u220B',\n\tSum: '\\u2211',\n\tsum: '\\u2211',\n\tsung: '\\u266A',\n\tSup: '\\u22D1',\n\tsup: '\\u2283',\n\tsup1: '\\u00B9',\n\tsup2: '\\u00B2',\n\tsup3: '\\u00B3',\n\tsupdot: '\\u2ABE',\n\tsupdsub: '\\u2AD8',\n\tsupE: '\\u2AC6',\n\tsupe: '\\u2287',\n\tsupedot: '\\u2AC4',\n\tSuperset: '\\u2283',\n\tSupersetEqual: '\\u2287',\n\tsuphsol: '\\u27C9',\n\tsuphsub: '\\u2AD7',\n\tsuplarr: '\\u297B',\n\tsupmult: '\\u2AC2',\n\tsupnE: '\\u2ACC',\n\tsupne: '\\u228B',\n\tsupplus: '\\u2AC0',\n\tSupset: '\\u22D1',\n\tsupset: '\\u2283',\n\tsupseteq: '\\u2287',\n\tsupseteqq: '\\u2AC6',\n\tsupsetneq: '\\u228B',\n\tsupsetneqq: '\\u2ACC',\n\tsupsim: '\\u2AC8',\n\tsupsub: '\\u2AD4',\n\tsupsup: '\\u2AD6',\n\tswarhk: '\\u2926',\n\tswArr: '\\u21D9',\n\tswarr: '\\u2199',\n\tswarrow: '\\u2199',\n\tswnwar: '\\u292A',\n\tszlig: '\\u00DF',\n\tTab: '\\u0009',\n\ttarget: '\\u2316',\n\tTau: '\\u03A4',\n\ttau: '\\u03C4',\n\ttbrk: '\\u23B4',\n\tTcaron: '\\u0164',\n\ttcaron: '\\u0165',\n\tTcedil: '\\u0162',\n\ttcedil: '\\u0163',\n\tTcy: '\\u0422',\n\ttcy: '\\u0442',\n\ttdot: '\\u20DB',\n\ttelrec: '\\u2315',\n\tTfr: '\\uD835\\uDD17',\n\ttfr: '\\uD835\\uDD31',\n\tthere4: '\\u2234',\n\tTherefore: '\\u2234',\n\ttherefore: '\\u2234',\n\tTheta: '\\u0398',\n\ttheta: '\\u03B8',\n\tthetasym: '\\u03D1',\n\tthetav: '\\u03D1',\n\tthickapprox: '\\u2248',\n\tthicksim: '\\u223C',\n\tThickSpace: '\\u205F\\u200A',\n\tthinsp: '\\u2009',\n\tThinSpace: '\\u2009',\n\tthkap: '\\u2248',\n\tthksim: '\\u223C',\n\tTHORN: '\\u00DE',\n\tthorn: '\\u00FE',\n\tTilde: '\\u223C',\n\ttilde: '\\u02DC',\n\tTildeEqual: '\\u2243',\n\tTildeFullEqual: '\\u2245',\n\tTildeTilde: '\\u2248',\n\ttimes: '\\u00D7',\n\ttimesb: '\\u22A0',\n\ttimesbar: '\\u2A31',\n\ttimesd: '\\u2A30',\n\ttint: '\\u222D',\n\ttoea: '\\u2928',\n\ttop: '\\u22A4',\n\ttopbot: '\\u2336',\n\ttopcir: '\\u2AF1',\n\tTopf: '\\uD835\\uDD4B',\n\ttopf: '\\uD835\\uDD65',\n\ttopfork: '\\u2ADA',\n\ttosa: '\\u2929',\n\ttprime: '\\u2034',\n\tTRADE: '\\u2122',\n\ttrade: '\\u2122',\n\ttriangle: '\\u25B5',\n\ttriangledown: '\\u25BF',\n\ttriangleleft: '\\u25C3',\n\ttrianglelefteq: '\\u22B4',\n\ttriangleq: '\\u225C',\n\ttriangleright: '\\u25B9',\n\ttrianglerighteq: '\\u22B5',\n\ttridot: '\\u25EC',\n\ttrie: '\\u225C',\n\ttriminus: '\\u2A3A',\n\tTripleDot: '\\u20DB',\n\ttriplus: '\\u2A39',\n\ttrisb: '\\u29CD',\n\ttritime: '\\u2A3B',\n\ttrpezium: '\\u23E2',\n\tTscr: '\\uD835\\uDCAF',\n\ttscr: '\\uD835\\uDCC9',\n\tTScy: '\\u0426',\n\ttscy: '\\u0446',\n\tTSHcy: '\\u040B',\n\ttshcy: '\\u045B',\n\tTstrok: '\\u0166',\n\ttstrok: '\\u0167',\n\ttwixt: '\\u226C',\n\ttwoheadleftarrow: '\\u219E',\n\ttwoheadrightarrow: '\\u21A0',\n\tUacute: '\\u00DA',\n\tuacute: '\\u00FA',\n\tUarr: '\\u219F',\n\tuArr: '\\u21D1',\n\tuarr: '\\u2191',\n\tUarrocir: '\\u2949',\n\tUbrcy: '\\u040E',\n\tubrcy: '\\u045E',\n\tUbreve: '\\u016C',\n\tubreve: '\\u016D',\n\tUcirc: '\\u00DB',\n\tucirc: '\\u00FB',\n\tUcy: '\\u0423',\n\tucy: '\\u0443',\n\tudarr: '\\u21C5',\n\tUdblac: '\\u0170',\n\tudblac: '\\u0171',\n\tudhar: '\\u296E',\n\tufisht: '\\u297E',\n\tUfr: '\\uD835\\uDD18',\n\tufr: '\\uD835\\uDD32',\n\tUgrave: '\\u00D9',\n\tugrave: '\\u00F9',\n\tuHar: '\\u2963',\n\tuharl: '\\u21BF',\n\tuharr: '\\u21BE',\n\tuhblk: '\\u2580',\n\tulcorn: '\\u231C',\n\tulcorner: '\\u231C',\n\tulcrop: '\\u230F',\n\tultri: '\\u25F8',\n\tUmacr: '\\u016A',\n\tumacr: '\\u016B',\n\tuml: '\\u00A8',\n\tUnderBar: '\\u005F',\n\tUnderBrace: '\\u23DF',\n\tUnderBracket: '\\u23B5',\n\tUnderParenthesis: '\\u23DD',\n\tUnion: '\\u22C3',\n\tUnionPlus: '\\u228E',\n\tUogon: '\\u0172',\n\tuogon: '\\u0173',\n\tUopf: '\\uD835\\uDD4C',\n\tuopf: '\\uD835\\uDD66',\n\tUpArrow: '\\u2191',\n\tUparrow: '\\u21D1',\n\tuparrow: '\\u2191',\n\tUpArrowBar: '\\u2912',\n\tUpArrowDownArrow: '\\u21C5',\n\tUpDownArrow: '\\u2195',\n\tUpdownarrow: '\\u21D5',\n\tupdownarrow: '\\u2195',\n\tUpEquilibrium: '\\u296E',\n\tupharpoonleft: '\\u21BF',\n\tupharpoonright: '\\u21BE',\n\tuplus: '\\u228E',\n\tUpperLeftArrow: '\\u2196',\n\tUpperRightArrow: '\\u2197',\n\tUpsi: '\\u03D2',\n\tupsi: '\\u03C5',\n\tupsih: '\\u03D2',\n\tUpsilon: '\\u03A5',\n\tupsilon: '\\u03C5',\n\tUpTee: '\\u22A5',\n\tUpTeeArrow: '\\u21A5',\n\tupuparrows: '\\u21C8',\n\turcorn: '\\u231D',\n\turcorner: '\\u231D',\n\turcrop: '\\u230E',\n\tUring: '\\u016E',\n\turing: '\\u016F',\n\turtri: '\\u25F9',\n\tUscr: '\\uD835\\uDCB0',\n\tuscr: '\\uD835\\uDCCA',\n\tutdot: '\\u22F0',\n\tUtilde: '\\u0168',\n\tutilde: '\\u0169',\n\tutri: '\\u25B5',\n\tutrif: '\\u25B4',\n\tuuarr: '\\u21C8',\n\tUuml: '\\u00DC',\n\tuuml: '\\u00FC',\n\tuwangle: '\\u29A7',\n\tvangrt: '\\u299C',\n\tvarepsilon: '\\u03F5',\n\tvarkappa: '\\u03F0',\n\tvarnothing: '\\u2205',\n\tvarphi: '\\u03D5',\n\tvarpi: '\\u03D6',\n\tvarpropto: '\\u221D',\n\tvArr: '\\u21D5',\n\tvarr: '\\u2195',\n\tvarrho: '\\u03F1',\n\tvarsigma: '\\u03C2',\n\tvarsubsetneq: '\\u228A\\uFE00',\n\tvarsubsetneqq: '\\u2ACB\\uFE00',\n\tvarsupsetneq: '\\u228B\\uFE00',\n\tvarsupsetneqq: '\\u2ACC\\uFE00',\n\tvartheta: '\\u03D1',\n\tvartriangleleft: '\\u22B2',\n\tvartriangleright: '\\u22B3',\n\tVbar: '\\u2AEB',\n\tvBar: '\\u2AE8',\n\tvBarv: '\\u2AE9',\n\tVcy: '\\u0412',\n\tvcy: '\\u0432',\n\tVDash: '\\u22AB',\n\tVdash: '\\u22A9',\n\tvDash: '\\u22A8',\n\tvdash: '\\u22A2',\n\tVdashl: '\\u2AE6',\n\tVee: '\\u22C1',\n\tvee: '\\u2228',\n\tveebar: '\\u22BB',\n\tveeeq: '\\u225A',\n\tvellip: '\\u22EE',\n\tVerbar: '\\u2016',\n\tverbar: '\\u007C',\n\tVert: '\\u2016',\n\tvert: '\\u007C',\n\tVerticalBar: '\\u2223',\n\tVerticalLine: '\\u007C',\n\tVerticalSeparator: '\\u2758',\n\tVerticalTilde: '\\u2240',\n\tVeryThinSpace: '\\u200A',\n\tVfr: '\\uD835\\uDD19',\n\tvfr: '\\uD835\\uDD33',\n\tvltri: '\\u22B2',\n\tvnsub: '\\u2282\\u20D2',\n\tvnsup: '\\u2283\\u20D2',\n\tVopf: '\\uD835\\uDD4D',\n\tvopf: '\\uD835\\uDD67',\n\tvprop: '\\u221D',\n\tvrtri: '\\u22B3',\n\tVscr: '\\uD835\\uDCB1',\n\tvscr: '\\uD835\\uDCCB',\n\tvsubnE: '\\u2ACB\\uFE00',\n\tvsubne: '\\u228A\\uFE00',\n\tvsupnE: '\\u2ACC\\uFE00',\n\tvsupne: '\\u228B\\uFE00',\n\tVvdash: '\\u22AA',\n\tvzigzag: '\\u299A',\n\tWcirc: '\\u0174',\n\twcirc: '\\u0175',\n\twedbar: '\\u2A5F',\n\tWedge: '\\u22C0',\n\twedge: '\\u2227',\n\twedgeq: '\\u2259',\n\tweierp: '\\u2118',\n\tWfr: '\\uD835\\uDD1A',\n\twfr: '\\uD835\\uDD34',\n\tWopf: '\\uD835\\uDD4E',\n\twopf: '\\uD835\\uDD68',\n\twp: '\\u2118',\n\twr: '\\u2240',\n\twreath: '\\u2240',\n\tWscr: '\\uD835\\uDCB2',\n\twscr: '\\uD835\\uDCCC',\n\txcap: '\\u22C2',\n\txcirc: '\\u25EF',\n\txcup: '\\u22C3',\n\txdtri: '\\u25BD',\n\tXfr: '\\uD835\\uDD1B',\n\txfr: '\\uD835\\uDD35',\n\txhArr: '\\u27FA',\n\txharr: '\\u27F7',\n\tXi: '\\u039E',\n\txi: '\\u03BE',\n\txlArr: '\\u27F8',\n\txlarr: '\\u27F5',\n\txmap: '\\u27FC',\n\txnis: '\\u22FB',\n\txodot: '\\u2A00',\n\tXopf: '\\uD835\\uDD4F',\n\txopf: '\\uD835\\uDD69',\n\txoplus: '\\u2A01',\n\txotime: '\\u2A02',\n\txrArr: '\\u27F9',\n\txrarr: '\\u27F6',\n\tXscr: '\\uD835\\uDCB3',\n\txscr: '\\uD835\\uDCCD',\n\txsqcup: '\\u2A06',\n\txuplus: '\\u2A04',\n\txutri: '\\u25B3',\n\txvee: '\\u22C1',\n\txwedge: '\\u22C0',\n\tYacute: '\\u00DD',\n\tyacute: '\\u00FD',\n\tYAcy: '\\u042F',\n\tyacy: '\\u044F',\n\tYcirc: '\\u0176',\n\tycirc: '\\u0177',\n\tYcy: '\\u042B',\n\tycy: '\\u044B',\n\tyen: '\\u00A5',\n\tYfr: '\\uD835\\uDD1C',\n\tyfr: '\\uD835\\uDD36',\n\tYIcy: '\\u0407',\n\tyicy: '\\u0457',\n\tYopf: '\\uD835\\uDD50',\n\tyopf: '\\uD835\\uDD6A',\n\tYscr: '\\uD835\\uDCB4',\n\tyscr: '\\uD835\\uDCCE',\n\tYUcy: '\\u042E',\n\tyucy: '\\u044E',\n\tYuml: '\\u0178',\n\tyuml: '\\u00FF',\n\tZacute: '\\u0179',\n\tzacute: '\\u017A',\n\tZcaron: '\\u017D',\n\tzcaron: '\\u017E',\n\tZcy: '\\u0417',\n\tzcy: '\\u0437',\n\tZdot: '\\u017B',\n\tzdot: '\\u017C',\n\tzeetrf: '\\u2128',\n\tZeroWidthSpace: '\\u200B',\n\tZeta: '\\u0396',\n\tzeta: '\\u03B6',\n\tZfr: '\\u2128',\n\tzfr: '\\uD835\\uDD37',\n\tZHcy: '\\u0416',\n\tzhcy: '\\u0436',\n\tzigrarr: '\\u21DD',\n\tZopf: '\\u2124',\n\tzopf: '\\uD835\\uDD6B',\n\tZscr: '\\uD835\\uDCB5',\n\tzscr: '\\uD835\\uDCCF',\n\tzwj: '\\u200D',\n\tzwnj: '\\u200C',\n});\n\n/**\n * @deprecated use `HTML_ENTITIES` instead\n * @see HTML_ENTITIES\n */\nexports.entityMap = exports.HTML_ENTITIES;\n","var dom = require('./dom')\nexports.DOMImplementation = dom.DOMImplementation\nexports.XMLSerializer = dom.XMLSerializer\nexports.DOMParser = require('./dom-parser').DOMParser\n","var NAMESPACE = require(\"./conventions\").NAMESPACE;\n\n//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\n\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\nvar S_TAG = 0;//tag name offerring\nvar S_ATTR = 1;//attr name offerring\nvar S_ATTR_SPACE=2;//attr name end and space offer\nvar S_EQ = 3;//=space?\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\nvar S_TAG_CLOSE = 7;//closed el<el />\n\n/**\n * Creates an error that will not be caught by XMLReader aka the SAX parser.\n *\n * @param {string} message\n * @param {any?} locator Optional, can provide details about the location in the source\n * @constructor\n */\nfunction ParseError(message, locator) {\n\tthis.message = message\n\tthis.locator = locator\n\tif(Error.captureStackTrace) Error.captureStackTrace(this, ParseError);\n}\nParseError.prototype = new Error();\nParseError.prototype.name = ParseError.name\n\nfunction XMLReader(){\n\n}\n\nXMLReader.prototype = {\n\tparse:function(source,defaultNSMap,entityMap){\n\t\tvar domBuilder = this.domBuilder;\n\t\tdomBuilder.startDocument();\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\n\t\tparse(source,defaultNSMap,entityMap,\n\t\t\t\tdomBuilder,this.errorHandler);\n\t\tdomBuilder.endDocument();\n\t}\n}\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\n\tfunction fixedFromCharCode(code) {\n\t\t// String.prototype.fromCharCode does not supports\n\t\t// > 2 bytes unicode chars directly\n\t\tif (code > 0xffff) {\n\t\t\tcode -= 0x10000;\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\n\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\n\t\t} else {\n\t\t\treturn String.fromCharCode(code);\n\t\t}\n\t}\n\tfunction entityReplacer(a){\n\t\tvar k = a.slice(1,-1);\n\t\tif (Object.hasOwnProperty.call(entityMap, k)) {\n\t\t\treturn entityMap[k];\n\t\t}else if(k.charAt(0) === '#'){\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\n\t\t}else{\n\t\t\terrorHandler.error('entity not found:'+a);\n\t\t\treturn a;\n\t\t}\n\t}\n\tfunction appendText(end){//has some bugs\n\t\tif(end>start){\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\n\t\t\tlocator&&position(start);\n\t\t\tdomBuilder.characters(xt,0,end-start);\n\t\t\tstart = end\n\t\t}\n\t}\n\tfunction position(p,m){\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\n\t\t\tlineStart = m.index;\n\t\t\tlineEnd = lineStart + m[0].length;\n\t\t\tlocator.lineNumber++;\n\t\t\t//console.log('line++:',locator,startPos,endPos)\n\t\t}\n\t\tlocator.columnNumber = p-lineStart+1;\n\t}\n\tvar lineStart = 0;\n\tvar lineEnd = 0;\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\n\tvar locator = domBuilder.locator;\n\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\n\tvar closeMap = {};\n\tvar start = 0;\n\twhile(true){\n\t\ttry{\n\t\t\tvar tagStart = source.indexOf('<',start);\n\t\t\tif(tagStart<0){\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\n\t\t\t\t\tvar doc = domBuilder.doc;\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\n\t    \t\t\tdoc.appendChild(text);\n\t    \t\t\tdomBuilder.currentElement = text;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(tagStart>start){\n\t\t\t\tappendText(tagStart);\n\t\t\t}\n\t\t\tswitch(source.charAt(tagStart+1)){\n\t\t\tcase '/':\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\n\t\t\t\tvar tagName = source.substring(tagStart + 2, end).replace(/[ \\t\\n\\r]+$/g, '');\n\t\t\t\tvar config = parseStack.pop();\n\t\t\t\tif(end<0){\n\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\n\t        \t\tend = tagStart+1+tagName.length;\n\t        \t}else if(tagName.match(/\\s</)){\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\n\t        \t\tend = tagStart+1+tagName.length;\n\t\t\t\t}\n\t\t\t\tvar localNSMap = config.localNSMap;\n\t\t\t\tvar endMatch = config.tagName == tagName;\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\n\t\t        if(endIgnoreCaseMach){\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\n\t\t\t\t\tif(localNSMap){\n\t\t\t\t\t\tfor (var prefix in localNSMap) {\n\t\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif(!endMatch){\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName ); // No known test case\n\t\t\t\t\t}\n\t\t        }else{\n\t\t        \tparseStack.push(config)\n\t\t        }\n\n\t\t\t\tend++;\n\t\t\t\tbreak;\n\t\t\t\t// end elment\n\t\t\tcase '?':// <?...?>\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\n\t\t\t\tbreak;\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tlocator&&position(tagStart);\n\t\t\t\tvar el = new ElementAttributes();\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\t\t\t\t//elStartEnd\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\n\t\t\t\tvar len = el.length;\n\n\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\n\t\t\t\t\tel.closed = true;\n\t\t\t\t\tif(!entityMap.nbsp){\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(locator && len){\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\n\t\t\t\t\t//try{//attribute position fixed\n\t\t\t\t\tfor(var i = 0;i<len;i++){\n\t\t\t\t\t\tvar a = el[i];\n\t\t\t\t\t\tposition(a.offset);\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator2\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t\tdomBuilder.locator = locator;\n\t\t\t\t}else{\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\n\t\t\t\t\t\tparseStack.push(el)\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (NAMESPACE.isHTML(el.uri) && !el.closed) {\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\n\t\t\t\t} else {\n\t\t\t\t\tend++;\n\t\t\t\t}\n\t\t\t}\n\t\t}catch(e){\n\t\t\tif (e instanceof ParseError) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\terrorHandler.error('element parse error: '+e)\n\t\t\tend = -1;\n\t\t}\n\t\tif(end>start){\n\t\t\tstart = end;\n\t\t}else{\n\t\t\t//TODO: 这里有可能sax回退，有位置错误风险\n\t\t\tappendText(Math.max(tagStart,start)+1);\n\t\t}\n\t}\n}\nfunction copyLocator(f,t){\n\tt.lineNumber = f.lineNumber;\n\tt.columnNumber = f.columnNumber;\n\treturn t;\n}\n\n/**\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\n */\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\n\n\t/**\n\t * @param {string} qname\n\t * @param {string} value\n\t * @param {number} startIndex\n\t */\n\tfunction addAttribute(qname, value, startIndex) {\n\t\tif (el.attributeNames.hasOwnProperty(qname)) {\n\t\t\terrorHandler.fatalError('Attribute ' + qname + ' redefined')\n\t\t}\n\t\tel.addValue(\n\t\t\tqname,\n\t\t\t// @see https://www.w3.org/TR/xml/#AVNormalize\n\t\t\t// since the xmldom sax parser does not \"interpret\" DTD the following is not implemented:\n\t\t\t// - recursive replacement of (DTD) entity references\n\t\t\t// - trimming and collapsing multiple spaces into a single one for attributes that are not of type CDATA\n\t\t\tvalue.replace(/[\\t\\n\\r]/g, ' ').replace(/&#?\\w+;/g, entityReplacer),\n\t\t\tstartIndex\n\t\t)\n\t}\n\tvar attrName;\n\tvar value;\n\tvar p = ++start;\n\tvar s = S_TAG;//status\n\twhile(true){\n\t\tvar c = source.charAt(p);\n\t\tswitch(c){\n\t\tcase '=':\n\t\t\tif(s === S_ATTR){//attrName\n\t\t\t\tattrName = source.slice(start,p);\n\t\t\t\ts = S_EQ;\n\t\t\t}else if(s === S_ATTR_SPACE){\n\t\t\t\ts = S_EQ;\n\t\t\t}else{\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\n\t\t\t\tthrow new Error('attribute equal must after attrName'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '\\'':\n\t\tcase '\"':\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\n\t\t\t\t){//equal\n\t\t\t\tif(s === S_ATTR){\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t}\n\t\t\t\tstart = p+1;\n\t\t\t\tp = source.indexOf(c,start)\n\t\t\t\tif(p>0){\n\t\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\t\taddAttribute(attrName, value, start-1);\n\t\t\t\t\ts = S_ATTR_END;\n\t\t\t\t}else{\n\t\t\t\t\t//fatalError: no end quot match\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\n\t\t\t\t}\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\tvalue = source.slice(start, p);\n\t\t\t\taddAttribute(attrName, value, start);\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\n\t\t\t\tstart = p+1;\n\t\t\t\ts = S_ATTR_END\n\t\t\t}else{\n\t\t\t\t//fatalError: no equal before\n\t\t\t\tthrow new Error('attribute value must after \"=\"'); // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase '/':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\ts =S_TAG_CLOSE;\n\t\t\t\tel.closed = true;\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\tcase S_ATTR:\n\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tel.closed = true;\n\t\t\t\tbreak;\n\t\t\t//case S_EQ:\n\t\t\tdefault:\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\") // No known test case\n\t\t\t}\n\t\t\tbreak;\n\t\tcase ''://end document\n\t\t\terrorHandler.error('unexpected end of input');\n\t\t\tif(s == S_TAG){\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\t}\n\t\t\treturn p;\n\t\tcase '>':\n\t\t\tswitch(s){\n\t\t\tcase S_TAG:\n\t\t\t\tel.setTagName(source.slice(start,p));\n\t\t\tcase S_ATTR_END:\n\t\t\tcase S_TAG_SPACE:\n\t\t\tcase S_TAG_CLOSE:\n\t\t\t\tbreak;//normal\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\n\t\t\tcase S_ATTR:\n\t\t\t\tvalue = source.slice(start,p);\n\t\t\t\tif(value.slice(-1) === '/'){\n\t\t\t\t\tel.closed  = true;\n\t\t\t\t\tvalue = value.slice(0,-1)\n\t\t\t\t}\n\t\t\tcase S_ATTR_SPACE:\n\t\t\t\tif(s === S_ATTR_SPACE){\n\t\t\t\t\tvalue = attrName;\n\t\t\t\t}\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\t}else{\n\t\t\t\t\tif(!NAMESPACE.isHTML(currentNSMap['']) || !value.match(/^(?:disabled|checked|selected)$/i)){\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(value, value, start)\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase S_EQ:\n\t\t\t\tthrow new Error('attribute value missed!!');\n\t\t\t}\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\n\t\t\treturn p;\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\n\t\tcase '\\u0080':\n\t\t\tc = ' ';\n\t\tdefault:\n\t\t\tif(c<= ' '){//space\n\t\t\t\tswitch(s){\n\t\t\t\tcase S_TAG:\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR:\n\t\t\t\t\tattrName = source.slice(start,p)\n\t\t\t\t\ts = S_ATTR_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\n\t\t\t\t\tvar value = source.slice(start, p);\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\n\t\t\t\t\taddAttribute(attrName, value, start)\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\ts = S_TAG_SPACE;\n\t\t\t\t\tbreak;\n\t\t\t\t//case S_TAG_SPACE:\n\t\t\t\t//case S_EQ:\n\t\t\t\t//case S_ATTR_SPACE:\n\t\t\t\t//\tvoid();break;\n\t\t\t\t//case S_TAG_CLOSE:\n\t\t\t\t\t//ignore warning\n\t\t\t\t}\n\t\t\t}else{//not space\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\n\t\t\t\tswitch(s){\n\t\t\t\t//case S_TAG:void();break;\n\t\t\t\t//case S_ATTR:void();break;\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\n\t\t\t\tcase S_ATTR_SPACE:\n\t\t\t\t\tvar tagName =  el.tagName;\n\t\t\t\t\tif (!NAMESPACE.isHTML(currentNSMap['']) || !attrName.match(/^(?:disabled|checked|selected)$/i)) {\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\n\t\t\t\t\t}\n\t\t\t\t\taddAttribute(attrName, attrName, start);\n\t\t\t\t\tstart = p;\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_ATTR_END:\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\n\t\t\t\tcase S_TAG_SPACE:\n\t\t\t\t\ts = S_ATTR;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_EQ:\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\n\t\t\t\t\tstart = p;\n\t\t\t\t\tbreak;\n\t\t\t\tcase S_TAG_CLOSE:\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\n\t\t\t\t}\n\t\t\t}\n\t\t}//end outer switch\n\t\t//console.log('p++',p)\n\t\tp++;\n\t}\n}\n/**\n * @return true if has new namespace define\n */\nfunction appendElement(el,domBuilder,currentNSMap){\n\tvar tagName = el.tagName;\n\tvar localNSMap = null;\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\n\tvar i = el.length;\n\twhile(i--){\n\t\tvar a = el[i];\n\t\tvar qName = a.qName;\n\t\tvar value = a.value;\n\t\tvar nsp = qName.indexOf(':');\n\t\tif(nsp>0){\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\n\t\t\tvar localName = qName.slice(nsp+1);\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\n\t\t}else{\n\t\t\tlocalName = qName;\n\t\t\tprefix = null\n\t\t\tnsPrefix = qName === 'xmlns' && ''\n\t\t}\n\t\t//can not set prefix,because prefix !== ''\n\t\ta.localName = localName ;\n\t\t//prefix == null for no ns prefix attribute\n\t\tif(nsPrefix !== false){//hack!!\n\t\t\tif(localNSMap == null){\n\t\t\t\tlocalNSMap = {}\n\t\t\t\t//console.log(currentNSMap,0)\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\n\t\t\t\t//console.log(currentNSMap,1)\n\t\t\t}\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\n\t\t\ta.uri = NAMESPACE.XMLNS\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value)\n\t\t}\n\t}\n\tvar i = el.length;\n\twhile(i--){\n\t\ta = el[i];\n\t\tvar prefix = a.prefix;\n\t\tif(prefix){//no prefix attribute has no namespace\n\t\t\tif(prefix === 'xml'){\n\t\t\t\ta.uri = NAMESPACE.XML;\n\t\t\t}if(prefix !== 'xmlns'){\n\t\t\t\ta.uri = currentNSMap[prefix || '']\n\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\n\t\t\t}\n\t\t}\n\t}\n\tvar nsp = tagName.indexOf(':');\n\tif(nsp>0){\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\n\t}else{\n\t\tprefix = null;//important!!\n\t\tlocalName = el.localName = tagName;\n\t}\n\t//no prefix element has default namespace\n\tvar ns = el.uri = currentNSMap[prefix || ''];\n\tdomBuilder.startElement(ns,localName,tagName,el);\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\n\t//localNSMap = null\n\tif(el.closed){\n\t\tdomBuilder.endElement(ns,localName,tagName);\n\t\tif(localNSMap){\n\t\t\tfor (prefix in localNSMap) {\n\t\t\t\tif (Object.prototype.hasOwnProperty.call(localNSMap, prefix)) {\n\t\t\t\t\tdomBuilder.endPrefixMapping(prefix);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}else{\n\t\tel.currentNSMap = currentNSMap;\n\t\tel.localNSMap = localNSMap;\n\t\t//parseStack.push(el);\n\t\treturn true;\n\t}\n}\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\n\tif(/^(?:script|textarea)$/i.test(tagName)){\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\n\t\tif(/[&<]/.test(text)){\n\t\t\tif(/^script$/i.test(tagName)){\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\n\t\t\t\t\t//lexHandler.startCDATA();\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\t\t//lexHandler.endCDATA();\n\t\t\t\t\treturn elEndStart;\n\t\t\t\t//}\n\t\t\t}//}else{//text area\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\n\t\t\t\tdomBuilder.characters(text,0,text.length);\n\t\t\t\treturn elEndStart;\n\t\t\t//}\n\n\t\t}\n\t}\n\treturn elStartEnd+1;\n}\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\n\t//if(tagName in closeMap){\n\tvar pos = closeMap[tagName];\n\tif(pos == null){\n\t\t//console.log(tagName)\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\n\t\tif(pos<elStartEnd){//忘记闭合\n\t\t\tpos = source.lastIndexOf('</'+tagName)\n\t\t}\n\t\tcloseMap[tagName] =pos\n\t}\n\treturn pos<elStartEnd;\n\t//}\n}\n\nfunction _copy (source, target) {\n\tfor (var n in source) {\n\t\tif (Object.prototype.hasOwnProperty.call(source, n)) {\n\t\t\ttarget[n] = source[n];\n\t\t}\n\t}\n}\n\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\n\tvar next= source.charAt(start+2)\n\tswitch(next){\n\tcase '-':\n\t\tif(source.charAt(start + 3) === '-'){\n\t\t\tvar end = source.indexOf('-->',start+4);\n\t\t\t//append comment source.substring(4,end)//<!--\n\t\t\tif(end>start){\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\n\t\t\t\treturn end+3;\n\t\t\t}else{\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}else{\n\t\t\t//error\n\t\t\treturn -1;\n\t\t}\n\tdefault:\n\t\tif(source.substr(start+3,6) == 'CDATA['){\n\t\t\tvar end = source.indexOf(']]>',start+9);\n\t\t\tdomBuilder.startCDATA();\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\n\t\t\tdomBuilder.endCDATA()\n\t\t\treturn end+3;\n\t\t}\n\t\t//<!DOCTYPE\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId)\n\t\tvar matchs = split(source,start);\n\t\tvar len = matchs.length;\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\n\t\t\tvar name = matchs[1][0];\n\t\t\tvar pubid = false;\n\t\t\tvar sysid = false;\n\t\t\tif(len>3){\n\t\t\t\tif(/^public$/i.test(matchs[2][0])){\n\t\t\t\t\tpubid = matchs[3][0];\n\t\t\t\t\tsysid = len>4 && matchs[4][0];\n\t\t\t\t}else if(/^system$/i.test(matchs[2][0])){\n\t\t\t\t\tsysid = matchs[3][0];\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar lastMatch = matchs[len-1]\n\t\t\tdomBuilder.startDTD(name, pubid, sysid);\n\t\t\tdomBuilder.endDTD();\n\n\t\t\treturn lastMatch.index+lastMatch[0].length\n\t\t}\n\t}\n\treturn -1;\n}\n\n\n\nfunction parseInstruction(source,start,domBuilder){\n\tvar end = source.indexOf('?>',start);\n\tif(end){\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\n\t\tif(match){\n\t\t\tvar len = match[0].length;\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\n\t\t\treturn end+2;\n\t\t}else{//error\n\t\t\treturn -1;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction ElementAttributes(){\n\tthis.attributeNames = {}\n}\nElementAttributes.prototype = {\n\tsetTagName:function(tagName){\n\t\tif(!tagNamePattern.test(tagName)){\n\t\t\tthrow new Error('invalid tagName:'+tagName)\n\t\t}\n\t\tthis.tagName = tagName\n\t},\n\taddValue:function(qName, value, offset) {\n\t\tif(!tagNamePattern.test(qName)){\n\t\t\tthrow new Error('invalid attribute:'+qName)\n\t\t}\n\t\tthis.attributeNames[qName] = this.length;\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\n\t},\n\tlength:0,\n\tgetLocalName:function(i){return this[i].localName},\n\tgetLocator:function(i){return this[i].locator},\n\tgetQName:function(i){return this[i].qName},\n\tgetURI:function(i){return this[i].uri},\n\tgetValue:function(i){return this[i].value}\n//\t,getIndex:function(uri, localName)){\n//\t\tif(localName){\n//\n//\t\t}else{\n//\t\t\tvar qName = uri\n//\t\t}\n//\t},\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\n//\tgetType:function(uri,localName){}\n//\tgetType:function(i){},\n}\n\n\n\nfunction split(source,start){\n\tvar match;\n\tvar buf = [];\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\n\treg.lastIndex = start;\n\treg.exec(source);//skip <\n\twhile(match = reg.exec(source)){\n\t\tbuf.push(match);\n\t\tif(match[1])return buf;\n\t}\n}\n\nexports.XMLReader = XMLReader;\nexports.ParseError = ParseError;\n","/**\n * Errors raised by API for one among three reasons : wrong API usage, underlying service error or unknown reason.\n *\n * @property {String} message - Error message\n * @property {Number} status - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes} ; -1 otherwise.\n * @property {String} type - Error type ({@link Gp.Error.TYPE_SRVERR}, {@link Gp.Error.TYPE_USEERR} or {@link Gp.Error.TYPE_UNKERR}).\n *\n * @namespace\n * @alias Gp.Error\n * @param {Object|String} error - Options for creating error object. Can be a String (message) or an Object.\n * @param {String} error.message - Error message to return to user.\n * @param {enum} [error.type=TYPE_UNKERR] - Error type\n * @param {status} [error.status=-1] - Error status : when {@link Gp.Error.TYPE_SRVERR}, gives the [HTTP status of the underlying web service response]{@link https://en.wikipedia.org/wiki/List_of_HTTP_status_codes}.\n *\n */\nfunction ErrorService (error) {\n    if (!(this instanceof ErrorService)) {\n        throw new TypeError(\"ErrorService constructor cannot be called as a function.\");\n    }\n\n    var e = error;\n    if (typeof error === \"string\" || error instanceof String) {\n        this.message = error;\n        this.status = -1;\n        this.type = ErrorService.TYPE_UNKERR;\n    } else {\n        this.message = e.message || \"undefined!?\";\n        this.type = e.type;\n        this.status = e.status || -1;\n    }\n\n    this.name = \"ErrorService\";\n    this.stack = (new Error()).stack;\n}\n\n/**\n * Error raised when underlying geoportal service answers on error.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_SRVERR = \"SERVICE_ERROR\";\n/**\n * Error raised when funcion use is inappropriate\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_USEERR = \"USAGE_ERROR\";\n/**\n * Error raised when API can't perform the job for a reason other than the two other ones.\n *\n * @type {String}\n * @constant\n * @static\n */\nErrorService.TYPE_UNKERR = \"UNKNOWN_ERROR\";\n\n/**\n * @lends module:ErrorService\n */\nErrorService.prototype = Object.create(Error.prototype, {\n    constructor : {\n        value : ErrorService,\n        writable : true,\n        configurable : true\n    }\n});\n\nexport default ErrorService;\n","import Logger from \"../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Standard WPS\n *\n * @constructor\n * @alias Gp.Formats.WPS\n * @param {Object} options - options\n * @param {Object}   options.data - objet\n * @param {String}   options.method - POST|GET\n * @param {String}   options.param.service - \"WPS\"\n * @param {String}   options.param.version - \"1.0.0\"\n * @param {String}   options.param.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n * @param {String}   options.param.rawdataoutput - \"result\"\n * @param {String}   options.param.request - \"Execute\"\n * @param {Function} options.onsuccess - function callback success (TODO)\n * @param {Function} options.onerror   - function callback error   (TODO)\n * @private\n */\nfunction WPS (options) {\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur WPS()]\");\n\n    if (!(this instanceof WPS)) {\n        throw new TypeError(\"WPS constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    /**\n     * Objet DATA\n     */\n    this.DataObject = this.options.data;\n\n    if (!this.DataObject) {\n        throw new TypeError(\"This data object is not defined !\");\n    }\n\n    /**\n     * param service.\n     * Par defaut, \"WPS\".\n     */\n    this.paramservice = this.options.param.service || \"WPS\";\n\n    /**\n     * param version.\n     * Par defaut, \"1.0.0\".\n     */\n    this.paramversion = this.options.param.version || \"1.0.0\";\n\n    /**\n     * param identifier\n     * Par defaut, \"gs:WPS\"\n     */\n    this.paramidentifier = this.options.param.identifier || \"gs:WPS\";\n\n    /**\n     * param rawdataoutput\n     * Par defaut, \"result\".\n     */\n    this.paramrawdataoutput = this.options.param.rawdataoutput || \"result\";\n\n    /**\n     * param request\n     * Par defaut, \"Execute\".\n     */\n    this.paramrequest = this.options.param.request || \"Execute\";\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nWPS.prototype = {\n\n    /**\n     * @lends module:WPS#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : WPS,\n\n    /**\n     * Template de la requête.\n     */\n    template : {\n        get : {\n            value : \"service=__SERVICE__\" +\n                \"&version=__VERSION__\" +\n                \"&rawdataoutput=__RAWDATAOUTPUT__\" +\n                \"&identifier=__IDENTIFIER__\" +\n                \"&request=__REQUEST__\" +\n                \"&datainputs=<!-- __DATAINPUTS__ -->\",\n\n            input : \"__KEY__=__DATA__\"\n\n        },\n        post : {\n\n            value : \"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\" +\n                \"<wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\" \" +\n                \"__NAMESPACE__ __SCHEMALOCATION__>\" +\n                \"<ows:Identifier>__IDENTIFIER__</ows:Identifier>\" +\n                \"<wps:DataInputs>\" +\n                \"<!-- __DATAINPUTS__ -->\" +\n                \"</wps:DataInputs>\" +\n                \"<wps:ResponseForm>\" +\n                \"<wps:RawDataOutput>\" +\n                \"<ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\" +\n                \"</wps:RawDataOutput>\" +\n                \"</wps:ResponseForm>\" +\n                \"</wps:__REQUEST__>\",\n\n            input : \"<wps:Input>\" +\n                \"<ows:Identifier>__KEY__</ows:Identifier>\" +\n                \"<wps:Data>\" +\n                \"<wps:LiteralData>__DATA__</wps:LiteralData>\" +\n                \"</wps:Data>\" +\n                \"</wps:Input>\"\n        }\n    },\n\n    /**\n     * Namespace par defaut de la requete POST.\n     *\n     * @returns {String} namespace\n     */\n    namespaceByDefault : function () {\n        var ns = [\n            \"xmlns:xsi=\\\"http://www.w3.org/2001/XMLSchema-instance\\\"\",\n            \"xmlns=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:wfs=\\\"http://www.opengis.net/wfs\\\"\",\n            \"xmlns:wps=\\\"http://www.opengis.net/wps/1.0.0\\\"\",\n            \"xmlns:ows=\\\"http://www.opengis.net/ows/1.1\\\"\",\n            \"xmlns:gml=\\\"http://www.opengis.net/gml\\\"\",\n            \"xmlns:ogc=\\\"http://www.opengis.net/ogc\\\"\",\n            \"xmlns:wcs=\\\"http://www.opengis.net/wcs/1.1.1\\\"\",\n            \"xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\"\"\n        ];\n\n        return ns.join(\" \");\n    },\n\n    /**\n     * Schemalocation par defaut.\n     *\n     * @returns {String} schemaLocation\n     */\n    schemaLocationByDefault : function () {\n        return \"xsi:schemaLocation=\\\"http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd\\\"\";\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out :\n     * //  service=__SERVICE__\n     * //  &version=__VERSION__\n     * //  &rawdataoutput=__RAWDATAOUTPUT__\n     * //  &identifier=__IDENTIFIER__\n     * //  &request=__REQUEST__\n     * //  &datainputs=\"__DATAINPUTS__\"\n     * //  avec __DATAINPUTS__ = __KEY__=__DATA__;...\n     *\n     * // POST out :\n     * //      <?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\n     * //      <wps:__REQUEST__ version=\\\"__VERSION__\\\" service=\\\"__SERVICE__\\\"\n     * //         __NAMESPACE__ __SCHEMALOCATION__>\n     * //          <ows:Identifier>__IDENTIFIER__</ows:Identifier>\n     * //          <wps:DataInputs>\n     * //              <!-- __DATAINPUTS__ -->\n     * //          </wps:DataInputs>\n     * //          <wps:ResponseForm>\n     * //              <wps:RawDataOutput>\n     * //              <ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier>\n     * //              </wps:RawDataOutput>\n     * //          </wps:ResponseForm>\n     * //      </wps:__REQUEST__>\",\n     * //      avec __DATAINPUTS__\n     * //             <wps:Input>\n     * //                  <ows:Identifier>__KEY__</ows:Identifier>\n     * //                  <wps:Data>\n     * //                    <wps:LiteralData>__DATA__</wps:LiteralData>\n     * //                  </wps:Data>\n     * //              </wps:Input>\n     *\n     * @returns {Boolean} validation de la construction de la requete\n     */\n    processRequestString : function () {\n        this.logger.trace(\"WPS::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        } else {\n            this.logger.error(\"No other method supported by the service !\");\n            return false;\n        }\n\n        template = template.replace(/__SERVICE__/g, this.paramservice);\n        template = template.replace(/__VERSION__/g, this.paramversion);\n        template = template.replace(/__RAWDATAOUTPUT__/g, this.paramrawdataoutput);\n        template = template.replace(/__IDENTIFIER__/g, this.paramidentifier);\n        template = template.replace(/__REQUEST__/g, this.paramrequest);\n\n        // ajout +\n        if (this.method === \"POST\") {\n            template = template.replace(/__NAMESPACE__/g, this.namespaceByDefault);\n            template = template.replace(/__SCHEMALOCATION__/g, this.schemaLocationByDefault);\n        }\n\n        // ajout des datainputs\n        template = template.replace(/<!-- __DATAINPUTS__ -->/g, this.__addDataInputs());\n\n        if (!template) {\n            this.logger.warn(\"traduction tmpl : empty request !?\");\n            return false;\n        }\n\n        this.requestString = template;\n        this.logger.trace(\"traduction tmpl\", template);\n\n        return true;\n    },\n\n    /**\n     * Ajout des données\n     *\n     * @returns {String} Données concaténées dans une chaine\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"WPS::__addDataInputs ()\");\n\n        // c'est un peu grossier...\n        var tmpl = this.method === \"GET\" ? this.template.get.input : this.template.post.input;\n        var sep = this.method === \"GET\" ? \";\" : \"\";\n\n        var result = \"\";\n        var that = this;\n        var map = this.DataObject.getData();\n        for (var i = 0; i < map.length; i++) {\n            // FIXME closure ?\n            (function (j) {\n                if (sep) {\n                    sep = (j === map.length - 1) ? \"\" : \";\";\n                }\n                result = result.concat(that.__addDataInput(tmpl, map[j].k, map[j].v), sep);\n            })(i);\n        }\n\n        return result;\n    },\n\n    /**\n     * Ajout d'une donnée.\n     *\n     * @param {String} tmpl - template\n     * @param {String} key - clef\n     * @param {String} data - valeur\n     * @returns {String} chaine avec les substitutions clef/valeur\n     */\n    __addDataInput : function (tmpl, key, data) {\n        var tmp = tmpl;\n        tmp = tmp.replace(/__KEY__/g, key);\n        tmp = tmp.replace(/__DATA__/g, data);\n        return tmp;\n    },\n\n    /**\n     * Definir le mode de requête\n     *\n     * @param {String} method - GET|POST\n     */\n    setMethod : function (method) {\n        if (method === \"GET\" || method === \"POST\") {\n            this.method = method;\n        } else {\n            this.logger.warn(\"support only GET and POST method !\");\n        }\n    },\n\n    /**\n     * Retourne le mode de requete (GET|POST).\n     *\n     * @returns {AltiRequest.options.mode|String} methode (GET|POST)\n     */\n    getMethod : function () {\n        return this.method;\n    }\n};\n\nexport default WPS;\n","/* global require */\n\nimport Logger from \"../Utils/LoggerByDefault\";\n// import __xmldom from \"xmldom\";\n\n/**\n * @classdesc\n *\n * Classe permettant d'écrire ou de lire du XML, sous forme de document DOM,\n * éventuellement selon des clés de lecture (readers) ou d'écriture (writers) spécifiques.\n *\n * @constructor\n * @alias Gp.Formats.XML\n *\n * @param {Object} [options] - options du format XML\n *\n * @param {Object} [options.reader] - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n *      utile pour interpréter le XML lorsque sa structure est connue.\n *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n *\n * @param {Object} [options.writers] - writers\n *\n * @param {String} [options.xmlString] - chaîne de caractère contenant du XML à interpréter.\n *\n * @private\n */\nfunction XML (options) {\n    if (!(this instanceof XML)) {\n        throw new TypeError(\"XML constructor cannot be called as a function.\");\n    }\n\n    // FIXME : notion de singleton\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur XML ()]\");\n\n    /**\n     * Chaîne de caractères contenant le texte XML\n     * @type {String}\n     */\n    this.xmlString = null;\n\n    /**\n     * DOM Element correspondant à la structure du XML.\n     * @type {DOMElement}\n     */\n    this.xmlDoc = null;\n\n    /**\n     * Objet contenant des fonctions de lecture des différentes balises XML.\n     * @type {Object}\n     */\n    this.reader = null;\n\n    // traitement des paramètres d'options s'il y en a\n    if (options) {\n        if (options.xmlString && typeof options.xmlString === \"string\") {\n            this.xmlString = options.xmlString;\n            // Si une chaine de caractère a été passée en entrée : on la transforme aussi en XML document\n            this.xmlDoc = __getXMLDOC(options.xmlString);\n        }\n        if (options.reader) {\n            this.setReader(options.reader);\n        }\n    }\n}\n\nXML.prototype = {\n\n    /**\n     * @lends module:XML\n     */\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : XML,\n\n    /**\n     * Méthode permettant de récupérer la chaîne de caractères associée au format XML\n     *\n     * @returns {String} xmlString - la chaîne de caractères correspondant au format XML\n     */\n    getXMLString : function () {\n        return this.xmlString;\n    },\n\n    /**\n     * Méthode permettant d'attribuer une chaîne de caractères au format XML (attribut xmlString).\n     * La méthode va aussi transformer cette chaîne de caractères en document XML,\n     * afin de remplir l'attribut xmlDoc.\n     *\n     * @param {String} xmlString - la chaîne de caractères correspondant au format XML\n     */\n    setXMLString : function (xmlString) {\n        if (xmlString && typeof xmlString === \"string\") {\n            this.xmlString = xmlString;\n            this.xmlDoc = __getXMLDOC(xmlString);\n        }\n    },\n\n    /**\n     * Méthode permettant de récupérer les readers associés au format XML, s'ils ont été définis\n     *\n     * @return {Object} readers - les readers associés au format XML, s'ils existent,\n     *      sous forme d'une collection de fonctions\n     */\n    getReader : function () {\n        return this.reader;\n    },\n\n    /**\n     * Méthode permettant d'attribuer des readers, sous la forme d'un objet de fonctions (node, data),\n     *      lorsqu'ils n'ont pas été définis lors de l'instanciation par exemple (new XML (options)).\n     *\n     * @param {Object} reader - Instance d'un Reader de service (AltiResponseReader, GeocodeRequestReader, etc.)\n     *      utile pour interpréter le XML lorsque sa structure est connue.\n     *      Ce reader doit comporter au moins une fonction statique read (root) permettant d'initialiser la lecture.\n     */\n    setReader : function (reader) {\n        if (reader && reader.read && typeof reader.read === \"function\") {\n            this.reader = reader;\n        }\n    },\n\n    /**\n     * Méthode permettant de récupérer le document XML associé au format, s'il existe.\n     *\n     * @return {DOMElement} xmlDoc - le document XML (DOM document node) s'il existe\n     */\n    getXMLDoc : function () {\n        return this.xmlDoc;\n    },\n\n    /**\n     * Setter\n     */\n    setXMLDoc : function (doc) {\n        this.xmlDoc = doc;\n    },\n    /**\n     * Méthode initialisant la lecture du XML, à partir d'un XML Document :\n     *      création d'un objet JavaScript contenant les informations du XML,\n     *      sauf dans le cas où il n'existe pas de XML Document à interpréter (retourne un objet vide).\n     *\n     * @return {Object} [parserOutput] - un objet JavaScript contenant les informations du XML :\n     * - soit toutes les informations si aucun reader n'a été spécifié à la création du format\n     * - soit les informations spécifiées dans le reader.\n     */\n    parse : function () {\n        // build xml document from xmlString\n        if (!this.xmlDoc && this.xmlString) {\n            this.xmlDoc = __getXMLDOC(this.xmlString);\n        }\n        if (this.xmlDoc) {\n            var root = __getRootNode(this.xmlDoc);\n            if (root) {\n                var parserOutput;\n                // call reader if exists\n                if (this.reader && this.reader.read) {\n                    parserOutput = this.reader.read(root);\n                } else {\n                    parserOutput = {};\n                    parserOutput[root.nodeName] = __readDefault(root);\n                }\n                return parserOutput;\n            } else {\n                return {};\n            }\n        }\n    }\n\n};\n\n/**\n * Méthode de la classe (privée) permettant de créer un XML Document à partir d'une chaîne de caractères XML,\n *      en utilisant DOMParser () lorsque c'est possible.\n *      For more information, see: https://dvcs.w3.org/hg/innerhtml/raw-file/tip/index.html#the-domparser-interface\n *\n * @private\n * @memberof XML\n * @method __getXMLDOC\n * @param {String} xmlString - xml string to be converted into DOM element\n * @return {DOMElement} - the corresponding XML Document\n */\nfunction __getXMLDOC (xmlString) {\n    if (typeof window === \"undefined\") {\n        // env. nodejs\n        var DOMParser = require(\"@xmldom/xmldom\").DOMParser; // __xmldom.DOMParser;\n        return new DOMParser().parseFromString(xmlString, \"text/xml\");\n    } else {\n        // env. browser\n\n        var parser;\n        var xmlDoc;\n        var errorMsg = \"Erreur lors du parsing de la réponse du service : XML non conforme\";\n\n        if (window.ActiveXObject) {\n            // Internet Explorer < 9\n            xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n            xmlDoc.async = false;\n            xmlDoc.loadXML(xmlString);\n            var parseError = xmlDoc.parseError;\n            if (parseError.errorCode) {\n                if (parseError.line && parseError.linepos) {\n                    errorMsg += \"( ligne \" + parseError.line + \", colonne \" + parseError.linepos;\n                }\n                if (parseError.reason) {\n                    errorMsg += \":  \" + parseError.reason + \")\";\n                }\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else if (window.DOMParser) {\n            // les autres (Chrome, Mozilla, IE >= 9)\n            parser = new window.DOMParser();\n            try {\n                xmlDoc = parser.parseFromString(xmlString, \"text/xml\");\n            } catch (e) {\n                // Internet Explorer browser raises exception if xmlString is not valid XML\n                if (e.message === \"SyntaxError\") {\n                    throw new Error(errorMsg);\n                } else {\n                    throw new Error(\"Erreur lors du parsing de la réponse du service : \" + e.message);\n                }\n            }\n            // look for parsing error in case no exception was raised\n            if (xmlDoc.getElementsByTagName(\"parsererror\").length > 0) {\n                var parsererror = xmlDoc.getElementsByTagName(\"parsererror\");\n                for (var i = 0; i < parsererror.length; i++) {\n                    var content = parsererror[i].innerHTML;\n                    // except in case parsererror is just because of huge xml, but parsing is done.\n                    if (content.indexOf(\"Huge input lookup\") === -1) {\n                        errorMsg += \"(\" + content + \")\";\n                        throw new Error(errorMsg);\n                    }\n                }\n            } else if (!xmlDoc.documentElement) { // may happen in chrome browser\n                throw new Error(errorMsg);\n            }\n            return xmlDoc;\n        } else {\n            // FIXME\n            throw new Error(\"Incompatible DOM Parser pour ce navigateur !\");\n        }\n    }\n}\n\n/**\n * Méthode de la classe (privée) permettant de récupérer le noeud racine du document,\n *      à partir d'un document node (nodeType=9), puis lecture de ce noeud (readNode)\n *\n * @private\n * @memberof XML\n * @method __getRootNode\n * @param {DOMElement} [xmlDoc] - a Document Node\n * @return {DOMElement} root - the document root node\n */\nfunction __getRootNode (xmlDoc) {\n    var root;\n    if (xmlDoc.nodeType === 9) {\n        // INFO : nodeType 9 represents the entire document (the root-node of the DOM tree)\n        root = xmlDoc.documentElement;\n    } else if (xmlDoc.nodeType === 1) {\n        root = xmlDoc;\n    }\n    return root;\n}\n\n/**\n * Méthode de la classe (privée) permettant de lire automatiquement un noeud XML,\n *      lorsqu'aucun reader spécifique n'a été spécifié (parser brut)\n *\n * @private\n * @memberof XML\n * @method readDefault\n * @param {DOMElement} node - a DOM element node\n * @example final data object looks like :\n *          data = {\n *              attributeName: attributeValue,\n *              childName: {\n *                  attributeName: attributeValue,\n *                  attributeName: attributeValue,\n *                  childName: {\n *                      \"textContent\": textContent\n *                  },\n *                  childName: {\n *                      childName: {\n *                          attributeName:attributeValue\n *                      }\n *                  }\n *              }\n *          }\n */\nfunction __readDefault (node) {\n    var data = {};\n\n    // if element node has attributes, set their values to data\n    if (node.attributes.length > 0) {\n        var dataAttributes = __getAttributes(node);\n        data[\"attributes\"] = dataAttributes;\n    }\n\n    // if element node has childNodes, read them and set them to data\n    if (node.hasChildNodes()) {\n        var childData = {};\n        var child;\n        var children = node.childNodes;\n\n        for (var i = 0; i < children.length; i++) {\n            child = children[i];\n\n            if (child.nodeType === 3) { // TEXT_NODE\n                data[\"textContent\"] = child.nodeValue;\n            } else if (child.nodeType === 1) {\n                childData = __readDefault(child);\n\n                if (!data[child.nodeName]) {\n                    // store childData in an object\n                    data[child.nodeName] = childData;\n                } else {\n                    // in case several childNodes has the same name : store them in an array.\n                    // if data[nodeName] already exists but is not an array\n                    if (!Array.isArray(data[child.nodeName])) {\n                        var old = data[child.nodeName];\n                        data[child.nodeName] = [];\n                        data[child.nodeName].push(old);\n                    }\n                    data[child.nodeName].push(childData);\n                }\n            }\n            // TODO : manage other node types (4=CDATA, etc)\n        }\n    }\n\n    return data;\n}\n\n/**\n * Méthode de la classe (privée) permettant de récupérer les attributs d'un noeud élément\n *\n * @private\n * @memberof XML\n * @method __getAttributes\n * @param {DOMElement} node - noeud contenant l'attribut recherché\n * @return {Object} nodeAttributes - objet contenant les noms et valeurs des différents attributs\n */\nfunction __getAttributes (node) {\n    if (node.attributes.length > 0) {\n        var nodeAttributes = {};\n        var attributes = node.attributes;\n        for (var i = 0; i < attributes.length; i++) {\n            var attribute = attributes[i];\n            nodeAttributes[attribute.nodeName] = attribute.nodeValue;\n        }\n        return nodeAttributes;\n    }\n}\n\nexport default XML;\n","/**\n* Global variable Gp.\n*\n* @module Gp\n* @alias Gp\n* @description\n*\n* This is the global variable that is exposed in the browser environment.\n* Content is composed of constructor, functions and properties...\n*\n* > {@link Gp.Error Error()}\n*     - .TYPE_SRVERR : \"SERVICE_ERROR\"\n*     - .TYPE_UNKERR : \"UNKNOWN_ERROR\"\n*     - .TYPE_USEERR : \"USAGE_ERROR\"\n*\n* > {@link module:Helper Helper}\n*     - .indent()\n*     - .normalyzeParameters()\n*     - .normalyzeUrl()\n*\n* > {@link module:XHR Protocols.XHR}\n*     - .call()\n*\n* > {@link module:Services Services (objects)}\n*     - .Alti\n*         - {@link Gp.Services.Alti.Elevation .Elevation()}\n*     - {@link Gp.Services.AltiResponse .AltiResponse()}\n*     - .AutoComplete\n*         - {@link Gp.Services.AutoComplete.SuggestedLocation .SuggestedLocation()}\n*     - {@link Gp.Services.AutoCompleteResponse .AutoCompleteResponse()}\n*     - {@link Gp.Services.Config .Config()}\n*     - {@link Gp.Services.DefaultUrl .DefaultUrl()}\n*     - {@link Gp.Services.GeocodeResponse .GeocodeResponse()}\n*     - {@link Gp.Services.GetConfigResponse .GetConfigResponse()}\n*     - {@link Gp.Services.IsoCurveResponse .IsoCurveResponse()}\n*     - .Route\n*         - {@link Gp.Services.Route.RouteInstruction .RouteInstruction()}\n*     - {@link Gp.Services.RouteResponse .RouteResponse()}\n*\n* > Services (factory)\n*     - {@link module:Services~autoComplete .autoComplete()}\n*     - {@link module:Services~geocode .geocode()}\n*     - {@link module:Services~getAltitude .getAltitude()}\n*     - {@link module:Services~getConfig .getConfig()}\n*     - {@link module:Services~isoCurve .isoCurve()}\n*     - {@link module:Services~reverseGeocode .reverseGeocode()}\n*     - {@link module:Services~route .route()}\n*\n* > servicesDate : \"YYYY-MM-DD\"\n*\n* > servicesVersion : \"X.X.X\"\n*\n*/\n\nimport Services from \"./Services/Services\";\nimport DefaultUrl from \"./Services/DefaultUrlService\";\nimport AltiResponse from \"./Services/Alti/Response/model/AltiResponse\";\nimport Elevation from \"./Services/Alti/Response/model/Elevation\";\nimport AutoCompleteResponse from \"./Services/AutoComplete/Response/model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./Services/AutoComplete/Response/model/SuggestedLocation\";\nimport IsoCurveResponse from \"./Services/ProcessIsoCurve/Response/model/ProcessIsoCurveResponse\";\nimport RouteResponse from \"./Services/Route/Response/model/RouteResponse\";\nimport RouteInstruction from \"./Services/Route/Response/model/RouteInstruction\";\nimport Config from \"./Services/Config/Config\";\nimport XHR from \"./Protocols/XHR\";\nimport Error from \"./Exceptions/ErrorService\";\nimport Helper from \"./Utils/Helper\";\n\nimport Pkg from \"../package.json\";\n\n/** Version */\nexport const servicesVersion = Pkg.version;\n/** Publication date */\nexport const servicesDate = Pkg.date;\n\n// on declare les ns dans root global\nvar Gp = {};\n\nGp.servicesVersion = servicesVersion;\nGp.servicesDate = servicesDate;\n\n// Export Protocols\nGp.Protocols = {};\nGp.Protocols.XHR = XHR;\n// Export services\nGp.Services = Services;\n// Export DefaultUrls\nGp.Services.DefaultUrl = DefaultUrl;\n// Export Alti\nGp.Services.AltiResponse = AltiResponse;\nGp.Services.Alti = {};\nGp.Services.Alti.Elevation = Elevation;\n// Export Autocomplete\nGp.Services.AutoCompleteResponse = AutoCompleteResponse;\nGp.Services.AutoComplete = {};\nGp.Services.AutoComplete.SuggestedLocation = SuggestedLocation;\n// Export Config\nGp.Services.Config = Config;\n// Export IsoCurve\nGp.Services.IsoCurveResponse = IsoCurveResponse;\n// Export Route\nGp.Services.RouteResponse = RouteResponse;\nGp.Services.Route = {};\nGp.Services.Route.RouteInstruction = RouteInstruction;\n// Export Erreurs et Outils\nGp.Error = Error;\nGp.Helper = Helper;\n\nexport default Gp;\n","/**\n * JSONP : Implémentation du protocole JSONP de la plateforme Géoportail\n *\n * @module JSONP\n * @private\n * @alias Gp.Protocols.JSONP\n */\nimport Logger from \"../Utils/LoggerByDefault\";\n\n// cf. https://github.com/sobstel/jsonp.js\nvar JSONP = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     */\n    uuid : (function () {\n        var id = Math.floor(Date.now());\n        return function () {\n            return id++;\n        };\n    })(),\n\n    /**\n     * Cette fonction réalise l'appel du service fourni via le paramètre \"options.url\"\n     * en mettant en œuvre le protocole JSONP.\n     *\n     * @method call\n     * @static\n     * @param {Object} options - parametres d'invocation du service en JSONP\n     * @param {String} options.url - URL du service à invoquer (indépendamment du protocole JSONP).\n     *  Cette URL contient déjà les paramètres du service.\n     *  Si le paramètre dédié à la mise en oeuvre du protocole JSONP (callback=xxx) n'est pas présent, il est rajouté par la fonction ;\n     *  sa valeur est déterminée en fonction du paramètre callbackName.\n     * @param {Number} [options.timeOut = 0] - Nombre de ms au bout duquel on considère que le service n'a pas répondu.\n     *  Une valeur de 0 pour ce paramètre permet de désactiver la gestion du timeOut.\n     * @param {String} [options.callbackSuffix = null] - Suffixe de la fonction de callback à rajouter sur l'URL.\n     *  Si aucun suffixe n'est spécifié (cas par défaut), on utilisera l'identifiant this.uuid () comme suffixe. Ex: \"callback1458574396582 ()\"\n     * @param {String} [options.callbackName = gp.protocol.jsonp] - Valeur du paramètre callback à rajouter sur l'URL.\n     *  Si l'URL fournie contient déjà le paramètre callback, le paramètre callbackName ne sera pas pris en compte.\n     *  La fonction de callback est créée dynamiquement par la fonction JSONP ;\n     *  elle a deux fonctions :\n     *    elle annule la condition de timeOut\n     *    puis appelle la fonction fournie par l'utilisateur via le paramètre onResponse.\n     * @param {Function} options.onResponse - Nom de la fonction qui sera appelée lors de la réception des résultats du service.\n     *  Ce paramètre sera ignoré si l'URL contient déjà le paramètre callback.\n     *  La fonction de rappel appelée sera alors celle ayant pour nom la valeur de ce paramètre.\n     * @param {Function} [options.onTimeOut] - Nom de la fonction qui sera appelée en cas de non réponse du service.\n     *  Le temps au bout duquel on considère que le service n'a pas répondu est déterminé par le paramètre timeOut.\n     *  @example\n     *  var options = {\n     *      url : 'http://localhost/some/test.json&callback=myResults',\n     *      timeOut : 100,\n     *      callbackName : 'myResults',\n     *      callbackSuffix : \"\",\n     *      onResponse : function (response) {\n     *          console.log('results : ', response);\n     *      },\n     *\n     *   };\n     *   JSONP.call(options);\n     */\n    call : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"JSONP\");\n        logger.trace(\"[JSONP::call ()]\");\n\n        // analyse parametres\n\n        if (!options) {\n            logger.error(\"missing parameter : options !\");\n            throw new Error(\"missing parameter : options !\");\n        }\n\n        if (!options.url) {\n            logger.error(\"missing parameter : options.url !\");\n            throw new Error(\"missing parameter : options.url !\");\n        }\n\n        if (!options.timeOut) {\n            logger.info(\"setting 'options.timeOut' default value\");\n            options.timeOut = 0;\n        }\n\n        // FIXME si un callback coté client a été mis en place,\n        // cette condition sur cette methode n'a pas de sens !?\n        if (!options.onResponse) {\n            logger.error(\"missing parameter : options.onResponse !\");\n            throw new Error(\"missing parameter : options.onResponse !\");\n            // FIXME doit on definir un callback interne par defaut !?\n            // options.onResponse = function (data) {\n            //    console.log(\"response callback (inner) : \", data);\n            // };\n        }\n\n        // ID du callback à utiliser : null ou string.\n        // si l'utilisateur a spécifié un suffixe pour le callback, on le récupère comme un ID (ex: options.callbackSuffix = \"\")\n        // sinon, on utilise un timestamp : this.uuid ()\n        var callbackId = (typeof options.callbackSuffix === \"string\") ? options.callbackSuffix : this.uuid();\n\n        // on recherche le parametre callback et son nom de fonction dans l'url\n        var urlHasCallbackKey = false;\n        var urlHasCallbackName = false;\n\n        var idx = options.url.indexOf(\"callback=\");\n\n        if (idx !== -1) {\n            urlHasCallbackKey = true;\n            // extraction callbackName de l'url : entre \"callback=\" et \"&\" ou fin de ligne\n            var j = options.url.indexOf(\"&\", idx);\n            if (j === -1) {\n                j = options.url.length;\n            }\n\n            // on ecrase le parametre options.callbackName s'il avait été défini\n            var callbackName = options.url.substring(idx + 9, j);\n\n            if (callbackName) {\n                urlHasCallbackName = true;\n                options.callbackName = callbackName;\n                logger.info(\"setting 'options.callbackName' value (\" + options.callbackName + \") from 'options.url' parameter\");\n            }\n        }\n\n        // on ajoute le parametre callback dans l'URL s'il n'existe pas\n        if (!urlHasCallbackKey) {\n            // gestion des autres param. et \"?\"\n            var k = options.url.indexOf(\"?\");\n            if (k === -1) {\n                // aucun param., ni de '?'\n                options.url = options.url + \"?\" + \"callback=\";\n            } else if (k === options.url.length) {\n                // uniquement le '?'\n                options.url = options.url + \"callback=\";\n            } else {\n                // le '?' et les param. existent\n                options.url = options.url + \"&\" + \"callback=\";\n            }\n            logger.info(\"setting callback default key in 'options.url' : \" + options.url);\n        }\n\n        // utilisation de la fonction callback coté client ?\n        var HasCallbackName = options.callbackName ? true : urlHasCallbackName;\n\n        // on ajoute le nom de la fonction callback dans l'URL si elle n'existe pas\n        if (!urlHasCallbackName) {\n            // fonction callback par defaut\n            if (!options.callbackName) {\n                logger.info(\"setting 'options.callbackName' default value\");\n                options.callbackName = \"callback\"; // ou \"gp.protocol.jsonp\" ?\n                // info : si on ne veut pas gerer d'ID dans le callback,\n                // options.callbackSuffix = \"\"\n                if (callbackId || callbackId === \"\") {\n                    options.callbackName += callbackId;\n                }\n            }\n            options.url = options.url.replace(\"callback=\", \"callback=\" + options.callbackName);\n            logger.info(\"setting callback function name in 'options.url' : \" + options.url);\n        }\n\n        // timeOut par defaut\n        if (!options.onTimeOut) {\n            logger.info(\"setting 'options.onTimeOut' default value\");\n            /** callback timeout par defaut */\n            options.onTimeOut = function (/* error */) {\n                console.log(\"TimeOut while invoking url : \" + options.url);\n            };\n        }\n\n        if (!HasCallbackName) {\n            var self = this;\n\n            // event du timeout\n            var onTimeOutTrigger = null;\n\n            // declenche le timeout si > à 0 !\n            if (options.timeOut > 0) {\n                onTimeOutTrigger = window.setTimeout(\n                    function () {\n                        /** fonction de reponse du service */\n                        window[options.callbackName] = function () {};\n                        options.onTimeOut();\n                        self._deleteScript(callbackId);\n                    }, options.timeOut);\n            }\n\n            // FIXME le nom de la fonction n'accepte pas de namespace !\n            // ex. Gp.Function.callback\n            /**\n            * fonction de reponse du service\n            * @param {Object} data - data\n            * @private\n            */\n            window[options.callbackName] = function (data) {\n                window.clearTimeout(onTimeOutTrigger);\n                options.onResponse(data);\n                self._deleteScript(callbackId);\n            };\n        }\n\n        this._createScript(callbackId, options.url);\n    },\n\n    /**\n    * create Script\n    * @param {String} callbackId - callback Id\n    * @param {String} url - url\n    * @private\n    */\n    _createScript : function (callbackId, url) {\n        var scriptu;\n        var scripto = document.getElementById(\"results\" + callbackId);\n\n        scriptu = document.createElement(\"script\");\n        scriptu.setAttribute(\"type\", \"text/javascript\");\n        scriptu.setAttribute(\"src\", url);\n        scriptu.setAttribute(\"charset\", \"UTF-8\");\n        scriptu.setAttribute(\"id\", \"results\" + callbackId);\n        scriptu.setAttribute(\"async\", \"true\"); // FIXME async ?\n        // head ou body ou autres ?\n        var node = document.documentElement || document.getElementsByTagName(\"head\")[0];\n        if (scripto === null) {\n            node.appendChild(scriptu);\n        } else {\n            // s'il existe déjà, on le remplace !\n            node.replaceChild(scriptu, scripto);\n        }\n    },\n\n    /**\n    * delete Script\n    * @param {String} callbackId - callback Id\n    * @private\n    */\n    _deleteScript : function (callbackId) {\n        var script = document.getElementById(\"results\" + callbackId);\n        if (script) {\n            var node = script.parentNode || document.documentElement;\n            if (!node) {\n                return;\n            }\n            node.removeChild(script);\n        }\n    }\n};\n\nexport default JSONP;\n","/**\n * Interface de dialogue avec les webservices\n *\n * @module Protocols\n * @private\n * @alias Gp.Protocols\n */\nimport Helper from \"../Utils/Helper\";\nimport XHR from \"./XHR\";\nimport JSONP from \"./JSONP\";\n\nvar Protocol = {\n\n    /**\n     * Interface unique d\"envoi d\"une requête.\n     *\n     * @method send\n     * @static\n     * @param {Object} options - options generales\n     * @param {String} options.url      - url du service\n     * @param {String} options.method   - GET, POST, PUT, DELETE\n     * @param {String} options.protocol - XHR | JSONP\n     * @param {String} options.format   - format de la reponse du service : json, xml ou null (brute)...\n     * @param {String} options.wrap     - encapsuler la reponse du service dans du JSON : true|false (true par defaut sur le protocole JSONP)\n     * @param {String} options.callbackSuffix - suffixe de la fonction de callback (JSONP uniquement) (ex: si callbackSuffix=\"\", la fonction s'appellera \"callback\")\n     * @param {String} options.timeOut  - 0 ms\n     * @param {Boolean} options.nocache  - true|false\n     * @param {Object|String} options.data        - content (post) ou param (get)\n     * @param {Object|String} options.headers     - (post) ex. referer\n     * @param {Object|String} options.content - (post) ex. \"application/json\"\n     * @param {String} options.scope       - this (TODO)\n     * @param {Function} options.onResponse - callback\n     * @param {Function} options.onFailure - callback\n     * @param {Function} options.onTimeOut - callback\n     * @param {String} options.proxyUrl -  (TODO)\n     */\n    send : function (options) {\n        // INFO\n        // \"output\" - param est interne à la classe \"Protocol\" (parametrable via \"wrap\"), et à ajouter à l\"url\n        //      ce param est independant du service car il est géré par le filtre LUA :\n        //          ex. json|xml (json par defaut).\n        //          Ce param. permet d\"encapsuler du XML dans du JSON :\n        //              {http : {status:200, error:null},xml :\"réponse du service\"}\n        //          Utile pour les services qui ne repondent que du XML (ex. Geocodage)\n        //\n        // |-------------------------------------------------|\n        // |      \\service |      |     |                    |\n        // | output\\ format| json | xml |     remarques      |\n        // |--------\\------|------|-----|--------------------|\n        // |    json       | json | json| json/xml encapsulé |\n        // |    xml        | json | xml | param inactif      |\n        // |-------------------------------------------------|\n        // ex. le service demande une reponse native au \"format\" json et avec un \"output\" json.\n        // on a donc une reponse json encapsulé dans un json : ce qu'on ne souhaite pas !\n        // dans ce cas on ne renseigne pas output=json\n\n        // INFO\n        // \"wrap\" - choix d\"encapsuler ou non les reponses dans du JSON.\n        //      Par defaut, on encapsule uniquement les reponses sur le protocole JSONP (et qui sont en xml) !\n\n        // INFO\n        // \"callback\" - param est interne à la classe \"Protocol\" (non parametrable), et à ajouter à l\"url\n        //      ce param est independant du service car il est géré aussi par le filtre LUA :\n        //          ex. callback|null\n        //          Ce param. permet de renvoyer une reponse javascript :\n        //              callback ({http : {status:200, error:null},xml :\"réponse du service\"})\n        //          Ce param. est non renseigné par defaut car pour du JSONP, on utilise le\n        //          le protocol JSONP, et ce dernier implemente déjà le callback !\n\n        // settings par defaut\n        var settings = options || {\n            method : \"GET\",\n            // protocol : \"JSONP\",\n            protocol : \"XHR\",\n            timeOut : 0,\n            format : null,\n            wrap : true,\n            nocache : true,\n            output : \"json\",\n            callback : null,\n            callbackSuffix : null\n        };\n\n        // on determine l'environnement d'execution : browser ou non ?\n        // et on stoppe pour nodeJS... sur un protocole JSONP !\n        if (typeof window === \"undefined\" && options.protocol === \"JSONP\") {\n            console.log(\"Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS\");\n            return;\n        }\n\n        if (options.protocol === \"XHR\" || options.format === \"json\") {\n            settings.wrap = false;\n        } else if (options.protocol === \"JSONP\" && options.format === \"xml\") {\n            settings.wrap = true;\n        }\n\n        settings.callback = null; // FIXME non géré !?\n        settings.output = settings.wrap ? \"json\" : null;\n\n        // on encapsule les reponses dans un objet JSON\n        if (settings.wrap) {\n            var params = {};\n            params.output = settings.output;\n            params.callback = settings.callback;\n            delete params.callback; // FIXME non géré !?\n            settings.url = Helper.normalyzeUrl(options.url, params);\n        }\n\n        // choix de l\"implementation :\n        // XHR ou JSONP\n        switch (settings.protocol) {\n            case \"XHR\":\n                // on normalise l'url (gestion du cache)\n                if (options.method === \"GET\" && options.nocache) {\n                    settings.url = Helper.normalyzeUrl(settings.url, {\n                        t : new Date().getTime()\n                    });\n                }\n                // appel du service en XHR\n                XHR.call(settings);\n                break;\n            case \"JSONP\":\n\n                // on normalise l'url si les params. sont renseignés dans la string|object \"data\"\n                if (settings.data) {\n                    settings.url = Helper.normalyzeUrl(settings.url, settings.data);\n                }\n\n                // appel du service en JSONP\n                JSONP.call(settings);\n                break;\n            default:\n                throw new Error(\"protocol not supported (XHR|JSONP) !\");\n        }\n    }\n\n};\n\nexport default Protocol;\n","/* global Promise, require, XDomainRequest */\n\nimport Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport ES6Promise from \"es6-promise\";\n// import __request from \"request\";\n// import __xmldom from \"xmldom\";\n\n/**\n * Ajax Request (use of Promises)\n *\n * @module XHR\n * @alias Gp.Protocols.XHR\n * @see dependance 'es6-promise'\n */\n\n// cf. https://xhr.spec.whatwg.org/\n// cf. https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest\n\nvar XHR = {\n\n    /**\n     * Interface unique d'envoi d'une requête.\n     *\n     * @method call\n     * @static\n     * @param {Object} settings - options generales\n     * @param {String} settings.url    - url du service\n     * @param {String} settings.method - GET, POST, PUT, DELETE\n     * @param {String} settings.format - format de la reponse du service : json, xml ou null (brute)\n     * @param {String} settings.data   - content (post) ou param (get)\n     * @param {String} settings.proxy  - proxy url\n     * @param {Object|String} settings.headers - (post) ex. referer\n     * @param {Object|String} settings.content - (post) ex. 'application/json'\n     * @param {String} settings.timeOut - timeout = 0 par defaut\n     * @param {String} settings.scope - this\n     * @param {Function} settings.onResponse - callback\n     * @param {Function} settings.onFailure  - callback\n     */\n    call : function (settings) {\n        // logger\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::call()]\");\n\n        // FIXME\n        // To polyfill the global environment\n        ES6Promise.polyfill();\n\n        // test sur les settings obligatoires\n        if (!settings.url) {\n            throw new Error(\"missing parameter : url is not defined !\");\n        }\n\n        if (!settings.method) {\n            throw new Error(\"missing parameter : method is not defined !\");\n        }\n\n        if (!settings.format) {\n            settings.format = \"text\"; // reponse brute !\n        }\n\n        var options = {};\n        options.url = settings.url;\n        options.data = settings.data ? settings.data : null;\n        options.method = settings.method;\n        options.timeOut = settings.timeOut || 0;\n        options.scope = settings.scope || this;\n        options.proxy = settings.proxy || null;\n        options.content = settings.content || null;\n        options.headers = settings.headers || {\n            referer : \"http://localhost\"\n        };\n\n        // test sur les valeurs de 'settings.method'\n        switch (settings.method) {\n            case \"DELETE\":\n            case \"GET\":\n                break;\n            case \"PUT\":\n            case \"POST\":\n                // on force sur ces params spécifiques au mode POST\n                options.content = settings.content ? settings.content : \"application/x-www-form-urlencoded\"; // FIXME en attente des services : bascule en \"application/xml\" ou \"application/json\"\n                options.headers = settings.headers ? settings.headers : { referer : \"http://localhost\" }; // FIXME parametrable...\n                break;\n            case \"HEAD\":\n            case \"OPTIONS\":\n                throw new Error(\"HTTP method not yet supported !\");\n            default:\n                throw new Error(\"HTTP method unknown !\");\n        }\n\n        // test sur les valeurs de 'settings.format'\n        switch (settings.format) {\n            case \"text\":\n                this.__call(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"json\":\n                this.__callJSON(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            case \"xml\":\n                this.__callXML(options)\n                    .then(function (response) {\n                        logger.trace(response);\n                        settings.onResponse.call(this, response);\n                    })\n                    .catch(function (error) {\n                        settings.onFailure.call(this, error);\n                    });\n                break;\n            default:\n                throw new Error(\"This output Format is not yet supported !\");\n        }\n    },\n\n    /**\n     * Requete\n     *\n     * @method __call\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __call : function (options) {\n        var logger = Logger.getLogger(\"XHR\");\n        logger.trace(\"[XHR::__call()]\");\n\n        var promise = new Promise(\n            function (resolve, reject) {\n                // traitement du corps de la requête\n                var corps = (options.method === \"POST\" || options.method === \"PUT\") ? 1 : 0;\n\n                // seulement si options.data n'est pas vide (peut être un objet ou une chaine de caractères)\n                if (options.data && ((typeof options.data === \"object\" && Object.keys(options.data).length) || (typeof options.data === \"string\" && options.data.length)) && !corps) {\n                    options.url = Helper.normalyzeUrl(options.url, options.data);\n                }\n\n                logger.trace(\"URL = \", options.url);\n\n                var hXHR = null;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var nodefetch = require(\"node-fetch\");\n\n                    var opts = {\n                        headers : {\n                            Referer : \"https://localhost\"\n                        }\n                    };\n\n                    if (options.data && typeof options.data === \"string\" && corps) {\n                        opts = {\n                            method : options.method,\n                            body : options.data,\n                            headers : {\n                                \"Content-Type\" : options.content,\n                                Referer : \"https://localhost\"\n                            }\n                        };\n                    }\n\n                    return nodefetch(options.url, opts)\n                        .then(function (response) {\n                            if (response.ok) { // res.status >= 200 && res.status < 300\n                                resolve(response.text());\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + response.statusText + \"' | url : '\" + response.url + \"')\";\n                                var status = response.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        })\n                        .catch(function (e) {\n                            reject({\n                                message : e,\n                                status : -1\n                            });\n                        });\n                } else {\n                    if (window.XMLHttpRequest) {\n                        logger.trace(\"XMLHttpRequest\");\n\n                        hXHR = new XMLHttpRequest();\n                        hXHR.open(options.method, options.url, true); // async\n                        hXHR.overrideMimeType = options.content;\n\n                        // gestion du timeout\n                        var onTimeOutTrigger = null;\n                        if (options.timeOut > 0) {\n                            // FIXME le timeout interne ne me permet pas de declencher le bon message...\n                            // hXHR.timeout = options.timeOut;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                            /**\n                             * Description\n                             *\n                             * @method onTimeOutTrigger\n                             * @private\n                             */\n                            onTimeOutTrigger = window.setTimeout(\n                                function () {\n                                    var message = \"TimeOut Occured on Http Request with XMLHttpRequest !\";\n                                    reject({\n                                        message : message,\n                                        status : -1\n                                    });\n                                }, options.timeOut);\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            logger.trace(\"data = \", options.data);\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * On Error\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function (e) {\n                            console.log(e);\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Timeout\n                         * FIXME ne se declenche pas !?\n                         *\n                         * @param {Object} e - Event\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function (e) {\n                            console.log(e);\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method onreadystatechange\n                         * @private\n                         */\n                        hXHR.onreadystatechange = function (e) {\n                            if (hXHR.readyState === 4) { // DONE\n                                if (hXHR.status === 200) {\n                                    window.clearTimeout(onTimeOutTrigger);\n                                    resolve(hXHR.response);\n                                } else {\n                                    var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"' | response : '\" + e.target.response + \"')\";\n                                    var status = e.target.status;\n                                    reject({\n                                        message : message,\n                                        status : status\n                                    });\n                                }\n                            }\n                        };\n\n                        // gestion du content data\n                        var data4xhr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xhr);\n                    } else if (window.XDomainRequest) {\n                        // worked in Internet Explorer 8–10 only !\n                        logger.trace(\"XDomainRequest\");\n\n                        hXHR = new XDomainRequest();\n                        hXHR.open(options.method, options.url);\n\n                        hXHR.overrideMimeType = options.content;\n\n                        if (options.timeOut > 0) {\n                            hXHR.timeout = options.timeout;\n                            logger.trace(\"XHR - TimeOut actif !\");\n                        }\n\n                        if (corps) {\n                            // headers, data, content of data\n                            // cf. https://dvcs.w3.org/hg/xhr/raw-file/tip/Overview.html#dom-xmlhttprequest-setrequestheader\n                            hXHR.setRequestHeader(\"Content-type\", options.content);\n                            // FIXME refused to set unsafe header content-length javascript\n                            // hXHR.setRequestHeader (\"Content-length\", options.data.length);\n                            // hXHR.setRequestHeader (\"Referer\", options.headers.referer);\n                        }\n\n                        /**\n                         * Description\n                         *\n                         * @method onerror\n                         * @private\n                         */\n                        hXHR.onerror = function () {\n                            reject(new Error(\"Errors Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * Description\n                         *\n                         * @method ontimeout\n                         * @private\n                         */\n                        hXHR.ontimeout = function () {\n                            reject(new Error(\"TimeOut Occured on Http Request with XMLHttpRequest !\"));\n                        };\n\n                        /**\n                         * On Load\n                         *\n                         * @method onload\n                         * @private\n                         */\n                        hXHR.onload = function (e) {\n                            if (hXHR.status === 200) {\n                                resolve(hXHR.responseText);\n                            } else {\n                                var message = \"Errors Occured on Http Request (status : '\" + e.target.statusText + \"' | url : '\" + e.target.responseURL + \"')\";\n                                var status = e.target.status;\n                                reject({\n                                    message : message,\n                                    status : status\n                                });\n                            }\n                        };\n\n                        var data4xdr = (options.data && corps) ? options.data : null;\n\n                        hXHR.send(data4xdr);\n                    } else {\n                        throw new Error(\"CORS not supported\");\n                    }\n                }\n            }\n        );\n\n        return promise;\n    },\n\n    /**\n     * Requete avec parser JSON\n     *\n     * @method __callJSON\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callJSON : function (options) {\n        return this.__call(options)\n            .then(JSON.parse)\n            .catch(function (error) {\n                console.log(\"_callJSON failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    },\n\n    /**\n     * Requete avec parser XML\n     *\n     * @method __callXML\n     * @private\n     * @param  {Object} options - options\n     * @return {Object} promise\n     */\n    __callXML : function (options) {\n        return this.__call(options)\n            .then(function (response) {\n                var xmlDoc;\n\n                // test on env. nodejs or browser\n                if (typeof window === \"undefined\") {\n                    var DOMParser = require(\"@xmldom/xmldom\").DOMParser; // __xmldom.DOMParser\n                    xmlDoc = new DOMParser().parseFromString(response, \"text/xml\");\n                } else {\n                    if (window.DOMParser) {\n                        var parser = new window.DOMParser();\n                        xmlDoc = parser.parseFromString(response, \"text/xml\");\n                    } else { // IE\n                        xmlDoc = new window.ActiveXObject(\"Microsoft.XMLDOM\");\n                        xmlDoc.async = false;\n                        xmlDoc.loadXML(response);\n                    }\n                }\n\n                return xmlDoc;\n            })\n            .catch(function (error) {\n                console.log(\"__callXML failed on : \", options.url, error);\n                // FIXME pas d'exception, laissons le fil se derouler...\n                // throw error;\n            });\n    }\n\n};\n\nexport default XHR;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport AltiRequestFactory from \"./Request/AltiRequestFactory\";\nimport AltiResponseFactory from \"./Response/AltiResponseFactory\";\n\n/**\n * @classdesc\n *\n * Appel du service d'altimétrie du Géoportail\n *\n * @todo gestion du parma. output et callback\n * @todo outputFormat (REST) et format (WPS)\n * @todo La reponse JSON peut encapsuler un XML !\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Alti\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {Array.<Object>} options.positions - Tableau ({lon:float,lat:float}) contenant les coordonnées des points (CRS:84)\n *      dont on veut connaître les altitudes (ou à partir desquelles on va calculer le profil).\n *      Chaque élément du tableau est un objet JavaScript avec deux attributs : lon et lat, qui sont des flottants.\n *      Minimum 2 éléments si on souhaite calculer un profil altimétrique (ElevationLine).\n *      Maximum 50 éléments.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service alti : 'xml' ou 'json'.\n *      Ce paramètre déterminera l'extension '.xml' ou '.json' du service dans le cas de l'API REST,\n *      ou la valeur du paramètre 'format' dans le cas de la norme WPS.\n *      Nécessaire si serverUrl est renseigné, et qu'on souhaite passer par l'API REST,\n *      pour connaître le format dans lequel sera fournie la réponse (pour son traitement).\n *      Non nécessaire pour la norme WPS. Par défaut, ce paramètre vaut 'json'.\n *\n * @param {Number} [options.sampling] - Nombre de points à utiliser pour déterminer le tracé d'un profil altimétrique, compris entre 2 et 5000.\n *      A spécifier lorsqu'on souhaite accéder à cette fonctionnalité.\n *      Dans ce cas, les points fournis en entrée (au minimum de deux) servent à déterminer l'axe planimétrique\n *      le long duquel le profil doit être calculé.\n *      Si le paramètre sampling n'est pas spécifié ou moins de deux points sont fournis,\n *      c'est le service Elevation qui sera interrogé (altitudes simples calculées pour les points fournis).\n *      Une valeur de sampling strictement inférieure à 2 déclenchera un échantillonnage avec la valeur par défaut du service (3 points).\n *\n * @param {String} [options.api] - Manière d'accéder au service : 'REST' (via l'API REST) ou 'WPS' (via la norme WPS).\n *      Par défaut, on utilise l'API REST.\n *\n * @param {Boolean} [options.zonly] - Permet de ne récupérer que les altitudes en sortie s'il vaut 'true'.\n *      Vaut 'false' par défaut.\n *\n * @param {String} [options.resource] - Resource utilisée pour réaliser le calcul.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      positions : [{lon:, lat:}, {lon:, lat:}],\n *      outputFormat : 'json' // json|xml\n *      sampling : 3,\n *      api : 'REST', // REST|WPS\n *      zonly : false // false|true,\n *      resource : \"resource-par-defaut\"\n *   };\n *\n */\nfunction Alti (options) {\n    if (!(this instanceof Alti)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Alti\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Alti\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Alti\");\n    this.logger.trace(\"[Constructeur Alti (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    if (!options.positions) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"positions\"));\n    }\n\n    if (options.positions.length === 0) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"positions\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.positions = options.positions;\n\n    // format de réponse du service : \"json\" ou \"xml\" (valeur par défaut), en minuscule !\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"xml\";\n\n    // ressource utilisée pour le calcul altimétrique\n    this.options.resource = options.resource || \"ign_rge_alti_wld\";\n\n    // sampling\n    this.options.sampling = options.sampling || null;\n\n    // type d'api utilisé pour requeter le service, en majuscule !\n    this.options.api = (typeof options.api === \"string\") ? options.api.toUpperCase() : \"REST\";\n\n    // l'api ne peut être interrogée qu'en GET.\n    if (this.options.api === \"REST\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // param. zonly\n    this.options.zonly = options.zonly || false;\n\n    // param. measures\n    this.options.measures = options.measures || false;\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    // en fonction du type d'api, REST ou WPS, du format de reponse demandé (outputFormat)\n    // ainsi que sur le type de service (profil ou elevation)\n    if (!this.options.serverUrl) {\n        var lstUrlByDefault = DefaultUrlService.Alti.newUrl();\n        var urlFound = null;\n        switch (this.options.api) {\n            case \"WPS\":\n                urlFound = lstUrlByDefault.wps;\n                break;\n            case \"REST\":\n                var key = (options.sampling ? \"profil\" : \"elevation\") + \"-\" + this.options.outputFormat;\n                urlFound = lstUrlByDefault[key];\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"api\"));\n        }\n\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Server URL by default : \" + this.options.serverUrl);\n    }\n\n    // gestion du type de service\n    // si l'extension de l'url est .json ou .xml, on surcharge le format de sortie (outputFormat)\n    var idx = this.options.serverUrl.lastIndexOf(\".\");\n    if (idx !== -1) {\n        var extension = this.options.serverUrl.substring(idx + 1);\n        if (extension && extension.length < 5) { // FIXME extension de moins de 4 car. ...\n            this.logger.trace(\"Server Extension URL : \" + extension);\n            switch (extension.toLowerCase()) {\n                case \"json\":\n                case \"xml\":\n                    this.options.outputFormat = extension.toLowerCase();\n                    break;\n                default:\n                    throw new Error(\"type of service : unknown or unsupported (json or xml) !\");\n            }\n        }\n    }\n}\n\n/**\n * @lends module:Alti#\n */\nAlti.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nAlti.prototype.constructor = Alti;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.buildRequest = function (error, success) {\n    // utilisation en mode callback\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // callback\n        onSuccess : function (result) {\n            // sauvegarde de la requete !\n            this.request = result;\n            success.call(this, this.request);\n        },\n        onError : error,\n        scope : this,\n        // spécifique au service :\n        resource : this.options.resource,\n        positions : this.options.positions,\n        outputFormat : this.options.outputFormat,\n        sampling : this.options.sampling,\n        api : this.options.api,\n        zonly : this.options.zonly,\n        measures : this.options.measures\n    };\n\n    AltiRequestFactory.build(options);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAlti.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexité du retour du service qui renvoie soit\n    //  - une 'string' qui contient du XML ou JSON natif en mode XHR\n    //  - un objet JSON qui est natif ou encapsulé\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        AltiResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Alti;\n","\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service Altimétrique du Géoportail\n *      (calcul altimétrique simple ou profil altimétrique d'une courbe),\n *      lorsque le paramètre output = xml,\n *      afin de récupérer les élévations retournées.\n *\n * @module AltiResponseReader\n * @alias Gp.Services.Alti.Formats.AltiResponseReader\n * @private\n */\n\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport AltiResponse from \"../Response/model/AltiResponse\";\nimport Elevation from \"../Response/model/Elevation\";\nimport Measure from \"../Response/model/Measure\";\n\n/**\n *\n * Objet AltiResponseReader\n *\n * @member {Object} AltiResponseReader\n *\n * @property {Object} AltiResponseReader.READERS - Objet contenant des fonctions de lecture, appelées \"readers\"\n *      dont chaque clé correspond au nom d'un tag du XML que l'on souhaite lire\n *      et la valeur associée est une fonction (node, data)\n *      où node est un noeud du document DOM\n *      et data est un objet où l'on stocke les informations lues dans le XML.\n *\n * @property {Method} AltiResponseReader.READERS.elevations -  Lecture d'un noeud \"elevations\" de la réponse XML\n *      du service alti, correspondant logiquement à la racine du document\n *      (contient un ou plusieurs childNodes correspondant chacun à une élévation retournée)\n *\n * @property {Method} AltiResponseReader.READERS.elevation - Lecture d'un noeud \"elevation\" de la réponse xml du service alti.\n *      (contient un ou 4 childNode (s) correspondant à l'altitude (z) et éventuellement lat, lon, et acc)\n *\n * @property {Method} AltiResponseReader.READERS.lat - Lecture d'un noeud \"lat\" de la réponse xml du service alti.\n *      (contient une valeur de latitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.lon - Lecture d'un noeud \"lon\" de la réponse xml du service alti.\n *      (contient une valeur de longitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.z - Lecture d'un noeud \"z\" de la réponse xml du service alti.\n *      (contient une valeur d'altitude, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.acc - Lecture d'un noeud \"acc\" de la réponse xml du service alti.\n *      (contient une valeur de précision, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.measures - Lecture d'un noeud \"measures\" de la réponse xml du service alti.\n *      (contient une valeur de précision, qui est un flottant)\n *\n * @property {Method} AltiResponseReader.READERS.source_name - Lecture d'un noeud \"source_name\" de la réponse xml du service alti.\n *      (pour remplir l'éventuel objet measure)\n *\n * @property {Method} AltiResponseReader.READERS.source_mesure - Lecture d'un noeud \"source_mesure\" de la réponse xml du service alti.\n *      (pour remplir l'éventuel objet measure)\n *\n * @property {Method} AltiResponseReader.READERS.exceptionreport - Lecture d'un noeud \"ExceptionReport\" de la réponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.READERS.exception - Lecture d'un noeud \"Exception\" de la réponse xml du service alti.\n *\n * @property {Method} AltiResponseReader.read - Méthode permettant de lancer la lecture d'une réponse XML du service altimétrique,\n *      à l'aide des readers de la classe.\n *\n */\nvar AltiResponseReader = {};\n\nAltiResponseReader.READERS = {\n\n    /**\n     * Lecture d'un noeud \"elevations\" de la réponse XML du service alti, correspondant logiquement à la racine du document\n     *      (contient un ou plusieurs childNodes correspondant chacun à une élévation retournée)\n     *\n     * @param {DOMElement} root - racine de la réponse XML\n     * @static\n     * @memberof AltiResponseReader\n     * @returns {Object} Retourne un objet de type AltiResponse\n     */\n    elevations : function (root) {\n        // INFO : on passe en paramètre l'objet en entrée elevations, vide, à remplir.\n        var altiResponse = new AltiResponse();\n\n        if (root.hasChildNodes()) {\n            var children = root.childNodes;\n            var child;\n            var elevation;\n\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    elevation = AltiResponseReader.READERS[child.nodeName](child);\n                    altiResponse.elevations.push(elevation);\n                }\n            }\n        }\n\n        return altiResponse;\n    },\n\n    /**\n     * Lecture d'un noeud \"elevation\" de la réponse xml du service alti.\n     *      (contient un ou 5 childNode (s) correspondant à l'altitude (z) et éventuellement lat, lon, acc et measures)\n     *\n     * @param {DOMElement} node - noeud elevation à lire pour récupérer les informations de l'élévation retournée (z [, lon, lat, acc, measures])\n     * @return {Array} elevationResponse - format de la réponse en sortie, instance de AltiResponse\n     * @static\n     * @memberof AltiResponseReader\n     */\n    elevation : function (node) {\n        var elevation = new Elevation();\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (AltiResponseReader.READERS[child.nodeName]) {\n                    // INFO : on passe en paramètre l'objet en entrée elevation, vide, à remplir.\n                    AltiResponseReader.READERS[child.nodeName](child, elevation);\n                }\n            }\n        }\n        return elevation;\n    },\n\n    /**\n     * Lecture d'un noeud \"lat\" de la réponse xml du service alti.\n     *      (contient une valeur de latitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la latitude\n     * @param {Object} elevation - objet dans lequel stocker la latitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lat : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lat = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : latitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"lon\" de la réponse xml du service alti.\n     *      (contient une valeur de longitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la longitude\n     * @param {Object} elevation - objet dans lequel stocker la longitude retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    lon : function (node, elevation) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevation.lon = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : longitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"z\" de la réponse xml du service alti.\n     *      (contient une valeur d'altitude, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'altitude\n     * @param {Object} elevationObject - objet dans lequel stocker l'altitude retournée : elevation ou measure\n     * @static\n     * @memberof AltiResponseReader\n     */\n    z : function (node, elevationObject) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            if (elevationObject) {\n                elevationObject.z = parseFloat(textNode.nodeValue);\n            } else {\n                elevationObject = new Elevation();\n                elevationObject.z = parseFloat(textNode.nodeValue);\n                return elevationObject;\n            }\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : altitude attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"acc\" de la réponse xml du service alti.\n     *      (contient une valeur de précision, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la précision\n     * @param {Object} elevationObject - objet dans lequel stocker la précision retournée : elevation ou measure\n     * @static\n     * @memberof AltiResponseReader\n     */\n    acc : function (node, elevationObject) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            elevationObject.acc = parseFloat(textNode.nodeValue);\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"source_name\" de la réponse xml du service alti.\n     *      (contient le nom de la source, qui est un string)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la précision\n     * @param {Object} measure - objet dans lequel stocker le nom de la source retourné\n     * @static\n     * @memberof AltiResponseReader\n     */\n    source_name : function (node, measure) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            measure.source_name = textNode.nodeValue;\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : source_name attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"source_measure\" de la réponse xml du service alti.\n     *      (contient le nom de la mesure, qui est un string)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la précision\n     * @param {Object} measure - objet dans lequel stocker le nom de la source retourné\n     * @static\n     * @memberof AltiResponseReader\n     */\n    source_measure : function (node, measure) {\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            measure.source_measure = textNode.nodeValue;\n        } else {\n            throw new Error(\"Erreur dans la lecture de la réponse du service : source_measure attendue mais absente\");\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"measures\" et de ses enfants \"measure\" de la réponse xml du service alti.\n     *      (contient une valeur de précision, qui est un flottant)\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer la précision\n     * @param {Object} elevation - objet dans lequel stocker la précision retournée\n     * @static\n     * @memberof AltiResponseReader\n     */\n    measures : function (node, elevation) {\n        elevation.measures = [];\n        var measure;\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var measureNode;\n            var measureChildren;\n            for (var i = 0; i < children.length; i++) {\n                measure = new Measure();\n                measureNode = children[i];\n                measureChildren = measureNode.childNodes;\n                for (var j = 0; j < measureChildren.length; j++) {\n                    if (AltiResponseReader.READERS[measureChildren[j].nodeName]) {\n                        // INFO : on passe en paramètre l'objet en entrée elevation, vide, à remplir.\n                        AltiResponseReader.READERS[measureChildren[j].nodeName](measureChildren[j], measure);\n                    } else {\n                        throw new Error(\"Erreur dans la lecture de la réponse du service : measures attendues mais absentes\");\n                    }\n                }\n                elevation.measures.push(measure);\n            }\n        }\n    },\n\n    /**\n     * Lecture d'un noeud \"ExceptionReport\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exceptionreport : function (node) {\n        var response = {};\n\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                if (child.nodeName === \"Exception\") {\n                    response.exceptionReport = AltiResponseReader.READERS.exception(child);\n                }\n            }\n        }\n\n        return response;\n    },\n\n    /**\n     * Lecture d'un noeud \"Exception\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} exceptionReport - objet contenant l'exception, avec deux attributs :\n     *      {String} exceptionReport.exceptionCode - qui contient l'identifiant du code de l'exception\n     *      {String} exceptionReport.exception - qui contient le message de l'exception\n     * @static\n     * @memberof AltiResponseReader\n     */\n    exception : function (node) {\n        var exceptionReport = {};\n\n        // get exception code\n        var exceptionCode = node.getAttribute(\"exceptionCode\");\n        if (exceptionCode) {\n            exceptionReport.exceptionCode = exceptionCode;\n        }\n\n        // get exception message\n        var textNode = node.firstChild;\n        if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n            exceptionReport.exception = textNode.nodeValue;\n        }\n\n        return exceptionReport;\n    },\n\n    /**\n     * Lecture d'un noeud \"Error\" de la réponse xml du service alti.\n     *\n     * @param {DOMElement} node - noeud à lire pour récupérer l'exception\n     * @return {Object} error - objet contenant l'exception\n     * @static\n     */\n    error : function (node) {\n        var response = {\n            error : {}\n        };\n        // get error code and description\n        if (node.hasChildNodes()) {\n            var children = node.childNodes;\n            var child;\n            for (var i = 0; i < children.length; i++) {\n                child = children[i];\n                var textNode;\n                // get error code\n                if (child.nodeType === 1 && child.nodeName === \"code\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.code = textNode.nodeValue;\n                    }\n                }\n                // get error description\n                if (child.nodeType === 1 && child.nodeName === \"description\") { // 1 === node.ELEMENT_NODE\n                    textNode = child.firstChild;\n                    if (textNode && textNode.nodeType === 3) { // 3 === node.TEXT_NODE\n                        response.error.description = textNode.nodeValue;\n                    }\n                }\n            }\n        }\n        return response;\n    }\n\n};\n\n/**\n * Méthode permettant de lancer la lecture d'une réponse XML du service altimétrique,\n *      à l'aide des readers de la classe.\n *\n * @method AltiResponseReader.read\n * @param {DOMElement} root - racine de la réponse XML à lire\n * @static\n * @memberof AltiResponseReader\n */\nAltiResponseReader.read = function (root) {\n    if (root.nodeName === \"elevations\") {\n        var altiResponse = AltiResponseReader.READERS.elevations(root);\n        return altiResponse;\n    } else if (root.nodeName === \"ExceptionReport\") {\n        var exceptionReport = AltiResponseReader.READERS.exceptionreport(root);\n        return exceptionReport;\n    } else if (root.nodeName === \"error\") {\n        var error = AltiResponseReader.READERS.error(root);\n        return error;\n    } else {\n        throw new Error(\"Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.\");\n    }\n};\n\nexport default AltiResponseReader;\n","/**\n * Creation d'une requête en REST ou WPS\n * (Factory)\n *\n * @module AltiRequestFactory\n * @alias Gp.Services.Alti.Request.AltiRequestFactory\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AltiRequestREST from \"./AltiRequestREST\";\nimport AltiRequestWPS from \"./AltiRequestWPS\";\n\nvar AltiRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      httpMethod : 'GET', // GET|POST\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      scope : this,\n     *      positions : [{lon:, lat:}, {lon:, lat:}],\n     *      outputFormat : 'json' // json|xml\n     *      sampling : 3,\n     *      api : 'REST', // REST|WPS\n     *      zonly : false // false|true\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestFactory\");\n        logger.trace([\"AltiRequestFactory::build()\"]);\n\n        var request = null;\n\n        // on factorise les options par groupe;\n        // - global,\n        // - param, les params pour les data inputs\n        // - wps, les param du service\n        // - callback\n\n        var settings = {\n            // ajout des valeurs par defaut spécifiques au service\n            type : options.sampling ? \"Profil\" : \"Elevation\",\n            method : options.httpMethod,\n            param : {\n                positions : null,\n                delimiter : null, // FIXME par defaut, on ne le met pas en place car ça fait planter la requête !?\n                indent : null, // par defaut\n                crs : null, // par defaut\n                format : null, // (only to POST)\n                sampling : null, // (only use by Profil)\n                zonly : null, // (only use by Elevation)\n                measures : null // (only use by Elevation)\n            }\n        };\n\n        // surcharge des valeurs obligatoires\n        settings.param.positions = options.positions;\n        settings.param.format = options.outputFormat;\n        settings.param.sampling = options.sampling;\n        settings.param.zonly = options.zonly;\n        settings.param.measures = options.measures;\n        settings.param.resource = options.resource;\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\"); // cast variable to boolean\n        var bOnSuccess = !!(options.onSuccess !== null && typeof options.onSuccess === \"function\");\n\n        var message = null;\n        switch (options.api) {\n            case \"REST\":\n                // FIXME les exceptions ne sont pas 'catchées' sur le constructeur !\n                var myReq = new AltiRequestREST(settings);\n                if (!myReq.processRequestString()) {\n                    message = \"Error in process request (rest) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                request = myReq.requestString;\n                break;\n            case \"WPS\":\n                // ajout des valeurs par defaut spécifiques au service WPS\n                settings.wps = {\n                    service : null, // par defaut\n                    version : null, // par defaut\n                    identifier : null, // par defaut\n                    rawdataoutput : null, // par defaut\n                    request : null // par defaut\n                };\n\n                request = AltiRequestWPS.build(settings);\n                if (!request) {\n                    message = \"Error in process request (wps) !\";\n                    if (bOnError) {\n                        options.onError.call(options.scope, new ErrorService(message));\n                        return;\n                    }\n                    throw new Error(message);\n                }\n                break;\n            default:\n                message = \"Type of API is not supported by service (REST or WPS) !\";\n                if (bOnError) {\n                    options.onError.call(options.scope, new ErrorService(message));\n                    return;\n                }\n                throw new Error(message);\n        }\n\n        if (bOnSuccess) {\n            options.onSuccess.call(options.scope, request);\n        }\n\n        return request;\n    }\n};\n\nexport default AltiRequestFactory;\n","/* jshint multistr : true */\n\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service altimetrique.\n *\n * @todo Le service Alti n'implemente pas le POST !?\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequestREST\n * @param {Object} options - options\n * @param {Object}   options.param.positions - tableau de coordonnées lon/lat\n * @param {String}   options.param.delimiter - '|'\n * @param {Boolean}  options.param.indent - false|true\n * @param {String}   options.param.crs - 'CRS:84'\n * @param {String}   options.param.sampling - 3\n * @param {String}   options.param.resource - 'rge_alti_corse2a_float32_zip_lamb93'\n * @param {Boolean}  options.param.zonly - false|true\n * @param {Boolean}  options.param.measures - false|true\n * @param {String}   options.param.format - \"JSON|XML\"\n * @param {String}   options.type - \"Profil|Elevation\"\n * @param {String}   options.method - GET|POST\n *\n * @example\n *      var options = {\n *           type : 'Profil', // Elevation\n *           method : 'GET',  // par defaut\n *           param : {\n *               positions : [\n *                   {lon:'1.11', lat:'1.11'},\n *                   {lon:'1.10', lat:'1.10'},\n *                   {lon:'1.12', lat:'1.12'}\n *               ],\n *               delimiter : \";\",         // par defaut\n *               indent    : true,        // par defaut\n *               crs       : 'EPSG:4326', // par defaut\n *               format    : 'json',      // par defaut (only to POST)\n *               sampling  : 3 ,          // par defaut (only use by Profil)\n *               zonly     : false        // par defaut (only use by Elevation)\n *               measures  : false        // par defaut (only use by Elevation)\n *           }\n *      };\n *\n *      var result;\n *      try {\n *          var obj = new AltiRequestREST (options);\n *          if (! obj.processRequestString ()) {\n *              throw new Error(\"Request empty !?\")\n *          }\n *          result = obj.requestString;\n *      } catch (e) {\n *          // exceptions...\n *      }\n * @private\n */\nfunction AltiRequestREST (options) {\n    this.logger = Logger.getLogger(\"AltiRequestREST\");\n    this.logger.trace(\"[Constructeur AltiRequestREST ()]\");\n\n    if (!(this instanceof AltiRequestREST)) {\n        throw new TypeError(\"AltiRequestREST constructor cannot be called as a function.\");\n    }\n\n    this.options = options || {};\n\n    // existance des options\n    if (!this.options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    // type de requete : Altitude ou Profil\n    // (param. à determiner en fonction des parametres d'entrée)\n    if (!this.options.type) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n    }\n\n    // construction du modele de requête\n    // (test du type d'objet candidat)\n    this.DataObject = null;\n    switch (this.options.type) {\n        case \"Elevation\":\n            this.DataObject = new AltiElevationRequest(this.options.param);\n            break;\n        case \"Profil\":\n            this.DataObject = new AltiProfilRequest(this.options.param);\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n    }\n\n    /**\n     * methode.\n     * Par defaut, \"GET\".\n     */\n    this.method = this.options.method || \"GET\";\n}\n\nAltiRequestREST.prototype = {\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequestREST,\n\n    /**\n     * Template de la requête.\n     */\n    template : {\n        get : {\n            // FIXME on retire le param 'delimiter' : &delimiter='__DELIMITER__'\n            value : \"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__\",\n            input : {\n                point : \"&zonly=__ZONLY__\",\n                profil : \"&sampling=__SAMPLING__\"\n            }\n        },\n        post : {\n            // FIXME on retire le param 'delimiter' : delimiter='__DELIMITER__'\\n\\\n            value : \"lon=__LON__\\n\" +\n                \"lat=__LAT__\\n\" +\n                \"indent=__INDENT__\\n\" +\n                \"crs='__CRS__'\\n\" +\n                \"resource='__RESOURCE__'\\n\" +\n                \"measures='__MEASURES__'\\n\",\n            input : {\n                point : \"zonly=__ZONLY__\\n\",\n                profil : \"sampling=__SAMPLING__\"\n            }\n        }\n    },\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out : lon=0.2367,2.1570&lat=48.0551,46.6077&delimiter=,&indent=true&zonly=true&crs='CRS:84'\n     * // POST out : Not yet supported method POST !\n     * @returns {String}\n     */\n    processRequestString : function () {\n        this.logger.trace(\"AltiRequestREST::processRequestString ()\");\n\n        var template = \"\";\n        if (this.method === \"POST\") {\n            template = this.template.post.value;\n        } else if (this.method === \"GET\") {\n            template = this.template.get.value;\n        }\n\n        template = template.replace(/__LON__/g, this.DataObject.getLon());\n        template = template.replace(/__LAT__/g, this.DataObject.getLat());\n        // FIXME on retire le param 'delimiter'\n        // template = template.replace(/__DELIMITER__/g, this.DataObject.delimiter);\n        template = template.replace(/__INDENT__/g, this.DataObject.indent);\n        template = template.replace(/__CRS__/g, this.DataObject.crs);\n        template = template.replace(/__RESOURCE__/g, this.DataObject.resource);\n        template = template.replace(/__MEASURES__/g, this.DataObject.measures);\n\n        // ajout +\n        template = template + this.__addDataInputs();\n        this.logger.trace(\"traduction tmpl\", template);\n\n        // sauvegarde\n        this.requestString = template;\n\n        return this.requestString;\n    },\n\n    /**\n     * Ajout de parametres spécifiques (ex. zonly)\n     *\n     * @returns {String}\n     */\n    __addDataInputs : function () {\n        this.logger.trace(\"AltiRequestREST::addDataInput ()\");\n\n        var myTemplate;\n        if (this.method === \"POST\") {\n            myTemplate = this.template.post;\n        } else if (this.method === \"GET\") {\n            myTemplate = this.template.get;\n        } else {\n            throw new Error(\"No other HTTP method supported by the service !\");\n        }\n\n        var tmpl = null;\n        if (this.DataObject.CLASSNAME === \"AltiElevationRequest\") {\n            tmpl = myTemplate.input.point;\n            return tmpl.replace(/__ZONLY__/g, this.DataObject.zonly.toString());\n        } else if (this.DataObject.CLASSNAME === \"AltiProfilRequest\") {\n            tmpl = myTemplate.input.profil;\n            return tmpl.replace(/__SAMPLING__/g, this.DataObject.sampling);\n        } else {\n            throw new Error(\"No other object supported than elevation or profil !?\");\n        }\n    }\n};\n\nexport default AltiRequestREST;\n","/**\n * Classe d'interface des requêtes de type WPS sur le service altimetrique.\n * (Factory)\n *\n * @module Gp.Services.Alti.Request.AltiRequestWPS\n * @alias Gp.Services.Alti.Request.AltiRequestWPS\n * @private\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport WPS from \"../../../Formats/WPS\";\nimport AltiElevationRequest from \"./model/AltiElevationRequest\";\nimport AltiProfilRequest from \"./model/AltiProfilRequest\";\n\nvar AltiRequestWPS = {\n\n    /**\n     * Interface unique de construction de la requête.\n     *\n     * @method build\n     * @param {Object} options - options\n     * @param {Object}   options.param.positions - tableau de coordonnées lon/lat\n     * @param {String}   options.param.delimiter - '|'\n     * @param {Boolean}  options.param.indent - false|true\n     * @param {String}   options.param.crs - 'CRS:84'\n     * @param {String}   options.param.sampling - 3\n     * @param {Boolean}  options.param.zonly - false|true\n     * @param {String}   options.param.format - \"JSON|XML\" (only to POST)\n     * @param {String}   options.wps.service - \"WPS\"\n     * @param {String}   options.wps.version - \"1.0.0\"\n     * @param {String}   options.wps.identifier - \"gs:WPSElevation|gs:WPSLineElevation\"\n     * @param {String}   options.wps.rawdataoutput - \"result\"\n     * @param {String}   options.wps.request - \"Execute\"\n     * @param {String}   options.type - \"Profil|Elevation\"\n     * @param {String}   options.method - GET|POST\n     * @example\n     *      var options = {\n     *           type : 'Profil', // Elevation\n     *           method : 'GET',  // par defaut\n     *           param : {\n     *               positions : [\n     *                   {lon:'1.11', lat:'1.11'},\n     *                   {lon:'1.10', lat:'1.10'},\n     *                   {lon:'1.12', lat:'1.12'}\n     *               ],\n     *               delimiter : \";\",         // par defaut\n     *               indent    : true,        // par defaut\n     *               crs       : 'EPSG:4326', // par defaut\n     *               format    : 'json',      // par defaut (only to POST)\n     *               sampling  : 3 ,          // par defaut (only use by Profil)\n     *               zonly     : false,       // par defaut (only use by Elevation)\n     *           },\n     *           wps : {\n     *                 service : 'WPS',         // par defaut\n     *                 version : '1.0.0',       // par defaut\n     *                 identifier : 'gs:WPS',   // par defaut, Elevation = gs:WPSElevation, Profil = gs:WPSLineElevation\n     *                 rawdataoutput : 'result',// par defaut\n     *                 request : 'Execute'      // par defaut\n     *           }\n     *       };\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiRequestWPS\");\n        logger.trace([\"AltiRequestWPS::build()\"]);\n\n        // existance des options\n        if (!options) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n        }\n\n        // type de requete : Altitude ou Profil\n        // (param. à determiner en fonction des parametres d'entrée)\n        if (!options.type) {\n            throw new Error(_.getMessage(\"PARAM_EMPTY\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction du modele de requête\n        // (test du type d'objet candidat)\n        var DataObject = null;\n        switch (options.type) {\n            case \"Elevation\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSElevation\";\n                DataObject = new AltiElevationRequest(options.param);\n                break;\n            case \"Profil\":\n                // surcharge\n                options.wps.identifier = \"gs:WPSLineElevation\";\n                DataObject = new AltiProfilRequest(options.param);\n                break;\n            default:\n                throw new Error(_.getMessage(\"PARAM_TYPE\", \"type (Elevation or Profil)\"));\n        }\n\n        // construction de la requête WPS\n        var settings = {\n            data : DataObject,\n            method : options.method,\n            param : options.wps\n        };\n\n        var rqstWPS = new WPS(settings);\n\n        if (!rqstWPS.processRequestString()) {\n            throw new Error(\"Enable to process request !\");\n        }\n\n        return rqstWPS.requestString;\n    }\n};\n\nexport default AltiRequestWPS;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requêtes de type POINT du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiElevationRequest\n * @param {Object} options - options\n * @param {Boolean}  options.zonly - false|true\n *\n * @private\n */\nfunction AltiElevationRequest (options) {\n    if (!(this instanceof AltiElevationRequest)) {\n        throw new TypeError(\"AltiElevationRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiElevationRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiElevationRequest ()]\");\n\n    /**\n     * Z uniquement.\n     * true|false\n     */\n    this.zonly = this.options.zonly || false; // test des options héritées !\n}\n\n/**\n * @lends module:AltiElevationRequest#\n */\n\nAltiElevationRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"zonly\"\n     */\n    zonly : {\n        /** getter */\n        get : function () {\n            return this._zonly;\n        },\n        /** setter */\n        set : function (z) {\n            this._zonly = z;\n        }\n    }\n\n});\n\n/**\n * Constructeur (alias)\n */\nAltiElevationRequest.prototype.constructor = AltiElevationRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array}\n */\nAltiElevationRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"zonly\",\n        v : this.zonly\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    return map;\n};\n\nexport default AltiElevationRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\nimport AltiRequest from \"./AltiRequest\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes de type PROFIL du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiProfilRequest\n * @param {Object}   options - options\n * @param {String}   options.sampling - 3\n *\n * @private\n */\nfunction AltiProfilRequest (options) {\n    if (!(this instanceof AltiProfilRequest)) {\n        throw new TypeError(\"AltiProfilRequest constructor cannot be called as a function.\");\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"AltiProfilRequest\";\n\n    // appel du constructeur par heritage\n    AltiRequest.apply(this, arguments);\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiProfilRequest ()]\");\n\n    /**\n     * Sampling\n     * Par defaut, 3\n     */\n    this.sampling = this.options.sampling || 3; // test des options héritées !\n}\n\n/**\n * @lends module:AltiProfilRequest#\n */\n\nAltiProfilRequest.prototype = Object.create(AltiRequest.prototype, {\n\n    /**\n     * Setter/getter pour \"sampling\"\n     */\n    sampling : {\n        /** getter */\n        get : function () {\n            return this._sampling;\n        },\n        /** setter */\n        set : function (value) {\n            this._sampling = value;\n        }\n    }\n});\n\n/**\n * Constructeur (alias)\n */\nAltiProfilRequest.prototype.constructor = AltiProfilRequest;\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiProfilRequest.prototype.getData = function () {\n    // par glop..., appel de AltiRequest::getData () !\n    var map = [];\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    // map.push({k : \"delimiter\", v : this.delimiter}); // FIXME on retire le param \"delimiter\"\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"sampling\",\n        v : this.sampling\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    return map;\n};\n\nexport default AltiProfilRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service altimetrique.\n *\n * @constructor\n * @alias Gp.Services.Alti.Request.AltiRequest\n * @param {Object} options - options\n * @param {Object}   options.positions - tableau de coordonnées lon/lat\n * @param {String}   options.delimiter - \"|\"\n * @param {Boolean}  options.indent - false|true\n * @param {String}   options.crs - \"CRS:84\"\n * @param {String}   options.format - \"JSON|XML\"\n *\n * @private\n */\nfunction AltiRequest (options) {\n    if (!(this instanceof AltiRequest)) {\n        throw new TypeError(\"AltiRequest constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur AltiRequest ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    /**\n     * Liste des coordonnées.\n     * @example\n     * var c = [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}];\n     */\n    this.positions = this.options.positions || [];\n\n    /**\n     * Caractère de séparation.\n     * Par defaut, \"|\".\n     */\n    this.delimiter = this.options.delimiter || \"|\";\n\n    /**\n     * Indentation.\n     * true|false\n     */\n    this.indent = this.options.indent || false;\n\n    /**\n     * Projection.\n     * Par defaut, CRS:84.\n     */\n    this.crs = this.options.crs || \"CRS:84\";\n\n    /**\n     * format de sortie.\n     * Par defaut, \"json\".\n     */\n    this.format = this.options.format || \"json\";\n\n    /*\n     * Ressource utilisée\n    */\n    this.resource = this.options.resource;\n\n    /**\n     * Réponse détaillée (source & accuracy)\n     * true|false\n    */\n    this.measures = this.options.measures || false;\n}\n\n/**\n * CLASSNAME\n */\nAltiRequest.CLASSNAME = \"AltiRequest\";\n\nAltiRequest.prototype = {\n\n    /**\n     * @lends module:AltiRequest#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : AltiRequest,\n\n    /**\n     * Ajout d\"une liste de coordonnées.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.setPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    setPositions : function (lstPosition) {\n        var positions = [];\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                positions.push(o);\n            }\n        }\n\n        this.positions = positions;\n    },\n\n    /**\n     * Liste des coordonnées.\n     *\n     * @param {Int} pos - position\n     * @returns {positions}\n     * @example\n     * obj.getPositions ();  // [{lon : \"\", lat : \"\"}, {lon : \"\", lat : \"\"}]\n     * obj.getPositions (0); // [{lon : \"\", lat : \"\"}]\n     */\n    getPositions : function (pos) {\n        // FIXME test if not a number !?\n        if (!pos) {\n            return this.positions;\n        }\n\n        var index = this.positions.length - 1;\n        if (pos > index || pos < index) {\n            this.logger.warn(\"index out of range !\");\n            return this.positions;\n        }\n\n        return this.positions[pos];\n    },\n\n    /**\n     * Ajout d\"une liste de coordonnées.\n     *\n     * @param {Object[]} lstPosition - liste de positions\n     * @example\n     * obj.addPositions ([{lon : \"0.15\", lat : \"0.15\"}, {lon : \"1.15\", lat : \"1.15\"}]);\n     */\n    addPositions : function (lstPosition) {\n        for (var i = 0; i < lstPosition.length; i++) {\n            var o = lstPosition[i];\n            if (o.lon && o.lat) {\n                this.positions.push(lstPosition[i]);\n            }\n        }\n    },\n\n    /**\n     * Retourne la liste des longitudes avec un caractère de séparation.\n     *\n     * @returns {String} - une liste de longitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLon : function () {\n        var lstLon = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLon.push(this.positions[i].lon);\n        }\n        this.logger.trace(lstLon);\n        return lstLon.join(this.delimiter);\n    },\n\n    /**\n     * Retourne la liste des lattitudes avec un caractère de séparation.\n     *\n     * @returns {String} - une liste de lattitudes\n     * @example\n     * // out : 0.2367|2.1570|43.789|...\n     */\n    getLat : function () {\n        var lstLat = [];\n        for (var i = 0; i < this.positions.length; i++) {\n            lstLat.push(this.positions[i].lat);\n        }\n        this.logger.trace(lstLat);\n        return lstLat.join(this.delimiter);\n    }\n\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]}\n */\nAltiRequest.prototype.getData = function () {\n    var map = [];\n\n    map.push({\n        k : \"lon\",\n        v : this.getLon()\n    });\n    map.push({\n        k : \"lat\",\n        v : this.getLat()\n    });\n    map.push({\n        k : \"delimiter\",\n        v : this.delimiter\n    });\n    map.push({\n        k : \"indent\",\n        v : this.indent\n    });\n    map.push({\n        k : \"crs\",\n        v : this.crs\n    });\n    map.push({\n        k : \"format\",\n        v : this.format\n    });\n\n    return map;\n};\n\nexport default AltiRequest;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AltiResponseFactory\n * @private\n * @alias Gp.Services.Alti.Response.AltiResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport XML from \"../../../Formats/XML\";\nimport AltiResponseReader from \"../Formats/AltiResponseReader\";\nimport AltiResponse from \"./model/AltiResponse\";\nimport Elevation from \"./model/Elevation\";\n\nvar AltiResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AltiResponseFactory\");\n        logger.trace([\"AltiResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                switch (options.outputFormat) {\n                    case \"xml\":\n                        logger.trace(\"analyze response : xml\");\n\n                        try {\n                            var p = new XML({\n                                reader : AltiResponseReader\n                            });\n\n                            if (typeof options.response === \"string\") {\n                                p.setXMLString(options.response);\n                            } else {\n                                p.setXMLDoc(options.response);\n                            }\n\n                            data = p.parse();\n\n                            if (!data) {\n                                throw new Error(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\"));\n                            }\n                        } catch (e) {\n                            var message = e.message;\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", message),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        break;\n\n                    case \"json\":\n                        logger.trace(\"analyze response : json\");\n                        logger.trace(\"analyze response : \", typeof options.response);\n\n                        var JSONResponse = null;\n                        if (typeof options.response === \"string\") {\n                            JSONResponse = JSON.parse(options.response);\n                        } else {\n                            JSONResponse = options.response;\n                        }\n\n                        // le service renvoie t il une erreur ?\n                        if (JSONResponse && JSONResponse.error) {\n                            // ex. {\"error\": {\"code\": \"BAD_PARAMETER\",\"description\": \"The values () cannot be parsed as a valid longitude (double value such as -180 < lat < 180).\"}}\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                                status : 200,\n                                type : ErrorService.TYPE_SRVERR\n                            }));\n                            return;\n                        }\n\n                        // analyse de la reponse\n                        if (JSONResponse) {\n                            var elevations = JSONResponse.elevations;\n                            var altiResponse = new AltiResponse();\n                            var elevation;\n                            if (Array.isArray(elevations) && elevations.length) {\n                                for (var i = 0; i < elevations.length; i++) {\n                                    elevation = new Elevation();\n\n                                    if (typeof elevations[i] === \"object\") {\n                                        // elevations[i] est un objet elevation\n                                        if (elevations[i].lon) {\n                                            elevation.lon = elevations[i].lon;\n                                        }\n                                        if (elevations[i].lat) {\n                                            elevation.lat = elevations[i].lat;\n                                        }\n                                        if (elevations[i].z) {\n                                            elevation.z = elevations[i].z;\n                                        }\n                                        if (elevations[i].acc) {\n                                            elevation.acc = elevations[i].acc;\n                                        }\n                                        if (elevations[i].measures) {\n                                            elevation.measures = elevations[i].measures;\n                                        }\n                                    } else if (typeof elevations[i] === \"number\") {\n                                        // elevations[i] est un nombre, dans le cas de zonly=true notamment\n                                        elevation.z = elevations[i];\n                                    }\n\n                                    if (Array.isArray(altiResponse.elevations)) {\n                                        altiResponse.elevations.push(elevation);\n                                    }\n                                }\n                            }\n                            data = altiResponse;\n                        }\n\n                        if (!data) {\n                            options.onError.call(options.scope, new ErrorService({\n                                message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                                type : ErrorService.TYPE_UNKERR,\n                                status : -1\n                            }));\n                            return;\n                        }\n                        break;\n\n                    default:\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_2\"),\n                            type : ErrorService.TYPE_UNKERR,\n                            status : -1\n                        }));\n                        return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                } else if (data.error) {\n                    var errorMess = data.error.description;\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", errorMess),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AltiResponseFactory;\n","/**\n * Response object for {@link module:Services~getAltitude Gp.Services.getAltitude ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Alti.Elevation>} elevations - Elevations array.\n *\n * @namespace\n * @alias Gp.Services.AltiResponse\n */\nfunction AltiResponse () {\n    if (!(this instanceof AltiResponse)) {\n        throw new TypeError(\"AltiResponse constructor cannot be called as a function.\");\n    }\n\n    this.elevations = [];\n}\n\nAltiResponse.prototype = {\n\n    constructor : AltiResponse\n\n};\n\nexport default AltiResponse;\n","\n/**\n * Single elevation object returned by underlying web service. Contains at least, one elevation (z). May also contain point coordinates and elevation accuracy if \"zonly\" parameter wasn't set to true.\n *\n * @property {Float} lat - Point latitude. (only if zonly=false)\n * @property {Float} lon - Point longitude. (only if zonly=false)\n * @property {Float} z - Point elevation.\n * @property {Float} acc - Accuracy of elevation for this point. (only if zonly=false)\n *\n * @namespace\n * @alias Gp.Services.Alti.Elevation\n */\nfunction Elevation () {\n    if (!(this instanceof Elevation)) {\n        throw new TypeError(\"Elevation constructor cannot be called as a function.\");\n    }\n\n    this.z = null;\n}\n\nElevation.prototype = {\n\n    constructor : Elevation\n\n};\n\nexport default Elevation;\n","\n/**\n * Single measure object returned by underlying web service if measures = true and zonly = false\n *\n * @property {String} source_name - Name of the source\n * @property {String} source_measure - Name of the measure\n * @property {Float} z - Point elevation.\n * @property {Float} acc - Accuracy of elevation for this point. (only if zonly=false)\n *\n * @namespace\n * @alias Gp.Services.Alti.Measure\n */\nfunction Measure () {\n    if (!(this instanceof Measure)) {\n        throw new TypeError(\"Measure constructor cannot be called as a function.\");\n    }\n\n    this.source_name = null;\n    this.source_measure = null;\n    this.z = null;\n    this.acc = null;\n}\n\nMeasure.prototype = {\n\n    constructor : Measure\n\n};\n\nexport default Measure;\n","import CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport AutoCompleteResponseFactory from \"./Response/AutoCompleteResponseFactory\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport MR from \"../../Utils/MessagesResources\";\nimport Helper from \"../../Utils/Helper\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\n\n/**\n * @classdesc\n * Appel du service d'autocomplétion du Géoportail :\n * envoi de la requête construite selon les paramètres en options,\n * éventuellement parsing et analyse  de la réponse,\n * retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.AutoComplete\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.text - La chaîne de caractère à compléter.\n *      Cette chaîne n'est pas \"URL encodée\".\n *      C'est l'API qui s'occupe de l'encoder pour l'inclure dans la requête.\n *\n * @param {Array.<String>} [options.type = [\"StreetAddress\"]] - Type de l'objet recherché.\n *      Le service d'autocomplétion du Géoportail permet de rechercher des toponymes 'PositionOfInterest' et/ou des adresses postales 'StreetAddress'.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, type = ['StreetAddress'].\n *\n * @param {String} [options.territory] - Limitation de la zone de recherche de localisants.\n *      Le service d'autocomplétion du Géoportail permet de limiter la recherche à la métropole et la Corse : options.territory = 'METROPOLE',\n *      DOMS TOMS : options.territory = 'DOMTOM', ou à un département : options.territory = '31'\n *      Pas de valeur par défaut.\n *      La valeur par défaut est donc celle du service.\n *      Le service d'autocomplétion du Géoportail renvoie toutes les informations quand aucun territoire n'est spécifié.\n *\n * @param {Number} [options.maximumResponses = 10] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut.\n *      La valeur par défaut sera donc celle du service : 10.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      text : \"\",\n *      type : \"StreetAddress\",\n *      territory : 'METROPOLE',\n *      maximumResponses : 10\n *   };\n */\nfunction AutoComplete (options_) {\n    if (!(this instanceof AutoComplete)) {\n        throw new TypeError(MR.getMessage(\"CLASS_CONSTRUCTOR\", \"AutoComplete\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"AutoComplete\";\n\n    this.logger = Logger.getLogger(\"Gp.Services.AutoComplete\");\n    this.logger.trace(\"[Constructeur AutoComplete (options)]\");\n\n    var options = this.patchOptionConvertor(options_);\n\n    if (!options.serverUrl) {\n        options.serverUrl = DefaultUrlService.AutoComplete.newUrl();\n    }\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    if (!options.text) {\n        throw new Error(MR.getMessage(\"PARAM_MISSING\", \"text\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.text = options.text;\n\n    // on definit des parametres par defaut\n    if (!options.type) {\n        options.type = [\"StreetAddress,PositionOfInterest\"];\n    }\n\n    this.options.type = options.type;\n    this.options.territory = options.terr || \"\";\n    this.options.maximumResponses = options.maximumResponses || 10;\n\n    // INFO\n    // le service ne repond pas en mode POST (405 Method Not Allowed)\n    if (this.options.protocol === \"XHR\" && this.options.httpMethod === \"POST\") {\n        this.logger.warn(\"Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !\");\n        this.options.httpMethod = \"GET\"; // on surcharge !\n    }\n\n    // attributs d'instances\n\n    /**\n     * Format forcé de la réponse du service : \"json\"\n     * sauf si l'on souhaite une reponse brute (options.rawResponse)\n     */\n    this.options.outputFormat = (this.options.rawResponse) ? \"\" : \"json\";\n}\n\n/**\n * @lends module:AutoComplete#\n */\n\nAutoComplete.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nAutoComplete.prototype.constructor = AutoComplete;\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} options_ - options du service\n * @return {Object} - options\n */\nAutoComplete.prototype.patchOptionConvertor = function (options_) {\n    const options = options_;\n\n    if (options.filterOptions) {\n        this.logger.warn(\"The parameter 'filterOptions' is deprecated\");\n\n        if (options.filterOptions.type) {\n            this.logger.warn(\"The parameter 'filterOptions.type' is deprecated\");\n            if (!options.type) {\n                options.type = options.filterOptions.type;\n            }\n        }\n\n        if (options.filterOptions.territory) {\n            this.logger.warn(\"The parameter 'filterOptions.territory' is deprecated\");\n            if (!options.terr) {\n                options.terr = options.filterOptions.territory;\n            }\n        }\n\n        delete options.filterOptions;\n    }\n\n    return options;\n};\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nAutoComplete.prototype.buildRequest = function (error, success) {\n    // ex.\n    // http://wxs.ign.fr/CLEF/ols/apis/completion?\n    // text=Brie-Comt&\n    // type=StreetAddress,PositionOfInterest&\n    // territory=METROPOLE&\n    // maximumResponses=10\n\n    // traitement des param KPV sous forme de tableau\n    var territory = \"\";\n    if (this.options.territory) {\n        territory = this.options.territory;\n    }\n\n    var type = \"\";\n    if (this.options.type) {\n        type = this.options.type.join(\",\");\n    }\n\n    // normalisation de la requete avec param KPV\n    this.request = Helper.normalyzeParameters({\n        text : encodeURIComponent(this.options.text),\n        type : type,\n        terr : territory,\n        maximumResponses : this.options.maximumResponses\n    });\n\n    (!this.request)\n        ? error.call(this, new ErrorService(MR.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback de succès de l'analyse de la réponse\n */\nAutoComplete.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onSuccess : success,\n            onError : error,\n            scope : this\n        };\n\n        AutoCompleteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(MR.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default AutoComplete;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module AutoCompleteResponseFactory\n * @private\n * @alias Gp.Services.AutoComplete.Response.AutoCompleteResponseFactory\n */\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport AutoCompleteResponse from \"./model/AutoCompleteResponse\";\nimport SuggestedLocation from \"./model/SuggestedLocation\";\n\nvar AutoCompleteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Alti\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"AutoCompleteResponseFactory\");\n        logger.trace([\"AutoCompleteResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                var JSONResponse = null;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la réponse\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.error) {\n                        // ex. ?\n                        options.onError.call(options.scope, new ErrorService({\n                            message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.error.description),\n                            status : JSONResponse.error.code,\n                            type : ErrorService.TYPE_SRVERR\n                        }));\n                        return;\n                    }\n\n                    // création de l'objet réponse\n                    data = new AutoCompleteResponse();\n\n                    // boucle sur les résultats de l'autocomplétion\n                    if (JSONResponse.results && Array.isArray(JSONResponse.results)) {\n                        var suggestedLocation = null;\n\n                        for (var i = 0; i < JSONResponse.results.length; i++) {\n                            var result = JSONResponse.results[i];\n                            suggestedLocation = new SuggestedLocation();\n\n                            if (result) {\n                                if (result.country === \"StreetAddress\") {\n                                    suggestedLocation.street = result.street;\n                                    suggestedLocation.type = \"StreetAddress\";\n                                } else if (result.country === \"PositionOfInterest\") {\n                                    suggestedLocation.poi = result.street;\n                                    suggestedLocation.type = \"PositionOfInterest\";\n                                    suggestedLocation.poiType = result.poiType;\n                                }\n\n                                if (suggestedLocation.position) {\n                                    suggestedLocation.position.x = result.x;\n                                    suggestedLocation.position.y = result.y;\n                                }\n\n                                suggestedLocation.kind = result.kind;\n                                suggestedLocation.commune = result.city;\n                                suggestedLocation.fullText = result.fulltext;\n                                suggestedLocation.postalCode = result.zipcode;\n                                suggestedLocation.classification = result.classification;\n                            }\n                            // Ajout du résultat au tableau reverseGeocodedLocations de geocodedLocation\n                            data.suggestedLocations.push(suggestedLocation);\n                        }\n                    } else {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n\n                    if (!data.suggestedLocations.length) {\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_FORMAT_3\")));\n                        return;\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE_2\"),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse (xmlString) est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default AutoCompleteResponseFactory;\n","/**\n * Response object for {@link module:Services~autoComplete Gp.Services.autoComplete ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.AutoComplete.SuggestedLocation>} suggestedLocations - SuggestedLocations array.\n *\n * @namespace\n * @alias Gp.Services.AutoCompleteResponse\n */\nfunction AutoCompleteResponse () {\n    if (!(this instanceof AutoCompleteResponse)) {\n        throw new TypeError(\"AutoCompleteResponse constructor cannot be called as a function.\");\n    }\n\n    this.suggestedLocations = [];\n}\n\nAutoCompleteResponse.prototype = {\n\n    constructor : AutoCompleteResponse\n\n};\n\nexport default AutoCompleteResponse;\n","\n/**\n * Single SuggestedLocation Object returned by underlying web service.\n * Each suggested location represents a street address (\"StreetAddress\") or a place name (\"PositionOfInterest\").\n *\n * @property {String} type - Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n * @property {Gp.Point} position - Position of the suggested location given in requested coordinates system.\n * @property {String} commune - Suggested municipality\n * @property {String} fullText - Full text representation of the suggested location.\n * @property {String} postalCode - Suggested location postcode\n * @property {Integer} classification - Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n * @property {String} street - Street name of the suggested location (\"StreetAddress\" only).\n * @property {String} kind - Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n *\n * @namespace\n * @alias Gp.Services.AutoComplete.SuggestedLocation\n */\nfunction SuggestedLocation () {\n    if (!(this instanceof SuggestedLocation)) {\n        throw new TypeError(\"SuggestedLocation constructor cannot be called as a function.\");\n    }\n\n    /* REPONSE :\n        {\n           \"status\" : \"OK\",\n           \"results\" : [\n              {\n                 \"country\":\"PositionOfInterest\",\n                 \"x\":-1.559185,\n                 \"y\":47.952603,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"35150\",\n                 \"street\":\"corbe\",\n                 \"kind\":\"Lieu-dit habité\",\n                 \"fulltext\":\"corbe, 35150 Brie\",\n                 \"classification\":6\n              },\n              {\n                 \"country\":\"StreetAddress\",\n                 \"x\":1.538295,\n                 \"y\":43.19646,\n                 \"city\":\"Brie\",\n                 \"zipcode\":\"09700\",\n                 \"street\":\"courreste\",\n                 \"kind\":\"\",\n                 \"fulltext\":\"courreste, 09700 Brie\",\n                 \"classification\":7\n              }\n           ]\n        }\n    */\n\n    /* REPONSE EN ERREUR\n        {\n            status : \"ERROR\",\n            results : [ ]\n        }\n    */\n\n    /**\n     * Suggested location type : \"StreetAddress\" ou \"PositionOfInterest\"\n     * @type {String}\n     */\n    this.type = null;\n\n    /**\n     * Position of the suggested location given in requested coordinates system.\n     * @type {Gp.Point}\n     */\n    this.position = {\n        x : null,\n        y : null\n    };\n\n    /**\n     * Suggested municipality\n     * @type {String}\n     */\n    this.commune = null;\n\n    /**\n     * Full text representation of the suggested location.\n     * @type {String}\n     */\n    this.fullText = null;\n\n    /**\n     * Suggested location postcode\n     * @type {Number}\n     */\n    this.postalCode = null;\n\n    /**\n     * Number used to classify the importance of the place where is the suggested location from 1 (most important) to 7 (less important).\n     * @type {Integer}\n     */\n    this.classification = null;\n\n    /**\n     * Street name of the suggested location (\"StreetAddress\" only).\n     * @type {String}\n     */\n    this.street = null;\n\n    /**\n     * Place name of the suggested location (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.poi = null;\n\n    /**\n     * Nature of the suggested location : \"prefecture\", \"monument\", \"commune\", ... for instance (\"PositionOfInterest\" only).\n     * @type {String}\n     */\n    this.kind = null;\n}\n\nSuggestedLocation.prototype = {\n\n    constructor : SuggestedLocation\n};\n\nexport default SuggestedLocation;\n","import Logger from \"../Utils/LoggerByDefault\";\nimport Helper from \"../Utils/Helper\";\nimport _ from \"../Utils/MessagesResources\";\nimport Protocol from \"../Protocols/Protocol\";\nimport ErrorService from \"../Exceptions/ErrorService\";\n// import DefaultUrlService from \"./DefaultUrlService\";\n// package.json (extract version)\nimport Pkg from \"../../package.json\";\n\n/**\n * @classdesc\n * Composant Service\n *\n * @constructor\n * @alias Gp.Services.CommonService\n * @param {Object} options - options communes à tous les services\n *\n * @param {String} [options.serverUrl] - URL d'accès au service. Par défaut \"https://data.geopf.fr/SERVICE/\".\n *      Permet de forcer l'utilisation d'un service équivalent déployé derrière une éventuelle autre URL d'accès.\n *      Si ce paramètre est renseigné alors, le paramètre par défaut est ignoré.\n *\n * @param {String} [options.protocol] - Le protocole à utiliser pour récupérer les informations du service :\n *      peut valoir 'JSONP' ou 'XHR'.\n *      Par défaut, c'est le protocole XHR qui sera utilisé.\n *      Attention, le protocole JSONP n'est pas valide dans un environnement NodeJS (Utilisation du mode XHR).\n *\n * @param {Boolean} [options.ssl] - Indique si l'on souhaite intérroger les services en https.\n *      Ce paramètre ne fonctionne que pour une utilisation hors navigateur (ex. NodeJS).\n *      Sur un navigateur, le protocole est automatiquement extrait de l'url du site...\n *      Par défaut, on utilise le protocole http (ssl=false).\n *\n * @param {String} [options.proxyURL] - Le proxy à utiliser pour pallier au problème de cross-domain dans le cas d'une requête XHR.\n *      Utile si le paramètre 'protocol' vaut 'XHR', il ne sera pas pris en compte si protocol vaut JSONP.\n *\n * @param {String} [options.callbackSuffix] - Suffixe de la fonction de callback à utiliser, dans le cas du protocole JSONP.\n *      Par défaut, la fonction de callback portera un nom du type \"callback\"+ID, où ID est soit un identifiant unique généré à chaque requête,\n *      soit le paramètre callbackSuffix s'il est spécifié. Par exemple, si callbackSuffix=\"_2\", la fonction sera \"callback_2 ()\".\n *      Utile pour utiliser une réponse déjà encapsulée dans une fonction de callback, dont le nom est connu\n *      Utile seulement si le paramètre 'protocol' vaut 'JSONP', il ne sera pas pris en compte si protocol vaut 'XHR'.\n *\n * @param {String} [options.httpMethod] - La méthode HTTP\n *      à utiliser dans le cas d'une requête XHR : peut valoir 'GET' ou 'POST'.\n *      Non pris en compte si 'protocol' vaut JSONP qui fonctionne obligatoirement en GET.\n *      Par défaut, c'est la méthode GET qui est utilisée.\n *\n * @param {String} [options.contentType] - Content-Type de la requete\n *      à utiliser dans le cas d'une requête XHR en mode POST.\n *      Non pris en compte si 'protocol' vaut JSONP et/ou la méthode HTTP vaut GET.\n *      Par défaut, c'est la méthode GET qui est utilisée donc on n'utilise pas de Content-Type.\n *\n * @param {Number} [options.timeOut] - Délai d'attente maximal (en ms) de la réponse du service (à partir de l'envoi de la requête).\n *      Par défaut, aucun timeOut n'est pris en compte (timeoutDelay= 0).\n *\n * @param {Boolean} [options.rawResponse] - Indique si l'on souhaite que la réponse du service ne soit pas parsée par l'API avant d'être restituée.\n *      (Cf. paramètre « onSuccess » pour plus de détails).\n *\n * @param {Function} [options.onSuccess] - Fonction appelée lorsque le service répond correctement à la requête\n *      (code HTTP 200, sans message d'erreur).\n *      Cette fonction prend en paramètre la réponse du service,\n *      soit sous la forme d'un Object Javascript formaté par le parseur dédié à la syntaxe du service (comportement par défaut) ;\n *      soit brute au format String non prétraité si le paramètre « rawResponse » a été précisé avec la valeur « true ».\n *\n * @param {Function} [options.onFailure] - Fonction appelée lorsque le service ne répond pas correctement\n *      (code HTTP de retour différent de 200 ou pas de réponse).\n *\n * @param {Function} [options.onBeforeParse] - Fonction appelée avant le parsing de la réponse\n *      Permet de modifier la réponse avant parsing et la fonction doit retourner une String.\n *      Cette fonction prend en paramètre la réponse telle que renvoyée par le service\n *      (cad au format json ou xml).\n *      Pour le JSONP, si le paramètre \"rawResponse\" a été précisé avec la valeur \"true\",\n *      la fonction prend en paramètre un Object JavaScript contenant la réponse XML.\n *\n * @example\n *   var options = {\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      ssl : false,\n *      proxyURL : null,\n *      callbackName : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      onBeforeParse : function (rawResponse) {}\n *   };\n */\nfunction CommonService (options) {\n    if (!(this instanceof CommonService)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\"));\n    }\n\n    this.logger = Logger.getLogger(\"CommonService\");\n    this.logger.trace(\"[Constructeur CommonService (options)]\");\n\n    // #####################\n    // récupération des options par défaut pour les paramètres optionnels\n    // #####################\n\n    /**\n     * Options du service\n     * @type {Object}\n     */\n    this.options = {\n        // protocol : \"JSONP\",\n        protocol : \"XHR\",\n        ssl : true,\n        proxyURL : \"\",\n        // callbackName : \"\",\n        callbackSuffix : null,\n        httpMethod : \"GET\",\n        timeOut : 0,\n        rawResponse : false,\n        scope : this,\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        onSuccess : function (response) {\n            console.log(\"onSuccess - la reponse est la suivante : \", response);\n        },\n        /**\n        * callback par defaut pour les erreurs\n        * @param {Object} error - error\n        * @private\n        */\n        onFailure : function (error) {\n            if (error.status === 200 || !error.status) {\n                console.log(\"onFailure : \", error.message);\n            } else {\n                console.log(\"onFailure - Erreur (\", error.status, \") : \", error.message);\n            }\n        }\n    };\n\n    // et on ajoute les options en paramètre aux options par défaut\n    for (var opt in options) {\n        if (options.hasOwnProperty(opt)) {\n            this.options[opt] = options[opt];\n        }\n    }\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // modification de la fonction de callback onSuccess dans le cas où la réponse brute est demandée\n    if (this.options.rawResponse && !this.options.onSuccess) {\n        /**\n        * callback par defaut pour la reponse\n        * @param {Object} response - response\n        * @private\n        */\n        this.options.onSuccess = function (response) {\n            console.log(\"onSuccess - la réponse brute du service est la suivante : \", response);\n        };\n    }\n\n    // gestion du callback onSuccess\n    var bOnSuccess = !!(this.options.onSuccess !== null && typeof this.options.onSuccess === \"function\");\n    if (!bOnSuccess) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"onSuccess()\"));\n    }\n\n    // gestion de la methode HTTP\n    this.options.httpMethod = (typeof options.httpMethod === \"string\") ? options.httpMethod.toUpperCase() : \"GET\";\n\n    switch (this.options.httpMethod) {\n        case \"POST\":\n        case \"GET\":\n            break;\n        case \"PUT\":\n        case \"DELETE\":\n        case \"HEAD\":\n        case \"OPTIONS\":\n            throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"httpMethod\"));\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"httpMethod\"));\n    }\n\n    // gestion du protocole\n    // this.options.protocol = (typeof options.protocol === \"string\" ) ? options.protocol.toUpperCase() : \"JSONP\";\n    this.options.protocol = (typeof options.protocol === \"string\") ? options.protocol.toUpperCase() : \"XHR\";\n\n    switch (this.options.protocol) {\n        case \"JSONP\":\n        case \"XHR\":\n            break;\n        default:\n            throw new Error(_.getMessage(\"PARAM_UNKNOWN\", \"protocol\"));\n    }\n\n    // on determine l'environnement d'execution : browser ou non ?\n    // et on lance une exception sur l'utilisation du protocole JSONP pour nodeJS...\n    if (typeof window === \"undefined\" && this.options.protocol === \"JSONP\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT_NODEJS\", \"protocol=JSONP (instead use XHR)\"));\n    }\n\n    // le protocole JSONP ne fonctionne qu'en GET.\n    if (this.options.protocol === \"JSONP\") {\n        this.options.httpMethod = \"GET\";\n    }\n\n    // gestion du cache\n    this.options.nocache = options.nocache || false;\n\n    // #####################\n    // attributs d'instances\n    // #####################\n\n    /**\n     * Format de réponse du service\n     */\n    this.options.outputFormat = null;\n    /**\n     * Requête envoyée au service\n     */\n    this.request = null;\n    /**\n     * Reponse du service\n     */\n    this.response = null;\n}\n\n/**\n * @lends module:CommonService\n */\nCommonService.prototype = {\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : CommonService,\n\n    /**\n     * Appel du service Géoportail\n     */\n    call : function () {\n        /* jshint validthis : true */\n        this.logger.trace(\"CommonService::call ()\");\n\n        var context = this;\n        /** fonction d'execution */\n        function run () {\n            this.logger.trace(\"CommonService::run ()\");\n            this.buildRequest.call(context, onError, onBuildRequest);\n        }\n\n        run.call(context);\n\n        // callback de fin de construction de la requête\n        function onBuildRequest (result) {\n            this.logger.trace(\"CommonService::onBuildRequest : \", result);\n            this.callService.call(context, onError, onCallService);\n        }\n\n        // callback de fin d'appel au service\n        function onCallService (result) {\n            this.logger.trace(\"CommonService::onCallService : \", result);\n            this.analyzeResponse.call(context, onError, onAnalyzeResponse);\n        }\n\n        // callback de fin de lecture de la reponse\n        function onAnalyzeResponse (result) {\n            this.logger.trace(\"CommonService::onAnalyzeResponse : \", result);\n            if (result) {\n                this.options.onSuccess.call(this, result);\n            } else {\n                return onError.call(this, new ErrorService(\"Analyse de la reponse en échec !?\"));\n            }\n        }\n\n        // callback de gestion des erreurs : renvoit un objet de type ErrorService\n        function onError (error) {\n            this.logger.trace(\"CommonService::onError()\");\n            // error : l'objet est du type ErrorService ou Error\n            var e = error;\n            if (!(e instanceof ErrorService)) {\n                e = new ErrorService(error.message);\n            }\n            this.options.onFailure.call(this, e);\n        }\n    },\n\n    /**\n     * Création de la requête\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    buildRequest : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet 'this.request'\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    },\n\n    /**\n     * Appel du service\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    callService : function (error, success) {\n        // INFO\n        // retourne l'objet 'this.response'\n\n        // NOTES\n        //  Pour le mode XHR, on recupère une reponse sous forme d'un json ou xml (#document).\n        //  Pour le mode JSONP, on a toujours un objet JSON mais sous 2 formes :\n        //      - natif\n        //      - XML encapsulé :\n        //          {http : {status:200, error:null},xml :'réponse du service'}\n        //          {http : {status:400, error:'reponse du service'},xml :null}\n        //  En XHR, la reponse est directement sauvegardée dans 'this.response'.\n        //  Par contre, en JSONP, on doit analyser la reponse (status ou non vide),\n        //  et ne renvoyer que le contenu (xml ou l'objet)\n\n        // gestion de la proxification du service\n        var strUrlProxified = null;\n        var strData = this.request;\n\n        // a t on mis en place un proxy ?\n        // la proxyfication est valable uniquement en mode XHR !\n        var bUrlProxified = !!(this.options.proxyURL && this.options.protocol === \"XHR\");\n\n        // rajout de l'option gpbibaccess\n        // INFO : acces au numero de version de package.conf aprés compilation !\n        var requestMetaOptions = {\n            \"gp-access-lib\" : Pkg.version\n        };\n\n        if (this.options.apiKey) {\n            requestMetaOptions.apiKey = this.options.apiKey;\n        }\n\n        this.options.serverUrl = Helper.normalyzeUrl(this.options.serverUrl, requestMetaOptions, false);\n\n        // si le proxy est renseigné, on proxifie l'url du service\n        if (bUrlProxified) {\n            if (this.options.httpMethod === \"GET\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, this.request, true);\n                strData = null;\n            }\n\n            if (this.options.httpMethod === \"POST\") {\n                strUrlProxified = this.options.proxyURL + Helper.normalyzeUrl(this.options.serverUrl, null, true);\n                strData = this.request;\n            }\n        }\n\n        // contexte du composant spécifique !\n        var self = this;\n\n        var options = {\n            url : strUrlProxified || this.options.serverUrl,\n            method : this.options.httpMethod,\n            protocol : this.options.protocol,\n            timeOut : this.options.timeOut || 0,\n            format : this.options.outputFormat, // ceci declenche le parsing de la reponse du service, mais on souhaite toujours une reponse brute (string) !\n            nocache : this.options.nocache || false, // ceci permet d'ajouter un timestamp dans la requête\n            wrap : this.options.protocol !== \"XHR\", // ceci declenche l'encapsulation de la reponse XML du service dans du JSON, mais pas en mode XHR !\n            callbackSuffix : this.options.callbackSuffix,\n            // callbackName : this.options.callbackName || null,\n            data : strData,\n            headers : null, // TODO...\n            content : this.options.contentType || \"application/xml\",\n            scope : this.options.scope || this,\n            // callback de reponse\n            onResponse : function (response) {\n                self.logger.trace(\"callService::onResponse()\");\n\n                // le contenu de la reponse à renvoyer !\n                var content = null;\n\n                // XHR : on renvoie toujours la reponse brute du service (json ou xml)\n                // au parser du composant...\n                if (self.options.protocol === \"XHR\") {\n                    self.logger.trace(\"Response XHR\", response);\n                    content = response; // par defaut, la reponse du service  !\n                }\n\n                // JSONP : on pre-analyse la reponse brute du service (encapsuler ou pas)\n                // avant de l'envoyer au parser du composant...\n                if (self.options.protocol === \"JSONP\") {\n                    self.logger.trace(\"Response JSON\", response);\n                    if (response) {\n                        if (response.http) {\n                            // reponse encapsulée :\n                            // ex. reponse du service en xml\n                            // > {http : {status:200, error:null},xml :'réponse du service'}\n                            if (response.http.status !== 200) {\n                                error.call(self, new ErrorService({\n                                    status : response.http.status,\n                                    message : response.http.error,\n                                    type : ErrorService.TYPE_SRVERR\n                                }));\n                                return;\n                            } else {\n                                content = response.xml; // par defaut !\n                                if (self.options.rawResponse) {\n                                    content = response;\n                                }\n                            }\n                        } else {\n                            // reponse non encapsulée :\n                            // ex. reponse du service en json ou xml\n                            content = response;\n                        }\n                    } else {\n                        error.call(self, new ErrorService(\"Le contenu de la reponse est vide !?\"));\n                        return;\n                    }\n                }\n\n                // si on souhaite parser la reponse du service\n                if (typeof self.options.onBeforeParse === \"function\") {\n                    var newResponse = self.options.onBeforeParse(content);\n                    if (typeof newResponse === \"string\") {\n                        // la reponse parsée par l'utilisateur est retournée sous\n                        // forme de string !\n                        content = newResponse;\n                    }\n                }\n                // sauvegarde de la reponse dans l'objet parent (CommonService)\n                self.response = content;\n                // on renvoie la reponse...\n                success.call(self, content);\n            },\n            // callback des erreurs\n            onFailure : function (e) {\n                self.logger.trace(\"callService::onFailure()\");\n                // on est forcement sur une erreur levée par un service !\n                e.type = ErrorService.TYPE_SRVERR;\n                error.call(self, new ErrorService(e));\n            },\n            // callback de timeOut\n            onTimeOut : function () {\n                self.logger.trace(\"callService::onTimeOut()\");\n                error.call(self, new ErrorService(\"TimeOut!\"));\n            }\n        };\n\n        Protocol.send(options);\n    },\n\n    /**\n     * Analyse de la réponse\n     * @param {Function} error - callback\n     * @param {Function} success - callback\n     */\n    analyzeResponse : function (error, success) {\n        // INFO\n        this.logger.error(\"overwritten method !\");\n        // retourne l'objet spécifique au type de composant (json)\n        if (error) {\n            error.call(this, \"This method must be overwritten !\");\n        }\n        success.call(this, \"This method must be overwritten !\");\n    }\n\n};\n\nexport default CommonService;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport ConfigInterface from \"./ConfigInterface\";\n\n/**\n * @classdesc\n *\n * Recupération de la configuration de clés Géoportail sous forme de JSON\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Config\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n * @param {Sting} options.apiKey - clé(s) dont on veut obtenir la configuration. Si plusieurs clés, séparer chacune par une virgule\n * @param {Boolean} [options.sync=false] - force le mode synchrone\n * @param {String} options.customConfigFile - chemin vers un fichier de configuration personnalisé. Surcharge le paramètre apiKey.\n * @see Gp.Services.GetConfigInterface\n *\n * @example\n *   var options = {\n *      apiKey : \"cartes,ortho\",\n *      sync : false,\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *   };\n *\n */\nfunction Config (options) {\n    if (!(this instanceof Config)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Config\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"Config\";\n\n    this.logger = Logger.getLogger(\"Gp.Config\");\n    this.logger.trace(\"[Constructeur Config (options)]\");\n\n    // #####################\n    // analyse des options\n    // #####################\n\n    // gestion du callback onSuccess\n    var bOnSuccess = !!(options.onSuccess !== null && typeof options.onSuccess === \"function\");\n    if (!bOnSuccess) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"onSuccess()\"));\n    }\n    if (!options.apiKey && !options.customConfigFile) {\n        // si pas de thème spécifié, on récupère toutes les ressources possibles dans l'objet Config\n        options.apiKey = \"full\";\n    }\n    this.options = {};\n    this.options.onSuccess = options.onSuccess;\n    this.options.onFailure = options.onFailure;\n\n    // mode sync\n    this.options.sync = options.sync || false;\n\n    // gestion d'un tableau d'url des fichiers de configuration\n    this.options.listConfigUrls = (options.customConfigFile)\n        ? [options.customConfigFile]\n        : !Array.isArray(options.apiKey)\n            ? DefaultUrlService.Config.url(options.apiKey.split(\",\"))\n            : DefaultUrlService.Config.url(options.apiKey);\n}\n\n/**\n * @lends module:Config#\n */\nConfig.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/**\n * Constructeur (alias)\n */\nConfig.prototype.constructor = Config;\n\n/**\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n * @overload\n */\nConfig.prototype.buildRequest = function (error, success) {\n    // liste des urls des fichiers de configuration en JSON\n    this.listConfigUrls = this.options.listConfigUrls;\n\n    if (!this.listConfigUrls) {\n        error.call(this, new Error(\"url by default not found !\"));\n        return;\n    }\n\n    // INFO :\n    // il n'y a pas de construction de requête,\n    // on passe directement à l'appel des requêtes\n    success.call(this, this.listConfigUrls);\n};\n\n/**\n * Récupération des configuration\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n * @overload\n */\nConfig.prototype.callService = function (error, success) {\n    if (this.options.sync) {\n        __callServiceSync.call(this, error, success);\n    } else {\n        __callService.call(this, error, success);\n    }\n};\n\n/**\n * Requêtes en mode asynchrone\n *\n * @param {*} error\n * @param {*} success\n * @private\n */\nvar __callService = function (error, success) {\n    // liste des resultats au format JSON\n    this.listConfigResults = [];\n\n    // test on env. nodejs or browser\n    let Fetch = null;\n    if (typeof window === \"undefined\") {\n        var nodefetch = require(\"node-fetch\");\n        Fetch = nodefetch;\n    } else {\n        Fetch = window.fetch;\n    }\n\n    // the factory of fetch !\n    var fetchFactory = (url) => {\n        return Fetch(url, { credentials : \"same-origin\" })\n            .then((response) => {\n                if (response.ok) {\n                    return response.json()\n                        .then((json) => {\n                            // TODO :\n                            // tester le contenu !\n                            return json;\n                        })\n                        .catch((error) => {\n                            throw new Error(\"Exception Json : \" + error);\n                        });\n                } else {\n                    throw new Error(\"Exception HTTP : \" + response.status + \" (status code) !\");\n                }\n            })\n            .catch((error) => {\n                return new Promise((resolve, reject) => {\n                    // eslint-disable-line no-unused-vars\n                    reject(error);\n                });\n            });\n    };\n\n    // construction des promises fetch\n    var promises = [];\n    for (let index = 0; index < this.listConfigUrls.length; index++) {\n        const url = this.listConfigUrls[index];\n        promises.push(fetchFactory(url));\n    }\n\n    Promise.all(promises)\n        .then((results) => {\n            if (!results) {\n                throw new Error(\"results config empty !?\");\n            }\n            results.forEach((result) => {\n                // TODO :\n                // verification des resultats\n                this.listConfigResults.push(result);\n            });\n        })\n        .then(() => {\n            success.call(this, this.listConfigResults);\n        })\n        .catch((e) => {\n            // TODO :\n            // construction d'un message\n            error.call(this, e);\n        });\n};\n\n/**\n * Requêtes en mode synchrone\n *\n * @param {*} error\n * @param {*} success\n * @private\n */\nvar __callServiceSync = function (error, success) {\n    // liste des resultats au format JSON\n    this.listConfigResults = [];\n\n    // FIXME :\n    // boucle synchrone !\n    for (var i = 0; i < this.listConfigUrls.length; i++) {\n        const url = this.listConfigUrls[i];\n        // TODO :\n        // prévoir le CORS, headers, ...\n        const request = new XMLHttpRequest();\n        request.open(\"GET\", url, false);\n        request.send(null);\n        if (request.status === 200) {\n            // TODO :\n            // tester la reponse !\n            var response = JSON.parse(request.responseText);\n            this.listConfigResults.push(response);\n        }\n    }\n    // callback\n    if (this.listConfigResults.length !== 0) {\n        success.call(this, this.listConfigResults);\n    } else {\n        error.call(this, new Error(\"...\"));\n    }\n};\n\n/**\n * Analyse et mise en forme de la réponse en fusionnant les configurations\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n * @overload\n */\nConfig.prototype.analyzeResponse = function (error, success) {\n    // fonction de merge des objects JSON\n    var mergeConfig = function (objects) {\n        // objet fusion des couches\n        var allLayersConfig = {};\n        // objet fusion des clés\n        var allKeysConfig = {};\n        // objet fusion des TMS\n        var allTMSConfig = {};\n\n        // on fusionne les résultat\n        for (var i = 0; i < objects.length; i++) {\n            if (!objects[i].generalOptions || !objects[i].layers) {\n                return;\n            }\n            allKeysConfig = {\n                ...allKeysConfig,\n                ...objects[i].generalOptions.apiKeys\n            };\n            allLayersConfig = {\n                ...allLayersConfig,\n                ...objects[i].layers\n            };\n            allTMSConfig = {\n                ...allTMSConfig,\n                ...objects[i].tileMatrixSets\n            };\n        }\n\n        var mergedConfig = {\n            generalOptions : {\n                apiKeys : allKeysConfig\n            },\n            layers : allLayersConfig,\n            tileMatrixSets : allTMSConfig\n        };\n        return mergedConfig;\n    };\n\n    // fusion des configurations JSON\n    var ConfigJSON = mergeConfig(this.listConfigResults);\n    if (!ConfigJSON) {\n        error.call(this, new Error(\"configuration structure not conforme !\"));\n        return;\n    }\n\n    // creation des interfaces\n    var IConfig = new ConfigInterface();\n    // ajout des interfaces avec la configuration JSON\n    Object.assign(IConfig, ConfigJSON);\n\n    // définition de la variable globale Gp.Config\n    var scope = typeof window !== \"undefined\" ? window : {};\n    if (!scope.Gp) {\n        scope.Gp = {};\n    }\n\n    // enregistrement\n    if (scope.Gp.Config) {\n        Object.assign(scope.Gp.Config, IConfig);\n        // dans le doute..., ceinture et bretelles !\n        for (var property in IConfig) {\n            scope.Gp.Config[property] = IConfig[property];\n        }\n    } else {\n        scope.Gp.Config = IConfig;\n    }\n\n    // INFO :\n    // il n'y a pas d'analyse des résultats,\n    // on passe directement à l'appel de la callback utilisateur\n    success.call(this, scope.Gp.Config);\n};\n\nexport default Config;\n","\n/**\n * Response object for {@link module:Services~getConfig Gp.Services.getConfig ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Object} generalOptions - General properties for default map configuration resources.\n * @property {Object} generalOptions.apiKeys - Object that associates apiKey (s) with an array of resources IDs availables with that key.\n * @property {String} generalOptions.title - Underlying web service Title.\n * @property {String} generalOptions.defaultGMLGFIStyle - XSL URL used by default to translate an XML GetFeatureInfo response into an HTML array.\n * @property {String} generalOptions.theme - default theme (FIXME : for what ?)\n * @property {Array.<Float>} generalOptions.wgs84Resolutions - geographical resolutions Array for each [zoom level of the Geoportal platform]{@link http://api.ign.fr/tech-docs-js/webmaster/layers.html#Geoportal_resolutions} from 0 to 21. Expressed in degrees/pixel.\n * @property {Object} layers - Associative array mapping resources availables IDs (keys) with their properties (values given as {@link Gp.Services.Config.Layer}).\n * @property {Object} tileMatrixSets - Associative Array mapping TileMatrixSets IDs (keys) availables with their properties (values given as {@link Gp.Services.Config.TileMatrixSet}).\n *\n * @namespace\n * @alias Gp.Services.GetConfigInterface\n */\nfunction ConfigInterface () {\n    if (!(this instanceof ConfigInterface)) {\n        throw new TypeError(\"ConfigInterface constructor cannot be called as a function.\");\n    }\n\n    this.generalOptions = {\n        apiKeys : {},\n        title : null,\n        defaultGMLGFIStyle : null,\n        theme : null,\n        wgs84Resolutions : []\n    };\n\n    this.layers = {};\n\n    this.tileMatrixSets = {};\n}\n\nConfigInterface.prototype = {\n\n    /*\n     * Constructor (alias)\n     */\n    constructor : ConfigInterface,\n\n    /**\n     * Check if config is loaded for a given key\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Boolean} isKeyConfLoaded - true if config of the key is already loaded, false otherwise\n     */\n    isKeyConfLoaded : function (apiKey) {\n        if (!apiKey) {\n            return;\n        }\n        if (this.generalOptions.apiKeys[apiKey]) {\n            return true;\n        }\n        return false;\n    },\n\n    /**\n     * Returns an array of Geoportal layers identifiers, corresponding to an API contract key.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Array} apiKeys - Array of geoportal layers identifiers\n     */\n    getLayersId : function (apiKey) {\n        return this.generalOptions.apiKeys[apiKey];\n    },\n\n    /**\n     * Returns the id of a Geoportal layer with its name and its service.\n     *\n     * @param {String} layerName - name of the layer (ex. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {String} service   - name of the service (ex. \"WMS\" ou \"WMTS\")\n     * @returns {String} Id of the layer (ex. \"ORTHOIMAGERY.ORTHOPHOTOS$GEOPORTAIL:OGC:WMTS\")\n     */\n    getLayerId : function (layerName, service) {\n        if (!layerName || !service) {\n            return;\n        }\n        var layerId = null;\n\n        // layer\n        // key : [layerName]$[contexte]:OGC:[service]\n        // ex : \"ORTHOIMAGERY.ORTHOPHOTOS$GEOPORTAIL:OGC:WMTS\"\n\n        // service\n        // key : [layerName]$[contexte];[service]\n        // ex : PositionOfInterest$OGC:OPENLS;ReverseGeocode\n\n        if (this.layers) {\n            var layers = this.layers;\n            for (var key in layers) {\n                if (layers.hasOwnProperty(key)) {\n                    var parts = key.split(\"$\");\n                    if (layerName === parts[0]) {\n                        if (parts[1]) {\n                            var servicePartsLayer = parts[1].split(\":\");\n                            var servicePartsService = parts[1].split(\";\");\n\n                            if (servicePartsService[1] === service.toUpperCase()) {\n                                layerId = key;\n                                break;\n                            }\n                            if (servicePartsLayer[2] === service.toUpperCase()) {\n                                layerId = key;\n                                break;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        if (!layerId) {\n            return;\n        }\n        return layerId;\n    },\n\n    /**\n     * Returns an associative array of Geoportal layers configurations, corresponding to an API contract key.\n     * If no key is specified, all layers from configuration are returned.\n     *\n     * @param {String} apiKey - Access key to Geoportal platform\n     * @returns {Object} layers - Object which properties are layers identifiers.\n     */\n    getLayersConf : function (apiKey) {\n        var layers = {};\n        var layersIdArray = this.getLayersId(apiKey);\n        if (layersIdArray) {\n            for (var i = 0; i < layersIdArray.length; i++) {\n                var lyrId = layersIdArray[i];\n                layers[lyrId] = this.layers[lyrId];\n            }\n        }\n        return layers;\n    },\n\n    /**\n     * Returns a geoportal layer configuration, given its identifier\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @return {Object} layer - Layer configuration\n     * @see Gp.Services.Config.Layer\n     */\n    getLayerConf : function (layerId) {\n        if (!this.layers) {\n            return;\n        }\n        return this.layers[layerId];\n    },\n\n    /**\n     * Get all parameters needed to display a WMS or WMTS layer given its name, its service and its key\n     *\n     * @param {String} layerName - name of the layer (ex. \"ORTHOIMAGERY.ORTHOPHOTOS\")\n     * @param {String} service   - name of the service (ex. \"WMS\" ou \"WMTS\")\n     * @param {String} [apiKey]  - Contract API key\n     * @returns {Object} params  - params of the service (WMS or WMTS) for the given layer\n     * @returns {String} params.url        - Url of the service to reach to display the layer\n     * @returns {String} params.version    - Version of the service\n     * @returns {String} params.styles     - Default style of the layer\n     * @returns {String} params.format     - Default format of the layer\n     * @returns {String} params.projection - Default projection of the layer\n     * @returns {Number} params.minScale   - Min scale denominator of the layer\n     * @returns {Number} params.maxScale   - Max scale denominator of the layer\n     * @returns {Gp.BBox} params.extent    - Extent of the layer, in the projection of the layer\n     * @returns {Array} params.legends     - Array of legends associated to the layer\n     * @returns {Array} params.title       - Name of the layer, readable by a human\n     * @returns {Array} params.description - Description of the layer\n     * @returns {String} params.[TMSLink]          - Id of the Tile Matrix Set (TMS), in the case of WMTS layer\n     * @returns {Gp.Point} params.[matrixOrigin]   - Originof the tile matrix (top left corner), in the case of WMTS layer\n     * @returns {Array} params.[nativeResolutions] - Array with the resolution of each level of the tile matrix set, in the case of WMTS layer\n     * @returns {Array} params.[matrixIds]         - Array with the ID of each level of the tile matrix set, in the case of WMTS layer\n     */\n    getLayerParams : function (layerName, service) {\n        var params = {};\n\n        if ((service === \"WMS\" || Object.keys(this.tileMatrixSets).length !== 0) && Object.keys(this.layers).length !== 0) {\n            // get the layerId of the layer\n            var layerId = this.getLayerId(layerName, service);\n\n            if (layerId) {\n                // get the layer Conf Object\n                var layerConf = this.getLayerConf(layerId);\n\n                var keys = this.getLayerKey(layerId);\n                if (keys.length === 0) {\n                    return;\n                }\n\n                // get services params\n                for (var i = 0; i < keys.length; i++) {\n                    // only one serverUrl is saved in Gp.Config : with multiKeys, we have to retrieve the key used in the serverUrl property\n                    if (layerConf.serviceParams.serverUrl[keys[i]]) {\n                        params.url = layerConf.serviceParams.serverUrl[keys[i]];\n                    }\n                }\n\n                const wmsTypeRegex = /\\/v\\//;\n                // WMS vector style always empty (not in getCap)\n                if (wmsTypeRegex.test(params.url)) {\n                    params.styles = \" \";\n                } else {\n                    // WMS raster style is defined in getCap\n                    params.styles = layerConf.styles[0].name;\n                }\n\n                params.version = layerConf.serviceParams.version;\n                params.format = layerConf.formats[0].name;\n                params.projection = layerConf.defaultProjection;\n\n                // get layer info and constraints\n                params.minScale = layerConf.globalConstraint.minScaleDenominator;\n                params.maxScale = layerConf.globalConstraint.maxScaleDenominator;\n                params.extent = layerConf.globalConstraint.bbox;\n                params.legends = layerConf.legends;\n                params.title = layerConf.title;\n                params.description = layerConf.description;\n\n                if (service === \"WMS\") {\n                    params.metadata = layerConf.metadata;\n                }\n\n                // Informations  non disponibles avec les getCap\n                // params.metadata = layerConf.getMetadata();\n                // params.originators = layerConf.getOriginators();\n                // params.quicklookUrl = layerConf.getQuicklookUrl();\n\n                // WMTS : get the tileMatrixSetLimits\n                if (layerConf.wmtsOptions) {\n                    params.tileMatrixSetLimits = layerConf.wmtsOptions.tileMatrixSetLimits;\n                    var TMSLink = layerConf.wmtsOptions.tileMatrixSetLink;\n                    if (TMSLink) {\n                        params.TMSLink = TMSLink;\n                        var tmsConf = this.getTMSConf(TMSLink);\n                        // Get matrix origin : Gp.Point = Object{x:Float, y:Float}\n                        // params.matrixOrigin = tmsConf.getTopLeftCorner();\n                        params.matrixIds = Object.keys(tmsConf.tileMatrices);\n                        params.tileMatrices = tmsConf.tileMatrices;\n                        // by default, pseudo mercator resolutions\n                        params.nativeResolutions = tmsConf.nativeResolutions || this.getTMSConf(\"PM\").nativeResolutions;\n                    }\n                }\n            }\n        }\n        return params;\n    },\n\n    /**\n     * Get the contract key(s) associated to a given layer.\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @return {Array} layerKey - array of key(s) associated to the given layer\n     */\n    getLayerKey : function (layerId) {\n        var layerKey = [];\n        if (this.generalOptions && this.generalOptions.apiKeys && Object.keys(this.generalOptions.apiKeys).length !== 0) {\n            var resourcesByKey = this.generalOptions.apiKeys;\n            for (var key in resourcesByKey) {\n                var resourcesArray = resourcesByKey[key];\n                resourcesArray.forEach(function (arrayLayerId) {\n                    if (arrayLayerId === layerId) {\n                        layerKey.push(key);\n                    }\n                });\n            }\n        }\n        return layerKey;\n    },\n\n    /**\n     * Returns an associative array of Tile Matrix Sets configurations.\n     *\n     * @return {Object} tileMatrixSets - Object which properties are TMS identifiers\n     *\n     */\n    getTileMatrixSets : function () {\n        return this.tileMatrixSets;\n    },\n\n    /**\n     * Returns a Tile Matrix Sets configuration, given its identifier.\n     *\n     * @param {String} tmsID - Tile Matrix Set identifier (e.g. : \"PM\")\n     * @return {Object} tileMatrixSet - Tile Matrix Set configuration\n     * @see Gp.Services.Config.TileMatrixSet\n     */\n    getTMSConf : function (tmsID) {\n        if (!this.tileMatrixSets) {\n            return;\n        }\n        return this.tileMatrixSets[tmsID];\n    },\n\n    /**\n     * Get global constraints for a given Layer : extent, minScale, maxScale, projection\n     *\n     * @param {String} layerId - Geoportal layer identifier (e.g. \"GEOGRAPHICALGRIDSYSTEMS.MAPS$GEOPORTAIL:OGC:WMTS\")\n     * @returns {Object} params - layer constraints\n     * @returns {String} params.projection - default layer projection\n     * @returns {Number} params.minScale   - layer min scale denominator\n     * @returns {Number} params.maxScale   - layer max scale denominator\n     * @returns {Gp.BBox} params.extent    - layer extent expressed in the layer projection\n     */\n    getGlobalConstraints : function (layerId) {\n        var params = {};\n\n        if (layerId) {\n            // get layer configuration object\n            var layerConf = this.getLayerConf(layerId);\n            params.projection = layerConf.defaultProjection;\n            params.minScale = layerConf.globalConstraint.minScaleDenominator;\n            params.maxScale = layerConf.globalConstraint.maxScaleDenominator;\n            params.extent = layerConf.globalConstraint.bbox;\n        }\n\n        return params;\n    }\n\n};\n\nexport default ConfigInterface;\n","// cette classe contient les URLs par defaut des services.\n//  DefaultUrlService.Alti.url(key)[elevation-json]\n//  DefaultUrlService.Alti.url(key)[elevation-xml]\n//  DefaultUrlService.Alti.url(key)[profil-json]\n//  DefaultUrlService.Alti.url(key)[profil-xml]\n//  DefaultUrlService.ProcessIsoCurve.url(key)\n//  DefaultUrlService.AutoComplete.url(key)\n//  DefaultUrlService.ReverseGeocode.url(key)\n//  DefaultUrlService.Geocode.url(key)\n//  DefaultUrlService.Route.url(key)\n\n// Example :\n//\n// DefaultUrlService.Alti.url('alti')[elevation-json]\n//  output {String} -> http://wxs.ign.fr/calcul/alti/rest/elevation.json\n//\n// DefaultUrlService.Alti.url('calcul')\n// output {Object|String}\n// -> http://wxs.ign.fr/calcul/alti/rest/elevation.json\n// -> http://wxs.ign.fr/calcul/alti/rest/elevation.xml\n// -> http://wxs.ign.fr/calcul/alti/rest/elevationLine.json\n// -> http://wxs.ign.fr/calcul/alti/rest/elevationLine.xml\n//\n// ssl by default.\n//\n// Force to not do ssl :\n// DefaultUrlService.ssl = false;\n//\n// DefaultUrlService.AutoComplete.url('calcul')\n// output {Object|String}\n// -> https://wxs.ign.fr/calcul/ols/apis/completion\n\n/**\n * Default Geoportal web services URLs access.\n *\n * @namespace\n * @alias Gp.Services.DefaultUrl\n */\nvar DefaultUrlService = {\n\n    /** if set true, require the use of https protocol */\n    ssl : true,\n\n    /**\n    * base new-url of geoplateforme services (ssl protocol management)\n    * @param {String} path - path\n    * @returns {String} url\n    */\n    newUrl : function (path) {\n        var NEW_GPF_HOSTNAME = \"data.geopf.fr\";\n\n        // comportement par défaut => https\n        // sinon, il est fixé par l'option 'ssl' (false => http)\n        var _protocol;\n        if (DefaultUrlService.ssl === false) {\n            _protocol = \"http://\";\n        } else {\n            _protocol = \"https://\";\n        }\n\n        return _protocol + NEW_GPF_HOSTNAME + path;\n    },\n\n    /**\n     * Elevation web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns elevation service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"elevation-json\", \"elevation-xml\", \"profil-json\" or \"profil-xml\").\n     */\n    Alti : {\n        new_key : {\n            // rest\n            \"elevation-json\" : \"/altimetrie/1.0/calcul/alti/rest/elevation.json\",\n            \"elevation-xml\" : \"/altimetrie/1.0/calcul/alti/rest/elevation.xml\",\n            \"profil-json\" : \"/altimetrie/1.0/calcul/alti/rest/elevationLine.json\",\n            \"profil-xml\" : \"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml\"\n        },\n\n        /**\n        * newurl from geoplateforme service\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return {\n                // rest\n                \"elevation-json\" : DefaultUrlService.newUrl(this.new_key[\"elevation-json\"]),\n                \"elevation-xml\" : DefaultUrlService.newUrl(this.new_key[\"elevation-xml\"]),\n                \"profil-json\" : DefaultUrlService.newUrl(this.new_key[\"profil-json\"]),\n                \"profil-xml\" : DefaultUrlService.newUrl(this.new_key[\"profil-xml\"])\n            };\n        }\n    },\n    /**\n     * IsoCurve web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns isocurve service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols (\"iso-json\" or \"iso-xml\").\n     */\n    ProcessIsoCurve : {\n\n        new_key : \"/navigation/isochrone\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Config web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns config service default urls with or without geoportal access key given as a parameter.\n     */\n    Config : {\n        _key : \"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/\",\n        /**\n        * url\n        * @param {String} key - key\n        * @returns {String} url\n        */\n        url : function (key) {\n            // key must be an array of one or several keys\n            if (!Array.isArray(key)) {\n                key = key.split(\",\");\n            }\n            // not homogeneous with others geoportal services URLs\n            var url = [];\n            for (var i = 0; i < key.length; i++) {\n                url[i] = this._key + key[i] + \"Config.json\";\n            }\n            return url;\n        }\n    },\n    /**\n     * Autocompletion web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns autocomplete service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    AutoComplete : {\n        new_key : \"/geocodage/completion\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Reverse geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns reverse geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    ReverseGeocode : {\n        new_key : \"/geocodage/reverse\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Geocoding web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns geocoding service default urls with or without geoportal access key given as a parameter. The result is a String.\n     */\n    Geocode : {\n        new_key : \"/geocodage/search\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    },\n    /**\n     * Routing web service access\n     *\n     * @member {Object}\n     * @property {Function} url (key) - Returns routing service default urls with or without geoportal access key given as a parameter. The result is a javascript object with different urls given used protocols.\n     */\n    Route : {\n        new_key : \"/navigation/itineraire\",\n\n        /**\n        * url from geoplateforme service\n        * @returns {String} url\n        */\n        newUrl : function () {\n            return DefaultUrlService.newUrl(this.new_key);\n        }\n    }\n};\n\nexport default DefaultUrlService;\n","// import Logger from \"../../../Utils/LoggerByDefault\";\nimport MR from \"../../../Utils/MessagesResources\";\nimport ErrSrv from \"../../../Exceptions/ErrorService\";\nimport GeocodeResponse from \"../Response/model/GeocodeResponse\";\nimport GeocodedLocation from \"../Response/model/GeocodedLocation\";\n\n/**\n * Fonction retournant un objet contenant des clés de lecture (readers)\n *      qui permettent de parser des réponses XML du service de géocodage direct du Géoportail\n *      afin de récupérer les résultats retournés.\n * @module GeocodeResponseParser\n * @alias Gp.Services.Geocode.Formats.GeocodeResponseParser\n * @private\n */\n\n/**\n * @classdesc\n *\n * Classe permettant de parser une réponse GeoJSON\n *\n * @constructor\n * @alias Gp.Formats.GeocodeResponseParser\n *\n * @private\n */\nfunction GeocodeResponseParser () {\n    if (!(this instanceof GeocodeResponseParser)) {\n        throw new TypeError(\"GeocodeResponseParser constructor cannot be called as a function.\");\n    }\n}\n\nGeocodeResponseParser.prototype = {\n\n    /**\n     * @lends module:GeocodeResponseParser\n     */\n\n    /*\n     * Constructeur (alias)\n     */\n    constructor : GeocodeResponseParser,\n\n    /**\n     * Méthode permettant de lancer la lecture d'une réponse GeoJSON,\n     *\n     * @param {String} json - réponse au format GeoJSON\n     * @return {Object} geocodeResponse|exceptionReport : l'objet contenant les informations de la réponse GeoJSON,\n     *      sous la forme d'un objet GeocodeResponse, ou un objet littéral exceptionReport si le service a renvoyé une exception.\n     */\n    parse : function (json) {\n        var geocodeResponse = new GeocodeResponse();\n\n        const obj = JSON.parse(json);\n\n        if (obj.type === \"FeatureCollection\") {\n            for (var i = 0; i < obj.features.length; ++i) {\n                _parseFeature(obj.features[i], geocodeResponse);\n            }\n        } else if (obj.type === \"Feature\") {\n            _parseFeature(obj, geocodeResponse);\n        } else if (obj.type === \"SERVICE_ERROR\") {\n            return _parseError(obj);\n        } else {\n            var mess = MR.getMessage(\"SERVICE_RESPONSE_ANALYSE\", obj.type);\n            throw new ErrSrv({\n                message : mess,\n                type : ErrSrv.TYPE_UNKERR,\n                status : 200\n            });\n        }\n\n        return geocodeResponse;\n    }\n};\n\n/**\n * Méthode permettant de parser un feature\n *\n * @private\n *\n * @param {Object} feature\n * @param {Object} geocodeResponse\n *\n * @memberof GeocodeResponseParser\n * @return {Object} objet GeocodedLocation\n */\nfunction _parseFeature (feature, geocodeResponse) {\n    var location = new GeocodedLocation();\n    if (feature.geometry && feature.geometry.type === \"Point\") {\n        location.position = {\n            lon : feature.geometry.coordinates[0],\n            lat : feature.geometry.coordinates[1]\n        };\n    }\n    if (feature.properties) {\n        for (var prop in feature.properties) {\n            if (prop === \"score\") {\n                location.accuracy = feature.properties[prop];\n            } else if (prop === \"_type\") {\n                if (feature.properties[prop] === \"address\") {\n                    location.type = \"StreetAddress\";\n                } else if (feature.properties[prop] === \"poi\") {\n                    location.type = \"PositionOfInterest\";\n                } else if (feature.properties[prop] === \"parcel\" || feature.properties[prop] === \"cadastral\") {\n                    location.type = \"CadastralParcel\";\n                }\n            } else {\n                location.placeAttributes[prop] = feature.properties[prop];\n            }\n        }\n        if (feature.properties._type === \"address\") {\n            location.matchType = feature.properties.number !== undefined && feature.properties.number !== null ? \"street number\" : \"street\";\n        }\n    }\n    geocodeResponse.locations.push(location);\n}\n\n/**\n * Méthode permettant de parser une erreur\n *\n * @private\n *\n * @param {Object} error\n *\n * @memberof GeocodeResponseParser\n * @return {Object}\n */\nfunction _parseError (error) {\n    return {\n        exceptionReport : error\n    };\n}\n\nexport default GeocodeResponseParser;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport GeocodeRequestFactory from \"./Request/GeocodeRequestFactory\";\nimport GeocodeResponseFactory from \"./Response/GeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de géocodage direct du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n *\n *\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.Geocode\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String|Object} options.query - Nom de l'adresse, du toponyme, de l'unité administrative ou de la parcelle cadastrale recherchée.\n *\n * @param {Object} [options.filters] - Les propriétés possibles de cet objet sont décrites ci-après.\n * @param {String} [options.filters.[prop]] - Critère supplémentaire pour filtrer la recherche sous la forme\n *      d'un couple clé/valeur à définir selon les possibilités du serveur ajouté à la requête.\n *      Le service de géocodage du Géoportail permet de filtrer les adresses postales avec les propriétés :\n *          \"postalCode\", \"inseeCode\", \"city\".\n *      Il permet également de filtrer les toponymes avec les propriétés :\n *          \"postalCode\", \"inseeCode\", \"type\".\n *      Enfin, il permet de filtrer les parcelles cadastrales avec les propriétés :\n *          \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n *\n * @param {String} [options.index = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service de géocodage du Géoportail permet de rechercher des 'PositionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales ou des 'CadastralParcel' pour des parcelles cadastrales.\n *      L'index 'location' regroupe les indexes 'StreetAddress' et 'PositionOfInterest'.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, index = 'StreetAddress'.\n *\n * @param {Object} options.position - Position du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs.\n *      @param {Float} options.position.lon - Longitude du point de référence pour le calcul de proximité.\n *      @param {Float} options.position.lat - Latitude du point de référence pour le calcul de proximité.\n *\n * @param {Number} [options.maximumResponses] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut.\n *      Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 20.\n *\n * @param {Boolean} [options.returnTrueGeometry = false] - Booléen indiquant si l'on souhaite récupérer la géométrie vraie des objects géolocalisés.\n *      false par défaut.\n *\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      proxyURL : null,\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      position : {lon:, lat:},\n *      index : 'StreetAddress',\n *      query : '10 rue du pont Machin-ville'\n *      (...)\n *   };\n */\nfunction Geocode (options_) {\n    if (!(this instanceof Geocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Geocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"Geocode\";\n\n    this.logger = Logger.getLogger(\"Gp.Services.Geocode\");\n    this.logger.trace(\"[Constructeur Geocode (options)]\");\n\n    var options = this.patchOptionConvertor(options_);\n    if (!options.serverUrl) {\n        options.serverUrl = DefaultUrlService.Geocode.newUrl();\n    }\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, [options]);\n\n    if (!options.hasOwnProperty(\"query\")) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"query\"));\n    }\n\n    // ajout des options spécifiques au service\n    this.options.query = options.query;\n\n    // on definit l'index par defaut\n    if (!options.index) {\n        this.options.index = options.index = \"StreetAddress\";\n    }\n\n    if (options.filters) {\n        var filter = Object.keys(options.filters);\n        for (var i = 0; i < filter.length; i++) {\n            var key = filter[i];\n            // on supprime les filtres vides\n            if (typeof options.filters[key] === \"undefined\" ||\n                (typeof options.filters[key] === \"object\" && Object.keys(options.filters[key]).length === 0) ||\n                (typeof options.filters[key] === \"string\" && options.filters[key].length === 0) ||\n                (Array.isArray(options.filters[key]) && options.filters[key].length === 0)\n            ) {\n                delete this.options.filters[key];\n            }\n        }\n    }\n\n    this.options.index = options.index || \"StreetAddress\";\n    this.options.maximumResponses = options.maximumResponses || 20;\n}\n\n/**\n * @lends module:Geocode#\n */\nGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nGeocode.prototype.constructor = Geocode;\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} options_ - options du service\n * @return {Object} - options\n */\nGeocode.prototype.patchOptionConvertor = function (options_) {\n    const options = options_;\n\n    if (options.hasOwnProperty(\"location\")) {\n        this.logger.warn(\"The parameter 'location' is deprecated\");\n\n        if (!options.query) {\n            options.query = options.location;\n        }\n        delete options.location;\n    }\n\n    if (options.filterOptions) {\n        this.logger.warn(\"The parameter 'filterOptions' is deprecated\");\n\n        if (!options.filters) {\n            options.filters = options.filterOptions;\n\n            if (options.filters.type) {\n                this.logger.warn(\"The parameter 'filterOptions.type' is deprecated\");\n                if (!options.index) {\n                    if (Array.isArray(options.filters.type) && options.filters.type.length > 0) {\n                        options.index = options.filters.type[0];\n                    } else {\n                        options.index = options.filters.type;\n                    }\n                }\n                delete options.filters.type;\n            }\n\n            if (options.filters.bbox) {\n                this.logger.warn(\"The parameter 'filterOptions.bbox' is deprecated\");\n                delete options.filters.bbox;\n            }\n        }\n        delete options.filterOptions;\n    }\n\n    if (options.position) {\n        if (options.position.x) {\n            this.logger.warn(\"The parameter 'position.x' is deprecated\");\n\n            if (!options.position.lon) {\n                options.position.lon = options.position.x;\n            }\n            delete options.position.x;\n        }\n\n        if (options.position.y) {\n            this.logger.warn(\"The parameter 'position.y' is deprecated\");\n\n            if (!options.position.lat) {\n                options.position.lat = options.position.y;\n            }\n            delete options.position.y;\n        }\n    }\n\n    if (options.returnFreeForm) {\n        this.logger.warn(\"The parameter 'returnFreeForm' is deprecated\");\n        delete options.returnFreeForm;\n    }\n\n    if (options.srs) {\n        this.logger.warn(\"The parameter 'srs' is deprecated\");\n        delete options.srs;\n    }\n\n    return options;\n};\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        geocodeMethod : \"search\",\n        query : this.options.query,\n        index : this.options.index,\n        returnTrueGeometry : this.options.returnTrueGeometry,\n        position : this.options.position,\n        maxResp : this.options.maximumResponses,\n        filters : this.options.filters\n    };\n\n    this.request = GeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * Analyse de la reponse (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nGeocode.prototype.analyzeResponse = function (error, success) {\n    /* INFO :\n         Etape 1 : Création de la requête (URL)\n            -> stockage de la requête dans this.request\n         Etape 2 : Envoi de la requête\n            -> appel du protocol XHR, et envoi (par ex send ())\n            -> récupération de la réponse JSON dans la fonction onSuccess () (this.response)\n            -> si code HTTP 200 et pas de message d'erreur : etape 3\n            -> si code HTTP != 200 : lancement de la fonction de callback onFailure avec le message d'erreur\n         Etape 3 : Analyse de la réponse JSON (si rawResponse === false )\n            -> appel du parser pour récupérer le document\n         Etape 4 : Lancement de la fonction de callback onSuccess avec la réponse :\n            -> JSON (si rawResponse === true)\n            -> ou geocodedLocations\n    */\n\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        GeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Geocode;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport GeocodeRequestREST from \"./GeocodeRequestREST\";\n\n/**\n * Creation d'une requête\n * (Factory)\n *\n * @module GeocodeRequestFactory\n * @alias Gp.Services.Geocode.Request.GeocodeRequestFactory\n * @private\n */\nvar GeocodeRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      // options specifiques du service\n     *      geocodeMethod:\n     *      query:\n     *      filters:\n     *      maximumResponses:\n     *   };\n     *   var result = GeocodeRequestFactory.build(options);\n     *   if (!result) {\n     *       // error...\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"GeocodeRequestFactory\");\n        logger.trace([\"GeocodeRequestFactory::build()\"]);\n\n        var settings = options || {};\n\n        var myReq = new GeocodeRequestREST(settings);\n        if (!myReq.processRequestString()) {\n            throw new Error(\"Error process request (rest) !\");\n        }\n        var request = myReq.requestString;\n\n        logger.trace(request);\n\n        return request;\n    }\n};\n\nexport default GeocodeRequestFactory;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport GeocodeParamREST from \"./model/GeocodeParamREST\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service de calcul d'itineraire\n * (uniquement en GET)\n *\n * @constructor\n * @alias Gp.Services.Geocode.Request.GeocodeRequestREST\n * @param {Object} options - options definies dans le composant Route\n *\n * @example\n * var options = {\n *      (...)\n * };\n *\n * @private\n */\nfunction GeocodeRequestREST (options) {\n    this.logger = Logger.getLogger(\"GeocodeRequestREST\");\n    this.logger.trace(\"[Constructeur GeocodeRequestREST ()]\");\n\n    if (!(this instanceof GeocodeRequestREST)) {\n        throw new TypeError(\"GeocodeRequestREST constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /** liste des options */\n    this.settings = options;\n}\n\nGeocodeRequestREST.prototype = {\n\n    /**\n     * @lends module:GeocodeRequestREST#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeRequestREST,\n\n    /**\n     * Construction de la requête.\n     *\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        var request = \"\";\n\n        // Mapping des options avec le service de l'API REST\n        const oParams = new GeocodeParamREST(this.settings);\n\n        const params = oParams.getParams();\n        for (var i = 0; i < params.length; i++) {\n            var o = params[i];\n            if (request) {\n                request += \"&\";\n            }\n            request += o.k + \"=\" + o.v;\n        }\n\n        if (!this.settings.geocodeMethod || (this.settings.geocodeMethod !== \"search\" && this.settings.geocodeMethod !== \"reverse\")) {\n            throw new Error(\"Error geocodeMethod not valid\");\n        }\n\n        this.requestString = \"?\" + request;\n        this.logger.trace(this.requestString);\n\n        return this.requestString;\n    }\n};\n\nexport default GeocodeRequestREST;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service de calcul d'itineraire (REST).\n *      Permet le mapping avec les options du service.\n * @constructor\n * @alias Gp.Services.Route.Request.RouteParamREST\n * @param {Object} options - options\n *\n * @private\n */\nfunction GeocodeParamREST (options) {\n    if (!(this instanceof GeocodeParamREST)) {\n        throw new TypeError(\"GeocodeParamREST constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur GeocodeParamREST ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // methode de geocodage\n    if (!this.options.geocodeMethod || (this.options.geocodeMethod !== \"search\" && this.options.geocodeMethod !== \"reverse\")) {\n        throw new Error(\"Error geocodeMethod not valid\");\n    }\n    this.geocodeMethod = this.options.geocodeMethod;\n\n    // mapping des options avec l'API REST\n    this.query = (typeof this.options !== \"undefined\") ? this.options.query : null;\n\n    this.searchGeometry = this.options.searchGeometry || null;\n\n    this.index = this.options.index || null;\n\n    this.lon = this.options.position && this.options.position.lon ? this.options.position.lon : null;\n\n    this.lat = this.options.position && this.options.position.lat ? this.options.position.lat : null;\n\n    this.maxResp = this.options.maxResp || null;\n\n    this.returnTrueGeometry = this.options.returnTrueGeometry || null;\n\n    this.filters = this.options.filters || {};\n}\n\n/**\n * CLASSNAME\n */\nGeocodeParamREST.CLASSNAME = \"GeocodeParamREST\";\n\nGeocodeParamREST.prototype = {\n\n    /**\n     * @lends module:GeocodeParamREST#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : GeocodeParamREST,\n\n    /**\n     * Retourne les filtres\n     * @returns {String} les filtres\n     */\n    getFilters : function () {\n        var filters = {};\n        for (var prop in this.filters) {\n            if (this.filters.hasOwnProperty(prop)) {\n                filters[prop] = this.filters[prop];\n            }\n        }\n        return filters;\n    },\n\n    /**\n     * Retourne l'index\n     * @returns {String} l'index\n     */\n    getIndex : function () {\n        if (this.index === undefined) {\n            return null;\n        }\n        if (this.index === \"StreetAddress\") {\n            return \"address\";\n        } else if (this.index === \"CadastralParcel\") {\n            return \"parcel\";\n        } else if (this.index === \"PositionOfInterest\") {\n            return \"poi\";\n        } else if (this.index === \"location\") {\n            return \"location\";\n        }\n        return this.index;\n    },\n\n    /**\n     * Retourne la géométrie de recherche\n     * @returns {String} la géométrie de recherche au format json\n     */\n    getSearchGeometry : function () {\n        return JSON.stringify(this.searchGeometry);\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array} liste de paramêtres\n */\nGeocodeParamREST.prototype.getParams = function () {\n    var map = [];\n\n    if (this.geocodeMethod === \"search\") {\n        map.push({\n            k : \"q\",\n            v : this.query\n        });\n    }\n\n    if (this.index) {\n        map.push({\n            k : \"index\",\n            v : this.getIndex()\n        });\n    }\n\n    if (this.geocodeMethod === \"reverse\" && this.searchGeometry) {\n        map.push({\n            k : \"searchgeom\",\n            v : this.getSearchGeometry()\n        });\n    }\n\n    if (this.lon && this.lat) {\n        map.push({\n            k : \"lon\",\n            v : this.lon\n        });\n        map.push({\n            k : \"lat\",\n            v : this.lat\n        });\n    }\n\n    if (this.maxResp) {\n        map.push({\n            k : \"limit\",\n            v : this.maxResp\n        });\n    }\n\n    if (this.returnTrueGeometry) {\n        map.push({\n            k : \"returntruegeometry\",\n            v : this.returnTrueGeometry\n        });\n    }\n\n    const filters = this.getFilters();\n    for (var key in filters) {\n        map.push({\n            k : key,\n            v : filters[key]\n        });\n    }\n\n    return map;\n};\n\nexport default GeocodeParamREST;\n","/**\n * Factory pour générer une reponse JSON à partir d'un XML\n * (Factory)\n *\n * @module GeocodeResponseFactory\n * @alias Gp.Services.Geocode.Response.GeocodeResponseFactory\n * @private\n */\n// import Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport GeocodeResponseParser from \"../Formats/GeocodeResponseParser\";\n\nvar GeocodeReponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Geocode\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // data de type GeocodeResponse\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                data = options.response;\n            } else {\n                try {\n                    const parser = new GeocodeResponseParser();\n                    data = parser.parse(options.response);\n\n                    if (!data) {\n                        throw new Error(\"L'analyse de la réponse du service !?\");\n                    }\n                } catch (e) {\n                    var message = e.message;\n                    if (typeof options.response === \"string\") {\n                        message += \"('\" + options.response + \"')\";\n                    } else {\n                        message += \"('\" + options.response.documentElement.innerHTML + \"')\";\n                    }\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", message),\n                        type : ErrorService.TYPE_UNKERR,\n                        status : -1\n                    }));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200 // FIXME : 200 ?\n                    }));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService({\n                message : MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\"),\n                type : ErrorService.TYPE_SRVERR,\n                status : -1 // FIXME : status response\n            }));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default GeocodeReponseFactory;\n","\n/**\n * Response object for {@link module:Services~geocode Gp.Services.geocode ()} or {@link module:Services~reverseGeocode Gp.Services.reverseGeocode ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Array.<Gp.Services.Geocode.GeocodedLocation>} locations - locations array.\n *\n * @namespace\n * @alias Gp.Services.GeocodeResponse\n */\nfunction GeocodeResponse () {\n    if (!(this instanceof GeocodeResponse)) {\n        throw new TypeError(\"GeocodeResponse constructor cannot be called as a function.\");\n    }\n\n    this.locations = [];\n}\n\nGeocodeResponse.prototype = {\n\n    constructor : GeocodeResponse\n\n};\n\nexport default GeocodeResponse;\n","\n/**\n * Single location object returned by the underlying geocoding web service.\n *\n * @property {Gp.Point} position - Position of the location given in the requested coordinates system.\n * @property {String} type - location type \"StreetAddress\" (for an address), \"PositionOfInterest\" (for a place name) or \"CadastralParcel\" (for cadastral parcel).\n * @property {String} matchType - how geocoding is performed : \"street number\" (exact address), \"street enhanced\" (street number calculated by interpolation), \"street\" (only the street), \"city\" (only the city).\n * @property {Float} accuracy - Accuracy of the response towards the requested location between 0 (unaccurate) and 1 (exact match).\n * @property {Object} placeAttributes - Associative array matching the following attributes with their values given by the underlying web service :\n *\n * *Common attributes : *\n *\n * - **trueGeometry** - the 'real life' geometry if different from 'Point' type.\n *\n * *if type === \"StreetAddress\" :*\n *\n * - **number** - Street number.\n * - **postalCode** - PostCode\n * - **street** - Street name\n * - **city** - City\n * - **houseNumberInfos** - additional street number information\n * - **inseeCode** - INSEE Code\n *\n *\n * *if type === \"PositionOfInterest\" :*\n *\n * - **type** - Place name type\n * - **postalCode** - PostCode\n * - **toponyme** - Toponyme\n * - **extraFields** - additional place name properties\n * - **inseeCode** - INSEE Code\n *\n *\n * *si type = \"CadastralParcel\" :*\n *\n * - **codeCommuneAbs** - when a parcel comes from a city that was absorbed by another, code of that old city. \"000\" otherwise.\n * - **codeArrondissement** - arrondissement\n * - **identifiant** - cadastral parcel code\n * - **feuille** - Parcel Sheet (eg. \"1\").\n * - **numero** - Parcel Number (eg. \"0041\")\n * - **section** - Parcel Section (eg. \"0D\").\n * - **nomCommune** - Parcel municipality name.\n * - **codeCommune** - Parcel municipality.\n * - **codeDepartement** - Parcel Department.\n *\n * @namespace\n * @alias Gp.Services.Geocode.GeocodedLocation\n */\nfunction GeocodedLocation () {\n    if (!(this instanceof GeocodedLocation)) {\n        throw new TypeError(\"GeocodedLocation constructor cannot be called as a function.\");\n    }\n\n    this.position = null;\n\n    this.matchType = null;\n\n    this.placeAttributes = {};\n\n    this.type = null;\n\n    this.accuracy = null;\n\n    /**\n     * Nom de la classe : \"GeocodedLocation\"\n     * @type {String}\n     */\n    this.CLASSNAME = \"GeocodedLocation\";\n}\n\nGeocodedLocation.prototype = {\n\n    constructor : GeocodedLocation\n\n};\n\nexport default GeocodedLocation;\n","import Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport GeocodeRequestFactory from \"./Request/GeocodeRequestFactory\";\nimport GeocodeResponseFactory from \"./Response/GeocodeResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service de géocodage inverse du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ReverseGeocode\n *\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {Object} options.position - Position du point de référence pour le calcul de proximité exprimée dans le système de référence spécifié par le srs.\n *      @param {Float} options.position.lon - Longitude du point de référence pour le calcul de proximité.\n *      @param {Float} options.position.lat - Latitude du point de référence pour le calcul de proximité.\n *\n * @param {Object} [options.filters] - Les propriétés possibles de cet objet.\n * @param {String} [options.filters.[proprietes du filtre]] - Critère supplémentaire pour filtrer la recherche sous la forme\n *      d'un couple clé/valeur à définir selon les possibilités du serveur ajouté à la requête.\n *      Le service de géocodage du Géoportail permet de filtrer les adresses postales avec les propriétés :\n *          \"postalCode\", \"inseeCode\", \"city\".\n *      Il permet également de filtrer les toponymes avec les propriétés :\n *          \"postalCode\", \"inseeCode\", \"type\".\n *      Enfin, il permet de filtrer les parcelles cadastrales avec les propriétés :\n *          \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n *\n * @param {Object} [options.searchGeometry] - Emprise dans laquelle on souhaite effectuer la recherche.\n *      Les propriétés possibles de cet objet sont décrites ci-après.\n *      @param {String} options.searchGeometry.type   - Type de géometrie (Point|Circle|Linestring|Polygon)\n *      @param {Array.<Float>|Array.Array.<Float>} options.searchGeometry.coordinates - Coordonnées des points constituant la géométrie.\n *      @param {Float} options.searchGeometry.radius    - Rayon. Paramètre applicable uniquement pour le type 'Circle'.\n *\n * @param {String} [options.index = \"StreetAddress\"] - Type de l'objet recherché.\n *      Le service de géocodage du Géoportail permet de rechercher des 'PositionOfInterest' pour des toponymes, des 'StreetAddress'\n *      pour des adresses postales ou des 'CadastralParcel' pour des parcelles cadastrales. L'index 'location' permet une recherche\n *      multi-indexes en regroupant les indexes 'PositionOfInterest' et 'StreetAddress'.\n *      D'autres types pourront être rajoutés selon l'évolution du service.\n *      Par défaut, index = 'StreetAddress'.\n *\n * @param {Number} [options.maximumResponses] - Nombre de réponses maximal que l'on souhaite recevoir.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 20s.\n *\n * @param {Boolean} [options.returnTrueGeometry] - Booléen indiquant si l'on souhaite récupérer la géométrie vraie des objects géolocalisés.\n *      false par défaut.\n *\n * @example\n *   var options = {\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      proxyURL : null,\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      index : 'StreetAddress',\n *      searchGeometry : {\n *          type : Circle,\n *          coordinates : [48, 2],\n *          radius : 100\n *      },\n *      position : {lon:2 , lat:48.5},\n *      maximumResponses : 25,\n *   };\n *\n */\nfunction ReverseGeocode (options_) {\n    if (!(this instanceof ReverseGeocode)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ReverseGeocode\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ReverseGeocode\";\n\n    this.logger = Logger.getLogger(\"Gp.Services.ReverseGeocode\");\n    this.logger.trace(\"[Constructeur ReverseGeocode (options)]\");\n\n    var options = this.patchOptionConvertor(options_);\n    if (!options.serverUrl) {\n        options.serverUrl = DefaultUrlService.ReverseGeocode.newUrl();\n    }\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, [options]);\n\n    if (!options.searchGeometry) {\n        if (!options.position) {\n            throw new Error(_.getMessage(\"PARAM_MISSING\", \"searchGeometry\"));\n        }\n    } else {\n        this.options.searchGeometry = options.searchGeometry;\n    }\n\n    // on definit l'index par defaut\n    if (!options.index) {\n        this.options.index = options.index = \"StreetAddress\";\n    }\n\n    if (options.filters) {\n        var filter = Object.keys(options.filters);\n        for (var i = 0; i < filter.length; i++) {\n            var key = filter[i];\n            // on supprime les filtres vides\n            if (typeof options.filters[key] === \"undefined\" ||\n                (typeof options.filters[key] === \"object\" && Object.keys(options.filters[key]).length === 0) ||\n                (typeof options.filters[key] === \"string\" && options.filters[key].length === 0) ||\n                (Array.isArray(options.filters[key]) && options.filters[key].length === 0)\n            ) {\n                delete this.options.filters[key];\n            }\n        }\n    }\n\n    this.options.position = options.position;\n    this.options.index = options.index || \"StreetAddress\";\n    this.options.maximumResponses = options.maximumResponses || 20;\n}\n\n/**\n * @lends module:ReverseGeocode#\n */\nReverseGeocode.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nReverseGeocode.prototype.constructor = ReverseGeocode;\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} options_ - options du service\n * @return {Object} - options\n */\nReverseGeocode.prototype.patchOptionConvertor = function (options_) {\n    var options = options_;\n\n    if (options.filterOptions) {\n        this.logger.warn(\"The parameter 'filterOptions' is deprecated\");\n\n        if (options.filterOptions.type) {\n            this.logger.warn(\"The parameter 'filterOptions.type' is deprecated\");\n            if (!options.index) {\n                if (Array.isArray(options.filterOptions.type) && options.filterOptions.type.length > 0) {\n                    options.index = options.filterOptions.type[0];\n                } else {\n                    options.index = options.filterOptions.type;\n                }\n            }\n            delete options.filterOptions.type;\n        }\n\n        if (options.filterOptions.bbox) {\n            this.logger.warn(\"The parameter 'filterOptions.bbox' is deprecated\");\n            if (!options.searchGeometry) {\n                // convertir la geometrie\n                options.searchGeometry = this.bbox2Json(options.filterOptions.bbox);\n            }\n            delete options.filterOptions.bbox;\n        }\n\n        if (options.filterOptions.circle) {\n            this.logger.warn(\"The parameter 'filterOptions.circle' is deprecated\");\n            if (!options.searchGeometry) {\n                // convertir la geometrie\n                options.searchGeometry = this.circle2Json(options.filterOptions.circle);\n            }\n            delete options.filterOptions.circle;\n        }\n\n        if (options.filterOptions.polygon) {\n            this.logger.warn(\"The parameter 'filterOptions.polygon' is deprecated\");\n            if (!options.searchGeometry) {\n                // convertir la geometrie\n                options.searchGeometry = this.polygon2Json(options.filterOptions.polygon);\n            }\n            delete options.filterOptions.polygon;\n        }\n\n        if (!options.filters && Object.keys(options.filterOptions).length > 0) {\n            options.filters = options.filterOptions;\n        }\n\n        delete options.filterOptions;\n    }\n\n    if (options.position) {\n        if (options.position.x) {\n            this.logger.warn(\"The parameter 'position.x' is deprecated\");\n\n            if (!options.position.lon) {\n                options.position.lon = options.position.x;\n            }\n            delete options.position.x;\n        }\n\n        if (options.position.y) {\n            this.logger.warn(\"The parameter 'position.y' is deprecated\");\n\n            if (!options.position.lat) {\n                options.position.lat = options.position.y;\n            }\n            delete options.position.y;\n        }\n    }\n\n    if (options.srs) {\n        this.logger.warn(\"The parameter 'srs' is deprecated\");\n        delete options.srs;\n    }\n\n    return options;\n};\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.buildRequest = function (error, success) {\n    var options = {\n        httpMethod : this.options.httpMethod,\n        // options specifiques du service\n        geocodeMethod : \"reverse\",\n        searchGeometry : this.options.searchGeometry,\n        index : this.options.index,\n        position : this.options.position,\n        returnTrueGeometry : this.options.returnTrueGeometry,\n        maxResp : this.options.maximumResponses,\n        filters : this.options.filters\n    };\n\n    this.request = GeocodeRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    (!this.request)\n        ? error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")))\n        : success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nReverseGeocode.prototype.analyzeResponse = function (error, success) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this\n        };\n\n        GeocodeResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Array} bbox - bbox\n * @return {Object} - geometrie au format json\n */\nReverseGeocode.prototype.bbox2Json = function (bbox) {\n    return {\n        type : \"Polygon\",\n        coordinates : [[\n            [bbox.left, bbox.top],\n            [bbox.right, bbox.top],\n            [bbox.right, bbox.bottom],\n            [bbox.left, bbox.bottom],\n            [bbox.left, bbox.top]\n        ]]\n    };\n};\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Object} circle - circle\n * @return {Object} - geometrie au format json\n */\nReverseGeocode.prototype.circle2Json = function (circle) {\n    return {\n        type : \"Circle\",\n        radius : circle.radius,\n        coordinates : [circle.x, circle.y]\n    };\n};\n\n/**\n * Patch pour la convertion des options vers le nouveau formalisme.\n *\n * @param {Array} polygon - polygon\n * @return {Object} - geometrie au format json\n */\nReverseGeocode.prototype.polygon2Json = function (polygon) {\n    var jsonGeom = {\n        type : \"Polygon\",\n        coordinates : [[]]\n    };\n\n    for (var i = 0; i < polygon.length; ++i) {\n        jsonGeom.coordinates[0].push([polygon[i].x, polygon[i].y]);\n    }\n\n    return jsonGeom;\n};\n\n/**\n * Codes EPSG géographiques (lat/lon). Utiles car les coordonnées doivent être inversées.\n */\nReverseGeocode.geoEPSG = [\"EPSG:4326\"];\n\nexport default ReverseGeocode;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport ProcessIsoCurveRequest from \"./Request/ProcessIsoCurveRequest\";\nimport ProcessIsoCurveResponseFactory from \"./Response/ProcessIsoCurveResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'isochrone/distance du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @alias Gp.Services.ProcessIsoCurve\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.resource - La ressource utilisée pour le calcul : bdtopo-valhalla (par défaut) ou bdtopo-pgr.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service iso : 'json' uniquement et par défaut.\n *\n * @param {Object} options.position - Point de départ du calcul.\n *      Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n *      @param {Float} options.position.x - Abcisse du point de départ du calcul d'isochrone/distance.\n *      @param {Float} options.position.y - Ordonnée du point de départ du calcul d'isochrone/distance.\n *\n * @param {String} options.srs - Projection.\n *      Système de coordonnées dans lequel les coordonnées du point « location » sont exprimées et\n *      dans lequel la géométrie de la courbe résultante sera exprimée.\n *      Par défaut, le système de coordonnées utilisé sera « EPSG:4326 ».\n *\n * @param {String} [options.graph = \"voiture\"] - Nom du graphe à utiliser pour le calcul (« Pieton » ou « Voiture »).\n *      La valeur par défaut est : «voiture»\n *\n * @param {Array.<String>} [options.exclusions] - DEPRECATED: Ce paramètre est conservé pour une rétrocompatibilité de l'api. Le nouveau paramètre à utiliser est options.constraints.\n *      Critères d'exclusions à appliquer pour le calcul.\n *      On précise ici le type de tronçons que l'on ne veut pas que l'isochrone/distance emprunte\n *      (valeurs possibles : « toll » (éviter les péages), « bridge », « tunnel »).\n *\n * @param {Object[]} [options.constraints] - Critères de contraintes à appliquer sur un itinéraire. Les valeurs disponibles dépendent de la ressource utilisée. Il est donc utile de regarder le getCapabilities.\n *      @param {String} [options.constraints.constraintType] - Type de la contrainte. Généralement \"banned\".\n *      @param {String} [options.constraints.key] - Clé de la contrainte. Généralement \"wayType\".\n *      @param {String} [options.constraints.operator] - Opérateur de la contrainte. Généralement \"=\".\n *      @param {String} [options.constraints.value] - Valeur de la contrainte. Généralement \"autoroute\".\n *\n * @param {String} [options.method = \"time\"] - Méthode utilisée pour le calcul de la courbe iso.\n *      Les valeurs possible sont \"time\" pour un calcul d'isochrone, \"distance\" pour un calcul d'isodistance.\n *      Pas de valeur spécifié équivaut à un calcul d'isochrone.\n *\n * @param {String} [options.distanceUnit = \"m\"] - Indique si la distance doit être exprimée en km ou m dans la réponse (\"m\" or \"km\").\n *\n * @param {String} [options.timeUnit = \"second\"] - Indique si la durée doit être exprimée en seconde, minute ou heure dans la réponse (\"standard\", \"second\", \"minute\", \"hour\"). Il peut-être formatté hh:mm::ss avec la valeur standard.\n *\n * @param {Float} options.time - Durée maximum (exprimée en secondes) à utiliser pour le calcul de la courbe à partir du ou jusqu'au point « location ».\n *      Ce paramètre doit être renseigné si l'option \"méthod\" a la valeur \"time\".\n *      Si l'option method n'est pas renseignée, ce paramètre doit être renseigné.\n *\n * @param {Float} options.distance - Distance maximum (exprimée en metres) à utiliser pour le calcul de la courbe à partir du ou j'usqu'au point « location ».\n *      Ce paramètre doit être renseigné si l'option \"méthod\" a la valeur \"DISTANCE\".\n *      Si l'option \"method\" n'est pas renseignée, ce paramètre sera ignoré.\n *\n * @param {Boolean} [options.reverse = false] - Indique si la géométrie résultante doit être lissée (« true ») pour ne pas avoir d'effet d'escalier.\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @param {Boolean} [options.smoothing = false] - Indique si la géométrie résultante doit être lissée (« true ») pour ne pas avoir d'effet d'escalier.\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @param {Boolean} [options.holes = false] - Indique si la géométrie résultante (surface) doit être retournée avec des trous (« true »).\n *      Par défaut, la valeur « false » est appliquée.\n *\n * @example\n *   var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'JSONP', // JSONP|XHR\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      position : {\n *           x : 2.3242664298058053,\n *           y : 48.86118017324745\n *      },\n *      resource : bdtopo-valhalla,\n *      distance : 200,\n *      [time : ]\n *      method : \"distance\",\n *      graph : \"voiture\",\n *      reverse : false\n *  };\n */\n\nfunction ProcessIsoCurve (options) {\n    if (!(this instanceof ProcessIsoCurve)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"ProcessIsoCurve\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     * FIXME instance ou classe ?\n     */\n    this.CLASSNAME = \"ProcessIsoCurve\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.ProcessIsoCurve\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurve (options)]\");\n\n    if (!options.position) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.position.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.x\"));\n    }\n\n    if (options.position.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"position.y\"));\n    }\n\n    if (!options.time && !options.distance) {\n        throw new Error(\"Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance\");\n    }\n\n    // si on a que le paramètre \"distance\" en entrée, on calcule une isodistance.\n    // Le paramètre \"méthode\" doit pour avoir une réponse du service, être passé à \"distance\"\n    if (!options.time && options.distance) {\n        this.options.method = \"distance\";\n        // on supprime l'éventuel attribut time, résidu d'un appel antérieur\n        if (this.options.time) {\n            delete this.options.time;\n        }\n    }\n\n    // si on a que le paramètre \"time\" en entrée, on calcule une isochrone.\n    // Le paramètre \"méthode\" doit pour avoir une réponse du service, être passé à \"time\"\n    if (options.time && !options.distance) {\n        this.options.method = \"time\";\n        // on supprime l'éventuel attribut time, résidu d'un appel antérieur\n        if (this.options.distance) {\n            delete this.options.distance;\n        }\n    }\n\n    // au cas où on a ni l'un, ni l'autre...\n    this.options.method = this.options.method || \"time\";\n\n    // options par defaut du service\n    // TODO: modifier la ressource lors de la mise en production du service\n    this.options.resource = options.resource || \"bdtopo-valhalla\";\n    this.options.exclusions = options.exclusions || [];\n    this.options.reverse = options.reverse || false;\n    this.options.srs = options.srs || \"EPSG:4326\";\n    this.options.distanceUnit = options.distanceUnit || \"m\";\n    this.options.timeUnit = options.timeUnit || \"second\";\n\n    // options depreciees\n    if (options.smoothing) {\n        this.logger.warn(\"options.smoothing is DEPRECATED\");\n    }\n    this.options.smoothing = false;\n    if (options.holes) {\n        this.logger.warn(\"options.holes is DEPRECATED\");\n    }\n    this.options.holes = false;\n\n    // Gestion du graphe\n    if (options.graph) {\n        if (options.graph === \"Voiture\") {\n            this.options.graph = \"car\";\n        }\n        if (options.graph === \"Pieton\") {\n            this.options.graph = \"pedestrian\";\n        }\n    } else {\n        this.options.graph = \"car\";\n    }\n\n    // Gestions des contraintes\n    this.options.constraints = [];\n    if (options.constraints) {\n        if (Array.isArray(options.constraints)) {\n            for (var k = 0; k < options.constraints.length; k++) {\n                this.options.constraints.push(options.constraints[k]);\n            }\n        } else {\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"constraints\"));\n        }\n    }\n\n    // Gestion de l'ancien paramètre exclusions\n    var constraintTunnel = {};\n    var constraintPont = {};\n    var constraintAutoroute = {};\n    if (options.exclusions) {\n        if (options.exclusions.length !== 0) {\n            this.logger.warn(\"options.exclusions is DEPRECATED !!\");\n            for (var c = 0; c < options.exclusions.length; c++) {\n                if (typeof options.exclusions[c] === \"string\") {\n                    options.exclusions[c] = options.exclusions[c].toLowerCase();\n                } else {\n                    // on ne crée pas une erreur pour rétro-compatibilité avec les anciennes versions\n                    continue;\n                }\n                if (options.exclusions[c] === \"toll\") {\n                    constraintAutoroute.constraintType = \"banned\";\n                    constraintAutoroute.key = \"wayType\";\n                    constraintAutoroute.operator = \"=\";\n                    constraintAutoroute.value = \"autoroute\";\n                    this.options.constraints.push(constraintAutoroute);\n                }\n                if (options.exclusions[c] === \"tunnel\") {\n                    constraintTunnel.constraintType = \"banned\";\n                    constraintTunnel.key = \"wayType\";\n                    constraintTunnel.operator = \"=\";\n                    constraintTunnel.value = \"tunnel\";\n                    this.options.constraints.push(constraintTunnel);\n                }\n                if (options.exclusions[c] === \"bridge\") {\n                    constraintPont.constraintType = \"banned\";\n                    constraintPont.key = \"wayType\";\n                    constraintPont.operator = \"=\";\n                    constraintPont.value = \"pont\";\n                    this.options.constraints.push(constraintPont);\n                }\n            }\n        }\n    }\n\n    // on passe l'option outputFormat en minuscules afin d'éviter des exceptions.\n    this.options.outputFormat = (typeof options.outputFormat === \"string\") ? options.outputFormat.toLowerCase() : \"json\";\n    if (options.outputFormat && options.outputFormat !== \"json\") {\n        throw new Error(_.getMessage(\"PARAM_NOT_SUPPORT\", \"outputFormat\"));\n    }\n    this.options.outputFormat = \"json\";\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var urlFound = DefaultUrlService.ProcessIsoCurve.newUrl();\n        if (!urlFound) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = urlFound;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n}\n\n/**\n * @lends module:ProcessIsoCurve#\n */\nProcessIsoCurve.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nProcessIsoCurve.prototype.constructor = ProcessIsoCurve;\n\n/**\n * Création de la requête (overwrite)\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nProcessIsoCurve.prototype.buildRequest = function (error, success) {\n    try {\n        var oIsoCurve = new ProcessIsoCurveRequest(this.options);\n        if (!oIsoCurve.processRequestString()) {\n            throw new Error(_.getMessage(\"SERVICE_REQUEST_BUILD\"));\n        }\n\n        this.request = oIsoCurve.requestString;\n    } catch (e) {\n        error.call(this, new ErrorService(e.message));\n        return;\n    }\n\n    success.call(this, this.request);\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} onError   - callback des erreurs\n * @param {Function} onSuccess - callback de succès de l'analyse de la réponse\n */\nProcessIsoCurve.prototype.analyzeResponse = function (onError, onSuccess) {\n    if (this.response) {\n        var options = {\n            response : this.response,\n            outputFormat : this.options.outputFormat,\n            rawResponse : this.options.rawResponse,\n            onSuccess : onSuccess,\n            onError : onError,\n            scope : this\n        };\n\n        ProcessIsoCurveResponseFactory.build(options);\n    } else {\n        onError.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default ProcessIsoCurve;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport ProcessIsoCurveParam from \"./model/ProcessIsoCurveParam\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes sur le service de calcul d'isoschrone/isodistance.\n *  Les requêtes peuvent être en mode GET ou POST,\n *  et le format de sorti est en JSON.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveRequest\n * @param {Object} options - options\n *\n * @example\n * var options = {\n *      httpMethod : 'GET', // GET|POST\n *      // spécifique au service\n *      position : {\n *          x : 2.3242664298058053,\n *          y : 48.86118017324745\n *      },\n *      graph : \"car\",\n *      method : 'time',\n *      time : 1000, //distance : 200\n *      reverse : false,\n *      srs : 'EPSG:4326'\n *  };\n *\n * try {\n *\n *      var oIsoCurve = new ProcessIsoCurveRequest (options);\n *      if (!oIsoCurve.processRequestString ()) {\n *          // error\n *      }\n *\n *      var request = oIsoCurve.requestString;\n *\n * } catch (e) {\n *      // error\n * }\n * @private\n */\nfunction ProcessIsoCurveRequest (options) {\n    this.logger = Logger.getLogger(\"ProcessIsoCurveRequest\");\n    this.logger.trace(\"[Constructeur ProcessIsoCurveRequest ()]\");\n\n    if (!(this instanceof ProcessIsoCurveRequest)) {\n        throw new TypeError(\"ProcessIsoCurveRequest constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /**\n     * Liste des options\n     */\n    this.settings = options;\n\n    /**\n     * Mode HTPP.\n     * Par defaut, \"GET\".\n     * @type {String}\n     */\n    this.mode = this.settings.httpMethod || \"GET\";\n}\n\nProcessIsoCurveRequest.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveRequest#\n     */\n\n    /**\n     * Requête\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveRequest,\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out :\n     *   //  (http://wxs.ign.fr/KEY/isochrone?)\n     *   //  resource=&\n     *   //  point=&\n     *   //  costValue=&\n     *   //  costType=&\n     *   //  profile=&\n     *   //  constraints=&\n     *   //  direction=&\n     *   //  crs=\n     *\n     * // POST out :\n     * {\n     *  resource: \"bduni-idf-pgr\",\n     *  point: \"2.337306,48.849319\",\n     *  costValue: 100,\n     *  costType: \"time\",\n     *  profile: \"car\",\n     *  constraints: [{\n     *      constraintType: \"banned\",\n     *      key: \"ways_type\",\n     *      operator: \"=\",\n     *      value: \"autoroute\"\n     *  }]\n     * }\n     *\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        var request = \"\";\n        var i = 0;\n\n        switch (this.mode) {\n            case \"GET\":\n                this.logger.trace(\"Process GET Request\");\n\n                // Mapping des options avec le service de l'API REST\n                var oParams = new ProcessIsoCurveParam(this.settings);\n                var params = oParams.getParams();\n\n                for (i = 0; i < params.length; i++) {\n                    var o = params[i];\n                    if (request) {\n                        request += \"&\";\n                    }\n                    request += o.k + \"=\" + o.v;\n                }\n\n                break;\n\n            case \"POST\":\n                this.logger.trace(\"Process POST Request\");\n                // creation du JSON\n                var postRequest = {};\n\n                postRequest.resource = this.settings.resource;\n\n                postRequest.point = this.settings.position.x + \",\" + this.settings.position.y;\n\n                if (this.settings.method === \"distance\") {\n                    postRequest.costType = \"distance\";\n                    postRequest.costValue = this.settings.distance;\n                } else {\n                    postRequest.costType = \"time\";\n                    postRequest.costValue = this.settings.time;\n                }\n\n                postRequest.profile = this.settings.graph;\n\n                if (this.settings.reverse) {\n                    postRequest.direction = \"arrival\";\n                } else {\n                    postRequest.direction = \"departure\";\n                }\n\n                postRequest.constraints = this.settings.constraints;\n\n                postRequest.distanceUnit = this.settings.distanceUnit;\n\n                postRequest.timeUnit = this.settings.timeUnit;\n\n                postRequest.crs = this.settings.srs;\n\n                // conversion en chaîne de caractères\n                request = JSON.stringify(postRequest);\n                break;\n\n            default:\n                this.logger.error(\"No other HTTP method supported by the service !\");\n        }\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default ProcessIsoCurveRequest;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n *\n * Classe de gestion des param. des requêtes du service de calcul des iso.\n * Permet le mapping avec les options du service.\n *\n * @constructor\n * @alias Gp.Services.ProcessIsoCurve.Request.ProcessIsoCurveParam\n * @param {Object} options - options\n * @private\n *\n */\nfunction ProcessIsoCurveParam (options) {\n    if (!(this instanceof ProcessIsoCurveParam)) {\n        throw new TypeError(\"ProcessIsoCurveParam constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur ProcessIsoCurveParam ()]\");\n\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Identifiant de l’isochrone */\n    this.id = this.options.id;\n\n    /** Resource */\n    this.resource = this.options.resource;\n\n    /** Coordonnées de départ (ou arrivée si le reverse est à true). */\n    this.point = this.options.position;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.crs = this.options.srs;\n\n    /**\n     * Profil de véhicule à utiliser pour le calcul.\n     * Voiture ou Pieton\n     */\n    this.profile = this.options.graph;\n\n    /** Liste des règles de restrictions à utiliser */\n    this.constraints = this.options.constraints;\n\n    this.reverse = this.options.reverse;\n\n    this.timeUnit = this.options.timeUnit;\n\n    this.distanceUnit = this.options.distanceUnit;\n\n    /**\n     * \"time\" pour isochrone ou \"distance\" for isodistance.\n     * Par defaut, time...\n     */\n    if (this.options.method === \"distance\") {\n        this.costType = \"distance\";\n        this.costValue = this.options.distance;\n        if (this.distanceUnit === \"m\" && this.costValue >= 50000) {\n            this.distanceUnit = \"km\";\n            this.costValue /= 1000;\n        }\n    } else {\n        this.costType = \"time\";\n        this.costValue = this.options.time;\n    }\n}\n\n/**\n * CLASSNAME\n */\nProcessIsoCurveParam.CLASSNAME = \"ProcessIsoCurveParam\";\n\nProcessIsoCurveParam.prototype = {\n\n    /**\n     * @lends module:ProcessIsoCurveParam#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : ProcessIsoCurveParam,\n\n    /**\n     * Retourne le point\n     * @returns {String} x,y\n     */\n    getLocation : function () {\n        return this.point.x + \",\" + this.point.y;\n    },\n\n    /**\n     * Retourne l'unité de la distance\n     * @returns {String}\n     */\n    getDistanceUnit : function () {\n        if (this.distanceUnit === \"m\") {\n            return \"meter\";\n        }\n        if (this.distanceUnit === \"km\") {\n            return \"kilometer\";\n        }\n        return \"\";\n    },\n\n    /**\n     * Retourne la liste des contraintes\n     * @returns {String}\n     */\n    getConstraints : function () {\n        var constraintArray = [];\n\n        if (this.constraints.length !== 0) {\n            for (var k = 0; k < this.constraints.length; k++) {\n                constraintArray.push(JSON.stringify(this.constraints[k]));\n            }\n        }\n        return constraintArray.join(\"|\");\n    },\n\n    /**\n     * Retourne la direction\n     * @returns {String}\n     */\n    getDirection : function () {\n        if (this.reverse) {\n            return \"arrival\";\n        } else {\n            return \"departure\";\n        }\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Object[]} KVP\n */\nProcessIsoCurveParam.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    map.push({\n        k : \"point\",\n        v : this.getLocation()\n    });\n\n    map.push({\n        k : \"direction\",\n        v : this.getDirection()\n    });\n\n    map.push({\n        k : \"costType\",\n        v : this.costType\n    });\n\n    map.push({\n        k : \"costValue\",\n        v : this.costValue\n    });\n\n    map.push({\n        k : \"profile\",\n        v : this.profile\n    });\n\n    map.push({\n        k : \"timeUnit\",\n        v : this.timeUnit\n    });\n\n    map.push({\n        k : \"distanceUnit\",\n        v : this.getDistanceUnit()\n    });\n\n    if (this.crs) {\n        map.push({\n            k : \"crs\",\n            v : this.crs\n        });\n    }\n\n    if (this.constraints) {\n        map.push({\n            k : \"constraints\",\n            v : this.getConstraints()\n        });\n    }\n\n    return map;\n};\n\nexport default ProcessIsoCurveParam;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport ProcessIsoCurveResponse from \"./model/ProcessIsoCurveResponse\";\n\n/**\n * Factory pour générer une reponse JSON à partir d'un JSON\n * (Factory)\n *\n * @module ProcessIsoCurveResponseFactory\n * @alias Gp.Services.ProcessIsoCurve.Response.ProcessIsoCurveResponseFactory\n * @private\n */\nvar ProcessIsoCurveResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant ProcessIsoCurve\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"ProcessIsoCurveResponseFactory\");\n        logger.trace([\"ProcessIsoCurveResponseFactory::build()\"]);\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                logger.trace(\"analyze response : json\");\n\n                var JSONResponse;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // analyse de la reponse\n                // création de l'objet de réponse\n                data = new ProcessIsoCurveResponse();\n\n                // remplissage de l'objet créé avec les attribtuts de la réponse du service\n                if (JSONResponse) {\n                    if (JSONResponse.costType === \"distance\") {\n                        data.time = \"\";\n                        data.distance = JSONResponse.costValue;\n                    } else {\n                        data.time = JSONResponse.costValue;\n                        data.distance = \"\";\n                    }\n\n                    data.message = \"\";\n                    data.id = \"\";\n                    data.srs = JSONResponse.crs;\n                    data.geometry = JSONResponse.geometry;\n                    var coords = JSONResponse.point.split(\",\");\n                    if (data.location) {\n                        data.location.x = coords[0];\n                        data.location.y = coords[1];\n                    }\n                } else {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", options.response)));\n                    return;\n                }\n\n                // info : en cas de problèmes de droits (clé invalide ou autre), la réponse est au format XML !!\n                // ex. <ExceptionReport><Exception exceptionCode=\"MissingParameter\">Key does not exist or has expired</Exception></ExceptionReport>\n                // mais le statut est 403, l'erreur est donc remontée plus tôt.\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService({\n                        message : MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", data.exceptionReport),\n                        type : ErrorService.TYPE_SRVERR,\n                        status : 200\n                    }));\n                    return;\n                }\n            }\n        } else {\n            // si la réponse est vide, on appelle le callback d'erreur\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        // si tout s'est bien passé, on appelle le callback de succès\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default ProcessIsoCurveResponseFactory;\n","\n/**\n * Response object for {@link module:Services~isoCurve Gp.Services.isoCurve ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Float} distance - distance (expressed in meters) used for the request.\n * @property {Float} time - time (expressed in seconds) used for the request.\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the isocurve.\n * @property {String} id - request id (used by underlying webservice).\n * @property {Gp.Point} location - Position of the start or end point used for the request (expressed in \"srs\" coordinates system).\n * @property {String} message - message\n * @property {String} srs - Identifier of the coordinates system used for the isocurve.\n *\n * @namespace\n * @alias Gp.Services.IsoCurveResponse\n *\n */\nfunction ProcessIsoCurveResponse () {\n    if (!(this instanceof ProcessIsoCurveResponse)) {\n        throw new TypeError(\"ProcessIsoCurveResponse constructor cannot be called as a function.\");\n    }\n\n    this.message = null;\n\n    this.id = null;\n\n    this.location = {};\n    this.location.x = null;\n    this.location.y = null;\n\n    this.srs = null;\n\n    this.geometry = null;\n\n    this.time = null;\n\n    this.distance = null;\n}\n\nProcessIsoCurveResponse.prototype = {\n\n    constructor : ProcessIsoCurveResponse\n\n};\n\nexport default ProcessIsoCurveResponse;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteRequestREST from \"./RouteRequestREST\";\n\n/**\n * Creation d'une requête REST en mode POST ou GET\n * (Factory)\n *\n * @module RouteRequestFactory\n * @alias Gp.Services.Route.Request.RouteRequestFactory\n * @private\n */\nvar RouteRequestFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   // utilisation avec les callback\n     *   var options = {\n     *      (...)\n     *      onSuccess : function (response) {},\n     *      onError : function (error) {},\n     *      // spécifique au service\n     *      startPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      endPoint : {\n     *          x : 42.1121,\n     *          y : 1.5557\n     *      },\n     *      provideBbox : false,\n     *      exclusions : [\"bridge\", \"tunnel\", \"toll\"],\n     *      distanceUnit : \"km\",\n     *      graph : \"Voiture\",\n     *      geometryInInstructions : false,\n     *      routePreference : \"fastest\"\n     *   };\n     *   RouteRequestFactory.build(options);\n     *\n     *   // utilisation sans callback\n     *   var options = {...};\n     *   try {\n     *      var result = RouteRequestFactory.build(options);\n     *      if (! result) { throw new Error(\"...\"):}\n     *   } catch (e) {\n     *      // todo\n     *   }\n     * @returns {String} request\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteRequestFactory\");\n        logger.trace([\"RouteRequestFactory::build()\"]);\n\n        var request = null;\n\n        var settings = options || {};\n\n        // gestion des callback\n        var bOnError = !!(options.onError !== null && typeof options.onError === \"function\");\n\n        var message = null;\n\n        // FIXME les exceptions ne sont pas 'catchées' sur le constructeur !\n        var myReq = new RouteRequestREST(settings);\n        if (!myReq.processRequestString()) {\n            message = \"Error process request (rest) !\";\n            if (bOnError) {\n                options.onError.call(options.scope, new ErrorService(message));\n                return;\n            }\n            throw new Error(message);\n        }\n        request = myReq.requestString;\n\n        return request;\n    }\n};\n\nexport default RouteRequestFactory;\n","\nimport Logger from \"../../../Utils/LoggerByDefault\";\nimport _ from \"../../../Utils/MessagesResources\";\nimport RouteParamREST from \"./model/RouteParamREST\";\n\n/**\n * @classdesc\n * Classe de gestion des requêtes de type REST sur le service de calcul d'itineraire\n * (uniquement en GET)\n *\n * @constructor\n * @alias Gp.Services.Route.Request.RouteRequestREST\n * @param {Object} options - options definies dans le composant Route\n *\n * @example\n * var options = {\n *      (...)\n * };\n *\n * @private\n */\nfunction RouteRequestREST (options) {\n    this.logger = Logger.getLogger(\"RouteRequestREST\");\n    this.logger.trace(\"[Constructeur RouteRequestREST ()]\");\n\n    if (!(this instanceof RouteRequestREST)) {\n        throw new TypeError(\"RouteRequestREST constructor cannot be called as a function.\");\n    }\n\n    // existance des options\n    if (!options) {\n        throw new Error(_.getMessage(\"PARAM_EMPTY\", \"options\"));\n    }\n\n    /** liste des options */\n    this.settings = options;\n}\n\nRouteRequestREST.prototype = {\n\n    /**\n     * @lends module:RouteRequestREST#\n     */\n\n    /**\n     * request\n     * @type {String}\n     */\n    requestString : null,\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteRequestREST,\n\n    /**\n     * Construction de la requête.\n     *\n     * @example\n     * // GET  out : origin=2.416907353809513,48.8465772142297&destination=2.4248037771493673,48.84591353161838\n     * // POST out : Not yet supported method POST !\n     * @returns {String} request\n     */\n    processRequestString : function () {\n        // INFO\n        // construction simple sans template...,\n        // mais en attendant que les services soient fixés, on taggue ce composant en mode PROTOTYPE !\n        this.logger.warn(\" PROTOTYPE !\");\n\n        // Mapping des options avec le service de l'API REST\n        var oParams = new RouteParamREST(this.settings);\n        var params = oParams.getParams();\n\n        var request = \"\";\n        for (var i = 0; i < params.length; i++) {\n            var o = params[i];\n            if (request) {\n                request += \"&\";\n            }\n            request += o.k + \"=\" + o.v;\n        }\n\n        // Exemple :\n        //  http://wxs.ign.fr/KEY/itineraire/rest/route.json?\n        //  origin=&\n        //  destination=&\n        //  waypoints=&\n        //  method=DISTANCE&\n        //  graph=Pieton&\n        //  graphName=Pieton&\n        //  exclusions=&\n        //  tolerance=10&\n        //  srs=\n\n        this.logger.trace(request);\n        this.requestString = request;\n\n        return this.requestString;\n    }\n};\n\nexport default RouteRequestREST;\n","\nimport Logger from \"../../../../Utils/LoggerByDefault\";\n\n/**\n * @classdesc\n * Classe de gestion des param. des requêtes du service de calcul d'itineraire (REST).\n *      Permet le mapping avec les options du service.\n * @constructor\n * @alias Gp.Services.Route.Request.RouteParamREST\n * @param {Object} options - options\n *\n * @private\n */\nfunction RouteParamREST (options) {\n    if (!(this instanceof RouteParamREST)) {\n        throw new TypeError(\"RouteParamREST constructor cannot be called as a function.\");\n    }\n\n    this.logger = Logger.getLogger();\n    this.logger.trace(\"[Constructeur RouteParamREST ()]\");\n    /**\n     * Options en paramêtres du constructeur.\n     */\n    this.options = options || {};\n\n    // mapping des options avec l'API REST\n\n    /** Ressource utilisée */\n    this.resource = this.options.resource;\n\n    /** Coordonnées du point de départ. */\n    this.start = this.options.startPoint.x + \",\" + this.options.startPoint.y;\n\n    /** Coordonnées du point d’arrivée. */\n    this.end = this.options.endPoint.x + \",\" + this.options.endPoint.y;\n\n    /** Coordonnées des étapes point de départ. */\n    this.intermediates = this.options.viaPoints;\n\n    /** Nom du profile à utiliser */\n    this.profile = this.options.graph;\n\n    /** projection (code EPSG comme epsg:4326 ou wgs84) */\n    this.crs = this.options.srs;\n\n    /** Liste des contraintes */\n    this.constraints = this.options.constraints;\n\n    /** Nom de l'optimisation à utiliser */\n    this.optimization = this.options.routePreference;\n\n    /** Format de sortie (résumé de l’itinéraire) */\n    this.getSteps = (this.options.geometryInInstructions) ? \"true\" : \"false\";\n\n    /** Unité des distances */\n    this.distanceUnit = this.options.distanceUnit;\n\n    /** Unité des durées */\n    this.timeUnit = this.options.timeUnit;\n\n    /** Attributs des voies */\n    this.waysAttributes = this.options.waysAttributes;\n}\n\n/**\n * CLASSNAME\n */\nRouteParamREST.CLASSNAME = \"RouteParamREST\";\n\nRouteParamREST.prototype = {\n\n    /**\n     * @lends module:RouteParamREST#\n     */\n\n    /**\n     * Constructeur (alias)\n     */\n    constructor : RouteParamREST,\n\n    /**\n     * Retourne une liste de points\n     * @returns {String} une liste de points (sep '|')\n     */\n    getIntermediates : function () {\n        var array = [];\n        if (this.intermediates.length !== 0) {\n            for (var i = 0; i < this.intermediates.length; i++) {\n                var obj = this.intermediates[i];\n                array.push(obj.x + \",\" + obj.y);\n            }\n        }\n\n        return array.join(\"|\");\n    },\n\n    /**\n     * Retourne une liste d'attributs\n     * @returns {String} une liste d'attributs (sep '|')\n     */\n    getWaysAttributes : function () {\n        return this.waysAttributes.join(\"|\");\n    },\n\n    /**\n     * Retourne un profile\n     * @returns {String} profile\n     */\n    getProfile : function () {\n        return this.profile;\n    },\n\n    /**\n     * Retourne un distanceUnit\n     * @returns {String} distanceUnit\n     */\n    getDistanceUnit : function () {\n        if (this.distanceUnit === \"m\") {\n            return \"meter\";\n        }\n        if (this.distanceUnit === \"km\") {\n            return \"kilometer\";\n        }\n        return \"\";\n    },\n\n    /**\n     * Retourne une optimisation\n     * @returns {String} optimization\n     */\n    getOptimization : function () {\n        if (this.optimization) {\n            return this.optimization;\n        } else {\n            return \"\";\n        }\n    },\n\n    /**\n     * Retourne la liste des constraints\n     * @returns {String} une liste des constraints (sep '|')\n     */\n    getConstraints : function () {\n        var constraintArray = [];\n\n        if (this.constraints.length !== 0) {\n            for (var k = 0; k < this.constraints.length; k++) {\n                constraintArray.push(JSON.stringify(this.constraints[k]));\n            }\n        }\n        return constraintArray.join(\"|\");\n    }\n};\n\n/**\n * Tableau de clefs/valeurs pour param.\n *\n * @returns {Array} liste de paramêtres\n */\nRouteParamREST.prototype.getParams = function () {\n    var map = [];\n\n    map.push({\n        k : \"resource\",\n        v : this.resource\n    });\n\n    map.push({\n        k : \"start\",\n        v : this.start\n    });\n\n    map.push({\n        k : \"end\",\n        v : this.end\n    });\n\n    map.push({\n        k : \"geometryFormat\",\n        v : \"geojson\"\n    });\n\n    if (this.optimization) {\n        map.push({\n            k : \"optimization\",\n            v : this.getOptimization()\n        });\n    }\n\n    if (this.intermediates) {\n        map.push({\n            k : \"intermediates\",\n            v : this.getIntermediates()\n        });\n    }\n\n    if (this.profile) {\n        map.push({\n            k : \"profile\",\n            v : this.getProfile()\n        });\n    }\n\n    if (this.constraints) {\n        map.push({\n            k : \"constraints\",\n            v : this.getConstraints()\n        });\n    }\n\n    if (this.crs) {\n        map.push({\n            k : \"crs\",\n            v : this.crs\n        });\n    }\n\n    if (this.distanceUnit) {\n        map.push({\n            k : \"distanceUnit\",\n            v : this.getDistanceUnit()\n        });\n    }\n\n    if (this.timeUnit) {\n        map.push({\n            k : \"timeUnit\",\n            v : this.timeUnit\n        });\n    }\n\n    if (this.waysAttributes) {\n        map.push({\n            k : \"waysAttributes\",\n            v : this.getWaysAttributes()\n        });\n    }\n\n    return map;\n};\n\nexport default RouteParamREST;\n","import Logger from \"../../../Utils/LoggerByDefault\";\nimport MRes from \"../../../Utils/MessagesResources\";\nimport ErrorService from \"../../../Exceptions/ErrorService\";\nimport RouteResponse from \"./model/RouteResponse\";\nimport RouteInstruction from \"./model/RouteInstruction\";\n\n/**\n * Factory pour générer une reponse JSON à partir d'un XML ou d'un JSON\n * (Factory)\n *\n * @module RouteResponseFactory\n * @alias Gp.Services.Route.Response.RouteResponseFactory\n * @private\n */\nvar RouteResponseFactory = {\n\n    /**\n     * interface unique\n     *\n     * @method build\n     * @static\n     * @param {Object} options - options definies dans le composant Route\n     *\n     * @example\n     *   var options = {\n     *      response :\n     *      outputFormat :\n     *      rawResponse :\n     *      scope :\n     *      onSuccess :\n     *      onError :\n     *   };\n     *\n     */\n    build : function (options) {\n        // logger\n        var logger = Logger.getLogger(\"RouteResponseFactory\");\n        logger.trace(\"RouteResponseFactory::build()\");\n\n        var data = null;\n\n        if (options.response) {\n            if (options.rawResponse) {\n                logger.trace(\"analyze response : raw\");\n                data = options.response;\n            } else {\n                logger.trace(\"analyze response : json\");\n\n                var JSONResponse;\n                if (typeof options.response === \"string\") {\n                    JSONResponse = JSON.parse(options.response);\n                } else {\n                    JSONResponse = options.response;\n                }\n\n                // construction de l'objet réponse JSON\n                if (JSONResponse) {\n                    // le service renvoie t il une erreur ?\n                    if (JSONResponse.message) {\n                        // ex. {\"message\":\"message not null\", \"status\":\"ERROR\"}\n                        options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION\", JSONResponse.message)));\n                        return;\n                    }\n                    var legs = [];\n                    var legSteps = [];\n                    var steps = [];\n\n                    data = new RouteResponse();\n\n                    if (data.hasOwnProperty(\"totalTime\")) {\n                        data.totalTime = parseFloat(JSONResponse.duration);\n                    }\n                    if (data.hasOwnProperty(\"totalDistance\")) {\n                        data.totalDistance = parseFloat(JSONResponse.distance);\n                    }\n\n                    if (data.hasOwnProperty(\"bbox\")) {\n                        data.bbox.left = parseFloat(JSONResponse.bbox[0]);\n                        data.bbox.bottom = parseFloat(JSONResponse.bbox[1]);\n                        data.bbox.right = parseFloat(JSONResponse.bbox[2]);\n                        data.bbox.top = parseFloat(JSONResponse.bbox[3]);\n                    }\n\n                    if (data.hasOwnProperty(\"routeGeometry\") && !options.geometryInInstructions) {\n                        data.routeGeometry = JSONResponse.geometry;\n                    }\n\n                    if (data.hasOwnProperty(\"routeInstructions\") && options.geometryInInstructions) {\n                        var legList = JSONResponse.portions;\n                        var i;\n                        if (Array.isArray(legList) && legList.length) {\n                            for (i = 0; i < legList.length; i++) {\n                                legs.push(legList[i]);\n                            }\n                        }\n                        if (legs.length) {\n                            for (i = 0; i < legs.length; i++) {\n                                legSteps.push(legs[i].steps);\n                            }\n                        }\n                        if (legSteps.length) {\n                            for (i = 0; i < legSteps.length; i++) {\n                                steps = steps.concat(legSteps[i]);\n                            }\n                        }\n\n                        steps.forEach(function (step) {\n                            data.routeInstructions.push(new RouteInstruction());\n                            data.routeInstructions[data.routeInstructions.length - 1].duration = step.duration;\n                            data.routeInstructions[data.routeInstructions.length - 1].distance = step.distance;\n                            data.routeInstructions[data.routeInstructions.length - 1].code = \"\";\n                            data.routeInstructions[data.routeInstructions.length - 1].instruction = \"\";\n                            data.routeInstructions[data.routeInstructions.length - 1].geometry = step.geometry;\n\n                            // on ne souhaite pas de ce type de valeur...\n                            if (step.name === \"Valeur non renseignée\") {\n                                step.name = \"\";\n                            }\n\n                            switch (step.instruction.type) {\n                                case \"turn\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Tourner\";\n                                    break;\n                                case \"new name\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Continuer tout droit\";\n                                    break;\n                                case \"depart\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Départ\";\n                                    break;\n                                case \"arrive\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Arrivée\";\n                                    break;\n                                case \"merge\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Rejoindre\";\n                                    break;\n                                case \"ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la bretelle\";\n                                    break;\n                                case \"on ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la bretelle\";\n                                    break;\n                                case \"off ramp\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Prendre la sortie\";\n                                    break;\n                                case \"fork\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Sur la bifurcation, prendre\";\n                                    break;\n                                case \"end of road\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"À la fin de la route, prendre\";\n                                    break;\n                                case \"use lane\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Utiliser la file\";\n                                    break;\n                                case \"continue\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Continuer\";\n                                    break;\n                                case \"roundabout\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond-point\";\n                                    break;\n                                case \"rotary\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond-point\";\n                                    break;\n                                case \"roundabout turn\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"Au rond point, tourner\";\n                                    break;\n                                case \"notification\":\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"\";\n                                    break;\n                                default:\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \"?\" + step.instruction.type + \"?\";\n                                    break;\n                            }\n\n                            if (step.instruction.modifier) {\n                                switch (step.instruction.modifier) {\n                                    case \"uturn\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Faire demi-tour\";\n                                        break;\n                                    case \"sharp right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" complètement à droite\";\n                                        break;\n                                    case \"right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" à droite\";\n                                        break;\n                                    case \"slight right\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" légèrement à droite\";\n                                        break;\n                                    case \"straight\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction = \"Continuer tout droit\";\n                                        break;\n                                    case \"slight left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" lègèrement à gauche\";\n                                        break;\n                                    case \"left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" à gauche\";\n                                        break;\n                                    case \"sharp left\":\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" complètement à gauche\";\n                                        break;\n                                    default:\n                                        data.routeInstructions[data.routeInstructions.length - 1].instruction += \" ?\" + step.instruction.modifier + \"?\";\n                                        break;\n                                }\n                            }\n\n                            if (step.instruction.exit) {\n                                data.routeInstructions[data.routeInstructions.length - 1].instruction += `${step.instruction.exit}e sortie`;\n                            }\n\n                            if (step.attributes.name) {\n                                if (step.attributes.name.nom_1_droite || step.attributes.name.toponyme) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += \" sur\";\n                                }\n\n                                if (step.attributes.name.nom_1_droite) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += ` ${step.attributes.name.nom_1_droite}`;\n                                }\n\n                                if (step.attributes.name.toponyme) {\n                                    data.routeInstructions[data.routeInstructions.length - 1].instruction += ` ${step.attributes.name.toponyme}`;\n                                }\n                            }\n                        });\n                    }\n                }\n\n                if (!data) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_ANALYSE\", \"json\")));\n                    return;\n                }\n\n                // Si la réponse contenait une exception renvoyée par le service\n                if (data.exceptionReport) {\n                    options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EXCEPTION_2\")));\n                    return;\n                }\n            }\n        } else {\n            options.onError.call(options.scope, new ErrorService(MRes.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n            return;\n        }\n\n        options.onSuccess.call(options.scope, data);\n    }\n};\n\nexport default RouteResponseFactory;\n","\n/**\n * Single Route Instruction object.\n *\n * @property {String} code - Instruction code :\n *\n * - \"F\" : Straight forward\n * - \"B\" : U-turn\n * - \"L\" : turn left\n * - \"R\" : turn right\n * - \"BL\" : turn left strongly\n * - \"BR\" : turn right strongly\n * - \"FL\" : turn lightly to the left\n * - \"FR\" : turn lightly to the right\n * - \"round_about_entry\" : round about entry\n * - \"round_about_exit\" : round about exit\n *\n * @property {String} instruction - Instruction text : translated code + street name\n * @property {Object} geometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the street.\n * @property {Float} distance - Length of the instruction. Expressed in km or m, depending on distanceUnit parameter.\n * @property {Float} duration - Instruction duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.Route.RouteInstruction\n */\nfunction RouteInstruction () {\n    if (!(this instanceof RouteInstruction)) {\n        throw new TypeError(\"RouteInstruction constructor cannot be called as a function.\");\n    }\n\n    this.duration = null;\n\n    this.distance = null;\n\n    this.code = null;\n\n    this.instruction = null;\n\n    this.geometry = null; // FIXME can be null if option 'geometryInInstructions' is false !\n}\n\nRouteInstruction.prototype = {\n\n    constructor : RouteInstruction\n\n};\n\nexport default RouteInstruction;\n","/**\n * Response object for {@link module:Services~route Gp.Services.route ()} invocation when successful. Received as the argument of onSuccess callback function.\n *\n * @property {Gp.BBox} bbox - Bounding Box of the route. Given when provideBBox parameter is used in function call.\n * @property {Object} routeGeometry - Geometry (expressed in [GeoJSON]{@link http://geojson.org/}) of the route.\n * @property {Array.<Gp.Services.Route.RouteInstruction>} routeInstructions - Instructions of the route.\n * @property {String} totalDistance - Length of the route. If distanceUnit parameter was set to \"km\" (default), totalDistance is a string containing the total distance expressed in kilometers, followed by \" Km\" (e.g. : \"19.6 Km\"). If distanceUnit parameter was set to \"m\", totalDistance is a string containing the total distance expressed in meters (e.g. : \"19599.14\").\n * @property {Float} totalTime - Route duration in seconds.\n *\n * @namespace\n * @alias Gp.Services.RouteResponse\n */\nfunction RouteResponse () {\n    if (!(this instanceof RouteResponse)) {\n        throw new TypeError(\"RouteResponse constructor cannot be called as a function.\");\n    }\n\n    this.totalTime = null;\n\n    this.totalDistance = null;\n\n    this.bbox = {\n        left : null,\n        right : null,\n        top : null,\n        bottom : null\n    };\n\n    this.routeGeometry = null; // FIXME can be null if option 'geometryInInstructions' is true !\n\n    this.routeInstructions = [];\n}\n\nRouteResponse.prototype = {\n\n    constructor : RouteResponse\n\n};\n\nexport default RouteResponse;\n","\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport _ from \"../../Utils/MessagesResources\";\nimport ErrorService from \"../../Exceptions/ErrorService\";\nimport CommonService from \"../CommonService\";\nimport DefaultUrlService from \"../DefaultUrlService\";\nimport RouteRequestFactory from \"./Request/RouteRequestFactory\";\nimport RouteResponseFactory from \"./Response/RouteResponseFactory\";\n\n/**\n * @classdesc\n * Appel du service d'itinéraire du Géoportail :\n *     envoi de la requête construite selon les paramètres en options,\n *     éventuellement parsing et analyse  de la réponse,\n *     retour d'une réponse en paramètre de la fonction onSuccess.\n *\n * @alias Gp.Services.Route\n * @constructor\n * @extends {Gp.Services.CommonService}\n * @param {Object} options - options spécifiques au service (+ les options heritées)\n *\n * @param {String} options.resource - La ressource utilisée pour le calcul. Ce paramètre devrait être obligatoire car il l'est dans l'appel au service. Mais il ne l'est pas pour des raisons de rétrocompatibilité.\n *\n * @param {String} options.outputFormat - Le format de la réponse du service itineraire : 'json' uniquement et par défaut.\n *\n * @param {String} [options.routePreference = \"fastest\"] - Mode de calcul à utiliser :\n * - le plus rapide « fastest »\n * - le plus court « shortest »\n * Par défaut : « fastest ».\n *\n * @param {Object} options.startPoint - Point de départ du calcul. Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.startPoint.x - Abcisse du point de départ du calcul d'itinéraire.\n * @param {Float} options.startPoint.y - Ordonnée du point de départ du calcul d'itinéraire.\n *\n * @param {Object} options.endPoint - Point d'arrivée du calcul. Coordonnées exprimées en longitudes, latitudes (EPSG:4326)\n * @param {Float} options.endPoint.x - Abcisse du point d'arrivée du calcul d'itinéraire.\n * @param {Float} options.endPoint.y - Ordonnée du point d'arrivée du calcul d'itinéraire.\n *\n * @param {Object[]} [options.viaPoints] - Liste de point ({x:Float,y:Float}) intermédaires que l'itinéraire doit emprunter dans l'ordre du tableau.\n *      Coordonnées exprimées en longitudes, latitudes (EPSG:4326) :{x:float, y:float}\n *\n * @param {String} [options.graph = \"voiture\"] - Type de graphe utilisé : \"Voiture\" ou \"Pieton\".\n *      Détermine le profil de vitesses utilisé pour le calcul ainsi que les tronçons autorisés ou non.\n *      Par défaut, c'est la valeur \"Voiture\" qui sera utilisée.\n *\n * @param {String[]} [options.exclusions] - DEPRECATED: Critères d'exclusions à appliquer pour le calcul. (correspond au paramètre \"avoidFeature\" d'OpenLS)\n *      On précise ici le type de tronçons que l'on ne veut pas que l'itinéraire emprunte\n *      (valeurs possibles : « toll » (éviter les péages), « bridge », « tunnel »).\n *      Ce paramètre est conservé pour une rétrocompatibilité de l'api. Le nouveau paramètre à utiliser est options.constraints\n *\n * @param {Object[]} [options.constraints] - Critères de contraintes à appliquer sur un itinéraire. Les valeurs disponibles dépendent de la ressource utilisée. Il est donc utile de regarder le getCapabilities.\n * @param {String} [options.constraints.constraintType] - Type de la contrainte. Généralement \"banned\".\n * @param {String} [options.constraints.key] - Clé de la contrainte. Généralement \"wayType\".\n * @param {String} [options.constraints.operator] - Opérateur de la contrainte. Généralement \"=\".\n * @param {String} [options.constraints.value] - Valeur de la contrainte. Généralement \"autoroute\".\n *\n * @param {Boolean} [options.geometryInInstructions = false] - Indique si la géométrie de l'itinéraire doit être reprise morceau par morceau dans les instructions.\n *      (correspond au paramètre \"provideGeometry\" d'OpenLS) Par défaut : false.\n *\n * @param {Boolean} [options.provideBbox = true] - Indique si les instructions doivent être localisées par une bbox dans la réponse.\n *      Par défaut : true.\n *\n * @param {String} [options.distanceUnit = \"m\"] - Indique si la distance doit être exprimée en km ou m dans la réponse.\n *      Par défaut : m.\n * @param {String} [options.timeUnit = \"second\"] - Indique si la durée doit être exprimée en seconde, minute ou heure dans la réponse. Il peut-être formatté hh:mm::ss avec la valeur standard.\n *      Les valeurs possibles sont \"standard\", \"second\", \"minute\" ou \"hour\".\n *      Par défaut : \"standard\".\n *\n * @param {String} [options.srs] - Système de coordonnées dans lequel les paramètres géographiques en entrée et la réponse du service sont exprimés.\n *      Pas de valeur par défaut. Si le serveur consulté est celui du Géoportail, la valeur par défaut sera donc celle du service : 'EPSG:4326'.\n *\n * @param {String[]} [options.waysAttributes] - Nom des attributs des voies. Les valeurs disponibles dépendent de la ressource utilisée. Il est donc utile de regarder le getCapabilities.\n *\n * @example\n *  var options = {\n *      // options communes aux services\n *      apiKey : null,\n *      serverUrl : 'http://localhost/service/',\n *      protocol : 'XHR',\n *      proxyURL : null,\n *      httpMethod : 'GET', // GET|POST\n *      timeOut : 10000, // ms\n *      rawResponse : false, // true|false\n *      scope : null, // this\n *      onSuccess : function (response) {},\n *      onFailure : function (error) {},\n *      // spécifique au service\n *      resource : 'bdtopo'\n *      outputFormat : 'json',\n *      startPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      endPoint : {\n *          x : 42.1121,\n *          y : 1.5557\n *      },\n *      provideBbox : true,\n *      exclusions : [\"Bridge\", \"Tunnel\", \"Toll\"],\n *      distanceUnit : \"km\",\n *      graph : \"Voiture\",\n *      geometryInInstructions : true,\n *      routePreference : \"fastest\"\n *  };\n *\n */\nfunction Route (options) {\n    if (!(this instanceof Route)) {\n        throw new TypeError(_.getMessage(\"CLASS_CONSTRUCTOR\", \"Route\"));\n    }\n\n    /**\n     * Nom de la classe (heritage)\n     */\n    this.CLASSNAME = \"Route\";\n\n    // appel du constructeur par heritage\n    CommonService.apply(this, arguments);\n\n    this.logger = Logger.getLogger(\"Gp.Services.Route\");\n    this.logger.trace(\"[Constructeur Route (options)]\");\n\n    if (!options.startPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.startPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.x\"));\n    }\n\n    if (options.startPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"startPoint.y\"));\n    }\n\n    if (!options.endPoint) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint\"));\n    }\n\n    // on lance une exception afin d'eviter au service de le faire...\n    if (options.endPoint.x === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.x\"));\n    }\n\n    if (options.endPoint.y === null) {\n        throw new Error(_.getMessage(\"PARAM_MISSING\", \"endPoint.y\"));\n    }\n\n    // options par defaut\n\n    // on passe l'option outputFormat en minuscules afin d'éviter des exceptions.\n    if (options.outputFormat && options.outputFormat !== \"json\") {\n        this.logger.warn(\"options.outputFormat could only be json\");\n    }\n    this.options.outputFormat = \"json\";\n\n    this.options.resource = options.resource || \"bdtopo-osrm\";\n    this.options.startPoint = options.startPoint;\n    this.options.endPoint = options.endPoint;\n    this.options.viaPoints = options.viaPoints || [];\n    this.options.routePreference = options.routePreference || \"fastest\";\n    /** Gestion des anciennes valeurs de graph */\n    if (options.graph) {\n        if (options.graph === \"Voiture\") {\n            this.options.graph = \"car\";\n        }\n        if (options.graph === \"Pieton\") {\n            this.options.graph = \"pedestrian\";\n        }\n    } else {\n        this.options.graph = \"car\";\n    }\n    this.options.constraints = [];\n    if (options.constraints) {\n        if (Array.isArray(options.constraints)) {\n            for (var k = 0; k < options.constraints.length; k++) {\n                this.options.constraints.push(options.constraints[k]);\n            }\n        } else {\n            throw new Error(_.getMessage(\"PARAM_TYPE\", \"constraints\"));\n        }\n    }\n\n    /** Gestion de l'ancien paramètre exclusion */\n    var constraintTunnel = {};\n    var constraintPont = {};\n    var constraintAutoroute = {};\n    if (options.exclusions) {\n        if (options.exclusions.length !== 0) {\n            this.logger.warn(\"options.exclusions is DEPRECATED !!\");\n            for (var c = 0; c < options.exclusions.length; c++) {\n                if (typeof options.exclusions[c] === \"string\") {\n                    options.exclusions[c] = options.exclusions[c].toLowerCase();\n                } else {\n                    // on ne crée pas une erreur pour rétro-compatibilité avec les anciennes versions\n                    continue;\n                }\n                if (options.exclusions[c] === \"toll\") {\n                    constraintAutoroute.constraintType = \"banned\";\n                    constraintAutoroute.key = \"wayType\";\n                    constraintAutoroute.operator = \"=\";\n                    constraintAutoroute.value = \"autoroute\";\n                    this.options.constraints.push(constraintAutoroute);\n                }\n                if (options.exclusions[c] === \"tunnel\") {\n                    constraintTunnel.constraintType = \"banned\";\n                    constraintTunnel.key = \"wayType\";\n                    constraintTunnel.operator = \"=\";\n                    constraintTunnel.value = \"tunnel\";\n                    this.options.constraints.push(constraintTunnel);\n                }\n                if (options.exclusions[c] === \"bridge\") {\n                    constraintPont.constraintType = \"banned\";\n                    constraintPont.key = \"wayType\";\n                    constraintPont.operator = \"=\";\n                    constraintPont.value = \"pont\";\n                    this.options.constraints.push(constraintPont);\n                }\n            }\n        }\n    }\n\n    this.options.geometryInInstructions = options.geometryInInstructions || false;\n    this.options.provideBbox = options.provideBbox || true;\n    this.options.distanceUnit = options.distanceUnit || \"m\";\n    this.options.timeUnit = options.timeUnit || \"second\";\n    this.options.expectedStartTime = null; // FIXME not yet implemented !\n    this.options.srs = options.srs || \"EPSG:4326\";\n    this.options.waysAttributes = options.waysAttributes || [];\n\n    // gestion de l'url du service par defaut\n    // si l'url n'est pas renseignée, il faut utiliser les urls par defaut\n    if (!this.options.serverUrl) {\n        var UrlByDefault = DefaultUrlService.Route.newUrl();\n\n        if (!UrlByDefault) {\n            throw new Error(\"Url by default not found !\");\n        }\n        this.options.serverUrl = UrlByDefault;\n        this.logger.trace(\"Serveur URL par defaut : \" + this.options.serverUrl);\n    }\n}\n\n/**\n * @lends module:Route#\n */\nRoute.prototype = Object.create(CommonService.prototype, {\n    // todo\n    // getter/setter\n});\n\n/*\n * Constructeur (alias)\n */\nRoute.prototype.constructor = Route;\n\n/**\n * (overwrite)\n * Création de la requête\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.buildRequest = function (error, success) {\n    var options = {\n        // spécifique au service\n        resource : this.options.resource,\n        startPoint : this.options.startPoint,\n        endPoint : this.options.endPoint,\n        viaPoints : this.options.viaPoints,\n        provideBbox : this.options.provideBbox,\n        constraints : this.options.constraints,\n        distanceUnit : this.options.distanceUnit,\n        timeUnit : this.options.timeUnit,\n        graph : this.options.graph,\n        geometryInInstructions : this.options.geometryInInstructions,\n        routePreference : this.options.routePreference,\n        srs : this.options.srs,\n        waysAttributes : this.options.waysAttributes\n    };\n\n    this.request = RouteRequestFactory.build(options);\n\n    // on teste si la requete a bien été construite !\n    if (!this.request) {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_REQUEST_BUILD\")));\n    } else {\n        success.call(this, this.request);\n    }\n};\n\n/**\n * (overwrite)\n * Analyse de la reponse\n *\n * @param {Function} error   - callback des erreurs\n * @param {Function} success - callback\n */\nRoute.prototype.analyzeResponse = function (error, success) {\n    // INFO\n    // Factory pour masquer la complexité du retour du service\n\n    if (this.response) {\n        var options = {\n            distanceUnit : this.options.distanceUnit,\n            timeUnit : this.options.timeUnit,\n            response : this.response,\n            outputFormat : this.options.outputFormat, // utile pour parser la string en mode XHR : JSON ou XML !\n            rawResponse : this.options.rawResponse,\n            onError : error,\n            onSuccess : success,\n            scope : this,\n            geometryInInstructions : this.options.geometryInInstructions\n        };\n\n        RouteResponseFactory.build(options);\n    } else {\n        error.call(this, new ErrorService(_.getMessage(\"SERVICE_RESPONSE_EMPTY\")));\n    }\n};\n\nexport default Route;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"point|circle|bbox\" }] */\n\n/**\n* Geoportal web services invocation namespace.\n*\n* @module Services\n* @alias Gp.Services\n*/\nimport Config from \"./Config/Config\";\nimport Alti from \"./Alti/Alti\";\nimport Geocode from \"./Geocode/Geocode\";\nimport ReverseGeocode from \"./Geocode/ReverseGeocode\";\nimport AutoComplete from \"./AutoComplete/AutoComplete\";\nimport Route from \"./Route/Route\";\nimport ProcessIsoCurve from \"./ProcessIsoCurve/ProcessIsoCurve\";\n\nvar Services = {\n    /**\n     * Access to Geoportal resources metadata availables with one ore several keys\n     *\n     * @method getConfig\n     * @param {Object} options - Options for function call.\n     * @param {String} [options.apiKey] - Access key(s) (\",\" as separator, no spaces) to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}\n     * @param {String} [options.customConfigFile] - path to a local config file. Overload the apiKey parameter\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GetConfigResponse} object as a parameter except if \"rawResponse\" parameter is set to true : a String will be returned.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     */\n    getConfig : function (options) {\n        var configService = new Config(options);\n        configService.call();\n    },\n    /**\n     * Getting elevations in or along of one or several points on french territories using the [elevation services of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/alti.html}.<br/>\n     * Two use cases are availables :<br/>\n     * 1. getting elevations of the given points : don't use the options.sampling parameter ;<br/>\n     * 2. getting a regular set of elevations along the given points : use the options.sampling parameter.\n     *\n     * @method getAltitude\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {Array.<Object>} options.positions - Array of positions ({lon:float, lat:float}) expressed in CRS:84 coordinates system, where to get elevations. 50 positions maximum may be given. 2 positions minimum are required if you use the options.sampling parameter.\n     * @param {Number} [options.sampling] - Number of points to use (between 2 and 5000) in order to compute an elevation path. The points given with the options.positions parameter are used to fix the planimetric path along which the elevations will be computed.<br/>\n     * If not used, only elevations of these positions will be returned.\n     * @param {Boolean} [options.zonly=false] - Set this parameter to true if you only want to have elevations returned without corresponding coordinates.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AltiResponse} object as a parameter, except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/altimetrie/1.0/calcul/alti/rest/elevation.json] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     * @param {String} [options.api='REST'] - What API to use for interacting with underlying web service : 'REST'. Only use if you know what you are doing.\n     * @param {String} [options.outputFormat='xml'] - Output format for underlying web service response : 'xml' or 'json'. Only use if you know what you are doing.\n     */\n    getAltitude : function (options) {\n        var altiService = new Alti(options);\n        altiService.call();\n    },\n    /**\n     * Getting positon of a geographic identifier (places names, address, cadastral parcel, other...) using the [geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage.html}.\n     *\n     * @example\n     * Gp.Services.geocode ({\n     *     apiKey : \"carte\",\n     *     location : \"73 avenue de Paris, Saint-Mandé\",\n     *     // traitement des resultats\n     *     onSuccess  : function (result) {\n     *         console.log(\"found (x:\"+result.position.x+\", y:\"+result.position.y+\")\") ;\n     *     }\n     * }) ;\n     *\n     *\n     * @method geocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.index=\"StreetAddress\"] - Geographical identifier type to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search, \"location\" for a multi-index search on \"StreetAddress\" and \"PositionOfInterest\". Default is \"StreetAddress\".\n     * @param {String} options.query - Geographic identifier to locate.\n     * @param {Object} [options.filters] - Additional filters to apply to search. The following properties may be given.\n     *      @param {String} [options.filters.[prop]] - Additionnal properties to filter search. Properties depends on options.index, and values type should be \"String\".\n     *      <br/><br/>\n     *      Properties availables for address search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"city\".\n     *      <br/><br/>\n     *      Properties availables for place names search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"type\".\n     *      <br/><br/>\n     *      Properties availables for cadastral parcels search :<br/>\n     *      \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n     * @param {Number} [options.maximumResponses=20] - Maximum number of responses. Default underlying service value applies (20) if not provided.\n     * @param {Boolean} [options.returnTrueGeometry=false] - Set this parameter to true if you wish to have the true geometrie returned.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=http (s)://data.geopf.fr/geocodage/search] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    geocode : function (options) {\n        var geocodeService = new Geocode(options);\n        geocodeService.call();\n    },\n    /**\n     * Retrieving geographical identifiers (place names, address, cadastral parcels, ...) near a given position, using the [reverse geocoding web service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/geocodage-inverse.html}.\n     *\n     * @method reverseGeocode\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.index=\"StreetAddress\"] - Geographical identifier type to search. Values currently availables are : \"PositionOfInterest\" for place names, \"StreetAddress\" for address search, \"CadastralParcel\" for Cadastral parcels search, \"location\" for a multi-index search on \"StreetAddress\" and \"PositionOfInterest\". Default is \"StreetAddress\".\n     * @param {Object} options.position - Reference position where to search geographical identifiers.\n     *      @param {Float} options.position.lon - Longitude\n     *      @param {Float} options.position.lat - Latitude\n     * @param {Object} [options.filters] - Additional filters to apply to search. The following properties may be given.\n     *      @param {String} [options.filters.[prop]] - Additionnal properties to filter search. Properties depends on options.index, and values type should be \"String\".\n     *      <br/><br/>\n     *      Properties availables for address search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"city\".\n     *      <br/><br/>\n     *      Properties availables for place names search :<br/>\n     *      \"postalCode\", \"inseeCode\" and \"type\".\n     *      <br/><br/>\n     *      Properties availables for cadastral parcels search :<br/>\n     *      \"codeDepartement\", \"codeCommune\", \"nomCommune\", \"codeCommuneAbs\", \"codeArrondissement\", \"section\", \"numero\", \"feuille\".\n     * @param {Object} [options.searchGeometry] - Location where to perform the search.\n     *      @param {String} options.searchGeometry.type - Geometry type (Point|Circle|Linestring|Polygon)\n     *      @param {Array.<Float>|Array.Array.<Float>} options.searchGeometry.coordinates - Coordinates\n     *      @param {Float} [options.searchGeometry.radius] - Radius (only for type 'Circle')\n     * @param {Number} [options.maximumResponses=20] - Maximum number of responses. Default underlying service value applies (20) if not provided.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.GeocodeResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/geocodage/reverse] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    reverseGeocode : function (options) {\n        var reverseGeocodeService = new ReverseGeocode(options);\n        reverseGeocodeService.call();\n    },\n    /**\n     * Getting suggestions of probable places names or address based on uncomplete texts, using the [autocompletion service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/autocompletion.html}\n     *\n     * @method autoComplete\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} options.text - Text input to complete.\n     * @param {Array.<String>} [options.filterOptions.type = \"StreetAddress\"] - Suggestion types to provide : address (\"StreetAddress\") and/or place name (\"PositionOfInterest\").\n     * @param {Array.<String>} [options.filterOptions.territory] - Places where to limit the search of suggestions : \"METROPOLE\" (Corsica and metropolitan France), \"DOMTOM\" (French overseas departments and territories), or an INSEE code of a department. No limitation by default. For instance : ['METROPOLE', '31']\n     * @param {Number} [options.maximumResponses = 10] - Maximum number of responses.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.AutoCompleteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/geocodage/completion] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    autoComplete : function (options) {\n        var autoCompleteService = new AutoComplete(options);\n        autoCompleteService.call();\n    },\n    /**\n     * Getting a route from one point to another using the [route service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/itineraires.html}.\n     *\n     * @method route\n     * @param {Object} options - Options for function call.\n     * @param {String} options.resource - Resource used to compute the route. Available values are in the GetCapabilities.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} [options.routePreference = \"fastest\"] - Indicates the way to compute the route : \"fastest\" (time optimisation) or \"shortest\" (distance optimisation). Available values are in the GetCapabilities.\n     * @param {Gp.Point} options.startPoint - Start point of the route. Expressed in CRS:84 coordinates system (startPoint.x corresponds to longitude, startPoint.y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {Gp.Point} options.endPoint - End point of the route. Expressed in CRS:84 coordinates system (endPoint.x corresponds to longitude, endPoint.y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {Array.<Gp.Point>} [options.viaPoints] - Ordered via Points of the route. Expressed in CRS:84 coordinates system (viaPoints[i].x corresponds to longitude, viaPoints[i].y corresponds to latitude). Available bbox are in the GetCapabilities.\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the route : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads the route may use and the average speed. Available bbox are in the GetCapabilities.\n     * @param {Array.<String>} [options.exclusions] - DEPRECATED: use options.constraints. Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Boolean} [options.geometryInInstructions = false] - Indicates if route geometry has to be also returned with route instructions.\n     * @param {Boolean} [options.provideBoundingBox = true] - Indicates if route instructions has to be localised with a BBOX in the response.\n     * @param {String} [options.distanceUnit = \"m\"] - The unit used to provide distances in the response (\"meter\" or \"kilometer\").\n     * @param {String} [options.timeUnit = \"second\"] - The unit used to provide duration in the response (\"standard\", \"second\", \"minute\", \"hour\").\n     * @param {Array.<String>} [options.waysAttributes] - Way Attributes to add in the response. Available values are in the GetCapabilities.\n     * @param {Array.<Object>} [options.constraints] - Constraints used ({'constraintType':'banned','key':'ways_type','operator':'=','value':'autoroute'}). Available values are in the GetCapabilities.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.RouteResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\" or \"xml\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/navigation/itineraire] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    route : function (options) {\n        var routeService = new Route(options);\n        routeService.call();\n    },\n    /**\n     * Computing a set of places (curve) reachable from a given point (or from where to start to reach a given point) within a time or distance constraint using the [isochrone service of the Geoportal Platform]{@link https://geoservices.ign.fr/documentation/geoservices/isochrones.html}.\n     *\n     * @method isoCurve\n     * @param {Object} options - Options for function call.\n     * @param {String} options.apiKey - Access key to Geoportal platform, obtained [here]{@link https://geoservices.ign.fr/services-web}.\n     * @param {String} options.resource - Resource used to compute the route. Available values are in the GetCapabilities.\n     * @param {Gp.Point} options.position - Start or Arrival (options.reverse===true) Point for the computing. Expressed in CRS:84 coordinates system (position.x corresponds to longitude, position.y corresponds to latitude).\n     * @param {String} [options.graph = \"Voiture\"] - User profile to use to compute the isoCurve : \"Voiture\" (using a vehicule) or \"Pieton\" (pedestrian). Has an influence on the kind of roads to use and the average speed. Available values are in the GetCapabilities.\n     * @param {Array.<String>} [options.exclusions] - DEPRECATED: use options.constraints. Indicates if route has to avoid some features (\"toll\", \"bridge\" or \"tunnel\").\n     * @param {Array.<Object>} [options.constraints] - Constraints used ({'constraintType':'banned','key':'ways_type','operator':'=','value':'autoroute'}). Available values are in the GetCapabilities.\n     * @param {String} [options.method = \"time\"] - Computing method to use : \"time\" (using a duration as a constraint) or \"distance\" (using a distance as a constraint). Available values are in the GetCapabilities.\n     * @param {Float} options.time - Maximum duration (expressed in seconds) to use when options.method is set to \"time\".\n     * @param {Float} options.distance - Maximum distance (expressed in meters) to use when options.method is set to \"distance\".\n     * @param {Boolean} [options.reverse = false] - Set this parameter to true if you want options.position to be the destination (instead of departure) for the computing.\n     * @param {String} [options.distanceUnit = \"km\"] - The unit used to provide distances in the response (\"m\" or \"km\").\n     * @param {String} [options.timeUnit = \"second\"] - The unit used to provide duration in the response (\"standard\", \"second\", \"minute\", \"hour\").\n     * @param {Boolean} [options.smoothing = false] - DEPRECATED: Set this parameter to true if you want the resulting geometry to be smoothed.\n     * @param {Boolean} [options.holes = false] - DEPRECATED: Set this parameter to true if you want the resulting geometry (polygon) to have holes if pertinent.\n     * @param {Function} options.onSuccess - Callback function for getting successful service response. Takes a {@link Gp.Services.IsoCurveResponse} object as a parameter except if \"rawResponse\" is set to true.\n     * @param {Function} [options.onFailure] - Callback function for handling unsuccessful service responses (timeOut, missing rights, ...). Takes a {@link Gp.Error} object as parameter.\n     * @param {Number} [options.timeOut=0] - Number of milliseconds above which a timeOut response will be returned with onFailure callback (see above). Default value is 0 which means timeOut will not be handled.\n     * @param {String} [options.outputFormat='json'] - Output format (\"json\") to use for underlying webService. Only use if you know what you are doing.\n     * @param {String} [options.serverUrl=https://data.geopf.fr/navigation/isochrone] - Web service URL. If used, options.apiKey parameter is ignored. Only use if you know what you're doing.\n     * @param {Boolean} [options.ssl = true] - Use of HTTPS or HTTP protocol to request the services. HTTPS by default (ssl=true).\n     * @param {String} [options.protocol=XHR] - Protocol used to handle dialog with web service. Possible values are 'JSONP' ({@link https://en.wikipedia.org/wiki/JSONP}) and 'XHR' ({@link https://en.wikipedia.org/wiki/XMLHttpRequest}). Only XHR protocol is supported in a NodeJS environment. Only use if you know what you're doing.\n     * @param {String} [options.proxyURL] - Proxy URL to use when requesting underlying web service. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you're doing.\n     * @param {String} [options.callbackSuffix] - Callback function name suffix to use in case of a JSONP protocol use (see above), to set your own suffix instead of auto-increment. Ignored when options.protocol is set to 'XHR' value. Only use if you know what you're doing.\n     * @param {String} [options.httpMethod=GET] - HTTP method to use when requesting underlying web service in case of a XHR protocol use (see above). Possible values are 'GET' and 'POST'. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {String} [options.contentType=\"application/xml\"] - Content-Type to use when requesting underlying web service in case of a XHR protocol use (see above) and if method HTTP is POST. Ignored when options.protocol is set to 'JSONP' value. Only use if you know what you are doing.\n     * @param {Boolean} [options.rawResponse=false] - Setting this parameter to true implies you want to handle the service response by yourself : it will be returned as an unparsed String in onSuccess callback parameter. Only use if you know what you are doing.\n     * @param {Function} [options.onBeforeParse] - Callback function for handling service response before parsing (as an unparsed String). Takes a String as a parameter (the raw service response). Returns a String that will be parsed as the service response. Only use if you know what you are doing.\n     */\n    isoCurve : function (options) {\n        var processIsoCurveService = new ProcessIsoCurve(options);\n        processIsoCurveService.call();\n    }\n};\n\n/**\n * Point object.\n *\n * @namespace\n * @alias Gp.Point\n *\n * @property {Float} x - Point abscissa\n * @property {Float} y - Point ordinate\n */\nvar point = {};\n\n/**\n * Circle object.\n *\n * @namespace\n * @alias Gp.Circle\n *\n * @property {Float} x - Circle center abscissa.\n * @property {Float} y - Circle center ordinate.\n * @property {Float} radius - Circle radius.\n */\nvar circle = {};\n\n/**\n * Bounding box object, expressed with four coordinates.\n *\n * @namespace\n * @alias Gp.BBox\n *\n * @property {Float} left - minimum abscissa\n * @property {Float} right - maximum abscissa\n * @property {Float} bottom - minimum ordinate\n * @property {Float} top - maximum ordinate\n */\nvar bbox = {};\n\nexport default Services;\n","/**\n * Classe utilitaire\n *\n * @module Helper\n * @alias Gp.Helper\n */\nvar Helper = {\n\n    /**\n     * concatenation des parametres key/value dans les urls\n     *\n     * @method normalyzeParameters\n     * @static\n     * @param {Object} params - tableau de clef/valeur\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeParameters ({\n     *         key1:value1,\n     *         key2:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne les paramètres concaténés\n     */\n    normalyzeParameters : function (params) {\n        var myParams = null;\n\n        if (params) {\n            var tabParams = [];\n            for (var key in params) {\n                if (params.hasOwnProperty(key)) {\n                    var value = params[key];\n                    if (!value) {\n                        value = \"\";\n                    }\n                    tabParams.push(key + \"=\" + value);\n                }\n            }\n\n            myParams = tabParams.join(\"&\");\n        }\n\n        return myParams;\n    },\n\n    /**\n     * Concaténation et encodage des urls.\n     *\n     * @method normalyzeUrl\n     * @static\n     * @param {String} url - url\n     * @param {Object|String} params - tableau de clef/valeur ou string\n     * @param {Boolean} encode - true|false, false par defaut\n     *\n     * @example\n     *  Gp.Utils.Helper.normalyzeUrl (url, {\n     *         key1:value1,\n     *         key2=:value2,\n     *         key3:value3\n     *  });\n     *  // out : \"url?key1=value1&key2=value2&key3=value3\"\n     *\n     * @returns {String} retourne une url normalisée\n     */\n    normalyzeUrl : function (url, params, encode) {\n        var myUrl = url;\n\n        if (url) {\n            if (url.split(\"?\").length - 1 >= 2) {\n                // S'il y a plusieurs \"?\" dans l'URL, on garde le premier et on remplace les autres par des &\n                var firstOccuranceIndex = url.search(/\\?/) + 1;\n                myUrl = url.substring(0, firstOccuranceIndex) + url.slice(firstOccuranceIndex).replace(/\\?/g, \"&\");\n            }\n\n            var k = url.indexOf(\"?\");\n            if (k === -1) { // pas de ? et KVP\n                myUrl += \"?\";\n            }\n\n            if (k !== -1 && k !== url.length - 1) { // KVP\n                myUrl += \"&\";\n            }\n        }\n\n        if (params) {\n            if (typeof params === \"string\") {\n                params = params.replace(\"?\", \"\");\n                myUrl += params;\n            } else {\n                myUrl += this.normalyzeParameters(params);\n            }\n        }\n\n        if (encode) {\n            // FIXME bonne idée ?\n            myUrl = encodeURIComponent(myUrl);\n        }\n\n        return myUrl;\n    },\n\n    /**\n     * Indentation d'une chaine\n     *\n     * @method indent\n     * @static\n     * @param {Number} n - nombre de tabulation\n     * @param {String} msg - chaine\n     *\n     * @example\n     * Gp.Utils.Helper.indent (2, \"message à indenter\")\n     * // out\n     * // ........message à indenter\n     *\n     * @returns {String} retourne une chaine indentée\n     */\n    indent : function (n, msg) {\n        var num = n || 0;\n        return new Array(num + 1).join(\"\\t\") + msg;\n    }\n};\n\nexport default Helper;\n","import * as Log from \"loglevel\";\n\nvar LoggerByDefault = {\n    /**\n     * logger statique\n     *\n     * @static\n     * @param {String} name - nom du logger\n     * @returns {Object} retourne un logger\n     */\n    getLogger : function (name) {\n        // Substitute global constants configured at compile time\n        // cf. webpack.config.js\n        // on définit process si non défini dans l'environnement\n        // eslint-disable-next-line no-use-before-define\n        if (typeof process === \"undefined\") {\n            var process = {};\n            process.env = {\n                VERBOSE : false\n            };\n        }\n        (process.env.VERBOSE) ? Log.enableAll() : Log.disableAll();\n        var logname = name || \"default\";\n        return Log.getLogger(logname);\n    }\n};\n\nexport default LoggerByDefault;\n","/**\n * Classe de gestion des erreurs qui permer d'associer un message d'erreur à l'exception lancée.\n *\n * @example\n * MessagesResources.getMessage(\"ERROR_PARAM_MISSING\", \"x\", \"y\", \"z\")));\n * // --> output : Parameter(s) 'x - y - z' missing\n *\n * @module MessagesResources\n * @alias Gp.Utils.MessagesResources\n * @private\n */\nvar MessagesResources = {\n\n    // Paramètres\n    PARAM_MISSING : \"Parameter(s) '%var%' missing\",\n    PARAM_EMPTY : \"Parameter(s) '%var%' empty\",\n    PARAM_TYPE : \"Wrong type(s) for parameter(s) '%var%'\",\n    PARAM_FORMAT : \"Parameter(s) '%var%' not correctly formatted\",\n    PARAM_NOT_SUPPORT : \"Value(s) for parameter(s) '%var%' not supported\",\n    PARAM_NOT_SUPPORT_NODEJS : \"Value(s) for parameter(s) '%var%' not supported to NodeJS\",\n    PARAM_UNKNOWN : \"Value(s) for parameter(s) '%var%' unknown\",\n\n    // Services\n    // Requête\n    SERVICE_REQUEST_BUILD : \"An error occurred during the request building of the service\",\n    SERVICE_REQUEST_EMPTY : \"The request sent to the service is empty\",\n\n    // Réponse\n    SERVICE_RESPONSE_EXCEPTION : \"The service returned an exception : '%var%'\",\n    SERVICE_RESPONSE_EXCEPTION_2 : \"The service returned an exception\",\n    SERVICE_RESPONSE_ANALYSE : \"An error occurred while parsing the response '%var%' of the service\",\n    SERVICE_RESPONSE_ANALYSE_2 : \"An unknown error occurred while parsing the response\",\n    SERVICE_RESPONSE_EMPTY : \"The response of the service is empty\",\n    SERVICE_RESPONSE_EMPTY_2 : \"The response from the service could not be analyzed or is empty\",\n    SERVICE_RESPONSE_FORMAT : \"The format of the service response is not supported (handled format(s) : '%var%')\",\n    SERVICE_RESPONSE_FORMAT_2 : \"The format of the service response is not supported\",\n    SERVICE_RESPONSE_FORMAT_3 : \"No suggestion matching the search\",\n\n    // Classes\n    CLASS_CONSTRUCTOR : \"'%var%' constructor cannot be called as a function.\",\n\n    /**\n     * Fonction qui va retourner le message d'erreur associé à la clé donnée\n     *\n     * @method getMessage\n     * @param {String} clef - Clef de l'erreur (ex : ERROR_PARAM)\n     * @param {String[]} parametres - Paramètres/variables concernés par le message d'erreur associé à la clef donnée\n     * @return {String} message - String contenant le message de l'exception\n     */\n    getMessage : function (clef, parametres) {\n        // param de la fonction uniquement pour la documentation...\n\n        if (Object.keys(arguments).length === 0) {\n            return \"Message indefined !\";\n        }\n\n        var params = Array.prototype.slice.call(arguments);\n        var key = params.shift();\n        var args = params;\n\n        var message = this[key];\n\n        try {\n            if (Array.isArray(args) && args.length > 0) {\n                message = message.replace(\"%var%\", args.join(\" - \"));\n            } else {\n                message = message.replace(\"%var%\", \"%var% (not specified)\");\n            }\n        } catch (e) {\n            // error de string.replace()\n\n        }\n\n        return message;\n    }\n};\n\nexport default MessagesResources;\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    var _loggersByName = {};\n    var defaultLogger = null;\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods() {\n        /*jshint validthis:true */\n        var level = this.getLevel();\n\n        // Replace the actual methods.\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, this.name);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n\n        // Return any important warnings.\n        if (typeof console === undefinedType && level < this.levels.SILENT) {\n            return \"No console available for logging\";\n        }\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, _level, _loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, factory) {\n      // Private instance variables.\n      var self = this;\n      /**\n       * The level inherited from a parent logger (or a global default). We\n       * cache this here rather than delegating to the parent so that it stays\n       * in sync with the actual logging methods that we have installed (the\n       * parent could change levels but we might not have rebuilt the loggers\n       * in this child yet).\n       * @type {number}\n       */\n      var inheritedLevel;\n      /**\n       * The default level for this logger, if any. If set, this overrides\n       * `inheritedLevel`.\n       * @type {number|null}\n       */\n      var defaultLevel;\n      /**\n       * A user-specific level for this logger. If set, this overrides\n       * `defaultLevel`.\n       * @type {number|null}\n       */\n      var userLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var cookieName = encodeURIComponent(storageKey);\n                  var location = cookie.indexOf(cookieName + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(\n                          cookie.slice(location + cookieName.length + 1)\n                      )[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      function normalizeLevel(input) {\n          var level = input;\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              return level;\n          } else {\n              throw new TypeError(\"log.setLevel() called with invalid level: \" + input);\n          }\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          if (userLevel != null) {\n            return userLevel;\n          } else if (defaultLevel != null) {\n            return defaultLevel;\n          } else {\n            return inheritedLevel;\n          }\n      };\n\n      self.setLevel = function (level, persist) {\n          userLevel = normalizeLevel(level);\n          if (persist !== false) {  // defaults to true\n              persistLevelIfPossible(userLevel);\n          }\n\n          // NOTE: in v2, this should call rebuild(), which updates children.\n          return replaceLoggingMethods.call(self);\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = normalizeLevel(level);\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          userLevel = null;\n          clearPersistedLevel();\n          replaceLoggingMethods.call(self);\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      self.rebuild = function () {\n          if (defaultLogger !== self) {\n              inheritedLevel = normalizeLevel(defaultLogger.getLevel());\n          }\n          replaceLoggingMethods.call(self);\n\n          if (defaultLogger === self) {\n              for (var childName in _loggersByName) {\n                _loggersByName[childName].rebuild();\n              }\n          }\n      };\n\n      // Initialize all the internal levels.\n      inheritedLevel = normalizeLevel(\n          defaultLogger ? defaultLogger.getLevel() : \"WARN\"\n      );\n      var initialLevel = getPersistedLevel();\n      if (initialLevel != null) {\n          userLevel = normalizeLevel(initialLevel);\n      }\n      replaceLoggingMethods.call(self);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    defaultLogger = new Logger();\n\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n            throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n            logger = _loggersByName[name] = new Logger(\n                name,\n                defaultLogger.methodFactory\n            );\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","\"use strict\";\n\n// ref: https://github.com/tc39/proposal-global\nvar getGlobal = function () {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof self !== 'undefined') { return self; }\n\tif (typeof window !== 'undefined') { return window; }\n\tif (typeof global !== 'undefined') { return global; }\n\tthrow new Error('unable to locate global object');\n}\n\nvar globalObject = getGlobal();\n\nmodule.exports = exports = globalObject.fetch;\n\n// Needed for TypeScript and Webpack.\nif (globalObject.fetch) {\n\texports.default = globalObject.fetch.bind(globalObject);\n}\n\nexports.Headers = globalObject.Headers;\nexports.Request = globalObject.Request;\nexports.Response = globalObject.Response;\n","module.exports = ol.extent;","module.exports = ol.layer.Tile;","module.exports = ol.proj;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = ol.control.Control;","import Control from \"ol/control/Control\";\n\nvar ControlExtended = class ControlExtended extends Control {\n\n    constructor (options) {\n        super(options);\n    }\n\n    setPosition (pos) {\n        if (this.getMap()) {\n            var instance = new PositionFactory(this);\n            instance.set(pos);\n        }\n    }\n\n    updatePosition (pos) {\n        if (this.getMap()) {\n            var instance = new PositionFactory(this);\n            instance.update(pos);\n        }\n    }\n\n};\n\nexport default ControlExtended;\n\n/**\n * gestion des anchors\n */\nconst ANCHORS = [\n    \"top-left\",\n    \"top-right\",\n    \"bottom-left\",\n    \"bottom-right\"\n];\n\n/**\n * Position\n * @private\n */\nclass PositionFactory {\n\n    /**\n     * constructor\n     * @param {*} caller - ...\n     */\n    constructor (caller) {\n        this.caller = caller;\n        this.container = null;\n\n        this.container = null;\n\n        this.#createContainer(\"top-left\");\n        this.#createContainer(\"top-right\");\n        this.#createContainer(\"bottom-left\");\n        this.#createContainer(\"bottom-right\");\n\n        return this;\n    }\n\n    /**\n     * ...\n     * @param {*} name  - ...\n     * @returns {Boolean} ...\n     */\n    #existContainer (name) {\n        var div = this.container.children[\"position-container-\" + name];\n        if (div) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * ...\n     * @param {*} name - ...\n     * @private\n     */\n    #createContainer (name) {\n        this.container = this.caller.getMap().getOverlayContainerStopEvent();\n\n        if (this.#existContainer(name)) {\n            return;\n        }\n        // INFO\n        // positionner les classes position-container-[left|right|top|bottom]\n        // ex. { position:relative; height:50px; width:100%; }\n        var div = document.createElement(\"div\");\n        div.id = \"position-container-\" + name;\n        div.className = \"position position-container-\" + name ;\n\n        this.container.appendChild(div);\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @param {*} update - ...\n     * @todo fonctionnement à tester !\n     */\n    #setAnchor (pos, update) {\n        var self = this;\n        const position = (pos) => {\n            var element = self.container.children[\"position-container-\" + pos];\n            return element.children.length;\n        };\n        const sizeW = (pos) => {\n            var element = self.container.children[\"position-container-\" + pos];\n            var width = element.offsetWidth;\n            return width;\n        };\n        const sizeH = (pos) => {\n            var element = self.container.children[\"position-container-\" + pos];\n            var height = element.offsetHeight;\n            if (update) {\n                if (pos.includes(\"top\")) {\n                    height = 0;\n                }\n                // on recalcule la position en hauteur\n                for (let index = 0; index < element.children.length; index++) {\n                    const id = element.children[index].id;\n                    if (id === self.caller.element.id) {\n                        height = (pos.includes(\"bottom\")) ? height - self.caller.element.offsetHeight : height * (-1);\n                        break;\n                    }\n                    height -= element.children[index].offsetHeight;\n                }\n            }\n            return height;\n        };\n        const clear = (element) => {\n            element.style.top = \"unset\";\n            element.style.bottom = \"unset\";\n            element.style.left = \"unset\";\n            element.style.right = \"unset\";\n        };\n\n        // on supprime le style de positionnement (top, left...)\n        // car on souhaite une nouvelle position\n        clear(this.caller.element);\n        this.caller.element.style.position = \"unset\"; // div.GPwidget\n\n        // on recherche les panneaux (panel) :\n        // * panel de formulaire\n        // * panel de resultats (?)\n        var panels = Array.from(this.caller.element.getElementsByClassName(\"GPpanel\"));\n        if (panels.length === 0) {\n            return;\n        }\n        var offset = 0;\n        panels.forEach((panel) => {\n            // INFO\n            // on va eviter de modifier les panneaux de resultats\n            // car leurs positions sont souvent relative aux panneaux\n            // des formulaires\n            if (panel.nodeName.toLowerCase() !== \"dialog\") {\n                return;\n            }\n            clear(panel);\n            // on modifie le positionnement du menu (dialog ou div : panel)\n            // en fonction du bouton\n            // ex. bouton : bottom-left, menu : bottom:0px; left:50px\n            switch (pos.toLowerCase()) {\n                case \"top-left\":\n                    panel.style.top = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.left = sizeW(pos) + offset + \"px\";\n                    break;\n                case \"bottom-left\":\n                    panel.style.bottom = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.left = sizeW(pos) + offset + \"px\";\n                    break;\n                case \"top-right\":\n                    panel.style.top = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.right = sizeW(pos) + offset + \"px\";\n                    break;\n                case \"bottom-right\":\n                    panel.style.bottom = position(pos) ? sizeH(pos) + \"px\" : \"0px\";\n                    panel.style.right = sizeW(pos) + offset + \"px\";\n                    break;\n                default:\n                    break;\n            }\n            offset += panel.offsetWidth;\n        });\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @public\n     */\n    set (pos) {\n        if (!ANCHORS.includes(pos.toLowerCase())) {\n            return;\n        }\n        // positionnement de l'element\n        this.#setAnchor(pos, false);\n\n        if (pos.includes(\"bottom\")) {\n            this.container.children[\"position-container-\" + pos].prepend(this.caller.element);\n        } else {\n            this.container.children[\"position-container-\" + pos].appendChild(this.caller.element);\n        }\n    }\n\n    /**\n     * ...\n     * @param {*} pos - ...\n     * @public\n     */\n    update (pos) {\n        if (!ANCHORS.includes(pos.toLowerCase())) {\n            return;\n        }\n        // positionnement de l'element\n        // mais, il faut prendre en compte la position !\n        this.#setAnchor(pos, true);\n    }\n\n};","const __WEBPACK_NAMESPACE_OBJECT__ = ol.Overlay;","var Marker = {\n    lightOrange : \"data:image/png;base64,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IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC\",\n    darkOrange : \"data:image/png;base64,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czpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC\",\n    red : \"data:image/png;base64,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293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==\",\n    turquoiseBlue : \"data:image/png;base64,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/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==\",\n    defaultOffset : [-25.5, -32]\n};\n\nexport default Marker;\n","const __WEBPACK_NAMESPACE_OBJECT__ = ol.interaction;","// import OpenLayers\nimport Control from \"ol/control/Control\";\nimport {\n    Select as SelectInteraction,\n    Modify as ModifyInteraction,\n    Draw as DrawInteraction\n} from \"ol/interaction\";\n// import local\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Utils from \"../../Utils/Helper\";\n\nvar logger = Logger.getLogger(\"interactions\");\n\n/**\n * @private\n * @description\n * Pourquoi et comment l'utiliser ?\n * Cette classe permet de gérer les interactions entre chaque extension.\n * Une extension qui active une interaction avec la carte, doit desactiver\n * les autres interactions issues d'autre extensions.\n * La désactivation d'une interaction s'accompagne d'actions telles que\n * le nettoyage des dessins, l'état du composant graphique, ...\n *\n * Ex\n * // desactive toutes les interactions avec l'opération par defaut : clean\n * Interactions.unset(map);\n * // desactive les interactions sauf celles de Drawing. On execute des\n * // operations particulieres : status, collapse et message\n * Interactions.unset(map, {\n *    current : \"Drawing\",\n *    status : false,\n *    collapse : true,\n *    messsage : [\"WARNING\", \"Ceci est un avertissement !\"]\n * });\n *\n * Dans le code de l'extension, il faut placer des informations dans l'interaction :\n * interaction.setProperties({\n *     name : \"Drawing\",\n *     source : this\n * });\n */\nvar Interactions = {\n\n    /**\n     * Liste des extensions qui utilisent le mécanisme des interactions\n     */\n    _extensions : [\n        \"Measures\",\n        \"ElevationPath\",\n        \"Drawing\"\n    ],\n\n    /**\n     * Options par defaut\n     * - current : ex. \"Drawing\"\n     *       c'est l'extension qui demande la desactivation des autres interactions.\n     *       Par defaut, toutes les interactions sont desactivées.\n     * - clean :\n     *       c'est la suppression des interactions, des dessins de la carte,\n     *       ainsi que la reinitialisation de l'état graphique.\n     *       Les extensions doivent implementer la méthode 'clean()'.\n     *       Par defaut, tous les dessins sont supprimés\n     */\n    _options : {\n        current : null,\n        clean : null\n    },\n\n    /**\n     * Permet de desactive les interactions (Draw) de la carte pour les extensions,\n     * sauf l'interaction courrante (si elle est renseignée avec l'option 'current').\n     * Il est possible d'ajouter des fonctionnalités via les options.\n     * Par defaut, l'option 'clean' est renseignée...\n     *\n     * @param {Object} map - the map\n     * @param {Object} options - options\n     */\n    unset : function (map, options) {\n        logger.trace(\"unset()\");\n\n        var opts = {};\n        Utils.mergeParams(opts, this._options);\n        Utils.mergeParams(opts, options);\n\n        var interactions = map.getInteractions().getArray();\n        for (var i = 0; i < interactions.length; i++) {\n            if (interactions[i].getActive() &&\n                (interactions[i] instanceof DrawInteraction ||\n                    interactions[i] instanceof SelectInteraction ||\n                    interactions[i] instanceof ModifyInteraction)) {\n                var prop = interactions[i].getProperties();\n                var name = prop.name;\n                if (typeof name !== \"undefined\" && this._extensions.indexOf(name) > -1) {\n                    // doit on desactiver l'interaction courrante ?\n                    if (opts.current && opts.current === name) {\n                        continue;\n                    }\n                    interactions[i].setActive(false);\n                    // instance de l'extension\n                    var source = prop.source;\n                    if (typeof source !== \"undefined\" && source instanceof Control) {\n                        // opérations sur le composant graphique\n                        for (var action in opts) {\n                            if (opts.hasOwnProperty(action)) {\n                                if (action === \"current\") {\n                                    continue;\n                                }\n                                if (typeof source[action] === \"function\") {\n                                    var args = Array.isArray(opts[action]) ? opts[action] : [opts[action]];\n                                    source[action].apply(source, args);\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    interactions[i].setActive(false);\n                }\n            }\n        }\n    }\n};\n\nexport default Interactions;\n","/**\n * @module SelectorID\n * @alias module:~utils/SelectorID\n * @private\n * @description\n * formalisme d'un tag ID :\n * -> NAME(_ORDER)-1460636385836\n *\n * @example\n * Ex.\n *   GProutePoints-1460636385836\n *   GProutePoint_10-1460636385836\n */\nvar SelectorID = {\n\n    /**\n     * Construction d'un identifiant statique basé sur le timestamp,\n     * et qui s'incremente de +1 à chaque appel\n     * @function generate\n     */\n    generate : (function () {\n        var timestamp = Math.floor(Date.now());\n        return function () {\n            return timestamp++;\n        };\n    })(),\n\n    /**\n     * nom du tag\n     * @function name\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    name : function (id) {\n        var name = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i === -1) {\n            name = id;\n        } else {\n            name = id.substring(0, i);\n        }\n\n        return name;\n    },\n\n    /**\n     * numero d'identifiant du tag\n     *\n     * @function index\n     * @param {String} id - the id\n     * @returns {String} index\n     */\n    index : function (id) {\n        var index = null;\n\n        var name = this.name(id);\n        // if (name !== id) {\n        var i = name.lastIndexOf(\"_\");\n        if (i !== -1) {\n            index = name.substring(i + 1);\n        }\n        // }\n\n        return index;\n    },\n\n    /**\n     * uuid du tag\n     *\n     * @function uuid\n     * @param {String} id - the id\n     * @returns {String} uuid\n     */\n    uuid : function (id) {\n        var uuid = null;\n\n        var i = id.lastIndexOf(\"-\");\n        if (i !== -1) {\n            uuid = parseInt(id.substring(i + 1), 10);\n        }\n\n        return uuid;\n    }\n\n};\n\nexport default SelectorID;\n","/**\n* @module MathUtils\n* @alias module:~utils/MathUtils\n* @description\n* ...\n*\n* @example\n* modulo();\n* decimalToDMS();\n* coordinateTo();\n* toInteger();\n* isInteger();\n* toFloat();\n*/\nvar MathUtils = {\n    /**\n     * Reste de la division euclidienne\n     * \n     * @function modulo\n     * @param {Number} a - divisor\n     * @param {Number} b - quotient\n     * @returns {Number} Modulo\n     */\n    modulo : function (a, b) {\n        var r = a % b;\n        return r * b < 0 ? r + b : r;\n    },\n\n    /**\n     * Transform degrees, minutes, seconds form decimal degrees -\n     * Largely inspired by the private function degreesToStringHDMS from ol/coordinate.js\n     *\n     * @function decimalToDMS\n     * @param {Number} degrees - decimal degrees\n     * @param {Array} hemispheres - \"NS\" ou \"EO\"\n     * @param {Number} numDigits - number of digits for seconds\n     * @returns {Object} DMS coordinate\n     */\n    decimalToDMS : function (degrees, hemispheres, numDigits) {\n        var normalizedDegrees = this.modulo(degrees + 180, 360) - 180;\n        var x = Math.abs(3600 * normalizedDegrees);\n        var dflPrecision = numDigits || 0;\n        var precision = Math.pow(10, dflPrecision);\n\n        var deg = Math.floor(x / 3600);\n        var min = Math.floor((x - deg * 3600) / 60);\n        var sec = x - (deg * 3600) - (min * 60);\n        sec = Math.ceil(sec * precision) / precision;\n\n        if (sec >= 60) {\n            sec = 0;\n            min += 1;\n        }\n\n        if (min >= 60) {\n            min = 0;\n            deg += 1;\n        }\n\n        var direction = hemispheres.charAt(normalizedDegrees < 0 ? 1 : 0);\n        return {\n            d : deg,\n            m : min,\n            s : sec,\n            direction : direction\n        };\n    },\n\n    /**\n     * Transform decimal degrees form degrees, minutes, seconds\n     * \n     * @function dmsToDecimal\n     * @param {*} degrees - degrees\n     * @param {*} minutes - minutes\n     * @param {*} seconds - seconds\n     * @param {*} hemispheres - \"NS\" ou \"EO\"\n     * @returns {Number} decimal coordinate\n     */\n    dmsToDecimal (degrees, minutes, seconds, hemispheres) {\n        var dd = degrees + minutes/60 + seconds/(60*60);\n    \n        if (hemispheres == \"S\" || hemispheres == \"O\") {\n            dd = dd * -1;\n        }\n        return dd;\n    },\n    /**\n     * ol coordinate to decimal\n     * \n     * @function coordinateToDecimal\n     * @param {*} olCoordinate - see ol/coordinate.js\n     * @returns {Object} - {lat, lng, unit:°}\n     */\n    coordinateToDecimal (olCoordinate) {\n        var coordinate = {};\n        coordinate.lat = olCoordinate[1].toFixed(6);\n        coordinate.lng = olCoordinate[0].toFixed(6);\n        coordinate.unit = \"°\";\n        return coordinate;\n    },\n\n    /**\n     * ol coordinate to dms\n     * \n     * @function coordinateToDMS\n     * @param {*} olCoordinate - see ol/coordinate.js\n     * @returns {Object} - {lat, lng, unit:dms}\n     */\n    coordinateToDMS (olCoordinate) {\n        return {\n            lng : MathUtils.decimalToDMS(olCoordinate[0], \"EO\", 2),\n            lat : MathUtils.decimalToDMS(olCoordinate[1], \"NS\", 2),\n            unit : \"DMS\"\n        };\n    },\n\n    /**\n     * ol coordinate to rad\n     * \n     * @function coordinateToRad\n     * @param {*} olCoordinate - see ol/coordinate.js\n     * @returns {Object} - {lat, lng, unit:rad}\n     */\n    coordinateToRad (olCoordinate) {\n        var coordinate = {};\n        var d = 0.01745329251994329577;\n        coordinate.lng = olCoordinate[0] * d;\n        coordinate.lng = coordinate.lng.toFixed(8);\n        coordinate.lat = olCoordinate[1] * d;\n        coordinate.lat = coordinate.lat.toFixed(8);\n        coordinate.unit = \"rad\";\n        return coordinate;\n    },\n\n    /**\n     * ol coordinate to gon\n     * \n     * @function coordinateToGon\n     * @param {*} olCoordinate - see ol/coordinate.js\n     * @returns {Object} - {lat, lng, unit:gon}\n     */\n    coordinateToGon (olCoordinate) {\n        var coordinate = {};\n        var d = 1.11111111111111111111;\n        coordinate.lng = olCoordinate[0] * d;\n        coordinate.lng = coordinate.lng.toFixed(8);\n        coordinate.lat = olCoordinate[1] * d;\n        coordinate.lat = coordinate.lat.toFixed(8);\n        coordinate.unit = \"gon\";\n        return coordinate;\n    },\n\n    /**\n     * ol coordinate to meter\n     * \n     * @function coordinateToMeter\n     * @param {*} olCoordinate - see ol/coordinate.js\n     * @returns {Object} - {x, y, unit:m}\n     */\n    coordinateToMeter (olCoordinate) {\n        // on recoit toujours des coordonnées metriques\n        var coordinate = {};\n        coordinate.x = olCoordinate[0].toFixed(2);\n        coordinate.y = olCoordinate[1].toFixed(2);\n        coordinate.unit = \"m\";\n        return coordinate;\n    },\n\n    /**\n     * ol coordinate to kilometer\n     * \n     * @function coordinateToKMeter\n     * @param {*} olCoordinate - see ol/coordinate.js\n     * @returns {Object} - {x, lyng, unit:km}\n     */\n    coordinateToKMeter (olCoordinate) {\n        // on recoit toujours des coordonnées metriques\n        var coordinate = {};\n        coordinate.x = (olCoordinate[0] / 1000).toFixed(2);\n        coordinate.y = (olCoordinate[1] / 1000).toFixed(2);\n        coordinate.unit = \"km\";\n        return coordinate;\n    },\n\n    /**\n     * Converts string to Integer\n     *\n     * @function toInteger\n     * @param {String} s - string number\n     * @param {Numeric} base - between 2 and 36\n     * @returns {null|Numeric} result\n     */\n    toInteger : function (s, base) {\n        var _base = base || 10;\n        var n = parseInt(s, _base);\n        if (!isNaN(n) && isFinite(n)) {\n            return n;\n        }\n        return null;\n    },\n\n    /**\n     * check if s represents an integer\n     *\n     * @function isInteger\n     * @param {String} s - string number\n     * @returns {Boolean} is integer\n     */\n    isInteger : function (s) {\n        if (isNaN(s)) {\n            return false;\n        }\n\n        var v = parseFloat(s);\n        return ((v | 0) === v);\n    },\n\n    /**\n     * Converts s to float\n     *\n     * @function toFloat\n     * @param {String} s - string number\n     * @returns {null|Numeric} result\n     */\n    toFloat : function (s) {\n        var n = parseFloat(s);\n        if (!isNaN(n) && isFinite(n)) {\n            return n;\n        }\n        return null;\n    }\n};\n\nexport default MathUtils;\n","/**\n * @module SearchEngineUtils\n * @alias module:~utils/SearchEngineUtils\n * @private\n * @description\n * ...\n *\n * @example\n * advancedSearchFiltersByDefault();\n * zoomToResultsByDefault();\n */\nvar SearchEngineUtils = {\n    /**\n     * Advanced Search Filters by default\n     * @function advancedSearchFiltersByDefault\n     */\n    advancedSearchFiltersByDefault : {\n        PositionOfInterest : [\n            {\n                name : \"category\",\n                title : \"Type\",\n                value : [\n                    \"cimetière\",\n                    \"aérodrome\",\n                    \"réservoir\",\n                    \"administratif\",\n                    \"construction linéaire\",\n                    \"construction ponctuelle\",\n                    \"construction surfacique\",\n                    \"cours d'eau\",\n                    \"détail hydrographique\",\n                    \"détail orographique\",\n                    \"équipement de transport\",\n                    \"plan d'eau\",\n                    \"poste de transformation\",\n                    \"terrain de sport\",\n                    \"transport par câble\",\n                    \"zone d'activité ou d'intérêt\",\n                    \"zone d'habitation\",\n                    \"lieu-dit non habité\"\n                ]\n            }, {\n                name : \"postcode\",\n                title : \"Code postal\"\n            }, {\n                name : \"citycode\",\n                title : \"Code INSEE\"\n            }\n        ],\n        StreetAddress : [\n            {\n                name : \"city\",\n                title : \"Ville\"\n            }, {\n                name : \"postcode\",\n                title : \"Code postal\"\n            }, {\n                name : \"citycode\",\n                title : \"Code INSEE\"\n            }\n        ],\n        CadastralParcel : [\n            {\n                name : \"departmentcode\",\n                title : \"Code département (INSEE)\",\n                description : \"Code INSEE du département (ex: 01, 94)\"\n            }, {\n                name : \"municipalitycode\",\n                title : \"Code commune (INSEE)\",\n                description : \"Code INSEE de la commune : 3 chiffres (ex: 067)\"\n            }, {\n                name : \"oldmunicipalitycode\",\n                title : \"Commune absorbée\",\n                description : \"Commune absorbée : 3 chiffres (ex: 000, 001)\"\n            }, {\n                name : \"districtcode\",\n                title : \"Arrondissement\",\n                description : \"Arrondissement : 3 chiffres (ex: 004, 012)\"\n            }, {\n                name : \"section\",\n                title : \"Section\",\n                description : \"Section Cadastrale : 2 caractères (chiffre et/ou lettre)\"\n            }, {\n                name : \"number\",\n                title : \"Numéro\",\n                description : \"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)\"\n            }, {\n                name : \"sheet\",\n                title : \"Feuille\",\n                description : \"Numéro de la feuille cadastrale\"\n            }\n        ]\n    },\n\n    /**\n     * Provides default zoom based on results.\n     *\n     * @function zoomToResultsByDefault\n     * @param {Object} info - location information\n     * @returns {Integer} zoom level\n     */\n    zoomToResultsByDefault : function (info) {\n        // FIXME\n        // la classification du geocodage est differente de l'importance de l'autocompletion !\n\n        var zoom = 15;\n\n        var service = info.service;\n        var fields = info.fields;\n        var type = info.type;\n\n        var importance = {\n            1 : 11,\n            2 : 12,\n            3 : 13,\n            4 : 14,\n            5 : 15,\n            6 : 16,\n            7 : 17,\n            8 : 17\n        };\n\n        // AutoCompletion POI\n        if (service === \"SuggestedLocation\") {\n            if (type === \"PositionOfInterest\") {\n                zoom = importance[fields.classification];\n            }\n        }\n\n        // Geocodage POI\n        if (service === \"GeocodedLocation\") {\n            if (type === \"PositionOfInterest\") {\n                zoom = importance[fields.importance] || 14; // au cas où la recherche est en freeform !\n            }\n        }\n\n        if (type === \"StreetAddress\") {\n            zoom = 17;\n        }\n\n        if (type === \"CadastralParcel\") {\n            zoom = 17;\n        }\n\n        return zoom;\n    }\n};\n\nexport default SearchEngineUtils;\n","/**\n * @module GeocodeUtils\n * @alias module:~utils/GeocodeUtils\n * @private\n * @description\n * ...\n *\n * @example\n * getGeocodedLocationFreeform();\n * getSuggestedLocationFreeform();\n */\nvar GeocodeUtils = {\n    /**\n     * Return the freeform of a structured geocoded item\n     *\n     * @param {Object} geocodedLocation - Geocoded location\n     * @returns {String} freeform string\n     */\n    getGeocodedLocationFreeform : function (geocodedLocation) {\n        var attributes = geocodedLocation.placeAttributes;\n        if (attributes.label) {\n            return attributes.label;\n        } else if (geocodedLocation.type === \"PositionOfInterest\") {\n            var resultToReturn = attributes.toponym;\n            if (attributes.category && Array.isArray(attributes.category) && attributes.category.length >= 2 && attributes.category[0] === \"administratif\") {\n                // gestion particulière des territoires administratifs\n                resultToReturn = resultToReturn + \", \" + attributes.category[1];\n            } else {\n                // gestion standard des POI non adminsitratifs\n                if (attributes.postcode) {\n                    resultToReturn = resultToReturn + \", \" + attributes.postcode[0];\n                    if (attributes.city) {\n                        resultToReturn = resultToReturn + \" \" + attributes.city[0];\n                    }\n                }\n            }\n            return resultToReturn;\n        } else if (geocodedLocation.type === \"StreetAddress\") {\n            return (attributes.housenumber ? attributes.housenumber + \" \" : \"\") + attributes.street + \" \" + (attributes.postcode ? attributes.postcode + \", \" : \"\") + attributes.city;\n        } else if (geocodedLocation.type === \"CadastralParcel\") {\n            return attributes.id;\n        } else {\n            return \"...\";\n        }\n    },\n\n    /**\n     * Return the freeform of a structured suggested item\n     *\n     * @param {Object} suggestedLocation - Suggested location\n     * @returns {String} freeform string\n     */\n    getSuggestedLocationFreeform : function (suggestedLocation) {\n        if (suggestedLocation.fullText) {\n            return suggestedLocation.fullText;\n        } else {\n            var values = [];\n            values.push(suggestedLocation.street || \"\");\n            values.push(suggestedLocation.postalCode || \"\");\n            values.push(suggestedLocation.commune || \"\");\n\n            if (suggestedLocation.type === \"PositionOfInterest\") {\n                values.push(suggestedLocation.poi || \"\");\n                values.push(suggestedLocation.kind || \"\");\n            }\n            return values.join(\" - \");\n        }\n    }\n};\n\nexport default GeocodeUtils;\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_GRIDSHIFT = 3;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SRS_WGS84_SEMIMAJOR = 6378137.0;  // only used in grid shift transforms\nexport var SRS_WGS84_SEMIMINOR = 6356752.314;  // only used in grid shift transforms\nexport var SRS_WGS84_ESQUARED = 0.0066943799901413165; // only used in grid shift transforms\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    gamma: function(v) {\n      self.rectified_grid_angle = parseFloat(v);\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r: function(v) {\n      self.a = self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    },\n    approx: function() {\n      self.approx = true;\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84_]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (key === 'AXIS') {\n    if (!(key in obj)) {\n      obj[key] = [];\n    }\n    obj[key].push(v);\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.AXIS) {\n    var axisOrder = '';\n    for (var i = 0, ii = wkt.AXIS.length; i < ii; ++i) {\n      var axis = [wkt.AXIS[i][0].toLowerCase(), wkt.AXIS[i][1].toLowerCase()];\n      if (axis[0].indexOf('north') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'north')) {\n        axisOrder += 'n';\n      } else if (axis[0].indexOf('south') !== -1 || ((axis[0] === 'y' || axis[0] === 'lat') && axis[1] === 'south')) {\n        axisOrder += 's';\n      } else if (axis[0].indexOf('east') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'east')) {\n        axisOrder += 'e';\n      } else if (axis[0].indexOf('west') !== -1 || ((axis[0] === 'x' || axis[0] === 'lon') && axis[1] === 'west')) {\n        axisOrder += 'w';\n      }\n    }\n    if (axisOrder.length === 2) {\n      axisOrder += 'u';\n    }\n    if (axisOrder.length === 3) {\n      wkt.axis = axisOrder;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984' || wkt.datumCode === 'world_geodetic_system_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_1', 'Latitude of 1st standard parallel'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['standard_parallel_2', 'Latitude of 2nd standard parallel'],\n    ['false_easting', 'False_Easting'],\n    ['false_easting', 'False easting'],\n    ['false-easting', 'Easting at false origin'],\n    ['false_northing', 'False_Northing'],\n    ['false_northing', 'False northing'],\n    ['false_northing', 'Northing at false origin'],\n    ['central_meridian', 'Central_Meridian'],\n    ['central_meridian', 'Longitude of natural origin'],\n    ['central_meridian', 'Longitude of false origin'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['latitude_of_origin', 'Latitude of natural origin'],\n    ['latitude_of_origin', 'Latitude of false origin'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  } else if (!wkt.lat_ts && wkt.lat0 && wkt.projName === 'Polar_Stereographic') {\n    wkt.lat_ts = wkt.lat0;\n    wkt.lat0 = d2r(wkt.lat0 > 0 ? 90 : -90);\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\nvar codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk80ign = {\n  a: 6378249.2,\n  b: 6356515,\n  rf: 293.4660213,\n  ellipseName: \"Clarke 1880 (IGN)\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"598.1,73.7,418.2,0.202,0.045,-2.455,6.7\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.militargeographische_institut = {\n  towgs84: \"577.326,90.129,463.919,5.137,1.474,5.297,2.4232\",\n  ellipse: \"bessel\",\n  datumName: \"Militar-Geographische Institut\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2, nadgrids) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  if (nadgrids) {\n    out.datum_type = PJD_GRIDSHIFT;\n    out.grids = nadgrids;\n  }\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","/**\n * Resources for details of NTv2 file formats:\n * - https://web.archive.org/web/20140127204822if_/http://www.mgs.gov.on.ca:80/stdprodconsume/groups/content/@mgs/@iandit/documents/resourcelist/stel02_047447.pdf\n * - http://mimaka.com/help/gs/html/004_NTV2%20Data%20Format.htm\n */\n\nvar loadedNadgrids = {};\n\n/**\n * Load a binary NTv2 file (.gsb) to a key that can be used in a proj string like +nadgrids=<key>. Pass the NTv2 file\n * as an ArrayBuffer.\n */\nexport default function nadgrid(key, data) {\n  var view = new DataView(data);\n  var isLittleEndian = detectLittleEndian(view);\n  var header = readHeader(view, isLittleEndian);\n  var subgrids = readSubgrids(view, header, isLittleEndian);\n  var nadgrid = {header: header, subgrids: subgrids};\n  loadedNadgrids[key] = nadgrid;\n  return nadgrid;\n}\n\n/**\n * Given a proj4 value for nadgrids, return an array of loaded grids\n */\nexport function getNadgrids(nadgrids) {\n  // Format details: http://proj.maptools.org/gen_parms.html\n  if (nadgrids === undefined) { return null; }\n  var grids = nadgrids.split(',');\n  return grids.map(parseNadgridString);\n}\n\nfunction parseNadgridString(value) {\n  if (value.length === 0) {\n    return null;\n  }\n  var optional = value[0] === '@';\n  if (optional) {\n    value = value.slice(1);\n  }\n  if (value === 'null') {\n    return {name: 'null', mandatory: !optional, grid: null, isNull: true};\n  }\n  return {\n    name: value,\n    mandatory: !optional,\n    grid: loadedNadgrids[value] || null,\n    isNull: false\n  };\n}\n\nfunction secondsToRadians(seconds) {\n  return (seconds / 3600) * Math.PI / 180;\n}\n\nfunction detectLittleEndian(view) {\n  var nFields = view.getInt32(8, false);\n  if (nFields === 11) {\n    return false;\n  }\n  nFields = view.getInt32(8, true);\n  if (nFields !== 11) {\n    console.warn('Failed to detect nadgrid endian-ness, defaulting to little-endian');\n  }\n  return true;\n}\n\nfunction readHeader(view, isLittleEndian) {\n  return {\n    nFields: view.getInt32(8, isLittleEndian),\n    nSubgridFields: view.getInt32(24, isLittleEndian),\n    nSubgrids: view.getInt32(40, isLittleEndian),\n    shiftType: decodeString(view, 56, 56 + 8).trim(),\n    fromSemiMajorAxis: view.getFloat64(120, isLittleEndian),\n    fromSemiMinorAxis: view.getFloat64(136, isLittleEndian),\n    toSemiMajorAxis: view.getFloat64(152, isLittleEndian),\n    toSemiMinorAxis: view.getFloat64(168, isLittleEndian),\n  };\n}\n\nfunction decodeString(view, start, end) {\n  return String.fromCharCode.apply(null, new Uint8Array(view.buffer.slice(start, end)));\n}\n\nfunction readSubgrids(view, header, isLittleEndian) {\n  var gridOffset = 176;\n  var grids = [];\n  for (var i = 0; i < header.nSubgrids; i++) {\n    var subHeader = readGridHeader(view, gridOffset, isLittleEndian);\n    var nodes = readGridNodes(view, gridOffset, subHeader, isLittleEndian);\n    var lngColumnCount = Math.round(\n      1 + (subHeader.upperLongitude - subHeader.lowerLongitude) / subHeader.longitudeInterval);\n    var latColumnCount = Math.round(\n      1 + (subHeader.upperLatitude - subHeader.lowerLatitude) / subHeader.latitudeInterval);\n    // Proj4 operates on radians whereas the coordinates are in seconds in the grid\n    grids.push({\n      ll: [secondsToRadians(subHeader.lowerLongitude), secondsToRadians(subHeader.lowerLatitude)],\n      del: [secondsToRadians(subHeader.longitudeInterval), secondsToRadians(subHeader.latitudeInterval)],\n      lim: [lngColumnCount, latColumnCount],\n      count: subHeader.gridNodeCount,\n      cvs: mapNodes(nodes)\n    });\n    gridOffset += 176 + subHeader.gridNodeCount * 16;\n  }\n  return grids;\n}\n\nfunction mapNodes(nodes) {\n  return nodes.map(function (r) {return [secondsToRadians(r.longitudeShift), secondsToRadians(r.latitudeShift)];});\n}\n\nfunction readGridHeader(view, offset, isLittleEndian) {\n  return {\n    name: decodeString(view, offset + 8, offset + 16).trim(),\n    parent: decodeString(view, offset + 24, offset + 24 + 8).trim(),\n    lowerLatitude: view.getFloat64(offset + 72, isLittleEndian),\n    upperLatitude: view.getFloat64(offset + 88, isLittleEndian),\n    lowerLongitude: view.getFloat64(offset + 104, isLittleEndian),\n    upperLongitude: view.getFloat64(offset + 120, isLittleEndian),\n    latitudeInterval: view.getFloat64(offset + 136, isLittleEndian),\n    longitudeInterval: view.getFloat64(offset + 152, isLittleEndian),\n    gridNodeCount: view.getInt32(offset + 168, isLittleEndian)\n  };\n}\n\nfunction readGridNodes(view, offset, gridHeader, isLittleEndian) {\n  var nodesOffset = offset + 176;\n  var gridRecordLength = 16;\n  var gridShiftRecords = [];\n  for (var i = 0; i < gridHeader.gridNodeCount; i++) {\n    var record = {\n      latitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength, isLittleEndian),\n      longitudeShift: view.getFloat32(nodesOffset + i * gridRecordLength + 4, isLittleEndian),\n      latitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 8, isLittleEndian),\n      longitudeAccuracy: view.getFloat32(nodesOffset + i * gridRecordLength + 12, isLittleEndian),\n    };\n    gridShiftRecords.push(record);\n  }\n  return gridShiftRecords;\n}\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\nimport {getNadgrids} from \"./nadgrid\";\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback('Could not parse to valid json: ' + srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback('Could not get projection name from: ' + srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = json.datum_params || (datumDef.towgs84 ? datumDef.towgs84.split(',') : null);\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  json.lat1 = json.lat1 || json.lat0; // Lambert_Conformal_Conic_1SP, for example, needs this\n\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var nadgrids = getNadgrids(json.nadgrids);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2,\n    nadgrids);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calculated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","import {\n  PJD_3PARAM,\n  PJD_7PARAM,\n  PJD_GRIDSHIFT,\n  PJD_NODATUM,\n  R2D,\n  SRS_WGS84_ESQUARED,\n  SRS_WGS84_SEMIMAJOR, SRS_WGS84_SEMIMINOR\n} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nimport adjust_lon from \"./common/adjust_lon\";\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n  var source_a = source.a;\n  var source_es = source.es;\n  if (source.datum_type === PJD_GRIDSHIFT) {\n    var gridShiftCode = applyGridShift(source, false, point);\n    if (gridShiftCode !== 0) {\n      return undefined;\n    }\n    source_a = SRS_WGS84_SEMIMAJOR;\n    source_es = SRS_WGS84_ESQUARED;\n  }\n\n  var dest_a = dest.a;\n  var dest_b = dest.b;\n  var dest_es = dest.es;\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    dest_a = SRS_WGS84_SEMIMAJOR;\n    dest_b = SRS_WGS84_SEMIMINOR;\n    dest_es = SRS_WGS84_ESQUARED;\n  }\n\n  // Do we need to go through geocentric coordinates?\n  if (source_es === dest_es && source_a === dest_a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source_es, source_a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  point = geocentricToGeodetic(point, dest_es, dest_a, dest_b);\n\n  if (dest.datum_type === PJD_GRIDSHIFT) {\n    var destGridShiftResult = applyGridShift(dest, true, point);\n    if (destGridShiftResult !== 0) {\n      return undefined;\n    }\n  }\n\n  return point;\n}\n\nexport function applyGridShift(source, inverse, point) {\n  if (source.grids === null || source.grids.length === 0) {\n    console.log('Grid shift grids not found');\n    return -1;\n  }\n  var input = {x: -point.x, y: point.y};\n  var output = {x: Number.NaN, y: Number.NaN};\n  var onlyMandatoryGrids = false;\n  var attemptedGrids = [];\n  outer:\n  for (var i = 0; i < source.grids.length; i++) {\n    var grid = source.grids[i];\n    attemptedGrids.push(grid.name);\n    if (grid.isNull) {\n      output = input;\n      break;\n    }\n    onlyMandatoryGrids = grid.mandatory;\n    if (grid.grid === null) {\n      if (grid.mandatory) {\n        console.log(\"Unable to find mandatory grid '\" + grid.name + \"'\");\n        return -1;\n      }\n      continue;\n    }\n    var subgrids = grid.grid.subgrids;\n    for (var j = 0, jj = subgrids.length; j < jj; j++) {\n      var subgrid = subgrids[j];\n      // skip tables that don't match our point at all\n      var epsilon = (Math.abs(subgrid.del[1]) + Math.abs(subgrid.del[0])) / 10000.0;\n      var minX = subgrid.ll[0] - epsilon;\n      var minY = subgrid.ll[1] - epsilon;\n      var maxX = subgrid.ll[0] + (subgrid.lim[0] - 1) * subgrid.del[0] + epsilon;\n      var maxY = subgrid.ll[1] + (subgrid.lim[1] - 1) * subgrid.del[1] + epsilon;\n      if (minY > input.y || minX > input.x || maxY < input.y || maxX < input.x ) {\n        continue;\n      }\n      output = applySubgridShift(input, inverse, subgrid);\n      if (!isNaN(output.x)) {\n        break outer;\n      }\n    }\n  }\n  if (isNaN(output.x)) {\n    console.log(\"Failed to find a grid shift table for location '\"+\n      -input.x * R2D + \" \" + input.y * R2D + \" tried: '\" + attemptedGrids + \"'\");\n    return -1;\n  }\n  point.x = -output.x;\n  point.y = output.y;\n  return 0;\n}\n\nfunction applySubgridShift(pin, inverse, ct) {\n  var val = {x: Number.NaN, y: Number.NaN};\n  if (isNaN(pin.x)) { return val; }\n  var tb = {x: pin.x, y: pin.y};\n  tb.x -= ct.ll[0];\n  tb.y -= ct.ll[1];\n  tb.x = adjust_lon(tb.x - Math.PI) + Math.PI;\n  var t = nadInterpolate(tb, ct);\n  if (inverse) {\n    if (isNaN(t.x)) {\n      return val;\n    }\n    t.x = tb.x - t.x;\n    t.y = tb.y - t.y;\n    var i = 9, tol = 1e-12;\n    var dif, del;\n    do {\n      del = nadInterpolate(t, ct);\n      if (isNaN(del.x)) {\n        console.log(\"Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.\");\n        break;\n      }\n      dif = {x: tb.x - (del.x + t.x), y: tb.y - (del.y + t.y)};\n      t.x += dif.x;\n      t.y += dif.y;\n    } while (i-- && Math.abs(dif.x) > tol && Math.abs(dif.y) > tol);\n    if (i < 0) {\n      console.log(\"Inverse grid shift iterator failed to converge.\");\n      return val;\n    }\n    val.x = adjust_lon(t.x + ct.ll[0]);\n    val.y = t.y + ct.ll[1];\n  } else {\n    if (!isNaN(t.x)) {\n      val.x = pin.x + t.x;\n      val.y = pin.y + t.y;\n    }\n  }\n  return val;\n}\n\nfunction nadInterpolate(pin, ct) {\n  var t = {x: pin.x / ct.del[0], y: pin.y / ct.del[1]};\n  var indx = {x: Math.floor(t.x), y: Math.floor(t.y)};\n  var frct = {x: t.x - 1.0 * indx.x, y: t.y - 1.0 * indx.y};\n  var val= {x: Number.NaN, y: Number.NaN};\n  var inx;\n  if (indx.x < 0 || indx.x >= ct.lim[0]) {\n    return val;\n  }\n  if (indx.y < 0 || indx.y >= ct.lim[1]) {\n    return val;\n  }\n  inx = (indx.y * ct.lim[0]) + indx.x;\n  var f00 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx++;\n  var f10= {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx += ct.lim[0];\n  var f11 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  inx--;\n  var f01 = {x: ct.cvs[inx][0], y: ct.cvs[inx][1]};\n  var m11 = frct.x * frct.y, m10 = frct.x * (1.0 - frct.y),\n    m00 = (1.0 - frct.x) * (1.0 - frct.y), m01 = (1.0 - frct.x) * frct.y;\n  val.x = (m00 * f00.x + m10 * f10.x + m01 * f01.x + m11 * f11.x);\n  val.y = (m00 * f00.y + m10 * f10.y + m01 * f01.y + m11 * f11.y);\n  return val;\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      if (\"ew\".indexOf(crs.axis[i]) !== -1) {\n        t = 'x';\n      } else {\n        t = 'y';\n      }\n\n    }\n    else if (i === 1) {\n      v = yin;\n      if (\"ns\".indexOf(crs.axis[i]) !== -1) {\n        t = 'y';\n      } else {\n        t = 'x';\n      }\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM, PJD_GRIDSHIFT} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return (\n    (source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM || source.datum.datum_type === PJD_GRIDSHIFT) && dest.datumCode !== 'WGS84') ||\n    ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM || dest.datum.datum_type === PJD_GRIDSHIFT) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point, enforceAxis) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  } else {\n    // Clone the point object so inputs don't get modified\n    point = {\n      x: point.x,\n      y: point.y,\n      z: point.z,\n      m: point.m\n    };\n  }\n  var hasZ = point.z !== undefined;\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point, enforceAxis);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (enforceAxis && source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n    if (!point) {\n      return;\n    }\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n  if (!point) {\n    return;\n  }\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (enforceAxis && dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  if (point && !hasZ) {\n    delete point.z;\n  }\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords, enforceAxis) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords, enforceAxis) || {x: NaN, y: NaN};\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\n        } else {\n          return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\n        }\n      } else {\n        return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\n      }\n    } else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  } else {\n    out = transform(from, to, coords, enforceAxis);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\n\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      forward: function (coords, enforceAxis) {\n        return transformer(fromProj, toProj, coords, enforceAxis);\n      },\n      inverse: function (coords, enforceAxis) {\n        return transformer(toProj, fromProj, coords, enforceAxis);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100´k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Fast_Transverse_Mercator\", \"Fast Transverse Mercator\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport tmerc from '../projections/tmerc';\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (!this.approx && (isNaN(this.es) || this.es <= 0)) {\n    throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION[\"Fast_Transverse_Mercator\"] in the WKT.');\n  }\n  if (this.approx) {\n    // When '+approx' is set, use tmerc instead\n    tmerc.init.apply(this);\n    this.forward = tmerc.forward;\n    this.inverse = tmerc.inverse;\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\", \"Transverse_Mercator\", \"Transverse Mercator\", \"Gauss Kruger\", \"Gauss_Kruger\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\nimport hypot from '../common/hypot';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = hypot(p.x, p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n\n  // setting default parameters\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN && Math.abs(Math.cos(this.lat_ts)) > EPSLN) {\n      // When k0 is 1 (default value) and lat_ts is a vaild number and lat0 is at a pole and lat_ts is not at a pole\n      // Recalculate k0 using formula 21-35 from p161 of Snyder, 1987\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\", \"Polar_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme à axe oblique et pour la transformation entre\n    des systèmes de référence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport { D2R, EPSLN, HALF_PI, TWO_PI, FORTPI } from '../constants/values';\n\nvar TOL = 1e-7;\n\nfunction isTypeA(P) {\n  var typeAProjections = ['Hotine_Oblique_Mercator','Hotine_Oblique_Mercator_Azimuth_Natural_Origin'];\n  var projectionName = typeof P.PROJECTION === \"object\" ? Object.keys(P.PROJECTION)[0] : P.PROJECTION;\n  \n  return 'no_uoff' in P || 'no_off' in P || typeAProjections.indexOf(projectionName) !== -1;\n}\n\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {  \n  var con, com, cosph0, D, F, H, L, sinph0, p, J, gamma = 0,\n    gamma0, lamc = 0, lam1 = 0, lam2 = 0, phi1 = 0, phi2 = 0, alpha_c = 0, AB;\n  \n  // only Type A uses the no_off or no_uoff property\n  // https://github.com/OSGeo/proj.4/issues/104\n  this.no_off = isTypeA(this);\n  this.no_rot = 'no_rot' in this;\n  \n  var alp = false;\n  if (\"alpha\" in this) {\n    alp = true;\n  }\n\n  var gam = false;\n  if (\"rectified_grid_angle\" in this) {\n    gam = true;\n  }\n\n  if (alp) {\n    alpha_c = this.alpha;\n  }\n  \n  if (gam) {\n    gamma = (this.rectified_grid_angle * D2R);\n  }\n  \n  if (alp || gam) {\n    lamc = this.longc;\n  } else {\n    lam1 = this.long1;\n    phi1 = this.lat1;\n    lam2 = this.long2;\n    phi2 = this.lat2;\n    \n    if (Math.abs(phi1 - phi2) <= TOL || (con = Math.abs(phi1)) <= TOL ||\n        Math.abs(con - HALF_PI) <= TOL || Math.abs(Math.abs(this.lat0) - HALF_PI) <= TOL ||\n        Math.abs(Math.abs(phi2) - HALF_PI) <= TOL) {\n      throw new Error();\n    }\n  }\n  \n  var one_es = 1.0 - this.es;\n  com = Math.sqrt(one_es);\n  \n  if (Math.abs(this.lat0) > EPSLN) {\n    sinph0 = Math.sin(this.lat0);\n    cosph0 = Math.cos(this.lat0);\n    con = 1 - this.es * sinph0 * sinph0;\n    this.B = cosph0 * cosph0;\n    this.B = Math.sqrt(1 + this.es * this.B * this.B / one_es);\n    this.A = this.B * this.k0 * com / con;\n    D = this.B * com / (cosph0 * Math.sqrt(con));\n    F = D * D -1;\n    \n    if (F <= 0) {\n      F = 0;\n    } else {\n      F = Math.sqrt(F);\n      if (this.lat0 < 0) {\n        F = -F;\n      }\n    }\n    \n    this.E = F += D;\n    this.E *= Math.pow(tsfnz(this.e, this.lat0, sinph0), this.B);\n  } else {\n    this.B = 1 / com;\n    this.A = this.k0;\n    this.E = D = F = 1;\n  }\n  \n  if (alp || gam) {\n    if (alp) {\n      gamma0 = Math.asin(Math.sin(alpha_c) / D);\n      if (!gam) {\n        gamma = alpha_c;\n      }\n    } else {\n      gamma0 = gamma;\n      alpha_c = Math.asin(D * Math.sin(gamma0));\n    }\n    this.lam0 = lamc - Math.asin(0.5 * (F - 1 / F) * Math.tan(gamma0)) / this.B;\n  } else {\n    H = Math.pow(tsfnz(this.e, phi1, Math.sin(phi1)), this.B);\n    L = Math.pow(tsfnz(this.e, phi2, Math.sin(phi2)), this.B);\n    F = this.E / H;\n    p = (L - H) / (L + H);\n    J = this.E * this.E;\n    J = (J - L * H) / (J + L * H);\n    con = lam1 - lam2;\n    \n    if (con < -Math.pi) {\n      lam2 -=TWO_PI;\n    } else if (con > Math.pi) {\n      lam2 += TWO_PI;\n    }\n    \n    this.lam0 = adjust_lon(0.5 * (lam1 + lam2) - Math.atan(J * Math.tan(0.5 * this.B * (lam1 - lam2)) / p) / this.B);\n    gamma0 = Math.atan(2 * Math.sin(this.B * adjust_lon(lam1 - this.lam0)) / (F - 1 / F));\n    gamma = alpha_c = Math.asin(D * Math.sin(gamma0));\n  }\n  \n  this.singam = Math.sin(gamma0);\n  this.cosgam = Math.cos(gamma0);\n  this.sinrot = Math.sin(gamma);\n  this.cosrot = Math.cos(gamma);\n  \n  this.rB = 1 / this.B;\n  this.ArB = this.A * this.rB;\n  this.BrA = 1 / this.ArB;\n  AB = this.A * this.B;\n  \n  if (this.no_off) {\n    this.u_0 = 0;\n  } else {\n    this.u_0 = Math.abs(this.ArB * Math.atan(Math.sqrt(D * D - 1) / Math.cos(alpha_c)));\n    \n    if (this.lat0 < 0) {\n      this.u_0 = - this.u_0;\n    }  \n  }\n    \n  F = 0.5 * gamma0;\n  this.v_pole_n = this.ArB * Math.log(Math.tan(FORTPI - F));\n  this.v_pole_s = this.ArB * Math.log(Math.tan(FORTPI + F));\n}\n\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var coords = {};\n  var S, T, U, V, W, temp, u, v;\n  p.x = p.x - this.lam0;\n  \n  if (Math.abs(Math.abs(p.y) - HALF_PI) > EPSLN) {\n    W = this.E / Math.pow(tsfnz(this.e, p.y, Math.sin(p.y)), this.B);\n    \n    temp = 1 / W;\n    S = 0.5 * (W - temp);\n    T = 0.5 * (W + temp);\n    V = Math.sin(this.B * p.x);\n    U = (S * this.singam - V * this.cosgam) / T;\n        \n    if (Math.abs(Math.abs(U) - 1.0) < EPSLN) {\n      throw new Error();\n    }\n    \n    v = 0.5 * this.ArB * Math.log((1 - U)/(1 + U));\n    temp = Math.cos(this.B * p.x);\n    \n    if (Math.abs(temp) < TOL) {\n      u = this.A * p.x;\n    } else {\n      u = this.ArB * Math.atan2((S * this.cosgam + V * this.singam), temp);\n    }    \n  } else {\n    v = p.y > 0 ? this.v_pole_n : this.v_pole_s;\n    u = this.ArB * p.y;\n  }\n     \n  if (this.no_rot) {\n    coords.x = u;\n    coords.y = v;\n  } else {\n    u -= this.u_0;\n    coords.x = v * this.cosrot + u * this.sinrot;\n    coords.y = u * this.cosrot - v * this.sinrot;\n  }\n  \n  coords.x = (this.a * coords.x + this.x0);\n  coords.y = (this.a * coords.y + this.y0);\n  \n  return coords;\n}\n\nexport function inverse(p) {\n  var u, v, Qp, Sp, Tp, Vp, Up;\n  var coords = {};\n  \n  p.x = (p.x - this.x0) * (1.0 / this.a);\n  p.y = (p.y - this.y0) * (1.0 / this.a);\n\n  if (this.no_rot) {\n    v = p.y;\n    u = p.x;\n  } else {\n    v = p.x * this.cosrot - p.y * this.sinrot;\n    u = p.y * this.cosrot + p.x * this.sinrot + this.u_0;\n  }\n  \n  Qp = Math.exp(-this.BrA * v);\n  Sp = 0.5 * (Qp - 1 / Qp);\n  Tp = 0.5 * (Qp + 1 / Qp);\n  Vp = Math.sin(this.BrA * u);\n  Up = (Vp * this.cosgam + Sp * this.singam) / Tp;\n  \n  if (Math.abs(Math.abs(Up) - 1) < EPSLN) {\n    coords.x = 0;\n    coords.y = Up < 0 ? -HALF_PI : HALF_PI;\n  } else {\n    coords.y = this.E / Math.sqrt((1 + Up) / (1 - Up));\n    coords.y = phi2z(this.e, Math.pow(coords.y, 1 / this.B));\n    \n    if (coords.y === Infinity) {\n      throw new Error();\n    }\n        \n    coords.x = -this.rB * Math.atan2((Sp * this.cosgam - Vp * this.singam), Math.cos(this.BrA * u));\n  }\n  \n  coords.x += this.lam0;\n  \n  return coords;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Two_Point_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"Oblique_Mercator\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n  \n  //double lat0;                    /* the reference latitude               */\n  //double long0;                   /* the reference longitude              */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n  \n  //the above value can be set with proj4.defs\n  //example: proj4.defs(\"EPSG:2154\",\"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs\");\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\n  \"Lambert Tangential Conformal Conic Projection\",\n  \"Lambert_Conformal_Conic\",\n  \"Lambert_Conformal_Conic_1SP\",\n  \"Lambert_Conformal_Conic_2SP\",\n  \"lcc\",\n  \"Lambert Conic Conformal (1SP)\",\n  \"Lambert Conic Conformal (2SP)\"\n];\n\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.lat0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.lat0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = this.long0;\n        p.y = this.lat0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c ? c / Math.sin(c) : 1;\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F, sinpsi;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      sinpsi = Math.sin(psi);\n      lat = Math.atan2((sinpsi - this.es * F * this.sin_p12) * Math.tan(psi), sinpsi * (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {\n    geodeticToGeocentric,\n    geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n    this.name = 'geocent';\n\n}\n\nexport function forward(p) {\n    var point = geodeticToGeocentric(p, this.es, this.a);\n    return point;\n}\n\nexport function inverse(p) {\n    var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n    return point;\n}\n\nexport var names = [\"Geocentric\", 'geocentric', \"geocent\", \"Geocent\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names\n};","\nvar mode = {\n  N_POLE: 0,\n  S_POLE: 1,\n  EQUIT: 2,\n  OBLIQ: 3\n};\n\nimport { D2R, HALF_PI, EPSLN } from \"../constants/values\";\nimport hypot from \"../common/hypot\";\n\nvar params = {\n  h:     { def: 100000, num: true },           // default is Karman line, no default in PROJ.7\n  azi:   { def: 0, num: true, degrees: true }, // default is North\n  tilt:  { def: 0, num: true, degrees: true }, // default is Nadir\n  long0: { def: 0, num: true },                // default is Greenwich, conversion to rad is automatic\n  lat0:  { def: 0, num: true }                 // default is Equator, conversion to rad is automatic\n};\n\nexport function init() {\n  Object.keys(params).forEach(function (p) {\n    if (typeof this[p] === \"undefined\") {\n      this[p] = params[p].def;\n    } else if (params[p].num && isNaN(this[p])) {\n      throw new Error(\"Invalid parameter value, must be numeric \" + p + \" = \" + this[p]);\n    } else if (params[p].num) {\n      this[p] = parseFloat(this[p]);\n    }\n    if (params[p].degrees) {\n      this[p] = this[p] * D2R;\n    }\n  }.bind(this));\n\n  if (Math.abs((Math.abs(this.lat0) - HALF_PI)) < EPSLN) {\n    this.mode = this.lat0 < 0 ? mode.S_POLE : mode.N_POLE;\n  } else if (Math.abs(this.lat0) < EPSLN) {\n    this.mode = mode.EQUIT;\n  } else {\n    this.mode = mode.OBLIQ;\n    this.sinph0 = Math.sin(this.lat0);\n    this.cosph0 = Math.cos(this.lat0);\n  }\n\n  this.pn1 = this.h / this.a;  // Normalize relative to the Earth's radius\n\n  if (this.pn1 <= 0 || this.pn1 > 1e10) {\n    throw new Error(\"Invalid height\");\n  }\n  \n  this.p = 1 + this.pn1;\n  this.rp = 1 / this.p;\n  this.h1 = 1 / this.pn1;\n  this.pfact = (this.p + 1) * this.h1;\n  this.es = 0;\n\n  var omega = this.tilt;\n  var gamma = this.azi;\n  this.cg = Math.cos(gamma);\n  this.sg = Math.sin(gamma);\n  this.cw = Math.cos(omega);\n  this.sw = Math.sin(omega);\n}\n\nexport function forward(p) {\n  p.x -= this.long0;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var coslam = Math.cos(p.x);\n  var x, y;\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y = this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y = cosphi * coslam;\n      break;\n    case mode.S_POLE:\n      y = -sinphi;\n      break;\n    case mode.N_POLE:\n      y = sinphi;\n      break;\n  }\n  y = this.pn1 / (this.p - y);\n  x = y * cosphi * Math.sin(p.x);\n\n  switch (this.mode) {\n    case mode.OBLIQ:\n      y *= this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n      break;\n    case mode.EQUIT:\n      y *= sinphi;\n      break;\n    case mode.N_POLE:\n      y *= -(cosphi * coslam);\n      break;\n    case mode.S_POLE:\n      y *= cosphi * coslam;\n      break;\n  }\n\n  // Tilt \n  var yt, ba;\n  yt = y * this.cg + x * this.sg;\n  ba = 1 / (yt * this.sw * this.h1 + this.cw);\n  x = (x * this.cg - y * this.sg) * this.cw * ba;\n  y = yt * ba;\n\n  p.x = x * this.a;\n  p.y = y * this.a;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x /= this.a;\n  p.y /= this.a;\n  var r = { x: p.x, y: p.y };\n\n  // Un-Tilt\n  var bm, bq, yt;\n  yt = 1 / (this.pn1 - p.y * this.sw);\n  bm = this.pn1 * p.x * yt;\n  bq = this.pn1 * p.y * this.cw * yt;\n  p.x = bm * this.cg + bq * this.sg;\n  p.y = bq * this.cg - bm * this.sg;\n\n  var rh = hypot(p.x, p.y);\n  if (Math.abs(rh) < EPSLN) {\n    r.x = 0;\n    r.y = p.y;\n  } else {\n    var cosz, sinz;\n    sinz = 1 - rh * rh * this.pfact;\n    sinz = (this.p - Math.sqrt(sinz)) / (this.pn1 / rh + rh / this.pn1);\n    cosz = Math.sqrt(1 - sinz * sinz);\n    switch (this.mode) {\n      case mode.OBLIQ:\n        r.y = Math.asin(cosz * this.sinph0 + p.y * sinz * this.cosph0 / rh);\n        p.y = (cosz - this.sinph0 * Math.sin(r.y)) * rh;\n        p.x *= sinz * this.cosph0;\n        break;\n      case mode.EQUIT:\n        r.y = Math.asin(p.y * sinz / rh);\n        p.y = cosz * rh;\n        p.x *= sinz;\n        break;\n      case mode.N_POLE:\n        r.y = Math.asin(cosz);\n        p.y = -p.y;\n        break;\n      case mode.S_POLE:\n        r.y = -Math.asin(cosz);\n        break;\n    }\n    r.x = Math.atan2(p.x, p.y);\n  }\n\n  p.x = r.x + this.long0;\n  p.y = r.y;\n  return p;\n}\n\nexport var names = [\"Tilted_Perspective\", \"tpers\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import hypot from '../common/hypot';\n\nexport function init() {\n    this.flip_axis = (this.sweep === 'x' ? 1 : 0);\n    this.h = Number(this.h);\n    this.radius_g_1 = this.h / this.a;\n\n    if (this.radius_g_1 <= 0 || this.radius_g_1 > 1e10) {\n        throw new Error();\n    }\n\n    this.radius_g = 1.0 + this.radius_g_1;\n    this.C = this.radius_g * this.radius_g - 1.0;\n\n    if (this.es !== 0.0) {\n        var one_es = 1.0 - this.es;\n        var rone_es = 1 / one_es;\n\n        this.radius_p = Math.sqrt(one_es);\n        this.radius_p2 = one_es;\n        this.radius_p_inv2 = rone_es;\n\n        this.shape = 'ellipse'; // Use as a condition in the forward and inverse functions.\n    } else {\n        this.radius_p = 1.0;\n        this.radius_p2 = 1.0;\n        this.radius_p_inv2 = 1.0;\n\n        this.shape = 'sphere';  // Use as a condition in the forward and inverse functions.\n    }\n\n    if (!this.title) {\n        this.title = \"Geostationary Satellite View\";\n    }\n}\n\nfunction forward(p) {\n    var lon = p.x;\n    var lat = p.y;\n    var tmp, v_x, v_y, v_z;\n    lon = lon - this.long0;\n\n    if (this.shape === 'ellipse') {\n        lat = Math.atan(this.radius_p2 * Math.tan(lat));\n        var r = this.radius_p / hypot(this.radius_p * Math.cos(lat), Math.sin(lat));\n\n        v_x = r * Math.cos(lon) * Math.cos(lat);\n        v_y = r * Math.sin(lon) * Math.cos(lat);\n        v_z = r * Math.sin(lat);\n\n        if (((this.radius_g - v_x) * v_x - v_y * v_y - v_z * v_z * this.radius_p_inv2) < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        tmp = this.radius_g - v_x;\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    } else if (this.shape === 'sphere') {\n        tmp = Math.cos(lat);\n        v_x = Math.cos(lon) * tmp;\n        v_y = Math.sin(lon) * tmp;\n        v_z = Math.sin(lat);\n        tmp = this.radius_g - v_x;\n\n        if (this.flip_axis) {\n            p.x = this.radius_g_1 * Math.atan(v_y / hypot(v_z, tmp));\n            p.y = this.radius_g_1 * Math.atan(v_z / tmp);\n        } else {\n            p.x = this.radius_g_1 * Math.atan(v_y / tmp);\n            p.y = this.radius_g_1 * Math.atan(v_z / hypot(v_y, tmp));\n        }\n    }\n    p.x = p.x * this.a;\n    p.y = p.y * this.a;\n    return p;\n}\n\nfunction inverse(p) {\n    var v_x = -1.0;\n    var v_y = 0.0;\n    var v_z = 0.0;\n    var a, b, det, k;\n\n    p.x = p.x / this.a;\n    p.y = p.y / this.a;\n\n    if (this.shape === 'ellipse') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * hypot(1.0, v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * hypot(1.0, v_y);\n        }\n\n        var v_zp = v_z / this.radius_p;\n        a = v_y * v_y + v_zp * v_zp + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n        p.y = Math.atan(this.radius_p_inv2 * Math.tan(p.y));\n    } else if (this.shape === 'sphere') {\n        if (this.flip_axis) {\n            v_z = Math.tan(p.y / this.radius_g_1);\n            v_y = Math.tan(p.x / this.radius_g_1) * Math.sqrt(1.0 + v_z * v_z);\n        } else {\n            v_y = Math.tan(p.x / this.radius_g_1);\n            v_z = Math.tan(p.y / this.radius_g_1) * Math.sqrt(1.0 + v_y * v_y);\n        }\n\n        a = v_y * v_y + v_z * v_z + v_x * v_x;\n        b = 2 * this.radius_g * v_x;\n        det = (b * b) - 4 * a * this.C;\n        if (det < 0.0) {\n            p.x = Number.NaN;\n            p.y = Number.NaN;\n            return p;\n        }\n\n        k = (-b - Math.sqrt(det)) / (2.0 * a);\n        v_x = this.radius_g + k * v_x;\n        v_y *= k;\n        v_z *= k;\n\n        p.x = Math.atan2(v_y, v_x);\n        p.y = Math.atan(v_z * Math.cos(p.x) / v_x);\n    }\n    p.x = p.x + this.long0;\n    return p;\n}\n\nexport var names = [\"Geostationary Satellite View\", \"Geostationary_Satellite\", \"geos\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names,\n};\n\n","/**\n * Copyright 2018 Bernie Jenny, Monash University, Melbourne, Australia.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * Equal Earth is a projection inspired by the Robinson projection, but unlike\n * the Robinson projection retains the relative size of areas. The projection\n * was designed in 2018 by Bojan Savric, Tom Patterson and Bernhard Jenny.\n *\n * Publication:\n * Bojan Savric, Tom Patterson & Bernhard Jenny (2018). The Equal Earth map\n * projection, International Journal of Geographical Information Science,\n * DOI: 10.1080/13658816.2018.1504949\n *\n * Code released August 2018\n * Ported to JavaScript and adapted for mapshaper-proj by Matthew Bloch August 2018\n * Modified for proj4js by Andreas Hocevar by Andreas Hocevar March 2024\n */\n\nimport adjust_lon from \"../common/adjust_lon\";\n\nvar A1 = 1.340264,\n    A2 = -0.081106,\n    A3 = 0.000893,\n    A4 = 0.003796,\n    M = Math.sqrt(3) / 2.0;\n\nexport function init() {\n  this.es = 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n}\n\nexport function forward(p) {\n  var lam = adjust_lon(p.x - this.long0);\n  var phi = p.y;\n  var paramLat = Math.asin(M * Math.sin(phi)),\n  paramLatSq = paramLat * paramLat,\n  paramLatPow6 = paramLatSq * paramLatSq * paramLatSq;\n  p.x = lam * Math.cos(paramLat) /\n  (M * (A1 + 3 * A2 * paramLatSq + paramLatPow6 * (7 * A3 + 9 * A4 * paramLatSq)));\n  p.y = paramLat * (A1 + A2 * paramLatSq + paramLatPow6 * (A3 + A4 * paramLatSq));\n\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  var EPS = 1e-9,\n      NITER = 12,\n      paramLat = p.y,\n      paramLatSq, paramLatPow6, fy, fpy, dlat, i;\n\n  for (i = 0; i < NITER; ++i) {\n    paramLatSq = paramLat * paramLat;\n    paramLatPow6 = paramLatSq * paramLatSq * paramLatSq;\n    fy = paramLat * (A1 + A2 * paramLatSq + paramLatPow6 * (A3 + A4 * paramLatSq)) - p.y;\n    fpy = A1 + 3 * A2 * paramLatSq + paramLatPow6 * (7 * A3 + 9 * A4 * paramLatSq);\n    paramLat -= dlat = fy / fpy;\n    if (Math.abs(dlat) < EPS) {\n        break;\n    }\n  }\n  paramLatSq = paramLat * paramLat;\n  paramLatPow6 = paramLatSq * paramLatSq * paramLatSq;\n  p.x = M * p.x * (A1 + 3 * A2 * paramLatSq + paramLatPow6 * (7 * A3 + 9 * A4 * paramLatSq)) /\n          Math.cos(paramLat);\n  p.y = Math.asin(Math.sin(paramLat) / M);\n\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"eqearth\", \"Equal Earth\", \"Equal_Earth\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};","import adjust_lat from \"../common/adjust_lat\";\nimport adjust_lon from \"../common/adjust_lon\";\nimport hypot from \"../common/hypot\";\nimport pj_enfn from \"../common/pj_enfn\";\nimport pj_inv_mlfn from \"../common/pj_inv_mlfn\";\nimport pj_mlfn from \"../common/pj_mlfn\";\nimport { HALF_PI } from \"../constants/values\";\n\nvar EPS10 = 1e-10;\n\nexport function init() {\n  var c;\n\n  this.phi1 = this.lat1;\n  if (Math.abs(this.phi1) < EPS10) {\n    throw new Error();\n  }\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.m1 = pj_mlfn(this.phi1, this.am1 = Math.sin(this.phi1),\n      c = Math.cos(this.phi1), this.en);\n    this.am1 = c / (Math.sqrt(1 - this.es * this.am1 * this.am1) * this.am1);\n    this.inverse = e_inv;\n    this.forward = e_fwd;\n  } else {\n    if (Math.abs(this.phi1) + EPS10 >= HALF_PI) {\n      this.cphi1 = 0;\n    }\n    else {\n      this.cphi1 = 1 / Math.tan(this.phi1);\n    }\n    this.inverse = s_inv;\n    this.forward = s_fwd;\n  }\n}\n\nfunction e_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0));\n  var phi = p.y;\n  var rh, E, c;\n  rh = this.am1 + this.m1 - pj_mlfn(phi, E = Math.sin(phi), c = Math.cos(phi), this.en);\n  E = c * lam / (rh * Math.sqrt(1 - this.es * E * E));\n  p.x = rh * Math.sin(E);\n  p.y = this.am1 - rh * Math.cos(E);\n\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\n\nfunction e_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n\n  var s, rh, lam, phi;\n  rh = hypot(p.x, p.y = this.am1 - p.y);\n  phi = pj_inv_mlfn(this.am1 + this.m1 - rh, this.es, this.en);\n  if ((s = Math.abs(phi)) < HALF_PI) {\n    s = Math.sin(phi);\n    lam = rh * Math.atan2(p.x, p.y) * Math.sqrt(1 - this.es * s * s) / Math.cos(phi);\n  } else if (Math.abs(s - HALF_PI) <= EPS10) {\n    lam = 0;\n  }\n  else {\n    throw new Error();\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0));\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nfunction s_fwd(p) {\n  var lam = adjust_lon(p.x - (this.long0 || 0));\n  var phi = p.y;\n  var E, rh;\n  rh = this.cphi1 + this.phi1 - phi;\n  if (Math.abs(rh) > EPS10) {\n    p.x = rh * Math.sin(E = lam * Math.cos(phi) / rh);\n    p.y = this.cphi1 - rh * Math.cos(E);\n  } else {\n    p.x = p.y = 0;\n  }\n\n  p.x = this.a * p.x + (this.x0 || 0);\n  p.y = this.a * p.y + (this.y0 || 0);\n  return p;\n}\n\nfunction s_inv(p) {\n  p.x = (p.x - (this.x0 || 0)) / this.a;\n  p.y = (p.y - (this.y0 || 0)) / this.a;\n\n  var lam, phi;\n  var rh = hypot(p.x, p.y = this.cphi1 - p.y);\n  phi = this.cphi1 + this.phi1 - rh;\n  if (Math.abs(phi) > HALF_PI) {\n    throw new Error();\n  }\n  if (Math.abs(Math.abs(phi) - HALF_PI) <= EPS10) {\n    lam = 0;\n  } else {\n    lam = rh * Math.atan2(p.x, p.y) / Math.cos(phi);\n  }\n  p.x = adjust_lon(lam + (this.long0 || 0));\n  p.y = adjust_lat(phi);\n  return p;\n}\n\nexport var names = [\"bonne\", \"Bonne (Werner lat_1=90)\"];\nexport default {\n  init: init,\n  names: names\n};","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport nadgrid from \"./nadgrid\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.nadgrid = nadgrid;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = '__VERSION__';\nincludedProjections(proj4);\nexport default proj4;\n","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nimport tpers from './lib/projections/tpers';\nimport geos from './lib/projections/geos';\nimport eqearth from './lib/projections/eqearth';\nimport bonne from './lib/projections/bonne';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n  proj4.Proj.projections.add(tpers);\n  proj4.Proj.projections.add(geos);\n  proj4.Proj.projections.add(eqearth);\n  proj4.Proj.projections.add(bonne);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = ol.proj.transforms;","const __WEBPACK_NAMESPACE_OBJECT__ = ol.proj.Projection;","import {\n    addCoordinateTransforms,\n    addProjection,\n    addEquivalentProjections,\n    get\n} from \"ol/proj\";\nimport { get as getTransform } from \"ol/proj/transforms\";\nimport Projection from \"ol/proj/Projection\";\n\nimport Logger from \"../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"CRS\");\n\nexport function register (proj4) {\n    const projCodes = Object.keys(proj4.defs);\n    logger.trace(\"proj. codes :\", projCodes);\n\n    const len = projCodes.length;\n    let i, j;\n    for (i = 0; i < len; ++i) {\n        const code = projCodes[i];\n        if (!get(code)) {\n            const def = proj4.defs(code);\n            addProjection(new Projection({\n                code : code,\n                axisOrientation : def.axis,\n                metersPerUnit : def.to_meter,\n                units : def.units\n            }));\n        }\n    }\n    for (i = 0; i < len; ++i) {\n        const code1 = projCodes[i];\n        const proj1 = get(code1);\n\n        for (j = 0; j < len; ++j) {\n            const code2 = projCodes[j];\n            const proj2 = get(code2);\n\n            if (!getTransform(code1, code2)) {\n                if (proj4.defs[code1] === proj4.defs[code2]) {\n                    addEquivalentProjections([proj1, proj2]);\n                } else {\n                    const transform = proj4(code1, code2);\n                    addCoordinateTransforms(proj1, proj2, transform.forward, transform.inverse);\n                }\n            }\n        }\n    }\n}\n","/**\n * @module Register\n * @alias module:~utils/Register\n * @description\n * Register definition for IGNF, and EPSG CRS.\n *\n * @example\n * Gp.Register.IGNF.AMST63\n *   // return : \"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\"\n * Gp.Register.get(\"IGNF:AMST63\")\n *   // same as Gp.Register.IGNF.AMST63\n */\nvar Register = {\n\n    /**\n     * instance already loaded into proj4\n     */\n    isLoaded : false,\n\n    /**\n     * get the definition for a code\n     *\n     * @function get\n     * @param {String} name - ie. EPSG:2154 (Lambert)\n     * @returns {Object} definition\n     * @example\n     * Register.get(\"EPSG:2154\");\n     * // \"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 ...\"\n     */\n    get : function (name) {\n        if (name === \"\" || name === null || typeof name === \"undefined\") {\n            return;\n        }\n\n        var s = name.split(\":\");\n        if (s.length !== 2) {\n            return;\n        }\n\n        var _register = s[0];\n        var _code = s[1];\n\n        if (!this.hasOwnProperty(_register)) {\n            return;\n        }\n\n        if (!this[_register].hasOwnProperty(_code)) {\n            return;\n        }\n\n        return this[_register][_code];\n    },\n\n    /**\n     * does projection code exist ?\n     *\n     * @function exist\n     * @param {String} name - ie. EPSG:2154 (Lambert)\n     * @returns {Boolean} true/false\n     * @example\n     * Register.exist(\"EPSG:2154\"); // true\n     */\n    exist : function (name) {\n        if (name === \"\" || name === null || typeof name === \"undefined\") {\n            return false;\n        }\n\n        var s = name.split(\":\");\n        if (s.length !== 2) {\n            return false;\n        }\n\n        var _register = s[0];\n        var _code = s[1];\n\n        if (!this.hasOwnProperty(_register)) {\n            return false;\n        }\n\n        if (!this[_register].hasOwnProperty(_code)) {\n            return false;\n        }\n\n        return true;\n    },\n\n    /**\n     * load all defs to proj4\n     * @function load\n     * @param {Object} Proj4 - proj4 instance\n     */\n    load : function (Proj4) {\n        // un flag pour savoir si le chargement est déjà realisé\n        // (car ceci peut être couteux !)\n        if (!this.isLoaded) {\n            var registers = [\n                \"IGNF\", // exception lors du register IGNF ?\n                \"EPSG\",\n                \"CRS\"\n            ];\n            for (var i = 0; i < registers.length; i++) {\n                var _register = registers[i];\n                var codes = this[_register];\n                for (var _code in codes) {\n                    if (codes.hasOwnProperty(_code)) {\n                        var name = _register + \":\" + _code;\n                        Proj4.defs(name, this.get(name));\n                        // on enlève la dependance à OpenLayers...\n                        // la fonction register est donc à appeller afin d'enregistrer\n                        // les definitions dans OpenLayers :\n                        //  import { get } from \"ol/proj\";\n                        //  import proj4 from \"proj4\";\n                        //  import { register } from \"ol/proj/proj4\";\n                        //      Register.load();\n                        //      // Make projections defined in proj4 (with proj4.defs()) available in OpenLayers.\n                        //      // see ol/proj/proj4.register (https://openlayers.org/en/latest/apidoc/module-ol_proj_proj4.html)\n                        //      register(proj4);\n                        //      console.log(get(\"CRS:84\").getCode()); // \"CRS:84\"\n                    }\n                }\n            }\n            /** ts-syntax */ (this.isLoaded) = true;\n        }\n    },\n\n    /**\n     * load defs by default to proj4\n     *\n     * include into proj4 :\n     * - WGS84\n     * - ['EPSG:4326']\n     * - ['EPSG:3785'], ['EPSG:3857'], GOOGLE, ['EPSG:900913'], ['EPSG:102113']\n     * +\n     * - [\"EPSG:2154\"], [\"EPSG:27571\"],  [\"EPSG:27572\"],  [\"EPSG:27573\"],  [\"EPSG:2757\"],\n     * - [\"CRS:84\"],\n     * - [\"IGNF:LAMB93\"],\n     * - [\"IGNF:LAMBE\"], [\"IGNF:LAMB1\"],  [\"IGNF:LAMB2\"],  [\"IGNF:LAMB3\"],  [\"IGNF:LAMB4\"],\n     * - [\"IGNF:RGF93G\"],\n     * - [\"IGNF:WGS84G\"]\n     *\n     * @function loadByDefault\n     * @param {Object} Proj4 - proj4 instance\n     */\n    loadByDefault : function (Proj4) {\n        // la liste de projections par defaut...\n        var registers = {\n            EPSG : {\n                2154 : Register[\"EPSG\"][\"2154\"],\n                27571 : Register[\"EPSG\"][\"27571\"],\n                27572 : Register[\"EPSG\"][\"27572\"],\n                27573 : Register[\"EPSG\"][\"27573\"],\n                27574 : Register[\"EPSG\"][\"27574\"]\n            },\n            CRS : {\n                84 : Register[\"CRS\"][\"84\"]\n            },\n            IGNF : {\n                LAMB93 : Register[\"IGNF\"][\"LAMB93\"],\n                LAMBE : Register[\"IGNF\"][\"LAMBE\"],\n                LAMB1 : Register[\"IGNF\"][\"LAMB1\"],\n                LAMB2 : Register[\"IGNF\"][\"LAMB2\"],\n                LAMB3 : Register[\"IGNF\"][\"LAMB3\"],\n                LAMB4 : Register[\"IGNF\"][\"LAMB4\"],\n                RGF93G : Register[\"IGNF\"][\"RGF93G\"],\n                WGS84G : Register[\"IGNF\"][\"WGS84G\"]\n            }\n        };\n\n        for (var register in registers) {\n            if (registers.hasOwnProperty(register)) {\n                var codes = registers[register];\n                for (var code in codes) {\n                    if (codes.hasOwnProperty(code)) {\n                        var name = register + \":\" + code;\n                        Proj4.defs(name, codes[code]);\n                    }\n                }\n            }\n        }\n    },\n\n    /**\n     * load only a def to proj4\n     *\n     * @function loadByName\n     * @param {Object} Proj4 - proj4 instance\n     * @param {String} name - ie. EPSG:2154 (Lambert)\n     * @returns {Boolean} true/false\n     */\n    loadByName : function (Proj4, name) {\n        if (!this.exist(name)) {\n            return false;\n        }\n\n        try {\n            Proj4.defs(name, this.get(name));\n        } catch (e) {\n            // FIXME message !?\n            return false;\n        }\n\n        return true;\n    },\n\n    /**\n     * definitions EPSG\n     * @enum\n     */\n    EPSG : {\n        4978 : \"+proj=geocent +datum=WGS84 +units=m +no_defs \",\n        3857 : \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs\",\n        3785 : \"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs\",\n        4149 : \"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs \",\n        4150 : \"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs \",\n        4151 : \"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4171 : \"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4230 : \"+title=ED50 +proj=longlat +ellps=intl +no_defs \",\n        4235 : \"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs \",\n        4258 : \"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs \",\n        4275 : \"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs \",\n        4322 : \"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs \",\n        4326 : \"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs \",\n        4467 : \"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        4470 : \"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4471 : \"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        4474 : \"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs \",\n        4558 : \"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4559 : \"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        4621 : \"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs \",\n        4622 : \"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs \",\n        4623 : \"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs \",\n        4624 : \"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs \",\n        4625 : \"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs \",\n        4626 : \"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs \",\n        4627 : \"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4628 : \"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs \",\n        4629 : \"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs \",\n        4630 : \"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs \",\n        4632 : \"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs \",\n        4633 : \"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs \",\n        4634 : \"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs \",\n        4637 : \"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs \",\n        4638 : \"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs \",\n        4640 : \"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4641 : \"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs \",\n        4645 : \"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4687 : \"+proj=longlat +ellps=GRS80 +no_defs \",\n        4662 : \"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs \",\n        4689 : \"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs \",\n        4690 : \"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs \",\n        4691 : \"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs \",\n        4692 : \"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs \",\n        4698 : \"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs \",\n        4749 : \"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs \",\n        4750 : \"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs \",\n        4807 : \"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs \",\n        2056 : \"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs \",\n        2154 : \"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2213 : \"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs \",\n        2969 : \"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs \",\n        2970 : \"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs \",\n        2971 : \"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs \",\n        2972 : \"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs \",\n        2973 : \"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs \",\n        2975 : \"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2976 : \"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs \",\n        2977 : \"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs \",\n        2978 : \"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs \",\n        2980 : \"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs \",\n        2981 : \"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        2982 : \"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        2984 : \"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2986 : \"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs\",\n        2987 : \"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs \",\n        2989 : \"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        2990 : \"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs \",\n        2995 : \"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        3038 : \"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3039 : \"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3040 : \"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3041 : \"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 3042 : \"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 3043 : \"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 3044 : \"+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3045 : \"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3046 : \"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3047 : \"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3048 : \"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3049 : \"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3050 : \"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3051 : \"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3034 : \"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs \",\n        3035 : \"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs \",\n        3042 : \"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs \",\n        3043 : \"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs \",\n        3044 : \"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs \",\n        25828 : \"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25829 : \"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 25830 : \"+proj=utm +zone=30 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 25831 : \"+proj=utm +zone=31 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        // 25832 : \"+proj=utm +zone=32 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25833 : \"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25834 : \"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25835 : \"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25836 : \"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25837 : \"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        25838 : \"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3060 : \"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs \",\n        3163 : \"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3164 : \"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs \",\n        3165 : \"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs \",\n        3166 : \"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs \",\n        3169 : \"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3170 : \"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3171 : \"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs \",\n        3172 : \"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs \",\n        3296 : \"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs \",\n        3297 : \"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs \",\n        3298 : \"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs \",\n        3299 : \"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs \",\n        3302 : \"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs \",\n        3303 : \"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs \",\n        3304 : \"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs \",\n        3305 : \"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs \",\n        3306 : \"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs \",\n        3312 : \"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs \",\n        3313 : \"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs \",\n        3336 : \"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs \",\n        3395 : \"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        3727 : \"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs \",\n        21781 : \"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs \",\n        25830 : \"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs \",\n        25831 : \"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs \",\n        25832 : \"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs \",\n        27561 : \"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27562 : \"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27563 : \"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27564 : \"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27571 : \"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27572 : \"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27573 : \"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27574 : \"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27581 : \"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27582 : \"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27583 : \"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27584 : \"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27591 : \"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27592 : \"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27593 : \"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        27594 : \"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs \",\n        32601 : \"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32602 : \"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32603 : \"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32604 : \"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32605 : \"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32606 : \"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32607 : \"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32608 : \"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32609 : \"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32610 : \"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32611 : \"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32612 : \"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32613 : \"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32614 : \"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32615 : \"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32616 : \"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32617 : \"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32618 : \"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32619 : \"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32620 : \"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32621 : \"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32622 : \"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32623 : \"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32624 : \"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32625 : \"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32626 : \"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32627 : \"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32628 : \"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32629 : \"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32630 : \"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32631 : \"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32632 : \"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32633 : \"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32634 : \"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32635 : \"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32636 : \"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32637 : \"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32638 : \"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32639 : \"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32640 : \"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32641 : \"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32642 : \"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32643 : \"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32644 : \"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32645 : \"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32646 : \"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32647 : \"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32648 : \"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32649 : \"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32650 : \"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32651 : \"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32652 : \"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32653 : \"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32654 : \"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32655 : \"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32656 : \"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32657 : \"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32658 : \"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32659 : \"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32660 : \"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32661 : \"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32662 : \"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32701 : \"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32702 : \"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32703 : \"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32704 : \"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32705 : \"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32706 : \"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32707 : \"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32708 : \"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32709 : \"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32710 : \"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32711 : \"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32712 : \"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32713 : \"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32714 : \"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32715 : \"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32716 : \"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32717 : \"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32718 : \"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32719 : \"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32720 : \"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32721 : \"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32722 : \"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32723 : \"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32724 : \"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32725 : \"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32726 : \"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32727 : \"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32728 : \"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32729 : \"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32730 : \"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32731 : \"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32732 : \"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32733 : \"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32734 : \"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32735 : \"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32736 : \"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32737 : \"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32738 : \"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32739 : \"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32740 : \"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32741 : \"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32742 : \"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32743 : \"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32744 : \"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32745 : \"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32746 : \"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32747 : \"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32748 : \"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32749 : \"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32750 : \"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32751 : \"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32752 : \"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32753 : \"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32754 : \"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32755 : \"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32756 : \"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32757 : \"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32758 : \"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32759 : \"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32760 : \"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        32761 : \"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs \",\n        310024802 : \"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310915814 : \"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310486805 : \"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310700806 : \"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310702807 : \"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310706808 : \"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310547809 : \"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642810 : \"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310032811 : \"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642812 : \"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642801 : \"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642813 : \"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        310642901 : \"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        5489 : \"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs\",\n        5490 : \"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\"\n    },\n    /**\n     * definitions CRS\n     * @enum\n     */\n    CRS : {\n        84 : \"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs \"\n    },\n    /**\n     * definitions IGNF\n     * @enum\n     */\n    IGNF : {\n        AMST63 : \"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CROZ63 : \"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CSG67 : \"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        ED50 : \"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        ETRS89 : \"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        GUAD48 : \"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        GUADFM49 : \"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN63 : \"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN72 : \"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        KERG62CAR : \"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MART38 : \"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MAYO50 : \"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MOOREA87 : \"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        NTF : \"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs\",\n        NUKU72 : \"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        REUN47 : \"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        RGF93 : \"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGFG95 : \"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGM04 : \"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGNC : \"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGPF : \"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGR92 : \"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGSPM06 : \"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGTAAF07 : \"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RRAF91 : \"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        STPL69 : \"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        STPM50 : \"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs\",\n        TAHAA : \"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TAHI79 : \"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TERA50 : \"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WALL78 : \"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WGS72 : \"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs\",\n        WGS84 : \"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        AMST63GEO : \"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CROZ63GEO : \"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        CSG67GEO : \"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        ED50G : \"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        GUAD48GEO : \"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        GUADFM49GEO : \"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN63GEO : \"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        IGN72GEO : \"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        KERG62GEO : \"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MART38GEO : \"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MAYO50GEO : \"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        MOOREA87GEO : \"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        NTFG : \"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs\",\n        NTFP : \"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs\",\n        NUKU72GEO : \"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        REUN47GEO : \"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        RGF93G : \"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGFG95GEO : \"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGM04GEO : \"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGNCGEO : \"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGPFGEO : \"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGR92GEO : \"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGSPM06GEO : \"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        RGTAAF07G : \"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        STPL69GEO : \"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        STPM50GEO : \"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs\",\n        TAHAAGEO : \"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TAHI79GEO : \"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        TERA50G : \"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WALL78GEO : \"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs\",\n        WGS72G : \"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs\",\n        WGS84G : \"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        WGS84RRAFGEO : \"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        XGEO : \"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        AMST63UTM43S : \"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        CROZ63UTM39S : \"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        CSG67UTM21 : \"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        CSG67UTM22 : \"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALANF : \"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALASP : \"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALCRZ : \"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALFXX : \"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALGUF : \"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALKER : \"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALMYT : \"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALNCL : \"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALPYF : \"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALREU : \"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALSPM : \"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GEOPORTALWLF : \"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        GUAD48UTM20 : \"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        GUADFM49U20 : \"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        IGN63UTM7S : \"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        IGN72UTM58S : \"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        KERG62UTM42S : \"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        LAMB1 : \"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs\",\n        LAMB1C : \"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs\",\n        LAMB2 : \"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs\",\n        LAMB2C : \"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs\",\n        LAMB3 : \"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs\",\n        LAMB3C : \"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs\",\n        LAMB4 : \"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs\",\n        LAMB4C : \"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs\",\n        LAMB93 : \"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs\",\n        RGF93CC42 : \"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs\",\n        RGF93CC43 : \"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs\",\n        RGF93CC44 : \"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs\",\n        RGF93CC45 : \"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs\",\n        RGF93CC46 : \"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs\",\n        RGF93CC47 : \"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs\",\n        RGF93CC48 : \"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs\",\n        RGF93CC49 : \"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs\",\n        RGF93CC50 : \"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs\",\n        LAMBE : \"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs\",\n        MART38UTM20 : \"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        MAYO50UTM38S : \"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        MILLER : \"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs\",\n        MOOREA87U6S : \"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        NUKU72U7S : \"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        // REUN47GAUSSL : \"+title=Reunion Gauss Laborde +proj=gstmerc +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-21.116666667 +lon_0=55.533333333 +k_0=1.00000000 +x_0=160000.000 +y_0=50000.000 +units=m +no_defs\",\n        RGM04UTM38S : \"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGNCUTM57S : \"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGNCUTM58S : \"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGNCUTM59S : \"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGPFUTM5S : \"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGPFUTM6S : \"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGPFUTM7S : \"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGR92UTM40S : \"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        RGSPM06U21 : \"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        STPL69UTM43S : \"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        STPM50UTM21 : \"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        TAHAAUTM05S : \"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        TAHI51UTM06S : \"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        TAHI79UTM6S : \"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        TERA50STEREO : \"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs\",\n        UTM01SW84 : \"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        UTM20W84GUAD : \"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM20W84MART : \"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM22RGFG95 : \"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM39SW84 : \"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        UTM42SW84 : \"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        UTM43SW84 : \"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        WALL78UTM1S : \"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs\",\n        ETRS89GEO : \"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs\",\n        ETRS89LAEA : \"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs\",\n        ETRS89LCC : \"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs\",\n        UTM26ETRS89 : \"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM27ETRS89 : \"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM28ETRS89 : \"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM29ETRS89 : \"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM30ETRS89 : \"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM31ETRS89 : \"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM32ETRS89 : \"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM33ETRS89 : \"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM34ETRS89 : \"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM35ETRS89 : \"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM36ETRS89 : \"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM37ETRS89 : \"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\",\n        UTM38ETRS89 : \"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs\"\n    }\n};\n\nexport default Register;\n","/*\n * FIXME\n * en mode bundle, l'action register des methodes de chargement est executée 2 fois.\n * mais aucun impact sur performance, car le register teste si la projection a été déjà\n * chargé...\n */\n\n// import external\nimport Proj4 from \"proj4\";\n// import OpenLayers\n// import { register } from \"ol/proj/proj4\";\nimport { register } from \"./Proj4\";\nimport {\n    getTransform,\n    addProjection,\n    get as getProjection\n} from \"ol/proj\";\n// import { clear as clearProj } from \"ol/proj/transforms\";\nimport { applyTransform } from \"ol/extent\";\n// import local\nimport Register from \"../Utils/Register\";\nimport Logger from \"../Utils/LoggerByDefault\";\n\nvar logger = Logger.getLogger(\"CRS\");\n\nvar CRS = {\n\n    /**\n    * List of extent projections\n    */\n    projectionsExtent : {\n        \"EPSG:2154\" : {\n            left : -9.62,\n            bottom : 41.18,\n            right : 10.3,\n            top : 51.54\n        },\n        \"EPSG:27572\" : {\n            left : -4.87,\n            bottom : 42.33,\n            right : 8.23,\n            top : 51.14\n        }\n    },\n\n    /**\n    * Load all custom definition projection\n    */\n    load : function () {\n        logger.trace(\"Loading custom definitions projections\");\n        // loading except if it's already loaded...\n        if (!Register.isLoaded) {\n            // load all defs into proj4\n            Register.load(Proj4);\n            try {\n                // register all defs\n                register(Proj4);\n                // Expose proj4 with custom defs into OpenLayers global variable\n                if (window.ol && window.ol.proj && window.ol.proj.proj4) {\n                    window.ol.proj.proj4.register = register;\n                    window.ol.proj.proj4.register(Proj4);\n                }\n            } catch (e) {\n                // FIXME ?\n                logger.error(e);\n                // clearProj();\n            }\n        }\n    },\n\n    /**\n    * Load definition projection by default\n    *\n    * include into proj4 :\n    * - WGS84\n    * - ['EPSG:4326']\n    * - ['EPSG:3785'], ['EPSG:3857'], GOOGLE, ['EPSG:900913'], ['EPSG:102113']\n    * +\n    * - [\"EPSG:2154\"], [\"EPSG:27571\"],  [\"EPSG:27572\"],  [\"EPSG:27573\"],  [\"EPSG:2757\"],\n    * - [\"CRS:84\"],\n    * - [\"IGNF:LAMB93\"],\n    * - [\"IGNF:LAMBE\"], [\"IGNF:LAMB1\"],  [\"IGNF:LAMB2\"],  [\"IGNF:LAMB3\"],  [\"IGNF:LAMB4\"],\n    * - [\"IGNF:RGF93G\"],\n    * - [\"IGNF:WGS84G\"]\n    */\n    loadByDefault : function () {\n        logger.trace(\"Loading custom definitions projections by default\");\n        // loading except if it's already loaded...\n        if (!Register.isLoaded) {\n            // load defs by default into proj4\n            Register.loadByDefault(Proj4);\n            try {\n                // register all defs\n                register(Proj4);\n                // Expose proj4 with custom defs into OpenLayers global variable\n                if (window.ol && window.ol.proj && window.ol.proj.proj4) {\n                    window.ol.proj.proj4.register = register;\n                    window.ol.proj.proj4.register(Proj4);\n                }\n            } catch (e) {\n                // FIXME une projection ne passe pas avec ol.proj/proj4.register()...\n                // on fait quoi ?\n                logger.error(e);\n                // clearProj();\n            }\n        }\n    },\n\n    /**\n    * Load a custom definition projection\n    * @param {String} name - ie. EPSG:2154 (Lambert)\n    */\n    loadByName : function (name) {\n        logger.trace(\"Loading a custom definition projection : \", name);\n        // loading except if it's already loaded...\n        if (!Register.isLoaded) {\n            // load defs by default into proj4\n            Register.loadByName(Proj4, name);\n            try {\n                // register all defs\n                register(Proj4);\n                // Expose proj4 with custom defs into OpenLayers global variable\n                if (window.ol && window.ol.proj && window.ol.proj.proj4) {\n                    window.ol.proj.proj4.register = register;\n                    window.ol.proj.proj4.register(Proj4);\n                }\n            } catch (e) {\n                // FIXME ?\n                logger.error(e);\n                // clearProj();\n            }\n        }\n    },\n\n    /**\n     * Overload OpenLayers ol.proj parameters,\n     * to manage EPSG:2154 extent restriction\n     */\n    overload : function () {\n        logger.trace(\"Loading projections aera (extent)\");\n        for (var code in this.projectionsExtent) {\n            if (this.projectionsExtent.hasOwnProperty(code)) {\n                var extent = this.projectionsExtent[code];\n                var proj = getProjection(code);\n                var fromLonLat = getTransform(\"EPSG:4326\", proj);\n\n                // very approximate calculation of projection extent\n                var _extent = applyTransform([extent.bottom, extent.right, extent.top, extent.left], fromLonLat);\n                proj.setExtent(_extent);\n                addProjection(proj);\n\n                // Expose projection extent with custom defs into OpenLayers global variable\n                if (window.ol && window.ol.proj && window.ol.proj.addProjection) {\n                    window.ol.proj.addProjection(proj);\n                }\n            }\n        }\n    }\n};\n\nexport default CRS;\n\n// Expose proj4 with custom defs into OpenLayers global variable\nif (window.ol && window.ol.proj && window.ol.proj.proj4) {\n    window.ol.proj.proj4.register = register;\n}\n","var checkDsfr = function () {\n    // HACK: check si le styl dsfr est chargé via la variable blue-france-sun-113-625\n    var style = getComputedStyle(document.documentElement);\n    var color = style.getPropertyValue(\"--blue-france-sun-113-625\");\n    if (color === \"\") {\n        return false;\n    }\n    return true;\n};\n\nexport default checkDsfr;\n\n","import ID from \"../../Utils/SelectorID\";\nimport GeocodeUtils from \"../../Utils/GeocodeUtils\";\nimport checkDsfr from \"../Utils/CheckDsfr\";\n\nvar SearchEngineDOM = {\n\n    /**\n    * Add uuid to the tag ID\n    * @param {String} id - id selector\n    * @returns {String} uid - id selector with an unique id\n    */\n    _addUID : function (id) {\n        var uid = (this._uid) ? id + \"-\" + this._uid : id;\n        return uid;\n    },\n\n    /**\n     * Main container (DOM)\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createMainContainerElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPsearchEngine\");\n        container.className = \"GPwidget gpf-widget\";\n        return container;\n    },\n\n    // ################################################################### //\n    // ################### Methods of main container ##################### //\n    // ################################################################### //\n\n    /**\n     * SElement with picto and search input\n     * @returns {DOMElement} DOM element\n     */\n    _createSearchDivElement : function () {\n        var searchDiv = document.createElement(\"div\");\n        searchDiv.id = this._addUID(\"GPshowSearchDiv\");\n        return searchDiv;\n    },\n\n    /**\n     * Show search engine\n     * @param {Boolean} collapsible - ...\n     * @returns {DOMElement} DOM element\n     */\n    _createShowSearchEnginePictoElement : function (collapsible) {\n        // contexte d'execution\n        var self = this;\n        if (checkDsfr()) {\n            // Jamais collapsible en DSFR\n            collapsible = true;\n        }\n\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPshowSearchEnginePicto\");\n        button.className = \"GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn\";\n        button.title = \"Afficher/masquer la recherche par lieux\";\n        if (checkDsfr()) {\n            // Pas la même du bouton fonction en DSFR\n            button.title = \"Rechercher\";\n        }\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", !collapsible);\n        button.disabled = !collapsible;\n        button.setAttribute(\"type\", \"button\");\n\n        // Close all results and panels when minimizing the widget\n        button.addEventListener(\"click\", function (e) {\n            if (checkDsfr()) {\n                // En DSFR, le bouton fait la même chose que la touche Entrée\n                var container = document.getElementById(self._addUID(\"GPautocompleteResults\"));\n                var curr = container.getElementsByClassName(\"GPautoCompleteProposal gpf-panel__items current\");\n                var list = container.getElementsByClassName(\"GPautoCompleteProposal gpf-panel__items\");\n\n                // si aucune suggestion, on ne va pas plus loin !\n                var length = list.length;\n                if (!length) {\n                    return;\n                }\n\n                var current = null;\n\n                // si aucun item courant, on prend le 1er !\n                if (!curr.length) {\n                    current = list[0];\n                    current.className = \"GPautoCompleteProposal gpf-panel__items current\";\n                    current.style.color = \"#000000\";\n                    current.style[\"background-color\"] = \"#CEDBEF\";\n                } else {\n                    current = curr[0];\n                }\n                current.click();\n                return;\n            }\n            var status = (e.target.ariaPressed === \"true\");\n            e.target.setAttribute(\"aria-pressed\", !status);\n            if (status) {}\n\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            var showAdvancedSearch = document.getElementById(self._addUID(\"GPshowAdvancedSearch\"));\n            if (showAdvancedSearch) {\n                showAdvancedSearch.style.display = null;\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            }\n            var showGeolocate = document.getElementById(self._addUID(\"GPshowGeolocate\"));\n            if (showGeolocate) {\n                showGeolocate.style.display = null;\n            }\n            var showCoordinate = document.getElementById(self._addUID(\"GPshowSearchByCoordinate\"));\n            if (showCoordinate) {\n                showCoordinate.style.display = null;\n            }\n            var id = \"#GPsearchInput-\" + self._uid;\n            document.querySelector(id + \" input\").disabled = false; // FIXME form[id^=GPsearchInput] = #GPsearchInput ?\n            if (checkDsfr()) {\n                document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n            }\n            self.onShowSearchEngineClick();\n        });\n\n        return button;\n    },\n\n    /**\n     * Simple search input\n     * @param {String} placeholder - placeholder\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createSearchInputElement : function (placeholder) {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPsearchInput\");\n        form.className = \"gpf-panel__content fr-modal__content\";\n        // Open geocode results panel when submitting the input\n        form.addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n            if (document.getElementById(self._addUID(\"GPsearchInputText\")).value === \"\") {\n                return false;\n            }\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-hidden\", \"gpf-visible\");\n\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            // cf. FIXME\n            // document.querySelector(\"#GPsearchInput input\").blur ();\n\n            // gestionnaire d'evenement :\n            // on récupère la valeur de saisie pour requête sur le service de geocodage\n            self.onGeocodingSearchSubmit(e);\n            return false;\n        });\n\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPsearchInputText\");\n        input.className = \"GPsearchInputText gpf-input fr-input\";\n        input.type = \"text\";\n        input.placeholder = placeholder;\n        input.autocomplete = \"off\";\n        // Manage autocomplete list appearance when filling the address input\n        input.addEventListener(\"keyup\", function (e) {\n            var charCode = e.which || e.keyCode;\n            if (charCode === 13 || charCode === 10 || charCode === 38 || charCode === 40) {\n                return;\n            }\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            if (input.value.length > 2) {\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-hidden\", \"gpf-visible\");\n            } else {\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            }\n            // gestionnaire d'evenement :\n            // on récupère la valeur de saisie pour requête sur le service d'autocompletion\n            self.onAutoCompleteSearchText(e);\n        });\n\n        // FIXME ce code interfere avec le click sur la liste des suggested locations !\n        // input.addEventListener(\"blur\", function (e) {\n        //     document.getElementById(self._addUID(\"GPautoCompleteList\")).style.display = \"none\";\n        // });\n\n        input.addEventListener(\"keydown\", function (e) {\n            // FIXME\n            // l'action clavier 'enter (13)' lance le submit de la form !\n            // Ce comportement n'est pas souhaité car le submit execute un geocodage !\n            // Il faut donc trouver le moyen d'eviter le submit sur un return venant\n            // seulement d'une selection de suggestion...\n\n            var charCode = e.which || e.keyCode;\n            if (charCode === 13) {\n                e.preventDefault();\n            }\n            var container = document.getElementById(self._addUID(\"GPautocompleteResults\"));\n\n            // si aucun container !?\n            if (!container) {\n                return;\n            }\n\n            var curr = container.getElementsByClassName(\"GPautoCompleteProposal gpf-panel__items current\");\n            var list = container.getElementsByClassName(\"GPautoCompleteProposal gpf-panel__items\");\n\n            // si aucune suggestion, on ne va pas plus loin !\n            var length = list.length;\n            if (!length) {\n                return;\n            }\n\n            var current = null;\n\n            // si aucun item courant, on prend le 1er !\n            if (!curr.length) {\n                current = list[0];\n                current.className = \"GPautoCompleteProposal gpf-panel__items current\";\n                current.style.color = \"#000000\";\n                current.style[\"background-color\"] = \"#CEDBEF\";\n                if (charCode !== 13) {\n                    return;\n                }\n            } else {\n                current = curr[0];\n            }\n\n            var index = parseInt(ID.index(current.id), 10);\n            var next = (index === length - 1) ? list[0] : list[index + 1];\n            var prev = (index === 0) ? list[length - 1] : list[index - 1];\n\n            current.style[\"background-color\"] = \"\";\n            current.style.color = \"\";\n            prev.style[\"background-color\"] = \"\";\n            prev.style.color = \"\";\n            next.style[\"background-color\"] = \"\";\n            next.style.color = \"\";\n\n            switch (charCode) {\n                case 38: // arrow up\n                    current.className = \"GPautoCompleteProposal gpf-panel__items\";\n                    prev.className = \"GPautoCompleteProposal gpf-panel__items current\";\n                    prev.style.color = \"#000000\";\n                    prev.style[\"background-color\"] = \"#CEDBEF\";\n                    current.scrollIntoView();\n                    break;\n                case 40: // arrow down\n                    current.className = \"GPautoCompleteProposal gpf-panel__items\";\n                    next.className = \"GPautoCompleteProposal gpf-panel__items current\";\n                    next.style.color = \"#000000\";\n                    next.style[\"background-color\"] = \"#CEDBEF\";\n                    current.scrollIntoView();\n                    break;\n                case 13: // enter\n                    // cf. FIXME\n                    e.preventDefault();\n                    current.click(e);\n                    break;\n            }\n\n            current.focus();\n        });\n\n        form.appendChild(input);\n\n        return form;\n    },\n\n    _createSearchResetElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var buttonReset = document.createElement(\"button\");\n        buttonReset.id = this._addUID(\"GPsearchInputReset\");\n        buttonReset.className = \"GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary\"; /* not use : fr-btn--close */\n        buttonReset.setAttribute(\"aria-label\", \"Supprimer la recherche\");\n        // Reset input\n        buttonReset.addEventListener(\"click\", function (e) {\n            // FIXME event déclenché sur la frappe \"return\" dans la zone de saisie !?\n            document.getElementById(self._addUID(\"GPsearchInputText\")).value = \"\";\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            self.onSearchResetClick();\n        });\n\n        return buttonReset;\n    },\n\n\n    _createButtonsElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPbuttonsContainer\";\n        return div;\n    },\n\n    _createFirstLineWrapper : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPsearchFirstLineWrapper\";\n        return div;\n    },\n\n    _createRadioContainer : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPsearchRadioContainer\";\n        return div;\n    },\n\n    _createRadioElements : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPsearchRadioElements\";\n        var choiceLocations = document.createElement(\"div\");\n        choiceLocations.className = \"GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w\";\n        var inputLocations = document.createElement(\"input\");\n        inputLocations.id = this._addUID(\"GPsearchSplitLocations\");\n        inputLocations.type = \"radio\";\n        inputLocations.name = \"GPsearchSplit\";\n        inputLocations.value = \"address\";\n        inputLocations.checked = true;\n\n        choiceLocations.appendChild(inputLocations);\n\n        var labelLocations = document.createElement(\"label\");\n        labelLocations.className = \"gpf-label fr-label\";\n        labelLocations.htmlFor = this._addUID(\"GPsearchSplitLocations\");\n        labelLocations.title = \"Adresses\";\n        labelLocations.innerHTML = \"Adresses\";\n        choiceLocations.appendChild(labelLocations);\n        if (inputLocations.addEventListener) {\n            inputLocations.addEventListener(\"change\", function () {\n                if (inputLocations.checked) {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                } else {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                }\n            });\n        } else if (inputLocations.attachEvent) {\n            inputLocations.attachEvent(\"onchange\", function () {\n                if (inputLocations.checked) {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                } else {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                }\n            });\n        }\n\n        var choiceData = document.createElement(\"div\");\n        choiceData.className = \"GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w\";\n        var inputData = document.createElement(\"input\");\n        inputData.id = this._addUID(\"GPsearchSplitData\");\n        inputData.type = \"radio\";\n        inputData.name = \"GPsearchSplit\";\n        inputData.value = \"data\";\n\n        choiceData.appendChild(inputData);\n\n        var labelData = document.createElement(\"label\");\n        labelData.className = \"gpf-label fr-label\";\n        labelData.htmlFor = this._addUID(\"GPsearchSplitData\");\n        labelData.title = \"Cartes et données\";\n        labelData.innerHTML = \"Cartes et données\";\n        choiceData.appendChild(labelData);\n        if (inputData.addEventListener) {\n            inputData.addEventListener(\"change\", function () {\n                if (inputData.checked) {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                } else {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                }\n            });\n        } else if (inputData.attachEvent) {\n            inputData.attachEvent(\"onchange\", function () {\n                if (inputData.checked) {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                } else {\n                    document.querySelector(\"[id^='GPautocompleteResultsSuggest']\").classList.remove(\"gpf-hidden\", \"GPelementHidden\");\n                    document.querySelector(\"[id^='GPautocompleteResultsLocation']\").classList.add(\"gpf-hidden\", \"GPelementHidden\");\n                }\n            });\n        }\n\n        div.appendChild(choiceLocations);\n        div.appendChild(choiceData);\n\n        return [div, inputLocations, inputData];\n    },\n\n    /**\n     * Show advanced search panel\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowAdvancedSearchElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var span = document.createElement(\"span\");\n        span.id = this._addUID(\"GPshowAdvancedSearch\");\n        span.className = \"GPshowOpen  GPshowAdvancedSearch\";\n        span.innerText = \"Recherche avancée\";\n        span.setAttribute(\"tabindex\", \"0\");\n        span.setAttribute(\"aria-pressed\", false);\n\n        // Open advanced search\n        span.addEventListener(\"click\", function (e) {\n            var status = (e.target.ariaPressed === \"true\");\n            e.target.setAttribute(\"aria-pressed\", !status);\n\n            var id = \"#GPsearchInput-\" + self._uid;\n            if (status) {\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                document.querySelector(id + \" input\").disabled = false;\n                // only if displayButtonClose option is set to true\n                if (document.querySelector(id + \" .GPsearchInputReset\")) {\n                    document.querySelector(id + \" .GPsearchInputReset\").disabled = false;\n                }\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n                }\n            } else {\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"gpf-hidden\", \"gpf-visible\");\n                document.querySelector(id + \" input\").disabled = true;\n                // only if displayButtonClose option is set to true\n                if (document.querySelector(id + \" .GPsearchInputReset\")) {\n                    document.querySelector(id + \" .GPsearchInputReset\").disabled = true;\n                }\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = true;\n                }\n            }\n\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n\n            document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            document.getElementById(self._addUID(\"GPshowSearchByCoordinate\")).setAttribute(\"aria-pressed\", false);\n        });\n\n        return span;\n    },\n\n    /**\n     * Show geolocate button\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowGeolocateElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPshowGeolocate\");\n        button.className = \"GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w\";\n        button.title = \"Activer la geolocalisation\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n\n        // Open advanced search\n        button.addEventListener(\"click\", function (e) {\n            var status = (e.target.ariaPressed === \"true\");\n            e.target.setAttribute(\"aria-pressed\", !status);\n            if (status) {\n                // somme stuff...\n            }\n            self.onShowSearchGeolocateClick();\n        });\n\n        return button;\n    },\n\n    /**\n     * Show search by coordinate button\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createShowSearchByCoordinateElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var button = document.createElement(\"button\");\n        button.id = this._addUID(\"GPshowSearchByCoordinate\");\n        button.className = \"GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w\";\n        button.title = \"Ouvrir la recherche par coordonnées\";\n        button.setAttribute(\"tabindex\", \"0\");\n        button.setAttribute(\"aria-pressed\", false);\n\n        // Open advanced search\n        button.addEventListener(\"click\", function (e) {\n            var status = (e.target.ariaPressed === \"true\");\n            e.target.setAttribute(\"aria-pressed\", !status);\n            var id = \"#GPsearchInput-\" + self._uid;\n            if (status) {\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                document.querySelector(id + \" input\").disabled = false;\n                document.querySelector(id + \" .GPsearchInputReset\").disabled = false;\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n                }\n            } else {\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"gpf-hidden\", \"gpf-visible\");\n                document.querySelector(id + \" input\").disabled = true;\n                document.querySelector(id + \" .GPsearchInputReset\").disabled = true;\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = true;\n                }\n            }\n\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n\n            document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).setAttribute(\"aria-pressed\", false);\n        });\n\n        return button;\n    },\n\n\n\n    // ################################################################### //\n    // ################### Methods of advanced search #################### //\n    // ################################################################### //\n\n    /**\n     * Advanced search panel\n     *\n     * FIXME\n     * don't call this._createAdvancedSearchPanelHeaderElement\n     * don't call this._createAdvancedSearchPanelFormElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchPanelElement : function () {\n        var div = document.createElement(\"dialog\");\n        div.id = this._addUID(\"GPadvancedSearchPanel\");\n        div.className = \"GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal\";\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createAdvancedSearchPanelHeaderElement ());\n        // div.appendChild(this._createAdvancedSearchPanelFormElement ());\n\n        return div;\n    },\n\n    _createAdvancedSearchPanelDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__body fr-modal__body\";\n        return div;\n    },\n\n    /**\n     * Geocoding results\n     *\n     * FIXME\n     * don't call this._createGeocodeResultsListElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createGeocodeResultsElement : function () {\n        var div = document.createElement(\"dialog\");\n        div.id = this._addUID(\"GPgeocodeResultsList\");\n        div.className = \"GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal\";\n\n        div.appendChild(this._createGeocodeResultsHeaderElement());\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createGeocodeResultsListElement ());\n\n        return div;\n    },\n\n    _createGeocodeResultsDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__body fr-modal__body\";\n        return div;\n    },\n\n    /**\n     * Autocompletion results\n     *\n     * FIXME\n     * don't call this._createAutoCompleteListElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAutoCompleteElement : function () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPautoCompleteList\");\n        div.className = \"GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden \"; // GPpanel ?\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createAutoCompleteListElement ());\n\n        return div;\n    },\n\n    /**\n     * Coordinate search panel\n     *\n     * FIXME\n     * don't call this._createCoordinateSearchPanelHeaderElement\n     * don't call this._createCoordinateSearchPanelFormElement\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createCoordinateSearchPanelElement : function () {\n        var div = document.createElement(\"dialog\");\n        div.id = this._addUID(\"GPcoordinateSearchPanel\");\n        div.className = \"GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal\";\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n        // div.appendChild(this._createCoordinateSearchPanelHeaderElement ());\n        // div.appendChild(this._createCoordinateSearchPanelFormElement ());\n\n        return div;\n    },\n\n    _createCoordinateSearchPanelDivElement : function () {\n        var div = document.createElement(\"div\");\n        div.className = \"gpf-panel__body fr-modal__body\";\n        return div;\n    },\n\n    // ################################################################### //\n    // ################### Autocompletion container ###################### //\n    // ################################################################### //\n\n    /**\n     * Autocompletion results list.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAutoCompleteListElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPautocompleteResults\");\n        container.className = \"\";\n\n        if (container.addEventListener) {\n            container.addEventListener(\"click\", function (e) {\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            }, false);\n        } else if (container.attachEvent) {\n            container.attachEvent(\"onclick\", function (e) {\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPautoCompleteList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            });\n        }\n\n        // Proposals are dynamically filled in Javascript by autocomplete or search service\n        // <div class=\"GPautoCompleteProposal\">...</div>\n\n        return container;\n    },\n\n    _createAutoCompletedLocationContainer () {\n        var container = document.createElement(\"select\");\n        container.id = this._addUID(\"GPautocompleteResultsLocation\");\n        container.className = \"GPelementHidden gpf-hidden gpf-select\";\n        container.size = 6;\n        container.autofocus = true;\n        return container;\n    },\n    _createAutoCompletedLocationTitleElement () {\n        var container = document.getElementById(this._addUID(\"GPautocompleteResultsLocation\"));\n        var label = document.createElement(\"option\");\n        label.className = \"GPlabel GPlabelTitle gpf-label fr-label\";\n        label.innerHTML = \"Lieux et adresses\";\n        container.appendChild(label);\n    },\n\n    /**\n     * Autocompletion result.\n     * Proposals are dynamically filled in Javascript by autocomplete service\n     *\n     * TODO formaliser le contenu des reponse\n     *\n     * @param {Object} location - suggested or geocoded location results\n     * @param {Number} id - ID\n     */\n    _createAutoCompletedLocationElement : function (location, id) {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.getElementById(this._addUID(\"GPautocompleteResultsLocation\"));\n\n        var div = document.createElement(\"option\");\n        div.id = this._addUID(\"AutoCompletedLocation_\" + id);\n        div.className = \"GPautoCompleteProposal gpf-panel__items\";\n        var value = GeocodeUtils.getSuggestedLocationFreeform(location);\n        div.innerHTML = value;\n        div.title = value;\n        if (div.addEventListener) {\n            div.addEventListener(\"click\", function (e) {\n                self.onAutoCompletedResultsItemClick(e);\n            }, false);\n        } else if (div.attachEvent) {\n            div.attachEvent(\"onclick\", function (e) {\n                self.onAutoCompletedResultsItemClick(e);\n            });\n        }\n\n        container.appendChild(div);\n    },\n\n    _createSearchedSuggestContainer () {\n        var container = document.createElement(\"select\");\n        container.id = this._addUID(\"GPautocompleteResultsSuggest\");\n        container.className = \"GPelementHidden gpf-hidden gpf-select\";\n        container.size = 6;\n        container.autofocus = true;\n        return container;\n    },\n    _createSearchedSuggestTitleElement () {\n        var container = document.getElementById(this._addUID(\"GPautocompleteResultsSuggest\"));\n        var label = document.createElement(\"option\");\n        label.className = \"GPlabel GPlabelTitle gpf-label fr-label\";\n        label.innerHTML = \"Cartes et données\";\n        container.appendChild(label);\n    },\n\n    /**\n     * Autocompletion result of search service.\n     * Proposals are dynamically filled in Javascript by autocomplete service\n     *\n     *\n     * @param {Object} suggest - suggested results\n     * @param {Number} id - ID\n     */\n    _createSearchedSuggestElement : function (suggest, id) {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.getElementById(this._addUID(\"GPautocompleteResultsSuggest\"));\n\n        var div = document.createElement(\"option\");\n        div.id = this._addUID(\"AutoCompletedSuggest_\" + id);\n        div.className = \"GPautoCompleteProposal gpf-panel__items\";\n        div.innerHTML = suggest.title + \" (\" + suggest.service + \")\";\n        div.dataset.layer = suggest.name;\n        div.title = suggest.description;\n        if (div.addEventListener) {\n            div.addEventListener(\"click\", function (e) {\n                self.onSearchedResultsItemClick(e);\n            }, false);\n        } else if (div.attachEvent) {\n            div.attachEvent(\"onclick\", function (e) {\n                self.onSearchedResultsItemClick(e);\n            });\n        }\n\n        container.appendChild(div);\n    },\n\n    // ################################################################### //\n    // ############### Geocoding with advanced container ################# //\n    // ################################################################### //\n\n    /**\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchPanelHeaderElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader gpf-panel__header fr-modal__header\";\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w\";\n        divTitle.innerHTML = \"Recherche avancée\";\n        container.appendChild(divTitle);\n\n        var divClose = document.createElement(\"button\");\n        divClose.id = this._addUID(\"GPadvancedSearchClose\");\n        divClose.className = \"GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        divClose.title = \"Fermer la recherche avancée\";\n\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                var id = \"#GPsearchInput-\" + self._uid;\n                document.querySelector(id + \" input\").disabled = false;\n                // only if displayButtonClose option is set to true\n                if (document.querySelector(id + \" .GPsearchInputReset\")) {\n                    document.querySelector(id + \" .GPsearchInputReset\").disabled = false;\n                }\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n                }\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                // document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).style.display = \"inline-block\";\n                document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).setAttribute(\"aria-pressed\", false);\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                var id = \"#GPsearchInput-\" + self._uid;\n                document.querySelector(id + \" input\").disabled = false;\n                // only if displayButtonClose option is set to true\n                if (document.querySelector(id + \" .GPsearchInputReset\")) {\n                    document.querySelector(id + \" .GPsearchInputReset\").disabled = false;\n                }\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n                }\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                // document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).style.display = \"inline-block\";\n                document.getElementById(self._addUID(\"GPshowAdvancedSearch\")).setAttribute(\"aria-pressed\", false);\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPadvancedSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            });\n        }\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPelementHidden gpf-visible\"; // afficher en dsfr\n        span.innerText = \"Fermer\";\n\n        divClose.appendChild(span);\n\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * @param {Object[]} advancedSearchCodes - codes\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchPanelFormElement : function (advancedSearchCodes) {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPadvancedSearchForm\");\n        form.className = \"gpf-panel__content fr-modal__content\";\n        form.addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n            // data\n            var data = [];\n            // liste des attributs de la ressource de geocodage\n            var id = \"#GPadvancedSearchFilters-\" + self._uid;\n            var matchesFilters = document.querySelectorAll(id + \" > div > div > input,select#category\");            \n            for (var i = 0; i < matchesFilters.length; i++) {\n                var element = matchesFilters[i];\n                data.push({\n                    key : element.name,\n                    value : element.value\n                });\n            }\n\n            // gestionnaire d'evenement :\n            // on récupère les valeurs de saisies pour requête sur le service de geocodage\n            self.onGeocodingAdvancedSearchSubmit(e, data);\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n            document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-hidden\", \"gpf-visible\");\n\n            return false;\n        });\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput gpf-flex-column \";\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPadvancedSearchCodeLabel gpf-label fr-label\";\n        label.innerHTML = \"Recherche par\";\n        div.appendChild(label);\n\n        var select = this._createAdvancedSearchFormCodeElement(advancedSearchCodes);\n        div.appendChild(select);\n\n        // FIXME on decompose la fonction pour les besoins du controle,\n        // on ajoutera ces childs à la main...\n\n        // var filters = this._createAdvancedSearchFormFiltersElement ();\n        // form.appendChild(filters);\n\n        // var input = this._createAdvancedSearchFormInputElement ();\n        // form.appendChild(input);\n\n        form.appendChild(div);\n\n        return form;\n    },\n\n    /**\n     * @param {Object[]} codes - codes\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFormCodeElement : function (codes) {\n        // contexte d'execution\n        var self = this;\n\n        var select = document.createElement(\"select\");\n        select.id = this._addUID(\"GPadvancedSearchCode\");\n        select.title = \"Choisir un type de recherche\";\n        select.className = \"GPadvancedSearchCode gpf-select fr-select\";\n        select.addEventListener(\"change\", function (e) {\n            // var idx   = e.target.selectedIndex;\n            // var value = e.target.options[idx].value;\n            // gestionnaire d'evenement :\n            // permet de recuperer des informations diverses...\n            self.onGeocodingAdvancedSearchCodeChange(e);\n        }, false);\n\n        // liste statique au cas où des codes n'ont pas été passés en entrée\n        if (!codes) {\n            codes = [{\n                id : \"PositionOfInterest\",\n                title : \"Lieux/toponymes\"\n            }, {\n                id : \"StreetAddress\",\n                title : \"Adresses\"\n            }, {\n                id : \"CadastralParcel\",\n                title : \"Parcelles cadastrales\"\n            }];\n        }\n\n        for (var i = 0; i < codes.length; i++) {\n            var option = document.createElement(\"option\");\n            option.value = codes[i].id;\n            option.text = codes[i].title;\n            select.appendChild(option);\n        }\n\n        return select;\n    },\n\n    /**\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFormInputElement : function () {\n        var input = document.createElement(\"input\");\n        input.type = \"submit\";\n        input.id = this._addUID(\"GPadvancedSearchSubmit\");\n        input.className = \"GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary\";\n        input.value = \"Chercher\";\n\n        return input;\n    },\n\n    /**\n     * Filters geocoding.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFormFiltersElement : function () {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPadvancedSearchFilters\");\n        return container;\n    },\n\n    /**\n     * Create filter container for resources :\n     * \"PositionOfInterest\", \"StreetAddress\", ...\n     *\n     * @param {String} code - code of geocoding resource\n     * @param {Boolean} display - display\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFiltersTableElement : function (code, display) {\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(code);\n        if (!display) {\n            container.style.display = \"none\";\n        }\n\n        return container;\n    },\n\n    /**\n     * Create filter attribut for a resource :\n     * \"PositionOfInterest\", \"StreetAddress\", ...\n     * Research filters are filled in Javascript depending on developer choice\n     *\n     * @param {Object} filterAttributes - filter attributes :\n     * @param {String} filterAttributes.code - code of geocoding resource\n     * @param {String} filterAttributes.name - ID\n     * @param {String} filterAttributes.title - label\n     * @param {String} filterAttributes.description - description\n     * @param {String} filterAttributes.value - value\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createAdvancedSearchFiltersAttributElement : function (filterAttributes) {\n        // INFORMATION\n        // cette methode peut être appelée si le document n'existe pas, elle\n        // permet ainsi de creer une div sans insertion dans le container...\n\n        var container = null;\n        var name = filterAttributes.name;\n        var title = filterAttributes.title;\n        var description = filterAttributes.description;\n        var code = filterAttributes.code;\n        var value = filterAttributes.value;\n\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput gpf-flex-column \";\n\n        var label = document.createElement(\"label\");\n        label.className = \"GPadvancedSearchFilterLabel gpf-label fr-label\";\n        label.htmlFor = name;\n        label.title = description || title;\n        label.innerHTML = title;\n        div.appendChild(label);\n\n        if (name === \"category\") {\n            var select = document.createElement(\"select\");\n            select.id = name;\n            select.name = name;\n            select.title = title;\n            select.className = \"GPadvancedSearchFilterInput gpf-select fr-select\";\n            if (value) {\n                if (Array.isArray(value)) {\n                    for (var i = 0; i < value.length; i++) {\n                        var option = document.createElement(\"option\");\n                        option.value = value[i];\n                        option.text = value[i];\n                        select.appendChild(option);\n                    }\n                }\n            }\n            div.appendChild(select);\n        } else {\n            var input = document.createElement(\"input\");\n            input.id = name;\n            input.className = \"GPadvancedSearchFilterInput gpf-input fr-input\";\n            input.type = \"text\";\n            input.name = name;\n            if (value) {\n                if (Array.isArray(value)) {\n                    var listId = name + \"_list\";\n                    input.setAttribute(\"list\", listId);\n                    var dl = document.createElement(\"datalist\");\n                    dl.id = listId;\n                    for (var i = 0; i < value.length; ++i) {\n                        var option = document.createElement(\"option\");\n                        option.value = value[i];\n                        dl.appendChild(option);\n                    }\n                    div.appendChild(dl);\n                } else {\n                    input.value = value;\n                }\n            }\n            div.appendChild(input);\n        }\n\n        container = document.getElementById(this._addUID(code));\n\n        if (container) {\n            container.appendChild(div);\n        } else {\n            // le container, c'est la div !\n            container = div;\n        }\n\n        return container;\n    },\n\n    // ################################################################### //\n    // ################## Geocoding results container #################### //\n    // ################################################################### //\n\n    /**\n     * @returns {DOMElement} DOM element\n     */\n    _createGeocodeResultsHeaderElement : function () {\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader gpf-panel__header fr-modal__header\";\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w\";\n        divTitle.innerHTML = \"Résultats de la recherche\";\n        container.appendChild(divTitle);\n\n        var divClose = document.createElement(\"button\");\n        divClose.id = this._addUID(\"GPgeocodeResultsClose\");\n        divClose.className = \"GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        divClose.title = \"Fermer la fenêtre de résultats\";\n\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n            });\n        }\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPelementHidden gpf-visible\"; // afficher en dsfr\n        span.innerText = \"Fermer\";\n\n        divClose.appendChild(span);\n\n        container.appendChild(divClose);\n\n        return container;\n    },\n\n    /**\n     * Geocoding results list.\n     *\n     * @returns {DOMElement} DOM element\n     */\n    _createGeocodeResultsListElement : function () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.id = this._addUID(\"GPgeocodeResults\");\n        container.className = \"gpf-panel__list\";\n        container.setAttribute(\"tabindex\", \"0\");\n\n        if (container.addEventListener) {\n            container.addEventListener(\"click\", function (e) {\n                if (!e.ctrlKey) {\n                    document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                    document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                }\n                self.onGeocodedResultsItemClick(e);\n            }, false);\n        } else if (container.attachEvent) {\n            container.attachEvent(\"onclick\", function (e) {\n                if (!e.ctrlKey) {\n                    document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                    document.getElementById(self._addUID(\"GPgeocodeResultsList\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                }\n                self.onGeocodedResultsItemClick(e);\n            });\n        }\n        // Results are dynamically filled in Javascript by geocoding service\n        // <div class=\"GPautoCompleteProposal\">...</div>\n\n        return container;\n    },\n\n    /**\n     * Geocoding result.\n     * Results are dynamically filled in Javascript by geocoding service\n     *\n     * TODO formaliser le contenu des reponses\n     * FIXME formater la reponse en amont !\n     *\n     * @param {Object} location - suggested or geocoded location results\n     * @param {Number} id - ID\n     */\n    _createGeocodedLocationElement : function (location, id) {\n        var container = document.getElementById(this._addUID(\"GPgeocodeResults\"));\n\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GeocodedLocation_\" + id);\n        div.className = \"GPautoCompleteProposal gpf-panel__items\";\n\n        if (typeof location === \"string\") {\n            div.innerHTML = location;\n        } else {\n            div.innerHTML = GeocodeUtils.getGeocodedLocationFreeform(location);\n        }\n\n        container.appendChild(div);\n    },\n\n    // ################################################################### //\n    // ################## Coordinate search container #################### //\n    // ################################################################### //\n\n    _createCoordinateSearchPanelHeaderElement () {\n        // contexte d'execution\n        var self = this;\n\n        var container = document.createElement(\"div\");\n        container.className = \"GPpanelHeader gpf-panel__header fr-modal__header\";\n\n        var divTitle = document.createElement(\"div\");\n        divTitle.className = \"GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w\";\n        divTitle.innerHTML = \"Recherche par coordonnées\";\n        container.appendChild(divTitle);\n\n        var divClose = document.createElement(\"button\");\n        divClose.id = this._addUID(\"GPcoordinateSearchClose\");\n        divClose.className = \"GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w\";\n        divClose.title = \"Fermer la recherche par coordonnées\";\n\n        if (divClose.addEventListener) {\n            divClose.addEventListener(\"click\", function () {\n                var id = \"#GPsearchInput-\" + self._uid;\n                document.querySelector(id + \" input\").disabled = false;\n                // only if displayButtonClose option is set to true\n                if (document.querySelector(id + \" .GPsearchInputReset\")) {\n                    document.querySelector(id + \" .GPsearchInputReset\").disabled = false;\n                }\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n                }\n                document.getElementById(self._addUID(\"GPshowSearchByCoordinate\")).setAttribute(\"aria-pressed\", false);\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                self.onCoordinateSearchClose();\n            }, false);\n        } else if (divClose.attachEvent) {\n            divClose.attachEvent(\"onclick\", function () {\n                var id = \"#GPsearchInput-\" + self._uid;\n                document.querySelector(id + \" input\").disabled = false;\n                // only if displayButtonClose option is set to true\n                if (document.querySelector(id + \" .GPsearchInputReset\")) {\n                    document.querySelector(id + \" .GPsearchInputReset\").disabled = false;\n                }\n                if (checkDsfr()) {\n                    document.querySelector(\"#GPshowSearchEnginePicto-\" + self._uid).disabled = false;\n                }\n                document.getElementById(self._addUID(\"GPshowSearchByCoordinate\")).setAttribute(\"aria-pressed\", false);\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n                document.getElementById(self._addUID(\"GPcoordinateSearchPanel\")).classList.replace(\"gpf-visible\", \"gpf-hidden\");\n                self.onCoordinateSearchClose();\n            });\n        }\n\n        var span = document.createElement(\"span\");\n        span.className = \"GPelementHidden gpf-visible\"; // afficher en dsfr\n        span.innerText = \"Fermer\";\n\n        divClose.appendChild(span);\n\n        container.appendChild(divClose);\n\n        return container;\n    },\n    _createCoordinateSearchPanelFormElement () {\n        // contexte d'execution\n        var self = this;\n\n        var form = document.createElement(\"form\");\n        form.id = this._addUID(\"GPcoordinateSearchForm\");\n        form.className = \"gpf-panel__content fr-modal__content\";\n        form.addEventListener(\"submit\", function (e) {\n            e.preventDefault();\n            self.onShowSearchByCoordinateClick();\n            return false;\n        });\n\n        return form;\n    },\n\n    __createCoordinateSearchDivElement () {\n        var div = document.createElement(\"div\");\n        div.className = \"GPflexInput gpf-flex-column \";\n        return div;\n    },\n\n    _createCoordinateSearchSystemsLabelElement () {\n        var label = document.createElement(\"label\");\n        label.className = \"GPcoordinateSearchSystemsLabel gpf-label fr-label\";\n        label.innerHTML = \"Système de référence\";\n        return label;\n    },\n    _setCoordinateSearchSystemsSelectElement (systems) {\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchSystem\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchSystem\")).remove();\n        }\n        // contexte d'execution\n        var context = this;\n\n        var selectSystem = document.createElement(\"select\");\n        selectSystem.id = this._addUID(\"GPcoordinateSearchSystem\");\n        selectSystem.title = \"Choisir un système de réference\";\n        selectSystem.className = \"GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select\";\n        selectSystem.addEventListener(\"change\", function (e) {\n            context.onCoordinateSearchSystemChange(e);\n        });\n\n        for (var i = 0; i < systems.length; i++) {\n            var obj = systems[i];\n            var option = document.createElement(\"option\");\n            option.value = obj.code;\n            option.text = obj.label || i;\n            // option.label = obj.label;\n            selectSystem.appendChild(option);\n        }\n\n        return selectSystem;\n    },\n\n    _createCoordinateSearchUnitsLabelElement () {\n        var label = document.createElement(\"label\");\n        label.className = \"GPcoordinateSearchUnitsLabel gpf-label fr-label\";\n        label.innerHTML = \"Unités\";\n        return label;\n    },\n    _setCoordinateSearchUnitsSelectElement (units) {\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchUnits\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchUnits\")).remove();\n        }\n        // contexte d'execution\n        var context = this;\n\n        var selectUnits = document.createElement(\"select\");\n        selectUnits.id = this._addUID(\"GPcoordinateSearchUnits\");\n        selectUnits.title = \"Choisir un type d'unité\";\n        selectUnits.className = \"GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select\";\n        selectUnits.addEventListener(\"change\", function (e) {\n            context.onCoordinateSearchUnitsChange(e);\n        });\n\n        for (var j = 0; j < units.length; j++) {\n            var obj = units[j];\n            var option = document.createElement(\"option\");\n            option.value = (obj.code) ? obj.code : j;\n            option.text = obj.label || j;\n            // option.label = obj.label;\n            selectUnits.appendChild(option);\n        }\n\n        return selectUnits;\n    },\n\n    /**\n     * update Label\n     * @param {String} type - Geographical or Metric\n     * @returns {DOMElement} label\n     */\n    _setCoordinateSearchLngLabelElement (type) {\n        // type geographical ou metric\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchLngLabel\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchLngLabel\")).remove();\n        }\n        var labelLng = document.createElement(\"label\");\n        labelLng.className = \"GPcoordinateSearchLabel gpf-label fr-label\";\n        labelLng.id = this._addUID(\"GPcoordinateSearchLngLabel\");\n        labelLng.htmlFor = \"coordinate-lng\";\n        labelLng.innerHTML = (type === \"Geographical\") ? \"Longitude :\" : \"Y :\";\n\n        return labelLng;\n    },\n    /**\n     * update Input coordinate\n     * @param {String} code - ex. DMS : degrés sexadecimaux\n     * @returns {DOMElement} input\n     */\n    _setCoordinateSearchLngInputElement (code) {\n        // code DMS ou other\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchLngInput\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchLngInput\")).remove();\n        }\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchLngDMS\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchLngDMS\")).remove();\n        }\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPcoordinateSearchLngInput\");\n        input.className = \"GPcoordinateSearchInput gpf-input fr-input\";\n        input.title = \"Saisir des coordonnées\";\n        input.name = \"coordinate-lng\";\n        input.type = \"number\";\n        input.step = \"any\";\n        input.required = \"\";\n        switch (code) {\n            case \"DMS\":\n                input.title += \" géographiques (en sexa)\";\n                input.className = \"GPelementHidden gpf-hidden\";\n                return this._setCoordinateSearchLngDMSElement();\n                break;\n            case \"DEC\":\n                input.title += \" géographiques (en decimal)\";\n                input.min = \"-180\";\n                input.max = \"180\";\n                break;\n            case \"M\":\n                input.title += \" cartésiennes (en mètre)\";\n                break;\n            case \"KM\":\n                input.title += \" cartésiennes (en kilomètre)\";\n                break;\n            default:\n                break;\n        }\n        return input;\n    },\n    _setCoordinateSearchLngDMSElement () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPcoordinateSearchLngDMS\");\n        div.innerHTML = `\n        <div class=\"GPflexInput gpf-flex\">\n            <input step=\"1\"\n                id=\"GPcoordinatSearchInputSexLonDeg\"\n                class=\"gpf-input fr-input\"\n                name=\"inputSexLonDeg\"\n                title=\"Saisir une valeur de degré entre 0° et 180°\"\n                type=\"number\"\n                required=\"\"\n                min=\"0\"\n                max=\"180\">\n            <label>°</label>\n            <input step=\"1\"\n                id=\"GPcoordinatSearchInputSexLonMin\"\n                class=\"gpf-input fr-input\"\n                name=\"inputSexLonMin\"\n                title=\"Saisir une valeur de minute entre 0' et 59'\"\n                type=\"number\"\n                required=\"\"\n                min=\"0\"\n                max=\"59\">\n            <label>'</label>\n            <input step=\"any\"\n                id=\"GPcoordinatSearchInputSexLonSec\"\n                class=\"gpf-input fr-input\"\n                name=\"inputSexLonSec\"\n                title=\"Saisir une valeur de seconde entre 0'' et 59''\"\n                type=\"number\"\n                required=\"\"\n                min=\"0\"\n                max=\"59.9999\">\n            <label>\"</label>\n            <select\n                id=\"GPcoordinatSearchInputSexLonToward\"\n                class=\"GPselect gpf-select fr-select\"\n                title=\"Saisir une direction pour Est et 0uest\"\n                name=\"inputSexLonToward\">\n                <option value=\"O\">O</option>\n                <option value=\"E\" selected=\"\">E</option>\n            </select>\n        </div>\n        `;\n        return div;\n    },\n    /**\n     * update Label\n     * @param {String} type - Geographical or Metric\n     * @returns {DOMElement} label\n     */\n    _setCoordinateSearchLatLabelElement (type) {\n        // type geographical ou metric\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchLatLabel\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchLatLabel\")).remove();\n        }\n        var labelLat = document.createElement(\"label\");\n        labelLat.className = \"GPcoordinateSearchLabel gpf-label fr-label\";\n        labelLat.id = this._addUID(\"GPcoordinateSearchLatLabel\");\n        labelLat.htmlFor = \"coordinate-lat\";\n        labelLat.innerHTML = (type === \"Geographical\") ? \"Latitude :\" : \"X :\";\n\n        return labelLat;\n    },\n    /**\n     * update Input coordinate\n     * @param {String} code - ex. DMS : degrés sexadecimaux\n     * @returns {DOMElement} input\n     */\n    _setCoordinateSearchLatInputElement (code) {\n        // code DMS ou other\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchLatInput\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchLatInput\")).remove();\n        }\n        if (document.getElementById(this._addUID(\"GPcoordinateSearchLatDMS\"))) {\n            document.getElementById(this._addUID(\"GPcoordinateSearchLatDMS\")).remove();\n        }\n        var input = document.createElement(\"input\");\n        input.id = this._addUID(\"GPcoordinateSearchLatInput\");\n        input.className = \"GPcoordinateSearchInput gpf-input fr-input\";\n        input.title =\"Saisir des coordonnées\";\n        input.name = \"coordinate-lat\";\n        input.type = \"number\";\n        input.step = \"any\";\n        input.required = \"\";\n        switch (code) {\n            case \"DMS\":\n                input.title += \" géographiques (en sexa)\";\n                input.className = \"GPelementHidden gpf-hidden\";\n                return this._setCoordinateSearchLatDMSElement();\n                break;\n            case \"DEC\":\n                input.title += \" géographiques (en decimal)\";\n                input.min = \"-180\";\n                input.max = \"180\";\n                break;\n            case \"M\":\n                input.title += \" cartésiennes (en mètre)\";\n                break;\n            case \"KM\":\n                input.title += \" cartésiennes (en kilomètre)\";\n                break;\n            default:\n                break;\n        }\n        return input;\n    },\n    _setCoordinateSearchLatDMSElement () {\n        var div = document.createElement(\"div\");\n        div.id = this._addUID(\"GPcoordinateSearchLatDMS\");\n        div.innerHTML = `\n        <div class=\"GPflexInput gpf-flex\">\n            <input step=\"1\"\n                id=\"GPcoordinatSearchInputSexLatDeg\"\n                class=\"gpf-input fr-input\"\n                name=\"inputSexLatDeg\"\n                title=\"Saisir une valeur de degré entre 0° et 85°\"\n                type=\"number\"\n                required=\"\"\n                min=\"0\"\n                max=\"85\">\n            <label>°</label>\n            <input step=\"1\"\n                id=\"GPcoordinatSearchInputSexLatMin\"\n                class=\"gpf-input fr-input\"\n                name=\"inputSexLatMin\"\n                title=\"Saisir une valeur de minute entre 0' et 59'\"\n                type=\"number\"\n                required=\"\"\n                min=\"0\"\n                max=\"59\">\n            <label>'</label>\n            <input step=\"any\"\n                id=\"GPcoordinatSearchInputSexLatSec\"\n                class=\"gpf-input fr-input\"\n                name=\"inputSexLatSec\"\n                title=\"Saisir une valeur de seconde entre 0' et 59'\"\n                type=\"number\"\n                required=\"\"\n                min=\"0\"\n                max=\"59.9999\">\n            <label>\"</label>\n            <select\n                id=\"GPcoordinatSearchInputSexLatToward\"\n                class=\"GPselect gpf-select fr-select\"\n                title=\"Saisir une direction pour Nord et Sud\"\n                name=\"inputSexLatToward\">\n                <option value=\"N\">N</option>\n                <option value=\"S\">S</option>\n            </select>\n        </div>\n        `;\n        return div;\n    },\n\n    /**\n     * submit\n     * @returns {DOMElement} input\n     */\n    _createCoordinateSearchSubmitElement () {\n        var input = document.createElement(\"input\");\n        input.type = \"submit\";\n        input.id = this._addUID(\"GPcoordinateSearchSubmit\");\n        input.className = \"GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary\";\n        input.value = \"Chercher\";\n        return input;\n    },\n};\n\nexport default SearchEngineDOM;\n","// import CSS\nimport \"../../CSS/Controls/SearchEngine/GPFsearchEngine.css\";\n// import \"../../CSS/Controls/SearchEngine/GPFsearchEngineStyle.css\";\n// import OpenLayers\n// import Control from \"ol/control/Control\";\nimport Control from \"../Control\";\nimport Overlay from \"ol/Overlay\";\nimport {\n    transform as olProjTransform,\n    get as olProjGet,\n    transformExtent as olProjTransformExtent\n} from \"ol/proj\";\n// import geoportal library access\nimport Gp from \"geoportal-access-lib\";\n// import local\nimport Config from \"../../Utils/Config\";\nimport Logger from \"../../Utils/LoggerByDefault\";\nimport Utils from \"../../Utils/Helper\";\nimport Markers from \"../Utils/Markers\";\nimport Interactions from \"../Utils/Interactions\";\nimport SelectorID from \"../../Utils/SelectorID\";\nimport MathUtils from \"../../Utils/MathUtils\";\nimport SearchEngineUtils from \"../../Utils/SearchEngineUtils\";\nimport GeocodeUtils from \"../../Utils/GeocodeUtils\";\nimport CRS from \"../../CRS/CRS\";\n// import local des layers\nimport GeoportalWMS from \"../../Layers/LayerWMS\";\nimport GeoportalWMTS from \"../../Layers/LayerWMTS\";\nimport GeoportalMapBox from \"../../Layers/LayerMapBox\";\n// Service\nimport Search from \"../../Services/Search\";\n// DOM\nimport SearchEngineDOM from \"./SearchEngineDOM\";\nimport checkDsfr from \"../Utils/CheckDsfr\";\n\nvar logger = Logger.getLogger(\"searchengine\");\n\n/**\n * @classdesc\n * SearchEngine control\n *\n * @constructor\n * @extends {ol.control.Control}\n * @type {ol.control.SearchEngine}\n * @alias ol.control.SearchEngine\n * @param {Object}  options - control options\n * @param {String}  [options.apiKey] - API key. The key \"calcul\" is used by default.\n * @param {Boolean} [options.ssl = true] - use of ssl or not (default true, service requested using https protocol)\n * @param {Boolean} [options.collapsed = true] - collapse mode, true by default\n * @param {Boolean} [options.collapsible = true] - force control to be collapsed or not, true by default.\n * @param {String}  [options.direction = \"start\"] - TODO : position of picto, by default : \"start\"\n * @param {String}  [options.placeholder] - Placeholder in search bar. Default is \"Rechercher un lieu, une adresse\".\n * @param {Boolean} [options.displayMarker = true] - set a marker on search result, defaults to true.\n * @param {String}  [options.markerStyle = \"lightOrange\"] - Marker style. Currently possible values are \"lightOrange\" (default value), \"darkOrange\", \"red\" and \"turquoiseBlue\".\n * @param {Boolean} [options.displayButtonAdvancedSearch = false] - False to disable advanced search tools (it will not be displayed). Default is false (not displayed)\n * @param {Boolean} [options.displayButtonGeolocate = false] - False to disable advanced search tools (it will not be displayed). Default is false (not displayed)\n * @param {Boolean} [options.displayButtonCoordinateSearch = false] - False to disable advanced search tools (it will not be displayed). Default is false (not displayed)\n * @param {Boolean} [options.displayButtonClose = true] - False to disable advanced search tools (it will not be displayed). Default is true (displayed)\n * @param {Object}  [options.coordinateSearch] - coordinates search options.\n * @param {DOMElement} [options.coordinateSearch.target = null] - TODO : target location of results window. By default under the search bar.\n * @param {Array}   [options.coordinateSearch.units] - list of coordinates units, to be displayed in control units list.\n *      Values may be \"DEC\" (decimal degrees), \"DMS\" (sexagecimal) for geographical coordinates,\n *      and \"M\" or \"KM\" for metric coordinates\n * @param {Array}   [options.coordinateSearch.systems] - list of projection systems, default are Geographical (\"EPSG:4326\"), Web Mercator (\"EPSG:3857\") and Lambert 93 (\"EPSG:2154\").\n *      Each array element (=system) is an object with following properties :\n * @param {String}  [options.coordinateSearch.systems.crs] - Proj4 crs alias (from proj4 defs). e.g. : \"EPSG:4326\". Required\n * @param {String}  [options.coordinateSearch.systems.label] - CRS label to be displayed in control. Default is crs code (e.g. \"EPSG:4326\")\n * @param {String}  [options.coordinateSearch.systems.type] - CRS units type for coordinates conversion : \"Geographical\" or \"Metric\". Default: \"Geographical\"\n * @param {Object}  [options.advancedSearch] - advanced search options for geocoding (filters). Properties can be found among geocode options.filterOptions (see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~geocode Gp.Services.geocode})\n * @param {DOMElement} [options.advancedSearch.target = null] - TODO : target location of results window. By default under the search bar.\n * @param {Object}  [options.resources] - resources to be used by geocode and autocompletion services :\n * @param {String}  [options.resources.geocode = \"location\"] - resources geocoding, by default : \"location\"\n * @param {Array}   [options.resources.autocomplete] - resources autocompletion, by default : [\"PositionOfInterest\", \"StreetAddress\"]\n * @param {Boolean} [options.resources.search = false] - false to disable search service, by default : \"false\"\n * @param {Object}  [options.searchOptions = {}] - options of search service\n * @param {Boolean} [options.searchOptions.addToMap = true] - add layer automatically to map, defaults to true.\n * @param {String}  [options.searchOptions.filterServices] - filter on a list of search services, each field is separated by a comma. \"WMTS,TMS\" by default\n * @param {String}  [options.searchOptions.filterVectortiles] - filter on list of search layers only on service TMS, each field is separated by a comma. \"PLAN.IGN, ...\" by default\n * @param {Boolean} [options.searchOptions.updateVectortiles = false] - updating the list of search layers only on service TMS\n * @param {Object}  [options.searchOptions.serviceOptions] - options of search service\n * @param {Sring}   [options.searchOptions.serviceOptions.url] - url of service\n * @param {String}  [options.searchOptions.serviceOptions.index] - index of search, \"standard\" by default\n * @param {String}  [options.searchOptions.serviceOptions.fields] - list of search fields, each field is separated by a comma. \"title,layer_name\" by default\n * @param {Number}  [options.searchOptions.serviceOptions.size] - number of response in the service. 1000 by default\n * @param {Number}  [options.searchOptions.serviceOptions.maximumResponses] - number of results in the response. 10 by default\n * @param {Object}  [options.geocodeOptions = {}] - options of geocode service (see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~geocode Gp.Services.geocode})\n * @param {Object}  [options.geocodeOptions.serviceOptions] - options of geocode service\n * @param {Object}  [options.autocompleteOptions = {}] - options of autocomplete service (see {@link http://ignf.github.io/geoportal-access-lib/latest/jsdoc/module-Services.html#~autoComplete Gp.Services.autoComplete})\n * @param {Object}  [options.autocompleteOptions.serviceOptions] - options of autocomplete service\n * @param {Boolean} [options.autocompleteOptions.triggerGeocode = false] - trigger a geocoding request if the autocompletion does not return any suggestions, false by default\n * @param {Number}  [options.autocompleteOptions.triggerDelay = 1000] - waiting time before sending the geocoding request, 1000ms by default\n * @param {Sting|Numeric|Function} [options.zoomTo] - zoom to results, by default, current zoom.\n *       Value possible : auto or zoom level.\n *       Possible to overload it with a function :\n *       zoomTo : function (info) {\n *           // do some stuff...\n *           return zoom;\n *       }\n * @fires searchengine:autocomplete:click\n * @fires searchengine:geocode:click\n * @fires searchengine:search:click\n * @todo option : direction (start|end) de la position du picto (loupe)\n * @todo option : choix du target pour les fenetres geocodage ou recherche par coordonnées\n * @example\n *  var SearchEngine = ol.control.SearchEngine({\n *      apiKey : \"CLEAPI\",\n *      collapsed : true,\n *      collapsible : true,\n *      displayButtonAdvancedSearch : true,\n *      displayButtonGeolocate : true,\n *      displayButtonCoordinateSearch : true,\n *      resources : {\n *          geocode : [\"StreetAddress\", \"PositionOfInterest\"],\n *          autocomplete : [\"StreetAddress\"],\n *          search : false\n *      },\n *      advancedSearch : {\n *          target : document.getElementById(\"dialog\"),\n *          PositionOfInterest : [{name : \"municipality\", title : \"Ville\"}],\n *          StreetAddress : [{...}]\n *      },\n *      coordinateSearch : {\n *          target : null\n *          systems : [\n *            {\n *              \"crs\" : \"EPSG:3857\",\n *              \"label\" : \"Web Mercator\",\n *              \"type\" : \"Metric\"\n *            },\n *            {\n *              \"crs\" : \"EPSG:4326\",\n *              \"label\" : \"Géographiques\",\n *              \"type\" : \"Geographical\"\n *            }\n *          ],\n *          units : [\"DEC\", \"DMS\"]\n *      },\n *      geocodeOptions : {},\n *      autocompleteOptions : {},\n *      searchOptions : {}\n *  });\n *\n *  SearchEngine.on(\"searchengine:autocomplete:click\", function (e) {\n *    console.warn(\"autocomplete\", e.location);\n *  });\n *  SearchEngine.on(\"searchengine:search:click\", function (e) {\n *    console.warn(\"search\", e.suggest);\n *  });\n *  SearchEngine.on(\"searchengine:geocode:click\", function (e) {\n *    console.warn(\"geocode\", e.location);\n *  });\n */\nvar SearchEngine = class SearchEngine extends Control {\n\n    /**\n     * See {@link ol.control.SearchEngine}\n     * @module SearchEngine\n     * @alias module:~controls/SearchEngine\n     * @param {*} options - options\n     * @example\n     * import SearchEngine from \"gpf-ext-ol/controls/SearchEngine\"\n     * ou\n     * import { SearchEngine } from \"gpf-ext-ol\"\n     */\n    constructor (options) {\n        options = options || {};\n\n        // call ol.control.Control constructor\n        super({\n            element : options.element,\n            target : options.target,\n            render : options.render\n        });\n\n        if (!(this instanceof SearchEngine)) {\n            throw new TypeError(\"ERROR CLASS_CONSTRUCTOR\");\n        }\n\n        // initialisation du composant\n        this.initialize(options);\n\n        // // Widget main DOM container\n        this.container = this._initContainer();\n\n        // ajout du container\n        (this.element) ? this.element.appendChild(this.container) : this.element = this.container;\n\n        return this;\n    }\n\n    // ################################################################### //\n    // ##################### public methods ############################## //\n    // ################################################################### //\n\n    /**\n     * Overwrite OpenLayers setMap method\n     *\n     * @param {ol.Map} map - Map.\n     */\n    setMap (map) {\n        if (!map) {\n            this._clearResults();\n        }\n\n        // mode \"collapsed\"\n        if (!this.collapsed) {\n            this._showSearchEngineButton.setAttribute(\"aria-pressed\", true);\n        }\n\n        // on appelle la méthode setMap originale d'OpenLayers\n        super.setMap(map);\n\n        // position\n        if (this.options.position) {\n            this.setPosition(this.options.position);\n        }\n    }\n\n    /**\n     * Returns true if widget is collapsed (minimized), false otherwise\n     *\n     * @returns {Boolean} collapsed - true if widget is collapsed\n     */\n    getCollapsed () {\n        return this.collapsed;\n    }\n\n    /**\n     * Collapse or display widget main container\n     *\n     * @param {Boolean} collapsed - True to collapse widget, False to display it\n     */\n    setCollapsed (collapsed) {\n        if (collapsed === undefined) {\n            logger.log(\"[ERROR] SearchEngine:setCollapsed - missing collapsed parameter\");\n            return;\n        }\n\n        if (!this.options.collapsible) {\n            return; // on interdit le mode pliable !\n        }\n\n        if ((collapsed && this.collapsed) || (!collapsed && !this.collapsed)) {\n            return;\n        }\n\n        this._showSearchEngineButton.click();\n        this.collapsed = collapsed;\n    }\n\n    /**\n     * Get locations data from geocode service\n     *\n     * @returns {Object} data - locations\n     */\n    getData () {\n        return this._geocodedLocations;\n    }\n\n    // ################################################################### //\n    // ##################### init component ############################## //\n    // ################################################################### //\n\n    /**\n     * Initialize SearchEngine control (called by SearchEngine constructor)\n     *\n     * @param {Object} options - constructor options\n     * @private\n     */\n    initialize (options) {\n        this._checkInputOptions(options);\n\n        // define default options\n        this.options = {\n            collapsed : true,\n            collapsible : true,\n            zoomTo : \"\",\n\n            resources : {\n                geocode : [],\n                autocomplete : [],\n                search : false\n            },\n            displayButtonClose : true,\n            displayButtonAdvancedSearch : false,\n            displayButtonGeolocate : false,\n            displayButtonCoordinateSearch : false,\n            advancedSearch : {},\n            coordinateSearch : {},\n            searchOptions : {\n                addToMap : true,\n                serviceOptions : {\n                    maximumResponses : 5,\n                }\n            },\n            geocodeOptions : {\n                serviceOptions : {}\n            },\n            autocompleteOptions : {\n                serviceOptions : {\n                    maximumResponses : 5,\n                },\n                triggerGeocode : false,\n                triggerDelay : 1000\n            },\n            displayMarker : true,\n            markerStyle : \"lightOrange\",\n            placeholder : \"Rechercher un lieu, une adresse\",\n            splitResults : true,\n        };\n\n        // merge with user options\n        Utils.mergeParams(this.options, options);\n        if (this.options.resources.geocode === \"\") {\n            this.options.resources.geocode = [\"PositionOfInterest\", \"StreetAddress\"];\n        }\n        if (this.options.resources.autocomplete.length === 0) {\n            this.options.resources.autocomplete = [\"PositionOfInterest\", \"StreetAddress\"];\n        }\n        if (this.options.resources.search) {\n            // configuration avec gestion des options surchargées du service\n            if (this.options.searchOptions) {\n                if (this.options.searchOptions.serviceOptions) {\n                    if (this.options.searchOptions.serviceOptions.url) {\n                        Search.setUrl(this.options.searchOptions.serviceOptions.url);\n                    }\n                    if (this.options.searchOptions.serviceOptions.fields) {\n                        Search.setFields(this.options.searchOptions.serviceOptions.fields);\n                    }\n                    if (this.options.searchOptions.serviceOptions.index) {\n                        Search.setIndex(this.options.searchOptions.serviceOptions.index);\n                    }\n                    if (this.options.searchOptions.serviceOptions.size) {\n                        Search.setSize(this.options.searchOptions.serviceOptions.size);\n                    }\n                    if (this.options.searchOptions.serviceOptions.maximumResponses) {\n                        Search.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses);\n                    }\n                }\n                if (this.options.searchOptions.filterServices) {\n                    Search.setFiltersByService(this.options.searchOptions.filterServices);\n                }\n                if (this.options.searchOptions.filterVectortiles) {\n                    Search.setFiltersByTMS(this.options.searchOptions.filterVectortiles);\n                }\n                if (this.options.searchOptions.updateVectortiles) {\n                    Search.updateFilterByTMS(); // url par defaut\n                }\n            }\n            // abonnement au service\n            Search.target.addEventListener(\"suggest\", (e) => {\n                logger.debug(e);\n                this._fillSearchedSuggestListContainer(e.detail);\n            });\n        }\n\n        if (!this.options.collapsible) {\n            this.options.collapsed = false; // on interdit le mode pliable !\n        }\n        /** {Boolean} specify if searchEngine control is collapsed (true) or not (false) */\n        this.collapsed = this.options.collapsed;\n\n        // identifiant du contrôle : utile pour suffixer les identifiants CSS (pour gérer le cas où il y en a plusieurs dans la même page)\n        this._uid = SelectorID.generate();\n\n        this._showSearchEngineButton = null;\n\n        // container de l'input de recherche\n        this._inputSearchContainer = null;\n\n        // container des reponses de l'autocompletion / du service de recherche\n        this._autocompleteContainer = null;\n        this._containerResultsLocation = null;\n        this._containerResultsSuggest = null;\n        // Radio buttons correspondants\n        this._radioButtonLocation = null;\n        this._radioButtonSuggest = null;\n\n        // listes des reponses de l'autocompletion\n        this._suggestedLocations = [];\n\n        // container des reponses du geocodage\n        this._geocodedContainer = null;\n\n        // liste des reponses du geocodage\n        this._geocodedLocations = [];\n\n        // container des filtres du geocodage\n        this._filterContainer = null;\n\n        // ressource de geocodage selectionnée pour le geocodage avancé\n        this._currentGeocodingCode = null;\n\n        // localisant\n        this._currentGeocodingLocation = null;\n\n        // liste des filtres du geocodage pour le geocodage avancé\n        this._advancedSearchFilters = {};\n        this._initAdvancedSearchFilters();\n\n        // liste des ressources du geocodage pour le geocodage avancé\n        this._advancedSearchCodes = [];\n        this._initAdvancedSearchCodes();\n\n        // recherche par coordonnées : systemes de projections\n        this._coordinateSearchSystems = [];\n        if (this.options.displayButtonCoordinateSearch) {\n            this._initCoordinateSearchSystems();\n            this._currentCoordinateSearchSystems = this._coordinateSearchSystems[0]; // epsg:4326\n            this._currentCoordinateSearchType = this._coordinateSearchSystems[0].type; // geographical ou metric\n        }\n\n        // recherche par coordonnées : unités\n        this._coordinateSearchUnits = [];\n        if (this.options.displayButtonCoordinateSearch) {\n            this._initCoordinateSearchUnits();\n            this._currentCoordinateSearchUnits = this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code; // decimal\n        }\n\n\n        this._coordinateSearchLngInput = null;\n        this._coordinateSearchLatInput = null;\n\n        // marker\n        this._marker = null;\n\n        // marker style\n        var _markerStyle = this.options.markerStyle;\n        this._markerUrl = (Object.keys(Markers).indexOf(_markerStyle) === -1) ? Markers[\"lightOrange\"] : Markers[_markerStyle];\n\n        // marker display\n        this._displayMarker = this.options.displayMarker;\n\n        // popup\n        this._popupContent = null;\n        this._popupDiv = this._initPopupDiv();\n        this._popupOverlay = null;\n\n        // trigger geocode\n        this._triggerHandler = null;\n    }\n\n    /**\n     * this method is called by this.initialize()\n     * and makes sure input options are correctly formated\n     *\n     * @param {Object} options - options\n     *\n     * @private\n     */\n    _checkInputOptions (options) {\n        var i;\n\n        if (options.resources) {\n            // on vérifie que resources est bien un objet\n            if (typeof options.resources === \"object\") {\n                // ressources de geocodage\n                var geocodeResources = options.resources.geocode;\n                if (geocodeResources) {\n                    // on vérifie que la liste des ressources de geocodage est bien un tableau\n                    if (Array.isArray(geocodeResources)) {\n                        var geocodeResourcesList = [\"StreetAddress\", \"PositionOfInterest\", \"CadastralParcel\", \"Administratif\"];\n                        for (i = 0; i < geocodeResources.length; i++) {\n                            if (geocodeResourcesList.indexOf(geocodeResources[i]) === -1) {\n                                // si la resource n'est pas référencée, on l'enlève\n                                // geocodeResources.splice(i, 1);\n                                logger.log(\"[SearchEngine] options.resources.geocode : \" + geocodeResources[i] + \" is not a resource for geocode\");\n                            }\n                        }\n                    } else {\n                        logger.log(\"[SearchEngine] 'options.resources.geocode' parameter should be an array\");\n                        geocodeResources = null;\n                    }\n                }\n\n                // ressources d'autocompletion\n                var autocompleteResources = options.resources.autocomplete;\n                if (autocompleteResources) {\n                    // on vérifie que la liste des ressources d'autocompletion est bien un tableau\n                    if (Array.isArray(autocompleteResources)) {\n                        var autocompleteResourcesList = [\"StreetAddress\", \"PositionOfInterest\"];\n                        for (i = 0; i < autocompleteResources.length; i++) {\n                            if (autocompleteResourcesList.indexOf(autocompleteResources[i]) === -1) {\n                                // si la resource n'est pas référencée, on l'enlève\n                                // autocompleteResources.splice(i, 1);\n                                logger.log(\"[SearchEngine] options.resources.autocomplete : \" + autocompleteResources[i] + \" is not a resource for autocomplete\");\n                            }\n                        }\n                    } else {\n                        logger.log(\"[SearchEngine] 'options.resources.autocomplete' parameter should be an array\");\n                        autocompleteResources = null;\n                    }\n                }\n            } else {\n                logger.log(\"[SearchEngine] 'resources' parameter should be an object\");\n                options.resources = null;\n            }\n        }\n    }\n\n    /**\n     * this method is called by this.initialize()\n     * and initialize the geocoding resources titles.\n     *\n     * @private\n     */\n    _initAdvancedSearchCodes () {\n        // INFORMATION\n        // on y ajoute les filtres attributaires pour une table de ressources\n        // selectionnée via un evenement (onchange) de la liste deroulante du\n        // menu avancé du geocodage.\n        // cf. onGeocodingAdvancedSearchCodeChange() pour la selection de la\n        // ressource de geocodage à afficher\n\n        var geocodeResources = this.options.resources.geocode;\n        if (geocodeResources === \"location\") {\n            geocodeResources = [\"PositionOfInterest\", \"StreetAddress\", \"CadastralParcel\"];\n        }\n        if (!Array.isArray(geocodeResources)) {\n            geocodeResources = [geocodeResources];\n        }\n        for (var i = 0; i < geocodeResources.length; i++) {\n            switch (geocodeResources[i]) {\n                case \"PositionOfInterest\":\n                    this._advancedSearchCodes.push({\n                        id : \"PositionOfInterest\",\n                        title : \"Lieux/toponymes\"\n                    });\n                    break;\n                case \"StreetAddress\":\n                    this._advancedSearchCodes.push({\n                        id : \"StreetAddress\",\n                        title : \"Adresses\"\n                    });\n                    break;\n                case \"CadastralParcel\":\n                    this._advancedSearchCodes.push({\n                        id : \"CadastralParcel\",\n                        title : \"Parcelles cadastrales\"\n                    });\n                    break;\n                default:\n                    break;\n            }\n        }\n        // par défaut, au cas où aucune ressource passée en option ne correspond à celles attendues\n        if (this._advancedSearchCodes.length === 0) {\n            this._advancedSearchCodes = [{\n                id : \"StreetAddress\",\n                title : \"Adresses\"\n            }, {\n                id : \"PositionOfInterest\",\n                title : \"Lieux/toponymes\"\n            }, {\n                id : \"CadastralParcel\",\n                title : \"Cadastre\"\n            }];\n        }\n\n        logger.log(\"advancedSearchCodes\", this._advancedSearchCodes);\n    }\n\n    /**\n     * this method is called by this.onAdd()\n     * and initialize the advanced geocoding filters.\n     *\n     * @private\n     */\n    _initAdvancedSearchFilters () {\n        // liste des filtres par defauts pour toutes les ressources\n        this._advancedSearchFilters = SearchEngineUtils.advancedSearchFiltersByDefault;\n\n        // on merge les options avancées avec celles par defaut\n        var advancedSearchFiltersCustom = this.options.advancedSearch;\n        Utils.assign(this._advancedSearchFilters, advancedSearchFiltersCustom);\n\n        logger.log(\"advancedSearchFilters\", this._advancedSearchFilters);\n    }\n\n    /**\n     * this method is called by the constructor and initialize the projection\n     * systems.\n     * getting coordinates in the requested projection :\n     * see this.onCoordinateSearchSystemChange()\n     *\n     * @private\n     */\n    _initCoordinateSearchSystems () {\n        // on donne la possibilité à l'utilisateur de modifier\n        // la liste des systèmes à afficher\n        // Ex. this.options.coordinateSearch.systems\n\n        // systemes de projection disponible par defaut\n        var projectionSystemsByDefault = [{\n            label : \"G\\u00e9ographique\",\n            crs : \"EPSG:4326\",\n            type : \"Geographical\"\n        }, {\n            label : \"Web Mercator\",\n            crs : \"EPSG:3857\",\n            type : \"Metric\"\n        }, {\n            label : \"Lambert 93\",\n            crs : \"EPSG:2154\",\n            type : \"Metric\"\n        }];\n\n        var systems = this.options.coordinateSearch.systems;\n        if (systems) {\n            // on ajoute les definitions d'un systeme de reference fournies par l'utilisateur\n            for (var i = 0; i < systems.length; i++) {\n                var sys = systems[i];\n                this._setSystem(sys);\n            }\n        }\n\n        // on ajoute les systèmes de projections par défaut\n        if (this._coordinateSearchSystems.length === 0) {\n            for (var j = 0; j < projectionSystemsByDefault.length; j++) {\n                this._setSystem(projectionSystemsByDefault[j]);\n            }\n        }\n    }\n\n    /**\n     * this method is called by the constructor and initialize the units.\n     * getting coordinates in the requested units :\n     * see this.onCoordinateSearchUnitsChange()\n     *\n     * @private\n     */\n    _initCoordinateSearchUnits () {\n        // on donne la possibilité à l'utilisateur de modifier\n        // la liste des unités à afficher\n        // Ex.\n        // this.options.units : [\"DEC\", \"DMS\"]\n\n        // unités disponible par defaut\n        var projectionUnitsByDefault = {\n            Geographical : [{\n                code : \"DEC\",\n                label : \"degrés décimaux\",\n                format : MathUtils.coordinateToDecimal\n            }, {\n                code : \"DMS\",\n                label : \"degrés sexagésimaux\",\n                format : MathUtils.coordinateToDMS\n            }],\n            Metric : [{\n                code : \"M\",\n                label : \"mètres\",\n                format : MathUtils.coordinateToMeter\n            }, {\n                code : \"KM\",\n                label : \"kilomètres\",\n                format : MathUtils.coordinateToKMeter\n            }]\n        };\n\n        var units = this.options.coordinateSearch.units;\n        if (units) {\n            for (var type in projectionUnitsByDefault) {\n                if (projectionUnitsByDefault.hasOwnProperty(type)) {\n                    var found = false;\n                    for (var j = 0; j < projectionUnitsByDefault[type].length; j++) {\n                        var obj = projectionUnitsByDefault[type][j];\n                        for (var i = 0; i < units.length; i++) {\n                            var unit = units[i];\n                            if (obj.code === unit) {\n                                found = true;\n                                if (!this._coordinateSearchUnits[type]) {\n                                    this._coordinateSearchUnits[type] = [];\n                                }\n                                this._coordinateSearchUnits[type].push(obj);\n                            }\n                        }\n                    }\n                    if (!found) {\n                        this._coordinateSearchUnits[type] = projectionUnitsByDefault[type];\n                    }\n                }\n            }\n        }\n\n        // au cas où...\n        if (typeof this._coordinateSearchUnits === \"object\" && Object.keys(this._coordinateSearchUnits).length === 0) {\n            this._coordinateSearchUnits = projectionUnitsByDefault;\n        }\n    }\n\n    /**\n     * this method is called by this.initialize() and initialize popup div\n     * (to display results information on marker click)\n     *\n     * @return {Object} element - DOM element for popup\n     * @private\n     */\n    _initPopupDiv () {\n        var context = this;\n        var element = document.createElement(\"div\");\n        element.className = \"gp-feature-info-div\";\n        var closer = document.createElement(\"input\");\n        closer.type = \"button\";\n        closer.className = \"gp-styling-button closer\";\n        // on closer click : remove popup\n        closer.onclick = function () {\n            if (context._popupOverlay != null) {\n                context._popupOverlay.setPosition(undefined);\n            }\n            return false;\n        };\n        this._popupContent = document.createElement(\"div\");\n        this._popupContent.className = \"gp-features-content-div\";\n        this._popupContent.style[\"min-width\"] = \"200px\";\n        element.appendChild(this._popupContent);\n        element.appendChild(closer);\n\n        return element;\n    }\n\n    // ################################################################### //\n    // ######################## DOM initialize ########################### //\n    // ################################################################### //\n\n    /**\n     * Create control main container\n     *\n     * @returns {DOMElement} DOM element\n     *\n     * @private\n     */\n    _initContainer () {\n        // create main container\n        var container = this._createMainContainerElement();\n\n        var searchDiv = this._createSearchDivElement();\n        // create search engine picto\n        var picto = this._showSearchEngineButton = this._createShowSearchEnginePictoElement(this.options.collapsible);\n        searchDiv.appendChild(picto);\n\n        // only dsfr : on applique un fond blanc sur une barre de recherche fixe\n        if (!this.options.collapsible) {\n            container.classList.add(\"gpf-widget-color\", \"gpf-widget-padding\");\n        }\n\n        var search = this._inputSearchContainer = this._createSearchInputElement(this.options.placeholder);\n        if (this.options.displayButtonClose) {\n            search.appendChild(this._createSearchResetElement());\n        }\n\n        var context = this;\n        if (search.addEventListener) {\n            search.addEventListener(\"click\", function () {\n                context.onAutoCompleteInputClick();\n            });\n        } else if (search.attachEvent) {\n            search.attachEvent(\"onclick\", function () {\n                context.onAutoCompleteInputClick();\n            });\n        }\n        searchDiv.appendChild(search);\n\n        var buttonsContainer = this._createButtonsElement();\n        var firstLineWrapper = this._createFirstLineWrapper();\n        firstLineWrapper.appendChild(searchDiv);\n        firstLineWrapper.appendChild(buttonsContainer);\n        container.appendChild(firstLineWrapper);\n\n        if (checkDsfr() && this.options.splitResults || this.options.displayButtonAdvancedSearch) {\n            var radioContainer = this._createRadioContainer();\n            container.appendChild(radioContainer);\n        }\n\n        if (checkDsfr() && this.options.splitResults) {\n            var radioElements;\n            [radioElements, this._radioButtonLocation, this._radioButtonSuggest] = this._createRadioElements();\n            radioContainer.appendChild(radioElements);\n        }\n\n        if (this.options.displayButtonAdvancedSearch) {\n            var advancedShow = this._createShowAdvancedSearchElement();\n            radioContainer.appendChild(advancedShow);\n\n            // INFO je decompose les appels car j'ai besoin de recuperer le container\n            // des filtres\n            var advancedPanel = this._createAdvancedSearchPanelElement();\n            var advancedPanelDiv = this._createAdvancedSearchPanelDivElement();\n            var advancedHeader = this._createAdvancedSearchPanelHeaderElement();\n            var advancedForm = this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes);\n            var advancedFormFilters = this._filterContainer = this._createAdvancedSearchFormFiltersElement();\n            this._setFilter(this._advancedSearchCodes[0].id); // ex \"PositionOfInterest\"\n            var advancedFormInput = this._createAdvancedSearchFormInputElement();\n\n            advancedForm.appendChild(advancedFormFilters);\n            advancedForm.appendChild(advancedFormInput);\n            advancedPanelDiv.appendChild(advancedHeader);\n            advancedPanelDiv.appendChild(advancedForm);\n            advancedPanel.appendChild(advancedPanelDiv);\n            container.appendChild(advancedPanel);\n        }\n\n        if (this.options.displayButtonGeolocate) {\n            var geolocateShow = this._createShowGeolocateElement();\n            buttonsContainer.appendChild(geolocateShow);\n        }\n\n        if (this.options.displayButtonCoordinateSearch) {\n            var searchByCoordinateShow = this._createShowSearchByCoordinateElement();\n            buttonsContainer.appendChild(searchByCoordinateShow);\n\n            var coordinatePanel = this._createCoordinateSearchPanelElement();\n            var coordinatePanelDiv = this._createCoordinateSearchPanelDivElement();\n            var coordinateHeader = this._createCoordinateSearchPanelHeaderElement();\n            var coordinateForm = this._createCoordinateSearchPanelFormElement();\n\n            var div = null;\n            div = this._containerSystems = this.__createCoordinateSearchDivElement();\n            coordinateForm.appendChild(div);\n            var labelSystems = this._createCoordinateSearchSystemsLabelElement();\n            var systems =  this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);\n            div.appendChild(labelSystems);\n            div.appendChild(systems);\n\n            div = this._containerUnits = this.__createCoordinateSearchDivElement();\n            coordinateForm.appendChild(div);\n            var labelUnits = this._createCoordinateSearchUnitsLabelElement();\n            var units = this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);\n            div.appendChild(labelUnits);\n            div.appendChild(units);\n\n            div = this._containerCoordinateLng = this.__createCoordinateSearchDivElement();\n            coordinateForm.appendChild(div);\n            var coordinateLng = this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType);\n            var coordinateInputLng = this._coordinateSearchLngInput = this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);\n            div.appendChild(coordinateLng);\n            div.appendChild(coordinateInputLng);\n\n            div = this._containerCoordinateLat = this.__createCoordinateSearchDivElement();\n            coordinateForm.appendChild(div);\n            var coordinateLat = this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType);\n            var coordinateInputLat = this._coordinateSearchLatInput = this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);\n            div.appendChild(coordinateLat);\n            div.appendChild(coordinateInputLat);\n\n            var submit = this._createCoordinateSearchSubmitElement();\n            coordinateForm.appendChild(submit);\n\n            coordinatePanelDiv.appendChild(coordinateHeader);\n            coordinatePanelDiv.appendChild(coordinateForm);\n\n            coordinatePanel.appendChild(coordinatePanelDiv);\n            container.appendChild(coordinatePanel);\n        }\n\n        // INFO je decompose les appels car j'ai besoin de recuperer le container\n        // des resultats de l'autocompletion\n        var autocomplete = this._autocompleteContainer = this._createAutoCompleteElement();\n        var autocompleteList = this._createAutoCompleteListElement();\n        var containerResultsLocation = this._containerResultsLocation = this._createAutoCompletedLocationContainer();\n        var containerResultsSuggest = this._containerResultsSuggest = this._createSearchedSuggestContainer();\n        autocompleteList.appendChild(containerResultsLocation);\n        autocompleteList.appendChild(containerResultsSuggest);\n        autocomplete.appendChild(autocompleteList);\n        container.appendChild(autocomplete);\n\n        // INFO je decompose les appels car j'ai besoin de recuperer le container\n        // des resultats du geocodage\n        var geocode = this._createGeocodeResultsElement();\n        var geocodeDiv = this._createGeocodeResultsDivElement();\n        geocode.appendChild(geocodeDiv);\n        var geocodeList = this._geocodedContainer = this._createGeocodeResultsListElement();\n        geocodeDiv.appendChild(geocodeList);\n        container.appendChild(geocode);\n\n        return container;\n    }\n\n    /**\n     * this method is called by :\n     * - this._initContainer() : ...\n     * - this.onGeocodingAdvancedSearchCodeChoice() : ...\n     * and initialize or create the filters container HTMLElement\n     * to the geocoding advanced menu.\n     *\n     * @param {String} code - resource geocoding name\n     *\n     * @returns {DOMElement} DOM element\n     * @private\n     */\n    _setFilter (code) {\n        // INFORMATION\n        // Nous avons 2 solutions possibles pour la mise en place des filtres.\n        // 1. Soit on decide de creer tous les filtres pour chaque ressource\n        // de geocodage à l'initialisation du composant, et on joue sur le\n        // mode 'hidden' pour n'afficher que la ressource selectionnée.\n        // 2. Soit on decide de creer à chaque fois les filtres pour la\n        // ressource selectionnée.\n        // Chaque solution a ses inconvenients/avantages.\n        // Implementation du choix 2 car elle offre plus de souplesse pour\n        // recuperer les 'form-data'...\n\n        var container = this._filterContainer;\n\n        var codeFound = false;\n        for (var i = 0; i < this._advancedSearchCodes.length; i++) {\n            if (this._advancedSearchCodes[i].id === code) {\n                codeFound = true;\n                break;\n            }\n        }\n\n        if (!codeFound) {\n            // cette ressource n'est pas disponible,\n            // on supprime les anciens enfants...\n            while (container.firstChild) {\n                container.removeChild(container.firstChild);\n            }\n            return;\n        }\n\n        // on sauvegarde la ressource de geocodage sélectionnée\n        this._currentGeocodingCode = code;\n\n        // on supprime les enfants...\n        while (container.firstChild) {\n            container.removeChild(container.firstChild);\n        }\n\n        var lstAttributs = this._advancedSearchFilters[code];\n        if (!lstAttributs || lstAttributs.length === 0) {\n            // cette ressource n'est pas parametrable\n            return;\n        }\n\n        var divTable = this._createAdvancedSearchFiltersTableElement(code, true);\n\n        for (var j = 0; j < lstAttributs.length; j++) {\n            var divFilter = this._createAdvancedSearchFiltersAttributElement(lstAttributs[j]);\n            divTable.appendChild(divFilter);\n        }\n\n        container.appendChild(divTable);\n\n        return container;\n    }\n\n    // ################################################################### //\n    // ################ methods to request and results ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onAutoCompleteSearch()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {String}   settings.text - text\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     * @private\n     */\n    _requestAutoComplete (settings) {\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || (typeof settings === \"object\" && Object.keys(settings).length === 0)) {\n            return;\n        }\n\n        // on ne fait pas de requête si la parametre 'text' est vide !\n        if (!settings.text) {\n            return;\n        }\n\n        logger.log(settings);\n\n        var options = {};\n        // on recupere les options du service\n        Utils.assign(options, this.options.autocompleteOptions.serviceOptions);\n        // ainsi que la recherche et les callbacks\n        Utils.assign(options, settings);\n\n        // on ajoute le paramètre filterOptions.type spécifiant les ressources.\n        var resources = this.options.resources.autocomplete;\n        if (resources && Array.isArray(resources)) {\n            // il se peut que l'utilisateur ait surchargé ce paramètre dans geocodeOptions,\n            if (!options.type) {\n                options.type = resources;\n            }\n        }\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle renseignée au niveau du controle ou la clé \"calcul\" par défaut.\n        options.apiKey = options.apiKey || this.options.apiKey;\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        if (typeof options.ssl !== \"boolean\") {\n            if (typeof this.options.ssl === \"boolean\") {\n                options.ssl = this.options.ssl;\n            } else {\n                options.ssl = true;\n            }\n        }\n        logger.log(options);\n\n        Gp.Services.autoComplete(options);\n    }\n\n    /**\n     * this method is called by this.onAutoCompleteSearchText() (case of success)\n     * and fills the container of the location list.\n     * it creates a HTML Element per location\n     *\n     * @param {Array} locations - Array of Gp.Services.AutoComplete.SuggestedLocation corresponding to autocomplete results list\n     * @private\n     */\n    _fillAutoCompletedLocationListContainer (locations) {\n        if (!locations || locations.length === 0) {\n            return;\n        }\n\n        // on vide la liste avant de la construire\n        var element = this._containerResultsLocation;\n        if (element.childElementCount) {\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n        }\n        element.classList.add(\"GPelementHidden\", \"gpf-hidden\");\n        if (locations.length) {\n            if (!this._radioButtonLocation || (this._radioButtonLocation && this._radioButtonLocation.checked)) {\n                element.classList.remove(\"GPelementHidden\", \"gpf-hidden\");\n            }\n            this._displaySuggestedLocation();\n            if (!checkDsfr() || !this.options.splitResults) {\n                this._createAutoCompletedLocationTitleElement();\n            }\n            for (var i = 0; i < locations.length; i++) {\n                // Proposals are dynamically filled in Javascript by autocomplete service\n                this._createAutoCompletedLocationElement(locations[i], i);\n            }\n        }\n    }\n\n    /**\n     * this method is called by this.() (case of success)\n     * and fills the container of the suggest list.\n     * it creates a HTML Element per suggest\n     *\n     * @param {Array} suggests - Array of suggested corresponding to search results list\n     * @private\n     */\n    _fillSearchedSuggestListContainer (suggests) {\n        // on vide la liste avant de la construire\n        var element = this._containerResultsSuggest;\n        if (element.childElementCount) {\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n        }\n        element.classList.add(\"GPelementHidden\", \"gpf-hidden\");\n        if (suggests.length) {\n            if (!this._radioButtonSuggest || (this._radioButtonSuggest && this._radioButtonSuggest.checked)) {\n                element.classList.remove(\"GPelementHidden\", \"gpf-hidden\");\n            }\n            if (!checkDsfr() || !this.options.splitResults) {\n                this._createSearchedSuggestTitleElement();\n            }\n            for (let i = 0; i < suggests.length; i++) {\n                const suggest = suggests[i];\n                this._createSearchedSuggestElement(suggest, i);\n            }\n        }\n    }\n\n    /**\n     * this method is called by this.onAutoCompleteSearch()\n     * and executes a request to the service.\n     *\n     * @param {Object} settings - service settings\n     * @param {String}   settings.location - text\n     * @param {Function} settings.onSuccess - callback\n     * @param {Function} settings.onFailure - callback\n     * @private\n     */\n    _requestGeocoding (settings) {\n        // on ne fait pas de requête si on n'a pas renseigné de parametres !\n        if (!settings || (typeof settings === \"object\" && Object.keys(settings).length === 0)) {\n            return;\n        }\n\n        // on ne fait pas de requête si la parametre 'text' est vide !\n        if (settings.query === null) {\n            return;\n        }\n\n        logger.log(settings);\n\n        var options = {};\n        // on recupere les options du service\n        Utils.assign(options, this.options.geocodeOptions.serviceOptions);\n        // ainsi que la recherche et les callbacks\n        Utils.assign(options, settings);\n        // on redefinie les callbacks si les callbacks de service existent\n        var self = this;\n        var bOnFailure = !!(this.options.geocodeOptions.serviceOptions.onFailure !== null && typeof this.options.geocodeOptions.serviceOptions.onFailure === \"function\"); // cast variable to boolean\n        var bOnSuccess = !!(this.options.geocodeOptions.serviceOptions.onSuccess !== null && typeof this.options.geocodeOptions.serviceOptions.onSuccess === \"function\");\n        if (bOnSuccess) {\n            var cbOnSuccess = function (e) {\n                settings.onSuccess.call(self, e);\n                self.options.geocodeOptions.serviceOptions.onSuccess.call(self, e);\n            };\n            options.onSuccess = cbOnSuccess;\n        }\n        if (bOnFailure) {\n            var cbOnFailure = function (e) {\n                settings.onFailure.call(self, e);\n                self.options.geocodeOptions.serviceOptions.onFailure.call(self, e);\n            };\n            options.onFailure = cbOnFailure;\n        }\n\n        // on ajoute le paramètre index spécifiant les ressources.\n        var resources = this.options.resources.geocode;\n        if (resources) {\n            // il se peut que l'utilisateur ait surchargé ce paramètre dans geocodeOptions,\n            // ou qu'il ait déjà été rempli (cas de la recherche avancée)\n            if (!options.index) {\n                options.index = resources;\n            }\n        }\n\n        // cas où la clef API n'est pas renseignée dans les options du service,\n        // on utilise celle renseignée au niveau du controle ou la clé \"calcul\" par défaut\n        options.apiKey = options.apiKey || this.options.apiKey;\n\n        // si l'utilisateur a spécifié le paramètre ssl au niveau du control, on s'en sert\n        // true par défaut (https)\n        if (typeof options.ssl !== \"boolean\") {\n            if (typeof this.options.ssl === \"boolean\") {\n                options.ssl = this.options.ssl;\n            } else {\n                options.ssl = true;\n            }\n        }\n\n        logger.log(options);\n\n        Gp.Services.geocode(options);\n    }\n\n    /**\n     * this method is called by this.onGeocodingSearch()\n     * and fills the container of the location results.\n     * it creates a HTML Element per location\n     * (cf. this. ...)\n     *\n     * @param {Object[]} locations - locations\n     *\n     * @private\n     */\n    _fillGeocodedLocationListContainer (locations) {\n        if (!locations || locations.length === 0) {\n            this._clearGeocodedLocation();\n            return;\n        }\n\n        // on vide la liste avant de la construire\n        var element = this._geocodedContainer;\n        if (element.childElementCount) {\n            while (element.firstChild) {\n                element.removeChild(element.firstChild);\n            }\n        }\n\n        for (var i = 0; i < locations.length; i++) {\n            logger.log(locations[i]);\n            // Proposals are dynamically filled in Javascript by autocomplete service\n            this._createGeocodedLocationElement(locations[i], i);\n        }\n\n        // sauvegarde de l'etat des locations\n        this._geocodedLocations = locations;\n    }\n\n    // ################################################################### //\n    // ######################### other methods ########################### //\n    // ################################################################### //\n\n    /**\n     * this sends the label to the panel.\n     *\n     * @param {String} label - label suggested location\n     * @private\n     */\n    _setLabel (label) {\n        document.getElementById(\"GPsearchInputText-\" + this._uid).value = label;\n    }\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and move/zoom on a position.\n     *\n     * @param {Array} position - ol.Coordinate object [lon, lat] (en lat/lon : \"EPSG:4326\")\n     * @param {Number} zoom - zoom level\n     * @private\n     */\n    _setPosition (position, zoom) {\n        var view = this.getMap().getView();\n        view.setCenter(position);\n        view.setZoom(zoom);\n    }\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and displays a marker.\n     * FIXME\n     *\n     * @param {Array} position - ol.Coordinate object [lon, lat] ou [x, y]\n     * @param {Object} info - location information\n     * @private\n     */\n    _setMarker (position, info) {\n        var map = this.getMap();\n        var context = this;\n\n        // remove previous markers\n        if (this._marker != null) {\n            map.removeOverlay(this._marker);\n            this._marker = null;\n        }\n\n        if (position) {\n            // création de l'élément DOM\n            var markerDiv = document.createElement(\"img\");\n            markerDiv.src = this._markerUrl;\n\n            // ajout de l'évènement onclick (pour afficher une popup)\n            if (markerDiv.addEventListener) {\n                markerDiv.addEventListener(\n                    \"click\",\n                    function () {\n                        context._onResultMarkerSelect(info);\n                    }\n                );\n            } else if (markerDiv.attachEvent) {\n                // Internet Explorer\n                markerDiv.attachEvent(\n                    \"onclick\",\n                    function () {\n                        context._onResultMarkerSelect(info);\n                    }\n                );\n            }\n\n            // création du marker (overlay)\n            this._marker = new Overlay({\n                position : position,\n                offset : [-25.5, -38],\n                element : markerDiv,\n                stopEvent : false\n            });\n            map.addOverlay(this._marker);\n        }\n    }\n\n    /**\n     * this method is called by this.on*ResultsItemClick()\n     * and get zoom to results.\n     *\n     * @param {Object} info - info\n     *\n     * @returns {Integer} zoom\n     * @private\n     */\n    _getZoom (info) {\n        var map = this.getMap();\n        var key = this.options.zoomTo;\n        var zoom = null;\n\n        // les valeurs du zooms sont determinées\n        // soit par les mots clefs suivants :  max, min ou auto\n        // soit par un niveau de zoom\n        // soit defini par l'utilisateur via une fonction\n\n        if (typeof key === \"function\") {\n            logger.trace(\"zoom function\");\n            zoom = key.call(this, info);\n        }\n\n        if (typeof key === \"number\") {\n            logger.trace(\"zoom level\");\n            zoom = key;\n        }\n\n        if (typeof key === \"string\") {\n            // if (key === \"max\") {\n            //     zoom = map.getMaxZoom();\n            // } else if (key === \"min\") {\n            //     zoom = map.getMinZoom();\n            // } else\n\n            if (key === \"auto\") {\n                logger.trace(\"zoom auto\");\n                zoom = SearchEngineUtils.zoomToResultsByDefault(info);\n            } else {\n                logger.trace(\"zoom level parsing\");\n                var value = parseInt(key, 10);\n                if (!isNaN(value)) {\n                    logger.trace(\"zoom parsing\");\n                    zoom = value;\n                }\n            }\n        }\n\n        // polyfill IE\n        Number.isInteger = Number.isInteger || function (value) {\n            return typeof value === \"number\" &&\n                isFinite(value) &&\n                Math.floor(value) === value;\n        };\n\n        // test de validité du zoom,\n        // on prend le zoom courant par defaut ...\n        if (!zoom || zoom === \"\" || !Number.isInteger(zoom)) {\n            logger.trace(\"zoom not found, current zoom...\");\n            zoom = map.getView().getZoom();\n        }\n\n        // FIXME test si le zoom est dans l'espace de la carte\n        var min = map.minZoom; // .getMinZoom();\n        var max = map.maxZoom; // .getMaxZoom();\n        if (zoom < min) {\n            logger.trace(\"zoom level min...\");\n            zoom = min;\n        }\n        if (zoom > max) {\n            logger.trace(\"zoom level max...\");\n            zoom = max;\n        }\n\n        logger.trace(\"zoom\", zoom);\n        return zoom;\n    }\n\n    /**\n     * this method is called on 'click' on this._marker\n     * (cf. this._setMarker() )\n     * and sets a popup with marker information\n     *\n     * @param {Object} information - location information\n     * @private\n     */\n    _onResultMarkerSelect (information) {\n        var map = this.getMap();\n\n        var popupContent = \"\";\n        if (typeof information !== \"string\") {\n            if (information.service === \"GeocodedLocation\") {\n                popupContent = \"<ul>\";\n                var attributes = information.location.placeAttributes;\n                for (var attr in attributes) {\n                    if (attributes.hasOwnProperty(attr)) {\n                        if (attr !== \"trueGeometry\" && attr !== \"extraFields\" && attr !== \"houseNumberInfos\" && attr !== \"_count\") {\n                            popupContent += \"<li>\";\n                            popupContent += \"<span class=\\\"gp-attname-others-span\\\">\" + attr.toUpperCase() + \" : </span>\";\n                            popupContent += attributes[attr];\n                            popupContent += \" </li>\";\n                        }\n                    }\n                }\n                popupContent += \" </ul>\";\n            } else if (information.service === \"SuggestedLocation\") {\n                popupContent = GeocodeUtils.getSuggestedLocationFreeform(information.location);\n            } else {\n                popupContent = \"sans informations.\";\n            }\n        } else {\n            popupContent = information;\n        }\n\n        this._popupContent.innerHTML = popupContent;\n        if (!this._popupOverlay) {\n            // ajout de la popup a la carte comme un overlay\n            this._popupOverlay = new Overlay({\n                element : this._popupDiv,\n                positioning : \"bottom-center\",\n                position : this._marker.getPosition(),\n                offset : [0, -42]\n            });\n            map.addOverlay(this._popupOverlay);\n        } else {\n            // si l'overlay est déjà créé, on modifie juste sa position\n            this._popupOverlay.setPosition(this._marker.getPosition());\n        }\n    }\n\n    /**\n     * Set additional projection system\n     *\n     * @param {Object} system - projection system\n     * @param {String} system.crs - Proj4 crs alias (from proj4 defs) e.g. \"EPSG:4326\"\n     * @param {String} [system.label] - CRS label to be displayed in control. Default is system.crs alias\n     * @param {String} [system.type] - CRS units type for coordinates conversion (one of control options.units). Default is \"Metric\"\n     */\n    _setSystem (system) {\n        if (typeof system !== \"object\") {\n            logger.log(\"[ERROR] MousePosition:addSystem - system parameter should be an object\");\n            return;\n        }\n        if (!system.crs) {\n            logger.error(\"crs not defined !\");\n            return;\n        }\n        if (!system.label) {\n            logger.warn(\"crs label not defined, use crs code by default.\");\n            system.label = system.crs;\n        }\n        if (!system.type) {\n            logger.warn(\"type srs not defined, use 'Metric' by default.\");\n            system.type = \"Metric\";\n        }\n\n        // chargement de la definition de la projection\n        // même si déjà chargé...\n        CRS.loadByName(system.crs);\n\n        if (!olProjGet(system.crs)) {\n            logger.error(\"crs '{}' not available into proj4 definitions !\", system.crs);\n            return;\n        }\n\n        // add system to control systems\n        for (var j = 0; j < this._coordinateSearchSystems.length; j++) {\n            var obj = this._coordinateSearchSystems[j];\n            if (system.crs === obj.crs) {\n                // warn user\n                logger.info(\"crs '{}' already configured\", obj.crs);\n            }\n        }\n        system.code = this._coordinateSearchSystems.length;\n        this._coordinateSearchSystems.push(system);\n    }\n\n    // ################################################################### //\n    // ###################### other handlers events ###################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on 'GPshowSearchEnginePicto' tag label\n     * (cf. this._createShowSearchEnginePictoElement), and it cleans the component\n     * when it's closed.\n     *\n     * @private\n     */\n    onShowSearchEngineClick () {\n        var map = this.getMap();\n        // on supprime toutes les interactions\n        Interactions.unset(map);\n        var opened = this._showSearchEngineButton.ariaPressed;\n        this.collapsed = !(opened === \"true\");\n        // on génère nous même l'evenement OpenLayers de changement de propriété\n        // (utiliser ol.control.SearchEngine.on(\"change:collapsed\", function ) pour s'abonner à cet évènement)\n        this.dispatchEvent(\"change:collapsed\");\n\n        // on recalcule la position\n        if (this.options.position && !this.collapsed) {\n            this.updatePosition(this.options.position);\n        }\n        \n        // on nettoie si on ferme le composant\n        if (this.collapsed) {\n            this._clearResults();\n        }\n    }\n\n    /**\n     * this method is called by event 'click' on 'GPsearchInputReset' tag div\n     * (cf. this._createSearchInputElement), and it cleans the value of input.\n     *\n     * @private\n     */\n    onSearchResetClick () {\n        this._clearResults();\n    }\n\n    /**\n     * this method is called by event 'click' on 'GPshowGeolocate' tag div\n     * (cf. this._createShowGeolocateElement)\n     *\n     * @private\n     */\n    onShowSearchGeolocateClick () {\n        if (\"geolocation\" in navigator) {\n            /* geolocation is available */\n            navigator.geolocation.getCurrentPosition((position) => {\n                var view = this.getMap().getView();\n                var viewProj = view.getProjection().getCode();\n                var coordinates = [position.coords.longitude, position.coords.latitude];\n                if (viewProj !== \"EPSG:4326\") {\n                    // on retransforme les coordonnées de la position dans la projection de la carte\n                    coordinates = olProjTransform(coordinates, \"EPSG:4326\", viewProj);\n                }\n                if (isNaN(coordinates[0]) || isNaN(coordinates[1])) {\n                    this._setMarker();\n                    return;\n                }\n                this._setPosition(coordinates, 10); // FIXME zoom fixe !\n                if (this._displayMarker) {\n                    this._setMarker(coordinates, \"sans information\");\n                }\n            });\n        } else {\n            /* geolocation IS NOT available */\n        }\n    }\n\n    /**\n     * this method is called by event 'click' on 'GPshowSearchByCoordinate' tag div\n     * (cf. this._createShowSearchByCoordinateElement)\n     *\n     * @private\n     */\n    onShowSearchByCoordinateClick () {\n        var lng = null;\n        var lat = null;\n        if (this._coordinateSearchLngInput && this._coordinateSearchLngInput.nodeName === \"DIV\" &&\n            this._coordinateSearchLatInput && this._coordinateSearchLatInput.nodeName === \"DIV\"\n        ) {\n            lng = this._getCoordinateSearchDMS(this._coordinateSearchLngInput);\n            lat = this._getCoordinateSearchDMS(this._coordinateSearchLatInput);\n        } else {\n            lng = this._coordinateSearchLngInput.value;\n            lat = this._coordinateSearchLatInput.value;\n        }\n\n        if (!lng || !lat) {\n            return;\n        }\n\n        var coordinates = [lng, lat];\n\n        var view = this.getMap().getView();\n        var viewProj = view.getProjection().getCode();\n        if (viewProj !== \"EPSG:4326\") {\n            coordinates = olProjTransform(coordinates, \"EPSG:4326\", viewProj);\n        }\n        if (isNaN(coordinates[0]) || isNaN(coordinates[1])) {\n            this._setMarker();\n            return;\n        }\n        this._setPosition(coordinates, 10); // FIXME zoom fixe !\n        if (this._displayMarker) {\n            this._setMarker(coordinates, \"sans information\");\n        }\n    }\n\n    _getCoordinateSearchDMS (dom) {\n        if (dom && dom.nodeName === \"DIV\") {\n            var nodes = dom.querySelectorAll(\"[name]\");\n            if (nodes) {\n                var degrees = MathUtils.toInteger(nodes[0].value);\n                var minutes = MathUtils.toInteger(nodes[1].value);\n                var seconds = MathUtils.toInteger(nodes[2].value);\n                var hemispheres = nodes[3].options[nodes[3].selectedIndex].text;\n                if (!degrees || !minutes || !seconds || !hemispheres) {\n                    return;\n                }\n                return MathUtils.dmsToDecimal(degrees, minutes, seconds, hemispheres);\n            }\n        }\n    }\n    // ################################################################### //\n    // ################## handlers events AutoComplete ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'click' on 'GPlocationOrigin' input\n     *\n     * @private\n     */\n    onAutoCompleteInputClick () {\n        var inputSearchTextContainer = document.getElementById(\"GPsearchInputText-\" + this._uid);\n        if (inputSearchTextContainer && !inputSearchTextContainer.disabled && inputSearchTextContainer.value.length > 2) {\n            this._displaySuggestedLocation();\n        }\n    }\n\n    /**\n     * this method is called by event 'keyup' on 'GPsearchInputText' tag input\n     * (cf. this._createSearchInputElement), and it gets the value of input.\n     * this value is passed as a parameter for the service autocomplete (text).\n     * the results of the request are displayed into a drop down menu.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onAutoCompleteSearchText (e) {\n        var value = e.target.value;\n        if (!value) {\n            return;\n        }\n\n        // on sauvegarde le localisant\n        this._currentGeocodingLocation = value;\n\n        // on limite les requêtes à partir de 3 car. saisie !\n        if (value.length < 3) {\n            this._clearSuggestedLocation();\n            return;\n        }\n\n        var _triggerGeocode = this.options.autocompleteOptions.triggerGeocode;\n        var _triggerDelay = this.options.autocompleteOptions.triggerDelay;\n\n        // INFORMATION\n        // on effectue la requête au service d'autocompletion.\n        // on met en place des callbacks afin de recuperer les resultats ou\n        // les messages d'erreurs du service.\n        // les resultats sont affichés dans une liste deroulante.\n        var context = this;\n        this._requestAutoComplete({\n            text : value,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(\"request from AutoComplete\", results);\n                if (results) {\n                    // on sauvegarde l'etat des résultats\n                    context._suggestedLocations = results.suggestedLocations;\n                    context._locationsToBeDisplayed = [];\n                    // on vérifie qu'on n'a pas récupéré des coordonnées nulles (par ex recherche par code postal)\n                    for (var i = 0; i < context._suggestedLocations.length; i++) {\n                        var ilocation = context._suggestedLocations[i];\n                        if (ilocation.position && ilocation.position.x === 0 && ilocation.position.y === 0 && ilocation.fullText) {\n                            // si les coordonnées sont nulles, il faut relancer une requête de géocodage avec l'attribut \"fullText\" récupéré\n                            context._getGeocodeCoordinatesFromFullText(ilocation, i);\n                        } else {\n                            // sinon on peut afficher normalement le résultat dans la liste\n                            context._locationsToBeDisplayed.push(ilocation);\n                        }\n                    };\n                    // on affiche les résultats qui n'ont pas des coordonnées nulles\n                    context._fillAutoCompletedLocationListContainer(context._locationsToBeDisplayed);\n                    // on annule eventuellement une requete de geocodage en cours car on obtient des\n                    // de nouveau des resultats d'autocompletion...\n                    if (context._triggerHandler) {\n                        clearTimeout(context._triggerHandler);\n                        context._triggerHandler = null;\n                        logger.warn(\"Cancel a geocode request !\");\n                    }\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME\n                // où affiche t on les messages : ex. 'No suggestion matching the search' ?\n                context._clearSuggestedLocation();\n                logger.log(error.message);\n                // on envoie une requete de geocodage si aucun resultat d'autocompletion\n                // n'a été trouvé ! Et on n'oublie pas d'annuler celle qui est en cours !\n                if (error.message === \"No suggestion matching the search\" && _triggerGeocode /* && value.length === 5 */) {\n                    if (context._triggerHandler) {\n                        clearTimeout(context._triggerHandler);\n                        logger.warn(\"Cancel the last geocode request !\");\n                    }\n                    context._triggerHandler = setTimeout(\n                        function () {\n                            logger.warn(\"Launch a geocode request !\");\n                            context._requestGeocoding({\n                                location : value,\n                                // callback onSuccess\n                                onSuccess : function (results) {\n                                    logger.log(\"request from Geocoding\", results);\n                                    if (results) {\n                                        context._locationsToBeDisplayed = [];\n                                        // on modifie la structure des reponses pour être\n                                        // compatible avec l'autocompletion !\n                                        var locations = results.locations;\n                                        for (var i = 0; i < locations.length; i++) {\n                                            var location = locations[i];\n                                            location.fullText = GeocodeUtils.getGeocodedLocationFreeform(location);\n                                            location.position = {\n                                                x : location.position.lon,\n                                                y : location.position.lat\n                                            };\n                                            context._locationsToBeDisplayed.push(location);\n                                        }\n                                        context._fillAutoCompletedLocationListContainer(locations);\n                                    }\n                                },\n                                // callback onFailure\n                                onFailure : function (error) {\n                                    logger.log(error.message);\n                                }\n                            });\n                        }, _triggerDelay\n                    );\n                }\n            }\n        });\n\n        // INFORMATION\n        // on effectue une requête au service de recherche.\n        // les resultats sont ajoutées à la suite de l'autocompletion,\n        // et un abonnement est mis en place pour les récuperer.\n        if (this.options.resources.search) {\n            // appel du service (cf. abonnement : Search.target.addEventListener(\"suggest\"))\n            Search.suggest(value);\n        }\n\n        var map = this.getMap();\n        map.on(\n            \"click\",\n            this._hideSuggestedLocation,\n            this\n        );\n        map.on(\n            \"pointerdrag\",\n            this._hideSuggestedLocation,\n            this\n        );\n    }\n\n    /**\n     * this method is called by Gp.Services.autoComplete callback in case of success\n     * (cf. this.onAutoCompleteSearchText), for suggested locations with null coordinates\n     * (case of postalCode research for instance).\n     * Send a geocode request with suggested location 'fullText' attribute, to get its coordinates and display it in autocomplete results list container.\n     *\n     * @param {Gp.Services.AutoCompleteResponse.SuggestedLocation} suggestedLocation - autocompletion result (with null coordinates) to be geocoded\n     * @param {Number} i - suggestedLocation position in Gp.Services.AutoCompleteResponse.suggestedLocations autocomplete results list\n     * @private\n     */\n    _getGeocodeCoordinatesFromFullText (suggestedLocation, i) {\n        var context = this;\n        Gp.Services.geocode({\n            apiKey : this.options.apiKey,\n            ssl : this.options.ssl,\n            q : GeocodeUtils.getSuggestedLocationFreeform(suggestedLocation),\n            index : suggestedLocation.type,\n            // callback onSuccess\n            onSuccess : function (response) {\n                logger.log(\"request from Geocoding (coordinates null)\", response);\n                if (response.locations && response.locations.length !== 0 && response.locations[0].position) {\n                    // on modifie les coordonnées du résultat en EPSG:4326 donc lat,lon\n                    /// \\TODO verifier si l'inversion des coordonnees est necessaire\n                    if (context._suggestedLocations && context._suggestedLocations[i]) {\n                        context._suggestedLocations[i].position = {\n                            lon : response.locations[0].position.y,\n                            lat : response.locations[0].position.x\n                        };\n                        // et on l'affiche dans la liste\n                        context._locationsToBeDisplayed.unshift(context._suggestedLocations[i]);\n                        context._fillAutoCompletedLocationListContainer(context._locationsToBeDisplayed);\n                    }\n                }\n            },\n            // callback onFailure\n            onFailure : function () {\n                // si on n'a pas réussi à récupérer les coordonnées, on affiche quand même le résultat\n                if (context._suggestedLocations && context._suggestedLocations[i]) {\n                    context._createAutoCompletedLocationElement(context._suggestedLocations[i], i);\n                }\n            }\n        });\n    }\n\n    /**\n     * this method is called by event 'click' on 'GPautoCompleteResultsList' tag div\n     * (cf. this._createAutoCompleteListElement), and it selects the location.\n     * this location displays a marker on the map.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onAutoCompletedResultsItemClick (e) {\n        // TODO on souhaite un comportement different pour la selection des reponses\n        // de l'autocompletion :\n        // - liste deroulante des reponses,\n        // - puis possibilité de cliquer sur une suggestion\n        // - mais aussi de la choisir avec le clavier (arrow up/down), puis valider\n        // par un return\n        // cette selection avec les fleches doit mettre à jour le input !\n        // (comme un moteur de recherche de navigateur)\n\n        var idx = SelectorID.index(e.target.id);\n        logger.log(idx);\n        logger.log(this._locationsToBeDisplayed[idx]);\n\n        if (!idx) {\n            return;\n        }\n\n        var position = [\n            this._locationsToBeDisplayed[idx].position.x,\n            this._locationsToBeDisplayed[idx].position.y\n        ];\n        var info = {\n            service : \"SuggestedLocation\",\n            location : this._locationsToBeDisplayed[idx]\n        };\n\n        // on ajoute le texte de l'autocomplétion dans l'input\n        var label = GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[idx]);\n        this._setLabel(label);\n\n        // on sauvegarde le localisant\n        this._currentGeocodingLocation = label;\n\n        // Info : la position est en EPSG:4326, à transformer dans la projection de la carte\n        var view = this.getMap().getView();\n        var mapProj = view.getProjection().getCode();\n        if (mapProj !== \"EPSG:4326\") {\n            // on retransforme les coordonnées de la position dans la projection de la carte\n            position = olProjTransform(position, \"EPSG:4326\", mapProj);\n        }\n        // on centre la vue et positionne le marker, à la position reprojetée dans la projection de la carte\n        var zoom = this._getZoom(info);\n        this._setPosition(position, zoom);\n        if (this._displayMarker) {\n            this._setMarker(position, info);\n        }\n        /**\n         * event triggered when an element of the results is clicked for autocompletion\n         *\n         * @event searchengine:autocomplete:click\n         * @property {Object} type - event\n         * @property {Object} location - location\n         * @property {Object} target - instance SearchEngine\n         * @example\n         * SearchEngine.on(\"searchengine:autocomplete:click\", function (e) {\n         *   console.log(e.location);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"searchengine:autocomplete:click\",\n            location : this._locationsToBeDisplayed[idx]\n        });\n    }\n\n    /**\n     * this method is called by event 'click' on '' tag div\n     * (cf. this.), and it selects the suggest.\n     * this suggest call an event to added layer on the map.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onSearchedResultsItemClick (e) {\n        var idx = SelectorID.index(e.target.id);\n\n        var error = null;\n        try {\n            var suggest = Search.getSuggestions()[idx];\n            if (!suggest) {\n                throw \"No suggestions found !\";\n            }\n\n            // Ajout de la couche sur la carte si l'option le permet\n            if (this.options.searchOptions.addToMap) {\n                // Check if configuration is loaded\n                if (!Config.isConfigLoaded()) {\n                    throw \"ERROR : contract key configuration has to be loaded to load Geoportal layers.\";\n                }\n                var service = suggest.service;\n                var name = suggest.name;\n                var layer = null;\n                switch (service) {\n                    case \"WMS\":\n                        layer = new GeoportalWMS({\n                            layer : name\n                        });\n                        break;\n                    case \"WMTS\":\n                        layer = new GeoportalWMTS({\n                            layer : name\n                        });\n                        break;\n                    case \"TMS\":\n                        layer = new GeoportalMapBox({\n                            layer : name\n                        });\n                    default:\n                        break;\n                }\n                if (layer) {\n                    var map = this.getMap();\n                    map.addLayer(layer);\n                }\n            }\n        } catch (e) {\n            error = e;\n        }\n\n        /**\n         * event triggered when an element of the results is clicked for search service\n         *\n         * @event searchengine:search:click\n         * @property {Object} type - event\n         * @property {Object} suggest - suggest\n         * @property {Object} error - error\n         * @property {Object} target - instance SearchEngine\n         * @example\n         * SearchEngine.on(\"searchengine:search:click\", function (e) {\n         *   console.log(e.suggest);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"searchengine:search:click\",\n            suggest : suggest,\n            error : error\n        });\n    }\n\n    // ################################################################### //\n    // ################### handlers events Geocode ####################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'submit' on 'GPsearchInput' tag form\n     * (cf. this._createSearchInputElement), and it gets the value of input.\n     * this value is passed as a parameter for the service geocoding.\n     * the results of the request are displayed into a window.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onGeocodingSearchSubmit (e) {\n        var value = e.target[0].value;\n        if (!value) {\n            return;\n        }\n\n        // on sauvegarde le localisant\n        this._currentGeocodingLocation = value;\n\n        // on met en place l'affichage des resultats dans une fenetre de recherche.\n        var context = this;\n        this._requestGeocoding({\n            query : value,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(\"request from Geocoding\", results);\n                if (results) {\n                    var locations = results.locations;\n                    context._fillGeocodedLocationListContainer(locations);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME cf. this.onAutoCompleteSearch()\n                context._clearGeocodedLocation();\n                logger.log(error.message);\n            }\n        });\n    }\n\n    /**\n     * this method is called by event 'submit' on 'GPgeocodeResultsList' tag div\n     * (cf. this._createGeocodeResultsListElement), and it selects the location.\n     * this location displays a marker on the map.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onGeocodedResultsItemClick (e) {\n        var idx = SelectorID.index(e.target.id);\n\n        if (!idx) {\n            return;\n        }\n\n        var position = [\n            this._geocodedLocations[idx].position.lon,\n            this._geocodedLocations[idx].position.lat\n        ];\n        var info = {\n            service : \"GeocodedLocation\",\n            location : this._geocodedLocations[idx]\n        };\n\n        // on ajoute le texte du géocodage dans l'input\n        var label = GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[idx]);\n        this._setLabel(label);\n\n        // Info : la position est en EPSG:4326, à transformer dans la projection de la carte\n        var view = this.getMap().getView();\n        var mapProj = view.getProjection().getCode();\n        if (mapProj !== \"EPSG:4326\") {\n            // on retransforme les coordonnées de la position dans la projection de la carte\n            position = olProjTransform(position, \"EPSG:4326\", mapProj);\n        }\n        // on centre la vue et positionne le marker, à la position reprojetée dans la projection de la carte\n        var zoom = this._getZoom(this.options.zoomTo);\n        this._setPosition(position, zoom);\n        if (this._displayMarker) {\n            this._setMarker(position, info);\n        }\n        /**\n         * event triggered when an element of the results is clicked for geocoding\n         *\n         * @event searchengine:geocode:click\n         * @property {Object} type - event\n         * @property {Object} location - location\n         * @property {Object} target - instance SearchEngine\n         * @example\n         * SearchEngine.on(\"searchengine:geocode:click\", function (e) {\n         *   console.log(e.location);\n         * })\n         */\n        this.dispatchEvent({\n            type : \"searchengine:geocode:click\",\n            location : this._geocodedLocations[idx]\n        });\n    }\n\n    // ################################################################### //\n    // ############## handlers events Geocode Advanced ################### //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'change' on 'GPadvancedSearchCode' tag select\n     * (cf. this._createAdvancedSearchFormCodeElement), and it gets the value of\n     * option selected.\n     * this value is passed as a parameter to create the attributs container.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onGeocodingAdvancedSearchCodeChange (e) {\n        logger.log(e);\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n\n        if (!value) {\n            return;\n        }\n\n        // INFORMATION\n        // le declenchement de l'evenement va creer un container de filtre à la volée...\n        // l'insertion des containers d'attributs dans le DOM sont :\n        // - soit GPadvancedSearchFilters > PositionOfInterest\n        // - soit GPadvancedSearchFilters > StreetAddress\n        // - soit GPadvancedSearchFilters > CadastralParcel\n        // cf. _setFilter() pour la creation du container\n\n        this._setFilter(value);\n    }\n\n    /**\n     * this method is called by event 'submit' on 'GPadvancedSearchForm' tag form\n     * (cf. this._createAdvancedSearchPanelFormElement), and it gets the value of all input.\n     * this value is passed as a parameter for the service geocoding.\n     * the results of the request are displayed into a window.\n     *\n     * @param {Object} e - HTMLElement\n     * @param {Array} data - [{key: ..., value: ...}]\n     * @private\n     */\n    onGeocodingAdvancedSearchSubmit (e, data) {\n        logger.log(data);\n        if (!data || data.length === 0) {\n            return;\n        }\n\n        var _location;\n        var _filterOptions = {};\n\n        for (var i = 0; i < data.length; i++) {\n            var filter = data[i];\n            if (filter.value) {\n                if (filter.key === \"section\") {\n                    filter.value = filter.value.toUpperCase();\n                }\n                _filterOptions[filter.key] = filter.value;\n            }\n        }\n\n        var inputSearchTextContainer = document.getElementById(\"GPsearchInputText-\" + this._uid);\n        _location = inputSearchTextContainer.value;\n\n        // On ne prend pas en compte ce qu'il y a dans l'input de recherche simple pour la recherche avance de PC\n        if (this._currentGeocodingCode === \"CadastralParcel\") {\n            _location = \"\";\n        }\n\n        // on met en place l'affichage des resultats dans une fenetre de recherche.\n        var context = this;\n        this._requestGeocoding({\n            query : _location,\n            index : this._currentGeocodingCode,\n            filters : _filterOptions,\n            // callback onSuccess\n            onSuccess : function (results) {\n                logger.log(results);\n                if (results) {\n                    var locations = results.locations;\n                    context._fillGeocodedLocationListContainer(locations);\n                }\n            },\n            // callback onFailure\n            onFailure : function (error) {\n                // FIXME cf. this.onAutoCompleteSearch()\n                context._clearGeocodedLocation();\n                logger.log(error.message);\n            }\n        });\n    }\n\n    /**\n     * this method is called by 'onGeocodingAdvancedSearchSubmit' method,\n     * in case geocoding type is 'CadastralParcel',\n     * and gets request parameters from inputs\n     *\n     * @param {Object} filterOptions - object with inputs value (department, insee, ...)\n     * @returns {String} location - cadastral parcel number : concatenation of inputs values (e.g. : 940670000D0041 or 94067_____0041)\n     * @private\n     */\n    _getCadastralParcelRequestParams (filterOptions) {\n        /* info:\n            la parcelle cadastrale se compose de 14 chiffres ou lettres, indiquant, de gauche à droite :\n            - le code du département (2 caractères)\n            - le code commune (3 caractères). (Remarque : code département + code commune = code INSEE)\n            - OU le code INSEE de la commune (5 chiffres) (remplace les 2 précédents)\n            - le code commune absorbée INSEE, ou '000' (3 caractères),\n            - la section (2 caractères),\n            - le numéro de parcelle (4 caractères).\n            Exemple de parcelle : '940670000D0041'. Si l'identifiant est incomplet (par exemple '940670000D'), le service renverra uniquement les 25 premiers résultats pouvant correspondre.\n        */\n\n        var _location = \"\";\n\n        var l;\n        // code département (2 caractères)\n        var dep = filterOptions.department;\n        if (dep) {\n            l = dep.length;\n            if (l === 2) {\n                _location = dep;\n            } else if (l === 1) {\n                // si un seul numéro a été saisi, on présume que c'est un numéro < 10\n                _location = \"0\" + dep;\n            } else {\n                _location = dep.substring(0, 2);\n            }\n        } else {\n            _location = \"__\";\n        }\n\n        // code commune insee (3 caractères)\n        var commune = filterOptions.commune;\n        if (commune) {\n            l = commune.length;\n            if (l === 3) {\n                _location += commune;\n            } else if (l === 2) {\n                _location += \"_\" + commune;\n            } else if (l === 1) {\n                _location += \"__\" + commune;\n            } else { // l > 3\n                _location += commune.substring(0, 3);\n            }\n        } else {\n            _location += \"___\";\n        }\n\n        // code insee (5 caractères) : surcharge les 2 autres si renseigné\n        var insee = filterOptions.insee;\n        if (insee) {\n            if (insee.length === 5) {\n                _location = insee;\n            }\n        }\n\n        // code commune absorbee INSEE (3 caractères)\n        var absorbedCity = filterOptions.absorbedCity;\n        if (absorbedCity) {\n            l = absorbedCity.length;\n            if (l === 3) {\n                _location += absorbedCity;\n            } else if (l < 3) {\n                if (l === 2) {\n                    _location += \"_\" + absorbedCity;\n                } else if (l === 1) {\n                    _location += \"__\" + absorbedCity;\n                }\n            } else { // l > 3\n                _location += absorbedCity.substring(0, 3);\n            }\n        } else {\n            _location += \"___\";\n        }\n\n        // section (2 caractères)\n        var section = filterOptions.section;\n        if (section) {\n            l = section.length;\n            if (l === 2) {\n                _location += section;\n            } else if (l === 1) {\n                _location += \"_\" + section;\n            } else {\n                _location += section.substring(0, 2);\n            }\n        } else {\n            _location += \"__\";\n        }\n\n        // numéro de parcelle (4 caractères)\n        var number = filterOptions.number;\n        if (number) {\n            l = number.length;\n            if (l === 4) {\n                _location += number;\n            } else if (l === 3) {\n                _location += \"_\" + number;\n            } else if (l === 2) {\n                _location += \"__\" + number;\n            } else if (l === 1) {\n                _location += \"___\" + number;\n            } else { // l > 4\n                _location += number.substring(0, 4);\n            }\n        } else {\n            _location += \"___\";\n        }\n\n        logger.log(\"location : \" + _location);\n\n        return _location;\n    }\n\n    // ################################################################### //\n    // ############### handlers events Coordinate Search ################# //\n    // ################################################################### //\n\n    /**\n     * this method is called by event 'change' on ''\n     * tag select (cf. this.),\n     * and selects the system projection.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onCoordinateSearchSystemChange (e) {\n        var idx = e.target.selectedIndex; // index\n        var value = e.target.options[idx].value; // crs\n\n        // on nettoie les coordonnées saisies\n        this._coordinateSearchLngInput.value = \"\";\n        this._coordinateSearchLatInput.value = \"\";\n\n        // INFO\n        // si on change de type de systeme, on doit aussi changer le type d'unités !\n        var type = null;\n        for (var i = 0; i < this._coordinateSearchSystems.length; ++i) {\n            if (this._coordinateSearchSystems[i].code === Number(value)) {\n                type = this._coordinateSearchSystems[i].type;\n                break;\n            }\n        }\n\n        if (!type) {\n            logger.log(\"system not found in projection systems container\");\n            return;\n        }\n\n        // on enregistre le systeme courant\n        this._currentCoordinateSearchSystems = this._coordinateSearchSystems[Number(value)];\n\n        if (type !== this._currentCoordinateSearchType) {\n            // on met à jour les unités du menu deroulant : Geographique ou Métrique\n            this._currentCoordinateSearchType = type;\n            this._currentCoordinateSearchUnits =  this._coordinateSearchUnits[type][0].code;\n            this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[type]));\n            // et on modifie la zone de saisie des coordonnées (label + input)\n            this._updateCoordinateSearchElements();\n        }\n    }\n\n    /**\n     * this method is called by event 'change' on ''\n     * tag select (cf. this.),\n     * and selects the units projection.\n     *\n     * @param {Object} e - HTMLElement\n     * @private\n     */\n    onCoordinateSearchUnitsChange (e) {\n        var idx = e.target.selectedIndex;\n        var value = e.target.options[idx].value;\n\n        // on nettoie les coordonnées saisies\n        this._coordinateSearchLngInput.value = \"\";\n        this._coordinateSearchLatInput.value = \"\";\n\n        // et on modifie la zone de saisie des coordonnées (label + input)\n        this._currentCoordinateSearchUnits = value;\n        this._updateCoordinateSearchElements();\n    }\n\n    /**\n     * this method is called by event 'click' on ''\n     * tag select (cf. this.),\n     * and clear app.\n     *\n     * @private\n     */\n    onCoordinateSearchClose () {\n        this._setMarker();\n        this._coordinateSearchLngInput.value = \"\";\n        this._coordinateSearchLatInput.value = \"\";\n    }\n\n    _updateCoordinateSearchElements () {\n        var lbl = this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType);\n        var input = this._coordinateSearchLngInput = this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);\n        this._containerCoordinateLng.appendChild(lbl);\n        this._containerCoordinateLng.appendChild(input);\n        lbl = this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType);\n        input = this._coordinateSearchLatInput = this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);\n        this._containerCoordinateLat.appendChild(lbl);\n        this._containerCoordinateLat.appendChild(input);\n    }\n\n    // ################################################################### //\n    // ############################## clean ############################## //\n    // ################################################################### //\n\n    /**\n     * this method is called by this.onSearchReset()\n     * and it clears all results and the marker.\n     *\n     * @private\n     */\n    _clearResults () {\n        var map = this.getMap();\n\n        this._currentGeocodingLocation = null;\n\n        this._clearSuggestedLocation();\n        this._clearGeocodedLocation();\n\n        this._setMarker();\n        // on retire l'overlay de la popup de la carte\n        if (this._popupOverlay != null) {\n            map.removeOverlay(this._popupOverlay);\n            this._popupOverlay = null;\n        }\n    }\n\n    /**\n     * this method is called by this.onAutoCompleteSearchText()\n     * and it clears all suggested location.\n     *\n     * @private\n     */\n    _clearSuggestedLocation () {\n        this._suggestedLocations = [];\n        if (this._containerResultsLocation) {\n            while (this._containerResultsLocation.firstChild) {\n                this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);\n            }\n        }\n        if (this.options.resources.search) {\n            Search.clear();\n            if (this._containerResultsSuggest) {\n                while (this._containerResultsSuggest.firstChild) {\n                    this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild);\n                }\n            }\n        }\n    }\n\n    /**\n     * this method is called to hide suggested locations\n     *\n     * @private\n     */\n    _hideSuggestedLocation () {\n        if (this._autocompleteContainer) {\n            this._autocompleteContainer.classList.replace(\"GPelementVisible\", \"GPelementHidden\");\n            this._autocompleteContainer.classList.replace(\"gpf-visible\", \"gpf-hidden\");\n        }\n    }\n\n    /**\n     * this method is called to display suggested location.\n     *\n     * @private\n     */\n    _displaySuggestedLocation () {\n        if (this._autocompleteContainer) {\n            this._autocompleteContainer.classList.replace(\"GPelementHidden\", \"GPelementVisible\");\n            this._autocompleteContainer.classList.replace(\"gpf-hidden\", \"gpf-visible\");\n        }\n    }\n\n    /**\n     * this method is called by this.onGeocodingAdvancedSearchSubmit()\n     * and it clears all geocoded location.\n     *\n     * @private\n     */\n    _clearGeocodedLocation () {\n        this._geocodedLocations = [];\n        if (this._geocodedContainer) {\n            while (this._geocodedContainer.firstChild) {\n                this._geocodedContainer.removeChild(this._geocodedContainer.firstChild);\n            }\n        }\n    }\n\n};\n\n// on récupère les méthodes de la classe commune ReverseGeocoding\nObject.assign(SearchEngine.prototype, SearchEngineDOM);\n\nexport default SearchEngine;\n\n// Expose SearchEngine as ol.control.SearchEngine (for a build bundle)\nif (window.ol && window.ol.control) {\n    window.ol.control.SearchEngine = SearchEngine;\n}\n"],"names":["ol","layer","VectorTile","source","TileJSON","format","MVT","Observable","style","Circle","Fill","Icon","Array","compose","transform","dx1","dy1","sx","sy","angle","dx2","dy2","sin","Math","cos","createOrUpdate","minX","minY","maxX","maxY","dest","createOrUpdateEmpty","Infinity","createOrUpdateFromFlatCoordinates","flatCoordinates","offset","end","stride","extent","extendXY","extendFlatCoordinates","x","y","min","max","getHeight","squaredSegmentDistance","x1","y1","x2","y2","dx","dy","t","douglasPeucker","squaredTolerance","simplifiedFlatCoordinates","simplifiedOffset","n","markers","stack","index","length","last","pop","first","maxSquaredDistance","i","squaredDistance","push","douglasPeuckerArray","ends","simplifiedEnds","ii","snap","value","tolerance","round","quantize","x3","y3","quantizeArray","ascending","a","b","arr","data","extension","isArray","linearRingContainsXY","wn","linearRingsContainsXY","getInteriorPointOfArray","flatCenters","flatCentersOffset","intersections","r","rr","pointX","NaN","maxSegmentLength","sort","segmentLength","abs","isNaN","PI","constructor","options","this","code_","code","units_","extent_","undefined","worldExtent_","worldExtent","axisOrientation_","axisOrientation","global_","global","canWrapX_","getPointResolutionFunc_","getPointResolution","defaultTileGrid_","metersPerUnit_","metersPerUnit","canWrapX","getCode","getExtent","getUnits","getMetersPerUnit","getWorldExtent","getAxisOrientation","isGlobal","setGlobal","getDefaultTileGrid","setDefaultTileGrid","tileGrid","setExtent","setWorldExtent","setGetPointResolution","func","getPointResolutionFunc","RADIUS","HALF_SIZE","EXTENT","WORLD_EXTENT","MAX_SAFE_Y","log","tan","EPSG3857Projection","super","units","resolution","point","cosh","PROJECTIONS","fromEPSG4326","input","output","dimension","slice","toEPSG4326","atan","exp","EPSG4326Projection","cache","transforms","destination","transformFn","sourceCode","destinationCode","cloneTransform","addProjection","projection","add","projectionLike","replace","addEquivalentProjections","projections","forEach","addProjections","projections2","forwardTransform","inverseTransform","linearRingIsClockwise","edge","interpolatePoint","fraction","o","cumulativeLengths","sqrt","target","haystack","needle","comparator","mid","cmp","low","high","found","binarySearch","projection1","projection2","tmpTransform","RenderFeature","type","properties","id","styleFunction","id_","type_","flatCoordinates_","flatInteriorPoints_","flatMidpoints_","ends_","properties_","squaredTolerance_","stride_","simplifiedGeometry_","get","key","coordinate","createOrUpdateFromCoordinate","getFlatInteriorPoint","flatCenter","getFlatInteriorPoints","endss","startOrientation","prevEndIndex","orientation","linearRingss","interiorPoints","getInteriorPointsOfMultiArray","getFlatMidpoint","getFlatMidpoints","midpoint","getId","getOrientedFlatCoordinates","getGeometry","getSimplifiedGeometry","simplifyTransformed","getProperties","getPropertiesInternal","getStride","getStyleFunction","getType","pixelExtent","projectedExtent","scale","j","transform2D","applyTransform","clone","Object","assign","getEnds","enableSimplifyTransformed","fn","lastResult","lastArgs","lastThis","called","nextArgs","prototype","call","arguments","arr1","arr2","len1","apply","memoizeOne","getFlatCoordinates","Stroke","Style","Text","functions","render","canvas","TileState","tileurlfunction","util","GeoJSON","Image","Layer","Group","Map","Raster","Source","tilegrid","TileGrid","Vector","View","proj","Units","loadingstrategy","events","Event","getDefaultExportFromCjs","__esModule","hasOwnProperty","parseCSSColor_1","kCSSColorTable","clamp_css_byte","clamp_css_float","f","parse_css_int","str","parseFloat","parseInt","parse_css_float","css_hue_to_rgb","m1","m2","h","parseCSSColor","css_str","iv","toLowerCase","substr","op","indexOf","ep","fname","params","split","alpha","s","l","e","Color","g","parse","rgba","toString","toArray","toArray01","toArray01PremultipliedAlpha","black","white","transparent","red","blue","Color$1","convertLiteral","convertFunction","parameters","propertySpec","stops","property","default","keys","values","expression","splice","convertIdentityFunction","zoomAndFeatureDependent","featureDependent","zoomDependent","map","stop","tokens","convertTokenString","featureFunctionParameters","featureFunctionStops","zoomStops","zoom","functionType","getFunctionType","getInterpolateOperator","z","appendStopPair","convertPropertyFunction","fixupDegenerateStepCurve","convertZoomAndPropertyFunction","isStep","Error","base","convertZoomFunction","colorSpace","getFallback","defaultValue","curve","interpolated","result","re","pos","match","exec","literal","lastIndex","ParsingError","message","ParsingError$1","Scope","parent","bindings","name","concat","has","Scope$1","NullType","kind","NumberType","StringType","BooleanType","ColorType","ObjectType","ValueType","CollatorType","FormattedType","ResolvedImageType","array$1","itemType","N","toString$1","valueMemberTypes","checkSubtype","expected","memberType","isValidType","provided","allowedTypes","some","isValidNativeType","Collator","caseSensitive","diacriticSensitive","locale","sensitivity","collator","Intl","usage","compare","lhs","rhs","resolvedLocale","resolvedOptions","FormattedSection","text","image","fontStack","textColor","normalize","Formatted","sections","fromString","unformatted","isEmpty","section","factory","join","serialize","serialized","ResolvedImage","available","validateRGBA","isValue","mixed","item","typeOf","String","JSON","stringify","Literal","args","context","error","expectedType","evaluate","eachChild","outputDefined","Literal$1","RuntimeError$1","toJSON","types$2","string","number","boolean","object","Assertion","floor","parsed","ctx","every","arg","Assertion$1","FormatExpression","firstArg","nextTokenMayBeObject","font","lastExpression","content","evaluatedContent","ImageExpression","evaluatedImageName","availableImages","types$1","Coercion","Boolean","c","parseColor","num","Number","child","Coercion$1","geometryTypes","EvaluationContext$1","globals","feature","featureState","formattedSection","_parseColorCache","canonical","featureTileCoord","featureDistanceData","geometryType","geometry","canonicalID","distanceFromCenter","center","dX","dY","bearing","cached","CompoundExpression","_evaluate","definition","definitions","availableOverloads","overloads","filter","signature","signatureContext","ParsingContext$1","registry","path","scope","parsedArgs","argParseFailed","errors","signatures","stringifySignature","actualTypes","register","CompoundExpression$1","CollatorExpression","updateBBox","bbox","coord","boxWithinBox","bbox1","bbox2","getTileCoordinates","p","lat","tilesAtZoom","pow","onBoundary","p1","p2","pointWithinPolygon","rings","inside","len","ring","len2","pointWithinPolygons","polygons","twoSided","q1","q2","det1","det2","lineIntersectLine","d","vectorP","vectorQ","v1","v2","lineIntersectPolygon","polygon","lineStringWithinPolygon","line","lineStringWithinPolygons","getTilePolygon","coordinates","getTilePolygons","updatePoint","polyBBox","worldSize","halfWorldSize","shift","getTilePoints","pointBBox","shifts","tilePoints","points","getTileLines","lineBBox","tileLines","tileLine","Within","geojson","geometries","features","polygonGeometry","tilePolygon","tilePolygons","pointsWithinPolygons","linesWithinPolygons","Within$1","isFeatureConstant","test","isStateConstant","isGlobalPropertyConstant","Var","boundExpression","Var$1","ParsingContext","part","expr","_parse","annotate","typeAnnotation","Expr","actual","isConstant","ec","k","isTypeAnnotation","childrenConstant","findStopLessThanOrEqualTo","currentValue","nextValue","lowerIndex","upperIndex","currentIndex","Step","labels","outputs","label","outputType","labelKey","valueKey","stopCount","out","Step$1","unitbezier","UnitBezier","p1x","p1y","p2x","p2y","cx","bx","ax","cy","by","ay","sampleCurveX","sampleCurveY","sampleCurveDerivativeX","solveCurveX","epsilon","t0","t1","t2","d2","solve","UnitBezier$1","interpolate","freeze","__proto__","color","from","to","array","Xn","Yn","Zn","t3","deg2rad$1","rad2deg","xyz2lab","lab2xyz","xyz2rgb","rgb2xyz","rgbToLab","rgbColor","labToRgb","labColor","interpolateHue","lab","forward","reverse","hcl","atan2","hclColor","Interpolate","operator","interpolation","interpolationFactor","lower","upper","exponentialInterpolation","controlPoints","rest","outputLower","outputUpper","lowerValue","upperValue","difference","progress","Interpolate$1","Coalesce","needsAnnotation","firstImage","argCount","Coalesce$1","Let","binding","Let$1","At","At$1","In","In$1","IndexOf","fromIndex","IndexOf$1","Match","inputType","cases","otherwise","labelContext","MAX_SAFE_INTEGER","sortedLabels","groupedByOutput","outputLookup","outputIndex","coerceLabel","Match$1","Case","branches","_","Case$1","Slice","beginIndex","endIndex","Slice$1","isComparableType","eqCollate","makeComparison","compareBasic","compareWithCollator","isOrderComparison","Comparison","hasUntypedArgument","lt","rt","Equals","NotEquals","LessThan","GreaterThan","LessThanOrEqual","GreaterThanOrEqual","NumberFormat","currency","unit","minFractionDigits","maxFractionDigits","minimumFractionDigits","maximumFractionDigits","Length","expressions","obj","v","varargs","pitch","heatmapDensity","lineProgress","skyRadialProgress","accumulated","LN2","E","LN10","asin","acos","ceil","m","isSupportedScript","toUpperCase","success","isFunction","StyleExpression","_warningHistory","_evaluator","_defaultValue","spec","getDefaultValue","_enumValues","evaluateWithoutErrorHandling","val","console","warn","createExpression","parser","types","enum","formatted","resolvedImage","getExpectedType","ZoomConstantExpression","_styleExpression","isStateDependent","ZoomDependentExpression","interpolationType","createPropertyExpression","isFeatureConstant$1","supportsPropertyExpression","isZoomConstant","supportsZoomExpression","zoomCurve","findZoomCurve","supportsInterpolation","childResult","deepUnbundle","unbundledValue","valueOf","unbundle","isExpressionFilter","createFilter","layerType","needGeometry","needFeature","convertFilter","filterExp","staticFilter","isDynamicFilter","unionDynamicBranches","collapseDynamicBooleanExpressions","extractStaticFilter","filterSpec","compiledStaticFilter","filterFunc","err","globalProperties","dynamicFilterFunc","compiledDynamicFilter","dynamicFilter","geometryNeeded","collapsed","dynamicConditionExpressions","collapsedExpression","subExpression","isBranchingDynamically","Set","filters","convertComparisonOp","convertNegation","convertInOp","convertHasOp","refProperties","deref","derefLayers","layers","create","ref","fontWeights","thin","hairline","light","book","regular","normal","plain","roman","standard","medium","bold","heavy","fat","poster","sp","italicRE","fontCache","mb2css","fonts","size","lineHeight","cssData","haveWeight","haveStyle","weight","fontFamilies","parts","maybeWeight","w","previousPart","startsWith","fontFamily","mapboxBaseUrl","getMapboxPath","url","normalizeStyleUrl","token","mapboxPath","decodeURI","URL","location","href","normalizeSourceUrl","tokenParam","styleUrl","urlObject","searchParams","set","window","devicePixelRatio","functionCacheByStyleId","filterCacheByStyleId","styleId","getStyleId","glStyle","getStyleFunctionKey","olLayer","getUid","getFunctionCache","functionCache","getFilterCache","filterCache","deg2rad","degrees","defaultResolutions","resolutions","res","createCanvas","width","height","WorkerGlobalScope","self","OffscreenCanvas","document","createElement","getZoomForResolution","zoomFactor","getResolutionForZoom","factor","pendingRequests","fetchResource","resourceType","metadata","request","transformedRequest","transformRequest","pendingRequest","toPromise","then","Request","headers","fetch","response","ok","json","Promise","reject","catch","getGlStyle","glStyleOrUrl","resolve","trim","accessToken","tilejsonCache","getTileJson","glSource","cacheKey","promise","tileLoadFunction","tile","src","setLoader","arrayBuffer","getFormat","readFeatures","featureProjection","setFeatures","setState","img","getImage","blob","createObjectURL","addEventListener","revokeObjectURL","tiles","normalizedSourceUrl","accessTokenParam","tileJson","expandUrl","tileUrl","scheme","drawIconHalo","spriteImage","spriteImageData","haloWidth","haloColor","imgSize","pixelRatio","imageCanvas","imageContext","getContext","drawImage","imageData","getImageData","globalCompositeOperation","fillStyle","jj","arc","fill","smoothstep","drawSDF","area","buffer","gamma","putImageData","hairSpacePool","applyLetterSpacing","letterSpacing","textWithLetterSpacing","lines","joinSpaceString","ll","measureContext","getMeasureContext","measureText","measureCache","wrapText","em","hardLines","wrappedText","words","maxWidth","word","testLine","prevWidth","nextWidth","next","lineWords","lastWord","fontFamilyRegEx","stripQuotesRegEx","loadedFontFamilies","hasFontFamily","family","styleSheets","styleSheet","cssRules","rules","cssRule","cssText","processedFontFamilies","expressionData","rawExpression","compiledExpression","emptyObj$1","zoomObj","renderFeatureCoordinates","renderFeature","getValue","layoutOrPaint","layerId","isExpr","bind","getDeclutterMode","prefix","evaluateFilter","renderTransparentEnabled","colorWithOpacity","opacity","templateRegEx","fromTemplate","recordLayer","styleFunctionArgs","stylefunction","sourceOrLayers","spriteData","spriteImageUrl","getFonts","version","spriteImageSize","spriteImageUnSDFed","blobUrl","crossOrigin","onload","changed","worker","postMessage","action","event","allLayers","layersBySourceLayer","mapboxLayers","iconImageCache","patternCache","mapboxSource","sourceLayer","sources","textHalo","styles","onlyLayer","featureBelongsToLayer","stylesLength","layerData","layout","paint","visibility","minzoom","maxzoom","stroke","strokeColor","fillIcon","icon","getFill","getStroke","getText","setZIndex","icon_cache_key","pattern","globalAlpha","createPattern","setColor","setWidth","setLineCap","setLineJoin","setMiterLimit","setLineDash","iconImg","skipLabel","textLineHeight","textSize","maxTextWidth","hasImage","placementAngle","iconImage","styleGeom","imageElement","iconRotationAlignment","geom","iconSize","iconColor","iconCacheKey","declutterMode","displacement","iconOptions","rotateWithView","sdf","setGeometry","setRotation","setOpacity","setAnchor","setImage","setText","circleRadius","circleStrokeColor","circleTranslate","circleColor","circleStrokeWidth","cache_key","radius","fontArray","includes","textField","reduce","acc","chunk","chunkFont","padding","textTransform","wrappedLabel","setFont","textAnchor","placement","textAlign","setPlacement","setRepeat","symbolSpacing","setOverflow","textHaloWidth","textOffset","textTranslate","vOffset","hOffset","textRotationAlignment","setRotateWithView","setMaxAngle","setTextAlign","textBaseline","setTextBaseline","textJustify","setJustify","setOffsetX","setOffsetY","setFill","halfTextSize","setStroke","textPadding","getPadding","setStyle","getTileResolutions","tileSize","createXYZ","maxZoom","getResolutions","completeOptions","applyStyle","sourceOrLayersOrOptions","optionsOrPath","sourceId","updateSource","find","assignSource","setupVectorSource","targetSource","getSource","setTileUrlFunction","getTileUrlFunction","setUrls","getUrls","format_","getAttributions","setAttributions","getTileLoadFunction","defaultLoadFunction","setTileLoadFunction","equivalent","getProjection","getTileGrid","setSource","isFinite","getMaxResolution","getMinZoom","setMaxResolution","setupGeoJSONSource","url_","getUrl","spriteScale","onChange","sprite","METERS_PER_UNIT","templateUrl","webfonts","fontsKey","fontDescriptions","cssFont","registerFont","fontDescription","checkedFonts","fontUrl","querySelector","markup","rel","head","appendChild","getStyle","normalizeSpriteUrl","sizeFactor","spriteUrl","origin","pathname","search","spritesJson","transformed","sourceOptionsFromTileJSON","tileJSON","tileJSONSource","tileJSONDoc","getTileJSON","bounds","fromLonLat","tr","extentFromTileJSON","projectionExtent","minZoom","sourceOptions","attributions","getTopLeft","getOrigin","getTileSize","urls","getBboxTemplate","geoJsonFormat","dataProjection","geoJsonUrl","extentUrl","bboxTemplate","attribution","loader","failure","addFeatures","removeLoadedExtent","strategy","getUserProjection","LayerMapBox","_VectorTileLayer","settings","_this","_classCallCheck","ssl","protocol","layerCfg","configuration","Config","isConfigLoaded","getLayerConf","styleTitle","styleName","title","current","VectorTileSource","state","_originators","originators","_legends","legends","_metadata","_description","description","_title","_quicklookUrl","quicklookUrl","layerVectorTileOptions","Utils","mergeParams","olParams","_callSuper","service","setStyleMapBox","_possibleConstructorReturn","_inherits","credentials","onStyleMapBoxLoad","onStyleMapBoxError","_this2","styleSource","vectorTileJson","TileJSONSource","on","getState","doc","observableUnByKey","VectorTileLayer","GeoportalMapBox","LayerWMS","_TileLayer","olSourceParams","getLayerId","sourceParams","wmsSource","SourceWMS","apiKey","layerTileOptions","getParams","LAYERS","geobbox","globalConstraints","left","bottom","right","top","olTransformExtentProj","olGetProj","_typeof","minResolution","minScale","maxResolution","maxScale","TileLayer","GeoportalWMS","LayerWMTS","wmtsSource","SourceWMTS","getLayer","GeoportalWMTS","TileWMS","Logger","getLogger","_TileWMSSource","wmsParams","getLayerKey","getLayerParams","urlParams","Pkg","olExtVersion","wmsSourceOptions","Gp","Helper","normalyzeUrl","SERVICE","VERSION","STYLES","FORMAT","TileWMSSource","WMTS","getZoomLevelFromScaleDenominator","scaleDenominator","crs","resolutionsNatives","drawLogo","jl","originator","constraints","kl","constraint","minZoomLevel","maxScaleDenominator","maxZoomLevel","minScaleDenominator","viewExtent","intersects","logo","container","className","link","textContent","innerHTML","extent1","extent2","intersectsX","intersectsY","_WMTSExtended","wmtsParams","wmtsSourceOptions","LayerUtils","matrixSet","TMSLink","WMTSTileGrid","nativeResolutions","matrixIds","tileMatrices","topLeftCorner","WMTSExtended","_regeneratorRuntime","defineProperty","Symbol","iterator","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","Context","makeInvokeMethod","tryCatch","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","defineIteratorMethods","_invoke","AsyncIterator","invoke","__await","callInvokeWithMethodAndArg","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","displayName","isGeneratorFunction","mark","setPrototypeOf","awrap","async","prev","charAt","rval","handle","complete","finish","delegateYield","asyncGeneratorStep","_asyncToGenerator","_next","_throw","m_suggestions","controller","AbortController","m_index","m_fields","m_size","m_maximumResponses","m_filterByService","m_filterByProjection","m_filterByTMS","m_url","EventTarget","suggest","_ref","_callee","results","_context","clear","fields","append","status","unique","srs","metadata_url","layer_name","dispatchEvent","CustomEvent","bubbles","detail","getSuggestions","_x","findIndex","abort","getNames","getTitles","setIndex","setFields","setSize","setUrl","eval","setMaximumResponses","setFiltersByService","setFiltersByProjection","setFiltersByTMS","updateFilterByTMS","_ref2","_callee2","lstName","_context2","_x2","_WMTSSource","tilePixelRatio","tileCoord","getTileCoordForCoordAndResolution","tileExtent","getTileCoordExtent","transformedTileCoord","tmpTileCoord","tmpExtent","olCreateEmpty","olGetWidth","olIntersects","getTransformedTileCoord","tileResolution","getResolution","tileMatrix","getMatrixIds","baseParams","REQUEST","LAYER","TILECOL","TILEROW","TILEMATRIX","TILEMATRIXSET","getMatrixSet","STYLE","WMTSSource","detectSupport","isDesktop","userAgent","navigator","prop","param","LoggerByDefault","process","VERBOSE","env","Log","logname","disableAll","loggers","enableAll","module","exports","objectOrFunction","vertxNext","customSchedulerFn","asap","callback","queue","flush","scheduleFlush","setScheduler","scheduleFn","setAsap","asapFn","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useNextTick","nextTick","useVertxTimer","useSetTimeout","useMutationObserver","iterations","observer","node","createTextNode","observe","characterData","useMessageChannel","channel","port1","onmessage","port2","globalSetTimeout","setTimeout","attemptVertx","vertx","Function","require","runOnLoop","runOnContext","onFulfillment","onRejection","noop","PROMISE_ID","makePromise","_state","invokeCallback","_result","subscribe","resolve$1","Constructor","random","substring","PENDING","FULFILLED","REJECTED","selfFulfillment","cannotReturnOwn","tryThen","then$$1","fulfillmentHandler","rejectionHandler","handleForeignThenable","thenable","sealed","fulfill","reason","_label","handleOwnThenable","handleMaybeThenable","maybeThenable","publishRejection","_onerror","publish","_subscribers","subscribers","settled","hasCallback","succeeded","initializePromise","resolver","nextId","validationError","Enumerator","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","resolve$$1","_then","didError","_settledAt","Promise$1","_willSettleAt","enumerator","all","entries","race","reject$1","needsResolver","needsNew","finally","polyfill","local","P","promiseToString","cast","_setScheduler","_setAsap","_asap","oc","MIME_TYPE","HTML","isHTML","XML_APPLICATION","XML_TEXT","XML_XHTML_APPLICATION","XML_SVG_IMAGE","NAMESPACE","uri","SVG","XML","XMLNS","list","predicate","ac","conventions","dom","entities","sax","DOMImplementation","ParseError","XMLReader","normalizeLineEndings","DOMParser","locator","DOMHandler","cdata","position","lineNumber","columnNumber","_locator","systemId","_toString","chars","start","java","lang","appendElement","hander","currentElement","parseFromString","mimeType","domBuilder","errorHandler","defaultNSMap","xmlns","entityMap","HTML_ENTITIES","XML_ENTITIES","setDocumentLocator","errorImpl","isCallback","build","msg","buildErrorHandler","xml","startDocument","createDocument","documentURI","startElement","namespaceURI","localName","qName","attrs","el","createElementNS","getURI","attr","getQName","createAttributeNS","getLocator","nodeValue","setAttributeNode","endElement","tagName","parentNode","startPrefixMapping","endPrefixMapping","processingInstruction","ins","createProcessingInstruction","ignorableWhitespace","ch","characters","charNode","createCDATASection","skippedEntity","endDocument","comment","comm","createComment","startCDATA","endCDATA","startDTD","publicId","impl","implementation","createDocumentType","dt","doctype","warning","fatalError","notEmptyString","orderedSetReducer","element","toOrderedSet","splitOnASCIIWhitespace","copy","_extends","Class","Super","pt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","DOMException","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","$$length","NamedNodeMap","_findNodeIndex","_addNamedNode","newAttr","oldAttr","ownerElement","_onRemoveAttribute","ns","_nsMap","_onAddAttribute","_removeNamedNode","Node","_xmlEncoder","charCodeAt","_visitNode","firstChild","nextSibling","Document","remove","_onUpdateChild","newChild","cs","childNodes","_removeChild","previous","previousSibling","lastChild","isDocTypeNode","nodeType","isElementNode","isTextNode","isElementInsertionPossible","parentChildNodes","docTypeNode","isElementReplacementPossible","assertPreInsertionValidity1to5","hasValidParentNodeType","hasInsertableNodeType","assertPreInsertionValidityInDocument","nodeChildNodes","nodeChildElements","parentElementChild","assertPreReplacementValidityInDocument","_insertBefore","_inDocumentAssertion","cp","removeChild","newFirst","newLast","pre","Element","Attr","CharacterData","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer","nodeSerializeToString","isHtml","nodeFilter","buf","refNode","documentElement","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","addSerializedAttribute","qualifiedName","attributes","nodeName","prefixedNodeName","defaultNS","ai","nsi","pubid","sysid","sub","internalSubset","importNode","deep","node2","cloneNode","attrs2","_ownerElement","getNamedItem","setNamedItem","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","root","insertBefore","refChild","replaceChild","oldChild","hasChildNodes","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importedNode","getElementById","rtv","getAttribute","getElementsByClassName","classNames","classNamesSet","nodeClassNames","matches","nodeClassNamesSet","createDocumentFragment","createAttribute","specified","createEntityReference","pl","hasAttribute","getAttributeNode","setAttribute","removeAttribute","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","old","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","substringData","count","insertData","replaceData","deleteData","splitText","newText","newNode","getTextContent","amp","apos","gt","quot","Aacute","aacute","Abreve","abreve","acd","acE","Acirc","acirc","acute","Acy","acy","AElig","aelig","af","Afr","afr","Agrave","agrave","alefsym","aleph","Alpha","Amacr","amacr","amalg","AMP","And","and","andand","andd","andslope","andv","ang","ange","angmsd","angmsdaa","angmsdab","angmsdac","angmsdad","angmsdae","angmsdaf","angmsdag","angmsdah","angrt","angrtvb","angrtvbd","angsph","angst","angzarr","Aogon","aogon","Aopf","aopf","ap","apacir","apE","ape","apid","ApplyFunction","approx","approxeq","Aring","aring","Ascr","ascr","Assign","ast","asymp","asympeq","Atilde","atilde","Auml","auml","awconint","awint","backcong","backepsilon","backprime","backsim","backsimeq","Backslash","Barv","barvee","Barwed","barwed","barwedge","bbrk","bbrktbrk","bcong","Bcy","bcy","bdquo","becaus","Because","because","bemptyv","bepsi","bernou","Bernoullis","Beta","beta","beth","between","Bfr","bfr","bigcap","bigcirc","bigcup","bigodot","bigoplus","bigotimes","bigsqcup","bigstar","bigtriangledown","bigtriangleup","biguplus","bigvee","bigwedge","bkarow","blacklozenge","blacksquare","blacktriangle","blacktriangledown","blacktriangleleft","blacktriangleright","blank","blk12","blk14","blk34","block","bne","bnequiv","bNot","bnot","Bopf","bopf","bot","bowtie","boxbox","boxDL","boxDl","boxdL","boxdl","boxDR","boxDr","boxdR","boxdr","boxH","boxh","boxHD","boxHd","boxhD","boxhd","boxHU","boxHu","boxhU","boxhu","boxminus","boxplus","boxtimes","boxUL","boxUl","boxuL","boxul","boxUR","boxUr","boxuR","boxur","boxV","boxv","boxVH","boxVh","boxvH","boxvh","boxVL","boxVl","boxvL","boxvl","boxVR","boxVr","boxvR","boxvr","bprime","Breve","breve","brvbar","Bscr","bscr","bsemi","bsim","bsime","bsol","bsolb","bsolhsub","bull","bullet","bump","bumpE","bumpe","Bumpeq","bumpeq","Cacute","cacute","Cap","cap","capand","capbrcup","capcap","capcup","capdot","CapitalDifferentialD","caps","caret","caron","Cayleys","ccaps","Ccaron","ccaron","Ccedil","ccedil","Ccirc","ccirc","Cconint","ccups","ccupssm","Cdot","cdot","cedil","Cedilla","cemptyv","cent","CenterDot","centerdot","Cfr","cfr","CHcy","chcy","check","checkmark","Chi","chi","cir","circ","circeq","circlearrowleft","circlearrowright","circledast","circledcirc","circleddash","CircleDot","circledR","circledS","CircleMinus","CirclePlus","CircleTimes","cirE","cire","cirfnint","cirmid","cirscir","ClockwiseContourIntegral","CloseCurlyDoubleQuote","CloseCurlyQuote","clubs","clubsuit","Colon","colon","Colone","colone","coloneq","comma","commat","comp","compfn","complement","complexes","cong","congdot","Congruent","Conint","conint","ContourIntegral","Copf","copf","coprod","Coproduct","COPY","copysr","CounterClockwiseContourIntegral","crarr","Cross","cross","Cscr","cscr","csub","csube","csup","csupe","ctdot","cudarrl","cudarrr","cuepr","cuesc","cularr","cularrp","Cup","cup","cupbrcap","CupCap","cupcap","cupcup","cupdot","cupor","cups","curarr","curarrm","curlyeqprec","curlyeqsucc","curlyvee","curlywedge","curren","curvearrowleft","curvearrowright","cuvee","cuwed","cwconint","cwint","cylcty","Dagger","dagger","daleth","Darr","dArr","darr","dash","Dashv","dashv","dbkarow","dblac","Dcaron","dcaron","Dcy","dcy","DD","dd","ddagger","ddarr","DDotrahd","ddotseq","deg","Del","Delta","delta","demptyv","dfisht","Dfr","dfr","dHar","dharl","dharr","DiacriticalAcute","DiacriticalDot","DiacriticalDoubleAcute","DiacriticalGrave","DiacriticalTilde","diam","Diamond","diamond","diamondsuit","diams","die","DifferentialD","digamma","disin","div","divide","divideontimes","divonx","DJcy","djcy","dlcorn","dlcrop","dollar","Dopf","dopf","Dot","dot","DotDot","doteq","doteqdot","DotEqual","dotminus","dotplus","dotsquare","doublebarwedge","DoubleContourIntegral","DoubleDot","DoubleDownArrow","DoubleLeftArrow","DoubleLeftRightArrow","DoubleLeftTee","DoubleLongLeftArrow","DoubleLongLeftRightArrow","DoubleLongRightArrow","DoubleRightArrow","DoubleRightTee","DoubleUpArrow","DoubleUpDownArrow","DoubleVerticalBar","DownArrow","Downarrow","downarrow","DownArrowBar","DownArrowUpArrow","DownBreve","downdownarrows","downharpoonleft","downharpoonright","DownLeftRightVector","DownLeftTeeVector","DownLeftVector","DownLeftVectorBar","DownRightTeeVector","DownRightVector","DownRightVectorBar","DownTee","DownTeeArrow","drbkarow","drcorn","drcrop","Dscr","dscr","DScy","dscy","dsol","Dstrok","dstrok","dtdot","dtri","dtrif","duarr","duhar","dwangle","DZcy","dzcy","dzigrarr","Eacute","eacute","easter","Ecaron","ecaron","ecir","Ecirc","ecirc","ecolon","Ecy","ecy","eDDot","Edot","eDot","edot","ee","efDot","Efr","efr","eg","Egrave","egrave","egs","egsdot","elinters","ell","els","elsdot","Emacr","emacr","empty","emptyset","EmptySmallSquare","emptyv","EmptyVerySmallSquare","emsp","emsp13","emsp14","ENG","eng","ensp","Eogon","eogon","Eopf","eopf","epar","eparsl","eplus","epsi","Epsilon","epsiv","eqcirc","eqcolon","eqsim","eqslantgtr","eqslantless","Equal","equals","EqualTilde","equest","Equilibrium","equiv","equivDD","eqvparsl","erarr","erDot","Escr","escr","esdot","Esim","esim","Eta","eta","ETH","eth","Euml","euml","euro","excl","exist","Exists","expectation","ExponentialE","exponentiale","fallingdotseq","Fcy","fcy","female","ffilig","fflig","ffllig","Ffr","ffr","filig","FilledSmallSquare","FilledVerySmallSquare","fjlig","flat","fllig","fltns","fnof","Fopf","fopf","ForAll","forall","fork","forkv","Fouriertrf","fpartint","frac12","frac13","frac14","frac15","frac16","frac18","frac23","frac25","frac34","frac35","frac38","frac45","frac56","frac58","frac78","frasl","frown","Fscr","fscr","gacute","Gamma","Gammad","gammad","gap","Gbreve","gbreve","Gcedil","Gcirc","gcirc","Gcy","gcy","Gdot","gdot","gE","ge","gEl","gel","geq","geqq","geqslant","ges","gescc","gesdot","gesdoto","gesdotol","gesl","gesles","Gfr","gfr","Gg","gg","ggg","gimel","GJcy","gjcy","gl","gla","glE","glj","gnap","gnapprox","gnE","gne","gneq","gneqq","gnsim","Gopf","gopf","grave","GreaterEqual","GreaterEqualLess","GreaterFullEqual","GreaterGreater","GreaterLess","GreaterSlantEqual","GreaterTilde","Gscr","gscr","gsim","gsime","gsiml","Gt","GT","gtcc","gtcir","gtdot","gtlPar","gtquest","gtrapprox","gtrarr","gtrdot","gtreqless","gtreqqless","gtrless","gtrsim","gvertneqq","gvnE","Hacek","hairsp","half","hamilt","HARDcy","hardcy","hArr","harr","harrcir","harrw","Hat","hbar","Hcirc","hcirc","hearts","heartsuit","hellip","hercon","Hfr","hfr","HilbertSpace","hksearow","hkswarow","hoarr","homtht","hookleftarrow","hookrightarrow","Hopf","hopf","horbar","HorizontalLine","Hscr","hscr","hslash","Hstrok","hstrok","HumpDownHump","HumpEqual","hybull","hyphen","Iacute","iacute","ic","Icirc","icirc","Icy","icy","Idot","IEcy","iecy","iexcl","iff","Ifr","ifr","Igrave","igrave","iiiint","iiint","iinfin","iiota","IJlig","ijlig","Im","Imacr","imacr","ImaginaryI","imagline","imagpart","imath","imof","imped","Implies","in","incare","infin","infintie","inodot","Int","int","intcal","integers","Integral","intercal","Intersection","intlarhk","intprod","InvisibleComma","InvisibleTimes","IOcy","iocy","Iogon","iogon","Iopf","iopf","Iota","iota","iprod","iquest","Iscr","iscr","isin","isindot","isinE","isins","isinsv","isinv","it","Itilde","itilde","Iukcy","iukcy","Iuml","iuml","Jcirc","jcirc","Jcy","jcy","Jfr","jfr","jmath","Jopf","jopf","Jscr","jscr","Jsercy","jsercy","Jukcy","jukcy","Kappa","kappa","kappav","Kcedil","kcedil","Kcy","kcy","Kfr","kfr","kgreen","KHcy","khcy","KJcy","kjcy","Kopf","kopf","Kscr","kscr","lAarr","Lacute","lacute","laemptyv","lagran","Lambda","lambda","Lang","langd","langle","lap","Laplacetrf","laquo","Larr","lArr","larr","larrb","larrbfs","larrfs","larrhk","larrlp","larrpl","larrsim","larrtl","lAtail","latail","late","lates","lBarr","lbarr","lbbrk","lbrace","lbrack","lbrke","lbrksld","lbrkslu","Lcaron","lcaron","Lcedil","lcedil","lceil","lcub","Lcy","lcy","ldca","ldquo","ldquor","ldrdhar","ldrushar","ldsh","lE","le","LeftAngleBracket","LeftArrow","Leftarrow","leftarrow","LeftArrowBar","LeftArrowRightArrow","leftarrowtail","LeftCeiling","LeftDoubleBracket","LeftDownTeeVector","LeftDownVector","LeftDownVectorBar","LeftFloor","leftharpoondown","leftharpoonup","leftleftarrows","LeftRightArrow","Leftrightarrow","leftrightarrow","leftrightarrows","leftrightharpoons","leftrightsquigarrow","LeftRightVector","LeftTee","LeftTeeArrow","LeftTeeVector","leftthreetimes","LeftTriangle","LeftTriangleBar","LeftTriangleEqual","LeftUpDownVector","LeftUpTeeVector","LeftUpVector","LeftUpVectorBar","LeftVector","LeftVectorBar","lEg","leg","leq","leqq","leqslant","les","lescc","lesdot","lesdoto","lesdotor","lesg","lesges","lessapprox","lessdot","lesseqgtr","lesseqqgtr","LessEqualGreater","LessFullEqual","LessGreater","lessgtr","LessLess","lesssim","LessSlantEqual","LessTilde","lfisht","lfloor","Lfr","lfr","lg","lgE","lHar","lhard","lharu","lharul","lhblk","LJcy","ljcy","Ll","llarr","llcorner","Lleftarrow","llhard","lltri","Lmidot","lmidot","lmoust","lmoustache","lnap","lnapprox","lnE","lne","lneq","lneqq","lnsim","loang","loarr","lobrk","LongLeftArrow","Longleftarrow","longleftarrow","LongLeftRightArrow","Longleftrightarrow","longleftrightarrow","longmapsto","LongRightArrow","Longrightarrow","longrightarrow","looparrowleft","looparrowright","lopar","Lopf","lopf","loplus","lotimes","lowast","lowbar","LowerLeftArrow","LowerRightArrow","loz","lozenge","lozf","lpar","lparlt","lrarr","lrcorner","lrhar","lrhard","lrm","lrtri","lsaquo","Lscr","lscr","Lsh","lsh","lsim","lsime","lsimg","lsqb","lsquo","lsquor","Lstrok","lstrok","Lt","LT","ltcc","ltcir","ltdot","lthree","ltimes","ltlarr","ltquest","ltri","ltrie","ltrif","ltrPar","lurdshar","luruhar","lvertneqq","lvnE","macr","male","malt","maltese","mapsto","mapstodown","mapstoleft","mapstoup","marker","mcomma","Mcy","mcy","mdash","mDDot","measuredangle","MediumSpace","Mellintrf","Mfr","mfr","mho","micro","midast","midcir","middot","minus","minusb","minusd","minusdu","MinusPlus","mlcp","mldr","mnplus","models","Mopf","mopf","mp","Mscr","mscr","mstpos","Mu","mu","multimap","mumap","nabla","Nacute","nacute","nang","nap","napE","napid","napos","napprox","natur","natural","naturals","nbsp","nbump","nbumpe","ncap","Ncaron","ncaron","Ncedil","ncedil","ncong","ncongdot","ncup","Ncy","ncy","ndash","ne","nearhk","neArr","nearr","nearrow","nedot","NegativeMediumSpace","NegativeThickSpace","NegativeThinSpace","NegativeVeryThinSpace","nequiv","nesear","nesim","NestedGreaterGreater","NestedLessLess","NewLine","nexist","nexists","Nfr","nfr","ngE","nge","ngeq","ngeqq","ngeqslant","nges","nGg","ngsim","nGt","ngt","ngtr","nGtv","nhArr","nharr","nhpar","ni","nis","nisd","niv","NJcy","njcy","nlArr","nlarr","nldr","nlE","nle","nLeftarrow","nleftarrow","nLeftrightarrow","nleftrightarrow","nleq","nleqq","nleqslant","nles","nless","nLl","nlsim","nLt","nlt","nltri","nltrie","nLtv","nmid","NoBreak","NonBreakingSpace","Nopf","nopf","Not","not","NotCongruent","NotCupCap","NotDoubleVerticalBar","NotElement","NotEqual","NotEqualTilde","NotExists","NotGreater","NotGreaterEqual","NotGreaterFullEqual","NotGreaterGreater","NotGreaterLess","NotGreaterSlantEqual","NotGreaterTilde","NotHumpDownHump","NotHumpEqual","notin","notindot","notinE","notinva","notinvb","notinvc","NotLeftTriangle","NotLeftTriangleBar","NotLeftTriangleEqual","NotLess","NotLessEqual","NotLessGreater","NotLessLess","NotLessSlantEqual","NotLessTilde","NotNestedGreaterGreater","NotNestedLessLess","notni","notniva","notnivb","notnivc","NotPrecedes","NotPrecedesEqual","NotPrecedesSlantEqual","NotReverseElement","NotRightTriangle","NotRightTriangleBar","NotRightTriangleEqual","NotSquareSubset","NotSquareSubsetEqual","NotSquareSuperset","NotSquareSupersetEqual","NotSubset","NotSubsetEqual","NotSucceeds","NotSucceedsEqual","NotSucceedsSlantEqual","NotSucceedsTilde","NotSuperset","NotSupersetEqual","NotTilde","NotTildeEqual","NotTildeFullEqual","NotTildeTilde","NotVerticalBar","npar","nparallel","nparsl","npart","npolint","npr","nprcue","npre","nprec","npreceq","nrArr","nrarr","nrarrc","nrarrw","nRightarrow","nrightarrow","nrtri","nrtrie","nsc","nsccue","nsce","Nscr","nscr","nshortmid","nshortparallel","nsim","nsime","nsimeq","nsmid","nspar","nsqsube","nsqsupe","nsub","nsubE","nsube","nsubset","nsubseteq","nsubseteqq","nsucc","nsucceq","nsup","nsupE","nsupe","nsupset","nsupseteq","nsupseteqq","ntgl","Ntilde","ntilde","ntlg","ntriangleleft","ntrianglelefteq","ntriangleright","ntrianglerighteq","Nu","nu","numero","numsp","nvap","nVDash","nVdash","nvDash","nvdash","nvge","nvgt","nvHarr","nvinfin","nvlArr","nvle","nvlt","nvltrie","nvrArr","nvrtrie","nvsim","nwarhk","nwArr","nwarr","nwarrow","nwnear","Oacute","oacute","oast","ocir","Ocirc","ocirc","Ocy","ocy","odash","Odblac","odblac","odiv","odot","odsold","OElig","oelig","ofcir","Ofr","ofr","ogon","Ograve","ograve","ogt","ohbar","ohm","oint","olarr","olcir","olcross","oline","olt","Omacr","omacr","Omega","omega","Omicron","omicron","omid","ominus","Oopf","oopf","opar","OpenCurlyDoubleQuote","OpenCurlyQuote","operp","oplus","Or","or","orarr","ord","order","orderof","ordf","ordm","origof","oror","orslope","orv","oS","Oscr","oscr","Oslash","oslash","osol","Otilde","otilde","Otimes","otimes","otimesas","Ouml","ouml","ovbar","OverBar","OverBrace","OverBracket","OverParenthesis","par","para","parallel","parsim","parsl","PartialD","Pcy","pcy","percnt","period","permil","perp","pertenk","Pfr","pfr","Phi","phi","phiv","phmmat","phone","Pi","pi","pitchfork","piv","planck","planckh","plankv","plus","plusacir","plusb","pluscir","plusdo","plusdu","pluse","PlusMinus","plusmn","plussim","plustwo","pm","Poincareplane","pointint","Popf","popf","pound","Pr","pr","prap","prcue","prE","prec","precapprox","preccurlyeq","Precedes","PrecedesEqual","PrecedesSlantEqual","PrecedesTilde","preceq","precnapprox","precneqq","precnsim","precsim","Prime","prime","primes","prnap","prnE","prnsim","prod","Product","profalar","profline","profsurf","Proportion","Proportional","propto","prsim","prurel","Pscr","pscr","Psi","psi","puncsp","Qfr","qfr","qint","Qopf","qopf","qprime","Qscr","qscr","quaternions","quatint","quest","questeq","QUOT","rAarr","Racute","racute","radic","raemptyv","Rang","rang","rangd","range","rangle","raquo","Rarr","rArr","rarr","rarrap","rarrb","rarrbfs","rarrc","rarrfs","rarrhk","rarrlp","rarrpl","rarrsim","Rarrtl","rarrtl","rarrw","rAtail","ratail","ratio","rationals","RBarr","rBarr","rbarr","rbbrk","rbrace","rbrack","rbrke","rbrksld","rbrkslu","Rcaron","rcaron","Rcedil","rcedil","rceil","rcub","Rcy","rcy","rdca","rdldhar","rdquo","rdquor","rdsh","Re","real","realine","realpart","reals","rect","REG","reg","ReverseElement","ReverseEquilibrium","ReverseUpEquilibrium","rfisht","rfloor","Rfr","rfr","rHar","rhard","rharu","rharul","Rho","rho","rhov","RightAngleBracket","RightArrow","Rightarrow","rightarrow","RightArrowBar","RightArrowLeftArrow","rightarrowtail","RightCeiling","RightDoubleBracket","RightDownTeeVector","RightDownVector","RightDownVectorBar","RightFloor","rightharpoondown","rightharpoonup","rightleftarrows","rightleftharpoons","rightrightarrows","rightsquigarrow","RightTee","RightTeeArrow","RightTeeVector","rightthreetimes","RightTriangle","RightTriangleBar","RightTriangleEqual","RightUpDownVector","RightUpTeeVector","RightUpVector","RightUpVectorBar","RightVector","RightVectorBar","risingdotseq","rlarr","rlhar","rlm","rmoust","rmoustache","rnmid","roang","roarr","robrk","ropar","Ropf","ropf","roplus","rotimes","RoundImplies","rpar","rpargt","rppolint","rrarr","Rrightarrow","rsaquo","Rscr","rscr","Rsh","rsh","rsqb","rsquo","rsquor","rthree","rtimes","rtri","rtrie","rtrif","rtriltri","RuleDelayed","ruluhar","rx","Sacute","sacute","sbquo","Sc","sc","scap","Scaron","scaron","sccue","scE","sce","Scedil","scedil","Scirc","scirc","scnap","scnE","scnsim","scpolint","scsim","Scy","scy","sdot","sdotb","sdote","searhk","seArr","searr","searrow","sect","semi","seswar","setminus","setmn","sext","Sfr","sfr","sfrown","sharp","SHCHcy","shchcy","SHcy","shcy","ShortDownArrow","ShortLeftArrow","shortmid","shortparallel","ShortRightArrow","ShortUpArrow","shy","Sigma","sigma","sigmaf","sigmav","sim","simdot","sime","simeq","simg","simgE","siml","simlE","simne","simplus","simrarr","slarr","SmallCircle","smallsetminus","smashp","smeparsl","smid","smile","smt","smte","smtes","SOFTcy","softcy","sol","solb","solbar","Sopf","sopf","spades","spadesuit","spar","sqcap","sqcaps","sqcup","sqcups","Sqrt","sqsub","sqsube","sqsubset","sqsubseteq","sqsup","sqsupe","sqsupset","sqsupseteq","squ","Square","square","SquareIntersection","SquareSubset","SquareSubsetEqual","SquareSuperset","SquareSupersetEqual","SquareUnion","squarf","squf","srarr","Sscr","sscr","ssetmn","ssmile","sstarf","Star","star","starf","straightepsilon","straightphi","strns","Sub","subdot","subE","sube","subedot","submult","subnE","subne","subplus","subrarr","Subset","subset","subseteq","subseteqq","SubsetEqual","subsetneq","subsetneqq","subsim","subsub","subsup","succ","succapprox","succcurlyeq","Succeeds","SucceedsEqual","SucceedsSlantEqual","SucceedsTilde","succeq","succnapprox","succneqq","succnsim","succsim","SuchThat","Sum","sum","sung","Sup","sup","sup1","sup2","sup3","supdot","supdsub","supE","supe","supedot","Superset","SupersetEqual","suphsol","suphsub","suplarr","supmult","supnE","supne","supplus","Supset","supset","supseteq","supseteqq","supsetneq","supsetneqq","supsim","supsub","supsup","swarhk","swArr","swarr","swarrow","swnwar","szlig","Tab","Tau","tau","tbrk","Tcaron","tcaron","Tcedil","tcedil","Tcy","tcy","tdot","telrec","Tfr","tfr","there4","Therefore","therefore","Theta","theta","thetasym","thetav","thickapprox","thicksim","ThickSpace","thinsp","ThinSpace","thkap","thksim","THORN","thorn","Tilde","tilde","TildeEqual","TildeFullEqual","TildeTilde","times","timesb","timesbar","timesd","tint","toea","topbot","topcir","Topf","topf","topfork","tosa","tprime","TRADE","trade","triangle","triangledown","triangleleft","trianglelefteq","triangleq","triangleright","trianglerighteq","tridot","trie","triminus","TripleDot","triplus","trisb","tritime","trpezium","Tscr","tscr","TScy","tscy","TSHcy","tshcy","Tstrok","tstrok","twixt","twoheadleftarrow","twoheadrightarrow","Uacute","uacute","Uarr","uArr","uarr","Uarrocir","Ubrcy","ubrcy","Ubreve","ubreve","Ucirc","ucirc","Ucy","ucy","udarr","Udblac","udblac","udhar","ufisht","Ufr","ufr","Ugrave","ugrave","uHar","uharl","uharr","uhblk","ulcorn","ulcorner","ulcrop","ultri","Umacr","umacr","uml","UnderBar","UnderBrace","UnderBracket","UnderParenthesis","Union","UnionPlus","Uogon","uogon","Uopf","uopf","UpArrow","Uparrow","uparrow","UpArrowBar","UpArrowDownArrow","UpDownArrow","Updownarrow","updownarrow","UpEquilibrium","upharpoonleft","upharpoonright","uplus","UpperLeftArrow","UpperRightArrow","Upsi","upsi","upsih","Upsilon","upsilon","UpTee","UpTeeArrow","upuparrows","urcorn","urcorner","urcrop","Uring","uring","urtri","Uscr","uscr","utdot","Utilde","utilde","utri","utrif","uuarr","Uuml","uuml","uwangle","vangrt","varepsilon","varkappa","varnothing","varphi","varpi","varpropto","vArr","varr","varrho","varsigma","varsubsetneq","varsubsetneqq","varsupsetneq","varsupsetneqq","vartheta","vartriangleleft","vartriangleright","Vbar","vBar","vBarv","Vcy","vcy","VDash","Vdash","vDash","vdash","Vdashl","Vee","vee","veebar","veeeq","vellip","Verbar","verbar","Vert","vert","VerticalBar","VerticalLine","VerticalSeparator","VerticalTilde","VeryThinSpace","Vfr","vfr","vltri","vnsub","vnsup","Vopf","vopf","vprop","vrtri","Vscr","vscr","vsubnE","vsubne","vsupnE","vsupne","Vvdash","vzigzag","Wcirc","wcirc","wedbar","Wedge","wedge","wedgeq","weierp","Wfr","wfr","Wopf","wopf","wp","wr","wreath","Wscr","wscr","xcap","xcirc","xcup","xdtri","Xfr","xfr","xhArr","xharr","Xi","xi","xlArr","xlarr","xmap","xnis","xodot","Xopf","xopf","xoplus","xotime","xrArr","xrarr","Xscr","xscr","xsqcup","xuplus","xutri","xvee","xwedge","Yacute","yacute","YAcy","yacy","Ycirc","ycirc","Ycy","ycy","yen","Yfr","yfr","YIcy","yicy","Yopf","yopf","Yscr","yscr","YUcy","yucy","Yuml","yuml","Zacute","zacute","Zcaron","zcaron","Zcy","zcy","Zdot","zdot","zeetrf","ZeroWidthSpace","Zeta","zeta","Zfr","zfr","ZHcy","zhcy","zigrarr","Zopf","zopf","Zscr","zscr","zwj","zwnj","nameStartChar","nameChar","RegExp","tagNamePattern","S_TAG","S_ATTR","S_ATTR_SPACE","S_EQ","S_ATTR_NOQUOT_VALUE","S_ATTR_END","S_TAG_SPACE","S_TAG_CLOSE","copyLocator","parseElementStartPart","currentNSMap","entityReplacer","addAttribute","qname","startIndex","attributeNames","addValue","attrName","setTagName","closed","localNSMap","nsp","nsPrefix","_copy","parseHtmlSpecialContent","elStartEnd","elEndStart","fixSelfClosed","closeMap","lastIndexOf","parseDCC","matchs","lastMatch","endDTD","parseInstruction","ElementAttributes","defaultNSMapCopy","fixedFromCharCode","surrogate1","surrogate2","fromCharCode","appendText","xt","lineEnd","linePattern","lineStart","parseStack","tagStart","config","endMatch","locator2","getLocalName","ErrorService","TYPE_UNKERR","TYPE_SRVERR","TYPE_USEERR","WPS","logger","trace","DataObject","paramservice","paramversion","paramidentifier","identifier","paramrawdataoutput","rawdataoutput","paramrequest","requestString","template","post","namespaceByDefault","schemaLocationByDefault","processRequestString","__addDataInputs","tmpl","sep","that","getData","__addDataInput","tmp","setMethod","getMethod","xmlString","xmlDoc","reader","__getXMLDOC","setReader","errorMsg","ActiveXObject","loadXML","parseError","errorCode","linepos","parsererror","__readDefault","dataAttributes","nodeAttributes","attribute","__getAttributes","childData","children","getXMLString","setXMLString","getReader","read","getXMLDoc","setXMLDoc","parserOutput","__getRootNode","servicesVersion","servicesDate","Protocols","XHR","Services","DefaultUrl","AltiResponse","A","Alti","Elevation","AutoCompleteResponse","AutoComplete","SuggestedLocation","IsoCurveResponse","RouteResponse","Route","RouteInstruction","uuid","Date","now","timeOut","info","onResponse","callbackId","callbackSuffix","urlHasCallbackKey","urlHasCallbackName","idx","callbackName","HasCallbackName","onTimeOut","onTimeOutTrigger","_deleteScript","clearTimeout","_createScript","scriptu","scripto","script","send","nocache","getTime","proxy","referer","__call","onFailure","__callJSON","__callXML","corps","hXHR","nodefetch","opts","Referer","body","statusText","XMLHttpRequest","open","overrideMimeType","setRequestHeader","onerror","ontimeout","onreadystatechange","readyState","responseURL","data4xhr","XDomainRequest","timeout","responseText","data4xdr","getMessage","CLASSNAME","positions","outputFormat","resource","sampling","api","httpMethod","zonly","measures","serverUrl","lstUrlByDefault","newUrl","urlFound","wps","buildRequest","onSuccess","onError","analyzeResponse","rawResponse","AltiResponseReader","READERS","elevations","altiResponse","elevation","textNode","lon","elevationObject","source_name","measure","source_measure","measureChildren","exceptionreport","exceptionReport","exception","exceptionCode","delimiter","indent","bOnError","bOnSuccess","myReq","AltiRequestREST","profil","getLon","getLat","myTemplate","rqstWPS","AltiElevationRequest","_zonly","AltiProfilRequest","_sampling","AltiRequest","setPositions","lstPosition","getPositions","addPositions","lstLon","lstLat","JSONResponse","errorMess","Measure","options_","patchOptionConvertor","territory","terr","maximumResponses","filterOptions","normalyzeParameters","encodeURIComponent","suggestedLocation","country","street","poi","poiType","commune","city","fullText","fulltext","postalCode","zipcode","classification","suggestedLocations","CommonService","opt","proxyURL","onBuildRequest","callService","onCallService","onAnalyzeResponse","strUrlProxified","strData","bUrlProxified","requestMetaOptions","contentType","http","onBeforeParse","newResponse","customConfigFile","sync","listConfigUrls","__callServiceSync","__callService","listConfigResults","Fetch","fetchFactory","promises","ConfigJSON","objects","allLayersConfig","allKeysConfig","allTMSConfig","generalOptions","apiKeys","tileMatrixSets","mergeConfig","IConfig","ConfigInterface","defaultGMLGFIStyle","theme","wgs84Resolutions","isKeyConfLoaded","getLayersId","layerName","servicePartsLayer","getLayersConf","layersIdArray","lyrId","layerConf","serviceParams","formats","defaultProjection","globalConstraint","wmtsOptions","tileMatrixSetLimits","tileMatrixSetLink","tmsConf","getTMSConf","layerKey","resourcesByKey","arrayLayerId","getTileMatrixSets","tmsID","getGlobalConstraints","DefaultUrlService","new_key","ProcessIsoCurve","_key","ReverseGeocode","Geocode","GeocodeResponseParser","_parseFeature","geocodeResponse","accuracy","placeAttributes","_type","matchType","locations","mess","query","returnFreeForm","geocodeMethod","returnTrueGeometry","maxResp","GeocodeRequestREST","GeocodeParamREST","searchGeometry","getFilters","getIndex","getSearchGeometry","GeocodeResponse","GeocodedLocation","bbox2Json","circle","circle2Json","polygon2Json","jsonGeom","geoEPSG","time","distance","exclusions","distanceUnit","timeUnit","smoothing","holes","graph","constraintTunnel","constraintPont","constraintAutoroute","constraintType","oIsoCurve","ProcessIsoCurveRequest","mode","postRequest","costType","costValue","profile","direction","ProcessIsoCurveParam","getLocation","getDistanceUnit","getConstraints","constraintArray","getDirection","coords","ProcessIsoCurveResponse","RouteRequestREST","RouteParamREST","startPoint","endPoint","intermediates","viaPoints","optimization","routePreference","getSteps","waysAttributes","getIntermediates","getWaysAttributes","getProfile","getOptimization","legs","legSteps","steps","totalTime","duration","totalDistance","geometryInInstructions","routeGeometry","legList","portions","step","routeInstructions","instruction","modifier","exit","nom_1_droite","toponyme","provideBbox","expectedStartTime","UrlByDefault","getConfig","getAltitude","geocode","reverseGeocode","autoComplete","route","isoCurve","myParams","tabParams","encode","myUrl","firstOccuranceIndex","PARAM_MISSING","PARAM_EMPTY","PARAM_TYPE","PARAM_FORMAT","PARAM_NOT_SUPPORT","PARAM_NOT_SUPPORT_NODEJS","PARAM_UNKNOWN","SERVICE_REQUEST_BUILD","SERVICE_REQUEST_EMPTY","SERVICE_RESPONSE_EXCEPTION","SERVICE_RESPONSE_EXCEPTION_2","SERVICE_RESPONSE_ANALYSE","SERVICE_RESPONSE_ANALYSE_2","SERVICE_RESPONSE_EMPTY","SERVICE_RESPONSE_EMPTY_2","SERVICE_RESPONSE_FORMAT","SERVICE_RESPONSE_FORMAT_2","SERVICE_RESPONSE_FORMAT_3","CLASS_CONSTRUCTOR","clef","parametres","undefinedType","isIE","logMethods","_loggersByName","defaultLogger","bindMethod","methodName","traceForIE","realMethod","replaceLoggingMethods","level","getLevel","methodFactory","debug","levels","SILENT","enableLoggingWhenConsoleArrives","defaultMethodFactory","_level","_loggerName","inheritedLevel","defaultLevel","userLevel","storageKey","persistLevelIfPossible","levelNum","levelName","localStorage","ignore","cookie","getPersistedLevel","storedLevel","cookieName","clearPersistedLevel","removeItem","normalizeLevel","setLevel","persist","setDefaultLevel","resetLevel","TRACE","rebuild","childName","initialLevel","_log","noConflict","getLoggers","globalObject","getGlobal","Headers","Response","Tile","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getter","globalThis","control","Control","_Control","ControlExtended","_createClass","getMap","PositionFactory","update","ANCHORS","_PositionFactory_brand","WeakSet","caller","_classPrivateMethodInitSpec","_assertClassBrand","_createContainer","_setAnchor","prepend","_existContainer","getOverlayContainerStopEvent","sizeW","offsetWidth","sizeH","offsetHeight","panels","panel","Overlay","lightOrange","darkOrange","turquoiseBlue","defaultOffset","interaction","_extensions","_options","clean","unset","interactions","getInteractions","getArray","getActive","DrawInteraction","SelectInteraction","ModifyInteraction","setActive","timestamp","generate","MathUtils","modulo","decimalToDMS","hemispheres","numDigits","normalizedDegrees","dflPrecision","precision","sec","dmsToDecimal","minutes","seconds","coordinateToDecimal","olCoordinate","toFixed","lng","coordinateToDMS","coordinateToRad","coordinateToGon","coordinateToMeter","coordinateToKMeter","toInteger","isInteger","toFloat","advancedSearchFiltersByDefault","PositionOfInterest","StreetAddress","CadastralParcel","zoomToResultsByDefault","importance","getGeocodedLocationFreeform","geocodedLocation","resultToReturn","toponym","category","postcode","housenumber","getSuggestedLocationFreeform","PJD_3PARAM","PJD_7PARAM","PJD_GRIDSHIFT","PJD_NODATUM","SRS_WGS84_SEMIMAJOR","SRS_WGS84_SEMIMINOR","SRS_WGS84_ESQUARED","SEC_TO_RAD","HALF_PI","SIXTH","RA4","RA6","EPSLN","D2R","R2D","FORTPI","TWO_PI","SPI","ft","to_meter","ignoredChar","testkey","lkey","defData","paramName","paramVal","paramOutname","paramObj","datum","rf","lat_0","lat0","lat_1","lat1","lat_2","lat2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","rectified_grid_angle","lonc","longc","x_0","x0","y_0","y0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","from_greenwich","nadgrids","datumCode","axis","legalAxis","txt","Parser","NEUTRAL","whitespace","latin","keyword","endThings","digets","place","currentObject","mapit","unshift","thing","newObj","sExpr","convert","readCharicter","char","neutral","quoted","afterquote","afterItem","newObjects","d2r","wkt","lisp","projName","PROJECTION","AXIS","axisOrder","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","sphere","ellps","TOWGS84","outName","inName","rename","cleanWKT","defs","def","EPSG","ESRI","IAU2000","WGS84","GOOGLE","codeWords","codes","testObj","testDef","testWKT","auth","checkMercator","maybeProjStr","ext","checkProjStr","testProj","eccent","sinphi","cosphi","con","sign","com","ts","dphi","eccnth","identity","projs","init","es","msfnz","adjust_lon","tsfnz","inverse","phi2z","names","projStore","ellipseName","wgs84","ellipse","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","militargeographische_institut","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","ep2","datum_type","grids","loadedNadgrids","parseNadgridString","optional","mandatory","grid","isNull","secondsToRadians","decodeString","view","Uint8Array","mapNodes","nodes","longitudeShift","latitudeShift","readGridHeader","isLittleEndian","lowerLatitude","getFloat64","upperLatitude","lowerLongitude","upperLongitude","latitudeInterval","longitudeInterval","gridNodeCount","getInt32","readGridNodes","gridHeader","nodesOffset","gridShiftRecords","record","getFloat32","latitudeAccuracy","longitudeAccuracy","Projection","srsCode","parseCode","ourProj","datumDef","a2","b2","sphere_","ecc","getNadgrids","datumObj","extend","geodeticToGeocentric","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geocentricToGeodetic","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","iter","genau","X","Y","Z","checkParams","compareDatums","source_a","source_es","applyGridShift","dest_a","dest_b","dest_es","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","attemptedGrids","outer","subgrids","subgrid","del","lim","applySubgridShift","pin","ct","tb","nadInterpolate","dif","inx","indx","frct","f00","cvs","f10","f11","f01","m11","m10","m00","m01","denorm","xin","yin","zin","checkCoord","enforceAxis","hasZ","toPoint","checkSanity","checkNotWGS","adjust_axis","datum_transform","transformer","transformedArray","checkProj","oProj","fromProj","toProj","single","NUM_100K_SETS","SET_ORIGIN_COLUMN_LETTERS","SET_ORIGIN_ROW_LETTERS","I","O","V","mgrs","UTMtoLL","decode","utm","seasting","easting","snorthing","northing","zoneNumber","zoneLetter","setParm","get100kSetForZone","setColumn","setRow","column","row","parm","colOrigin","rowOrigin","colInt","rowInt","rollover","eccPrimeSquared","T","C","M","LongOriginRad","ZoneNumber","Lat","Long","eccSquared","LatRad","degToRad","LongRad","UTMEasting","UTMNorthing","getLetterDesignator","LLtoUTM","radToDeg","rad","N1","T1","C1","R1","D","LongOrigin","phi1Rad","e1","topRight","LetterDesignator","mgrsString","testChar","hunK","sb","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","remainder","accuracyBonus","sepEastingString","sepNorthingString","sepEasting","sepNorthing","fromMGRS","mgrsStr","toMGRS","C00","C02","C04","C06","C08","C22","C44","C46","C48","C66","C68","C88","en","sphi","cphi","MAX_ITER","pj_mlfn","pj_enfn","ml0","delta_lon","sin_phi","cos_phi","al","als","tq","ml","pj_inv_mlfn","tan_phi","ds","temp","log1py","hypot","pp","B","cos_2B","h1","h2","arg_r","arg_i","hr2","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","cosh_arg_i","hr","hi1","hr1","hi","tmerc","cgb","cbg","utg","gtu","np","Qn","gatg","Zb","clens","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","asinhy","clens_cmplx","adjust_zone","etmerc","dependsOn","esinp","rc","phic0","ratexp","K","srat","gauss","sinc0","cosc0","R2","sinc","cosc","cosl","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","phit","eccen","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","e2","R","b0","k1","k2","k3","Sa1","Sa2","S","rotI","rotB","phy","prevPhy","iteration","TOL","cosph0","F","H","L","sinph0","J","gamma0","projectionName","lamc","lam1","lam2","phi1","phi2","alpha_c","no_off","no_rot","alp","gam","one_es","lam0","singam","cosgam","sinrot","cosrot","rB","ArB","BrA","u_0","v_pole_n","v_pole_s","U","W","Qp","Sp","Tp","Vp","Up","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","f0","rh1","s45","s90","fi0","alfa","uq","u0","n0","s0","ro0","ad","gfi","deltav","eps","ro","czech","fi1","e0","e3","e0fn","e1fn","e2fn","e3fn","mlfn","lam","nl","gN","tl","asq","cl","imlfn","nl1","rl1","tl1","dl","dsq","adjust_lat","P00","P01","P02","P10","P11","P20","S_POLE","N_POLE","EQUIT","OBLIQ","qp","qsfnz","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","coslam","sinlam","q","sinb","cosb","cCe","sCe","ab","cosz","sinz","sin_po","cos_po","qs1","qs2","qs0","ns0","qs","phi1z","asinz","eccnts","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","dlat","bl","tanphi","mln","mlnp","ma","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","num_re","num_im","den_re","den_im","den2","d_psi_n","C_y","C_x","delta_theta","ml1","ml2","sinth","costh","gsq","msq","xx","yy","xys","c1","c2","c3","a1","th1","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","Az","G","GH","Hs","kp","cos_c","s2","s3","s4","cosAz","Ee","sinpsi","FACE_ENUM","AREA_ENUM","AREA_0","AREA_1","AREA_2","AREA_3","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","face","one_minus_f","one_minus_f_squared","xy","sinlon","cosmu","tannu","tantheta","invert_sign","xa","lp","COEFS_X","COEFS_Y","FXC","FYC","RC1","NODES","poly3_val","coefs","f_df","max_err","iters","upd","newton_rapshon","poly3_der","azi","tilt","pn1","rp","pfact","cg","sg","cw","sw","yt","ba","bm","bq","flip_axis","sweep","radius_g_1","radius_g","rone_es","radius_p","radius_p2","radius_p_inv2","shape","v_x","v_y","v_z","det","v_zp","A1","A2","A3","A4","paramLat","paramLatSq","paramLatPow6","EPS10","e_fwd","am1","e_inv","s_fwd","cphi1","s_inv","defaultDatum","Proj","Point","nadgrid","DataView","nFields","detectLittleEndian","header","nSubgridFields","nSubgrids","shiftType","fromSemiMajorAxis","fromSemiMinorAxis","toSemiMajorAxis","toSemiMinorAxis","readHeader","gridOffset","subHeader","lngColumnCount","latColumnCount","readSubgrids","proj4","sterea","stere","somerc","omerc","lcc","krovak","cass","laea","aea","gnom","cea","eqc","poly","nzmg","mill","sinu","moll","eqdc","vandg","aeqd","ortho","qsc","robin","geocent","tpers","geos","eqearth","bonne","projCodes","code1","proj1","code2","proj2","getTransform","addCoordinateTransforms","Register","isLoaded","_register","_code","load","Proj4","registers","loadByDefault","CRS","IGNF","LAMB93","LAMBE","LAMB1","LAMB2","LAMB3","LAMB4","RGF93G","WGS84G","loadByName","AMST63","CROZ63","CSG67","ED50","ETRS89","GUAD48","GUADFM49","IGN63","IGN72","KERG62CAR","MART38","MAYO50","MOOREA87","NTF","NUKU72","REUN47","RGF93","RGFG95","RGM04","RGNC","RGPF","RGR92","RGSPM06","RGTAAF07","RRAF91","STPL69","STPM50","TAHAA","TAHI79","TERA50","WALL78","WGS72","AMST63GEO","CROZ63GEO","CSG67GEO","ED50G","GUAD48GEO","GUADFM49GEO","IGN63GEO","IGN72GEO","KERG62GEO","MART38GEO","MAYO50GEO","MOOREA87GEO","NTFG","NTFP","NUKU72GEO","REUN47GEO","RGFG95GEO","RGM04GEO","RGNCGEO","RGPFGEO","RGR92GEO","RGSPM06GEO","RGTAAF07G","STPL69GEO","STPM50GEO","TAHAAGEO","TAHI79GEO","TERA50G","WALL78GEO","WGS72G","WGS84RRAFGEO","XGEO","AMST63UTM43S","CROZ63UTM39S","CSG67UTM21","CSG67UTM22","GEOPORTALANF","GEOPORTALASP","GEOPORTALCRZ","GEOPORTALFXX","GEOPORTALGUF","GEOPORTALKER","GEOPORTALMYT","GEOPORTALNCL","GEOPORTALPYF","GEOPORTALREU","GEOPORTALSPM","GEOPORTALWLF","GUAD48UTM20","GUADFM49U20","IGN63UTM7S","IGN72UTM58S","KERG62UTM42S","LAMB1C","LAMB2C","LAMB3C","LAMB4C","RGF93CC42","RGF93CC43","RGF93CC44","RGF93CC45","RGF93CC46","RGF93CC47","RGF93CC48","RGF93CC49","RGF93CC50","MART38UTM20","MAYO50UTM38S","MILLER","MOOREA87U6S","NUKU72U7S","RGM04UTM38S","RGNCUTM57S","RGNCUTM58S","RGNCUTM59S","RGPFUTM5S","RGPFUTM6S","RGPFUTM7S","RGR92UTM40S","RGSPM06U21","STPL69UTM43S","STPM50UTM21","TAHAAUTM05S","TAHI51UTM06S","TAHI79UTM6S","TERA50STEREO","UTM01SW84","UTM20W84GUAD","UTM20W84MART","UTM22RGFG95","UTM39SW84","UTM42SW84","UTM43SW84","WALL78UTM1S","ETRS89GEO","ETRS89LAEA","ETRS89LCC","UTM26ETRS89","UTM27ETRS89","UTM28ETRS89","UTM29ETRS89","UTM30ETRS89","UTM31ETRS89","UTM32ETRS89","UTM33ETRS89","UTM34ETRS89","UTM35ETRS89","UTM36ETRS89","UTM37ETRS89","UTM38ETRS89","projectionsExtent","overload","_extent","getComputedStyle","getPropertyValue","SearchEngineDOM","_addUID","_uid","_createMainContainerElement","_createSearchDivElement","searchDiv","_createShowSearchEnginePictoElement","collapsible","checkDsfr","button","disabled","curr","click","ariaPressed","classList","showAdvancedSearch","display","showGeolocate","showCoordinate","onShowSearchEngineClick","_createSearchInputElement","placeholder","form","preventDefault","onGeocodingSearchSubmit","autocomplete","charCode","which","keyCode","onAutoCompleteSearchText","ID","scrollIntoView","focus","_createSearchResetElement","buttonReset","onSearchResetClick","_createButtonsElement","_createFirstLineWrapper","_createRadioContainer","_createRadioElements","choiceLocations","inputLocations","checked","labelLocations","htmlFor","attachEvent","choiceData","inputData","labelData","_createShowAdvancedSearchElement","span","innerText","_createShowGeolocateElement","onShowSearchGeolocateClick","_createShowSearchByCoordinateElement","_createAdvancedSearchPanelElement","_createAdvancedSearchPanelDivElement","_createGeocodeResultsElement","_createGeocodeResultsHeaderElement","_createGeocodeResultsDivElement","_createAutoCompleteElement","_createCoordinateSearchPanelElement","_createCoordinateSearchPanelDivElement","_createAutoCompleteListElement","_createAutoCompletedLocationContainer","autofocus","_createAutoCompletedLocationTitleElement","_createAutoCompletedLocationElement","GeocodeUtils","onAutoCompletedResultsItemClick","_createSearchedSuggestContainer","_createSearchedSuggestTitleElement","_createSearchedSuggestElement","dataset","onSearchedResultsItemClick","_createAdvancedSearchPanelHeaderElement","divTitle","divClose","_createAdvancedSearchPanelFormElement","advancedSearchCodes","matchesFilters","querySelectorAll","onGeocodingAdvancedSearchSubmit","select","_createAdvancedSearchFormCodeElement","onGeocodingAdvancedSearchCodeChange","option","_createAdvancedSearchFormInputElement","_createAdvancedSearchFormFiltersElement","_createAdvancedSearchFiltersTableElement","_createAdvancedSearchFiltersAttributElement","filterAttributes","listId","_createGeocodeResultsListElement","ctrlKey","onGeocodedResultsItemClick","_createGeocodedLocationElement","_createCoordinateSearchPanelHeaderElement","onCoordinateSearchClose","_createCoordinateSearchPanelFormElement","onShowSearchByCoordinateClick","__createCoordinateSearchDivElement","_createCoordinateSearchSystemsLabelElement","_setCoordinateSearchSystemsSelectElement","systems","selectSystem","onCoordinateSearchSystemChange","_createCoordinateSearchUnitsLabelElement","_setCoordinateSearchUnitsSelectElement","selectUnits","onCoordinateSearchUnitsChange","_setCoordinateSearchLngLabelElement","labelLng","_setCoordinateSearchLngInputElement","required","_setCoordinateSearchLngDMSElement","_setCoordinateSearchLatLabelElement","labelLat","_setCoordinateSearchLatInputElement","_setCoordinateSearchLatDMSElement","_createCoordinateSearchSubmitElement","SearchEngine","initialize","_initContainer","_clearResults","_showSearchEngineButton","setPosition","_geocodedLocations","_checkInputOptions","zoomTo","resources","displayButtonClose","displayButtonAdvancedSearch","displayButtonGeolocate","displayButtonCoordinateSearch","advancedSearch","coordinateSearch","searchOptions","addToMap","serviceOptions","geocodeOptions","autocompleteOptions","triggerGeocode","triggerDelay","displayMarker","markerStyle","splitResults","Search","filterServices","filterVectortiles","updateVectortiles","_fillSearchedSuggestListContainer","SelectorID","_inputSearchContainer","_autocompleteContainer","_containerResultsLocation","_containerResultsSuggest","_radioButtonLocation","_radioButtonSuggest","_suggestedLocations","_geocodedContainer","_filterContainer","_currentGeocodingCode","_currentGeocodingLocation","_advancedSearchFilters","_initAdvancedSearchFilters","_advancedSearchCodes","_initAdvancedSearchCodes","_coordinateSearchSystems","_initCoordinateSearchSystems","_currentCoordinateSearchSystems","_currentCoordinateSearchType","_coordinateSearchUnits","_initCoordinateSearchUnits","_currentCoordinateSearchUnits","_coordinateSearchLngInput","_coordinateSearchLatInput","_marker","_markerStyle","_markerUrl","Markers","_displayMarker","_popupContent","_popupDiv","_initPopupDiv","_popupOverlay","_triggerHandler","geocodeResources","geocodeResourcesList","autocompleteResources","autocompleteResourcesList","SearchEngineUtils","advancedSearchFiltersCustom","projectionSystemsByDefault","sys","_setSystem","projectionUnitsByDefault","Geographical","Metric","closer","onclick","picto","onAutoCompleteInputClick","buttonsContainer","firstLineWrapper","radioContainer","radioElements","_this$_createRadioEle2","_slicedToArray","advancedShow","advancedPanel","advancedPanelDiv","advancedHeader","advancedForm","advancedFormFilters","_setFilter","advancedFormInput","geolocateShow","searchByCoordinateShow","coordinatePanel","coordinatePanelDiv","coordinateHeader","coordinateForm","_containerSystems","labelSystems","_containerUnits","labelUnits","_containerCoordinateLng","coordinateLng","coordinateInputLng","_containerCoordinateLat","coordinateLat","coordinateInputLat","submit","autocompleteList","containerResultsLocation","containerResultsSuggest","geocodeDiv","geocodeList","codeFound","lstAttributs","divTable","divFilter","childElementCount","_displaySuggestedLocation","suggests","bOnFailure","_clearGeocodedLocation","getView","setCenter","setZoom","removeOverlay","markerDiv","_onResultMarkerSelect","stopEvent","addOverlay","getZoom","information","popupContent","getPosition","positioning","system","olProjGet","Interactions","opened","updatePosition","_this3","geolocation","getCurrentPosition","viewProj","longitude","latitude","olProjTransform","_setMarker","_setPosition","_getCoordinateSearchDMS","selectedIndex","inputSearchTextContainer","_clearSuggestedLocation","_triggerGeocode","_triggerDelay","_requestAutoComplete","_locationsToBeDisplayed","ilocation","_getGeocodeCoordinatesFromFullText","_fillAutoCompletedLocationListContainer","_requestGeocoding","_hideSuggestedLocation","_setLabel","mapProj","_getZoom","addLayer","_fillGeocodedLocationListContainer","_location","_filterOptions","dep","department","insee","absorbedCity","_updateCoordinateSearchElements","lbl"],"sourceRoot":""}