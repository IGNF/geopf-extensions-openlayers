(()=>{var e={562:(e,t,n)=>{"use strict";n.d(t,{A:()=>v});var o=n(7392);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){(function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.add(e)}function a(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,d(o.key),o)}}function c(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function d(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function u(e,t,n){return t=f(t),function(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,h()?Reflect.construct(t,n||[],f(e).constructor):t.apply(e,n))}function h(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(h=function(){return!!e})()}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}const v=function(e){function t(e){return l(this,t),u(this,t,[e])}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(t,e),c(t,[{key:"setPosition",value:function(e){new y(this).set(e)}}])}(n.n(o)());var g=["top-left","top-right","bottom-left","bottom-right"],m=new WeakSet,y=function(){return c((function e(t){return l(this,e),i(this,m),this.caller=t,a(m,this,_).call(this,"top-left"),a(m,this,_).call(this,"top-right"),a(m,this,_).call(this,"bottom-left"),a(m,this,_).call(this,"bottom-right"),this}),[{key:"set",value:function(e){g.includes(e.toLowerCase())&&(a(m,this,E).call(this,e),document.getElementById("position-container-"+e).appendChild(this.caller.element))}}])}();function b(e){return!!document.getElementById("position-container-"+e)}function _(e){if(!a(m,this,b).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position-container-"+e,this.caller.getMap().getOverlayContainerStopEvent().appendChild(t)}}function E(e){var t=function(e){return document.getElementById("position-container-"+e).offsetWidth},n=function(e){e.style.top="unset",e.style.bottom="unset",e.style.left="unset",e.style.right="unset"};n(this.caller.element),this.caller.element.style.position="unset";var o=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(0!==o.length){o.forEach((function(e){n(e)}));var r=o[0];switch(e.toLowerCase()){case"top-left":r.style.top="0px",r.style.left=t(e)+"px";break;case"bottom-left":r.style.bottom="0px",r.style.left=t(e)+"px";break;case"top-right":r.style.top="0px",r.style.right=t(e)+"px";break;case"bottom-right":r.style.bottom="0px",r.style.right=t(e)+"px"}}}},3766:(e,t,n)=>{"use strict";n.d(t,{default:()=>Dt});var o=n(562),r=n(1363),i=n(2938),a=n(6736),l=n(5844);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h.apply(this,arguments)}function f(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p(e){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(e)}var v=p(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),g=p(/Edge/i),m=p(/firefox/i),y=p(/safari/i)&&!p(/chrome/i)&&!p(/android/i),b=p(/iP(ad|od|hone)/i),_=p(/chrome/i)&&p(/android/i),E={capture:!1,passive:!1};function w(e,t,n){e.addEventListener(t,n,!v&&E)}function I(e,t,n){e.removeEventListener(t,n,!v&&E)}function P(e,t){if(t){if(">"===t[0]&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch(e){return!1}return!1}}function D(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function L(e,t,n,o){if(e){n=n||document;do{if(null!=t&&(">"===t[0]?e.parentNode===n&&P(e,t):P(e,t))||o&&e===n)return e;if(e===n)break}while(e=D(e))}return null}var T,C=/\s+/g;function S(e,t,n){if(e&&t)if(e.classList)e.classList[n?"add":"remove"](t);else{var o=(" "+e.className+" ").replace(C," ").replace(" "+t+" "," ");e.className=(o+(n?" "+t:"")).replace(C," ")}}function O(e,t,n){var o=e&&e.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in o||-1!==t.indexOf("webkit")||(t="-webkit-"+t),o[t]=n+("string"==typeof n?"":"px")}}function x(e,t){var n="";if("string"==typeof e)n=e;else do{var o=O(e,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!t&&(e=e.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function A(e,t,n){if(e){var o=e.getElementsByTagName(t),r=0,i=o.length;if(n)for(;r<i;r++)n(o[r],r);return o}return[]}function M(){var e=document.scrollingElement;return e||document.documentElement}function k(e,t,n,o,r){if(e.getBoundingClientRect||e===window){var i,a,l,s,c,d,u;if(e!==window&&e.parentNode&&e!==M()?(a=(i=e.getBoundingClientRect()).top,l=i.left,s=i.bottom,c=i.right,d=i.height,u=i.width):(a=0,l=0,s=window.innerHeight,c=window.innerWidth,d=window.innerHeight,u=window.innerWidth),(t||n)&&e!==window&&(r=r||e.parentNode,!v))do{if(r&&r.getBoundingClientRect&&("none"!==O(r,"transform")||n&&"static"!==O(r,"position"))){var h=r.getBoundingClientRect();a-=h.top+parseInt(O(r,"border-top-width")),l-=h.left+parseInt(O(r,"border-left-width")),s=a+i.height,c=l+i.width;break}}while(r=r.parentNode);if(o&&e!==window){var f=x(r||e),p=f&&f.a,g=f&&f.d;f&&(s=(a/=g)+(d/=g),c=(l/=p)+(u/=p))}return{top:a,left:l,bottom:s,right:c,width:u,height:d}}}function N(e,t,n){for(var o=j(e,!0),r=k(e)[t];o;){var i=k(o)[n];if(!("top"===n||"left"===n?r>=i:r<=i))return o;if(o===M())break;o=j(o,!1)}return!1}function G(e,t,n,o){for(var r=0,i=0,a=e.children;i<a.length;){if("none"!==a[i].style.display&&a[i]!==Xe.ghost&&(o||a[i]!==Xe.dragged)&&L(a[i],n.draggable,e,!1)){if(r===t)return a[i];r++}i++}return null}function R(e,t){for(var n=e.lastElementChild;n&&(n===Xe.ghost||"none"===O(n,"display")||t&&!P(n,t));)n=n.previousElementSibling;return n||null}function B(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)"TEMPLATE"===e.nodeName.toUpperCase()||e===Xe.clone||t&&!P(e,t)||n++;return n}function U(e){var t=0,n=0,o=M();if(e)do{var r=x(e),i=r.a,a=r.d;t+=e.scrollLeft*i,n+=e.scrollTop*a}while(e!==o&&(e=e.parentNode));return[t,n]}function j(e,t){if(!e||!e.getBoundingClientRect)return M();var n=e,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=O(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return M();if(o||t)return n;o=!0}}}while(n=n.parentNode);return M()}function F(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}function Y(e,t){return function(){if(!T){var n=arguments;1===n.length?e.call(this,n[0]):e.apply(this,n),T=setTimeout((function(){T=void 0}),t)}}}function V(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function H(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function X(e,t,n){var o={};return Array.from(e.children).forEach((function(r){var i,a,l,s;if(L(r,t.draggable,e,!1)&&!r.animated&&r!==n){var c=k(r);o.left=Math.min(null!==(i=o.left)&&void 0!==i?i:1/0,c.left),o.top=Math.min(null!==(a=o.top)&&void 0!==a?a:1/0,c.top),o.right=Math.max(null!==(l=o.right)&&void 0!==l?l:-1/0,c.right),o.bottom=Math.max(null!==(s=o.bottom)&&void 0!==s?s:-1/0,c.bottom)}})),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var Z="Sortable"+(new Date).getTime();function W(){var e,t=[];return{captureAnimationState:function(){(t=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(e){if("none"!==O(e,"display")&&e!==Xe.ghost){t.push({target:e,rect:k(e)});var n=c({},t[t.length-1].rect);if(e.thisAnimationDuration){var o=x(e,!0);o&&(n.top-=o.f,n.left-=o.e)}e.fromRect=n}}))},addAnimationState:function(e){t.push(e)},removeAnimationState:function(e){t.splice(function(e,t){for(var n in e)if(e.hasOwnProperty(n))for(var o in t)if(t.hasOwnProperty(o)&&t[o]===e[n][o])return Number(n);return-1}(t,{target:e}),1)},animateAll:function(n){var o=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof n&&n());var r=!1,i=0;t.forEach((function(e){var t=0,n=e.target,a=n.fromRect,l=k(n),s=n.prevFromRect,c=n.prevToRect,d=e.rect,u=x(n,!0);u&&(l.top-=u.f,l.left-=u.e),n.toRect=l,n.thisAnimationDuration&&F(s,l)&&!F(a,l)&&(d.top-l.top)/(d.left-l.left)==(a.top-l.top)/(a.left-l.left)&&(t=function(e,t,n,o){return Math.sqrt(Math.pow(t.top-e.top,2)+Math.pow(t.left-e.left,2))/Math.sqrt(Math.pow(t.top-n.top,2)+Math.pow(t.left-n.left,2))*o.animation}(d,s,c,o.options)),F(l,a)||(n.prevFromRect=a,n.prevToRect=l,t||(t=o.options.animation),o.animate(n,d,l,t)),t&&(r=!0,i=Math.max(i,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout((function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null}),t),n.thisAnimationDuration=t)})),clearTimeout(e),r?e=setTimeout((function(){"function"==typeof n&&n()}),i):"function"==typeof n&&n(),t=[]},animate:function(e,t,n,o){if(o){O(e,"transition",""),O(e,"transform","");var r=x(this.el),i=r&&r.a,a=r&&r.d,l=(t.left-n.left)/(i||1),s=(t.top-n.top)/(a||1);e.animatingX=!!l,e.animatingY=!!s,O(e,"transform","translate3d("+l+"px,"+s+"px,0)"),this.forRepaintDummy=function(e){return e.offsetWidth}(e),O(e,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),O(e,"transform","translate3d(0,0,0)"),"number"==typeof e.animated&&clearTimeout(e.animated),e.animated=setTimeout((function(){O(e,"transition",""),O(e,"transform",""),e.animated=!1,e.animatingX=!1,e.animatingY=!1}),o)}}}}var z=[],q={initializeByDefault:!0},K={mount:function(e){for(var t in q)q.hasOwnProperty(t)&&!(t in e)&&(e[t]=q[t]);z.forEach((function(t){if(t.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")})),z.push(e)},pluginEvent:function(e,t,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=e+"Global";z.forEach((function(o){t[o.pluginName]&&(t[o.pluginName][r]&&t[o.pluginName][r](c({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](c({sortable:t},n)))}))},initializePlugins:function(e,t,n,o){for(var r in z.forEach((function(o){var r=o.pluginName;if(e.options[r]||o.initializeByDefault){var i=new o(e,t,e.options);i.sortable=e,i.options=e.options,e[r]=i,h(n,i.defaults)}})),e.options)if(e.options.hasOwnProperty(r)){var i=this.modifyOption(e,r,e.options[r]);void 0!==i&&(e.options[r]=i)}},getEventProperties:function(e,t){var n={};return z.forEach((function(o){"function"==typeof o.eventProperties&&h(n,o.eventProperties.call(t[o.pluginName],e))})),n},modifyOption:function(e,t,n){var o;return z.forEach((function(r){e[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[t]&&(o=r.optionListeners[t].call(e[r.pluginName],n))})),o}};function Q(e){var t=e.sortable,n=e.rootEl,o=e.name,r=e.targetEl,i=e.cloneEl,a=e.toEl,l=e.fromEl,s=e.oldIndex,d=e.newIndex,u=e.oldDraggableIndex,h=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t=t||n&&n[Z]){var y,b=t.options,_="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||v||g?(y=document.createEvent("Event")).initEvent(o,!0,!0):y=new CustomEvent(o,{bubbles:!0,cancelable:!0}),y.to=a||n,y.from=l||n,y.item=r||n,y.clone=i,y.oldIndex=s,y.newIndex=d,y.oldDraggableIndex=u,y.newDraggableIndex=h,y.originalEvent=f,y.pullMode=p?p.lastPutMode:void 0;var E=c(c({},m),K.getEventProperties(o,t));for(var w in E)y[w]=E[w];n&&n.dispatchEvent(y),b[_]&&b[_].call(t,y)}}var J=["evt"],$=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,r=f(n,J);K.pluginEvent.bind(Xe)(e,t,c({dragEl:te,parentEl:ne,ghostEl:oe,rootEl:re,nextEl:ie,lastDownEl:ae,cloneEl:le,cloneHidden:se,dragStarted:Ee,putSortable:pe,activeSortable:Xe.active,originalEvent:o,oldIndex:ce,oldDraggableIndex:ue,newIndex:de,newDraggableIndex:he,hideGhostForTarget:Fe,unhideGhostForTarget:Ye,cloneNowHidden:function(){se=!0},cloneNowShown:function(){se=!1},dispatchSortableEvent:function(e){ee({sortable:t,name:e,originalEvent:o})}},r))};function ee(e){Q(c({putSortable:pe,cloneEl:le,targetEl:te,rootEl:re,oldIndex:ce,oldDraggableIndex:ue,newIndex:de,newDraggableIndex:he},e))}var te,ne,oe,re,ie,ae,le,se,ce,de,ue,he,fe,pe,ve,ge,me,ye,be,_e,Ee,we,Ie,Pe,De,Le=!1,Te=!1,Ce=[],Se=!1,Oe=!1,xe=[],Ae=!1,Me=[],ke="undefined"!=typeof document,Ne=b,Ge=g||v?"cssFloat":"float",Re=ke&&!_&&!b&&"draggable"in document.createElement("div"),Be=function(){if(ke){if(v)return!1;var e=document.createElement("x");return e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}}(),Ue=function(e,t){var n=O(e),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=G(e,0,t),i=G(e,1,t),a=r&&O(r),l=i&&O(i),s=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+k(r).width,c=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+k(i).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&a.float&&"none"!==a.float){var d="left"===a.float?"left":"right";return!i||"both"!==l.clear&&l.clear!==d?"horizontal":"vertical"}return r&&("block"===a.display||"flex"===a.display||"table"===a.display||"grid"===a.display||s>=o&&"none"===n[Ge]||i&&"none"===n[Ge]&&s+c>o)?"vertical":"horizontal"},je=function(e){function t(e,n){return function(o,r,i,a){var l=o.options.group.name&&r.options.group.name&&o.options.group.name===r.options.group.name;if(null==e&&(n||l))return!0;if(null==e||!1===e)return!1;if(n&&"clone"===e)return e;if("function"==typeof e)return t(e(o,r,i,a),n)(o,r,i,a);var s=(n?o:r).options.group.name;return!0===e||"string"==typeof e&&e===s||e.join&&e.indexOf(s)>-1}}var n={},o=e.group;o&&"object"==d(o)||(o={name:o}),n.name=o.name,n.checkPull=t(o.pull,!0),n.checkPut=t(o.put),n.revertClone=o.revertClone,e.group=n},Fe=function(){!Be&&oe&&O(oe,"display","none")},Ye=function(){!Be&&oe&&O(oe,"display","")};ke&&!_&&document.addEventListener("click",(function(e){if(Te)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),Te=!1,!1}),!0);var Ve=function(e){if(te){e=e.touches?e.touches[0]:e;var t=(r=e.clientX,i=e.clientY,Ce.some((function(e){var t=e[Z].options.emptyInsertThreshold;if(t&&!R(e)){var n=k(e),o=r>=n.left-t&&r<=n.right+t,l=i>=n.top-t&&i<=n.bottom+t;return o&&l?a=e:void 0}})),a);if(t){var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[Z]._onDragOver(n)}}var r,i,a},He=function(e){te&&te.parentNode[Z]._isOutsideThisEl(e.target)};function Xe(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(e));this.el=e,this.options=t=h({},t),e[Z]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Ue(e,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==Xe.supportPointer&&"PointerEvent"in window&&!y,emptyInsertThreshold:5};for(var o in K.initializePlugins(this,e,n),n)!(o in t)&&(t[o]=n[o]);for(var r in je(t),this)"_"===r.charAt(0)&&"function"==typeof this[r]&&(this[r]=this[r].bind(this));this.nativeDraggable=!t.forceFallback&&Re,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?w(e,"pointerdown",this._onTapStart):(w(e,"mousedown",this._onTapStart),w(e,"touchstart",this._onTapStart)),this.nativeDraggable&&(w(e,"dragover",this),w(e,"dragenter",this)),Ce.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),h(this,W())}function Ze(e,t,n,o,r,i,a,l){var s,c,d=e[Z],u=d.options.onMove;return!window.CustomEvent||v||g?(s=document.createEvent("Event")).initEvent("move",!0,!0):s=new CustomEvent("move",{bubbles:!0,cancelable:!0}),s.to=t,s.from=e,s.dragged=n,s.draggedRect=o,s.related=r||t,s.relatedRect=i||k(t),s.willInsertAfter=l,s.originalEvent=a,e.dispatchEvent(s),u&&(c=u.call(d,s,a)),c}function We(e){e.draggable=!1}function ze(){Ae=!1}function qe(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,o=0;n--;)o+=t.charCodeAt(n);return o.toString(36)}function Ke(e){return setTimeout(e,0)}function Qe(e){return clearTimeout(e)}Xe.prototype={constructor:Xe,_isOutsideThisEl:function(e){this.el.contains(e)||e===this.el||(we=null)},_getDirection:function(e,t){return"function"==typeof this.options.direction?this.options.direction.call(this,e,t,te):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,o=this.options,r=o.preventOnFilter,i=e.type,a=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,l=(a||e).target,s=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,c=o.filter;if(function(e){Me.length=0;var t=e.getElementsByTagName("input"),n=t.length;for(;n--;){var o=t[n];o.checked&&Me.push(o)}}(n),!te&&!(/mousedown|pointerdown/.test(i)&&0!==e.button||o.disabled)&&!s.isContentEditable&&(this.nativeDraggable||!y||!l||"SELECT"!==l.tagName.toUpperCase())&&!((l=L(l,o.draggable,n,!1))&&l.animated||ae===l)){if(ce=B(l),ue=B(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return ee({sortable:t,rootEl:s,name:"filter",targetEl:l,toEl:n,fromEl:n}),$("filter",t,{evt:e}),void(r&&e.cancelable&&e.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=L(s,o.trim(),n,!1))return ee({sortable:t,rootEl:o,name:"filter",targetEl:l,fromEl:n,toEl:n}),$("filter",t,{evt:e}),!0}))))return void(r&&e.cancelable&&e.preventDefault());o.handle&&!L(s,o.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var o,r=this,i=r.el,a=r.options,l=i.ownerDocument;if(n&&!te&&n.parentNode===i){var s=k(n);if(re=i,ne=(te=n).parentNode,ie=te.nextSibling,ae=n,fe=a.group,Xe.dragged=te,ve={target:te,clientX:(t||e).clientX,clientY:(t||e).clientY},be=ve.clientX-s.left,_e=ve.clientY-s.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,te.style["will-change"]="all",o=function(){$("delayEnded",r,{evt:e}),Xe.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!m&&r.nativeDraggable&&(te.draggable=!0),r._triggerDragStart(e,t),ee({sortable:r,name:"choose",originalEvent:e}),S(te,a.chosenClass,!0))},a.ignore.split(",").forEach((function(e){A(te,e.trim(),We)})),w(l,"dragover",Ve),w(l,"mousemove",Ve),w(l,"touchmove",Ve),w(l,"mouseup",r._onDrop),w(l,"touchend",r._onDrop),w(l,"touchcancel",r._onDrop),m&&this.nativeDraggable&&(this.options.touchStartThreshold=4,te.draggable=!0),$("delayStart",this,{evt:e}),!a.delay||a.delayOnTouchOnly&&!t||this.nativeDraggable&&(g||v))o();else{if(Xe.eventCanceled)return void this._onDrop();w(l,"mouseup",r._disableDelayedDrag),w(l,"touchend",r._disableDelayedDrag),w(l,"touchcancel",r._disableDelayedDrag),w(l,"mousemove",r._delayedDragTouchMoveHandler),w(l,"touchmove",r._delayedDragTouchMoveHandler),a.supportPointer&&w(l,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(o,a.delay)}}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){te&&We(te),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;I(e,"mouseup",this._disableDelayedDrag),I(e,"touchend",this._disableDelayedDrag),I(e,"touchcancel",this._disableDelayedDrag),I(e,"mousemove",this._delayedDragTouchMoveHandler),I(e,"touchmove",this._delayedDragTouchMoveHandler),I(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||"touch"==e.pointerType&&e,!this.nativeDraggable||t?this.options.supportPointer?w(document,"pointermove",this._onTouchMove):w(document,t?"touchmove":"mousemove",this._onTouchMove):(w(te,"dragend",this),w(re,"dragstart",this._onDragStart));try{document.selection?Ke((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(e,t){if(Le=!1,re&&te){$("dragStarted",this,{evt:t}),this.nativeDraggable&&w(document,"dragover",He);var n=this.options;!e&&S(te,n.dragClass,!1),S(te,n.ghostClass,!0),Xe.active=this,e&&this._appendGhost(),ee({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(ge){this._lastX=ge.clientX,this._lastY=ge.clientY,Fe();for(var e=document.elementFromPoint(ge.clientX,ge.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(ge.clientX,ge.clientY))!==t;)t=e;if(te.parentNode[Z]._isOutsideThisEl(e),t)do{if(t[Z]){if(t[Z]._onDragOver({clientX:ge.clientX,clientY:ge.clientY,target:e,rootEl:t})&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);Ye()}},_onTouchMove:function(e){if(ve){var t=this.options,n=t.fallbackTolerance,o=t.fallbackOffset,r=e.touches?e.touches[0]:e,i=oe&&x(oe,!0),a=oe&&i&&i.a,l=oe&&i&&i.d,s=Ne&&De&&U(De),c=(r.clientX-ve.clientX+o.x)/(a||1)+(s?s[0]-xe[0]:0)/(a||1),d=(r.clientY-ve.clientY+o.y)/(l||1)+(s?s[1]-xe[1]:0)/(l||1);if(!Xe.active&&!Le){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(oe){i?(i.e+=c-(me||0),i.f+=d-(ye||0)):i={a:1,b:0,c:0,d:1,e:c,f:d};var u="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");O(oe,"webkitTransform",u),O(oe,"mozTransform",u),O(oe,"msTransform",u),O(oe,"transform",u),me=c,ye=d,ge=r}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!oe){var e=this.options.fallbackOnBody?document.body:re,t=k(te,!0,Ne,!0,e),n=this.options;if(Ne){for(De=e;"static"===O(De,"position")&&"none"===O(De,"transform")&&De!==document;)De=De.parentNode;De!==document.body&&De!==document.documentElement?(De===document&&(De=M()),t.top+=De.scrollTop,t.left+=De.scrollLeft):De=M(),xe=U(De)}S(oe=te.cloneNode(!0),n.ghostClass,!1),S(oe,n.fallbackClass,!0),S(oe,n.dragClass,!0),O(oe,"transition",""),O(oe,"transform",""),O(oe,"box-sizing","border-box"),O(oe,"margin",0),O(oe,"top",t.top),O(oe,"left",t.left),O(oe,"width",t.width),O(oe,"height",t.height),O(oe,"opacity","0.8"),O(oe,"position",Ne?"absolute":"fixed"),O(oe,"zIndex","100000"),O(oe,"pointerEvents","none"),Xe.ghost=oe,e.appendChild(oe),O(oe,"transform-origin",be/parseInt(oe.style.width)*100+"% "+_e/parseInt(oe.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,o=e.dataTransfer,r=n.options;$("dragStart",this,{evt:e}),Xe.eventCanceled?this._onDrop():($("setupClone",this),Xe.eventCanceled||((le=H(te)).removeAttribute("id"),le.draggable=!1,le.style["will-change"]="",this._hideClone(),S(le,this.options.chosenClass,!1),Xe.clone=le),n.cloneId=Ke((function(){$("clone",n),Xe.eventCanceled||(n.options.removeCloneOnHide||re.insertBefore(le,te),n._hideClone(),ee({sortable:n,name:"clone"}))})),!t&&S(te,r.dragClass,!0),t?(Te=!0,n._loopId=setInterval(n._emulateDragOver,50)):(I(document,"mouseup",n._onDrop),I(document,"touchend",n._onDrop),I(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,te)),w(document,"drop",n),O(te,"transform","translateZ(0)")),Le=!0,n._dragStartId=Ke(n._dragStarted.bind(n,t,e)),w(document,"selectstart",n),Ee=!0,y&&O(document.body,"user-select","none"))},_onDragOver:function(e){var t,n,o,r,i=this.el,a=e.target,l=this.options,s=l.group,d=Xe.active,u=fe===s,h=l.sort,f=pe||d,p=this,v=!1;if(!Ae){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),a=L(a,l.draggable,i,!0),M("dragOver"),Xe.eventCanceled)return v;if(te.contains(e.target)||a.animated&&a.animatingX&&a.animatingY||p._ignoreWhileAnimating===a)return j(!1);if(Te=!1,d&&!l.disabled&&(u?h||(o=ne!==re):pe===this||(this.lastPutMode=fe.checkPull(this,d,te,e))&&s.checkPut(this,d,te,e))){if(r="vertical"===this._getDirection(e,a),t=k(te),M("dragOverValid"),Xe.eventCanceled)return v;if(o)return ne=re,U(),this._hideClone(),M("revert"),Xe.eventCanceled||(ie?re.insertBefore(te,ie):re.appendChild(te)),j(!0);var g=R(i,l.draggable);if(!g||function(e,t,n){var o=k(R(n.el,n.options.draggable)),r=X(n.el,n.options,oe),i=10;return t?e.clientX>r.right+i||e.clientY>o.bottom&&e.clientX>o.left:e.clientY>r.bottom+i||e.clientX>o.right&&e.clientY>o.top}(e,r,this)&&!g.animated){if(g===te)return j(!1);if(g&&i===e.target&&(a=g),a&&(n=k(a)),!1!==Ze(re,i,te,t,a,n,e,!!a))return U(),g&&g.nextSibling?i.insertBefore(te,g.nextSibling):i.appendChild(te),ne=i,F(),j(!0)}else if(g&&function(e,t,n){var o=k(G(n.el,0,n.options,!0)),r=X(n.el,n.options,oe),i=10;return t?e.clientX<r.left-i||e.clientY<o.top&&e.clientX<o.right:e.clientY<r.top-i||e.clientY<o.bottom&&e.clientX<o.left}(e,r,this)){var m=G(i,0,l,!0);if(m===te)return j(!1);if(n=k(a=m),!1!==Ze(re,i,te,t,a,n,e,!1))return U(),i.insertBefore(te,m),ne=i,F(),j(!0)}else if(a.parentNode===i){n=k(a);var y,b,_,E=te.parentNode!==i,w=!function(e,t,n){var o=n?e.left:e.top,r=n?e.right:e.bottom,i=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,s=n?t.width:t.height;return o===a||r===l||o+i/2===a+s/2}(te.animated&&te.toRect||t,a.animated&&a.toRect||n,r),I=r?"top":"left",P=N(a,"top","top")||N(te,"top","top"),D=P?P.scrollTop:void 0;if(we!==a&&(b=n[I],Se=!1,Oe=!w&&l.invertSwap||E),y=function(e,t,n,o,r,i,a,l){var s=o?e.clientY:e.clientX,c=o?n.height:n.width,d=o?n.top:n.left,u=o?n.bottom:n.right,h=!1;if(!a)if(l&&Pe<c*r){if(!Se&&(1===Ie?s>d+c*i/2:s<u-c*i/2)&&(Se=!0),Se)h=!0;else if(1===Ie?s<d+Pe:s>u-Pe)return-Ie}else if(s>d+c*(1-r)/2&&s<u-c*(1-r)/2)return function(e){return B(te)<B(e)?1:-1}(t);if((h=h||a)&&(s<d+c*i/2||s>u-c*i/2))return s>d+c/2?1:-1;return 0}(e,a,n,r,w?1:l.swapThreshold,null==l.invertedSwapThreshold?l.swapThreshold:l.invertedSwapThreshold,Oe,we===a),0!==y){var T=B(te);do{T-=y,_=ne.children[T]}while(_&&("none"===O(_,"display")||_===oe))}if(0===y||_===a)return j(!1);we=a,Ie=y;var C=a.nextElementSibling,x=!1,A=Ze(re,i,te,t,a,n,e,x=1===y);if(!1!==A)return 1!==A&&-1!==A||(x=1===A),Ae=!0,setTimeout(ze,30),U(),x&&!C?i.appendChild(te):a.parentNode.insertBefore(te,x?C:a),P&&V(P,0,D-P.scrollTop),ne=te.parentNode,void 0===b||Oe||(Pe=Math.abs(b-k(a)[I])),F(),j(!0)}if(i.contains(te))return j(!1)}return!1}function M(l,s){$(l,p,c({evt:e,isOwner:u,axis:r?"vertical":"horizontal",revert:o,dragRect:t,targetRect:n,canSort:h,fromSortable:f,target:a,completed:j,onMove:function(n,o){return Ze(re,i,te,t,n,k(n),e,o)},changed:F},s))}function U(){M("dragOverAnimationCapture"),p.captureAnimationState(),p!==f&&f.captureAnimationState()}function j(t){return M("dragOverCompleted",{insertion:t}),t&&(u?d._hideClone():d._showClone(p),p!==f&&(S(te,pe?pe.options.ghostClass:d.options.ghostClass,!1),S(te,l.ghostClass,!0)),pe!==p&&p!==Xe.active?pe=p:p===Xe.active&&pe&&(pe=null),f===p&&(p._ignoreWhileAnimating=a),p.animateAll((function(){M("dragOverAnimationComplete"),p._ignoreWhileAnimating=null})),p!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(a===te&&!te.animated||a===i&&!a.animated)&&(we=null),l.dragoverBubble||e.rootEl||a===document||(te.parentNode[Z]._isOutsideThisEl(e.target),!t&&Ve(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),v=!0}function F(){de=B(te),he=B(te,l.draggable),ee({sortable:p,name:"change",toEl:i,newIndex:de,newDraggableIndex:he,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){I(document,"mousemove",this._onTouchMove),I(document,"touchmove",this._onTouchMove),I(document,"pointermove",this._onTouchMove),I(document,"dragover",Ve),I(document,"mousemove",Ve),I(document,"touchmove",Ve)},_offUpEvents:function(){var e=this.el.ownerDocument;I(e,"mouseup",this._onDrop),I(e,"touchend",this._onDrop),I(e,"pointerup",this._onDrop),I(e,"touchcancel",this._onDrop),I(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;de=B(te),he=B(te,n.draggable),$("drop",this,{evt:e}),ne=te&&te.parentNode,de=B(te),he=B(te,n.draggable),Xe.eventCanceled||(Le=!1,Oe=!1,Se=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Qe(this.cloneId),Qe(this._dragStartId),this.nativeDraggable&&(I(document,"drop",this),I(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),y&&O(document.body,"user-select",""),O(te,"transform",""),e&&(Ee&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),oe&&oe.parentNode&&oe.parentNode.removeChild(oe),(re===ne||pe&&"clone"!==pe.lastPutMode)&&le&&le.parentNode&&le.parentNode.removeChild(le),te&&(this.nativeDraggable&&I(te,"dragend",this),We(te),te.style["will-change"]="",Ee&&!Le&&S(te,pe?pe.options.ghostClass:this.options.ghostClass,!1),S(te,this.options.chosenClass,!1),ee({sortable:this,name:"unchoose",toEl:ne,newIndex:null,newDraggableIndex:null,originalEvent:e}),re!==ne?(de>=0&&(ee({rootEl:ne,name:"add",toEl:ne,fromEl:re,originalEvent:e}),ee({sortable:this,name:"remove",toEl:ne,originalEvent:e}),ee({rootEl:ne,name:"sort",toEl:ne,fromEl:re,originalEvent:e}),ee({sortable:this,name:"sort",toEl:ne,originalEvent:e})),pe&&pe.save()):de!==ce&&de>=0&&(ee({sortable:this,name:"update",toEl:ne,originalEvent:e}),ee({sortable:this,name:"sort",toEl:ne,originalEvent:e})),Xe.active&&(null!=de&&-1!==de||(de=ce,he=ue),ee({sortable:this,name:"end",toEl:ne,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){$("nulling",this),re=te=ne=oe=ie=le=ae=se=ve=ge=Ee=de=he=ce=ue=we=Ie=pe=fe=Xe.dragged=Xe.ghost=Xe.clone=Xe.active=null,Me.forEach((function(e){e.checked=!0})),Me.length=me=ye=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":te&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.cancelable&&e.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],n=this.el.children,o=0,r=n.length,i=this.options;o<r;o++)L(e=n[o],i.draggable,this.el,!1)&&t.push(e.getAttribute(i.dataIdAttr)||qe(e));return t},sort:function(e,t){var n={},o=this.el;this.toArray().forEach((function(e,t){var r=o.children[t];L(r,this.options.draggable,o,!1)&&(n[e]=r)}),this),t&&this.captureAnimationState(),e.forEach((function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return L(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(void 0===t)return n[e];var o=K.modifyOption(this,e,t);n[e]=void 0!==o?o:t,"group"===e&&je(n)},destroy:function(){$("destroy",this);var e=this.el;e[Z]=null,I(e,"mousedown",this._onTapStart),I(e,"touchstart",this._onTapStart),I(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(I(e,"dragover",this),I(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),(function(e){e.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ce.splice(Ce.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!se){if($("hideClone",this),Xe.eventCanceled)return;O(le,"display","none"),this.options.removeCloneOnHide&&le.parentNode&&le.parentNode.removeChild(le),se=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(se){if($("showClone",this),Xe.eventCanceled)return;te.parentNode!=re||this.options.group.revertClone?ie?re.insertBefore(le,ie):re.appendChild(le):re.insertBefore(le,te),this.options.group.revertClone&&this.animate(te,le),O(le,"display",""),se=!1}}else this._hideClone()}},ke&&w(document,"touchmove",(function(e){(Xe.active||Le)&&e.cancelable&&e.preventDefault()})),Xe.utils={on:w,off:I,css:O,find:A,is:function(e,t){return!!L(e,t,e,!1)},extend:function(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},throttle:Y,closest:L,toggleClass:S,clone:H,index:B,nextTick:Ke,cancelNextTick:Qe,detectDirection:Ue,getChild:G},Xe.get=function(e){return e[Z]},Xe.mount=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t[0].constructor===Array&&(t=t[0]),t.forEach((function(e){if(!e.prototype||!e.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(e));e.utils&&(Xe.utils=c(c({},Xe.utils),e.utils)),K.mount(e)}))},Xe.create=function(e,t){return new Xe(e,t)},Xe.version="1.15.2";var Je,$e,et,tt,nt,ot,rt=[],it=!1;function at(){rt.forEach((function(e){clearInterval(e.pid)})),rt=[]}function lt(){clearInterval(ot)}var st=Y((function(e,t,n,o){if(t.scroll){var r,i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,l=t.scrollSensitivity,s=t.scrollSpeed,c=M(),d=!1;$e!==n&&($e=n,at(),Je=t.scroll,r=t.scrollFn,!0===Je&&(Je=j(n,!0)));var u=0,h=Je;do{var f=h,p=k(f),v=p.top,g=p.bottom,m=p.left,y=p.right,b=p.width,_=p.height,E=void 0,w=void 0,I=f.scrollWidth,P=f.scrollHeight,D=O(f),L=f.scrollLeft,T=f.scrollTop;f===c?(E=b<I&&("auto"===D.overflowX||"scroll"===D.overflowX||"visible"===D.overflowX),w=_<P&&("auto"===D.overflowY||"scroll"===D.overflowY||"visible"===D.overflowY)):(E=b<I&&("auto"===D.overflowX||"scroll"===D.overflowX),w=_<P&&("auto"===D.overflowY||"scroll"===D.overflowY));var C=E&&(Math.abs(y-i)<=l&&L+b<I)-(Math.abs(m-i)<=l&&!!L),S=w&&(Math.abs(g-a)<=l&&T+_<P)-(Math.abs(v-a)<=l&&!!T);if(!rt[u])for(var x=0;x<=u;x++)rt[x]||(rt[x]={});rt[u].vx==C&&rt[u].vy==S&&rt[u].el===f||(rt[u].el=f,rt[u].vx=C,rt[u].vy=S,clearInterval(rt[u].pid),0==C&&0==S||(d=!0,rt[u].pid=setInterval(function(){o&&0===this.layer&&Xe.active._onTouchMove(nt);var t=rt[this.layer].vy?rt[this.layer].vy*s:0,n=rt[this.layer].vx?rt[this.layer].vx*s:0;"function"==typeof r&&"continue"!==r.call(Xe.dragged.parentNode[Z],n,t,e,nt,rt[this.layer].el)||V(rt[this.layer].el,n,t)}.bind({layer:u}),24))),u++}while(t.bubbleScroll&&h!==c&&(h=j(h,!1)));it=d}}),30),ct=function(e){var t=e.originalEvent,n=e.putSortable,o=e.dragEl,r=e.activeSortable,i=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var s=n||r;a();var c=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,d=document.elementFromPoint(c.clientX,c.clientY);l(),s&&!s.el.contains(d)&&(i("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function dt(){}function ut(){}dt.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=G(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(t,o):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:ct},h(dt,{pluginName:"revertOnSpill"}),ut.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:ct},h(ut,{pluginName:"removeOnSpill"});Xe.mount(new function(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?w(document,"dragover",this._handleAutoScroll):this.options.supportPointer?w(document,"pointermove",this._handleFallbackAutoScroll):t.touches?w(document,"touchmove",this._handleFallbackAutoScroll):w(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;this.options.dragOverBubble||t.rootEl||this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?I(document,"dragover",this._handleAutoScroll):(I(document,"pointermove",this._handleFallbackAutoScroll),I(document,"touchmove",this._handleFallbackAutoScroll),I(document,"mousemove",this._handleFallbackAutoScroll)),lt(),at(),clearTimeout(T),T=void 0},nulling:function(){nt=$e=Je=it=ot=et=tt=null,rt.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,o=(e.touches?e.touches[0]:e).clientX,r=(e.touches?e.touches[0]:e).clientY,i=document.elementFromPoint(o,r);if(nt=e,t||this.options.forceAutoScrollFallback||g||v||y){st(e,this.options,i,t);var a=j(i,!0);!it||ot&&o===et&&r===tt||(ot&&lt(),ot=setInterval((function(){var i=j(document.elementFromPoint(o,r),!0);i!==a&&(a=i,at()),st(e,n.options,i,t)}),10),et=o,tt=r)}else{if(!this.options.bubbleScroll||j(i,!0)===M())return void at();st(e,this.options,j(i,!1),!1)}}},h(e,{pluginName:"scroll",initializeByDefault:!0})}),Xe.mount(ut,dt);const ht=Xe;const ft={_createDraggableElement:function(e,t){navigator.userAgent.match(/chrome|chromium|crios/i)?ht.create(e,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(e){t._onDragAndDropLayerClick(e)}}):ht.create(e,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(e){t._onDragAndDropLayerClick(e)}})},_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher"),e.className="GPwidget gpf-widget gpf-widget-button",e},_createMainLayersShowElement:function(){var e=document.createElement("input");return e.id=this._addUID("GPshowLayersList"),e.type="checkbox",e},_createMainLayersElement:function(){var e=document.createElement("dialog");return e.id=this._addUID("GPlayersList"),e.className="GPpanel gpf-panel fr-modal",e},_createMainLayersDivElement:function(){var e=document.createElement("div");return e.className="gpf-panel__body fr-modal__body",e},_createMainPictoElement:function(){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowLayersListPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon-layerswitcher fr-btn",t.htmlFor=this._addUID("GPshowLayersList"),t.title="Afficher/masquer le gestionnaire de couches",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.addEventListener?t.addEventListener("click",(function(t){var n="true"===t.target.ariaPressed;if(t.target.setAttribute("aria-pressed",!n),document.getElementById(e._addUID("GPshowLayersList")).checked=n,document.getElementById(e._addUID("GPshowLayersList")).checked){for(var o=document.getElementsByClassName("GPlayerInfoOpened"),r=0;r<o.length;r++)o[r].className="GPlayerInfo";document.getElementById(e._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}})):t.attachEvent&&t.attachEvent("onclick",(function(t){var n="true"===t.target.ariaPressed;if(t.target.setAttribute("aria-pressed",!n),document.getElementById(e._addUID("GPshowLayersList")).checked){for(var o=document.getElementsByClassName("GPlayerInfoOpened"),r=0;r<o.length;r++)o[r].className="GPlayerInfo";document.getElementById(e._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}})),t},_createMainInfoElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPlayerInfoPanel"),e.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",e},_createContainerLayerElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPlayerSwitcher_ID_"+e.id),t.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",t.appendChild(this._createBasicToolElement(e));for(var n=this._createAdvancedToolShowElement(e),o=0;o<n.length;o++)t.appendChild(n[o]);return t.appendChild(this._createAdvancedToolElement(e)),t},_createBasicToolElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPbasicTools_ID_"+e.id),t.className="GPlayerBasicTools",t.appendChild(this._createBasicToolNameElement(e));for(var n=this._createBasicToolVisibilityElement(e),o=0;o<n.length;o++)t.appendChild(n[o]);return t},_createBasicToolNameElement:function(e){var t=document.createElement("label");return t.id=this._addUID("GPname_ID_"+e.id),t.className="GPlayerName gpf-label fr-label",t.title=e.description||e.title,t.innerHTML=e.title,t},_createBasicToolVisibilityElement:function(e){var t=[],n=void 0===e.visibility||e.visibility,o=this._addUID("GPvisibility_ID_"+e.id),r=document.createElement("input");r.id=o,r.type="checkbox",r.checked=n;var i=document.createElement("label");i.htmlFor=o,i.id=this._addUID("GPvisibilityPicto_ID_"+e.id),i.className="GPlayerVisibility gpf-label fr-label",i.title="Afficher/masquer la couche";var a=this;return r.addEventListener?r.addEventListener("click",(function(e){a._onVisibilityLayerClick(e)})):r.attachEvent&&r.attachEvent("onclick",(function(e){a._onVisibilityLayerClick(e)})),t.push(r),t.push(i),t},_createAdvancedToolShowElement:function(e){var t=[],n=document.createElement("label");n.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+e.id),n.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+e.id),n.title="Plus d'outils",n.className="GPshowMoreOptions GPshowLayerAdvancedTools gpf-label fr-label";var o=document.createElement("input");return o.type="checkbox",o.id=this._addUID("GPshowAdvancedTools_ID_"+e.id),t.push(o),t.push(n),t},_createAdvancedToolElement:function(e){var t=document.createElement("div");if(t.id=this._addUID("GPadvancedTools_ID_"+e.id),t.className="GPlayerAdvancedTools",t.appendChild(this._createAdvancedToolDeleteElement(e)),e.title&&e.description&&t.appendChild(this._createAdvancedToolInformationElement(e)),"feature"!==e.type)for(var n=this._createAdvancedToolOpacityElement(e),o=0;o<n.length;o++)t.appendChild(n[o]);return t},_createAdvancedToolDeleteElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPremove_ID_"+e.id),t.className="GPlayerRemove",t.title="Supprimer la couche",t.layerId=e.id;var n=this;return t.addEventListener?t.addEventListener("click",(function(e){n._onDropLayerClick(e)})):t.attachEvent&&t.attachEvent("onclick",(function(e){n._onDropLayerClick(e)})),t},_createAdvancedToolInformationElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPinfo_ID_"+e.id),t.className="GPlayerInfo",t.title="Informations/légende",t.layerId=e.id;var n=this;return t.addEventListener?t.addEventListener("click",(function(e){n._onOpenLayerInfoClick(e)})):t.attachEvent&&t.attachEvent("onclick",(function(e){n._onOpenLayerInfoClick(e)})),t},_createAdvancedToolOpacityElement:function(e){var t=[],n=document.createElement("div");n.id=this._addUID("GPopacity_ID_"+e.id),n.className="GPlayerOpacity",n.title="Opacité";var o=void 0!==e.opacity?e.opacity:1;o=Math.round(100*o);var r=document.createElement("input");r.id=this._addUID("GPopacityValueDiv_ID_"+e.id),r.type="range",r.value=o,r.ariaLabel="Opacité";var i=this;r.addEventListener?r.addEventListener("change",(function(e){i._onChangeLayerOpacity(e)})):r.attachEvent&&r.attachEvent("onchange",(function(e){i._onChangeLayerOpacity(e)})),r.addEventListener?r.addEventListener("input",(function(e){i._onChangeLayerOpacity(e)})):r.attachEvent&&r.attachEvent("oninput",(function(e){i._onChangeLayerOpacity(e)})),n.appendChild(r);var a=document.createElement("div");a.id=this._addUID("GPopacityValueDiv_ID_"+e.id),a.className="GPlayerOpacityValue";var l=document.createElement("span");return l.id=this._addUID("GPopacityValue_ID_"+e.id),l.innerHTML=o+"%",a.appendChild(l),t.push(n),t.push(a),t},_createContainerLayerInfoElement:function(e){var t=document.createElement("div");t.id=this._addUID("GPlayerInfoContent");var n=document.createElement("div");if(n.id=this._addUID("GPlayerInfoTitle"),n.innerHTML=e.title,t.appendChild(n),e.quicklookUrl){var o=document.createElement("div");o.id=this._addUID("GPlayerInfoQuicklook"),o.title="Afficher un aperçu de la couche";var r=document.createElement("a");r.href=e.quicklookUrl,r.appendChild(o),t.appendChild(r)}var i=document.createElement("div");i.id=this._addUID("GPlayerInfoClose"),i.title="Fermer la fenêtre";var a=this,l=function(){document.getElementById(a._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var e=document.getElementsByClassName("GPlayerInfoOpened"),t=0;t<e.length;t++)e[t].className="GPlayerInfo"};i.addEventListener?i.addEventListener("click",l):i.attachEvent&&i.attachEvent("onclick",l),t.appendChild(i);var s=document.createElement("div");if(s.id=this._addUID("GPlayerInfoDescription"),s.innerHTML=e.description,t.appendChild(s),e.metadata){var c=document.createElement("div");c.id=this._addUID("GPlayerInfoMetadata");var d=document.createElement("div");d.className="GPlayerInfoSubtitle",d.innerHTML="Métadonnées",c.appendChild(d);for(var u=0;u<e.metadata.length;u++){var h=e.metadata[u].url,f=document.createElement("div");f.className="GPlayerInfoLink";var p=document.createElement("a");p.href=h,p.innerHTML=h,f.appendChild(p),c.appendChild(f)}0!==e.metadata.length&&t.appendChild(c)}if(e.legends){var v=document.createElement("div");v.id=this._addUID("GPlayerInfoLegend");var g=document.createElement("div");g.className="GPlayerInfoSubtitle",g.innerHTML="Légende",v.appendChild(g);for(var m={},y=e.maxScaleDenominator||56e7,b=0;b<e.legends.length;b++){var _=e.legends[b].minScaleDenominator;if(_){var E=_.toString();_=Math.round(parseInt(E.substring(0,3),10)/10)*Math.pow(10,E.length-2)}else _=270;m[_]=e.legends[b]}for(var w in m)if(m.hasOwnProperty(w)){var I=m[w].url;if("string"==typeof I&&-1===I.toLowerCase().indexOf("nolegend.jpg")){var P=document.createElement("div");P.className="GPlayerInfoLink",y=m[w].maxScaleDenominator||y;var D=document.createElement("a");D.href=I,D.innerHTML="Du 1/"+w+" au 1/"+y,P.appendChild(D),v.appendChild(P)}else delete m[w]}0!==Object.keys(m).length&&t.appendChild(v)}return t}};function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function vt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,gt(o.key),o)}}function gt(e){var t=function(e,t){if("object"!=pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=pt(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pt(t)?t:t+""}function mt(e,t,n){return t=Et(t),yt(e,bt()?Reflect.construct(t,n||[],Et(e).constructor):t.apply(e,n))}function yt(e,t){if(t&&("object"==pt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}function _t(){return _t="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=Et(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},_t.apply(null,arguments)}function Et(e){return Et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Et(e)}function wt(e,t){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},wt(e,t)}var It=l.A.getLogger("layerswitcher"),Pt=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=(e=e||{}).options||{},r=e.layers||[];if(!((n=mt(this,t,[{element:o.element,target:o.target,render:o.render}]))instanceof t))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(r))throw new Error("ERROR WRONG_TYPE : layers should be an array");if("object"!==pt(o))throw new Error("ERROR WRONG_TYPE : options should be an object");return n._initialize(o,r),n.container=n._initContainer(o),n.element?n.element.appendChild(n.container):n.element=n.container,yt(n,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&wt(e,t)}(t,e),n=t,o=[{key:"setMap",value:function(e){var n=this;if(e)this._addMapLayers(e),this._listeners.onMoveListener=e.on("moveend",(function(){return n._onMapMoveEnd(e)})),this._listeners.onAddListener=e.getLayers().on("add",(function(e){var t,o=e.element;o.hasOwnProperty("gpLayerId")?t=o.gpLayerId:(t=n._layerId,o.gpLayerId=t,n._layerId++),n._layers[t]||n.addLayer(o)})),this._listeners.onRemoveListener=e.getLayers().on("remove",(function(e){var t=e.element,o=t.gpLayerId;n._layers[o]&&n.removeLayer(t)}));else{(0,r.unByKey)(this._listeners.onMoveListener),(0,r.unByKey)(this._listeners.onAddListener),(0,r.unByKey)(this._listeners.onRemoveListener);for(var o=this._layersOrder.length-1;o>=0;o--)this._layersOrder[o].layer.setZIndex(0)}_t(Et(t.prototype),"setMap",this).call(this,e),this.options.position&&this.setPosition(this.options.position)}},{key:"addLayer",value:function(e,t){var n=this,o=this.getMap();if(t=t||{},e){var r=e.gpLayerId;if(void 0!==r){var i=!1;if(o.getLayers().forEach((function(e){e.gpLayerId===r&&(i=!0)})),i)if(this._layers[r]){for(var a in t)t.hasOwnProperty(a)&&(this._layers[r][a]=t[a]);if(t.title){var l=document.getElementById(this._addUID("GPname_ID_"+r));l&&(l.innerHTML=t.title,l.title=t.description||t.title)}var s=document.getElementById(this._addUID("GPinfo_ID_"+r));if(!document.getElementById(this._addUID("GPinfo_ID_"+r))&&t.description){var c=document.getElementById(this._addUID("GPadvancedTools_ID_"+r));c&&c.appendChild(this._createAdvancedToolInformationElement({id:r}))}s&&"GPlayerInfoOpened"===s.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",s.className="GPlayerInfo")}else{var d=this.getLayerInfo(e)||{},u=e.getOpacity(),h=e.getVisible(),f=this.isInRange(e,o),p={layer:e,id:r,opacity:null!=u?u:1,visibility:null==h||h,inRange:null==f||f,title:null!=t.title?t.title:d._title||r,description:t.description||d._description||null,legends:t.legends||d._legends||[],metadata:t.metadata||d._metadata||[],quicklookUrl:t.quicklookUrl||d._quicklookUrl||null};this._layers[r]=p;var v=this._createLayerDiv(p);this._layers[r].div=v,e.getZIndex&&0!==e.getZIndex()&&void 0!==e.getZIndex()||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(p),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(v,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",(function(e){return n._updateLayerOpacity(e)})),this._listeners.updateLayerVisibility=e.on("change:visible",(function(e){return n._updateLayerVisibility(e)})),null==this._layers[r].onZIndexChangeEvent&&(this._layers[r].onZIndexChangeEvent=e.on("change:zIndex",(function(){return n._updateLayersOrder()})))}else It.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )")}else It.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e)}else It.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter")}},{key:"removeLayer",value:function(e){if(e){(0,r.unByKey)(this._listeners.updateLayerOpacity),(0,r.unByKey)(this._listeners.updateLayerVisibility),It.trace(e);var t=e.gpLayerId,n=document.getElementById(this._addUID("GPlayersList")).firstChild,o=document.getElementById(this._addUID("GPinfo_ID_"+t));o&&"GPlayerInfoOpened"===o.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",o.className="GPlayerInfo");var i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));i&&n.removeChild(i);var a=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(a,1),this._lastZIndex--;for(var l=this._layersOrder,s=0;s<l.length;s++)l[s].layer.setZIndex(this._lastZIndex-s);delete this._layers[t]}}},{key:"setCollapsed",value:function(e){if(void 0!==e){var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(e&&t||!e&&!t)){if(!t){for(var n=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<n.length;o++)n[o].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!e}}else It.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter")}},{key:"getCollapsed",value:function(){return this.collapsed}},{key:"setRemovable",value:function(e,t){if(e){var n=e.gpLayerId;if(null!=n){var o=document.getElementById(this._addUID("GPremove_ID_"+n));o&&(!1===t?o.style.display="none":!0===t&&(o.style.display="block"))}else It.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method")}}},{key:"_initialize",value:function(e,t){this._uid=a.A.generate(),this.options=e,this.options.layers=t,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=void 0===e.collapsed||e.collapsed,this._layerListContainer=null,this._listeners={};for(var n=0;n<t.length;n++){var o=t[n].layer;if(o){var r;o.hasOwnProperty("gpLayerId")?r=o.gpLayerId:(r=this._layerId,o.gpLayerId=r,this._layerId++);var i=t[n].config||{},l=o.getOpacity(),s=o.getVisible(),c={layer:o,id:r,opacity:null!=l?l:1,visibility:null==s||s,title:null!=i.title?i.title:i.id?i.id:r,description:i.description||null,legends:i.legends||[],metadata:i.metadata||[],quicklookUrl:i.quicklookUrl||null};this._layers[r]=c}}}},{key:"_initContainer",value:function(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var n=this,o=function(e){this.collapsed=!e.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",(function(e){o.call(n,e)}));var r=this._createMainPictoElement();e.appendChild(r);var i=this._createMainLayersElement();e.appendChild(i);var a=this._layerListContainer=this._createMainLayersDivElement();i.appendChild(a),this._createDraggableElement(a,this);var l=this._createMainInfoElement();return e.appendChild(l),e}},{key:"_addMapLayers",value:function(e){var t=this;for(var n in this._layersIndex={},e.getLayers().forEach((function(n){var o;n.hasOwnProperty("gpLayerId")?o=n.gpLayerId:(o=t._layerId,n.gpLayerId=o,t._layerId++);var r=t.getLayerInfo(n)||{};if(t._layers[o])t._layers[o].opacity=n.getOpacity(),t._layers[o].visibility=n.getVisible(),t._layers[o].inRange=t.isInRange(n,e);else{var i=n.getOpacity(),a=n.getVisible(),l=t.isInRange(n,e),s={layer:n,id:o,opacity:null!=i?i:1,visibility:null==a||a,inRange:null==l||l,title:r._title||o,description:r._description||null,legends:r._legends||[],metadata:r._metadata||[],quicklookUrl:r._quicklookUrl||null};t._layers[o]=s}if(t._listeners.updateLayerOpacity=n.on("change:opacity",(function(e){return t._updateLayerOpacity(e)})),t._listeners._updateLayerVisibility=n.on("change:visible",(function(e){return t._updateLayerVisibility(e)})),void 0!==n.getZIndex){var c=n.getZIndex()||0;t._layersIndex[c]&&Array.isArray(t._layersIndex[c])||(t._layersIndex[c]=[]),t._layersIndex[c].push(t._layers[o])}})),this._layersIndex)if(this._layersIndex.hasOwnProperty(n))for(var o=this._layersIndex[n],r=0;r<o.length;r++)this._layersOrder.unshift(o[r]),this._lastZIndex++,o[r].layer.setZIndex(this._lastZIndex),null==this._layers[o[r].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[o[r].layer.gpLayerId].onZIndexChangeEvent=o[r].layer.on("change:zIndex",(function(){return t._updateLayersOrder()})));for(var i=0;i<this._layersOrder.length;i++){var a=this._layersOrder[i],l=this._createLayerDiv(a);this._layerListContainer.appendChild(l),this._layers[a.id].div=l}}},{key:"_createLayerDiv",value:function(e){var t=e.legends&&0!==e.legends.length,n=e.metadata&&0!==e.metadata.length,o=e.quicklookUrl;(t||n||o)&&(e.displayInformationElement=!0);var r=this._createContainerLayerElement(e);return e.inRange||r.classList.add("outOfRange"),r}},{key:"_onChangeLayerOpacity",value:function(e){var t=e.target.id,n=a.A.index(t),o=this._layers[n].layer,r=e.target.value;document.getElementById(this._addUID("GPopacityValue_ID_"+n)).innerHTML=r+"%",o.setOpacity(r/100)}},{key:"_updateLayerOpacity",value:function(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var n=e.target.gpLayerId,o=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+n));o&&(o.value=Math.round(100*t));var r=document.getElementById(this._addUID("GPopacityValue_ID_"+n));r&&(r.innerHTML=Math.round(100*t)+"%")}},{key:"_onVisibilityLayerClick",value:function(e){var t=e.target.id,n=a.A.index(t);this._layers[n].layer.setVisible(e.target.checked)}},{key:"_updateLayerVisibility",value:function(e){var t=e.target.getVisible(),n=e.target.gpLayerId,o=document.getElementById(this._addUID("GPvisibility_ID_"+n));o&&(o.checked=t)}},{key:"_updateLayersOrder",value:function(){var e=this,t=this.getMap();if(t){var n,o;for(var i in this._layersIndex={},t.getLayers().forEach((function(t){o=t.gpLayerId,(0,r.unByKey)(e._layers[o].onZIndexChangeEvent),e._layers[o].onZIndexChangeEvent=null,n=null,void 0!==t.getZIndex&&(n=t.getZIndex(),e._layersIndex[n]&&Array.isArray(e._layersIndex[n])||(e._layersIndex[n]=[]),e._layersIndex[n].push(e._layers[o]))})),this._lastZIndex=0,this._layersOrder=[],this._layersIndex)if(this._layersIndex.hasOwnProperty(i))for(var a=this._layersIndex[i],l=0;l<a.length;l++)this._layersOrder.unshift(a[l]),this._lastZIndex++,null==this._layers[a[l].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[a[l].layer.gpLayerId].onZIndexChangeEvent=a[l].layer.on("change:zIndex",(function(){return e._updateLayersOrder()})));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var s=0;s<this._layersOrder.length;s++){var c=this._layersOrder[s];this._layerListContainer.appendChild(c.div)}}else It.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}},{key:"_onOpenLayerInfoClick",value:function(e){var t,n,o=e.target.id,r=a.A.index(o),i=this._layers[r];if("GPlayerInfoOpened"===(o=document.getElementById(e.target.id)).className)return void 0!==o.classList&&(o.classList.remove("GPlayerInfoOpened"),o.classList.add("GPlayerInfo")),void 0!==(t=document.getElementById(this._addUID("GPlayerInfoPanel"))).classList&&(t.classList.remove("GPpanel"),t.classList.remove("GPlayerInfoPanelOpened"),t.classList.add("GPlayerInfoPanelClosed")),n=document.getElementById(this._addUID("GPlayerInfoContent")),void t.removeChild(n);for(var l=document.getElementsByClassName("GPlayerInfoOpened"),s=0;s<l.length;s++)l[s].className="GPlayerInfo";void 0!==o.classList&&(o.classList.remove("GPlayerInfo"),o.classList.add("GPlayerInfoOpened")),void 0!==(t=document.getElementById(this._addUID("GPlayerInfoPanel"))).classList&&(t.classList.add("GPpanel"),t.classList.remove("GPlayerInfoPanelClosed"),t.classList.add("GPlayerInfoPanelOpened")),(n=document.getElementById(this._addUID("GPlayerInfoContent")))&&t.removeChild(n);var c={title:i.title,description:i.description,quicklookUrl:i.quicklookUrl,metadata:i.metadata,legends:i.legends},d=i.layer.getMaxResolution();c._maxScaleDenominator=d===1/0?56e7:Math.round(d/28e-5);var u=this._createContainerLayerInfoElement(c);t.appendChild(u)}},{key:"_onDropLayerClick",value:function(e){var t=e.target.id,n=a.A.index(t),o=this._layers[n].layer;this.getMap().getLayers().remove(o)}},{key:"_onDragAndDropLayerClick",value:function(){var e=this,t=this.getMap(),n=document.querySelectorAll("div.GPlayerSwitcher_layer"),o=n.length;this._layersOrder=[];for(var i=0;i<n.length;i++){var l=n[i].id,s=a.A.index(l),c=this._layers[s].layer;(0,r.unByKey)(this._layers[s].onZIndexChangeEvent),this._layers[s].onZIndexChangeEvent=null,c.setZIndex&&(c.setZIndex(o),this._layersOrder.push(this._layers[s]),o--),null==this._layers[s].onZIndexChangeEvent&&(this._layers[s].onZIndexChangeEvent=c.on("change:zIndex",(function(){return e._updateLayersOrder()})))}t.updateSize()}},{key:"_onMapMoveEnd",value:function(e){var t=this;e.getLayers().forEach((function(n){var o=n.gpLayerId;if(t._layers[o]){var r=t._layers[o];t.isInRange(n,e)&&!r.inRange?(r.inRange=!0,document.getElementById(t._addUID("GPlayerSwitcher_ID_"+o)).classList.remove("outOfRange")):!t.isInRange(n,e)&&r.inRange&&(r.inRange=!1,document.getElementById(t._addUID("GPlayerSwitcher_ID_"+o)).classList.add("outOfRange"))}}))}},{key:"getLayerDOMId",value:function(e){var t=null;return this.getMap().getLayers().forEach((function(n){n===e&&(t=n.hasOwnProperty("gpLayerId")?n.gpLayerId:null)})),null!==t?this._addUID("GPlayerSwitcher_ID_"+t):null}},{key:"isInRange",value:function(e,t){if(t){var n=t.getView().getResolution();if(n>e.getMaxResolution()||n<e.getMinResolution())return!1;var o=t.getView().calculateExtent(t.getSize()),r=e.getExtent();return!(r&&!(0,i.intersects)(o,r))}}},{key:"getLayerInfo",value:function(e){var t={};if(void 0!==e.getProperties&&void 0!==e.getSource){var n=e.getProperties(),o=n.source;o&&(t._title=o._title||n.id||"",t._description=o._description||"",t._quicklookUrl=o._quicklookUrl||"",t._metadata=o._metadata||[],t._legends=o._legends||[])}return t}}],o&&vt(n.prototype,o),l&&vt(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,l}(o.A);Object.assign(Pt.prototype,ft);const Dt=Pt;window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=Pt)},5844:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var o=n(3065);const r={getLogger:function(e){if(void 0===t)var t={env:{VERBOSE:!1}};t.env.VERBOSE?o.enableAll():o.disableAll();var n=e||"default";return o.getLogger(n)},disableAll:function(){var e=o.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].disableAll()}},enableAll:function(){var e=o.getLoggers();for(var t in e){if(Object.hasOwnProperty.call(e,t))e[t].enableAll()}}}},6736:(e,t,n)=>{"use strict";var o;n.d(t,{A:()=>r});const r={generate:(o=Math.floor(Date.now()),function(){return o++}),name:function(e){var t=null,n=e.lastIndexOf("-");return t=-1===n?e:e.substring(0,n),t},index:function(e){var t=null,n=this.name(e),o=n.lastIndexOf("_");return-1!==o&&(t=n.substring(o+1)),t},uuid:function(e){var t=null,n=e.lastIndexOf("-");return-1!==n&&(t=parseInt(e.substring(n+1),10)),t}}},3065:function(e,t,n){var o,r;!function(i,a){"use strict";o=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),o=["trace","debug","info","warn","error"],r={},i=null;function a(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(o){return"debug"===o&&(o="log"),typeof console!==t&&("trace"===o&&n?l:void 0!==console[o]?a(console,o):void 0!==console.log?a(console,"log"):e)}function c(){for(var n=this.getLevel(),r=0;r<o.length;r++){var i=o[r];this[i]=r<n?e:this.methodFactory(i,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function d(e){return function(){typeof console!==t&&(c.call(this),this[e].apply(this,arguments))}}function u(e,t,n){return s(e)||d.apply(this,arguments)}function h(e,n){var a,l,s,d=this,h="loglevel";function f(e){var n=(o[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"="+n+";"}catch(e){}}}function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,o=encodeURIComponent(h),r=n.indexOf(o+"=");-1!==r&&(e=/^([^;]+)/.exec(n.slice(r+o.length+1))[1])}catch(e){}return void 0===d.levels[e]&&(e=void 0),e}}function v(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function g(e){var t=e;if("string"==typeof t&&void 0!==d.levels[t.toUpperCase()]&&(t=d.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=d.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),d.name=e,d.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},d.methodFactory=n||u,d.getLevel=function(){return null!=s?s:null!=l?l:a},d.setLevel=function(e,t){return s=g(e),!1!==t&&f(s),c.call(d)},d.setDefaultLevel=function(e){l=g(e),p()||d.setLevel(e,!1)},d.resetLevel=function(){s=null,v(),c.call(d)},d.enableAll=function(e){d.setLevel(d.levels.TRACE,e)},d.disableAll=function(e){d.setLevel(d.levels.SILENT,e)},d.rebuild=function(){if(i!==d&&(a=g(i.getLevel())),c.call(d),i===d)for(var e in r)r[e].rebuild()},a=g(i?i.getLevel():"WARN");var m=p();null!=m&&(s=g(m)),c.call(d)}(i=new h).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=r[e];return t||(t=r[e]=new h(e,i.methodFactory)),t};var f=typeof window!==t?window.log:void 0;return i.noConflict=function(){return typeof window!==t&&window.log===i&&(window.log=f),i},i.getLoggers=function(){return r},i.default=i,i},void 0===(r="function"==typeof o?o.call(t,n,t,e):o)||(e.exports=r)}()},1363:e=>{"use strict";e.exports=ol.Observable},7392:e=>{"use strict";e.exports=ol.control.Control},2938:e=>{"use strict";e.exports=ol.extent}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var o={};(()=>{"use strict";n.d(o,{default:()=>F});var e=n(562);const t=ol.sphere,r=ol.geom;var i=n(5844),a=n(6736);const l={_addUID:function(e){return this._uid?e+"-"+this._uid:e},_createMainContainerElement:function(){var e=document.createElement("div");return e.id=this._addUID("GPmeasureArea"),e.className="GPwidget gpf-widget gpf-widget-button",e},_createShowMeasureAreaPictoElement:function(){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMeasureAreaPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon gpf-btn-icon-area fr-btn",t.title="Mesurer une surface",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.addEventListener?t.addEventListener("click",(function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),e.onShowMeasureAreaClick(t)})):t.attachEvent&&t.attachEvent("onclick",(function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),e.onShowMeasureAreaClick(t)})),t}},s=ol.Overlay;var c=n.n(s);const d=ol.interaction,u=ol.style,h=ol.layer.Vector;var f=n.n(h);const p=ol.source.Vector;var v=n.n(p),g=n(7392),m=n.n(g);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}const b={detectSupport:function(){var e=!0,t=window.navigator.userAgent.toLowerCase();return-1===t.indexOf("iphone")&&-1===t.indexOf("ipod")&&-1===t.indexOf("ipad")&&-1===t.indexOf("android")&&-1===t.indexOf("mobile")&&-1===t.indexOf("blackberry")&&-1===t.indexOf("tablet")&&-1===t.indexOf("phone")&&-1===t.indexOf("touch")||(e=!1),-1===t.indexOf("msie")&&-1===t.indexOf("trident")||(e=!0),e},assign:function(e,t){for(var n in e=e||{},t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},mergeParams:function(e,t,n){if(e&&t)for(var o in void 0===n&&(n=!0),t)t.hasOwnProperty(o)&&("object"===y(t[o])?e.hasOwnProperty(o)?this.mergeParams(e[o],t[o],n):e[o]=t[o]:e.hasOwnProperty(o)?n&&(e[o]=t[o]):e[o]=t[o])}};var _=i.A.getLogger("interactions");const E={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(e,t){_.trace("unset()");var n={};b.mergeParams(n,this._options),b.mergeParams(n,t);for(var o=e.getInteractions().getArray(),r=0;r<o.length;r++)if(o[r].getActive()&&(o[r]instanceof d.Draw||o[r]instanceof d.Select||o[r]instanceof d.Modify)){var i=o[r].getProperties(),a=i.name;if(void 0!==a&&this._extensions.indexOf(a)>-1){if(n.current&&n.current===a)continue;o[r].setActive(!1);var l=i.source;if(void 0!==l&&l instanceof m())for(var s in n)if(n.hasOwnProperty(s)){if("current"===s)continue;if("function"==typeof l[s]){var c=Array.isArray(n[s])?n[s]:[n[s]];l[s].apply(l,c)}}}else o[r].setActive(!1)}}};var w=n(3766),I=i.A.getLogger("measures"),P={DEFAULT_POINTER_STYLE:new u.Circle({radius:5,stroke:new u.Stroke({color:"#002A50",width:2}),fill:new u.Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new u.Style({fill:new u.Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new u.Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new u.Style({fill:new u.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new u.Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var e=this.CLASSNAME;I.trace("["+e+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(e){if(!e.dragging){var t=e.coordinate;if(this.sketch){var n,o=this.sketch.getGeometry();if(n=this.format(o),"LineString"===o.getType())t=o.getLastCoordinate();else{if("Polygon"!==o.getType())return;t=o.getInteriorPoint().getCoordinates()}this.measureTooltipElement.innerHTML=n,this.measureTooltip.setPosition(t)}}},onShowMeasureClick:function(e,t){var n=this.getMap(),o=n.getTargetElement().id,r="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;r&&(this.tools=r.gpShareMeasures||{});var i=this.CLASSNAME;for(var a in this.tools)if(this.tools.hasOwnProperty(a))for(var l=this.tools[a],s=0;s<l.length;s++){var c=l[s];c&&c.active&&a!==i&&c.map===o&&(c.active=!1,null!==c.instance&&c.instance.clean())}if(E.unset(n,{current:"Measures"}),"true"===this._pictoContainer.ariaPressed){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(t);for(var d=0;d<this.tools[i].length;d++)this.tools[i][d].map===o&&(this.tools[i][d].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var u=0;u<this.tools[i].length;u++)this.tools[i][u].map===o&&(this.tools[i][u].active=!1)}},clearMeasureToolTip:function(){var e=this.getMap();if(e)for(var t=e.getTargetElement().getElementsByClassName("ol-overlaycontainer"),n=0;n<t.length;n++){for(var o=t[n],r=o.children.length,i=[],a=0;a<r;a++){var l=o.children[a];if(0!==l.children.length){var s=l.children[0];"GPmeasureTooltip GPmeasureTooltip-static"!==s.className&&"GPmeasureTooltip GPmeasureTooltip-measure"!==s.className||i.push(l)}}for(var c=0;c<i.length;c++)o.removeChild(i[c])}},clearMeasure:function(){var e=this.getMap();this.measureVector&&(e.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(e.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(e){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new(c())({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),e.addOverlay(this.measureTooltip)},createHelpTooltip:function(e){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new(c())({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),e.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(e){this.options.styles=e||{},I.trace("style start",this.options.styles.start);var t={image:P.DEFAULT_POINTER_STYLE,fill:P.DEFAULT_DRAW_START_STYLE.getFill(),stroke:P.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(t.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof u.Style&&(null!=this.options.styles.start.getFill()&&(t.fill=this.options.styles.start.getFill()),null!=this.options.styles.start.getStroke()&&(t.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new u.Style(t),I.trace("style finish",this.options.styles.finish);var n={fill:P.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:P.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof u.Style&&(null!=this.options.styles.finish.getFill()&&(n.fill=this.options.styles.finish.getFill()),null!=this.options.styles.finish.getStroke()&&(n.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new u.Style(n)},addMeasureInteraction:function(e){var t=this.getMap(),n=this;this.measureDraw=new d.Draw({source:this.measureSource,condition:function(e){return!e.originalEvent.ctrlKey||(n.sketch&&this.removeLastPoint(),!1)},type:e,style:this.options.styles.start||P.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),t.addInteraction(this.measureDraw),this.createMeasureTooltip(t),this.measureDraw.on("drawstart",(function(e){n.sketch=e.feature})),this.measureDraw.on("drawend",(function(){if(n.sketch){var e,o,r=n.sketch.getGeometry();if(e=n.format(r),"LineString"===r.getType())o=r.getLastCoordinate();else{if("Polygon"!==r.getType())return;o=r.getInteriorPoint().getCoordinates()}n.measureTooltipElement.innerHTML=e,n.measureTooltip.setPosition(o)}n.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",n.measureTooltip.setOffset([0,-7]),n.sketch=null,n.measureTooltipElement=null,n.createMeasureTooltip(t)}))},initMeasureInteraction:function(){var e=this,t=this.getMap();this.measureSource=new(v()),this.measureVector=new(f())({source:this.measureSource,style:this.options.styles.finish||P.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",t.addLayer(this.measureVector),t.getControls().forEach((function(t){if(t instanceof w.default){var n=e.measureVector.gpLayerId;t._layers[n].title===n&&t.addLayer(e.measureVector,{title:e.options.layerDescription.title,description:e.options.layerDescription.description})}}))}};const D=P;const L={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(e){return e?this._toolboxId+"-"+e:this._toolboxId},getButtonID:function(e){return e?this._buttonId+"-"+e:this._buttonId},getWidgetID:function(e){return e?this._widgetId+"-"+e:this._widgetId},_createToolBoxContainerElement:function(e){var t=document.createElement("div");t.id=this.getToolBoxID(e),t.className="GPshowAdvancedToolPicto";var n=document.createElement("button");n.id=this.getButtonID(e),n.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",n.setAttribute("tabindex","0"),n.setAttribute("aria-pressed",!1);var o=this;n.addEventListener("click",(function(t){var n="true"===t.target.ariaPressed;t.target.setAttribute("aria-pressed",!n),this.blur();var r=document.getElementById(o.getWidgetID(e));"block"===r.style.display?r.style.display="none":r.style.display="block"})),t.appendChild(n);var r=document.createElement("div");return r.id=this.getWidgetID(e),r.addEventListener("click",(function(){}),!1),t.appendChild(r),t}};var T=i.A.getLogger("toolbox"),C={_toolbox:{},add:function(e,t){if(T.trace("ToolBox.add()",t),e){var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;n&&(this._toolbox=n.gpShareMeasureToolBox||{});var o=e.getTargetElement(),r=o.ownerDocument,i=o.id;this._toolbox&&0!==Object.keys(this._toolbox).length?this._toolbox[i]||(this._toolbox[i]=a.A.generate()):(this._toolbox={},this._toolbox[i]=a.A.generate());var l=this._toolbox[i];if(!r.getElementById(this.getToolBoxID(l))){T.trace("create toolbox !");var s=this._createToolBoxContainerElement(l);s.style.pointerEvents="auto",o.getElementsByClassName("ol-overlaycontainer-stopevent")[0].appendChild(s)}var c=r.getElementById(this.getWidgetID(l));t.setTarget(c),n&&(n.gpShareMeasureToolBox=this._toolbox),T.trace("add control to toolbox !")}else T.trace("map doesn't exist !?")}};b.assign(C,L);const S=C;function O(e){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O(e)}function x(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,A(o.key),o)}}function A(e){var t=function(e,t){if("object"!=O(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=O(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O(t)?t:t+""}function M(e,t,n){return t=R(t),k(e,N()?Reflect.construct(t,n||[],R(e).constructor):t.apply(e,n))}function k(e,t){if(t&&("object"==O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N=function(){return!!e})()}function G(){return G="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},G.apply(null,arguments)}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function B(e,t){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B(e,t)}var U=i.A.getLogger("measurearea"),j=function(e){function n(e){var t;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),!((t=M(this,n,[{element:(e=e||{}).element,target:e.target,render:e.render}]))instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return t.CLASSNAME="MeasureArea",t._uid=a.A.generate(),t._pictoContainer=null,t._initialize(e),t._container=t._initializeContainer(),t.element?t.element.appendChild(t._container):t.element=t._container,k(t,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B(e,t)}(n,e),o=n,i=[{key:"setMap",value:function(e){U.trace("setMap()");var t=this.CLASSNAME;e?this.options.target||this.options.position||S.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var o="undefined"!=typeof window?window:"undefined"!=typeof self?self:null;o&&(o.gpShareMeasures||(o.gpShareMeasures={}),o.gpShareMeasures[t]=this.tools[t]),G(R(n.prototype),"setMap",this).call(this,e),this.options.position&&this.setPosition(this.options.position)}},{key:"_initialize",value:function(e){U.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=void 0===e.geodesic||e.geodesic,this.options.position=void 0!==e.position?e.position:null,this.options.target=void 0!==e.target?e.target:null,this.options.render=void 0!==e.render?e.render:null,this.options.layerDescription=void 0!==e.layerDescription?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}},{key:"_initializeContainer",value:function(){U.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}},{key:"addMeasureEvents",value:function(){var e=this;U.trace("call MeasureArea::addMeasureEvents()");var t=this.getMap();t.on("singleclick",(function(t){return e.onPointerMoveHandler(t)})),t.on("pointermove",(function(t){return e.onPointerMoveHandler(t)}))}},{key:"removeMeasureEvents",value:function(){var e=this;U.trace("call MeasureArea::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",(function(t){return e.onPointerMoveHandler(t)})),t.un("pointermove",(function(t){return e.onPointerMoveHandler(t)}))}},{key:"format",value:function(e){var n;if(U.trace("call MeasureArea::format()"),this.options.geodesic){var o=e.clone().getLinearRing(0).getCoordinates();n=Math.abs((0,t.getArea)(new r.Polygon([o])))}else n=e.getArea();return n>1e6?Math.round(n/1e6*100)/100+" km<sup>2</sup>":n>1e5?Math.round(n/1e6*1e3)/1e3+" km<sup>2</sup>":n>1e3?10*Math.round(n/10)+" m<sup>2</sup>":Math.round(100*n)/100+" m<sup>2</sup>"}},{key:"onShowMeasureAreaClick",value:function(e){U.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}}],i&&x(o.prototype,i),l&&x(o,l),Object.defineProperty(o,"prototype",{writable:!1}),o;var o,i,l}(e.A);Object.assign(j.prototype,D),Object.assign(j.prototype,l);const F=j;window.ol&&window.ol.control&&(window.ol.control.MeasureArea=j)})(),GpfExtOlMeasureArea=o.default})();
//# sourceMappingURL=GpfExtOlMeasureArea.js.map